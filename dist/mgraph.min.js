import pako from"pako";import DOMPurify from"dompurify";import mxConfigs from"./config";let{mxBasePath,mxLoadStylesheets,mxResourceExtension,mxForceIncludes,mxImageBasePath,mxLoadResources,mxDefaultLanguage,mxLanguages,urlParams,DOM_PURIFY_CONFIG,STENCIL_PATH,uiTheme,mxLanguage}=mxConfigs,factory=function(opts){var __mxOutput={},mxClient={VERSION:"drawio@v24.7.17",IS_IE:null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("MSIE"),IS_IE11:null!=navigator.userAgent&&!!navigator.userAgent.match(/Trident\/7\./),IS_EDGE:null!=navigator.userAgent&&!!navigator.userAgent.match(/Edge\//),IS_EM:"spellcheck"in document.createElement("textarea")&&8==document.documentMode,VML_PREFIX:"v",OFFICE_PREFIX:"o",IS_NS:null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("Mozilla/")&&navigator.userAgent.indexOf("MSIE")<0&&navigator.userAgent.indexOf("Edge/")<0,IS_OP:null!=navigator.userAgent&&(0<=navigator.userAgent.indexOf("Opera/")||0<=navigator.userAgent.indexOf("OPR/")),IS_OT:null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("Presto/")&&navigator.userAgent.indexOf("Presto/2.4.")<0&&navigator.userAgent.indexOf("Presto/2.3.")<0&&navigator.userAgent.indexOf("Presto/2.2.")<0&&navigator.userAgent.indexOf("Presto/2.1.")<0&&navigator.userAgent.indexOf("Presto/2.0.")<0&&navigator.userAgent.indexOf("Presto/1.")<0,IS_SF:/Apple Computer, Inc/.test(navigator.vendor),IS_ANDROID:0<=navigator.appVersion.indexOf("Android"),IS_IOS:/iP(hone|od|ad)/.test(navigator.platform)||navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints,IS_WEBVIEW:/((iPhone|iPod|iPad).*AppleWebKit(?!.*Version)|; wv)/i.test(navigator.userAgent),IS_GC:/Google Inc/.test(navigator.vendor),IS_CHROMEAPP:null!=window.chrome&&null!=chrome.app&&null!=chrome.app.runtime,IS_FF:-1<navigator.userAgent.toLowerCase().indexOf("firefox"),IS_MT:0<=navigator.userAgent.indexOf("Firefox/")&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0||0<=navigator.userAgent.indexOf("Iceweasel/")&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0||0<=navigator.userAgent.indexOf("SeaMonkey/")&&navigator.userAgent.indexOf("SeaMonkey/1.")<0||0<=navigator.userAgent.indexOf("Iceape/")&&navigator.userAgent.indexOf("Iceape/1.")<0,IS_SVG:"MICROSOFT INTERNET EXPLORER"!=navigator.appName.toUpperCase(),NO_FO:!document.createElementNS||"[object SVGForeignObjectElement]"!==document.createElementNS("http://www.w3.org/2000/svg","foreignObject").toString()||0<=navigator.userAgent.indexOf("Opera/"),IS_WIN:0<navigator.appVersion.indexOf("Win"),IS_MAC:0<navigator.appVersion.indexOf("Mac"),IS_CHROMEOS:/\bCrOS\b/.test(navigator.appVersion),IS_LINUX:/\bLinux\b/.test(navigator.appVersion),IS_TOUCH:"ontouchstart"in document.documentElement,IS_POINTER:null!=window.PointerEvent&&!(0<navigator.appVersion.indexOf("Mac")),IS_LOCAL:document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0,defaultBundles:[],isBrowserSupported:function(){return mxClient.IS_SVG},link:function(t,e,n,i){var l=(n=n||document).createElement("link");l.setAttribute("rel",t),l.setAttribute("href",e),l.setAttribute("charset","UTF-8"),l.setAttribute("type","text/css"),i&&l.setAttribute("id",i),n.getElementsByTagName("head")[0].appendChild(l)},loadResources:function(t,e){var n=mxClient.defaultBundles.length;function i(){0==--n&&t()}for(var l=0;l<mxClient.defaultBundles.length;l++)mxResources.add(mxClient.defaultBundles[l],e,i)},include:function(t){document.write('<script src="'+t+'"><\/script>')}},mxLog=(void 0===mxLoadResources&&(mxLoadResources=!0),void 0===mxForceIncludes&&(mxForceIncludes=!1),void 0===mxResourceExtension&&(mxResourceExtension=".txt"),void 0===mxLoadStylesheets&&(mxLoadStylesheets=!0),void 0!==mxBasePath&&0<mxBasePath.length?("/"==mxBasePath.substring(mxBasePath.length-1)&&(mxBasePath=mxBasePath.substring(0,mxBasePath.length-1)),mxClient.basePath=mxBasePath):mxClient.basePath=".",void 0!==mxImageBasePath&&0<mxImageBasePath.length?("/"==mxImageBasePath.substring(mxImageBasePath.length-1)&&(mxImageBasePath=mxImageBasePath.substring(0,mxImageBasePath.length-1)),mxClient.imageBasePath=mxImageBasePath):mxClient.imageBasePath="images",void 0!==mxLanguage&&null!=mxLanguage?mxClient.language=mxLanguage:mxClient.language=mxClient.IS_IE?navigator.userLanguage:navigator.language,void 0!==mxDefaultLanguage&&null!=mxDefaultLanguage?mxClient.defaultLanguage=mxDefaultLanguage:mxClient.defaultLanguage="en",mxLoadStylesheets&&mxClient.link("stylesheet",mxBasePath+"/css/common.css"),void 0!==mxLanguages&&null!=mxLanguages&&(mxClient.languages=mxLanguages),mxForceIncludes&&(mxClient.include(mxClient.basePath+"/util/mxLog.js"),mxClient.include(mxClient.basePath+"/util/mxObjectIdentity.js"),mxClient.include(mxClient.basePath+"/util/mxDictionary.js"),mxClient.include(mxClient.basePath+"/util/mxResources.js"),mxClient.include(mxClient.basePath+"/util/mxPoint.js"),mxClient.include(mxClient.basePath+"/util/mxRectangle.js"),mxClient.include(mxClient.basePath+"/util/mxEffects.js"),mxClient.include(mxClient.basePath+"/util/mxUtils.js"),mxClient.include(mxClient.basePath+"/util/mxConstants.js"),mxClient.include(mxClient.basePath+"/util/mxEventObject.js"),mxClient.include(mxClient.basePath+"/util/mxMouseEvent.js"),mxClient.include(mxClient.basePath+"/util/mxEventSource.js"),mxClient.include(mxClient.basePath+"/util/mxEvent.js"),mxClient.include(mxClient.basePath+"/util/mxXmlRequest.js"),mxClient.include(mxClient.basePath+"/util/mxClipboard.js"),mxClient.include(mxClient.basePath+"/util/mxWindow.js"),mxClient.include(mxClient.basePath+"/util/mxForm.js"),mxClient.include(mxClient.basePath+"/util/mxImage.js"),mxClient.include(mxClient.basePath+"/util/mxDivResizer.js"),mxClient.include(mxClient.basePath+"/util/mxDragSource.js"),mxClient.include(mxClient.basePath+"/util/mxToolbar.js"),mxClient.include(mxClient.basePath+"/util/mxUndoableEdit.js"),mxClient.include(mxClient.basePath+"/util/mxUndoManager.js"),mxClient.include(mxClient.basePath+"/util/mxUrlConverter.js"),mxClient.include(mxClient.basePath+"/util/mxPanningManager.js"),mxClient.include(mxClient.basePath+"/util/mxPopupMenu.js"),mxClient.include(mxClient.basePath+"/util/mxAutoSaveManager.js"),mxClient.include(mxClient.basePath+"/util/mxAnimation.js"),mxClient.include(mxClient.basePath+"/util/mxMorphing.js"),mxClient.include(mxClient.basePath+"/util/mxImageBundle.js"),mxClient.include(mxClient.basePath+"/util/mxImageExport.js"),mxClient.include(mxClient.basePath+"/util/mxAbstractCanvas2D.js"),mxClient.include(mxClient.basePath+"/util/mxXmlCanvas2D.js"),mxClient.include(mxClient.basePath+"/util/mxSvgCanvas2D.js"),mxClient.include(mxClient.basePath+"/util/mxGuide.js"),mxClient.include(mxClient.basePath+"/shape/mxShape.js"),mxClient.include(mxClient.basePath+"/shape/mxStencil.js"),mxClient.include(mxClient.basePath+"/shape/mxStencilRegistry.js"),mxClient.include(mxClient.basePath+"/shape/mxMarker.js"),mxClient.include(mxClient.basePath+"/shape/mxActor.js"),mxClient.include(mxClient.basePath+"/shape/mxCloud.js"),mxClient.include(mxClient.basePath+"/shape/mxRectangleShape.js"),mxClient.include(mxClient.basePath+"/shape/mxEllipse.js"),mxClient.include(mxClient.basePath+"/shape/mxDoubleEllipse.js"),mxClient.include(mxClient.basePath+"/shape/mxRhombus.js"),mxClient.include(mxClient.basePath+"/shape/mxPolyline.js"),mxClient.include(mxClient.basePath+"/shape/mxArrow.js"),mxClient.include(mxClient.basePath+"/shape/mxArrowConnector.js"),mxClient.include(mxClient.basePath+"/shape/mxText.js"),mxClient.include(mxClient.basePath+"/shape/mxTriangle.js"),mxClient.include(mxClient.basePath+"/shape/mxHexagon.js"),mxClient.include(mxClient.basePath+"/shape/mxLine.js"),mxClient.include(mxClient.basePath+"/shape/mxImageShape.js"),mxClient.include(mxClient.basePath+"/shape/mxLabel.js"),mxClient.include(mxClient.basePath+"/shape/mxCylinder.js"),mxClient.include(mxClient.basePath+"/shape/mxConnector.js"),mxClient.include(mxClient.basePath+"/shape/mxSwimlane.js"),mxClient.include(mxClient.basePath+"/layout/mxGraphLayout.js"),mxClient.include(mxClient.basePath+"/layout/mxStackLayout.js"),mxClient.include(mxClient.basePath+"/layout/mxPartitionLayout.js"),mxClient.include(mxClient.basePath+"/layout/mxCompactTreeLayout.js"),mxClient.include(mxClient.basePath+"/layout/mxRadialTreeLayout.js"),mxClient.include(mxClient.basePath+"/layout/mxFastOrganicLayout.js"),mxClient.include(mxClient.basePath+"/layout/mxCircleLayout.js"),mxClient.include(mxClient.basePath+"/layout/mxParallelEdgeLayout.js"),mxClient.include(mxClient.basePath+"/layout/mxCompositeLayout.js"),mxClient.include(mxClient.basePath+"/layout/mxEdgeLabelLayout.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/model/mxGraphAbstractHierarchyCell.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/model/mxGraphHierarchyNode.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/model/mxGraphHierarchyEdge.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/model/mxGraphHierarchyModel.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/model/mxSwimlaneModel.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/stage/mxHierarchicalLayoutStage.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/stage/mxMedianHybridCrossingReduction.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/stage/mxMinimumCycleRemover.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/stage/mxCoordinateAssignment.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/stage/mxSwimlaneOrdering.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/mxHierarchicalLayout.js"),mxClient.include(mxClient.basePath+"/layout/hierarchical/mxSwimlaneLayout.js"),mxClient.include(mxClient.basePath+"/model/mxGraphModel.js"),mxClient.include(mxClient.basePath+"/model/mxCell.js"),mxClient.include(mxClient.basePath+"/model/mxGeometry.js"),mxClient.include(mxClient.basePath+"/model/mxCellPath.js"),mxClient.include(mxClient.basePath+"/view/mxPerimeter.js"),mxClient.include(mxClient.basePath+"/view/mxPrintPreview.js"),mxClient.include(mxClient.basePath+"/view/mxStylesheet.js"),mxClient.include(mxClient.basePath+"/view/mxCellState.js"),mxClient.include(mxClient.basePath+"/view/mxGraphSelectionModel.js"),mxClient.include(mxClient.basePath+"/view/mxCellEditor.js"),mxClient.include(mxClient.basePath+"/view/mxCellRenderer.js"),mxClient.include(mxClient.basePath+"/view/mxEdgeStyle.js"),mxClient.include(mxClient.basePath+"/view/mxStyleRegistry.js"),mxClient.include(mxClient.basePath+"/view/mxGraphView.js"),mxClient.include(mxClient.basePath+"/view/mxGraph.js"),mxClient.include(mxClient.basePath+"/view/mxCellOverlay.js"),mxClient.include(mxClient.basePath+"/view/mxOutline.js"),mxClient.include(mxClient.basePath+"/view/mxMultiplicity.js"),mxClient.include(mxClient.basePath+"/view/mxLayoutManager.js"),mxClient.include(mxClient.basePath+"/view/mxSwimlaneManager.js"),mxClient.include(mxClient.basePath+"/view/mxTemporaryCellStates.js"),mxClient.include(mxClient.basePath+"/view/mxCellStatePreview.js"),mxClient.include(mxClient.basePath+"/view/mxConnectionConstraint.js"),mxClient.include(mxClient.basePath+"/handler/mxGraphHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxPanningHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxPopupMenuHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxCellMarker.js"),mxClient.include(mxClient.basePath+"/handler/mxSelectionCellsHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxConnectionHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxConstraintHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxRubberband.js"),mxClient.include(mxClient.basePath+"/handler/mxHandle.js"),mxClient.include(mxClient.basePath+"/handler/mxVertexHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxEdgeHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxElbowEdgeHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxEdgeSegmentHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxKeyHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxTooltipHandler.js"),mxClient.include(mxClient.basePath+"/handler/mxCellTracker.js"),mxClient.include(mxClient.basePath+"/handler/mxCellHighlight.js"),mxClient.include(mxClient.basePath+"/io/mxCodecRegistry.js"),mxClient.include(mxClient.basePath+"/io/mxCodec.js"),mxClient.include(mxClient.basePath+"/io/mxObjectCodec.js"),mxClient.include(mxClient.basePath+"/io/mxCellCodec.js"),mxClient.include(mxClient.basePath+"/io/mxModelCodec.js"),mxClient.include(mxClient.basePath+"/io/mxRootChangeCodec.js"),mxClient.include(mxClient.basePath+"/io/mxChildChangeCodec.js"),mxClient.include(mxClient.basePath+"/io/mxTerminalChangeCodec.js"),mxClient.include(mxClient.basePath+"/io/mxGenericChangeCodec.js"),mxClient.include(mxClient.basePath+"/io/mxGraphCodec.js"),mxClient.include(mxClient.basePath+"/io/mxGraphViewCodec.js"),mxClient.include(mxClient.basePath+"/io/mxStylesheetCodec.js")),__mxOutput.mxClient=void 0!==mxClient?mxClient:void 0,{consoleName:"Console",TRACE:!1,DEBUG:!0,WARN:!0,buffer:"",init:function(){var t,e,n,i,l,s;null==mxLog.window&&null!=document.body&&(t=mxLog.consoleName+" - mxGraph "+mxClient.VERSION,(e=document.createElement("table")).setAttribute("width","100%"),e.setAttribute("height","100%"),l=document.createElement("tbody"),s=document.createElement("tr"),(n=document.createElement("td")).style.verticalAlign="top",mxLog.textarea=document.createElement("textarea"),mxLog.textarea.setAttribute("wrap","off"),mxLog.textarea.setAttribute("readOnly","true"),mxLog.textarea.style.height="100%",mxLog.textarea.style.resize="none",mxLog.textarea.value=mxLog.buffer,mxClient.IS_NS&&"BackCompat"!=document.compatMode?mxLog.textarea.style.width="99%":mxLog.textarea.style.width="100%",n.appendChild(mxLog.textarea),s.appendChild(n),l.appendChild(s),s=document.createElement("tr"),mxLog.td=document.createElement("td"),mxLog.td.style.verticalAlign="top",mxLog.td.setAttribute("height","30px"),s.appendChild(mxLog.td),l.appendChild(s),e.appendChild(l),mxLog.addButton("Info",function(t){mxLog.info()}),mxLog.addButton("DOM",function(t){var e=mxUtils.getInnerHtml(document.body);mxLog.debug(e)}),mxLog.addButton("Trace",function(t){mxLog.TRACE=!mxLog.TRACE,mxLog.TRACE?mxLog.debug("Tracing enabled"):mxLog.debug("Tracing disabled")}),mxLog.addButton("Copy",function(t){try{mxUtils.copy(mxLog.textarea.value)}catch(t){mxUtils.alert(t)}}),mxLog.addButton("Show",function(t){try{mxUtils.popup(mxLog.textarea.value)}catch(t){mxUtils.alert(t)}}),mxLog.addButton("Clear",function(t){mxLog.textarea.value=""}),s=n=0,s="number"==typeof window.innerWidth?(n=window.innerHeight,window.innerWidth):(n=document.documentElement.clientHeight||document.body.clientHeight,document.body.clientWidth),mxLog.window=new mxWindow(t,e,Math.max(0,s-320),Math.max(0,n-210),300,160),mxLog.window.setMaximizable(!0),mxLog.window.setScrollable(!1),mxLog.window.setResizable(!0),mxLog.window.setClosable(!0),mxLog.window.destroyOnClose=!1,(!mxClient.IS_NS&&!mxClient.IS_IE||mxClient.IS_GC||mxClient.IS_SF||"BackCompat"==document.compatMode)&&11!=document.documentMode||(i=mxLog.window.getElement(),mxLog.window.addListener(mxEvent.RESIZE_END,l=function(t,e){mxLog.textarea.style.height=Math.max(0,i.offsetHeight-70)+"px"}),mxLog.window.addListener(mxEvent.MAXIMIZE,l),mxLog.window.addListener(mxEvent.NORMALIZE,l),mxLog.textarea.style.height="92px"))},info:function(){mxLog.writeln(mxUtils.toString(navigator))},addButton:function(t,e){var n=document.createElement("button");mxUtils.write(n,t),mxEvent.addListener(n,"click",e),mxLog.td.appendChild(n)},isVisible:function(){return null!=mxLog.window&&mxLog.window.isVisible()},show:function(){mxLog.setVisible(!0)},setVisible:function(t){null==mxLog.window&&mxLog.init(),null!=mxLog.window&&mxLog.window.setVisible(t)},enter:function(t){if(mxLog.TRACE)return mxLog.writeln("Entering "+t),(new Date).getTime()},leave:function(t,e){mxLog.TRACE&&(e=0!=e?" ("+((new Date).getTime()-e)+" ms)":"",mxLog.writeln("Leaving "+t+e))},debug:function(){mxLog.DEBUG&&mxLog.writeln.apply(this,arguments)},warn:function(){mxLog.WARN&&mxLog.writeln.apply(this,arguments)},write:function(){for(var t="",e=0;e<arguments.length;e++)t+=arguments[e],e<arguments.length-1&&(t+=" ");null!=mxLog.textarea?(mxLog.textarea.value=mxLog.textarea.value+t,null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("Presto/2.5")&&(mxLog.textarea.style.visibility="hidden",mxLog.textarea.style.visibility="visible"),mxLog.textarea.scrollTop=mxLog.textarea.scrollHeight):mxLog.buffer+=t},writeln:function(){for(var t="",e=0;e<arguments.length;e++)t+=arguments[e],e<arguments.length-1&&(t+=" ");mxLog.write(t+"\n")}}),mxObjectIdentity=(__mxOutput.mxLog=void 0!==mxLog?mxLog:void 0,{FIELD_NAME:"mxObjectId",counter:0,get:function(t){var e;return null!=t?(null==t[mxObjectIdentity.FIELD_NAME]&&("object"==typeof t?(e=mxUtils.getFunctionName(t.constructor),t[mxObjectIdentity.FIELD_NAME]=e+"#"+mxObjectIdentity.counter++):"function"==typeof t&&(t[mxObjectIdentity.FIELD_NAME]="Function#"+mxObjectIdentity.counter++)),t[mxObjectIdentity.FIELD_NAME]):null},clear:function(t){"object"!=typeof t&&"function"!=typeof t||delete t[mxObjectIdentity.FIELD_NAME]}});function mxDictionary(){this.clear()}__mxOutput.mxObjectIdentity=void 0!==mxObjectIdentity?mxObjectIdentity:void 0,mxDictionary.prototype.map=null,mxDictionary.prototype.clear=function(){this.map={}},mxDictionary.prototype.get=function(t){t=mxObjectIdentity.get(t);return this.map[t]},mxDictionary.prototype.put=function(t,e){var t=mxObjectIdentity.get(t),n=this.map[t];return this.map[t]=e,n},mxDictionary.prototype.remove=function(t){var t=mxObjectIdentity.get(t),e=this.map[t];return delete this.map[t],e},mxDictionary.prototype.getCount=function(){var t,e=0;for(t in this.map)e++;return e},mxDictionary.prototype.getKeys=function(){var t,e=[];for(t in this.map)e.push(t);return e},mxDictionary.prototype.getValues=function(){var t,e=[];for(t in this.map)e.push(this.map[t]);return e},mxDictionary.prototype.visit=function(t){for(var e in this.map)t(e,this.map[e])},__mxOutput.mxDictionary=void 0!==mxDictionary?mxDictionary:void 0;var mxResources={resources:{},extension:mxResourceExtension,resourcesEncoded:!1,loadDefaultBundle:!0,loadSpecialBundle:!0,isLanguageSupported:function(t){return null==mxClient.languages||0<=mxUtils.indexOf(mxClient.languages,t)},getDefaultBundle:function(t,e){return mxResources.loadDefaultBundle||!mxResources.isLanguageSupported(e)?t+mxResources.extension:null},getSpecialBundle:function(t,e){var n;return null!=mxClient.languages&&this.isLanguageSupported(e)||0<(n=e.indexOf("-"))&&(e=e.substring(0,n)),mxResources.loadSpecialBundle&&mxResources.isLanguageSupported(e)&&e!=mxClient.defaultLanguage?t+"_"+e+mxResources.extension:null},add:function(t,e,n){if((e=null!=e?e:null!=mxClient.language?mxClient.language.toLowerCase():mxConstants.NONE)!=mxConstants.NONE){var i=mxResources.getDefaultBundle(t,e),l=mxResources.getSpecialBundle(t,e),s=function(){if(null!=l)if(n)mxUtils.get(l,function(t){mxResources.parse(t.getText()),n()},function(){n()});else try{var t=mxUtils.load(l);t.isReady()&&mxResources.parse(t.getText())}catch(t){}else null!=n&&n()};if(null!=i)if(n)mxUtils.get(i,function(t){mxResources.parse(t.getText()),s()},function(){s()});else try{var o=mxUtils.load(i);o.isReady()&&mxResources.parse(o.getText()),s()}catch(t){}else s()}},parse:function(t){if(null!=t)for(var e,n,i,l=t.split("\n"),s=0;s<l.length;s++)"#"!=l[s].charAt(0)&&0<(i=l[s].indexOf("="))&&(e=l[s].substring(0,i),n=l[s].length,13==l[s].charCodeAt(n-1)&&n--,i=l[s].substring(i+1,n),this.resourcesEncoded?(i=i.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),mxResources.resources[e]=unescape(i)):mxResources.resources[e]=i)},get:function(t,e,n){t=mxResources.resources[t];return t=null!=(t=null==t?n:t)&&null!=e?mxResources.replacePlaceholders(t,e):t},replacePlaceholders:function(t,e){for(var n=[],i=null,l=0;l<t.length;l++){var s=t.charAt(l);"{"==s?i="":null!=i&&"}"==s?(0<=(i=parseInt(i)-1)&&i<e.length&&n.push(e[i]),i=null):null!=i?i+=s:n.push(s)}return n.join("")},loadResources:function(t){mxResources.add(mxClient.basePath+"/resources/editor",null,function(){mxResources.add(mxClient.basePath+"/resources/graph",null,t)})}};function mxPoint(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0}function mxRectangle(t,e,n,i){mxPoint.call(this,t,e),this.width=null!=n?n:0,this.height=null!=i?i:0}__mxOutput.mxResources=void 0!==mxResources?mxResources:void 0,mxPoint.prototype.x=null,mxPoint.prototype.y=null,mxPoint.prototype.equals=function(t){return null!=t&&t.x==this.x&&t.y==this.y},mxPoint.prototype.clone=function(){return mxUtils.clone(this)},__mxOutput.mxPoint=void 0!==mxPoint?mxPoint:void 0,mxRectangle.prototype=new mxPoint,mxRectangle.prototype.constructor=mxRectangle,mxRectangle.prototype.width=null,mxRectangle.prototype.height=null,mxRectangle.prototype.setRect=function(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i},mxRectangle.prototype.getCenterX=function(){return this.x+this.width/2},mxRectangle.prototype.getCenterY=function(){return this.y+this.height/2},mxRectangle.prototype.add=function(t){var e,n,i;null!=t&&(e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),t=Math.max(this.y+this.height,t.y+t.height),this.x=e,this.y=n,this.width=i-e,this.height=t-n)},mxRectangle.prototype.intersect=function(t){var e,n,i,l;null!=t&&(e=this.x+this.width,n=t.x+t.width,i=this.y+this.height,l=t.y+t.height,this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.width=Math.min(e,n)-this.x,this.height=Math.min(i,l)-this.y)},mxRectangle.prototype.grow=function(t){return this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t,this},mxRectangle.prototype.getPoint=function(){return new mxPoint(this.x,this.y)},mxRectangle.prototype.rotate90=function(){var t=(this.width-this.height)/2,t=(this.x+=t,this.y-=t,this.width);this.width=this.height,this.height=t},mxRectangle.prototype.equals=function(t){return null!=t&&t.x==this.x&&t.y==this.y&&t.width==this.width&&t.height==this.height},mxRectangle.fromPoint=function(t){return new mxRectangle(t.x,t.y,0,0)},mxRectangle.fromRectangle=function(t){return new mxRectangle(t.x,t.y,t.width,t.height)},__mxOutput.mxRectangle=void 0!==mxRectangle?mxRectangle:void 0;var mxEffects={animateChanges:function(a,h,u){var d=10,p=0,m=function(){for(var t=!1,e=0;e<h.length;e++){var n,i,l,s,o,r=h[e];(r instanceof mxGeometryChange||r instanceof mxTerminalChange||r instanceof mxValueChange||r instanceof mxChildChange||r instanceof mxStyleChange)&&null!=(n=a.getView().getState(r.cell||r.child,!1))&&(t=!0,r.constructor!=mxGeometryChange||a.model.isEdge(r.cell)?mxUtils.setOpacity(n.shape.node,100*p/d):(o=a.getView().scale,i=(r.geometry.x-r.previous.x)*o,l=(r.geometry.y-r.previous.y)*o,s=(r.geometry.width-r.previous.width)*o,o=(r.geometry.height-r.previous.height)*o,0==p?(n.x-=i,n.y-=l,n.width-=s,n.height-=o):(n.x+=i/d,n.y+=l/d,n.width+=s/d,n.height+=o/d),a.cellRenderer.redraw(n),mxEffects.cascadeOpacity(a,r.cell,100*p/d)))}p<d&&t?(p++,window.setTimeout(m,c)):null!=u&&u()},c=30;m()},cascadeOpacity:function(t,e,n){for(var i=t.model.getChildCount(e),l=0;l<i;l++){var s=t.model.getChildAt(e,l),o=t.getView().getState(s);null!=o&&(mxUtils.setOpacity(o.shape.node,n),mxEffects.cascadeOpacity(t,s,n))}var r=t.model.getEdges(e);if(null!=r)for(l=0;l<r.length;l++){var a=t.getView().getState(r[l]);null!=a&&mxUtils.setOpacity(a.shape.node,n)}},fadeOut:function(t,e,n,i,l,s){i=i||40,l=l||30;var o,r=e||100;mxUtils.setOpacity(t,r),s||null==s?(o=function(){r=Math.max(r-i,0),mxUtils.setOpacity(t,r),0<r?window.setTimeout(o,l):(t.style.visibility="hidden",n&&t.parentNode&&t.parentNode.removeChild(t))},window.setTimeout(o,l)):(t.style.visibility="hidden",n&&t.parentNode&&t.parentNode.removeChild(t))}},mxUtils=(__mxOutput.mxEffects=void 0!==mxEffects?mxEffects:void 0,{errorResource:"none"!=mxClient.language?"error":"",closeResource:"none"!=mxClient.language?"close":"",errorImage:mxClient.imageBasePath+"/error.gif",removeCursors:function(t){null!=t.style&&(t.style.cursor="");var e=t.childNodes;if(null!=e)for(var n=e.length,i=0;i<n;i+=1)mxUtils.removeCursors(e[i])},getCurrentStyle:mxClient.IS_IE&&(null==document.documentMode||document.documentMode<9)?function(t){return null!=t?t.currentStyle:null}:function(t){return null!=t?window.getComputedStyle(t,""):null},getCssFontFamily:function(t){if("string"==typeof t){for(var e=t.split(","),n=0;n<e.length;n++)e[n]=mxUtils.trim(e[n]),'"'==e[n].charAt(0)&&'"'==e[n].charAt(e[n].length-1)&&(e[n]=e[n].substring(1,e[n].length-1));t=e.join(", ")}return t},parseCssFontFamily:function(t,e){if("string"==typeof t){for(var n=t.split(","),i=0;i<n.length;i++)n[i]=mxUtils.trim(n[i]),'"'==n[i].charAt(0)&&'"'==n[i].charAt(n[i].length-1)&&(n[i]=n[i].substring(1,n[i].length-1)),e&&(n[i]=mxUtils.htmlEntities(n[i])),n[i]='"'+n[i]+'"';t=n.join(", ")}return t},parseCssNumber:function(t){return"thin"==t?t="2":"medium"==t?t="4":"thick"==t&&(t="6"),t=parseFloat(t),t=isNaN(t)?0:t},setPrefixedStyle:function(){var i=null;return mxClient.IS_OT?i="O":mxClient.IS_SF||mxClient.IS_GC?i="Webkit":mxClient.IS_MT?i="Moz":mxClient.IS_IE&&9<=document.documentMode&&document.documentMode<10&&(i="ms"),function(t,e,n){t[e]=n,null!=i&&0<e.length&&(t[e=i+e.substring(0,1).toUpperCase()+e.substring(1)]=n)}}(),hasScrollbars:function(t){t=mxUtils.getCurrentStyle(t);return null!=t&&("scroll"==t.overflow||"auto"==t.overflow)},bind:function(t,e){return function(){return e.apply(t,arguments)}},eval:function(expr){var result=null;if(0<=expr.indexOf("function"))try{eval("var _mxJavaScriptExpression="+expr),result=_mxJavaScriptExpression,_mxJavaScriptExpression=null}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}else try{result=eval(expr)}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}return result},findNode:function(t,e,n){if(t.nodeType==mxConstants.NODETYPE_ELEMENT){var i=t.getAttribute(e);if(null!=i&&i==n)return t}for(t=t.firstChild;null!=t;){var l=mxUtils.findNode(t,e,n);if(null!=l)return l;t=t.nextSibling}return null},getFunctionName:function(t){var e=null;return null!=t&&(null!=t.name?e=t.name:(e=mxUtils.trim(t.toString()),/^function\s/.test(e)&&0<(t=(e=mxUtils.ltrim(e.substring(9))).indexOf("("))&&(e=e.substring(0,t)))),e},indexOf:function(t,e){if(null!=t&&null!=e)for(var n=0;n<t.length;n++)if(t[n]==e)return n;return-1},lastIndexOf:function(t,e){if(null!=t&&null!=e)for(var n=t.length-1;0<=n;n--)if(t[n]==e)return n;return-1},forEach:function(t,e){if(null!=t&&null!=e)for(var n=0;n<t.length;n++)e(t[n]);return t},remove:function(t,e){var n,i=null;if("object"==typeof e)for(var l=mxUtils.indexOf(e,t);0<=l;)e.splice(l,1),l=mxUtils.indexOf(e,i=t);for(n in e)e[n]==t&&(delete e[n],i=t);return i},addItems:function(t,e){for(var n=0;n<e.length;n++)null!=e[n]&&(e[n].constructor==Array?mxUtils.addItems(t,e[n]):mxUtils.indexOf(t,e[n])<0&&t.push(e[n]));return t},isNode:function(t,e,n,i){return!(null==t||t.constructor!==Element||null!=e&&t.nodeName.toLowerCase()!=e.toLowerCase()||null!=n&&t.getAttribute(n)!=i)},isAncestorNode:function(t,e){for(var n=e;null!=n;){if(n==t)return!0;n=n.parentNode}return!1},visitNodes:function(t,e){if(t.nodeType==mxConstants.NODETYPE_ELEMENT)for(e(t),t=t.firstChild;null!=t;)mxUtils.visitNodes(t,e),t=t.nextSibling},getChildNodes:function(t,e){e=e||mxConstants.NODETYPE_ELEMENT;for(var n=[],i=t.firstChild;null!=i;)i.nodeType==e&&n.push(i),i=i.nextSibling;return n},removeChildNodes:function(t){for(;null!=t.lastChild;)t.removeChild(t.lastChild)},importNode:function(t,e,n){return mxClient.IS_IE&&(null==document.documentMode||document.documentMode<10)?mxUtils.importNodeImplementation(t,e,n):t.importNode(e,n)},importNodeImplementation:function(t,e,n){switch(e.nodeType){case 1:var i=t.createElement(e.nodeName);if(e.attributes&&0<e.attributes.length)for(var l=0;l<e.attributes.length;l++)i.setAttribute(e.attributes[l].nodeName,e.getAttribute(e.attributes[l].nodeName));if(n&&e.childNodes&&0<e.childNodes.length)for(l=0;l<e.childNodes.length;l++)i.appendChild(mxUtils.importNodeImplementation(t,e.childNodes[l],n));return i;case 3:case 4:case 8:return t.createTextNode(null!=e.nodeValue?e.nodeValue:e.value)}},createXmlDocument:function(){var t=null;return t=document.implementation&&document.implementation.createDocument?document.implementation.createDocument("","",null):t},parseXml:function(t){return(new DOMParser).parseFromString(t,"text/xml")},getSvgDefs:function(t){var e=t.ownerDocument,n=t.getElementsByTagName("defs"),i=null;return 0==n.length||n[0].parentNode!=t?(i=null!=e.createElementNS?e.createElementNS(mxConstants.NS_SVG,"defs"):e.createElement("defs"),null!=t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)):i=n[0],i},clearSelection:document.selection?function(){document.selection.empty()}:window.getSelection?function(){window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}:function(){},removeWhitespace:function(t,e){for(var n=e?t.previousSibling:t.nextSibling;null!=n&&n.nodeType==mxConstants.NODETYPE_TEXT;){var i=e?n.previousSibling:n.nextSibling,l=mxUtils.getTextContent(n);0==mxUtils.trim(l).length&&n.parentNode.removeChild(n),n=i}},htmlEntities:function(t,e,n,i){return t=(t=(t=(t=String(null!=t?t:"")).replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),null!=n&&!n||(t=(t=t.replace(/"/g,"&quot;")).replace(/\'/g,"&#39;")),null!=e&&!e||(t=t.replace(/\n/g,"&#xa;")),t=null!=i&&!i?t:t.replace(/\t/g,"&#x9;")},decodeHtml:function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},getXml:function(t,e){var n="";return mxClient.IS_IE||mxClient.IS_IE11?n=mxUtils.getPrettyXml(t,"","",""):null!=window.XMLSerializer?n=(new XMLSerializer).serializeToString(t):null!=t.xml&&(n=t.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,"\n")),n=n.replace(/\n/g,e=e||"&#xa;")},getPrettyXml:function(t,e,n,i,l){var s,o=[];if(null!=t)if(e=null!=e?e:"  ",n=null!=n?n:"",i=null!=i?i:"\n",null!=t.namespaceURI&&t.namespaceURI!=l&&(l=t.namespaceURI,null==t.getAttribute("xmlns"))&&t.setAttribute("xmlns",t.namespaceURI),t.nodeType==mxConstants.NODETYPE_DOCUMENT)o.push(mxUtils.getPrettyXml(t.documentElement,e,n,i,l));else if(t.nodeType==mxConstants.NODETYPE_DOCUMENT_FRAGMENT){if(null!=(r=t.firstChild))for(;null!=r;)o.push(mxUtils.getPrettyXml(r,e,n,i,l)),r=r.nextSibling}else if(t.nodeType==mxConstants.NODETYPE_COMMENT)0<(s=mxUtils.getTextContent(t)).length&&o.push(n+"\x3c!--"+s+"--\x3e"+i);else if(t.nodeType==mxConstants.NODETYPE_TEXT)0<(s=mxUtils.trim(mxUtils.getTextContent(t))).length&&o.push(n+mxUtils.htmlEntities(s,!1,!1)+i);else if(t.nodeType==mxConstants.NODETYPE_CDATA)0<(s=mxUtils.getTextContent(t)).length&&o.push(n+"<![CDATA["+s+"]]"+i);else{o.push(n+"<"+t.nodeName);var r,a=t.attributes;if(null!=a)for(var h=0;h<a.length;h++){var u=mxUtils.htmlEntities(a[h].value);o.push(" "+a[h].nodeName+'="'+u+'"')}if(null!=(r=t.firstChild)){for(o.push(">"+i);null!=r;)o.push(mxUtils.getPrettyXml(r,e,n+e,i,l)),r=r.nextSibling;o.push(n+"</"+t.nodeName+">"+i)}else o.push(" />"+i)}return o.join("")},extractTextWithWhitespace:function(t){var l=["BLOCKQUOTE","DIV","H1","H2","H3","H4","H5","H6","OL","P","PRE","TABLE","UL"],s=[];return function t(e){if(1!=e.length||"BR"!=e[0].nodeName&&"\n"!=e[0].innerHTML)for(var n=0;n<e.length;n++){var i=e[n];("BR"==i.nodeName||"\n"==i.innerHTML||(1==e.length||0==n)&&"DIV"==i.nodeName&&"<br>"==i.innerHTML.toLowerCase()||(3===i.nodeType||4===i.nodeType?0<i.nodeValue.length&&s.push(i.nodeValue):8!==i.nodeType&&0<i.childNodes.length&&t(i.childNodes),n<e.length-1&&0<=mxUtils.indexOf(l,e[n+1].nodeName)))&&s.push("\n")}}(t),s.join("")},replaceTrailingNewlines:function(t,e){for(var n="";0<t.length&&"\n"==t.charAt(t.length-1);)t=t.substring(0,t.length-1),n+=e;return t+n},getNodeValue:function(t){t=t.firstChild;for(var e=[];null!=t;)t.nodeType!=mxConstants.NODETYPE_TEXT&&t.nodeType!=mxConstants.NODETYPE_CDATA||null==t.nodeValue||e.push(mxUtils.trim(t.nodeValue)),t=t.nextSibling;return 0<e.length?e.join(""):""},getTextContent:function(t){return mxClient.IS_IE&&void 0!==t.innerText?t.innerText:null!=t?t[void 0===t.textContent?"text":"textContent"]:""},setTextContent:function(t,e){void 0!==t.innerText?t.innerText=e:t[void 0===t.textContent?"text":"textContent"]=e},getInnerHtml:mxClient.IS_IE?function(t){return null!=t?t.innerHTML:""}:function(t){return null!=t?(new XMLSerializer).serializeToString(t):""},getOuterHtml:mxClient.IS_IE?function(t){if(null==t)return"";if(null!=t.outerHTML)return t.outerHTML;var e=[],n=(e.push("<"+t.nodeName),t.attributes);if(null!=n)for(var i=0;i<n.length;i++){var l=n[i].value;null!=l&&0<l.length&&(e.push(" "),e.push(n[i].nodeName),e.push('="'),e.push(l),e.push('"'))}return 0==t.innerHTML.length?e.push("/>"):(e.push(">"),e.push(t.innerHTML),e.push("</"+t.nodeName+">")),e.join("")}:function(t){return null!=t?(new XMLSerializer).serializeToString(t):""},write:function(t,e){e=t.ownerDocument.createTextNode(e);return null!=t&&t.appendChild(e),e},writeln:function(t,e){e=t.ownerDocument.createTextNode(e);return null!=t&&(t.appendChild(e),t.appendChild(document.createElement("br"))),e},br:function(t,e){e=e||1;for(var n=null,i=0;i<e;i++)null!=t&&(n=t.ownerDocument.createElement("br"),t.appendChild(n));return n},button:function(t,e,n,i){n=(n=null!=n?n:document).createElement("button");return mxUtils.write(n,t),mxEvent.addListener(n,"click",function(t){e(t)}),null!=i&&(n.className=i),n},para:function(t,e){var n=document.createElement("p");return mxUtils.write(n,e),null!=t&&t.appendChild(n),n},addTransparentBackgroundFilter:function(t){t.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(t,e,n,i,l){return mxUtils.link(t,e,function(){n.execute(i)},l)},linkInvoke:function(t,e,n,i,l,s){return mxUtils.link(t,e,function(){n[i](l)},s)},link:function(t,e,n,i){var l=document.createElement("span");return l.style.color="blue",l.style.textDecoration="underline",l.style.cursor="pointer",null!=i&&(l.style.paddingLeft=i+"px"),mxEvent.addListener(l,"click",n),mxUtils.write(l,e),null!=t&&t.appendChild(l),l},getDocumentSize:function(){var t=document.body,e=document.documentElement;try{return new mxRectangle(0,0,t.clientWidth||e.clientWidth,Math.max(t.clientHeight||0,e.clientHeight))}catch(t){return new mxRectangle}},fit:function(t,e){e=e||0;var n=mxUtils.getDocumentSize(),i=parseInt(t.offsetLeft),l=parseInt(t.offsetWidth),s=mxUtils.getDocumentScrollOrigin(t.ownerDocument),o=s.x,s=s.y,r=o+n.width-e,i=(r<i+l&&(t.style.left=Math.max(o+e,r-l)+"px"),parseInt(t.offsetTop)),o=parseInt(t.offsetHeight),r=s+n.height-e;r<i+o&&(t.style.top=Math.max(s+e,r-o)+"px")},load:function(t){t=new mxXmlRequest(t,null,"GET",!1);return t.send(),t},get:function(t,e,n,i,l,s,o){var t=new mxXmlRequest(t,null,"GET"),r=t.setRequestHeaders;return o&&(t.setRequestHeaders=function(t,e){for(var n in r.apply(this,arguments),o)t.setRequestHeader(n,o[n])}),null!=i&&t.setBinary(i),t.send(e,n,l,s),t},getAll:function(t,i,e){for(var l=t.length,s=[],n=0,o=function(){0==n&&null!=e&&e(),n++},r=0;r<t.length;r++)!function(t,n){mxUtils.get(t,function(t){var e=t.getStatus();e<200||299<e?o():(s[n]=t,0==--l&&i(s))},o)}(t[r],r);0==l&&i(s)},post:function(t,e,n,i){return new mxXmlRequest(t,e).send(n,i)},submit:function(t,e,n,i){return new mxXmlRequest(t,e).simulate(n,i)},loadInto:function(t,e,n){mxClient.IS_IE?e.onreadystatechange=function(){4==e.readyState&&n()}:e.addEventListener("load",n,!1),e.load(t)},getValue:function(t,e,n){t=null!=t?t[e]:null;return t=null==t?n:t},getNumber:function(t,e,n){t=null!=t?t[e]:null;return null==t&&(t=n||0),Number(t)},getColor:function(t,e,n){t=null!=t?t[e]:null;return null==t?t=n:t==mxConstants.NONE&&(t=null),t},isEmptyObject:function(t){for(var e in t)return!1;return!0},clone:function(t,e,n){n=null!=n&&n;var i=null;if(null!=t&&"function"==typeof t.constructor)if(t.constructor===Element)i=t.cloneNode(null!=n&&!n);else for(var l in i=new t.constructor,t)l!=mxObjectIdentity.FIELD_NAME&&(null==e||mxUtils.indexOf(e,l)<0)&&(n||"object"!=typeof t[l]?i[l]=t[l]:i[l]=mxUtils.clone(t[l]));return i},equalPoints:function(t,e){if(null==t&&null!=e||null!=t&&null==e||null!=t&&null!=e&&t.length!=e.length)return!1;if(null!=t&&null!=e)for(var n=0;n<t.length;n++)if(null!=t[n]&&null==e[n]||null==t[n]&&null!=e[n]||null!=t[n]&&null!=e[n]&&(t[n].x!=e[n].x||t[n].y!=e[n].y))return!1;return!0},equalEntries:function(t,e){var n=0;if(null==t&&null!=e||null!=t&&null==e||null!=t&&null!=e&&t.length!=e.length)return!1;if(null!=t&&null!=e){for(var i in e)n++;for(var i in t)if(n--,!(mxUtils.isNaN(t[i])&&mxUtils.isNaN(e[i])||t[i]==e[i]))return!1}return 0==n},removeDuplicates:function(t){for(var e=new mxDictionary,n=[],i=0;i<t.length;i++)e.get(t[i])||(n.push(t[i]),e.put(t[i],!0));return n},isNaN:function(t){return"number"==typeof t&&isNaN(t)},extend:function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},toString:function(t){var e,n="";for(e in t)try{null==t[e]?n+=e+" = [null]\n":"function"==typeof t[e]?n+=e+" => [Function]\n":"object"==typeof t[e]?n+=e+" => ["+mxUtils.getFunctionName(t[e].constructor)+"]\n":n+=e+" = "+t[e]+"\n"}catch(t){n+=e+"="+t.message}return n},toRadians:function(t){return Math.PI*t/180},toDegree:function(t){return 180*t/Math.PI},arcToCurves:function(t,e,n,i,l,s,o,r,a){if(r-=t,a-=e,0!==n&&0!==i){n=Math.abs(n),i=Math.abs(i);for(var h=-r/2,u=-a/2,d=Math.cos(l*Math.PI/180),l,p=d*h+(l=Math.sin(l*Math.PI/180))*u,h,u,m=(h=-1*l*h+d*u)*h,c=n*n,g,x=(u=p*p)/c+m/(g=i*i),s,c,U=d*(s=(x=1<x?(n=Math.sqrt(x)*n,i=Math.sqrt(x)*i,0):(s===o?-1:1)*Math.sqrt((c*g-c*m-g*u)/(c*m+g*u)))*n*h/i)-l*(c=-1*x*i*p/n)+r/2,G=l*s+d*c+a/2,m,y=0<=(m=Math.atan2((h-c)/i,(p-s)/n)-Math.atan2(0,1))?m:2*Math.PI+m,g=0<=(m=Math.atan2((-h-c)/i,(-p-s)/n)-Math.atan2((h-c)/i,(p-s)/n))?m:2*Math.PI+m,u=(0==o&&0<g?g-=2*Math.PI:0!=o&&g<0&&(g+=2*Math.PI),2*g/Math.PI),C=Math.ceil(u<0?-1*u:u),f=g/C,v=8/3*Math.sin(f/4)*Math.sin(f/4)/Math.sin(f/2),E=d*n,S=d*i,w=l*n,b=l*i,T=Math.cos(y),M=-v*(E*(P=Math.sin(y))+b*T),L=-v*(w*P-S*T),I=[],A=0;A<C;++A){y+=f;var P,N=E*(T=Math.cos(y))-b*(P=Math.sin(y))+U,R=w*T+S*P+G,D=-v*(E*P+b*T),O=-v*(w*P-S*T),H=6*A;I[H]=Number(M+t),I[1+H]=Number(L+e),I[2+H]=Number(N-D+t),I[3+H]=Number(R-O+e),I[4+H]=Number(N+t),I[5+H]=Number(R+e),M=N+D,L=R+O}}return I},getBoundingBox:function(t,e,n){var i,l,s,o,r=null;return null!=t&&null!=e&&0!=e&&(e=mxUtils.toRadians(e),i=Math.cos(e),e=Math.sin(e),n=null!=n?n:new mxPoint(t.x+t.width/2,t.y+t.height/2),l=new mxPoint(t.x,t.y),s=new mxPoint(t.x+t.width,t.y),o=new mxPoint(s.x,t.y+t.height),t=new mxPoint(t.x,o.y),l=mxUtils.getRotatedPoint(l,i,e,n),s=mxUtils.getRotatedPoint(s,i,e,n),o=mxUtils.getRotatedPoint(o,i,e,n),t=mxUtils.getRotatedPoint(t,i,e,n),(r=new mxRectangle(l.x,l.y,0,0)).add(new mxRectangle(s.x,s.y,0,0)),r.add(new mxRectangle(o.x,o.y,0,0)),r.add(new mxRectangle(t.x,t.y,0,0))),r},getRotatedPoint:function(t,e,n,i){i=null!=i?i:new mxPoint;var l=t.x-i.x,t=t.y-i.y;return new mxPoint(l*e-t*n+i.x,t*e+l*n+i.y)},getPortConstraints:function(t,e,n,i){e=mxUtils.getValue(t.style,mxConstants.STYLE_PORT_CONSTRAINT,mxUtils.getValue(e.style,n?mxConstants.STYLE_SOURCE_PORT_CONSTRAINT:mxConstants.STYLE_TARGET_PORT_CONSTRAINT,null));if(null==e)return i;var n=e.toString(),l=mxConstants.DIRECTION_MASK_NONE,i=0,e=0;if(45<(i=1==mxUtils.getValue(t.style,mxConstants.STYLE_PORT_CONSTRAINT_ROTATION,0)?mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0):i)?e=135<=i?2:1:i<-45&&(e=3,i<=-135)&&(e=2),0<=n.indexOf(mxConstants.DIRECTION_NORTH))switch(e){case 0:l|=mxConstants.DIRECTION_MASK_NORTH;break;case 1:l|=mxConstants.DIRECTION_MASK_EAST;break;case 2:l|=mxConstants.DIRECTION_MASK_SOUTH;break;case 3:l|=mxConstants.DIRECTION_MASK_WEST}if(0<=n.indexOf(mxConstants.DIRECTION_WEST))switch(e){case 0:l|=mxConstants.DIRECTION_MASK_WEST;break;case 1:l|=mxConstants.DIRECTION_MASK_NORTH;break;case 2:l|=mxConstants.DIRECTION_MASK_EAST;break;case 3:l|=mxConstants.DIRECTION_MASK_SOUTH}if(0<=n.indexOf(mxConstants.DIRECTION_SOUTH))switch(e){case 0:l|=mxConstants.DIRECTION_MASK_SOUTH;break;case 1:l|=mxConstants.DIRECTION_MASK_WEST;break;case 2:l|=mxConstants.DIRECTION_MASK_NORTH;break;case 3:l|=mxConstants.DIRECTION_MASK_EAST}if(0<=n.indexOf(mxConstants.DIRECTION_EAST))switch(e){case 0:l|=mxConstants.DIRECTION_MASK_EAST;break;case 1:l|=mxConstants.DIRECTION_MASK_SOUTH;break;case 2:l|=mxConstants.DIRECTION_MASK_WEST;break;case 3:l|=mxConstants.DIRECTION_MASK_NORTH}return l},reversePortConstraints:function(t){var e=(t&mxConstants.DIRECTION_MASK_WEST)<<3;return(e|=(t&mxConstants.DIRECTION_MASK_NORTH)<<1)|(t&mxConstants.DIRECTION_MASK_SOUTH)>>1|(t&mxConstants.DIRECTION_MASK_EAST)>>3},findNearestSegment:function(t,e,n){var i=-1;if(0<t.absolutePoints.length)for(var l=t.absolutePoints[0],s=null,o=1;o<t.absolutePoints.length;o++){var r=t.absolutePoints[o],a=mxUtils.ptSegDistSq(l.x,l.y,r.x,r.y,e,n);(null==s||a<s)&&(s=a,i=o-1),l=r}return i},getDirectedBounds:function(t,e,n,i,l){var s,o=mxUtils.getValue(n,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),n=(i=null!=i?i:mxUtils.getValue(n,mxConstants.STYLE_FLIPH,!1),l=null!=l?l:mxUtils.getValue(n,mxConstants.STYLE_FLIPV,!1),e.x=Math.round(Math.max(0,Math.min(t.width,e.x))),e.y=Math.round(Math.max(0,Math.min(t.height,e.y))),e.width=Math.round(Math.max(0,Math.min(t.width,e.width))),e.height=Math.round(Math.max(0,Math.min(t.height,e.height))),(l&&(o==mxConstants.DIRECTION_SOUTH||o==mxConstants.DIRECTION_NORTH)||i&&(o==mxConstants.DIRECTION_EAST||o==mxConstants.DIRECTION_WEST))&&(s=e.x,e.x=e.width,e.width=s),(i&&(o==mxConstants.DIRECTION_SOUTH||o==mxConstants.DIRECTION_NORTH)||l&&(o==mxConstants.DIRECTION_EAST||o==mxConstants.DIRECTION_WEST))&&(s=e.y,e.y=e.height,e.height=s),mxRectangle.fromRectangle(e));return o==mxConstants.DIRECTION_SOUTH?(n.y=e.x,n.x=e.height,n.width=e.y,n.height=e.width):o==mxConstants.DIRECTION_WEST?(n.y=e.height,n.x=e.width,n.width=e.x,n.height=e.y):o==mxConstants.DIRECTION_NORTH&&(n.y=e.width,n.x=e.y,n.width=e.height,n.height=e.x),new mxRectangle(t.x+n.x,t.y+n.y,t.width-n.width-n.x,t.height-n.height-n.y)},getPerimeterPoint:function(t,e,n){for(var i=null,l=0;l<t.length-1;l++){var s,o=mxUtils.intersection(t[l].x,t[l].y,t[l+1].x,t[l+1].y,e.x,e.y,n.x,n.y);null!=o&&(s=n.x-o.x,null!=(o={p:o,distSq:(o=n.y-o.y)*o+s*s}))&&(null==i||i.distSq>o.distSq)&&(i=o)}return null!=i?i.p:null},intersectsPoints:function(t,e){for(var n=0;n<e.length-1;n++)if(mxUtils.rectangleIntersectsSegment(t,e[n],e[n+1]))return!0;return!1},rectangleIntersectsSegment:function(t,e,n){var i,l=t.y,s=t.x,o=l+t.height,t=s+t.width,r=e.x,a=n.x;return e.x>n.x&&(r=n.x,a=e.x),!((a=t<a?t:a)<(r=r<s?s:r)||(t=e.y,s=n.y,i=n.x-e.x,1e-7<Math.abs(i)&&(t=(n=(n.y-e.y)/i)*r+(i=e.y-n*e.x),s=n*a+i),s<t&&(r=s,s=t,t=r),(s=o<s?o:s)<(t=t<l?l:t)))},contains:function(t,e,n){return t.x<=e&&t.x+t.width>=e&&t.y<=n&&t.y+t.height>=n},intersects:function(t,e,n){var i,l=t.width,s=t.height,o=e.width,r=e.height;return!(!n&&(o<=0||r<=0||l<=0||s<=0))&&(n=t.x,t=t.y,i=e.x,r+=e=e.y,l+=n,s+=t,(o+=i)<i||n<o)&&(r<e||t<r)&&(l<n||i<l)&&(s<t||e<s)},intersectsHotspot:function(t,e,n,i,l,s){var o,r,a,h,u;return l=null!=l?l:0,s=null!=s?s:0,!(0<(i=null!=i?i:1))||(h=t.getCenterX(),u=t.getCenterY(),o=t.width,r=t.height,0<(a=mxUtils.getValue(t.style,mxConstants.STYLE_STARTSIZE)*t.view.scale)&&(mxUtils.getValue(t.style,mxConstants.STYLE_HORIZONTAL,!0)?(u=t.y+a/2,r=a):(h=t.x+a/2,o=a)),o=Math.max(l,o*i),r=Math.max(l,r*i),0<s&&(o=Math.min(o,s),r=Math.min(r,s)),a=new mxRectangle(h-o/2,u-r/2,o,r),0!=(l=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0))&&(i=Math.cos(-l),s=Math.sin(-l),h=new mxPoint(t.getCenterX(),t.getCenterY()),e=(u=mxUtils.getRotatedPoint(new mxPoint(e,n),i,s,h)).x,n=u.y),mxUtils.contains(a,e,n))},getOffset:function(t,e){for(var n=0,i=0,l=!1,s=t,o=document.body,r=document.documentElement;null!=s&&s!=o&&s!=r&&!l;){var a=mxUtils.getCurrentStyle(s);null!=a&&(l=l||"fixed"==a.position),s=s.parentNode}e||l||(n+=(e=mxUtils.getDocumentScrollOrigin(t.ownerDocument)).x,i+=e.y);e=t.getBoundingClientRect();return null!=e&&(n+=e.left,i+=e.top),new mxPoint(n,i)},getDocumentScrollOrigin:function(t){t=t.defaultView||t.parentWindow;return new mxPoint(null!=t&&void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,null!=t&&void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop)},getScrollOrigin:function(t,e,n){e=null!=e&&e,n=null==n||n;for(var i=null!=t?t.ownerDocument:document,l=i.body,s=i.documentElement,o=new mxPoint,r=!1;null!=t&&t!=l&&t!=s;){isNaN(t.scrollLeft)||isNaN(t.scrollTop)||(o.x+=t.scrollLeft,o.y+=t.scrollTop);var a=mxUtils.getCurrentStyle(t);null!=a&&(r=r||"fixed"==a.position),t=e?t.parentNode:null}return!r&&n&&(n=mxUtils.getDocumentScrollOrigin(i),o.x+=n.x,o.y+=n.y),o},convertPoint:function(t,e,n){var i=mxUtils.getScrollOrigin(t,!1),t=mxUtils.getOffset(t);return t.x-=i.x,t.y-=i.y,new mxPoint(e-t.x,n-t.y)},removeJavascriptProtocol:function(t){for(t=null!=t?mxUtils.zapGremlins(t):null;null!=t&&"javascript:"===mxUtils.ltrim(t.toLowerCase()).substring(0,11);)t=t.substring(t.toLowerCase().indexOf(":")+1);return t},zapGremlins:function(t){for(var e=0,n=[],i=0;i<t.length;i++){var l=t.charCodeAt(i);(32<=l||9==l||10==l||13==l)&&65535!=l&&65534!=l||(n.push(t.substring(e,i)),e=i+1)}return 0<e&&e<t.length&&n.push(t.substring(e)),0==n.length?t:n.join("")},ltrim:function(t,e){return e=e||"\\s|\\0",null!=t?t.replace(new RegExp("^["+e+"]+","g"),""):null},rtrim:function(t,e){return e=e||"\\s|\\0",null!=t?t.replace(new RegExp("["+e+"]+$","g"),""):null},trim:function(t,e){return mxUtils.ltrim(mxUtils.rtrim(t,e),e)},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)&&("string"!=typeof t||t.toLowerCase().indexOf("0x")<0)},isInteger:function(t){return String(parseInt(t))===String(t)},mod:function(t,e){return(t%e+e)%e},intersection:function(t,e,n,i,l,s,o,r){var a=(r-s)*(n-t)-(o-l)*(i-e),o=((o-l)*(e-s)-(r-s)*(t-l))/a,r=((n-t)*(e-s)-(i-e)*(t-l))/a;return 0<=o&&o<=1&&0<=r&&r<=1?new mxPoint(t+o*(n-t),e+o*(i-e)):null},ptSegDistSq:function(t,e,n,i,l,s){e=(l-=t)*(n-=t)+(s-=e)*(i-=e)<=0||(t=(l=n-l)*n+(s=i-s)*i)<=0?0:t*t/(n*n+i*i),t=l*l+s*s-e;return t=t<0?0:t},ptLineDist:function(t,e,n,i,l,s){return Math.abs((i-e)*l-(n-t)*s+n*e-i*t)/Math.sqrt((i-e)*(i-e)+(n-t)*(n-t))},relativeCcw:function(t,e,n,i,l,s){e=(l-=t)*(i-=e)-(s-=e)*(n-=t);return(e=0==e&&0<(e=l*n+s*i)&&(e=(l-=n)*n+(s-=i)*i)<0?0:e)<0?-1:0<e?1:0},animateChanges:function(t,e){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(t,e,n){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(t,e,n,i,l,s){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(t,e){mxClient.IS_IE&&(void 0===document.documentMode||document.documentMode<9)?t.style.filter=100<=e?"":"alpha(opacity="+e+")":t.style.opacity=e/100},createElementNs:function(t,e,n){return null!=t.createElementNS?t.createElementNS(e,n):(t=t.createElement(n),null!=namespace&&t.setAttribute("xmlns",e),t)},createImage:function(t){var e=null;return(e=document.createElement("img")).setAttribute("src",t),e.setAttribute("border","0"),e},sortCells:function(t,i){i=null==i||i;var l=new mxDictionary;return t.sort(function(t,e){var n=l.get(t),t=(null==n&&(n=mxCellPath.create(t).split(mxCellPath.PATH_SEPARATOR),l.put(t,n)),l.get(e)),e=(null==t&&(t=mxCellPath.create(e).split(mxCellPath.PATH_SEPARATOR),l.put(e,t)),mxCellPath.compare(n,t));return 0==e?0:0<e==i?1:-1}),t},getStylename:function(t){if(null!=t){t=t.split(";")[0];if(t.indexOf("=")<0)return t}return""},getStylenames:function(t){var e=[];if(null!=t)for(var n=t.split(";"),i=0;i<n.length;i++)n[i].indexOf("=")<0&&e.push(n[i]);return e},indexOfStylename:function(t,e){if(null!=t&&null!=e)for(var n=t.split(";"),i=0,l=0;l<n.length;l++){if(n[l]==e)return i;i+=n[l].length+1}return-1},addStylename:function(t,e){return mxUtils.indexOfStylename(t,e)<0&&(null==t?t="":0<t.length&&";"!=t.charAt(t.length-1)&&(t+=";"),t+=e),t},removeStylename:function(t,e){var n=[];if(null!=t)for(var i=t.split(";"),l=0;l<i.length;l++)i[l]!=e&&n.push(i[l]);return n.join(";")},removeAllStylenames:function(t){var e=[];if(null!=t)for(var n=t.split(";"),i=0;i<n.length;i++)0<=n[i].indexOf("=")&&e.push(n[i]);return e.join(";")},setCellStyles:function(t,e,n,i){if(null!=e&&0<e.length){t.beginUpdate();try{for(var l,s=0;s<e.length;s++)null!=e[s]&&(l=mxUtils.setStyle(t.getStyle(e[s]),n,i),t.setStyle(e[s],l))}finally{t.endUpdate()}}},parseHexColor:function(t,e){var n=null;return null!=t&&7<=t.length&&"#"==t.charAt(0)&&(e=null!=e?e:1,n={r:parseInt(t.substring(1,3),16),g:parseInt(t.substring(3,5),16),b:parseInt(t.substring(5,7),16),a:e=7<t.length?parseInt(t.substring(7,9),16)/255:e}),n},hex2rgb:function(t){var e=mxUtils.parseHexColor(t);return t=null!=e?"rgb("+e.r+", "+e.g+", "+e.b+")":t},hex2rgba:function(t,e){e=mxUtils.parseHexColor(t,e);return t=null!=e?"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")":t},rgba2hex:function(t){return(rgb=t&&t.match?t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i):t)&&4===rgb.length?"#"+("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+("0"+parseInt(rgb[2],10).toString(16)).slice(-2)+("0"+parseInt(rgb[3],10).toString(16)).slice(-2):t},setStyle:function(t,e,n){var i,l,s,o=null!=n&&(void 0===n.length||0<n.length);return null==t||0==t.length?o&&(t=e+"="+n+";"):t.substring(0,e.length+1)==e+"="?(s=t.indexOf(";"),t=o?e+"="+n+(s<0?";":t.substring(s)):s<0||s==t.length-1?"":t.substring(s+1)):(i=t.indexOf(";"+e+"="))<0?o&&(l=";"==t.charAt(t.length-1)?"":";",t=t+l+e+"="+n+";"):(s=t.indexOf(";",i+1),t=o?t.substring(0,i+1)+e+"="+n+(s<0?";":t.substring(s)):t.substring(0,i)+(s<0?";":t.substring(s))),t},setCellStyleFlags:function(t,e,n,i,l){if(null!=e&&0<e.length){t.beginUpdate();try{for(var s,o=0;o<e.length;o++)null!=e[o]&&(s=mxUtils.setStyleFlag(t.getStyle(e[o]),n,i,l),t.setStyle(e[o],s))}finally{t.endUpdate()}}},setStyleFlag:function(t,e,n,i){var l,s,o;return t=null==t||0==t.length?i||null==i?e+"="+n:e+"=0":(l=t.indexOf(e+"="))<0?(o=";"==t.charAt(t.length-1)?"":";",i||null==i?t+o+e+"="+n:t+o+e+"=0"):(o="",o=(s=t.indexOf(";",l))<0?t.substring(l+e.length+1):t.substring(l+e.length+1,s),o=null==i?parseInt(o)^n:i?parseInt(o)|n:parseInt(o)&~n,t.substring(0,l)+e+"="+o+(0<=s?t.substring(s):""))},getAlignmentAsPoint:function(t,e){var n=-.5,i=-.5;return t==mxConstants.ALIGN_LEFT?n=0:t==mxConstants.ALIGN_RIGHT&&(n=-1),e==mxConstants.ALIGN_TOP?i=0:e==mxConstants.ALIGN_BOTTOM&&(i=-1),new mxPoint(n,i)},getSizeForString:function(t,e,n,i,l){e=null!=e?e:mxConstants.DEFAULT_FONTSIZE,n=null!=n?n:mxConstants.DEFAULT_FONTFAMILY;var s=document.createElement("div"),e=(s.style.fontFamily=n,s.style.fontSize=Math.round(e)+"px",s.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?e*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT*mxSvgCanvas2D.prototype.lineHeightCorrection,null!=l&&((l&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(s.style.fontWeight="bold"),(l&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(s.style.fontStyle="italic"),n=[],(l&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&n.push("underline"),(l&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&n.push("line-through"),0<n.length)&&(s.style.textDecoration=n.join(" ")),s.style.position="absolute",s.style.visibility="hidden",s.style.display="inline-block",s.style.zoom="1",null!=i?(s.style.width=i+"px",s.style.whiteSpace="normal"):s.style.whiteSpace="nowrap",s.innerHTML=t,document.body.appendChild(s),new mxRectangle(0,0,s.offsetWidth,s.offsetHeight));return document.body.removeChild(s),e},getViewXml:function(t,e,n,i,l){i=null!=i?i:0,l=null!=l?l:0,e=null!=e?e:1,null==n&&(n=[t.getModel().getRoot()]);var s=t.getView(),o=null,r=s.isEventsEnabled(),a=(s.setEventsEnabled(!1),s.drawPane),h=s.overlayPane,u=(t.dialect==mxConstants.DIALECT_SVG?(s.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),s.canvas.appendChild(s.drawPane),s.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g")):(s.drawPane=s.drawPane.cloneNode(!1),s.canvas.appendChild(s.drawPane),s.overlayPane=s.overlayPane.cloneNode(!1)),s.canvas.appendChild(s.overlayPane),s.getTranslate()),i=(s.translate=new mxPoint(i,l),new mxTemporaryCellStates(t.getView(),e,n));try{o=(new mxCodec).encode(t.getView())}finally{i.destroy(),s.translate=u,s.canvas.removeChild(s.drawPane),s.canvas.removeChild(s.overlayPane),s.drawPane=a,s.overlayPane=h,s.setEventsEnabled(r)}return o},getScaleForPageCount:function(t,e,n,i){if(t<1)return 1;for(var l=(n=null!=n?n:mxConstants.PAGE_FORMAT_A4_PORTRAIT).width-2*(i=null!=i?i:0),n=n.height-2*i,i=mxRectangle.fromRectangle(e.getGraphBounds()),e=e.getView().getScale(),e=(i.width/=e,i.height/=e,i.width),i=e/i.height/(l/n),n=Math.sqrt(t),i=Math.sqrt(i),s=n*i,o=n/i,r=(s<1&&t<o&&(d=o/t,o=t,s/=d),o<1&&t<s&&(d=s/t,s=t,o/=d),Math.ceil(s)*Math.ceil(o)),a=0;t<r;){var h=Math.floor(s)/s,u=Math.floor(o)/o,d=(1==h&&(h=Math.floor(s-1)/s),1);if(s*=d=(u=1==u?Math.floor(o-1)/o:u)<h?h:u,o*=d,r=Math.ceil(s)*Math.ceil(o),10<++a)break}return.99999*(l*s/e)},show:function(t,e,n,i,l,s){n=null!=n?n:0,i=null!=i?i:0,null==e?e=window.open().document:e.open(),9==document.documentMode&&e.writeln('\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]--\x3e');var o=t.getGraphBounds(),r=Math.ceil(n-o.x),a=Math.ceil(i-o.y);if(null==l&&(l=Math.ceil(o.width+n)+Math.ceil(Math.ceil(o.x)-o.x)),null==s&&(s=Math.ceil(o.height+i)+Math.ceil(Math.ceil(o.y)-o.y)),mxClient.IS_IE||11==document.documentMode){for(var h="<html><head>",u=document.getElementsByTagName("base"),d=0;d<u.length;d++)h+=u[d].outerHTML;h+="<style>";for(d=0;d<document.styleSheets.length;d++)try{h+=document.styleSheets[d].cssText}catch(t){}h=(h+='</style></head><body style="margin:0px;">')+('<div style="position:absolute;overflow:hidden;width:'+l+"px;height:"+s+'px;"><div style="position:relative;left:'+r+"px;top:"+a+'px;">')+t.container.innerHTML,e.writeln(h+="</div></div></body><html>"),e.close()}else{e.writeln("<html><head>");for(u=document.getElementsByTagName("base"),d=0;d<u.length;d++)e.writeln(mxUtils.getOuterHtml(u[d]));for(var p=document.getElementsByTagName("link"),d=0;d<p.length;d++)e.writeln(mxUtils.getOuterHtml(p[d]));for(var m=document.getElementsByTagName("style"),d=0;d<m.length;d++)e.writeln(mxUtils.getOuterHtml(m[d]));e.writeln('</head><body style="margin:0px;"></body></html>'),e.close();for(var c=e.createElement("div"),g=(c.position="absolute",c.overflow="hidden",c.style.width=l+"px",c.style.height=s+"px",e.createElement("div")),x=(g.style.position="absolute",g.style.left=r+"px",g.style.top=a+"px",t.container.firstChild),y=null;null!=x;){var C=x.cloneNode(!0);x==t.view.drawPane.ownerSVGElement?(c.appendChild(C),y=C):g.appendChild(C),x=x.nextSibling}e.body.appendChild(c),null!=g.firstChild&&e.body.appendChild(g),null!=y&&(y.style.minWidth="",y.style.minHeight="",y.firstChild.setAttribute("transform","translate("+r+","+a+")"))}return mxUtils.removeCursors(e.body),e},printScreen:function(t){function e(){n.focus(),n.print(),n.close()}var n=window.open();mxUtils.show(t,n.document);mxClient.IS_GC?n.setTimeout(e,500):e()},popup:function(t,e){var n,i;e?((e=document.createElement("div")).style.overflow="scroll",e.style.width="636px",e.style.height="460px",(i=document.createElement("pre")).innerHTML=mxUtils.htmlEntities(t,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),e.appendChild(i),(n=new mxWindow("Popup Window",e,document.body.clientWidth/2-320,Math.max(document.body.clientHeight||0,document.documentElement.clientHeight)/2-240,640,480,!1,!0)).setClosable(!0),n.setVisible(!0)):mxClient.IS_NS?((n=window.open()).document.writeln("<pre>"+mxUtils.htmlEntities(t)+"</pre"),n.document.close()):((i=(n=window.open()).document.createElement("pre")).innerHTML=mxUtils.htmlEntities(t,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),n.document.body.appendChild(i))},alert:function(t){alert(t)},prompt:function(t,e){return prompt(t,null!=e?e:"")},confirm:function(t){return confirm(t)},error:function(t,e,n,i){var l=document.createElement("div"),s=(l.style.padding="20px",document.createElement("img")),i=(s.setAttribute("src",i||mxUtils.errorImage),s.setAttribute("valign","bottom"),s.style.verticalAlign="middle",l.appendChild(s),l.appendChild(document.createTextNode("")),l.appendChild(document.createTextNode("")),l.appendChild(document.createTextNode("")),mxUtils.write(l,t),document.body.clientWidth),s=document.body.clientHeight||document.documentElement.clientHeight,o=new mxWindow(mxResources.get(mxUtils.errorResource)||mxUtils.errorResource,l,(i-e)/2,s/4,e,null,!1,!0);return n&&(mxUtils.br(l),t=document.createElement("p"),i=document.createElement("button"),mxClient.IS_IE?i.style.cssText="float:right":i.setAttribute("style","float:right"),mxEvent.addListener(i,"click",function(t){o.destroy()}),mxUtils.write(i,mxResources.get(mxUtils.closeResource)||mxUtils.closeResource),t.appendChild(i),l.appendChild(t),mxUtils.br(l),o.setClosable(!0)),o.setVisible(!0),o},makeDraggable:function(t,e,n,l,i,s,o,r,a,h){t=new mxDragSource(t,n);return t.dragOffset=new mxPoint(null!=i?i:0,null!=s?s:mxConstants.TOOLTIP_VERTICAL_OFFSET),t.autoscroll=o,t.setGuidesEnabled(!1),null!=a&&(t.highlightDropTargets=a),null!=h&&(t.getDropTarget=h),t.getGraphForEvent=function(t){return"function"==typeof e?e(t):e},null!=l&&(t.createDragElement=function(){return l.cloneNode(!0)},r)&&(t.createPreviewElement=function(t){var e=l.cloneNode(!0),n=parseInt(e.style.width),i=parseInt(e.style.height);return e.style.width=Math.round(n*t.view.scale)+"px",e.style.height=Math.round(i*t.view.scale)+"px",e}),t},format:function(t){return parseFloat(parseFloat(t).toFixed(2))}}),mxConstants=(__mxOutput.mxUtils=void 0!==mxUtils?mxUtils:void 0,{DEFAULT_HOTSPOT:.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster",RENDERING_HINT_FASTEST:"fastest",DIALECT_SVG:"svg",DIALECT_MIXEDHTML:"mixedHtml",DIALECT_PREFERHTML:"preferHtml",DIALECT_STRICTHTML:"strictHtml",NS_SVG:"http://www.w3.org/2000/svg",NS_XHTML:"http://www.w3.org/1999/xhtml",NS_XLINK:"http://www.w3.org/1999/xlink",SHADOWCOLOR:"#808080",VML_SHADOWCOLOR:"#808080",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:3,SHADOW_BLUR:2,SHADOW_OPACITY:1,NODETYPE_ELEMENT:1,NODETYPE_ATTRIBUTE:2,NODETYPE_TEXT:3,NODETYPE_CDATA:4,NODETYPE_ENTITY_REFERENCE:5,NODETYPE_ENTITY:6,NODETYPE_PROCESSING_INSTRUCTION:7,NODETYPE_COMMENT:8,NODETYPE_DOCUMENT:9,NODETYPE_DOCUMENTTYPE:10,NODETYPE_DOCUMENT_FRAGMENT:11,NODETYPE_NOTATION:12,TOOLTIP_VERTICAL_OFFSET:16,DEFAULT_VALID_COLOR:"#00FF00",DEFAULT_INVALID_COLOR:"#FF0000",OUTLINE_HIGHLIGHT_COLOR:"#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH:5,HIGHLIGHT_STROKEWIDTH:3,HIGHLIGHT_SIZE:2,HIGHLIGHT_OPACITY:100,CURSOR_MOVABLE_VERTEX:"move",CURSOR_MOVABLE_EDGE:"move",CURSOR_LABEL_HANDLE:"default",CURSOR_TERMINAL_HANDLE:"pointer",CURSOR_BEND_HANDLE:"crosshair",CURSOR_VIRTUAL_BEND_HANDLE:"crosshair",CURSOR_CONNECT:"pointer",HIGHLIGHT_COLOR:"#00FF00",CONNECT_TARGET_COLOR:"#0000FF",INVALID_CONNECT_TARGET_COLOR:"#FF0000",DROP_TARGET_COLOR:"#0000FF",VALID_COLOR:"#00FF00",INVALID_COLOR:"#FF0000",EDGE_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_STROKEWIDTH:1,EDGE_SELECTION_STROKEWIDTH:1,VERTEX_SELECTION_DASHED:!0,EDGE_SELECTION_DASHED:!0,GUIDE_COLOR:"#FF0000",GUIDE_STROKEWIDTH:1,OUTLINE_COLOR:"#0099FF",OUTLINE_STROKEWIDTH:mxClient.IS_IE?2:3,HANDLE_SIZE:6,LABEL_HANDLE_SIZE:4,HANDLE_FILLCOLOR:"#00FF00",HANDLE_STROKECOLOR:"black",LABEL_HANDLE_FILLCOLOR:"yellow",CONNECT_HANDLE_FILLCOLOR:"#0000FF",LOCKED_HANDLE_FILLCOLOR:"#FF0000",OUTLINE_HANDLE_FILLCOLOR:"#00FFFF",OUTLINE_HANDLE_STROKECOLOR:"#0033FF",DEFAULT_FONTFAMILY:"Arial,Helvetica",DEFAULT_FONTSIZE:11,DEFAULT_TEXT_DIRECTION:"",LINE_HEIGHT:1.2,WORD_WRAP:"normal",ABSOLUTE_LINE_HEIGHT:!1,DEFAULT_FONTSTYLE:0,DEFAULT_STARTSIZE:40,DEFAULT_MARKERSIZE:6,DEFAULT_IMAGESIZE:24,ENTITY_SEGMENT:30,RECTANGLE_ROUNDING_FACTOR:.15,LINE_ARCSIZE:20,ARROW_SPACING:0,ARROW_WIDTH:30,ARROW_SIZE:30,PAGE_FORMAT_A4_PORTRAIT:new mxRectangle(0,0,827,1169),PAGE_FORMAT_A4_LANDSCAPE:new mxRectangle(0,0,1169,827),PAGE_FORMAT_LETTER_PORTRAIT:new mxRectangle(0,0,850,1100),PAGE_FORMAT_LETTER_LANDSCAPE:new mxRectangle(0,0,1100,850),NONE:"none",STYLE_PERIMETER:"perimeter",STYLE_SOURCE_PORT:"sourcePort",STYLE_TARGET_PORT:"targetPort",STYLE_PORT_CONSTRAINT:"portConstraint",STYLE_PORT_CONSTRAINT_ROTATION:"portConstraintRotation",STYLE_SOURCE_PORT_CONSTRAINT:"sourcePortConstraint",STYLE_TARGET_PORT_CONSTRAINT:"targetPortConstraint",STYLE_OPACITY:"opacity",STYLE_FILL_OPACITY:"fillOpacity",STYLE_FILL_STYLE:"fillStyle",STYLE_STROKE_OPACITY:"strokeOpacity",STYLE_TEXT_OPACITY:"textOpacity",STYLE_TEXT_DIRECTION:"textDirection",STYLE_OVERFLOW:"overflow",STYLE_BLOCK_SPACING:"blockSpacing",STYLE_ORTHOGONAL:"orthogonal",STYLE_EXIT_X:"exitX",STYLE_EXIT_Y:"exitY",STYLE_EXIT_DX:"exitDx",STYLE_EXIT_DY:"exitDy",STYLE_EXIT_PERIMETER:"exitPerimeter",STYLE_ENTRY_X:"entryX",STYLE_ENTRY_Y:"entryY",STYLE_ENTRY_DX:"entryDx",STYLE_ENTRY_DY:"entryDy",STYLE_ENTRY_PERIMETER:"entryPerimeter",STYLE_WHITE_SPACE:"whiteSpace",STYLE_ROTATION:"rotation",STYLE_FILLCOLOR:"fillColor",STYLE_POINTER_EVENTS:"pointerEvents",STYLE_SWIMLANE_FILLCOLOR:"swimlaneFillColor",STYLE_MARGIN:"margin",STYLE_GRADIENTCOLOR:"gradientColor",STYLE_GRADIENT_DIRECTION:"gradientDirection",STYLE_STROKECOLOR:"strokeColor",STYLE_SEPARATORCOLOR:"separatorColor",STYLE_STROKEWIDTH:"strokeWidth",STYLE_ALIGN:"align",STYLE_VERTICAL_ALIGN:"verticalAlign",STYLE_LABEL_WIDTH:"labelWidth",STYLE_LABEL_POSITION:"labelPosition",STYLE_VERTICAL_LABEL_POSITION:"verticalLabelPosition",STYLE_IMAGE_ASPECT:"imageAspect",STYLE_IMAGE_ALIGN:"imageAlign",STYLE_IMAGE_VERTICAL_ALIGN:"imageVerticalAlign",STYLE_GLASS:"glass",STYLE_IMAGE:"image",STYLE_IMAGE_WIDTH:"imageWidth",STYLE_IMAGE_HEIGHT:"imageHeight",STYLE_IMAGE_BACKGROUND:"imageBackground",STYLE_IMAGE_BORDER:"imageBorder",STYLE_FLIPH:"flipH",STYLE_FLIPV:"flipV",STYLE_NOLABEL:"noLabel",STYLE_NOEDGESTYLE:"noEdgeStyle",STYLE_LABEL_BACKGROUNDCOLOR:"labelBackgroundColor",STYLE_LABEL_BORDERCOLOR:"labelBorderColor",STYLE_LABEL_PADDING:"labelPadding",STYLE_INDICATOR_SHAPE:"indicatorShape",STYLE_INDICATOR_IMAGE:"indicatorImage",STYLE_INDICATOR_COLOR:"indicatorColor",STYLE_INDICATOR_STROKECOLOR:"indicatorStrokeColor",STYLE_INDICATOR_GRADIENTCOLOR:"indicatorGradientColor",STYLE_INDICATOR_SPACING:"indicatorSpacing",STYLE_INDICATOR_WIDTH:"indicatorWidth",STYLE_INDICATOR_HEIGHT:"indicatorHeight",STYLE_INDICATOR_DIRECTION:"indicatorDirection",STYLE_SHADOW:"shadow",STYLE_TEXT_SHADOW:"textShadow",STYLE_SHADOW_OFFSET_X:"shadowOffsetX",STYLE_SHADOW_OFFSET_Y:"shadowOffsetY",STYLE_SHADOW_BLUR:"shadowBlur",STYLE_SHADOWCOLOR:"shadowColor",STYLE_SHADOW_OPACITY:"shadowOpacity",STYLE_SEGMENT:"segment",STYLE_ENDARROW:"endArrow",STYLE_STARTARROW:"startArrow",STYLE_ENDSIZE:"endSize",STYLE_STARTSIZE:"startSize",STYLE_SWIMLANE_LINE:"swimlaneLine",STYLE_SWIMLANE_HEAD:"swimlaneHead",STYLE_SWIMLANE_BODY:"swimlaneBody",STYLE_ENDFILL:"endFill",STYLE_ENDFILLCOLOR:"endFillColor",STYLE_STARTFILL:"startFill",STYLE_STARTFILLCOLOR:"startFillColor",STYLE_DASHED:"dashed",STYLE_DASH_PATTERN:"dashPattern",STYLE_FIX_DASH:"fixDash",STYLE_ROUNDED:"rounded",STYLE_CURVED:"curved",STYLE_ARCSIZE:"arcSize",STYLE_ABSOLUTE_ARCSIZE:"absoluteArcSize",STYLE_SOURCE_PERIMETER_SPACING:"sourcePerimeterSpacing",STYLE_TARGET_PERIMETER_SPACING:"targetPerimeterSpacing",STYLE_PERIMETER_SPACING:"perimeterSpacing",STYLE_SPACING:"spacing",STYLE_SPACING_TOP:"spacingTop",STYLE_SPACING_LEFT:"spacingLeft",STYLE_SPACING_BOTTOM:"spacingBottom",STYLE_SPACING_RIGHT:"spacingRight",STYLE_HORIZONTAL:"horizontal",STYLE_DIRECTION:"direction",STYLE_ANCHOR_POINT_DIRECTION:"anchorPointDirection",STYLE_ELBOW:"elbow",STYLE_FONTCOLOR:"fontColor",STYLE_FONTFAMILY:"fontFamily",STYLE_FONTSIZE:"fontSize",STYLE_FONTSTYLE:"fontStyle",STYLE_ASPECT:"aspect",STYLE_AUTOSIZE:"autosize",STYLE_AUTOSIZE_GRID:"autosizeGrid",STYLE_FIXED_WIDTH:"fixedWidth",STYLE_FOLDABLE:"foldable",STYLE_EDITABLE:"editable",STYLE_BACKGROUND_OUTLINE:"backgroundOutline",STYLE_BENDABLE:"bendable",STYLE_MOVABLE:"movable",STYLE_RESIZABLE:"resizable",STYLE_RESIZE_WIDTH:"resizeWidth",STYLE_RESIZE_HEIGHT:"resizeHeight",STYLE_ROTATABLE:"rotatable",STYLE_CLONEABLE:"cloneable",STYLE_DELETABLE:"deletable",STYLE_SHAPE:"shape",STYLE_EDGE:"edgeStyle",STYLE_JETTY_SIZE:"jettySize",STYLE_SOURCE_JETTY_SIZE:"sourceJettySize",STYLE_TARGET_JETTY_SIZE:"targetJettySize",STYLE_LOOP:"loopStyle",STYLE_ORTHOGONAL_LOOP:"orthogonalLoop",STYLE_ROUTING_CENTER_X:"routingCenterX",STYLE_ROUTING_CENTER_Y:"routingCenterY",STYLE_CLIP_PATH:"clipPath",FONT_BOLD:1,FONT_ITALIC:2,FONT_UNDERLINE:4,FONT_STRIKETHROUGH:8,SHAPE_RECTANGLE:"rectangle",SHAPE_ELLIPSE:"ellipse",SHAPE_DOUBLE_ELLIPSE:"doubleEllipse",SHAPE_RHOMBUS:"rhombus",SHAPE_LINE:"line",SHAPE_IMAGE:"image",SHAPE_ARROW:"arrow",SHAPE_ARROW_CONNECTOR:"arrowConnector",SHAPE_LABEL:"label",SHAPE_CYLINDER:"cylinder",SHAPE_SWIMLANE:"swimlane",SHAPE_CONNECTOR:"connector",SHAPE_ACTOR:"actor",SHAPE_CLOUD:"cloud",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",ARROW_CLASSIC:"classic",ARROW_CLASSIC_THIN:"classicThin",ARROW_BLOCK:"block",ARROW_BLOCK_THIN:"blockThin",ARROW_OPEN:"open",ARROW_OPEN_THIN:"openThin",ARROW_OVAL:"oval",ARROW_DIAMOND:"diamond",ARROW_DIAMOND_THIN:"diamondThin",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_RIGHT:"right",ALIGN_TOP:"top",ALIGN_MIDDLE:"middle",ALIGN_BOTTOM:"bottom",DIRECTION_NORTH:"north",DIRECTION_SOUTH:"south",DIRECTION_EAST:"east",DIRECTION_WEST:"west",DIRECTION_RADIAL:"radial",TEXT_DIRECTION_DEFAULT:"",TEXT_DIRECTION_AUTO:"auto",TEXT_DIRECTION_LTR:"ltr",TEXT_DIRECTION_RTL:"rtl",TEXT_DIRECTION_VERTICAL_LR:"vertical-lr",TEXT_DIRECTION_VERTICAL_RL:"vertical-rl",DIRECTION_MASK_NONE:0,DIRECTION_MASK_WEST:1,DIRECTION_MASK_NORTH:2,DIRECTION_MASK_SOUTH:4,DIRECTION_MASK_EAST:8,DIRECTION_MASK_ALL:15,ELBOW_VERTICAL:"vertical",ELBOW_HORIZONTAL:"horizontal",EDGESTYLE_ELBOW:"elbowEdgeStyle",EDGESTYLE_ENTITY_RELATION:"entityRelationEdgeStyle",EDGESTYLE_LOOP:"loopEdgeStyle",EDGESTYLE_SIDETOSIDE:"sideToSideEdgeStyle",EDGESTYLE_TOPTOBOTTOM:"topToBottomEdgeStyle",EDGESTYLE_ORTHOGONAL:"orthogonalEdgeStyle",EDGESTYLE_SEGMENT:"segmentEdgeStyle",PERIMETER_ELLIPSE:"ellipsePerimeter",PERIMETER_RECTANGLE:"rectanglePerimeter",PERIMETER_RHOMBUS:"rhombusPerimeter",PERIMETER_HEXAGON:"hexagonPerimeter",PERIMETER_TRIANGLE:"trianglePerimeter"});function mxEventObject(t){this.name=t,this.properties=[];for(var e=1;e<arguments.length;e+=2)null!=arguments[e+1]&&(this.properties[arguments[e]]=arguments[e+1])}function mxMouseEvent(t,e){this.evt=t,this.state=e,this.sourceState=e}function mxEventSource(t){this.setEventSource(t)}__mxOutput.mxConstants=void 0!==mxConstants?mxConstants:void 0,mxEventObject.prototype.name=null,mxEventObject.prototype.properties=null,mxEventObject.prototype.consumed=!1,mxEventObject.prototype.getName=function(){return this.name},mxEventObject.prototype.getProperties=function(){return this.properties},mxEventObject.prototype.getProperty=function(t){return this.properties[t]},mxEventObject.prototype.isConsumed=function(){return this.consumed},mxEventObject.prototype.consume=function(){this.consumed=!0},__mxOutput.mxEventObject=void 0!==mxEventObject?mxEventObject:void 0,mxMouseEvent.prototype.consumed=!1,mxMouseEvent.prototype.evt=null,mxMouseEvent.prototype.graphX=null,mxMouseEvent.prototype.graphY=null,mxMouseEvent.prototype.state=null,mxMouseEvent.prototype.sourceState=null,mxMouseEvent.prototype.getEvent=function(){return this.evt},mxMouseEvent.prototype.getSource=function(){return mxEvent.getSource(this.evt)},mxMouseEvent.prototype.isSource=function(t){return null!=t&&mxUtils.isAncestorNode(t.node,this.getSource())},mxMouseEvent.prototype.getX=function(){return mxEvent.getClientX(this.getEvent())},mxMouseEvent.prototype.getY=function(){return mxEvent.getClientY(this.getEvent())},mxMouseEvent.prototype.getGraphX=function(){return this.graphX},mxMouseEvent.prototype.getGraphY=function(){return this.graphY},mxMouseEvent.prototype.getState=function(){return this.state},mxMouseEvent.prototype.getCell=function(){var t=this.getState();return null!=t?t.cell:null},mxMouseEvent.prototype.isPopupTrigger=function(){return mxEvent.isPopupTrigger(this.getEvent())},mxMouseEvent.prototype.isConsumed=function(){return this.consumed},mxMouseEvent.prototype.consume=function(t){(t=null!=t?t:null!=this.evt.touches||mxEvent.isMouseEvent(this.evt))&&this.evt.preventDefault&&this.evt.preventDefault(),mxClient.IS_IE&&(this.evt.returnValue=!0),this.consumed=!0},__mxOutput.mxMouseEvent=void 0!==mxMouseEvent?mxMouseEvent:void 0,mxEventSource.prototype.eventListeners=null,mxEventSource.prototype.eventsEnabled=!0,mxEventSource.prototype.eventSource=null,mxEventSource.prototype.isEventsEnabled=function(){return this.eventsEnabled},mxEventSource.prototype.setEventsEnabled=function(t){this.eventsEnabled=t},mxEventSource.prototype.getEventSource=function(){return this.eventSource},mxEventSource.prototype.setEventSource=function(t){this.eventSource=t},mxEventSource.prototype.addListener=function(t,e){null==this.eventListeners&&(this.eventListeners=[]),this.eventListeners.push(t),this.eventListeners.push(e)},mxEventSource.prototype.removeListener=function(t){if(null!=this.eventListeners)for(var e=0;e<this.eventListeners.length;)this.eventListeners[e+1]==t?this.eventListeners.splice(e,2):e+=2},mxEventSource.prototype.fireEvent=function(t,e){if(null!=this.eventListeners&&this.isEventsEnabled()){null==t&&(t=new mxEventObject),null==(e=null==e?this.getEventSource():e)&&(e=this);for(var n=0;n<this.eventListeners.length;n+=2){var i=this.eventListeners[n];null!=i&&i!=t.getName()||this.eventListeners[n+1].apply(this,[e,t])}}},__mxOutput.mxEventSource=void 0!==mxEventSource?mxEventSource:void 0;var mxEvent={addListener:function(){function i(t,e,n){null==t.mxListenerList&&(t.mxListenerList=[]),t.mxListenerList.push({name:e,f:n})}if(window.addEventListener){var l=!1;try{document.addEventListener("test",function(){},Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){l=!0}}))}catch(t){}return function(t,e,n){t.addEventListener(e,n,!!l&&{passive:!1}),i(t,e,n)}}return function(t,e,n){t.attachEvent("on"+e,n),i(t,e,n)}}(),removeListener:function(){function i(t,e,n){if(null!=t.mxListenerList){for(var i=t.mxListenerList.length,l=0;l<i;l++)if(t.mxListenerList[l].f==n){t.mxListenerList.splice(l,1);break}0==t.mxListenerList.length&&(t.mxListenerList=null)}}return window.removeEventListener?function(t,e,n){t.removeEventListener(e,n,!1),i(t,0,n)}:function(t,e,n){t.detachEvent("on"+e,n),i(t,0,n)}}(),removeAllListeners:function(t){var e=t.mxListenerList;if(null!=e)for(;0<e.length;){var n=e[0];mxEvent.removeListener(t,n.name,n.f)}},addGestureListeners:function(t,e,n,i){null!=e&&mxEvent.addListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",e),null!=n&&mxEvent.addListener(t,mxClient.IS_POINTER?"pointermove":"mousemove",n),null!=i&&mxEvent.addListener(t,mxClient.IS_POINTER?"pointerup":"mouseup",i),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=e&&mxEvent.addListener(t,"touchstart",e),null!=n&&mxEvent.addListener(t,"touchmove",n),null!=i)&&mxEvent.addListener(t,"touchend",i)},removeGestureListeners:function(t,e,n,i){null!=e&&mxEvent.removeListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",e),null!=n&&mxEvent.removeListener(t,mxClient.IS_POINTER?"pointermove":"mousemove",n),null!=i&&mxEvent.removeListener(t,mxClient.IS_POINTER?"pointerup":"mouseup",i),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=e&&mxEvent.removeListener(t,"touchstart",e),null!=n&&mxEvent.removeListener(t,"touchmove",n),null!=i)&&mxEvent.removeListener(t,"touchend",i)},redirectMouseEvents:function(t,n,e,i,l,s,o){function r(t){return"function"==typeof e?e(t):e}mxEvent.addGestureListeners(t,function(t){null!=i?i(t):mxEvent.isConsumed(t)||n.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,r(t)))},function(t){null!=l?l(t):mxEvent.isConsumed(t)||n.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,r(t)))},function(t){null!=s?s(t):mxEvent.isConsumed(t)||n.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,r(t)))}),mxEvent.addListener(t,"dblclick",function(t){var e;null!=o?o(t):mxEvent.isConsumed(t)||(e=r(t),n.dblClick(t,null!=e?e.cell:null))})},release:function(t){try{if(null!=t){mxEvent.removeAllListeners(t);var e=t.childNodes;if(null!=e)for(var n=e.length,i=0;i<n;i+=1)mxEvent.release(e[i])}}catch(t){}},addMouseWheelListener:function(a,t){var n,h,u,d;null!=a&&(t=null!=t?t:window,mxClient.IS_SF&&!mxClient.IS_TOUCH?(n=1,mxEvent.addListener(t,"gesturestart",function(t){mxEvent.consume(t),n=1}),mxEvent.addListener(t,"gesturechange",function(t){mxEvent.consume(t);var e=n-t.scale;.2<Math.abs(e)&&(a(t,e<0,!0),n=t.scale)}),mxEvent.addListener(t,"gestureend",function(t){mxEvent.consume(t)})):(h=[],d=u=0,mxEvent.addGestureListeners(t,mxUtils.bind(this,function(t){mxEvent.isMouseEvent(t)||null==t.pointerId||h.push(t)}),mxUtils.bind(this,function(t){if(!mxEvent.isMouseEvent(t)&&2==h.length){for(var e=0;e<h.length;e++)if(t.pointerId==h[e].pointerId){h[e]=t;break}var n,i,l=Math.abs(h[0].clientX-h[1].clientX),s=Math.abs(h[0].clientY-h[1].clientY),o=Math.abs(l-u),r=Math.abs(s-d);(o>mxEvent.PINCH_THRESHOLD||r>mxEvent.PINCH_THRESHOLD)&&(n=h[0].clientX+(h[1].clientX-h[0].clientX)/2,i=h[0].clientY+(h[1].clientY-h[0].clientY)/2,a(h[0],r<o?u<l:d<s,!0,n,i),u=l,d=s)}}),mxUtils.bind(this,function(t){h=[],d=u=0}))),mxEvent.addListener(t,"wheel",function(t){(t=null==t?window.event:t).ctrlKey&&t.preventDefault(),(.5<Math.abs(t.deltaX)||.5<Math.abs(t.deltaY))&&a(t,0==t.deltaY?0<-t.deltaX:0<-t.deltaY)}))},disableContextMenu:function(t){mxEvent.addListener(t,"contextmenu",function(t){return t.preventDefault&&t.preventDefault(),!1})},getSource:function(t){return null!=t.srcElement?t.srcElement:t.target},isConsumed:function(t){return null!=t.isConsumed&&t.isConsumed},isTouchEvent:function(t){return null!=t.pointerType?"touch"==t.pointerType||t.pointerType===t.MSPOINTER_TYPE_TOUCH:null!=t.mozInputSource?5==t.mozInputSource:0==t.type.indexOf("touch")},isPenEvent:function(t){return null!=t.pointerType?"pen"==t.pointerType||t.pointerType===t.MSPOINTER_TYPE_PEN:null!=t.mozInputSource?2==t.mozInputSource:0==t.type.indexOf("pen")},isMultiTouchEvent:function(t){return null!=t.type&&0==t.type.indexOf("touch")&&null!=t.touches&&1<t.touches.length},isMouseEvent:function(t){return!(mxClient.IS_ANDROID||!mxClient.IS_LINUX||!mxClient.IS_GC)||(null!=t.pointerType?"mouse"==t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE:null!=t.mozInputSource?1==t.mozInputSource:0==t.type.indexOf("mouse"))},isLeftMouseButton:function(t){return"buttons"in t&&("mousedown"==t.type||"mousemove"==t.type)?1==t.buttons:"which"in t?1===t.which:1===t.button},isMiddleMouseButton:function(t){return"which"in t?2===t.which:4===t.button},isRightMouseButton:function(t){return"which"in t?3===t.which:2===t.button},isPopupTrigger:function(t){return mxEvent.isRightMouseButton(t)||mxClient.IS_MAC&&mxEvent.isControlDown(t)&&!mxEvent.isShiftDown(t)&&!mxEvent.isMetaDown(t)&&!mxEvent.isAltDown(t)},isShiftDown:function(t){return null!=t&&t.shiftKey},isAltDown:function(t){return null!=t&&t.altKey},isControlDown:function(t){return null!=t&&t.ctrlKey},isMetaDown:function(t){return null!=t&&t.metaKey},getMainEvent:function(t){return"touchstart"!=t.type&&"touchmove"!=t.type||null==t.touches||null==t.touches[0]?"touchend"==t.type&&null!=t.changedTouches&&null!=t.changedTouches[0]&&(t=t.changedTouches[0]):t=t.touches[0],t},getClientX:function(t){return mxEvent.getMainEvent(t).clientX},getClientY:function(t){return mxEvent.getMainEvent(t).clientY},consume:function(t,e,n){n=null==n||n,(e=null==e||e)&&(t.preventDefault?(n&&t.stopPropagation(),t.preventDefault()):n&&(t.cancelBubble=!0)),t.isConsumed=!0,t.preventDefault||(t.returnValue=!1)},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-1e5,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",CONSUME_MOUSE_EVENT:"consumeMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset",PINCH_THRESHOLD:10};function mxXmlRequest(t,e,n,i,l,s){this.url=t,this.params=e,this.method=n||"POST",this.async=null==i||i,this.username=l,this.password=s}__mxOutput.mxEvent=void 0!==mxEvent?mxEvent:void 0,mxXmlRequest.prototype.url=null,mxXmlRequest.prototype.params=null,mxXmlRequest.prototype.method=null,mxXmlRequest.prototype.async=null,mxXmlRequest.prototype.binary=!1,mxXmlRequest.prototype.withCredentials=!1,mxXmlRequest.prototype.username=null,mxXmlRequest.prototype.password=null,mxXmlRequest.prototype.request=null,mxXmlRequest.prototype.decodeSimulateValues=!1,mxXmlRequest.prototype.acceptResponse=!0,mxXmlRequest.prototype.isBinary=function(){return this.binary},mxXmlRequest.prototype.setBinary=function(t){this.binary=t},mxXmlRequest.prototype.getText=function(){return this.request.responseText},mxXmlRequest.prototype.isReady=function(){return 4==this.request.readyState},mxXmlRequest.prototype.getDocumentElement=function(){var t=this.getXml();return null!=t?t.documentElement:null},mxXmlRequest.prototype.getXml=function(){var t=this.request.responseXML;return t=9<=document.documentMode||null==t||null==t.documentElement?mxUtils.parseXml(this.request.responseText):t},mxXmlRequest.prototype.getStatus=function(){return null!=this.request?this.request.status:null},mxXmlRequest.prototype.create=window.XMLHttpRequest?function(){var t=new XMLHttpRequest;return this.isBinary()&&t.overrideMimeType&&t.overrideMimeType("text/plain; charset=x-user-defined"),t}:"undefined"!=typeof ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:void 0,mxXmlRequest.prototype.send=function(t,e,n,i){this.request=this.create(),null!=this.request&&(null!=t&&(this.request.onreadystatechange=mxUtils.bind(this,function(){this.isReady()&&this.acceptResponse&&(this.acceptResponse=!1,t(this),this.request.onreadystatechange=null)})),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),null!=e&&(this.request.onerror=mxUtils.bind(this,function(t){this.acceptResponse&&(this.acceptResponse=!1,e(this,t))})),(null==document.documentMode||9<document.documentMode)&&window.XMLHttpRequest&&null!=n&&null!=i&&(this.request.timeout=n,this.request.ontimeout=i),this.request.send(this.params))},mxXmlRequest.prototype.setRequestHeaders=function(t,e){null!=e&&t.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},mxXmlRequest.prototype.simulate=function(t,e){for(var n=null,i=((t=t||document)==document&&(n=window.onbeforeunload,window.onbeforeunload=null),t.createElement("form")),l=(i.setAttribute("method",this.method),i.setAttribute("action",this.url),null!=e&&i.setAttribute("target",e),i.style.display="none",i.style.visibility="hidden",0<this.params.indexOf("&")?this.params.split("&"):this.params.split()),s=0;s<l.length;s++){var o,r,a=l[s].indexOf("=");0<a&&(o=l[s].substring(0,a),a=l[s].substring(a+1),this.decodeSimulateValues&&(a=decodeURIComponent(a)),(r=t.createElement("textarea")).setAttribute("wrap","off"),r.setAttribute("name",o),mxUtils.write(r,a),i.appendChild(r))}t.body.appendChild(i),i.submit(),null!=i.parentNode&&i.parentNode.removeChild(i),null!=n&&(window.onbeforeunload=n)},__mxOutput.mxXmlRequest=void 0!==mxXmlRequest?mxXmlRequest:void 0;var mxClipboard={STEPSIZE:10,insertCount:1,cells:null,setCells:function(t){mxClipboard.cells=t},getCells:function(){return mxClipboard.cells},isEmpty:function(){return null==mxClipboard.getCells()},cut:function(t,e){return e=mxClipboard.copy(t,e),mxClipboard.insertCount=0,mxClipboard.removeCells(t,e,!1),e},removeCells:function(t,e,n){t.removeCells(e,n)},copy:function(t,e){e=e||t.getSelectionCells();e=t.getExportableCells(t.model.getTopmostCells(e));return mxClipboard.insertCount=1,mxClipboard.setCells(t.cloneCells(e)),e},paste:function(t){var e,n,i=null;return mxClipboard.isEmpty()||(i=t.getImportableCells(mxClipboard.getCells()),e=mxClipboard.insertCount*mxClipboard.STEPSIZE,n=t.getDefaultParent(),i=t.importCells(i,e,e,n),mxClipboard.insertCount++,t.setSelectionCells(i)),i}};function mxWindow(t,e,n,i,l,s,o,r,a,h){null!=e&&(o=null==o||o,this.content=e,this.init(n,i,l,s,h),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(o),this.setTitle(t),null!=r&&!r||this.installMoveHandler(),null!=a&&null!=a.parentNode?a.parentNode.replaceChild(this.div,a):document.body.appendChild(this.div))}function mxForm(t){this.table=document.createElement("table"),this.table.className=t,this.body=document.createElement("tbody"),this.table.appendChild(this.body)}function mxImage(t,e,n,i,l){this.src=t,this.width=null!=e?e:this.width,this.height=null!=n?n:this.height,this.x=null!=i?i:this.x,this.y=null!=l?l:this.y}function mxDivResizer(t,e){"div"==t.nodeName.toLowerCase()&&(null==e&&(e=window),this.div=t,null!=(t=mxUtils.getCurrentStyle(t))&&(this.resizeWidth="auto"==t.width,this.resizeHeight="auto"==t.height),mxEvent.addListener(e,"resize",mxUtils.bind(this,function(t){this.handlingResize||(this.handlingResize=!0,this.resize(),this.handlingResize=!1)})),this.resize())}function mxDragSource(t,e){this.element=t,this.dropHandler=e,mxEvent.addGestureListeners(t,mxUtils.bind(this,function(t){this.mouseDown(t)})),mxEvent.addListener(t,"dragstart",function(t){mxEvent.consume(t)}),this.eventConsumer=function(t,e){var n=e.getProperty("eventName"),e=e.getProperty("event");n!=mxEvent.MOUSE_DOWN&&e.consume()}}function mxToolbar(t){this.container=t}function mxUndoableEdit(t,e){this.source=t,this.changes=[],this.significant=null==e||e}function mxUndoManager(t){this.size=null!=t?t:100,this.clear()}__mxOutput.mxClipboard=void 0!==mxClipboard?mxClipboard:void 0,mxWindow.prototype=new mxEventSource,mxWindow.prototype.constructor=mxWindow,mxWindow.prototype.closeImage=mxClient.imageBasePath+"/close.gif",mxWindow.prototype.minimizeImage=mxClient.imageBasePath+"/minimize.gif",mxWindow.prototype.normalizeImage=mxClient.imageBasePath+"/normalize.gif",mxWindow.prototype.maximizeImage=mxClient.imageBasePath+"/maximize.gif",mxWindow.prototype.resizeImage=mxClient.imageBasePath+"/resize.gif",mxWindow.prototype.visible=!1,mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40),mxWindow.prototype.destroyOnClose=!0,mxWindow.prototype.contentHeightCorrection=8==document.documentMode||7==document.documentMode?6:2,mxWindow.prototype.title=null,mxWindow.prototype.content=null,mxWindow.prototype.init=function(t,e,n,i,l){l=null!=l?l:"mxWindow",this.div=document.createElement("div"),this.div.className=l,this.div.style.left=t+"px",this.div.style.top=e+"px",this.table=document.createElement("table"),this.table.className=l,mxClient.IS_POINTER&&(this.div.style.touchAction="none"),null!=n&&(this.div.style.width=n+"px",this.table.style.width=n+"px"),null!=i&&(this.div.style.height=i+"px",this.table.style.height=i+"px");t=document.createElement("tbody"),e=document.createElement("tr"),this.title=document.createElement("td"),this.title.className=l+"Title",this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),e.appendChild(this.title),t.appendChild(e),e=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=l+"Pane",7==document.documentMode&&(this.td.style.height="100%"),this.contentWrapper=document.createElement("div"),this.contentWrapper.className=l+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),"DIV"!=this.content.nodeName.toUpperCase()&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),e.appendChild(this.td),t.appendChild(e),this.table.appendChild(t),this.div.appendChild(this.table),n=mxUtils.bind(this,function(t){this.activate()});mxEvent.addGestureListeners(this.title,n),mxEvent.addGestureListeners(this.table,n),this.hide()},mxWindow.prototype.setTitle=function(t){for(var e=this.title.firstChild;null!=e;){var n=e.nextSibling;e.nodeType==mxConstants.NODETYPE_TEXT&&e.parentNode.removeChild(e),e=n}mxUtils.write(this.title,t||""),this.title.appendChild(this.buttons)},mxWindow.prototype.setScrollable=function(t){(null==navigator.userAgent||navigator.userAgent.indexOf("Presto/2.5")<0)&&(this.contentWrapper.style.overflow=t?"auto":"hidden")},mxWindow.prototype.activate=function(){var t,e;mxWindow.activeWindow!=this&&(t=null!=(t=mxUtils.getCurrentStyle(this.getElement()))?t.zIndex:3,mxWindow.activeWindow&&null!=(e=mxWindow.activeWindow.getElement())&&null!=e.style&&(e.style.zIndex=t),e=mxWindow.activeWindow,this.getElement().style.zIndex=parseInt(t)+1,(mxWindow.activeWindow=this).fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",e)))},mxWindow.prototype.getElement=function(){return this.div},mxWindow.prototype.fit=function(){mxUtils.fit(this.div)},mxWindow.prototype.isResizable=function(){return null!=this.resize&&"none"!=this.resize.style.display},mxWindow.prototype.setResizable=function(t){var i,l,s,o,e,n;t?null==this.resize?(this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="0px",this.resize.style.right="0px",this.resize.style.zIndex="2",this.resize.setAttribute("src",this.resizeImage),this.resize.style.cursor="nwse-resize",o=s=l=i=null,t=mxUtils.bind(this,function(t){this.activate(),i=mxEvent.getClientX(t),l=mxEvent.getClientY(t),s=this.div.offsetWidth,o=this.div.offsetHeight,mxEvent.addGestureListeners(document,null,e,n),this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",t)),mxEvent.consume(t)}),e=mxUtils.bind(this,function(t){var e,n;null!=i&&null!=l&&(e=mxEvent.getClientX(t)-i,n=mxEvent.getClientY(t)-l,this.setSize(s+e,o+n),this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",t)),mxEvent.consume(t))}),n=mxUtils.bind(this,function(t){null!=i&&null!=l&&(l=i=null,mxEvent.removeGestureListeners(document,null,e,n),this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",t)),mxEvent.consume(t))}),mxEvent.addGestureListeners(this.resize,t,e,n),this.div.appendChild(this.resize)):this.resize.style.display="inline":null!=this.resize&&(this.resize.style.display="none")},mxWindow.prototype.setSize=function(t,e){t=Math.max(this.minimumSize.width,t),e=Math.max(this.minimumSize.height,e),this.div.style.width=t+"px",this.div.style.height=e+"px",this.table.style.width=t+"px",this.table.style.height=e+"px",this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"},mxWindow.prototype.setMinimizable=function(t){this.minimizeImg.style.display=t?"":"none"},mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)},mxWindow.prototype.toggleMinimized=function(t){var e;this.activate(),this.minimized?(this.minimized=!1,this.minimizeImg.setAttribute("src",this.minimizeImage),this.minimizeImg.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=this.maxDisplay,this.div.style.height=this.height,this.table.style.height=this.height,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",t))):(this.minimized=!0,this.minimizeImg.setAttribute("src",this.normalizeImage),this.minimizeImg.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",this.maxDisplay=this.maximize.style.display,this.maximize.style.display="none",this.height=this.table.style.height,0<(e=this.getMinimumSize()).height&&(this.div.style.height=e.height+"px",this.table.style.height=e.height+"px"),0<e.width&&(this.div.style.width=e.width+"px",this.table.style.width=e.width+"px"),null!=this.resize&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",t)))},mxWindow.prototype.installMinimizeHandler=function(){this.minimizeImg=document.createElement("img"),this.minimizeImg.setAttribute("src",this.minimizeImage),this.minimizeImg.setAttribute("title","Minimize"),this.minimizeImg.style.cursor="pointer",this.minimizeImg.style.marginLeft="2px",this.minimizeImg.style.display="none",this.buttons.appendChild(this.minimizeImg),this.minimized=!1,this.maxDisplay=null,this.height=null;var t=mxUtils.bind(this,function(t){this.toggleMinimized(t),mxEvent.consume(t)});mxEvent.addGestureListeners(this.minimizeImg,t)},mxWindow.prototype.setMaximizable=function(t){this.maximize.style.display=t?"":"none"},mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);var n=!1,i=null,l=null,s=null,o=null,r=null,t=mxUtils.bind(this,function(t){var e;this.activate(),"none"!=this.maximize.style.display&&(n?(n=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimizeImg.style.display=r,this.div.style.left=i+"px",this.div.style.top=l+"px",this.div.style.height=s,this.div.style.width=o,"auto"!=mxUtils.getCurrentStyle(this.contentWrapper).overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.table.style.height=s,this.table.style.width=o,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",t))):(n=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",r=this.minimizeImg.style.display,this.minimizeImg.style.display="none",i=parseInt(this.div.style.left),l=parseInt(this.div.style.top),s=this.table.style.height,o=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px",e=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0),this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=e-2+"px",this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=e-2+"px",null!=this.resize&&(this.resize.style.visibility="hidden"),"auto"!=mxUtils.getCurrentStyle(this.contentWrapper).overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",t))),mxEvent.consume(t))});mxEvent.addGestureListeners(this.maximize,t),mxEvent.addListener(this.title,"dblclick",t)},mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move",mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(t){var i=mxEvent.getClientX(t),l=mxEvent.getClientY(t),s=this.getX(),o=this.getY(),e=mxUtils.bind(this,function(t){var e=mxEvent.getClientX(t)-i,n=mxEvent.getClientY(t)-l;this.setLocation(s+e,o+n),this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",t)),mxEvent.consume(t)}),n=mxUtils.bind(this,function(t){mxEvent.removeGestureListeners(document,null,e,n),this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",t)),mxEvent.consume(t)});mxEvent.addGestureListeners(document,null,e,n),this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",t)),mxEvent.consume(t)})),mxClient.IS_POINTER&&(this.title.style.touchAction="none")},mxWindow.prototype.setLocation=function(t,e){this.div.style.left=t+"px",this.div.style.top=e+"px"},mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)},mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)},mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(t){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",t)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent.consume(t)}))},mxWindow.prototype.setImage=function(t){this.image=document.createElement("img"),this.image.setAttribute("src",t),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)},mxWindow.prototype.setClosable=function(t){this.closeImg.style.display=t?"":"none"},mxWindow.prototype.isVisible=function(){return null!=this.div&&"none"!=this.div.style.display},mxWindow.prototype.setVisible=function(t){null!=this.div&&(this.isVisible()!=t?t?this.show():this.hide():this.fireEvent(new mxEventObject(t?mxEvent.SHOW:mxEvent.HIDE)))},mxWindow.prototype.show=function(){this.div.style.display="",this.activate(),"auto"!=mxUtils.getCurrentStyle(this.contentWrapper).overflow&&null==this.resize||"none"==this.contentWrapper.style.display||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.SHOW))},mxWindow.prototype.hide=function(){this.div.style.display="none",this.fireEvent(new mxEventObject(mxEvent.HIDE))},mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY)),null!=this.div&&(mxEvent.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.title=null,this.content=null,this.contentWrapper=null},__mxOutput.mxWindow=void 0!==mxWindow?mxWindow:void 0,mxForm.prototype.table=null,mxForm.prototype.body=!1,mxForm.prototype.getTable=function(){return this.table},mxForm.prototype.addButtons=function(t,e){var n=document.createElement("tr"),i=document.createElement("td"),l=(n.appendChild(i),i=document.createElement("td"),document.createElement("button"));mxUtils.write(l,mxResources.get("ok")||"OK"),i.appendChild(l),mxEvent.addListener(l,"click",function(){t()}),l=document.createElement("button"),mxUtils.write(l,mxResources.get("cancel")||"Cancel"),i.appendChild(l),mxEvent.addListener(l,"click",function(){e()}),n.appendChild(i),this.body.appendChild(n)},mxForm.prototype.addText=function(t,e,n){var i=document.createElement("input");return i.setAttribute("type",n||"text"),i.value=e,this.addField(t,i)},mxForm.prototype.addCheckbox=function(t,e){var n=document.createElement("input");return n.setAttribute("type","checkbox"),this.addField(t,n),e&&(n.checked=!0),n},mxForm.prototype.addTextarea=function(t,e,n){var i=document.createElement("textarea");return mxClient.IS_NS&&n--,i.setAttribute("rows",n||2),i.value=e,this.addField(t,i)},mxForm.prototype.addCombo=function(t,e,n){var i=document.createElement("select");return null!=n&&i.setAttribute("size",n),e&&i.setAttribute("multiple","true"),this.addField(t,i)},mxForm.prototype.addOption=function(t,e,n,i){var l=document.createElement("option");mxUtils.writeln(l,e),l.setAttribute("value",n),i&&l.setAttribute("selected",i),t.appendChild(l)},mxForm.prototype.addField=function(t,e){var n=document.createElement("tr"),i=document.createElement("td");return mxUtils.write(i,t),n.appendChild(i),(i=document.createElement("td")).appendChild(e),n.appendChild(i),this.body.appendChild(n),e},__mxOutput.mxForm=void 0!==mxForm?mxForm:void 0,mxImage.prototype.src=null,mxImage.prototype.width=0,mxImage.prototype.height=0,mxImage.prototype.x=0,mxImage.prototype.y=0,__mxOutput.mxImage=void 0!==mxImage?mxImage:void 0,mxDivResizer.prototype.resizeWidth=!0,mxDivResizer.prototype.resizeHeight=!0,mxDivResizer.prototype.handlingResize=!1,mxDivResizer.prototype.resize=function(){var t=this.getDocumentWidth(),e=this.getDocumentHeight(),n=parseInt(this.div.style.left),i=parseInt(this.div.style.right),l=parseInt(this.div.style.top),s=parseInt(this.div.style.bottom);this.resizeWidth&&!isNaN(n)&&!isNaN(i)&&0<=n&&0<=i&&0<t-i-n&&(this.div.style.width=t-i-n+"px"),this.resizeHeight&&!isNaN(l)&&!isNaN(s)&&0<=l&&0<=s&&0<e-l-s&&(this.div.style.height=e-l-s+"px")},mxDivResizer.prototype.getDocumentWidth=function(){return document.body.clientWidth},mxDivResizer.prototype.getDocumentHeight=function(){return document.body.clientHeight},__mxOutput.mxDivResizer=void 0!==mxDivResizer?mxDivResizer:void 0,mxDragSource.prototype.element=null,mxDragSource.prototype.dropHandler=null,mxDragSource.prototype.dragOffset=null,mxDragSource.prototype.dragElement=null,mxDragSource.prototype.previewElement=null,mxDragSource.prototype.previewOffset=null,mxDragSource.prototype.enabled=!0,mxDragSource.prototype.currentGraph=null,mxDragSource.prototype.currentDropTarget=null,mxDragSource.prototype.currentPoint=null,mxDragSource.prototype.currentGuide=null,mxDragSource.prototype.currentHighlight=null,mxDragSource.prototype.autoscroll=!0,mxDragSource.prototype.guidesEnabled=!0,mxDragSource.prototype.gridEnabled=!0,mxDragSource.prototype.highlightDropTargets=!0,mxDragSource.prototype.dragElementZIndex=100,mxDragSource.prototype.dragElementOpacity=70,mxDragSource.prototype.checkEventSource=!0,mxDragSource.prototype.isEnabled=function(){return this.enabled},mxDragSource.prototype.setEnabled=function(t){this.enabled=t},mxDragSource.prototype.isGuidesEnabled=function(){return this.guidesEnabled},mxDragSource.prototype.setGuidesEnabled=function(t){this.guidesEnabled=t},mxDragSource.prototype.isGridEnabled=function(){return this.gridEnabled},mxDragSource.prototype.setGridEnabled=function(t){this.gridEnabled=t},mxDragSource.prototype.getGraphForEvent=function(t){return null},mxDragSource.prototype.getDropTarget=function(t,e,n,i){return t.getCellAt(e,n)},mxDragSource.prototype.createDragElement=function(t){return this.element.cloneNode(!0)},mxDragSource.prototype.createPreviewElement=function(t){return null},mxDragSource.prototype.isActive=function(){return null!=this.mouseMoveHandler},mxDragSource.prototype.reset=function(){null!=this.currentGraph&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()},mxDragSource.prototype.mouseDown=function(t){this.enabled&&!mxEvent.isConsumed(t)&&null==this.mouseMoveHandler&&(this.startDrag(t),this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove),this.mouseUpHandler=mxUtils.bind(this,this.mouseUp),mxEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),mxClient.IS_TOUCH)&&!mxEvent.isMouseEvent(t)&&(this.eventSource=mxEvent.getSource(t),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler))},mxDragSource.prototype.startDrag=function(t){this.dragElement=this.createDragElement(t),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=this.dragElementZIndex,mxUtils.setOpacity(this.dragElement,this.dragElementOpacity),this.checkEventSource&&mxClient.IS_SVG&&(this.dragElement.style.pointerEvents="none")},mxDragSource.prototype.stopDrag=function(){this.removeDragElement()},mxDragSource.prototype.removeDragElement=function(){null!=this.dragElement&&(null!=this.dragElement.parentNode&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)},mxDragSource.prototype.getElementForEvent=function(t){return mxEvent.isTouchEvent(t)||mxEvent.isPenEvent(t)?document.elementFromPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)):mxEvent.getSource(t)},mxDragSource.prototype.graphContainsEvent=function(t,e){var n=mxEvent.getClientX(e),i=mxEvent.getClientY(e),l=mxUtils.getOffset(t.container),s=mxUtils.getScrollOrigin(),o=this.getElementForEvent(e);if(this.checkEventSource)for(;null!=o&&o!=t.container;)o=o.parentNode;return null!=o&&n>=l.x-s.x&&i>=l.y-s.y&&n<=l.x-s.x+t.container.offsetWidth&&i<=l.y-s.y+t.container.offsetHeight},mxDragSource.prototype.mouseMove=function(t){var e,n,i=this.getGraphForEvent(t);(i=null==i||this.graphContainsEvent(i,t)?i:null)!=this.currentGraph&&(null!=this.currentGraph&&this.dragExit(this.currentGraph,t),this.currentGraph=i,null!=this.currentGraph)&&this.dragEnter(this.currentGraph,t),null!=this.currentGraph&&this.dragOver(this.currentGraph,t),null==this.dragElement||null!=this.previewElement&&"visible"==this.previewElement.style.visibility?null!=this.dragElement&&mxUtils.setOpacity(this.dragElement,0):(i=mxEvent.getClientX(t),e=mxEvent.getClientY(t),null==this.dragElement.parentNode&&document.body.appendChild(this.dragElement),mxUtils.setOpacity(this.dragElement,this.dragElementOpacity),null!=this.dragOffset&&(i+=this.dragOffset.x,e+=this.dragOffset.y),n=mxUtils.getDocumentScrollOrigin(document),this.dragElement.style.left=i+n.x+"px",this.dragElement.style.top=e+n.y+"px"),mxEvent.consume(t)},mxDragSource.prototype.mouseUp=function(t){var e,n,i;null!=this.currentGraph&&(null==this.currentPoint||null!=this.previewElement&&"hidden"==this.previewElement.style.visibility||(i=this.currentGraph.view.scale,e=this.currentGraph.view.translate,n=this.currentPoint.x/i-e.x,i=this.currentPoint.y/i-e.y,this.drop(this.currentGraph,t,this.currentDropTarget,n,i)),this.dragExit(this.currentGraph),this.currentGraph=null),this.stopDrag(),this.removeListeners(),mxEvent.consume(t)},mxDragSource.prototype.removeListeners=function(){null!=this.eventSource&&(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),mxEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseMoveHandler=null,this.mouseUpHandler=null},mxDragSource.prototype.dragEnter=function(t,e){t.isMouseDown=!0,t.isMouseTrigger=mxEvent.isMouseEvent(e),this.previewElement=this.createPreviewElement(t),null!=this.previewElement&&this.checkEventSource&&mxClient.IS_SVG&&(this.previewElement.style.pointerEvents="none"),this.isGuidesEnabled()&&null!=this.previewElement&&(this.currentGuide=new mxGuide(t,t.graphHandler.getGuideStates())),this.highlightDropTargets&&(this.currentHighlight=new mxCellHighlight(t,mxConstants.DROP_TARGET_COLOR)),t.addListener(mxEvent.FIRE_MOUSE_EVENT,this.eventConsumer)},mxDragSource.prototype.dragExit=function(t,e){this.currentDropTarget=null,this.currentPoint=null,t.isMouseDown=!1,t.removeListener(this.eventConsumer),null!=this.previewElement&&(null!=this.previewElement.parentNode&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),null!=this.currentGuide&&(this.currentGuide.destroy(),this.currentGuide=null),null!=this.currentHighlight&&(this.currentHighlight.destroy(),this.currentHighlight=null)},mxDragSource.prototype.dragOver=function(t,e){var n,i,l=mxUtils.getOffset(t.container),s=mxUtils.getScrollOrigin(t.container),o=mxEvent.getClientX(e)-l.x+s.x-t.panDx,l=mxEvent.getClientY(e)-l.y+s.y-t.panDy;t.autoScroll&&(null==this.autoscroll||this.autoscroll)&&t.scrollPointToVisible(o,l,t.autoExtend),null!=this.currentHighlight&&t.isDropEnabled()&&(this.currentDropTarget=this.getDropTarget(t,o,l,e),s=t.getView().getState(this.currentDropTarget),this.currentHighlight.highlight(s)),null!=this.previewElement&&(null==this.previewElement.parentNode&&(t.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute"),s=this.isGridEnabled()&&t.isGridEnabledEvent(e),n=!0,null!=this.currentGuide&&this.currentGuide.isEnabledForEvent(e)?(e=new mxRectangle(0,0,parseInt(this.previewElement.style.width),parseInt(this.previewElement.style.height)),i=new mxPoint(o,l),o=(i=this.currentGuide.move(e,i,s,!(n=!1))).x,l=i.y):s&&(e=t.view.scale,i=t.view.translate,s=t.gridSize/2,o=(t.snap(o/e-i.x-s)+i.x)*e,l=(t.snap(l/e-i.y-s)+i.y)*e),null!=this.currentGuide&&n&&this.currentGuide.hide(),null!=this.previewOffset&&(o+=this.previewOffset.x,l+=this.previewOffset.y),this.previewElement.style.left=Math.round(o)+"px",this.previewElement.style.top=Math.round(l)+"px",this.previewElement.style.visibility="visible"),this.currentPoint=new mxPoint(o,l)},mxDragSource.prototype.drop=function(t,e,n,i,l){this.dropHandler.apply(this,arguments),"hidden"!=t.container.style.visibility&&t.container.focus()},__mxOutput.mxDragSource=void 0!==mxDragSource?mxDragSource:void 0,mxToolbar.prototype=new mxEventSource,mxToolbar.prototype.constructor=mxToolbar,mxToolbar.prototype.container=null,mxToolbar.prototype.enabled=!0,mxToolbar.prototype.noReset=!1,mxToolbar.prototype.updateDefaultMode=!0,mxToolbar.prototype.addItem=function(t,e,n,i,l,s){var o=document.createElement(null!=e?"img":"button"),r=l||(null!=s?"mxToolbarMode":"mxToolbarItem"),l=(o.className=r,o.setAttribute("src",e),null!=t&&(null!=e?o.setAttribute("title",t):mxUtils.write(o,t)),this.container.appendChild(o),null!=n&&(mxEvent.addListener(o,"click",n),mxClient.IS_TOUCH)&&mxEvent.addListener(o,"touchend",n),mxUtils.bind(this,function(t){null!=i?o.setAttribute("src",e):o.style.backgroundColor=""}));return mxEvent.addGestureListeners(o,mxUtils.bind(this,function(t){var e;null!=i?o.setAttribute("src",i):o.style.backgroundColor="gray",null!=s&&(null==this.menu&&(this.menu=new mxPopupMenu,this.menu.init()),e=this.currentImg,this.menu.isMenuShowing()&&this.menu.hideMenu(),e!=o)&&(this.currentImg=o,this.menu.factoryMethod=s,e=new mxPoint(o.offsetLeft,o.offsetTop+o.offsetHeight),this.menu.popup(e.x,e.y,null,t),this.menu.isMenuShowing())&&(o.className=r+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),o.className=r,this.currentImg=null})}),null,l),mxEvent.addListener(o,"mouseout",l),o},mxToolbar.prototype.addCombo=function(t){var e=document.createElement("div"),n=(e.style.display="inline",e.className="mxToolbarComboContainer",document.createElement("select"));return n.className=t||"mxToolbarCombo",e.appendChild(n),this.container.appendChild(e),n},mxToolbar.prototype.addActionCombo=function(t,e){var n=document.createElement("select");return n.className=e||"mxToolbarCombo",this.addOption(n,t,null),mxEvent.addListener(n,"change",function(t){var e=n.options[n.selectedIndex];n.selectedIndex=0,null!=e.funct&&e.funct(t)}),this.container.appendChild(n),n},mxToolbar.prototype.addOption=function(t,e,n){var i=document.createElement("option");return mxUtils.writeln(i,e),"function"==typeof n?i.funct=n:i.setAttribute("value",n),t.appendChild(i),i},mxToolbar.prototype.addSwitchMode=function(t,e,n,i,l){var s=document.createElement("img");return s.initialClassName=l||"mxToolbarMode",s.className=s.initialClassName,s.setAttribute("src",e),s.altIcon=i,null!=t&&s.setAttribute("title",t),mxEvent.addListener(s,"click",mxUtils.bind(this,function(t){var e=this.selectedMode.altIcon;null!=e?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",e)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=s),null!=(e=(this.selectedMode=s).altIcon)?(s.altIcon=s.getAttribute("src"),s.setAttribute("src",e)):s.className=s.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT)),n()})),this.container.appendChild(s),null==this.defaultMode&&(this.defaultMode=s,this.selectMode(s),n()),s},mxToolbar.prototype.addMode=function(t,e,n,i,l,s){s=null==s||s;var o=document.createElement(null!=e?"img":"button");return o.initialClassName=l||"mxToolbarMode",o.className=o.initialClassName,o.setAttribute("src",e),o.altIcon=i,null!=t&&o.setAttribute("title",t),this.enabled&&s&&(mxEvent.addListener(o,"click",mxUtils.bind(this,function(t){this.selectMode(o,n),this.noReset=!1})),mxEvent.addListener(o,"dblclick",mxUtils.bind(this,function(t){this.selectMode(o,n),this.noReset=!0})),null==this.defaultMode)&&(this.defaultMode=o,this.defaultFunction=n,this.selectMode(o,n)),this.container.appendChild(o),o},mxToolbar.prototype.selectMode=function(t,e){var n;this.selectedMode!=t&&(null!=this.selectedMode&&(null!=(n=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName),this.selectedMode=t,null!=(n=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",e)))},mxToolbar.prototype.resetMode=function(t){!t&&this.noReset||this.selectedMode==this.defaultMode||this.selectMode(this.defaultMode,this.defaultFunction)},mxToolbar.prototype.addSeparator=function(t){return this.addItem(null,t,null)},mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)},mxToolbar.prototype.addLine=function(){var t=document.createElement("hr");t.style.marginRight="6px",t.setAttribute("size","1"),this.container.appendChild(t)},mxToolbar.prototype.destroy=function(){mxEvent.release(this.container),this.container=null,this.defaultMode=null,this.defaultFunction=null,(this.selectedMode=null)!=this.menu&&this.menu.destroy()},__mxOutput.mxToolbar=void 0!==mxToolbar?mxToolbar:void 0,mxUndoableEdit.prototype.source=null,mxUndoableEdit.prototype.changes=null,mxUndoableEdit.prototype.significant=null,mxUndoableEdit.prototype.undone=!1,mxUndoableEdit.prototype.redone=!1,mxUndoableEdit.prototype.isEmpty=function(){return 0==this.changes.length},mxUndoableEdit.prototype.isSignificant=function(){return this.significant},mxUndoableEdit.prototype.add=function(t){this.changes.push(t)},mxUndoableEdit.prototype.notify=function(){},mxUndoableEdit.prototype.die=function(){},mxUndoableEdit.prototype.undo=function(){if(!this.undone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var t=this.changes.length-1;0<=t;t--){var e=this.changes[t];null!=e.execute?e.execute():null!=e.undo&&e.undo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",e))}this.undone=!0,this.redone=!1,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoableEdit.prototype.redo=function(){if(!this.redone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var t=this.changes.length,e=0;e<t;e++){var n=this.changes[e];null!=n.execute?n.execute():null!=n.redo&&n.redo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",n))}this.undone=!1,this.redone=!0,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},__mxOutput.mxUndoableEdit=void 0!==mxUndoableEdit?mxUndoableEdit:void 0,mxUndoManager.prototype=new mxEventSource,mxUndoManager.prototype.constructor=mxUndoManager,mxUndoManager.prototype.size=null,mxUndoManager.prototype.history=null,mxUndoManager.prototype.indexOfNextAdd=0,mxUndoManager.prototype.isEmpty=function(){return 0==this.history.length},mxUndoManager.prototype.clear=function(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new mxEventObject(mxEvent.CLEAR))},mxUndoManager.prototype.canUndo=function(){return 0<this.indexOfNextAdd},mxUndoManager.prototype.undo=function(){for(;0<this.indexOfNextAdd;){var t=this.history[--this.indexOfNextAdd];if(t.undo(),t.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",t));break}}},mxUndoManager.prototype.canRedo=function(){return this.indexOfNextAdd<this.history.length},mxUndoManager.prototype.redo=function(){for(var t=this.history.length;this.indexOfNextAdd<t;){var e=this.history[this.indexOfNextAdd++];if(e.redo(),e.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.REDO,"edit",e));break}}},mxUndoManager.prototype.undoableEditHappened=function(t){this.trim(),0<this.size&&this.size==this.history.length&&this.history.shift(),this.history.push(t),this.indexOfNextAdd=this.history.length,this.fireEvent(new mxEventObject(mxEvent.ADD,"edit",t))},mxUndoManager.prototype.trim=function(){if(this.history.length>this.indexOfNextAdd)for(var t=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd),e=0;e<t.length;e++)t[e].die()},__mxOutput.mxUndoManager=void 0!==mxUndoManager?mxUndoManager:void 0;var mxUrlConverter=function(){};function mxPanningManager(s){this.thread=null,this.active=!1,this.tdx=0,this.tdy=0,this.t0x=0,this.t0y=0,this.dx=0,this.dy=0,this.scrollbars=!1,this.scrollLeft=0,this.scrollTop=0,this.mouseListener={mouseDown:function(t,e){},mouseMove:function(t,e){},mouseUp:mxUtils.bind(this,function(t,e){this.active&&this.stop()})},s.addMouseListener(this.mouseListener),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.stop()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener);var o=mxUtils.bind(this,function(){return this.scrollbars=mxUtils.hasScrollbars(s.container),this.scrollLeft=s.container.scrollLeft,this.scrollTop=s.container.scrollTop,window.setInterval(mxUtils.bind(this,function(){var t,e;this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars?(t=-s.container.scrollLeft-Math.ceil(this.dx),e=-s.container.scrollTop-Math.ceil(this.dy),s.panGraph(t,e),s.panDx=this.scrollLeft-s.container.scrollLeft,s.panDy=this.scrollTop-s.container.scrollTop,s.fireEvent(new mxEventObject(mxEvent.PAN))):s.panGraph(this.getDx(),this.getDy())}),this.delay)});this.isActive=function(){return active},this.getDx=function(){return Math.round(this.tdx)},this.getDy=function(){return Math.round(this.tdy)},this.start=function(){this.t0x=s.view.translate.x,this.t0y=s.view.translate.y,this.active=!0},this.panTo=function(t,e,n,i){this.active||this.start(),this.scrollLeft=s.container.scrollLeft,this.scrollTop=s.container.scrollTop,i=null!=i?i:0;var l=s.container;this.dx=t+(n=null!=n?n:0)-l.scrollLeft-l.clientWidth,this.dx<0&&Math.abs(this.dx)<this.border?this.dx=this.border+this.dx:this.handleMouseOut?this.dx=Math.max(this.dx,0):this.dx=0,0==this.dx&&(this.dx=t-l.scrollLeft,0<this.dx&&this.dx<this.border?this.dx=this.dx-this.border:this.handleMouseOut?this.dx=Math.min(0,this.dx):this.dx=0),this.dy=e+i-l.scrollTop-l.clientHeight,this.dy<0&&Math.abs(this.dy)<this.border?this.dy=this.border+this.dy:this.handleMouseOut?this.dy=Math.max(this.dy,0):this.dy=0,0==this.dy&&(this.dy=e-l.scrollTop,0<this.dy&&this.dy<this.border?this.dy=this.dy-this.border:this.handleMouseOut?this.dy=Math.min(0,this.dy):this.dy=0),0!=this.dx||0!=this.dy?(this.dx*=this.damper,this.dy*=this.damper,null==this.thread&&(this.thread=o())):null!=this.thread&&(window.clearInterval(this.thread),this.thread=null)},this.stop=function(){var t,e;this.active&&(this.active=!1,null!=this.thread&&(window.clearInterval(this.thread),this.thread=null),this.tdx=0,this.tdy=0,this.scrollbars?(s.panDx=0,s.panDy=0,s.fireEvent(new mxEventObject(mxEvent.PAN))):(t=s.panDx,e=s.panDy,0==t&&0==e||(s.panGraph(0,0),s.view.setTranslate(this.t0x+t/s.view.scale,this.t0y+e/s.view.scale))))},this.destroy=function(){s.removeMouseListener(this.mouseListener),mxEvent.removeListener(document,"mouseup",this.mouseUpListener)}}function mxPopupMenu(t){null!=(this.factoryMethod=t)&&this.init()}function mxAutoSaveManager(t){this.changeHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.graphModelChanged(e.getProperty("edit").changes)}),this.setGraph(t)}function mxAnimation(t){this.delay=null!=t?t:20}function mxMorphing(t,e,n,i){mxAnimation.call(this,i),this.graph=t,this.steps=null!=e?e:6,this.ease=null!=n?n:1.5}function mxImageBundle(t){this.images=[],this.alt=null!=t&&t}function mxImageExport(){}function mxAbstractCanvas2D(){this.converter=this.createUrlConverter(),this.reset()}function mxXmlCanvas2D(t){mxAbstractCanvas2D.call(this),this.root=t,this.writeDefaults()}function mxSvgCanvas2D(t,e){mxAbstractCanvas2D.call(this),this.root=t,this.gradients=[],this.fillPatterns=[],this.defs=null,this.styleEnabled=null!=e&&e;e=null;if(t.ownerDocument!=document){for(var n=t;null!=n&&"svg"!=n.nodeName;)n=n.parentNode;e=n}null!=e&&(0<e.getElementsByTagName("defs").length&&(this.defs=e.getElementsByTagName("defs")[0]),null==this.defs&&(this.defs=this.createElement("defs"),null!=e.firstChild?e.insertBefore(this.defs,e.firstChild):e.appendChild(this.defs)),this.styleEnabled)&&this.defs.appendChild(this.createStyle())}function mxGuide(t,e){this.graph=t,this.setStates(e)}function mxShape(t){this.stencil=t,this.initStyles()}function mxStencil(t){this.desc=t,this.parseDescription(),this.parseConstraints()}mxUrlConverter.prototype.enabled=!0,mxUrlConverter.prototype.baseUrl=null,mxUrlConverter.prototype.baseDomain=null,mxUrlConverter.prototype.updateBaseUrl=function(){this.baseDomain=location.protocol+"//"+location.host,this.baseUrl=this.baseDomain+location.pathname;var t=this.baseUrl.lastIndexOf("/");0<t&&(this.baseUrl=this.baseUrl.substring(0,t+1))},mxUrlConverter.prototype.isEnabled=function(){return this.enabled},mxUrlConverter.prototype.setEnabled=function(t){this.enabled=t},mxUrlConverter.prototype.getBaseUrl=function(){return this.baseUrl},mxUrlConverter.prototype.setBaseUrl=function(t){this.baseUrl=t},mxUrlConverter.prototype.getBaseDomain=function(){return this.baseDomain},mxUrlConverter.prototype.setBaseDomain=function(t){this.baseDomain=t},mxUrlConverter.prototype.isRelativeUrl=function(t){return"string"==typeof t&&"data:image"!=t.substring(0,10)&&"http://"!=t.substring(0,7)&&"file://"!=t.substring(0,7)&&"https://"!=t.substring(0,8)&&"//"!=t.substring(0,2)},mxUrlConverter.prototype.convert=function(t){return this.isEnabled()&&this.isRelativeUrl(t)&&(null==this.getBaseUrl()&&this.updateBaseUrl(),t="/"==t.charAt(0)?this.getBaseDomain()+t:this.getBaseUrl()+t),t},__mxOutput.mxUrlConverter=void 0!==mxUrlConverter?mxUrlConverter:void 0,mxPanningManager.prototype.damper=1/6,mxPanningManager.prototype.delay=10,mxPanningManager.prototype.handleMouseOut=!0,mxPanningManager.prototype.border=0,__mxOutput.mxPanningManager=void 0!==mxPanningManager?mxPanningManager:void 0,mxPopupMenu.prototype=new mxEventSource,mxPopupMenu.prototype.constructor=mxPopupMenu,mxPopupMenu.prototype.submenuImage=mxClient.imageBasePath+"/submenu.gif",mxPopupMenu.prototype.zIndex=10006,mxPopupMenu.prototype.factoryMethod=null,mxPopupMenu.prototype.useLeftButtonForPopup=!1,mxPopupMenu.prototype.enabled=!0,mxPopupMenu.prototype.itemCount=0,mxPopupMenu.prototype.autoExpand=!1,mxPopupMenu.prototype.smartSeparators=!1,mxPopupMenu.prototype.labels=!0,mxPopupMenu.prototype.init=function(){this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=this.zIndex,this.div.appendChild(this.table),mxEvent.disableContextMenu(this.div)},mxPopupMenu.prototype.isEnabled=function(){return this.enabled},mxPopupMenu.prototype.setEnabled=function(t){this.enabled=t},mxPopupMenu.prototype.isPopupTrigger=function(t){return t.isPopupTrigger()||this.useLeftButtonForPopup&&mxEvent.isLeftMouseButton(t.getEvent())},mxPopupMenu.prototype.addItem=function(t,e,n,i,l,s,o,r){i=i||this,this.itemCount++,i.willAddSeparator&&(i.containsItems&&this.addSeparator(i,!0),i.willAddSeparator=!1),i.containsItems=!0;var a,h,u=document.createElement("tr"),d=(u.className="mxPopupMenuItem",document.createElement("td"));return d.className="mxPopupMenuIcon",null!=e?((a=document.createElement("img")).src=e,d.appendChild(a)):null!=l&&((e=document.createElement("div")).className=l,d.appendChild(e)),u.appendChild(d),this.labels&&((a=document.createElement("td")).className="mxPopupMenuItem"+(null==s||s?"":" mxDisabled"),mxUtils.write(a,t),a.align="left",u.appendChild(a),(l=document.createElement("td")).className="mxPopupMenuItem"+(null==s||s?"":" mxDisabled"),l.style.paddingRight="6px",l.style.textAlign="right",u.appendChild(l),null==i.div)&&this.createSubmenu(i),i.tbody.appendChild(u),0!=o&&0!=s&&(h=null,mxEvent.addGestureListeners(u,mxUtils.bind(this,function(t){this.eventReceiver=u,i.activeRow!=u&&i.activeRow!=i&&(null!=i.activeRow&&null!=i.activeRow.div.parentNode&&this.hideSubmenu(i),null!=u.div)&&(this.showSubmenu(i,u),i.activeRow=u),null!=document.selection&&8==document.documentMode&&(h=document.selection.createRange()),mxEvent.consume(t)}),mxUtils.bind(this,function(t){i.activeRow!=u&&i.activeRow!=i&&(null!=i.activeRow&&null!=i.activeRow.div.parentNode&&this.hideSubmenu(i),this.autoExpand)&&null!=u.div&&(this.showSubmenu(i,u),i.activeRow=u),r||(u.className="mxPopupMenuItemHover")}),mxUtils.bind(this,function(t){if(this.eventReceiver==u){if(i.activeRow!=u&&this.hideMenu(),null!=h){try{h.select()}catch(t){}h=null}null!=n&&n(t)}this.eventReceiver=null,mxEvent.consume(t)})),r||mxEvent.addListener(u,"mouseout",mxUtils.bind(this,function(t){u.className="mxPopupMenuItem"}))),u},mxPopupMenu.prototype.addCheckmark=function(t,e){t=t.firstChild.nextSibling;t.style.backgroundImage="url('"+e+"')",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="2px 50%"},mxPopupMenu.prototype.createSubmenu=function(t){t.table=document.createElement("table"),t.table.className="mxPopupMenu",t.tbody=document.createElement("tbody"),t.table.appendChild(t.tbody),t.div=document.createElement("div"),t.div.className="mxPopupMenu",t.div.style.position="absolute",t.div.style.display="inline",t.div.style.zIndex=this.zIndex,t.div.appendChild(t.table);var e=document.createElement("img");e.setAttribute("src",this.submenuImage),(td=t.firstChild.nextSibling.nextSibling).appendChild(e)},mxPopupMenu.prototype.showSubmenu=function(t,e){var n,i,l,s,o;null!=e.div&&(e.div.style.left=t.div.offsetLeft+e.offsetLeft+e.offsetWidth-1+"px",e.div.style.top=t.div.offsetTop+e.offsetTop+"px",document.body.appendChild(e.div),n=parseInt(e.div.offsetLeft),i=parseInt(e.div.offsetWidth),o=mxUtils.getDocumentScrollOrigin(document),l=document.body,s=document.documentElement,o.x+(l.clientWidth||s.clientWidth)<n+i&&(e.div.style.left=Math.max(0,t.div.offsetLeft-i+16)+"px"),e.div.style.overflowY="auto",e.div.style.overflowX="hidden",o=Math.max(document.body.clientHeight,document.documentElement.clientHeight),e.div.style.maxHeight=o-10+"px",mxUtils.fit(e.div))},mxPopupMenu.prototype.addSeparator=function(t,e){var n,i;t=t||this,this.smartSeparators&&!e?t.willAddSeparator=!0:null!=t.tbody&&(t.willAddSeparator=!1,e=document.createElement("tr"),(n=document.createElement("td")).className="mxPopupMenuIcon",n.style.padding="0 0 0 0px",e.appendChild(n),(n=document.createElement("td")).style.padding="0 0 0 0px",n.setAttribute("colSpan","2"),(i=document.createElement("hr")).setAttribute("size","1"),n.appendChild(i),e.appendChild(n),t.tbody.appendChild(e))},mxPopupMenu.prototype.popup=function(t,e,n,i){if(null!=this.div&&null!=this.tbody&&null!=this.factoryMethod){for(this.div.style.left=t+"px",this.div.style.top=e+"px";null!=this.tbody.firstChild;)mxEvent.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,n,i),0<this.itemCount&&(this.showMenu(),this.fireEvent(new mxEventObject(mxEvent.SHOW)))}},mxPopupMenu.prototype.isMenuShowing=function(){return null!=this.div&&this.div.parentNode==document.body},mxPopupMenu.prototype.showMenu=function(){9<=document.documentMode&&(this.div.style.filter="none"),document.body.appendChild(this.div),mxUtils.fit(this.div)},mxPopupMenu.prototype.hideMenu=function(){null!=this.div&&(null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new mxEventObject(mxEvent.HIDE)))},mxPopupMenu.prototype.hideSubmenu=function(t){null!=t.activeRow&&(this.hideSubmenu(t.activeRow),null!=t.activeRow.div.parentNode&&t.activeRow.div.parentNode.removeChild(t.activeRow.div),t.activeRow=null)},mxPopupMenu.prototype.destroy=function(){null!=this.div&&(mxEvent.release(this.div),null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.div=null)},__mxOutput.mxPopupMenu=void 0!==mxPopupMenu?mxPopupMenu:void 0,mxAutoSaveManager.prototype=new mxEventSource,mxAutoSaveManager.prototype.constructor=mxAutoSaveManager,mxAutoSaveManager.prototype.graph=null,mxAutoSaveManager.prototype.autoSaveDelay=10,mxAutoSaveManager.prototype.autoSaveThrottle=2,mxAutoSaveManager.prototype.autoSaveThreshold=5,mxAutoSaveManager.prototype.ignoredChanges=0,mxAutoSaveManager.prototype.lastSnapshot=0,mxAutoSaveManager.prototype.enabled=!0,mxAutoSaveManager.prototype.changeHandler=null,mxAutoSaveManager.prototype.isEnabled=function(){return this.enabled},mxAutoSaveManager.prototype.setEnabled=function(t){this.enabled=t},mxAutoSaveManager.prototype.setGraph=function(t){null!=this.graph&&this.graph.getModel().removeListener(this.changeHandler),this.graph=t,null!=this.graph&&this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)},mxAutoSaveManager.prototype.save=function(){},mxAutoSaveManager.prototype.graphModelChanged=function(t){var e=((new Date).getTime()-this.lastSnapshot)/1e3;e>this.autoSaveDelay||this.ignoredChanges>=this.autoSaveThreshold&&e>this.autoSaveThrottle?(this.save(),this.reset()):this.ignoredChanges++},mxAutoSaveManager.prototype.reset=function(){this.lastSnapshot=(new Date).getTime(),this.ignoredChanges=0},mxAutoSaveManager.prototype.destroy=function(){this.setGraph(null)},__mxOutput.mxAutoSaveManager=void 0!==mxAutoSaveManager?mxAutoSaveManager:void 0,mxAnimation.prototype=new mxEventSource,mxAnimation.prototype.constructor=mxAnimation,mxAnimation.prototype.delay=null,mxAnimation.prototype.thread=null,mxAnimation.prototype.isRunning=function(){return null!=this.thread},mxAnimation.prototype.startAnimation=function(){null==this.thread&&(this.thread=window.setInterval(mxUtils.bind(this,this.updateAnimation),this.delay))},mxAnimation.prototype.updateAnimation=function(){this.fireEvent(new mxEventObject(mxEvent.EXECUTE))},mxAnimation.prototype.stopAnimation=function(){null!=this.thread&&(window.clearInterval(this.thread),this.thread=null,this.fireEvent(new mxEventObject(mxEvent.DONE)))},__mxOutput.mxAnimation=void 0!==mxAnimation?mxAnimation:void 0,mxMorphing.prototype=new mxAnimation,mxMorphing.prototype.constructor=mxMorphing,mxMorphing.prototype.graph=null,mxMorphing.prototype.steps=null,mxMorphing.prototype.step=0,mxMorphing.prototype.ease=null,mxMorphing.prototype.cells=null,mxMorphing.prototype.updateAnimation=function(){mxAnimation.prototype.updateAnimation.apply(this,arguments);var t=new mxCellStatePreview(this.graph);if(null!=this.cells)for(var e=0;e<this.cells.length;e++)this.animateCell(this.cells[e],t,!1);else this.animateCell(this.graph.getModel().getRoot(),t,!0);this.show(t),(t.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()},mxMorphing.prototype.show=function(t){t.show()},mxMorphing.prototype.animateCell=function(t,e,n){var i,l,s=this.graph.getView().getState(t),o=null;if(null!=s&&(o=this.getDelta(s),!this.graph.getModel().isVertex(t)||0==o.x&&0==o.y||(i=this.graph.view.getTranslate(),l=this.graph.view.getScale(),o.x+=i.x*l,o.y+=i.y*l,e.moveState(s,-o.x/this.ease,-o.y/this.ease))),n&&!this.stopRecursion(s,o))for(var r=this.graph.getModel().getChildCount(t),a=0;a<r;a++)this.animateCell(this.graph.getModel().getChildAt(t,a),e,n)},mxMorphing.prototype.stopRecursion=function(t,e){return null!=e&&(0!=e.x||0!=e.y)},mxMorphing.prototype.getDelta=function(t){var e=this.getOriginForCell(t.cell),n=this.graph.getView().getTranslate(),i=this.graph.getView().getScale(),l=t.x/i-n.x,t=t.y/i-n.y;return new mxPoint((e.x-l)*i,(e.y-t)*i)},mxMorphing.prototype.getOriginForCell=function(t){var e,n=null;return null!=t&&(e=this.graph.getModel().getParent(t),t=this.graph.getCellGeometry(t),n=this.getOriginForCell(e),null!=t)&&(t.relative?null!=(e=this.graph.getCellGeometry(e))&&(n.x+=t.x*e.width,n.y+=t.y*e.height):(n.x+=t.x,n.y+=t.y)),n=null==n?new mxPoint(-(e=this.graph.view.getTranslate()).x,-e.y):n},__mxOutput.mxMorphing=void 0!==mxMorphing?mxMorphing:void 0,mxImageBundle.prototype.images=null,mxImageBundle.prototype.alt=null,mxImageBundle.prototype.putImage=function(t,e,n){this.images[t]={value:e,fallback:n}},mxImageBundle.prototype.getImage=function(t){var e=null;return e=null!=t&&null!=(t=this.images[t])?this.alt?t.fallback:t.value:e},__mxOutput.mxImageBundle=void 0!==mxImageBundle?mxImageBundle:void 0,mxImageExport.prototype.includeOverlays=!1,mxImageExport.prototype.drawState=function(t,e){null!=t&&(this.visitStatesRecursive(t,e,mxUtils.bind(this,function(){this.drawCellState.apply(this,arguments)})),this.includeOverlays)&&this.visitStatesRecursive(t,e,mxUtils.bind(this,function(){this.drawOverlays.apply(this,arguments)}))},mxImageExport.prototype.visitStatesRecursive=function(t,e,n){if(null!=t){n(t,e);for(var i=t.view.graph,l=i.model.getChildCount(t.cell),s=0;s<l;s++){var o=i.view.getState(i.model.getChildAt(t.cell,s));this.visitStatesRecursive(o,e,n)}}},mxImageExport.prototype.getTitleForCellState=function(t,e){return null},mxImageExport.prototype.getLinkForCellState=function(t,e){return null},mxImageExport.prototype.getLinkTargetForCellState=function(t,e){return null},mxImageExport.prototype.drawCellState=function(t,e){var n=this.getLinkForCellState(t,e),i=(null!=n&&e.setLink(n,this.getLinkTargetForCellState(t,e)),this.getTitleForCellState(t,e));null!=i&&e.setTitle(i),this.drawShape(t,e),this.drawText(t,e),null!=i&&e.setTitle(null),null!=n&&e.setLink(null)},mxImageExport.prototype.drawShape=function(t,e){t.shape instanceof mxShape&&this.doDrawShape(t.shape,e)},mxImageExport.prototype.drawText=function(t,e){this.doDrawShape(t.text,e)},mxImageExport.prototype.doDrawShape=function(t,e){var n,i;null!=t&&t.checkBounds()&&(n=e.root,i=t.node,e.root=t.createSvg(),n.appendChild(e.root),t.node=e.root,e.save(),t.beforePaint(e),t.paint(e),t.afterPaint(e),e.restore(),t.node=i,e.root=n)},mxImageExport.prototype.drawOverlays=function(t,n){null!=t.overlays&&t.overlays.visit(function(t,e){e instanceof mxShape&&e.paint(n)})},__mxOutput.mxImageExport=void 0!==mxImageExport?mxImageExport:void 0,mxAbstractCanvas2D.prototype.state=null,mxAbstractCanvas2D.prototype.states=null,mxAbstractCanvas2D.prototype.path=null,mxAbstractCanvas2D.prototype.rotateHtml=!0,mxAbstractCanvas2D.prototype.lastX=0,mxAbstractCanvas2D.prototype.lastY=0,mxAbstractCanvas2D.prototype.moveOp="M",mxAbstractCanvas2D.prototype.lineOp="L",mxAbstractCanvas2D.prototype.quadOp="Q",mxAbstractCanvas2D.prototype.curveOp="C",mxAbstractCanvas2D.prototype.closeOp="Z",mxAbstractCanvas2D.prototype.pointerEvents=!1,mxAbstractCanvas2D.prototype.createUrlConverter=function(){return new mxUrlConverter},mxAbstractCanvas2D.prototype.reset=function(){this.state=this.createState(),this.states=[]},mxAbstractCanvas2D.prototype.createState=function(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:!1,dashPattern:"3 3",fixDash:!1,lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants.DEFAULT_FONTSIZE,fontFamily:mxConstants.DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowStyle:null,shadowColor:mxConstants.SHADOWCOLOR,shadowAlpha:mxConstants.SHADOW_OPACITY,shadowDx:mxConstants.SHADOW_OFFSET_X,shadowDy:mxConstants.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}},mxAbstractCanvas2D.prototype.format=function(t){return Math.round(parseFloat(t))},mxAbstractCanvas2D.prototype.addOp=function(){if(null!=this.path&&(this.path.push(arguments[0]),2<arguments.length))for(var t=this.state,e=2;e<arguments.length;e+=2)this.lastX=arguments[e-1],this.lastY=arguments[e],this.path.push(this.format((this.lastX+t.dx)*t.scale)),this.path.push(this.format((this.lastY+t.dy)*t.scale))},mxAbstractCanvas2D.prototype.rotatePoint=function(t,e,n,i,l){n*=Math.PI/180;return mxUtils.getRotatedPoint(new mxPoint(t,e),Math.cos(n),Math.sin(n),new mxPoint(i,l))},mxAbstractCanvas2D.prototype.save=function(){this.states.push(this.state),this.state=mxUtils.clone(this.state)},mxAbstractCanvas2D.prototype.restore=function(){0<this.states.length&&(this.state=this.states.pop())},mxAbstractCanvas2D.prototype.setTitle=function(t){},mxAbstractCanvas2D.prototype.setLink=function(t,e){},mxAbstractCanvas2D.prototype.scale=function(t){this.state.scale*=t,this.state.strokeWidth*=t},mxAbstractCanvas2D.prototype.translate=function(t,e){this.state.dx+=t,this.state.dy+=e},mxAbstractCanvas2D.prototype.rotate=function(t,e,n,i,l){},mxAbstractCanvas2D.prototype.setAlpha=function(t){this.state.alpha=t},mxAbstractCanvas2D.prototype.setFillAlpha=function(t){this.state.fillAlpha=t},mxAbstractCanvas2D.prototype.setStrokeAlpha=function(t){this.state.strokeAlpha=t},mxAbstractCanvas2D.prototype.setFillColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fillColor=t,this.state.gradientColor=null},mxAbstractCanvas2D.prototype.setFillStyle=function(t){t==mxConstants.NONE&&(t=null),this.state.fillStyle=t},mxAbstractCanvas2D.prototype.setGradient=function(t,e,n,i,l,s,o,r,a){var h=this.state;h.fillColor=t,h.gradientFillAlpha=null!=r?r:1,h.gradientColor=e,h.gradientAlpha=null!=a?a:1,h.gradientDirection=o},mxAbstractCanvas2D.prototype.setStrokeColor=function(t){t==mxConstants.NONE&&(t=null),this.state.strokeColor=t},mxAbstractCanvas2D.prototype.setStrokeWidth=function(t){this.state.strokeWidth=t},mxAbstractCanvas2D.prototype.setDashed=function(t,e){this.state.dashed=t,this.state.fixDash=e},mxAbstractCanvas2D.prototype.setDashPattern=function(t){this.state.dashPattern=t},mxAbstractCanvas2D.prototype.setLineCap=function(t){this.state.lineCap=t},mxAbstractCanvas2D.prototype.setLineJoin=function(t){this.state.lineJoin=t},mxAbstractCanvas2D.prototype.setMiterLimit=function(t){this.state.miterLimit=t},mxAbstractCanvas2D.prototype.setFontColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fontColor=t},mxAbstractCanvas2D.prototype.setFontBackgroundColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fontBackgroundColor=t},mxAbstractCanvas2D.prototype.setFontBorderColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fontBorderColor=t},mxAbstractCanvas2D.prototype.setFontSize=function(t){this.state.fontSize=parseFloat(t)},mxAbstractCanvas2D.prototype.setFontFamily=function(t){this.state.fontFamily=t},mxAbstractCanvas2D.prototype.setFontStyle=function(t){this.state.fontStyle=t=null==t?0:t},mxAbstractCanvas2D.prototype.setShadow=function(t,e){this.state.shadow=t,this.state.shadowStyle=e},mxAbstractCanvas2D.prototype.setShadowColor=function(t){t==mxConstants.NONE&&(t=null),this.state.shadowColor=t},mxAbstractCanvas2D.prototype.setShadowAlpha=function(t){this.state.shadowAlpha=t},mxAbstractCanvas2D.prototype.setShadowOffset=function(t,e){this.state.shadowDx=t,this.state.shadowDy=e},mxAbstractCanvas2D.prototype.begin=function(){this.lastX=0,this.lastY=0,this.path=[]},mxAbstractCanvas2D.prototype.moveTo=function(t,e){this.addOp(this.moveOp,t,e)},mxAbstractCanvas2D.prototype.lineTo=function(t,e){this.addOp(this.lineOp,t,e)},mxAbstractCanvas2D.prototype.quadTo=function(t,e,n,i){this.addOp(this.quadOp,t,e,n,i)},mxAbstractCanvas2D.prototype.curveTo=function(t,e,n,i,l,s){this.addOp(this.curveOp,t,e,n,i,l,s)},mxAbstractCanvas2D.prototype.arcTo=function(t,e,n,i,l,s,o){var r=mxUtils.arcToCurves(this.lastX,this.lastY,t,e,n,i,l,s,o);if(null!=r)for(var a=0;a<r.length;a+=6)this.curveTo(r[a],r[a+1],r[a+2],r[a+3],r[a+4],r[a+5])},mxAbstractCanvas2D.prototype.close=function(t,e,n,i,l,s){this.addOp(this.closeOp)},mxAbstractCanvas2D.prototype.end=function(){},__mxOutput.mxAbstractCanvas2D=void 0!==mxAbstractCanvas2D?mxAbstractCanvas2D:void 0,mxUtils.extend(mxXmlCanvas2D,mxAbstractCanvas2D),mxXmlCanvas2D.prototype.textEnabled=!0,mxXmlCanvas2D.prototype.compressed=!0,mxXmlCanvas2D.prototype.writeDefaults=function(){var t=this.createElement("fontfamily");t.setAttribute("family",mxConstants.DEFAULT_FONTFAMILY),this.root.appendChild(t),(t=this.createElement("fontsize")).setAttribute("size",mxConstants.DEFAULT_FONTSIZE),this.root.appendChild(t),(t=this.createElement("shadowcolor")).setAttribute("color",mxConstants.SHADOWCOLOR),this.root.appendChild(t),(t=this.createElement("shadowalpha")).setAttribute("alpha",mxConstants.SHADOW_OPACITY),this.root.appendChild(t),(t=this.createElement("shadowoffset")).setAttribute("dx",mxConstants.SHADOW_OFFSET_X),t.setAttribute("dy",mxConstants.SHADOW_OFFSET_Y),this.root.appendChild(t)},mxXmlCanvas2D.prototype.format=function(t){return parseFloat(parseFloat(t).toFixed(2))},mxXmlCanvas2D.prototype.createElement=function(t){return this.root.ownerDocument.createElement(t)},mxXmlCanvas2D.prototype.save=function(){this.compressed&&mxAbstractCanvas2D.prototype.save.apply(this,arguments),this.root.appendChild(this.createElement("save"))},mxXmlCanvas2D.prototype.restore=function(){this.compressed&&mxAbstractCanvas2D.prototype.restore.apply(this,arguments),this.root.appendChild(this.createElement("restore"))},mxXmlCanvas2D.prototype.scale=function(t){var e=this.createElement("scale");e.setAttribute("scale",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.translate=function(t,e){var n=this.createElement("translate");n.setAttribute("dx",this.format(t)),n.setAttribute("dy",this.format(e)),this.root.appendChild(n)},mxXmlCanvas2D.prototype.rotate=function(t,e,n,i,l){var s=this.createElement("rotate");(0!=t||e||n)&&(s.setAttribute("theta",this.format(t)),s.setAttribute("flipH",e?"1":"0"),s.setAttribute("flipV",n?"1":"0"),s.setAttribute("cx",this.format(i)),s.setAttribute("cy",this.format(l)),this.root.appendChild(s))},mxXmlCanvas2D.prototype.setAlpha=function(t){if(this.compressed){if(this.state.alpha==t)return;mxAbstractCanvas2D.prototype.setAlpha.apply(this,arguments)}var e=this.createElement("alpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setFillAlpha=function(t){if(this.compressed){if(this.state.fillAlpha==t)return;mxAbstractCanvas2D.prototype.setFillAlpha.apply(this,arguments)}var e=this.createElement("fillalpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setStrokeAlpha=function(t){if(this.compressed){if(this.state.strokeAlpha==t)return;mxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this,arguments)}var e=this.createElement("strokealpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setFillColor=function(t){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fillColor==t)return;mxAbstractCanvas2D.prototype.setFillColor.apply(this,arguments)}var e=this.createElement("fillcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setGradient=function(t,e,n,i,l,s,o,r,a){var h;null!=t&&null!=e&&(mxAbstractCanvas2D.prototype.setGradient.apply(this,arguments),(h=this.createElement("gradient")).setAttribute("c1",t),h.setAttribute("c2",e),h.setAttribute("x",this.format(n)),h.setAttribute("y",this.format(i)),h.setAttribute("w",this.format(l)),h.setAttribute("h",this.format(s)),null!=o&&h.setAttribute("direction",o),null!=r&&h.setAttribute("alpha1",r),null!=a&&h.setAttribute("alpha2",a),this.root.appendChild(h))},mxXmlCanvas2D.prototype.setStrokeColor=function(t){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.strokeColor==t)return;mxAbstractCanvas2D.prototype.setStrokeColor.apply(this,arguments)}var e=this.createElement("strokecolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setStrokeWidth=function(t){if(this.compressed){if(this.state.strokeWidth==t)return;mxAbstractCanvas2D.prototype.setStrokeWidth.apply(this,arguments)}var e=this.createElement("strokewidth");e.setAttribute("width",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setDashed=function(t,e){if(this.compressed){if(this.state.dashed==t)return;mxAbstractCanvas2D.prototype.setDashed.apply(this,arguments)}var n=this.createElement("dashed");n.setAttribute("dashed",t?"1":"0"),null!=e&&n.setAttribute("fixDash",e?"1":"0"),this.root.appendChild(n)},mxXmlCanvas2D.prototype.setDashPattern=function(t){if(this.compressed){if(this.state.dashPattern==t)return;mxAbstractCanvas2D.prototype.setDashPattern.apply(this,arguments)}var e=this.createElement("dashpattern");e.setAttribute("pattern",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setLineCap=function(t){if(this.compressed){if(this.state.lineCap==t)return;mxAbstractCanvas2D.prototype.setLineCap.apply(this,arguments)}var e=this.createElement("linecap");e.setAttribute("cap",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setLineJoin=function(t){if(this.compressed){if(this.state.lineJoin==t)return;mxAbstractCanvas2D.prototype.setLineJoin.apply(this,arguments)}var e=this.createElement("linejoin");e.setAttribute("join",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setMiterLimit=function(t){if(this.compressed){if(this.state.miterLimit==t)return;mxAbstractCanvas2D.prototype.setMiterLimit.apply(this,arguments)}var e=this.createElement("miterlimit");e.setAttribute("limit",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setFontColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontColor==t)return;mxAbstractCanvas2D.prototype.setFontColor.apply(this,arguments)}var e=this.createElement("fontcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontBackgroundColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontBackgroundColor==t)return;mxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this,arguments)}var e=this.createElement("fontbackgroundcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontBorderColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontBorderColor==t)return;mxAbstractCanvas2D.prototype.setFontBorderColor.apply(this,arguments)}var e=this.createElement("fontbordercolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontSize=function(t){if(this.textEnabled){if(this.compressed){if(this.state.fontSize==t)return;mxAbstractCanvas2D.prototype.setFontSize.apply(this,arguments)}var e=this.createElement("fontsize");e.setAttribute("size",t),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontFamily=function(t){if(this.textEnabled){if(this.compressed){if(this.state.fontFamily==t)return;mxAbstractCanvas2D.prototype.setFontFamily.apply(this,arguments)}var e=this.createElement("fontfamily");e.setAttribute("family",t),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontStyle=function(t){if(this.textEnabled){if(null==t&&(t=0),this.compressed){if(this.state.fontStyle==t)return;mxAbstractCanvas2D.prototype.setFontStyle.apply(this,arguments)}var e=this.createElement("fontstyle");e.setAttribute("style",t),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setShadow=function(t){if(this.compressed){if(this.state.shadow==t)return;mxAbstractCanvas2D.prototype.setShadow.apply(this,arguments)}var e=this.createElement("shadow");e.setAttribute("enabled",t?"1":"0"),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setShadowColor=function(t){if(this.compressed){if(t==mxConstants.NONE&&(t=null),this.state.shadowColor==t)return;mxAbstractCanvas2D.prototype.setShadowColor.apply(this,arguments)}var e=this.createElement("shadowcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setShadowAlpha=function(t){if(this.compressed){if(this.state.shadowAlpha==t)return;mxAbstractCanvas2D.prototype.setShadowAlpha.apply(this,arguments)}var e=this.createElement("shadowalpha");e.setAttribute("alpha",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setShadowOffset=function(t,e){if(this.compressed){if(this.state.shadowDx==t&&this.state.shadowDy==e)return;mxAbstractCanvas2D.prototype.setShadowOffset.apply(this,arguments)}var n=this.createElement("shadowoffset");n.setAttribute("dx",t),n.setAttribute("dy",e),this.root.appendChild(n)},mxXmlCanvas2D.prototype.rect=function(t,e,n,i){var l=this.createElement("rect");l.setAttribute("x",this.format(t)),l.setAttribute("y",this.format(e)),l.setAttribute("w",this.format(n)),l.setAttribute("h",this.format(i)),this.root.appendChild(l)},mxXmlCanvas2D.prototype.roundrect=function(t,e,n,i,l,s){var o=this.createElement("roundrect");o.setAttribute("x",this.format(t)),o.setAttribute("y",this.format(e)),o.setAttribute("w",this.format(n)),o.setAttribute("h",this.format(i)),o.setAttribute("dx",this.format(l)),o.setAttribute("dy",this.format(s)),this.root.appendChild(o)},mxXmlCanvas2D.prototype.ellipse=function(t,e,n,i){var l=this.createElement("ellipse");l.setAttribute("x",this.format(t)),l.setAttribute("y",this.format(e)),l.setAttribute("w",this.format(n)),l.setAttribute("h",this.format(i)),this.root.appendChild(l)},mxXmlCanvas2D.prototype.image=function(t,e,n,i,l,s,o,r){l=this.converter.convert(l);var a=this.createElement("image");a.setAttribute("x",this.format(t)),a.setAttribute("y",this.format(e)),a.setAttribute("w",this.format(n)),a.setAttribute("h",this.format(i)),a.setAttribute("src",l),a.setAttribute("aspect",s?"1":"0"),a.setAttribute("flipH",o?"1":"0"),a.setAttribute("flipV",r?"1":"0"),this.root.appendChild(a)},mxXmlCanvas2D.prototype.begin=function(){this.root.appendChild(this.createElement("begin")),this.lastX=0,this.lastY=0},mxXmlCanvas2D.prototype.moveTo=function(t,e){var n=this.createElement("move");n.setAttribute("x",this.format(t)),n.setAttribute("y",this.format(e)),this.root.appendChild(n),this.lastX=t,this.lastY=e},mxXmlCanvas2D.prototype.lineTo=function(t,e){var n=this.createElement("line");n.setAttribute("x",this.format(t)),n.setAttribute("y",this.format(e)),this.root.appendChild(n),this.lastX=t,this.lastY=e},mxXmlCanvas2D.prototype.quadTo=function(t,e,n,i){var l=this.createElement("quad");l.setAttribute("x1",this.format(t)),l.setAttribute("y1",this.format(e)),l.setAttribute("x2",this.format(n)),l.setAttribute("y2",this.format(i)),this.root.appendChild(l),this.lastX=n,this.lastY=i},mxXmlCanvas2D.prototype.curveTo=function(t,e,n,i,l,s){var o=this.createElement("curve");o.setAttribute("x1",this.format(t)),o.setAttribute("y1",this.format(e)),o.setAttribute("x2",this.format(n)),o.setAttribute("y2",this.format(i)),o.setAttribute("x3",this.format(l)),o.setAttribute("y3",this.format(s)),this.root.appendChild(o),this.lastX=l,this.lastY=s},mxXmlCanvas2D.prototype.close=function(){this.root.appendChild(this.createElement("close"))},mxXmlCanvas2D.prototype.text=function(t,e,n,i,l,s,o,r,a,h,u,d,p){var m;this.textEnabled&&null!=l&&(mxUtils.isNode(l)&&(l=mxUtils.getOuterHtml(l)),(m=this.createElement("text")).setAttribute("x",this.format(t)),m.setAttribute("y",this.format(e)),m.setAttribute("w",this.format(n)),m.setAttribute("h",this.format(i)),m.setAttribute("str",l),null!=s&&m.setAttribute("align",s),null!=o&&m.setAttribute("valign",o),m.setAttribute("wrap",r?"1":"0"),m.setAttribute("format",a=null==a?"":a),null!=h&&m.setAttribute("overflow",h),null!=u&&m.setAttribute("clip",u?"1":"0"),null!=d&&m.setAttribute("rotation",d),null!=p&&m.setAttribute("dir",p),this.root.appendChild(m))},mxXmlCanvas2D.prototype.stroke=function(){this.root.appendChild(this.createElement("stroke"))},mxXmlCanvas2D.prototype.fill=function(){this.root.appendChild(this.createElement("fill"))},mxXmlCanvas2D.prototype.fillAndStroke=function(){this.root.appendChild(this.createElement("fillstroke"))},__mxOutput.mxXmlCanvas2D=void 0!==mxXmlCanvas2D?mxXmlCanvas2D:void 0,mxUtils.extend(mxSvgCanvas2D,mxAbstractCanvas2D),!function(){if(mxSvgCanvas2D.prototype.useDomParser=!mxClient.IS_IE&&"function"==typeof DOMParser&&"function"==typeof XMLSerializer,mxSvgCanvas2D.prototype.useDomParser)try{var t=(new DOMParser).parseFromString("test text","text/html");mxSvgCanvas2D.prototype.useDomParser=null!=t}catch(t){mxSvgCanvas2D.prototype.useDomParser=!1}mxSvgCanvas2D.prototype.useAbsoluteIds=!mxClient.IS_CHROMEAPP&&!mxClient.IS_IE&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&0<document.getElementsByTagName("base").length}(),mxSvgCanvas2D.prototype.node=null,mxSvgCanvas2D.prototype.matchHtmlAlignment=!0,mxSvgCanvas2D.prototype.textEnabled=!0,mxSvgCanvas2D.prototype.foEnabled=!0,mxSvgCanvas2D.prototype.foAltText="[Object]",mxSvgCanvas2D.prototype.foOffset=0,mxSvgCanvas2D.prototype.textOffset=0,mxSvgCanvas2D.prototype.imageOffset=0,mxSvgCanvas2D.prototype.strokeTolerance=0,mxSvgCanvas2D.prototype.minStrokeWidth=1,mxSvgCanvas2D.prototype.refCount=0,mxSvgCanvas2D.prototype.lineHeightCorrection=1,mxSvgCanvas2D.prototype.pointerEventsValue="all",mxSvgCanvas2D.prototype.fontMetricsPadding=10,mxSvgCanvas2D.prototype.foreignObjectPadding=2,mxSvgCanvas2D.prototype.cacheOffsetSize=!0,mxSvgCanvas2D.prototype.setCssText=function(t,e){null!=t&&(mxClient.IS_IE||mxClient.IS_IE11?t.setAttribute("style",e):null!=t.style&&(t.style.cssText=e))},mxSvgCanvas2D.prototype.format=function(t){return parseFloat(parseFloat(t).toFixed(2))},mxSvgCanvas2D.prototype.getBaseUrl=function(){var t=window.location.href,e=t.indexOf("#");return t=0<e?t.substring(0,e):t},mxSvgCanvas2D.prototype.reset=function(){mxAbstractCanvas2D.prototype.reset.apply(this,arguments),this.gradients=[],this.fillPatterns=[]},mxSvgCanvas2D.prototype.createStyle=function(t){var e=this.createElement("style");return e.setAttribute("type","text/css"),mxUtils.write(e,"svg{font-family:"+mxConstants.DEFAULT_FONTFAMILY+";font-size:"+mxConstants.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}"),e},mxSvgCanvas2D.prototype.createElement=function(t,e){return null!=this.root.ownerDocument.createElementNS?this.root.ownerDocument.createElementNS(e||mxConstants.NS_SVG,t):(t=this.root.ownerDocument.createElement(t),null!=e&&t.setAttribute("xmlns",e),t)},mxSvgCanvas2D.prototype.getAlternateText=function(t,e,n,i,l,s,o,r,a,h,u,d,p){return null!=s?this.foAltText:null},mxSvgCanvas2D.prototype.createAlternateContent=function(t,e,n,i,l,s,o,r,a,h,u,d,p){t=this.getAlternateText(t,e,n,i,l,s,o,r,a,h,u,d,p),i=this.state;return null!=t&&0<i.fontSize?(l=r==mxConstants.ALIGN_TOP?1:r==mxConstants.ALIGN_BOTTOM?0:.3,s=o==mxConstants.ALIGN_RIGHT?"end":o==mxConstants.ALIGN_LEFT?"start":"middle",(a=this.createElement("text")).setAttribute("x",Math.round(e+i.dx)),a.setAttribute("y",Math.round(n+i.dy+l*i.fontSize)),a.setAttribute("fill",i.fontColor||"black"),a.setAttribute("font-family",mxUtils.parseCssFontFamily(i.fontFamily)),a.setAttribute("font-size",Math.round(i.fontSize)+"px"),"start"!=s&&a.setAttribute("text-anchor",s),(i.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&a.setAttribute("font-weight","bold"),(i.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&a.setAttribute("font-style","italic"),h=[],(i.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&h.push("underline"),(i.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&h.push("line-through"),0<h.length&&a.setAttribute("text-decoration",h.join(" ")),mxUtils.write(a,t),a):null},mxSvgCanvas2D.prototype.createGradientId=function(t,e,n,i,l){"#"==(t=mxUtils.rgba2hex(t)).charAt(0)&&(t=t.substring(1)),"#"==(e=mxUtils.rgba2hex(e)).charAt(0)&&(e=e.substring(1)),t=t.toLowerCase()+"-"+n,e=e.toLowerCase()+"-"+i;n=null;return null==l||l==mxConstants.DIRECTION_SOUTH?n="s":l==mxConstants.DIRECTION_EAST?n="e":l==mxConstants.DIRECTION_RADIAL?n="r":(i=t,t=e,e=i,l==mxConstants.DIRECTION_NORTH?n="s":l==mxConstants.DIRECTION_WEST&&(n="e")),"mx-gradient-"+t+"-"+e+"-"+n},mxSvgCanvas2D.prototype.getSvgGradient=function(t,e,n,i,l){var s=this.createGradientId(t,e,n,i,l),o=this.gradients[s];if(null==o){var r=this.root.ownerSVGElement,a=0,h=s+"-"+a;if(null!=r)for(o=r.ownerDocument.getElementById(h);null!=o&&o.ownerSVGElement!=r;)h=s+"-"+a++,o=r.ownerDocument.getElementById(h);else h="id"+ ++this.refCount;null==o&&((o=this.createSvgGradient(t,e,n,i,l)).setAttribute("id",h),(null!=this.defs?this.defs:r).appendChild(o)),this.gradients[s]=o}return o.getAttribute("id")},mxSvgCanvas2D.prototype.createSvgGradient=function(t,e,n,i,l){var s=this.createElement(l==mxConstants.DIRECTION_RADIAL?"radialGradient":"linearGradient"),l=(s.setAttribute("x1","0%"),s.setAttribute("y1","0%"),s.setAttribute("x2","0%"),s.setAttribute("y2","0%"),null==l||l==mxConstants.DIRECTION_SOUTH?s.setAttribute("y2","100%"):l==mxConstants.DIRECTION_EAST?s.setAttribute("x2","100%"):l==mxConstants.DIRECTION_NORTH?s.setAttribute("y1","100%"):l==mxConstants.DIRECTION_WEST&&s.setAttribute("x1","100%"),this.createElement("stop"));return l.setAttribute("offset","0%"),l.style.stopColor=t,l.style.stopOpacity=n,s.appendChild(l),(l=this.createElement("stop")).setAttribute("offset","100%"),l.style.stopColor=e,l.style.stopOpacity=i,s.appendChild(l),s},mxSvgCanvas2D.prototype.createFillPatternId=function(t,e,n){return("mx-pattern-"+t+"-"+e+"-"+(n="#"==(n=mxUtils.rgba2hex(n)).charAt(0)?n.substring(1):n)).toLowerCase()},mxSvgCanvas2D.prototype.getFillPattern=function(t,e,n,i){var l=this.createFillPatternId(t,e,n),s=this.fillPatterns[l];if(null==s){var o=this.root.ownerSVGElement,r=0,a=l+"-"+r;if(null!=o)for(s=o.ownerDocument.getElementById(a);null!=s&&s.ownerSVGElement!=o;)a=l+"-"+r++,s=o.ownerDocument.getElementById(a);else a="id"+ ++this.refCount;if(null==s){switch(t){case"hatch":s=this.createHatchPattern(e,n,i);break;case"dots":s=this.createDotsPattern(e,n,i);break;case"cross-hatch":s=this.createCrossHatchPattern(e,n,i);break;case"dashed":s=this.createDashedPattern(e,n,i);break;case"zigzag":case"zigzag-line":s=this.createZigZagLinePattern(e,n,i);break;default:return null}s.setAttribute("id",a),(null!=this.defs?this.defs:o).appendChild(s)}this.fillPatterns[l]=s}return s.getAttribute("id")},mxSvgCanvas2D.prototype.createHatchPattern=function(t,e,n){var t=1.5*t*n,n=this.format((10+t)*n),i=this.createElement("pattern"),l=(i.setAttribute("patternUnits","userSpaceOnUse"),i.setAttribute("width",n),i.setAttribute("height",n),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("patternTransform","rotate(45)"),this.createElement("line"));return l.setAttribute("x1","0"),l.setAttribute("y1","0"),l.setAttribute("x2","0"),l.setAttribute("y2",n),l.setAttribute("stroke",e),l.setAttribute("stroke-width",t),i.appendChild(l),i},mxSvgCanvas2D.prototype.createDashedPattern=function(t,e,n){var t=1.5*t*n,n=this.format((10+t)*n),i=this.createElement("pattern"),l=(i.setAttribute("patternUnits","userSpaceOnUse"),i.setAttribute("width",n),i.setAttribute("height",n),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("patternTransform","rotate(45)"),this.createElement("line"));return l.setAttribute("x1","0"),l.setAttribute("y1",n/4),l.setAttribute("x2","0"),l.setAttribute("y2",3*n/4),l.setAttribute("stroke",e),l.setAttribute("stroke-width",t),i.appendChild(l),i},mxSvgCanvas2D.prototype.createZigZagLinePattern=function(t,e,n){var t=1.5*t*n,n=this.format((10+t)*n),i=this.createElement("pattern"),l=(i.setAttribute("patternUnits","userSpaceOnUse"),i.setAttribute("width",n),i.setAttribute("height",n),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("patternTransform","rotate(45)"),this.createElement("path")),s=n/4,o=3*n/4;return l.setAttribute("d","M "+s+" 0 L "+o+" 0 L "+s+" "+n+" L "+o+" "+n),l.setAttribute("stroke",e),l.setAttribute("stroke-width",t),l.setAttribute("fill","none"),i.appendChild(l),i},mxSvgCanvas2D.prototype.createCrossHatchPattern=function(t,e,n){var t=.5*t*n,n=this.format(1.5*(10+t)*n),i=this.createElement("pattern"),l=(i.setAttribute("patternUnits","userSpaceOnUse"),i.setAttribute("width",n),i.setAttribute("height",n),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("patternTransform","rotate(45)"),this.createElement("rect"));return l.setAttribute("x",0),l.setAttribute("y",0),l.setAttribute("width",n),l.setAttribute("height",n),l.setAttribute("stroke",e),l.setAttribute("stroke-width",t),l.setAttribute("fill","none"),i.appendChild(l),i},mxSvgCanvas2D.prototype.createDotsPattern=function(t,e,n){var t=this.format((10+t)*n),n=this.createElement("pattern"),i=(n.setAttribute("patternUnits","userSpaceOnUse"),n.setAttribute("width",t),n.setAttribute("height",t),n.setAttribute("x","0"),n.setAttribute("y","0"),this.createElement("circle"));return i.setAttribute("cx",t/2),i.setAttribute("cy",t/2),i.setAttribute("r",t/4),i.setAttribute("stroke","none"),i.setAttribute("fill",e),n.appendChild(i),n},mxSvgCanvas2D.prototype.addTitle=function(t){var e;return null!=t&&null!=this.title&&(e=this.createElement("title"),mxUtils.write(e,this.title),t.appendChild(e)),t},mxSvgCanvas2D.prototype.addNode=function(t,e){var n=this.addTitle(this.node),i=this.state;if(null!=n){if("path"==n.nodeName){if(!(null!=this.path&&0<this.path.length))return;n.setAttribute("d",this.path.join(" "))}t&&null!=i.fillColor?this.updateFill():this.styleEnabled||("ellipse"==n.nodeName&&mxClient.IS_FF?n.setAttribute("fill","transparent"):n.setAttribute("fill","none"),t=!1),e&&null!=i.strokeColor?this.updateStroke():this.styleEnabled||n.setAttribute("stroke","none"),null!=i.transform&&0<i.transform.length&&n.setAttribute("transform",i.transform),this.pointerEvents?n.setAttribute("pointer-events",this.pointerEventsValue):this.pointerEvents||null!=this.originalRoot||n.setAttribute("pointer-events","none"),0<this.strokeTolerance&&(!t||null==i.fillColor||!mxShape.forceFilledPointerEvents&&!this.pointerEvents&&null==this.originalRoot)&&this.addTolerance(n),("rect"!=n.nodeName&&"path"!=n.nodeName&&"ellipse"!=n.nodeName||"none"!=n.getAttribute("fill")&&"transparent"!=n.getAttribute("fill")||"none"!=n.getAttribute("stroke")||"none"!=n.getAttribute("pointer-events"))&&this.root.appendChild(n),this.node=null}},mxSvgCanvas2D.prototype.getShadowFilter=function(){var t,e,n=this.state,i=n.shadowStyle;function l(t){return Math.round(parseFloat(e[t])*n.scale*100)/100+"px"}return i=1!=n.scale&&0<(t=i.split("(")).length&&3<(e=t[1].split(" ")).length?t[0]+"("+l(0)+" "+l(1)+" "+l(2)+" "+e.slice(3).join(" ")+(2<t.length?"("+t.slice(2).join("("):""):i},mxSvgCanvas2D.prototype.addTolerance=function(t){this.root.appendChild(this.createTolerance(t))},mxSvgCanvas2D.prototype.updateFill=function(){var t=this.state;(t.alpha<1||t.fillAlpha<1)&&this.node.setAttribute("fill-opacity",t.alpha*t.fillAlpha);var e,n,i=!1,t=(null!=t.fillColor&&(e=null!=t.gradientColor&&t.gradientColor!=mxConstants.NONE?(i=!0,e=this.getSvgGradient(String(t.fillColor),String(t.gradientColor),t.gradientFillAlpha,t.gradientAlpha,t.gradientDirection),this.root.ownerDocument==document&&this.useAbsoluteIds?"url("+(n=this.getBaseUrl().replace(/([\(\)])/g,"\\$1"))+"#"+e+")":"url(#"+e+")"):String(t.fillColor).toLowerCase()),null==t.fillStyle||"auto"==t.fillStyle||"solid"==t.fillStyle?null:this.getFillPattern(t.fillStyle,this.getCurrentStrokeWidth(),e,t.scale));i||null==t?this.node.setAttribute("fill",e):this.root.ownerDocument==document&&this.useAbsoluteIds?(n=this.getBaseUrl().replace(/([\(\)])/g,"\\$1"),this.node.setAttribute("fill","url("+n+"#"+t+")")):this.node.setAttribute("fill","url(#"+t+")")},mxSvgCanvas2D.prototype.getCurrentStrokeWidth=function(){return Math.max(this.minStrokeWidth,Math.max(.01,this.format(this.state.strokeWidth*this.state.scale)))},mxSvgCanvas2D.prototype.updateStroke=function(){var t=this.state,e=(this.node.setAttribute("stroke",String(t.strokeColor).toLowerCase()),(t.alpha<1||t.strokeAlpha<1)&&this.node.setAttribute("stroke-opacity",t.alpha*t.strokeAlpha),this.getCurrentStrokeWidth());1!=e&&this.node.setAttribute("stroke-width",e),"path"==this.node.nodeName&&this.updateStrokeAttributes(),t.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern((t.fixDash?1:t.strokeWidth)*t.scale))},mxSvgCanvas2D.prototype.updateStrokeAttributes=function(){var t,e=this.state;null!=e.lineJoin&&"miter"!=e.lineJoin&&this.node.setAttribute("stroke-linejoin",e.lineJoin),null!=e.lineCap&&"butt"!=(t="flat"==(t=e.lineCap)?"butt":t)&&this.node.setAttribute("stroke-linecap",t),null==e.miterLimit||this.styleEnabled&&10==e.miterLimit||this.node.setAttribute("stroke-miterlimit",e.miterLimit)},mxSvgCanvas2D.prototype.createDashPattern=function(t){var e=[];if("string"==typeof this.state.dashPattern){var n=this.state.dashPattern.split(" ");if(0<n.length)for(var i=0;i<n.length;i++)e[i]=Math.round(Number(n[i])*t*100)/100}return e.join(" ")},mxSvgCanvas2D.prototype.createTolerance=function(t){var t=t.cloneNode(!0),e=parseFloat(t.getAttribute("stroke-width")||1)+this.strokeTolerance;return t.setAttribute("pointer-events","stroke"),t.setAttribute("visibility","hidden"),t.removeAttribute("stroke-dasharray"),t.setAttribute("stroke-width",e),t.setAttribute("fill","none"),t.setAttribute("stroke",mxClient.IS_OT?"none":"white"),t},mxSvgCanvas2D.prototype.createShadow=function(t){var t=t.cloneNode(!0),e=this.state;return"none"==t.getAttribute("fill")||mxClient.IS_FF&&"transparent"==t.getAttribute("fill")||t.setAttribute("fill",e.shadowColor),"none"!=t.getAttribute("stroke")&&t.setAttribute("stroke",e.shadowColor),t.setAttribute("transform","translate("+this.format(e.shadowDx*e.scale)+","+this.format(e.shadowDy*e.scale)+")"+(e.transform||"")),t.setAttribute("opacity",e.shadowAlpha),t},mxSvgCanvas2D.prototype.setTitle=function(t){this.title=t},mxSvgCanvas2D.prototype.setLink=function(t,e){var n;null==t?this.root=this.originalRoot:(this.originalRoot=this.root,null==(n=this.createElement("a")).setAttributeNS||this.root.ownerDocument!=document&&null==document.documentMode?n.setAttribute("xlink:href",t):n.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",t),null!=e&&n.setAttribute("target",e),this.root.appendChild(n),this.root=n)},mxSvgCanvas2D.prototype.rotate=function(t,e,n,i,l){var s,o,r,a,h;(0!=t||e||n)&&(i+=(s=this.state).dx,l+=s.dy,i*=s.scale,l*=s.scale,s.transform=s.transform||"",e&&n?t+=180:e!=n&&(r=e?-1:1,a=n?l:0,h=n?-1:1,s.transform+="translate("+this.format(o=e?i:0)+","+this.format(a)+")scale("+this.format(r)+","+this.format(h)+")translate("+this.format(-o)+","+this.format(-a)+")"),(e?!n:n)&&(t*=-1),0!=t&&(s.transform+="rotate("+this.format(t)+","+this.format(i)+","+this.format(l)+")"),s.rotation=s.rotation+t,s.rotationCx=i,s.rotationCy=l)},mxSvgCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createElement("path")},mxSvgCanvas2D.prototype.rect=function(t,e,n,i){var l=this.state,s=this.createElement("rect");s.setAttribute("x",this.format((t+l.dx)*l.scale)),s.setAttribute("y",this.format((e+l.dy)*l.scale)),s.setAttribute("width",this.format(n*l.scale)),s.setAttribute("height",this.format(i*l.scale)),this.node=s},mxSvgCanvas2D.prototype.roundrect=function(t,e,n,i,l,s){this.rect(t,e,n,i),0<l&&this.node.setAttribute("rx",this.format(l*this.state.scale)),0<s&&this.node.setAttribute("ry",this.format(s*this.state.scale))},mxSvgCanvas2D.prototype.ellipse=function(t,e,n,i){var l=this.state,s=this.createElement("ellipse");s.setAttribute("cx",this.format((t+n/2+l.dx)*l.scale)),s.setAttribute("cy",this.format((e+i/2+l.dy)*l.scale)),s.setAttribute("rx",n/2*l.scale),s.setAttribute("ry",i/2*l.scale),this.node=s},mxSvgCanvas2D.prototype.image=function(t,e,n,i,l,s,o,r,a){l=this.converter.convert(l),s=null==s||s,o=null!=o&&o,r=null!=r&&r;var h,u,d,p=this.state,m=(t+=p.dx,e+=p.dy,this.createElement("image")),l=(m.setAttribute("x",this.format(t*p.scale)+this.imageOffset),m.setAttribute("y",this.format(e*p.scale)+this.imageOffset),m.setAttribute("width",this.format(n*p.scale)),m.setAttribute("height",this.format(i*p.scale)),null==m.setAttributeNS?m.setAttribute("xlink:href",l):m.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",l),s||m.setAttribute("preserveAspectRatio","none"),(p.alpha<1||p.fillAlpha<1)&&m.setAttribute("opacity",p.alpha*p.fillAlpha),this.state.transform||"");(o||r)&&(h=s=1,d=u=0,o&&(s=-1,u=-n-2*t),r&&(h=-1,d=-i-2*e),l+="scale("+s+","+h+")translate("+u*p.scale+","+d*p.scale+")"),0<l.length&&m.setAttribute("transform",l),this.pointerEvents||m.setAttribute("pointer-events","none"),null!=a&&this.processClipPath(m,a,new mxRectangle(t,e,n,i)),this.root.appendChild(m)},mxSvgCanvas2D.prototype.processClipPath=function(t,e,n){try{var i,l=this.createElement("clipPath"),s=(l.setAttribute("id",this.createClipPathId(e)),l.setAttribute("clipPathUnits","objectBoundingBox"),this.appendClipPath(l,e,n));null!=s&&(i=this.state,t.setAttribute("x",n.x*i.scale-n.width*i.scale*s.x/s.width+this.imageOffset),t.setAttribute("y",n.y*i.scale-n.height*i.scale*s.y/s.height+this.imageOffset),t.setAttribute("width",n.width*i.scale/s.width),t.setAttribute("height",n.height*i.scale/s.height)),this.setClip(t,l)}catch(t){}},mxSvgCanvas2D.prototype.convertHtml=function(t){if(this.useDomParser){var e=(new DOMParser).parseFromString(t,"text/html");null!=e&&"</body>"==(t="<body"==(t=(new XMLSerializer).serializeToString(e.body)).substring(0,5)?t.substring(t.indexOf(">",5)+1):t).substring(t.length-7,t.length)&&(t=t.substring(0,t.length-7))}else{if(null!=document.implementation&&null!=document.implementation.createDocument){for(var n=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),i=n.createElement("body"),e=(n.documentElement.appendChild(i),document.createElement("div")),l=(e.innerHTML=t,e.firstChild);null!=l;){var s=l.nextSibling;i.appendChild(n.adoptNode(l)),l=s}return i.innerHTML}e=document.createElement("textarea");e.innerHTML=t.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=e.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}return t},mxSvgCanvas2D.prototype.createDiv=function(t){var e,n,i;return mxUtils.isNode(t)||(t="<div><div>"+this.convertHtml(t)+"</div></div>"),mxClient.IS_IE||mxClient.IS_IE11||!document.createElementNS?(mxUtils.isNode(t)&&(t="<div><div>"+mxUtils.getXml(t)+"</div></div>"),mxUtils.parseXml(t='<div xmlns="http://www.w3.org/1999/xhtml">'+t+"</div>").documentElement):(e=document.createElementNS("http://www.w3.org/1999/xhtml","div"),mxUtils.isNode(t)?(i=(n=document.createElement("div")).cloneNode(!1),this.root.ownerDocument!=document?n.appendChild(t.cloneNode(!0)):n.appendChild(t),i.appendChild(n),e.appendChild(i)):e.innerHTML=t,e)},mxSvgCanvas2D.prototype.updateText=function(t,e,n,i,l,s,o,r,a,h,u,d){null!=d&&null!=d.firstChild&&null!=d.firstChild.firstChild&&this.updateTextNodes(t,e,n,i,l,s,o,r,a,h,u,d.firstChild)},mxSvgCanvas2D.prototype.addForeignObject=function(t,e,n,i,l,s,o,r,a,h,u,d,p,m,c){var g=this.addTitle(this.createElement("g")),x=this.createElement("foreignObject");this.setCssText(x,"overflow: visible; text-align: left;"),x.setAttribute("pointer-events","none"),m.ownerDocument!=document&&(m=mxUtils.importNodeImplementation(x.ownerDocument,m,!0)),x.appendChild(m),g.appendChild(x),this.updateTextNodes(t,e,n,i,s,o,r,h,u,d,p,g),this.root.ownerDocument!=document&&null!=(m=this.createAlternateContent(x,t,e,n,i,l,s,o,r,a,h,u,d))&&(x.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility"),(p=this.createElement("switch")).appendChild(x),p.appendChild(m),g.appendChild(p)),c.appendChild(g)},mxSvgCanvas2D.prototype.updateTextNodes=function(d,p,t,e,n,i,l,s,o,m,r,c){var a,g=this.state.scale,h="",u="";h=null!=r&&"vertical-"==r.substring(0,9)?(a="-rl"==r.substring(r.length-3),u=n==mxConstants.ALIGN_LEFT?a?"flex-end":"flex-start":n==mxConstants.ALIGN_RIGHT?a?"flex-start":"flex-end":"center",i==mxConstants.ALIGN_TOP?"flex-start":i==mxConstants.ALIGN_BOTTOM?"flex-end":"center"):(u=i==mxConstants.ALIGN_TOP?"flex-start":i==mxConstants.ALIGN_BOTTOM?"flex-end":"center",n==mxConstants.ALIGN_LEFT?"flex-start":n==mxConstants.ALIGN_RIGHT?"flex-end":"center"),mxSvgCanvas2D.createCss(t+this.foreignObjectPadding,e,n,i,l,s,o,r,null!=this.state.fontBackgroundColor?this.state.fontBackgroundColor:null,null!=this.state.fontBorderColor?this.state.fontBorderColor:null,"display: flex; align-items: unsafe "+u+"; justify-content: unsafe "+h+"; "+(null!=r&&"vertical-"==r.substring(0,9)?"writing-mode: "+r+";":""),this.getTextCss(),g,mxUtils.bind(this,function(t,e,n,i,l){d+=this.state.dx,p+=this.state.dy;var s=c.firstChild,o=(s="title"==s.nodeName?s.nextSibling:s).firstChild,r=o.firstChild,a=r.firstChild,h=(this.rotateHtml?this.state.rotation:0)+(null!=m?m:0),u=(0!=this.foOffset?"translate("+this.foOffset+" "+this.foOffset+")":"")+(1!=g?"scale("+g+")":""),a=(this.setCssText(a,l),this.setCssText(r,i),r.setAttribute("data-drawio-colors","color: "+this.state.fontColor+"; "+(null==this.state.fontBackgroundColor?"":"background-color: "+this.state.fontBackgroundColor+"; ")+(null==this.state.fontBorderColor?"":"border-color: "+this.state.fontBorderColor+"; ")),s.setAttribute("width",Math.ceil(1/Math.min(1,g)*100)+"%"),s.setAttribute("height",Math.ceil(1/Math.min(1,g)*100)+"%"),Math.round(p+e));a<0?(s.setAttribute("y",a),n+="padding-top: 0; "):(s.removeAttribute("y"),n+="padding-top: "+a+"px; "),this.setCssText(o,n+"margin-left: "+Math.round(d+t)+"px;"),(u+=0!=h?"rotate("+h+" "+d+" "+p+")":"")?c.setAttribute("transform",u):c.removeAttribute("transform"),1!=this.state.alpha?c.setAttribute("opacity",this.state.alpha):c.removeAttribute("opacity")}))},mxSvgCanvas2D.createCss=function(t,e,n,i,l,s,o,r,a,h,u,d,p,m){var r=null!=r&&"vertical-"==r.substring(0,9),c="box-sizing: border-box; font-size: 0; ",n=(c+=r?"text-align: "+(i==mxConstants.ALIGN_TOP?"left":i==mxConstants.ALIGN_BOTTOM?"right":"center")+"; ":"text-align: "+(n==mxConstants.ALIGN_LEFT?"left":n==mxConstants.ALIGN_RIGHT?"right":"center")+"; ",mxUtils.getAlignmentAsPoint(n,i)),g="overflow: hidden; ",x="width: 1px; ",y="height: 1px; ",C=n.x*t,n=n.y*e,i=(o?(x="width: "+Math.round(t)+"px; ",c+="max-height: "+Math.round(e)+"px; ",n=0):"fill"==s?(x="width: "+Math.round(t)+"px; ",y="height: "+Math.round(e)+"px; ",d+="width: 100%; height: 100%; ",c+="width: "+Math.round(t-2)+"px; "+y):"width"==s?(d+="width: 100%; ",c+=x="width: "+Math.round(t-2)+"px; ",(n=0)<e&&(c+="max-height: "+Math.round(e)+"px; ")):"block"==s?(d+="width: 100%; ",g="",n=0,c+=x="width: "+Math.round(t-2)+"px; ","middle"==i&&(c+="max-height: "+Math.round(e)+"px; ")):(g="",r?C=0:n=0),"");null!=a&&(i+="background-color: "+a+"; "),null!=h&&(i+="border: 1px solid "+h+"; "),""==g||o?d+=i:c+=i,l&&(r&&0<e||!r&&0<t)?(d+="white-space: normal; word-wrap: "+mxConstants.WORD_WRAP+"; ",r?y="height: "+Math.round(e)+"px; ":x="width: "+Math.round(t)+"px; ",""!=g&&"fill"!=s&&(r?C=0:n=0)):(d+="white-space: nowrap; ",""==g&&"block"!=s&&(C=0)),m(C,n,u+x+y,c+g,d,g)},mxSvgCanvas2D.prototype.getTextCss=function(){var t=this.state,e=mxConstants.ABSOLUTE_LINE_HEIGHT?t.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT*this.lineHeightCorrection,e="display: inline-block; font-size: "+mxUtils.htmlEntities(t.fontSize)+"px; font-family: "+mxUtils.parseCssFontFamily(t.fontFamily,!0)+"; color: "+mxUtils.htmlEntities(t.fontColor)+"; line-height: "+mxUtils.htmlEntities(e)+"; pointer-events: "+(this.pointerEvents?mxUtils.htmlEntities(this.pointerEventsValue):"none")+"; ",n=((t.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(e+="font-weight: bold; "),(t.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(e+="font-style: italic; "),[]);return(t.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&n.push("underline"),(t.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&n.push("line-through"),0<n.length&&(e+="text-decoration: "+n.join(" ")+"; "),e},mxSvgCanvas2D.prototype.text=function(t,e,n,i,l,s,o,r,a,h,u,d,p){var m;this.textEnabled&&null!=l&&(d=null!=d?d:0,this.foEnabled&&"html"==a?null!=(m=this.createDiv(l))&&(null!=p&&"vertical-"!=p.substring(0,9)&&m.setAttribute("dir",p),this.addForeignObject(t,e,n,i,l,s,o,r,a,h,u,d,p,m,this.root)):this.plainText(t+this.state.dx,e+this.state.dy,n,i,l,s,o,r,h,u,d,p))},mxSvgCanvas2D.prototype.createClip=function(t,e,n,i){for(var l="mx-clip-"+(t=Math.round(t))+"-"+(e=Math.round(e))+"-"+(n=Math.round(n))+"-"+(i=Math.round(i)),s=0,o=l+"-"+s;null!=document.getElementById(o);)o=l+"-"+ ++s;var r=this.createElement("clipPath"),a=(r.setAttribute("id",o),this.createElement("rect"));return a.setAttribute("x",t),a.setAttribute("y",e),a.setAttribute("width",n),a.setAttribute("height",i),r.appendChild(a),r},mxSvgCanvas2D.prototype.createClipPathId=function(t){for(var e="mx-clippath-"+t.replace(/[^a-zA-Z0-9]+/g,"-"),n="-"==e.charAt(e.length-1)?"":"-",i=0,l=e+n+i;null!=document.getElementById(l);)l=e+n+ ++i;return l},mxSvgCanvas2D.prototype.appendClipPath=function(t,e,n){var i=e.match(/\(([^)]+)\)/),l=null;return"polygon"==e.substring(0,7)?l=this.appendPolygonClip(i[1],t,n):"circle"==e.substring(0,6)?l=this.appendCircleClip(i[1],t,n):"ellipse"==e.substring(0,7)?l=this.appendEllipseClip(i[1],t,n):"inset"==e.substring(0,5)&&(l=this.appendInsetClip(i[1],t,n)),l},mxSvgCanvas2D.prototype.appendPolygonClip=function(t,e,n){for(var i=this.createElement("polygon"),l=t.split(/[ ,]+/),s=null,o=null,r=null,a=null,h=[],u=0;u<l.length;u++){var d=this.parseClipValue(l,u);u%2==0?((null==s||d<s)&&(s=d),(null==r||r<d)&&(r=d)):((null==o||d<o)&&(o=d),(null==a||a<d)&&(a=d)),h.push(d)}return i.setAttribute("points",h.join(",")),e.appendChild(i),new mxRectangle(s,o,r-s,a-o)},mxSvgCanvas2D.prototype.appendCircleClip=function(t,e,n){var i=this.createElement("circle"),t=t.split(/[ ,]+/),l=this.parseClipValue(t,0),s=this.parseClipValue(t,2),t=this.parseClipValue(t,3);return i.setAttribute("r",l),i.setAttribute("cx",s),i.setAttribute("cy",t),e.appendChild(i),new mxRectangle(s-l,t-l,2*l,2*l)},mxSvgCanvas2D.prototype.appendEllipseClip=function(t,e,n){var i=this.createElement("ellipse"),t=t.split(/[ ,]+/),l=this.parseClipValue(t,0),s=this.parseClipValue(t,1),o=this.parseClipValue(t,3),t=this.parseClipValue(t,4);return i.setAttribute("rx",l),i.setAttribute("ry",s),i.setAttribute("cx",o),i.setAttribute("cy",t),e.appendChild(i),new mxRectangle(o-l,t-s,2*l,2*s)},mxSvgCanvas2D.prototype.appendInsetClip=function(t,e,n){var i=this.createElement("rect"),t=t.split(/[ ,]+/),l=this.parseClipValue(t,0),s=this.parseClipValue(t,1),o=this.parseClipValue(t,2),r=this.parseClipValue(t,3),s=1-s-r,o=1-l-o;return i.setAttribute("x",r),i.setAttribute("y",l),i.setAttribute("width",s),i.setAttribute("height",o),4<t.length&&"round"==t[4]&&(t=this.parseClipValue(t,5),i.setAttribute("rx",t),i.setAttribute("ry",t)),e.appendChild(i),new mxRectangle(r,l,s,o)},mxSvgCanvas2D.prototype.parseClipValue=function(t,e){var e=t[Math.min(e,t.length-1)],t=1;return"center"==e?t=.5:"top"==e||"left"==e?t=0:(e=parseFloat(e),isNaN(e)||(t=Math.max(0,Math.min(1,e/100)))),t},mxSvgCanvas2D.prototype.setClip=function(t,e){var n;(null!=this.defs?this.defs:this.root).appendChild(e),mxClient.IS_CHROMEAPP||mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE||this.root.ownerDocument!=document?t.setAttribute("clip-path","url(#"+e.getAttribute("id")+")"):(n=this.getBaseUrl().replace(/([\(\)])/g,"\\$1"),t.setAttribute("clip-path","url("+n+"#"+e.getAttribute("id")+")"))},mxSvgCanvas2D.prototype.plainText=function(t,e,n,i,l,s,o,r,a,h,u,d){u=null!=u?u:0;var p=this.state,m=p.fontSize,c=p.transform||"",g=this.addTitle(this.createElement("g")),d=(this.updateFont(g),this.pointerEvents||null!=this.originalRoot||g.setAttribute("pointer-events","none"),0!=u&&(c+="rotate("+u+","+this.format(t*p.scale)+","+this.format(e*p.scale)+")"),null!=d&&"vertical-"!=d.substring(0,9)&&g.setAttribute("direction",d),h&&0<n&&0<i&&(u=t,C=e,s==mxConstants.ALIGN_CENTER?u-=n/2:s==mxConstants.ALIGN_RIGHT&&(u-=n),"fill"!=a&&(o==mxConstants.ALIGN_MIDDLE?C-=i/2:o==mxConstants.ALIGN_BOTTOM&&(C-=i)),this.setClip(g,this.createClip(u*p.scale-2,C*p.scale-2,n*p.scale+4,i*p.scale+4))),s==mxConstants.ALIGN_RIGHT?"end":s==mxConstants.ALIGN_CENTER?"middle":"start"),x=("start"!=d&&g.setAttribute("text-anchor",d),this.styleEnabled&&m==mxConstants.DEFAULT_FONTSIZE||g.setAttribute("font-size",m*p.scale+"px"),0<c.length&&g.setAttribute("transform",c),p.alpha<1&&g.setAttribute("opacity",p.alpha),l.split("\n")),y=Math.round(m*mxConstants.LINE_HEIGHT),u=m+(x.length-1)*y,C=e+m-1;o==mxConstants.ALIGN_MIDDLE?C-="fill"==a?i/2:(this.matchHtmlAlignment&&h&&0<i?Math.min(u,i):u)/2:o==mxConstants.ALIGN_BOTTOM&&(C-="fill"==a?i:(this.matchHtmlAlignment&&h&&0<i?Math.min(u,i):u)+1);for(var f,v=0;v<x.length;v++)0<x[v].length&&0<mxUtils.trim(x[v]).length&&((f=this.createElement("text")).setAttribute("x",this.format(t*p.scale)+this.textOffset),f.setAttribute("y",this.format(C*p.scale)+this.textOffset),mxUtils.write(f,x[v]),g.appendChild(f)),C+=y;this.root.appendChild(g),this.addTextBackground(g,l,t,e,n,"fill"==a?i:u,s,o,a)},mxSvgCanvas2D.prototype.updateFont=function(t){var e=this.state,n=(t.setAttribute("fill",e.fontColor),this.styleEnabled&&e.fontFamily==mxConstants.DEFAULT_FONTFAMILY||t.setAttribute("font-family",mxUtils.parseCssFontFamily(e.fontFamily)),(e.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&t.setAttribute("font-weight","bold"),(e.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&t.setAttribute("font-style","italic"),[]);(e.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&n.push("underline"),(e.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&n.push("line-through"),0<n.length&&t.setAttribute("text-decoration",n.join(" "))},mxSvgCanvas2D.prototype.addTextBackground=function(t,e,n,i,l,s,o,r,a){var h=this.state;if(null!=document.body&&(null!=h.fontBackgroundColor||null!=h.fontBorderColor)){var u=null;if("fill"==a||"width"==a)o==mxConstants.ALIGN_CENTER?n-=l/2:o==mxConstants.ALIGN_RIGHT&&(n-=l),r==mxConstants.ALIGN_MIDDLE?i-=s/2:r==mxConstants.ALIGN_BOTTOM&&(i-=s),u=new mxRectangle((n+1)*h.scale,i*h.scale,(l-2)*h.scale,(s+2)*h.scale);else if(null!=t.getBBox&&this.root.ownerDocument==document)try{var u=t.getBBox(),d=mxClient.IS_IE&&mxClient.IS_SVG;u=new mxRectangle(u.x,u.y+(d?0:1),u.width,u.height+(d?1:0))}catch(t){}null!=u&&0!=u.width&&0!=u.height||((a=document.createElement("div")).style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?h.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,a.style.fontSize=h.fontSize+"px",a.style.fontFamily=mxUtils.parseCssFontFamily(h.fontFamily),a.style.whiteSpace="nowrap",a.style.position="absolute",a.style.visibility="hidden",a.style.display="inline-block",a.style.zoom="1",(h.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(a.style.fontWeight="bold"),(h.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(a.style.fontStyle="italic"),e=mxUtils.htmlEntities(e,!1),a.innerHTML=e.replace(/\n/g,"<br/>"),document.body.appendChild(a),l=a.offsetWidth,s=a.offsetHeight,a.parentNode.removeChild(a),o==mxConstants.ALIGN_CENTER?n-=l/2:o==mxConstants.ALIGN_RIGHT&&(n-=l),r==mxConstants.ALIGN_MIDDLE?i-=s/2:r==mxConstants.ALIGN_BOTTOM&&(i-=s),u=new mxRectangle((n+1)*h.scale,(i+2)*h.scale,l*h.scale,(s+1)*h.scale)),null!=u&&((d=this.createElement("rect")).setAttribute("fill",h.fontBackgroundColor||"none"),d.setAttribute("stroke",h.fontBorderColor||"none"),d.setAttribute("x",Math.floor(u.x-1)),d.setAttribute("y",Math.floor(u.y-1)),d.setAttribute("width",Math.ceil(u.width+2)),d.setAttribute("height",Math.ceil(u.height)),e=null!=h.fontBorderColor?Math.max(1,this.format(h.scale)):0,d.setAttribute("stroke-width",e),this.root.ownerDocument==document&&1==mxUtils.mod(e,2)&&d.setAttribute("transform","translate(0.5, 0.5)"),t.insertBefore(d,t.firstChild))}},mxSvgCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxSvgCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxSvgCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)},__mxOutput.mxSvgCanvas2D=void 0!==mxSvgCanvas2D?mxSvgCanvas2D:void 0,mxGuide.prototype.graph=null,mxGuide.prototype.states=null,mxGuide.prototype.horizontal=!0,mxGuide.prototype.vertical=!0,mxGuide.prototype.guideX=null,mxGuide.prototype.guideY=null,mxGuide.prototype.rounded=!1,mxGuide.prototype.tolerance=2,mxGuide.prototype.setStates=function(t){this.states=t},mxGuide.prototype.isEnabledForEvent=function(t){return!0},mxGuide.prototype.getGuideTolerance=function(t){return t&&this.graph.gridEnabled?this.graph.gridSize/2:this.tolerance},mxGuide.prototype.createGuideShape=function(t){var e=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);return e.isDashed=!0,e},mxGuide.prototype.isStateIgnored=function(t){return!1},mxGuide.prototype.move=function(l,s,t,e){if(null!=this.states&&(this.horizontal||this.vertical)&&null!=l&&null!=s){var n=this.graph.getView().scale,n=this.getGuideTolerance(t)*n,i=l.clone(),o=(i.x+=s.x,i.y+=s.y,!1),r=null,a=null,h=!1,u=null,d=null,p=n,m=n,c=i.x,g=i.x+i.width,x=i.getCenterX(),y=i.y,C=i.y+i.height,f=i.getCenterY();function v(t,e,n){var i=!1;n&&Math.abs(t-x)<p?(s.x=t-l.getCenterX(),p=Math.abs(t-x),i=!0):n||(Math.abs(t-c)<p?(s.x=t-l.x,p=Math.abs(t-c),i=!0):Math.abs(t-g)<p&&(s.x=t-l.x-l.width,p=Math.abs(t-g),i=!0)),i&&(r=e,a=t,null==this.guideX)&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=mxConstants.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane())),o=o||i}function E(t,e,n){var i=!1;n&&Math.abs(t-f)<m?(s.y=t-l.getCenterY(),m=Math.abs(t-f),i=!0):n||(Math.abs(t-y)<m?(s.y=t-l.y,m=Math.abs(t-y),i=!0):Math.abs(t-C)<m&&(s.y=t-l.y-l.height,m=Math.abs(t-C),i=!0)),i&&(u=e,d=t,null==this.guideY)&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=mxConstants.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane())),h=h||i}for(var S=0;S<this.states.length;S++){var w=this.states[S];null==w||this.isStateIgnored(w)||(this.horizontal&&(v.call(this,w.getCenterX(),w,!0),v.call(this,w.x,w,!1),v.call(this,w.x+w.width,w,!1),null==w.cell)&&v.call(this,w.getCenterX(),w,!1),this.vertical&&(E.call(this,w.getCenterY(),w,!0),E.call(this,w.y,w,!1),E.call(this,w.y+w.height,w,!1),null==w.cell)&&E.call(this,w.getCenterY(),w,!1))}this.graph.snapDelta(s,l,!t,o,h),s=this.getDelta(l,r,s.x,u,s.y);n=this.graph.container;o||null==this.guideX?null!=this.guideX&&((t=i=null)!=r&&null!=l&&(i=Math.min(l.y+s.y-this.graph.panDy,r.y),t=Math.max(l.y+l.height+s.y-this.graph.panDy,r.y+r.height)),this.guideX.points=null!=i&&null!=t?[new mxPoint(a,i),new mxPoint(a,t)]:[new mxPoint(a,-this.graph.panDy),new mxPoint(a,n.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(r,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()):this.guideX.node.style.visibility="hidden",h||null==this.guideY?null!=this.guideY&&((t=i=null)!=u&&null!=l&&(i=Math.min(l.x+s.x-this.graph.panDx,u.x),t=Math.max(l.x+l.width+s.x-this.graph.panDx,u.x+u.width)),this.guideY.points=null!=i&&null!=t?[new mxPoint(i,d),new mxPoint(t,d)]:[new mxPoint(-this.graph.panDx,d),new mxPoint(n.scrollWidth-3-this.graph.panDx,d)],this.guideY.stroke=this.getGuideColor(u,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()):this.guideY.node.style.visibility="hidden"}return s},mxGuide.prototype.getDelta=function(t,e,n,i,l){var s=this.graph.view.scale;return new mxPoint(n=this.rounded||null!=e&&null==e.cell?Math.round((t.x+n)/s)*s-t.x:n,l=this.rounded||null!=i&&null==i.cell?Math.round((t.y+l)/s)*s-t.y:l)},mxGuide.prototype.getGuideColor=function(t,e){return mxConstants.GUIDE_COLOR},mxGuide.prototype.hide=function(){this.setVisible(!1)},mxGuide.prototype.setVisible=function(t){null!=this.guideX&&(this.guideX.node.style.visibility=t?"visible":"hidden"),null!=this.guideY&&(this.guideY.node.style.visibility=t?"visible":"hidden")},mxGuide.prototype.destroy=function(){null!=this.guideX&&(this.guideX.destroy(),this.guideX=null),null!=this.guideY&&(this.guideY.destroy(),this.guideY=null)},__mxOutput.mxGuide=void 0!==mxGuide?mxGuide:void 0,mxShape.forceFilledPointerEvents=!0,mxShape.prototype.dialect=null,mxShape.prototype.scale=1,mxShape.prototype.antiAlias=!0,mxShape.prototype.minSvgStrokeWidth=1,mxShape.prototype.bounds=null,mxShape.prototype.points=null,mxShape.prototype.node=null,mxShape.prototype.state=null,mxShape.prototype.style=null,mxShape.prototype.boundingBox=null,mxShape.prototype.stencil=null,mxShape.prototype.svgStrokeTolerance=8,mxShape.prototype.pointerEvents=!0,mxShape.prototype.svgPointerEvents="all",mxShape.prototype.shapePointerEvents=!1,mxShape.prototype.stencilPointerEvents=!1,mxShape.prototype.outline=!1,mxShape.prototype.visible=!0,mxShape.prototype.useSvgBoundingBox=!1,mxShape.prototype.init=function(t){null==this.node&&(this.node=this.create(t),null!=t)&&t.appendChild(this.node)},mxShape.prototype.initStyles=function(t){this.strokewidth=1,this.rotation=0,this.opacity=100,this.fillOpacity=100,this.strokeOpacity=100,this.flipH=!1,this.flipV=!1},mxShape.prototype.isHtmlAllowed=function(){return!1},mxShape.prototype.getSvgScreenOffset=function(){var t=this.stencil&&"inherit"!=this.stencil.strokewidth?Number(this.stencil.strokewidth):this.strokewidth;return 1==mxUtils.mod(Math.max(1,Math.round(t*this.scale)),2)?.5:0},mxShape.prototype.create=function(t){return null!=t&&null!=t.ownerSVGElement?this.createSvg(t):this.createHtml(t)},mxShape.prototype.createSvg=function(){return document.createElementNS(mxConstants.NS_SVG,"g")},mxShape.prototype.createHtml=function(){var t=document.createElement("div");return t.style.position="absolute",t},mxShape.prototype.reconfigure=function(){this.redraw()},mxShape.prototype.redraw=function(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),"DIV"==this.node.nodeName?this.redrawHtmlShape():this.redrawShape()):(this.node.style.visibility="hidden",this.boundingBox=null)},mxShape.prototype.clear=function(){if(null!=this.node.ownerSVGElement)for(;null!=this.node.lastChild;)this.node.removeChild(this.node.lastChild);else this.node.style.cssText="position:absolute;"+(null!=this.cursor?"cursor:"+this.cursor+";":""),this.node.innerText=""},mxShape.prototype.updateBoundsFromPoints=function(){var t=this.points;if(null!=t&&0<t.length&&null!=t[0]){this.bounds=new mxRectangle(Number(t[0].x),Number(t[0].y),this.scale,this.scale);for(var e=1;e<this.points.length;e++)null!=t[e]&&this.bounds.add(new mxRectangle(Number(t[e].x),Number(t[e].y),this.scale,this.scale))}},mxShape.prototype.getLabelBounds=function(t){var e,n,i=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),l=t,i=(i!=mxConstants.DIRECTION_SOUTH&&i!=mxConstants.DIRECTION_NORTH&&null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()&&(n=(l=l.clone()).width,l.width=l.height,l.height=n),this.getLabelMargins(l));return null!=i?(l="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,!1),e="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,!1),null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()&&(n=i.x,i.x=i.height,i.height=i.width,i.width=i.y,i.y=n,n=l,l=e,e=n),mxUtils.getDirectedBounds(t,i,this.style,l,e)):t},mxShape.prototype.getLabelMargins=function(t){return null},mxShape.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&0<this.scale&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)&&0<this.bounds.width&&0<this.bounds.height},mxShape.prototype.getShadowStyle=function(){var t={dx:mxConstants.SHADOW_OFFSET_X,dy:mxConstants.SHADOW_OFFSET_Y,blur:mxConstants.SHADOW_BLUR,color:mxConstants.SHADOWCOLOR,opacity:100*mxConstants.SHADOW_OPACITY};return null!=this.style&&(t.dx=mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW_OFFSET_X,t.dx),t.dy=mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW_OFFSET_Y,t.dy),t.blur=mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW_BLUR,t.blur),t.color=mxUtils.getValue(this.style,mxConstants.STYLE_SHADOWCOLOR,t.color),t.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW_OPACITY,t.opacity)),t},mxShape.prototype.createDropShadow=function(t,e){return"drop-shadow("+Math.round(t.dx*e*100)/100+"px "+Math.round(t.dy*e*100)/100+"px "+Math.round(t.blur*e*100)/100+"px "+mxUtils.hex2rgba(t.color,t.opacity/100)+")"},mxShape.prototype.updateSvgFilters=function(t){this.node.style.filter=this.isShadowEnabled()?this.createDropShadow(this.getShadowStyle(),t):""},mxShape.prototype.isShadowEnabled=function(){return this.isShadow},mxShape.prototype.redrawShape=function(){var t=this.createCanvas();null!=t&&(t.pointerEvents=this.pointerEvents,this.beforePaint(t),this.paint(t),this.afterPaint(t),this.destroyCanvas(t))},mxShape.prototype.createCanvas=function(){var t=null;return null!=(t=null!=this.node.ownerSVGElement?this.createSvgCanvas():t)&&this.outline&&(t.setStrokeWidth(this.strokewidth),t.setStrokeColor(this.stroke),null!=this.isDashed&&t.setDashed(this.isDashed),t.setStrokeWidth=function(){},t.setStrokeColor=function(){},t.setFillColor=function(){},t.setGradient=function(){},t.setDashed=function(){},t.image=function(){},t.text=function(){}),t},mxShape.prototype.createSvgCanvas=function(){var t=new mxSvgCanvas2D(this.node,!1),e=(t.strokeTolerance=this.svgStrokeTolerance,t.pointerEventsValue=this.svgPointerEvents,this.getSvgScreenOffset());return 0!=e?this.node.setAttribute("transform","translate("+e+","+e+")"):this.node.removeAttribute("transform"),t.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(t.format=function(t){return Math.round(parseFloat(t))}),t},mxShape.prototype.redrawHtmlShape=function(){this.updateHtmlBounds(this.node),this.updateHtmlFilters(this.node),this.updateHtmlColors(this.node)},mxShape.prototype.updateHtmlFilters=function(t){var e,n,i,l,s,o,r="";this.opacity<100&&(r+="alpha(opacity="+this.opacity+")"),this.isShadow&&(r+="progid:DXImageTransform.Microsoft.dropShadow (OffX='"+Math.round(mxConstants.SHADOW_OFFSET_X*this.scale)+"', OffY='"+Math.round(mxConstants.SHADOW_OFFSET_Y*this.scale)+"', Color='"+mxConstants.VML_SHADOWCOLOR+"')"),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE&&(l=this.fill,s=this.gradient,i="0",e={east:0,south:1,west:2,north:3},n=null!=this.direction?e[this.direction]:0,1==(n=null!=this.gradientDirection?mxUtils.mod(n+e[this.gradientDirection]-1,4):n)?(i="1",o=l,l=s,s=o):2==n?(o=l,l=s,s=o):3==n&&(i="1"),r+="progid:DXImageTransform.Microsoft.gradient(startColorStr='"+l+"', endColorStr='"+s+"', gradientType='"+i+"')"),t.style.filter=r},mxShape.prototype.updateHtmlColors=function(t){var e=this.stroke;null!=e&&e!=mxConstants.NONE?(t.style.borderColor=e,this.isDashed?t.style.borderStyle="dashed":0<this.strokewidth&&(t.style.borderStyle="solid"),t.style.borderWidth=Math.max(1,Math.ceil(this.strokewidth*this.scale))+"px"):t.style.borderWidth="0px",null!=(e=this.outline?null:this.fill)&&e!=mxConstants.NONE?(t.style.backgroundColor=e,t.style.backgroundImage="none"):this.pointerEvents?t.style.backgroundColor="transparent":this.setTransparentBackgroundImage(t)},mxShape.prototype.updateHtmlBounds=function(t){var e=Math.ceil(this.strokewidth*this.scale);t.style.borderWidth=Math.max(1,e)+"px",t.style.overflow="hidden",t.style.left=Math.round(this.bounds.x-e/2)+"px",t.style.top=Math.round(this.bounds.y-e/2)+"px","CSS1Compat"==document.compatMode&&(e=-e),t.style.width=Math.round(Math.max(0,this.bounds.width+e))+"px",t.style.height=Math.round(Math.max(0,this.bounds.height+e))+"px"},mxShape.prototype.destroyCanvas=function(t){if(t instanceof mxSvgCanvas2D){for(var e in t.gradients){var n=t.gradients[e];null!=n&&(n.mxRefCount=(n.mxRefCount||0)+1)}for(var e in t.fillPatterns){var i=t.fillPatterns[e];null!=i&&(i.mxRefCount=(i.mxRefCount||0)+1)}this.releaseSvgGradients(this.oldGradients),this.releaseSvgFillPatterns(this.oldFillPatterns),this.oldGradients=t.gradients,this.oldFillPatterns=t.fillPatterns}},mxShape.prototype.beforePaint=function(t){},mxShape.prototype.afterPaint=function(t){},mxShape.prototype.paint=function(t){var e,n,i=t.pointerEvents,l=!1,s=(null!=t&&this.outline&&(e=t.stroke,t.stroke=function(){l=!0,e.apply(this,arguments)},t.fillAndStroke=t.stroke),this.scale),o=this.bounds.x/s,r=this.bounds.y/s,a=this.bounds.width/s,h=this.bounds.height/s,u=(this.isPaintBoundsInverted()&&(o+=u=(a-h)/2,r-=u,u=a,a=h,h=u),this.updateTransform(t,o,r,a,h),this.configureCanvas(t,o,r,a,h),this.updateSvgFilters(null!=t?t.state.scale:s),null);(null==this.stencil&&null==this.points&&this.shapePointerEvents||null!=this.stencil&&this.stencilPointerEvents)&&(n=this.createBoundingBox(),this.dialect==mxConstants.DIALECT_SVG?(u=this.createTransparentSvgRectangle(n.x,n.y,n.width,n.height),this.node.appendChild(u)):((n=t.createRect("rect",n.x/s,n.y/s,n.width/s,n.height/s)).appendChild(t.createTransparentFill()),n.stroked="false",t.root.appendChild(n))),null!=this.stencil?this.stencil.drawShape(t,this,o,r,a,h):(t.setStrokeWidth(this.strokewidth),null!=(s=this.getWaypoints())?1<s.length&&this.paintEdgeShape(t,s):(n=t.state.dx,s=t.state.dy,this.paintVertexShape(t,o,r,a,h),t.state.dx=n,t.state.dy=s)),null!=u&&null!=t.state&&null!=t.state.transform&&u.setAttribute("transform",t.state.transform),null!=t&&this.outline&&!l&&(t.rect(o,r,a,h),t.stroke()),t.pointerEvents=i},mxShape.prototype.getWaypoints=function(){var t=this.points,e=null;if(null!=t&&(e=[],0<t.length)){var n=this.scale,i=Math.max(n,1),l=t[0];e.push(new mxPoint(l.x/n,l.y/n));for(var s=1;s<t.length;s++){var o=t[s];(Math.abs(l.x-o.x)>=i||Math.abs(l.y-o.y)>=i)&&e.push(new mxPoint(o.x/n,o.y/n)),l=o}}return e},mxShape.prototype.configureCanvas=function(t,e,n,i,l){var s=null;null!=this.style&&(s=this.style.dashPattern),t.setAlpha(this.opacity/100),t.setFillAlpha(this.fillOpacity/100),t.setStrokeAlpha(this.strokeOpacity/100),null!=this.isShadow&&t.setShadow(this.isShadow,this.shadowStyle),null!=this.isDashed&&t.setDashed(this.isDashed,null!=this.style&&1==mxUtils.getValue(this.style,mxConstants.STYLE_FIX_DASH,!1)),null!=s&&t.setDashPattern(s),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE?(s=this.getGradientBounds(t,e,n,i,l),t.setGradient(this.fill,this.gradient,s.x,s.y,s.width,s.height,this.gradientDirection)):(t.setFillColor(this.fill),t.setFillStyle(this.fillStyle)),null!=this.style&&(null!=this.style.linecap&&t.setLineCap(this.style.linecap),null!=this.style.linejoin)&&t.setLineJoin(this.style.linejoin),t.setStrokeColor(this.stroke),this.configurePointerEvents(t)},mxShape.prototype.configurePointerEvents=function(t){null==this.style||mxShape.forceFilledPointerEvents&&null!=this.fill&&this.fill!=mxConstants.NONE&&0!=this.opacity&&0!=this.fillOpacity||"0"!=mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")||(t.pointerEvents=!1)},mxShape.prototype.getGradientBounds=function(t,e,n,i,l){return new mxRectangle(e,n,i,l)},mxShape.prototype.updateTransform=function(t,e,n,i,l){t.scale(this.scale),t.rotate(this.getShapeRotation(),this.flipH,this.flipV,e+i/2,n+l/2)},mxShape.prototype.paintVertexShape=function(t,e,n,i,l){this.paintBackground(t,e,n,i,l),this.outline&&null!=this.style&&0!=mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)||(t.setShadow(!1),this.paintForeground(t,e,n,i,l))},mxShape.prototype.paintBackground=function(t,e,n,i,l){},mxShape.prototype.paintForeground=function(t,e,n,i,l){},mxShape.prototype.paintEdgeShape=function(t,e){},mxShape.prototype.getArcSize=function(t,e){var n;return"1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?Math.min(t/2,Math.min(e/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,Math.min(t*n,e*n))},mxShape.prototype.paintGlassEffect=function(t,e,n,i,l,s){var o=Math.ceil(this.strokewidth/2);t.setGradient("#ffffff","#ffffff",e,n,i,.6*l,"south",.9,.1),t.begin(),s+=2*o,this.isRounded?(t.moveTo(e-o+s,n-o),t.quadTo(e-o,n-o,e-o,n-o+s),t.lineTo(e-o,n+.4*l),t.quadTo(e+.5*i,n+.7*l,e+i+o,n+.4*l),t.lineTo(e+i+o,n-o+s),t.quadTo(e+i+o,n-o,e+i+o-s,n-o)):(t.moveTo(e-o,n-o),t.lineTo(e-o,n+.4*l),t.quadTo(e+.5*i,n+.7*l,e+i+o,n+.4*l),t.lineTo(e+i+o,n-o)),t.close(),t.fill()},mxShape.prototype.addPoints=function(t,e,n,i,l,s,o){if(null!=e&&0<e.length){o=null==o||o;var r,a=e[e.length-1],h=(l&&n&&(r=(e=e.slice())[0],r=new mxPoint(a.x+(r.x-a.x)/2,a.y+(r.y-a.y)/2),e.splice(0,0,r)),e[0]),u=1;for(o?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y);u<(l?e.length:e.length-1);){var d=e[mxUtils.mod(u,e.length)],p=h.x-d.x,m=h.y-d.y;if(n&&(0!=p||0!=m)&&(null==s||mxUtils.indexOf(s,u-1)<0)){for(var c=Math.sqrt(p*p+m*m),g=p*Math.min(i,c/2)/c,x=m*Math.min(i,c/2)/c,g=d.x+g,x=d.y+x,y=(t.lineTo(g,x),e[mxUtils.mod(u+1,e.length)]);u<e.length-2&&0==Math.round(y.x-d.x)&&0==Math.round(y.y-d.y);)y=e[mxUtils.mod(u+2,e.length)],u++;p=y.x-d.x,m=y.y-d.y,c=Math.max(1,Math.sqrt(p*p+m*m)),g=p*Math.min(i,c/2)/c,x=m*Math.min(i,c/2)/c,p=d.x+g,m=d.y+x;t.quadTo(d.x,d.y,p,m),d=new mxPoint(p,m)}else t.lineTo(d.x,d.y);h=d,u++}l?t.close():t.lineTo(a.x,a.y)}},mxShape.prototype.resetStyles=function(){this.initStyles(),this.spacing=0,delete this.fill,delete this.gradient,delete this.gradientDirection,delete this.stroke,delete this.startSize,delete this.endSize,delete this.startArrow,delete this.endArrow,delete this.direction,delete this.isShadow,delete this.isDashed,delete this.isRounded,delete this.glass},mxShape.prototype.apply=function(t){this.state=t,this.style=t.style,null!=this.style&&(this.fill=mxUtils.getValue(this.style,mxConstants.STYLE_FILLCOLOR,this.fill),this.gradient=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENTCOLOR,this.gradient),this.gradientDirection=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENT_DIRECTION,this.gradientDirection),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_OPACITY,this.opacity),this.fillOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_FILL_OPACITY,this.fillOpacity),this.fillStyle=mxUtils.getValue(this.style,mxConstants.STYLE_FILL_STYLE,this.fillStyle),this.strokeOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_STROKE_OPACITY,this.strokeOpacity),this.stroke=mxUtils.getValue(this.style,mxConstants.STYLE_STROKECOLOR,this.stroke),this.strokewidth=mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth),this.spacing=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing),this.startSize=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,this.startSize),this.endSize=mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,this.endSize),this.startArrow=mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,this.startArrow),this.endArrow=mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,this.endArrow),this.rotation=mxUtils.getValue(this.style,mxConstants.STYLE_ROTATION,this.rotation),this.direction=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,this.direction),this.flipH=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),this.flipV=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),null!=this.stencil&&(this.flipH=1==mxUtils.getValue(this.style,"stencilFlipH",0)||this.flipH,this.flipV=1==mxUtils.getValue(this.style,"stencilFlipV",0)||this.flipV),this.direction!=mxConstants.DIRECTION_NORTH&&this.direction!=mxConstants.DIRECTION_SOUTH||(t=this.flipH,this.flipH=this.flipV,this.flipV=t),this.isShadow=1==mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW,this.isShadow),this.isDashed=1==mxUtils.getValue(this.style,mxConstants.STYLE_DASHED,this.isDashed),this.isRounded=1==mxUtils.getValue(this.style,mxConstants.STYLE_ROUNDED,this.isRounded),this.glass=1==mxUtils.getValue(this.style,mxConstants.STYLE_GLASS,this.glass),this.fill==mxConstants.NONE&&(this.fill=null),this.gradient==mxConstants.NONE&&(this.gradient=null),this.stroke==mxConstants.NONE)&&(this.stroke=null)},mxShape.prototype.setCursor=function(t){this.cursor=t=null==t?"":t,null!=this.node&&(this.node.style.cursor=t)},mxShape.prototype.getCursor=function(){return this.cursor},mxShape.prototype.isRoundable=function(){return!1},mxShape.prototype.getSvgBoundingBox=function(){var t=null;if(null!=this.node&&null!=this.node.ownerSVGElement)try{var e=this.node.getBBox();0<e.width&&0<e.height&&(t=new mxRectangle(e.x,e.y,e.width,e.height),null!=this.stroke)&&t.grow(this.strokewidth*this.scale/2)}catch(t){}return t},mxShape.prototype.getShapeBoundingBox=function(){var t,e=null;return e=null!=this.bounds&&null!=(e=this.createBoundingBox())&&(this.augmentBoundingBox(e),0!=(t=this.getShapeRotation()))?mxUtils.getBoundingBox(e,t):e},mxShape.prototype.createBoundingBox=function(){var t=this.bounds.clone();return(null==this.stencil||this.direction!=mxConstants.DIRECTION_NORTH&&this.direction!=mxConstants.DIRECTION_SOUTH)&&!this.isPaintBoundsInverted()||t.rotate90(),t},mxShape.prototype.augmentBoundingBox=function(t){var e;this.isShadow&&((e=this.getShadowStyle()).dx<0&&(t.x+=e.dx,t.width-=e.dx),e.dy<0&&(t.y+=e.dy,t.height-=e.dy),t.grow(Math.max(e.blur,0)*this.scale*2),t.width+=Math.ceil(Math.max(e.dx,0)*this.scale),t.height+=Math.ceil(Math.max(e.dy,0)*this.scale)),null!=this.stroke&&t.grow(this.strokewidth*this.scale/2)},mxShape.prototype.updateBoundingBox=function(){var t=this.useSvgBoundingBox?this.getSvgBoundingBox():null;null==t&&(t=this.getShapeBoundingBox()),this.boundingBox=t},mxShape.prototype.isPaintBoundsInverted=function(){return null==this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)},mxShape.prototype.getRotation=function(){return null!=this.rotation?this.rotation:0},mxShape.prototype.getTextRotation=function(){var t=this.getRotation();return 1!=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)&&(t+=mxText.prototype.verticalTextRotation),t},mxShape.prototype.getShapeRotation=function(){var t=this.getRotation();return null!=this.direction&&(this.direction==mxConstants.DIRECTION_NORTH?t+=270:this.direction==mxConstants.DIRECTION_WEST?t+=180:this.direction==mxConstants.DIRECTION_SOUTH&&(t+=90)),t},mxShape.prototype.createTransparentSvgRectangle=function(t,e,n,i){var l=document.createElementNS(mxConstants.NS_SVG,"rect");return l.setAttribute("x",t),l.setAttribute("y",e),l.setAttribute("width",n),l.setAttribute("height",i),l.setAttribute("fill","none"),l.setAttribute("stroke","none"),l.setAttribute("pointer-events","all"),l},mxShape.prototype.setTransparentBackgroundImage=function(t){t.style.backgroundImage="url('"+mxClient.imageBasePath+"/transparent.gif')"},mxShape.prototype.intersectsRectangle=function(t,e){return null!=t&&(e||null!=this.node&&"none"!=this.node.style.display&&"hidden"!=this.node.style.visibility)&&mxUtils.intersects(this.bounds,t,!0)},mxShape.prototype.releaseSvgGradients=function(t){if(null!=t)for(var e in t){e=t[e];null!=e&&(e.mxRefCount=(e.mxRefCount||0)-1,0==e.mxRefCount)&&null!=e.parentNode&&e.parentNode.removeChild(e)}},mxShape.prototype.releaseSvgFillPatterns=function(t){if(null!=t)for(var e in t){e=t[e];null!=e&&(e.mxRefCount=(e.mxRefCount||0)-1,0==e.mxRefCount)&&null!=e.parentNode&&e.parentNode.removeChild(e)}},mxShape.prototype.destroy=function(){null!=this.node&&(mxEvent.release(this.node),null!=this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node=null),this.releaseSvgGradients(this.oldGradients),this.releaseSvgFillPatterns(this.oldFillPatterns),this.oldGradients=null,this.oldFillPatterns=null},__mxOutput.mxShape=void 0!==mxShape?mxShape:void 0,mxUtils.extend(mxStencil,mxShape),mxStencil.defaultLocalized=!1,mxStencil.allowEval=!1,mxStencil.prototype.desc=null,mxStencil.prototype.constraints=null,mxStencil.prototype.aspect=null,mxStencil.prototype.w0=null,mxStencil.prototype.h0=null,mxStencil.prototype.bgNode=null,mxStencil.prototype.fgNode=null,mxStencil.prototype.strokewidth=null,mxStencil.prototype.parseDescription=function(){this.fgNode=this.desc.getElementsByTagName("foreground")[0],this.bgNode=this.desc.getElementsByTagName("background")[0],this.w0=Number(this.desc.getAttribute("w")||100),this.h0=Number(this.desc.getAttribute("h")||100);var t=this.desc.getAttribute("aspect"),t=(this.aspect=null!=t?t:"variable",this.desc.getAttribute("strokewidth"));this.strokewidth=null!=t?t:"1"},mxStencil.prototype.parseConstraints=function(){var t=this.desc.getElementsByTagName("connections")[0];if(null!=t){var e=mxUtils.getChildNodes(t);if(null!=e&&0<e.length){this.constraints=[];for(var n=0;n<e.length;n++)this.constraints.push(this.parseConstraint(e[n]))}}},mxStencil.prototype.parseConstraint=function(t){var e=Number(t.getAttribute("x")),n=Number(t.getAttribute("y")),i="1"==t.getAttribute("perimeter"),t=t.getAttribute("name");return new mxConnectionConstraint(new mxPoint(e,n),i,t)},mxStencil.prototype.evaluateTextAttribute=function(t,e,n){e=this.evaluateAttribute(t,e,n),n=t.getAttribute("localized");return e=mxStencil.defaultLocalized&&null==n||"1"==n?mxResources.get(e):e},mxStencil.prototype.evaluateAttribute=function(t,e,n){e=t.getAttribute(e);return e=null==e&&null!=(t=mxUtils.getTextContent(t))&&mxStencil.allowEval&&"function"==typeof(t=mxUtils.eval(t))?t(n):e},mxStencil.prototype.drawShape=function(t,e,n,i,l,s){var o=t.states.slice(),r=mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,null),r=this.computeAspect(e.style,n,i,l,s,r),a=Math.min(r.width,r.height),a="inherit"==this.strokewidth?Number(mxUtils.getNumber(e.style,mxConstants.STYLE_STROKEWIDTH,1)):Number(this.strokewidth)*a;t.setStrokeWidth(a),null!=e.style&&"1"==mxUtils.getValue(e.style,mxConstants.STYLE_POINTER_EVENTS,"0")&&(t.setStrokeColor(mxConstants.NONE),t.rect(n,i,l,s),t.stroke(),t.setStrokeColor(e.stroke)),this.drawChildren(t,e,n,i,l,s,this.bgNode,r,!1,!0),this.drawChildren(t,e,n,i,l,s,this.fgNode,r,!0,!e.outline||null==e.style||0==mxUtils.getValue(e.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)),t.states.length!=o.length&&(t.states=o)},mxStencil.prototype.drawChildren=function(t,e,n,i,l,s,o,r,a,h){if(null!=o&&0<l&&0<s)for(var u=o.firstChild;null!=u;)u.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(t,e,u,r,a,h),u=u.nextSibling},mxStencil.prototype.computeAspect=function(t,e,n,i,l,s){var o,r=i/this.w0,a=l/this.h0,s=s==mxConstants.DIRECTION_NORTH||s==mxConstants.DIRECTION_SOUTH;return s&&(a=i/this.h0,r=l/this.w0,e+=o=(i-l)/2,n-=o),"fixed"==this.aspect&&(r=a=Math.min(r,a),s?(e+=(l-this.w0*r)/2,n+=(i-this.h0*a)/2):(e+=(i-this.w0*r)/2,n+=(l-this.h0*a)/2)),new mxRectangle(e,n,r,a)},mxStencil.prototype.parseColor=function(t,e,n,i){return"stroke"==i?i=e.stroke:"fill"==i&&(i=e.fill),i},mxStencil.prototype.drawNode=function(t,e,n,i,l,s){var o=n.nodeName,r=i.x,a=i.y,h=i.width,u=i.height,d=Math.min(h,u);if("save"==o)t.save();else if("restore"==o)t.restore();else if(s){if("path"==o){t.begin();var p=!0;if("1"==n.getAttribute("rounded")){for(var p=!1,m=Number(n.getAttribute("arcSize")),c=0,g=[],x=n.firstChild;null!=x;){if(x.nodeType==mxConstants.NODETYPE_ELEMENT){var y=x.nodeName;if("move"!=y&&"line"!=y){p=!0;break}"move"!=y&&0!=g.length||g.push([]),g[g.length-1].push(new mxPoint(r+Number(x.getAttribute("x"))*h,a+Number(x.getAttribute("y"))*u)),c++}x=x.nextSibling}if(!p&&0<c)for(var C=0;C<g.length;C++){var f=!1,v=g[C][0],E=g[C][g[C].length-1];v.x==E.x&&v.y==E.y&&(g[C].pop(),f=!0),this.addPoints(t,g[C],!0,m,f)}else p=!0}if(p)for(x=n.firstChild;null!=x;)x.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(t,e,x,i,l,s),x=x.nextSibling}else if("close"==o)t.close();else if("move"==o)t.moveTo(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u);else if("line"==o)t.lineTo(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u);else if("quad"==o)t.quadTo(r+Number(n.getAttribute("x1"))*h,a+Number(n.getAttribute("y1"))*u,r+Number(n.getAttribute("x2"))*h,a+Number(n.getAttribute("y2"))*u);else if("curve"==o)t.curveTo(r+Number(n.getAttribute("x1"))*h,a+Number(n.getAttribute("y1"))*u,r+Number(n.getAttribute("x2"))*h,a+Number(n.getAttribute("y2"))*u,r+Number(n.getAttribute("x3"))*h,a+Number(n.getAttribute("y3"))*u);else if("arc"==o)t.arcTo(Number(n.getAttribute("rx"))*h,Number(n.getAttribute("ry"))*u,Number(n.getAttribute("x-axis-rotation")),Number(n.getAttribute("large-arc-flag")),Number(n.getAttribute("sweep-flag")),r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u);else if("rect"==o)t.rect(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u,Number(n.getAttribute("w"))*h,Number(n.getAttribute("h"))*u);else if("roundrect"==o){var S=Number(n.getAttribute("arcsize")),w=(0==S&&(S=100*mxConstants.RECTANGLE_ROUNDING_FACTOR),Number(n.getAttribute("w"))*h),b=Number(n.getAttribute("h"))*u,S=Number(S)/100,S=Math.min(w*S,b*S);t.roundrect(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u,w,b,S,S)}else if("ellipse"==o)t.ellipse(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u,Number(n.getAttribute("w"))*h,Number(n.getAttribute("h"))*u);else if("image"==o)e.outline||(S=this.evaluateAttribute(n,"src",e),t.image(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u,Number(n.getAttribute("w"))*h,Number(n.getAttribute("h"))*u,S,!1,"1"==n.getAttribute("flipH"),"1"==n.getAttribute("flipV")));else if("text"==o)e.outline||(S=this.evaluateTextAttribute(n,"str",e),I="1"==n.getAttribute("vertical")?-90:0,"0"==n.getAttribute("align-shape")&&(M=e.rotation,L=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPH,0),T=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPV,0),!(L&&T||!L&&!T)?I+=M:I-=M),I-=n.getAttribute("rotation"),t.text(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*u,0,0,S,n.getAttribute("align")||"left",n.getAttribute("valign")||"top",!1,"",null,!1,I));else if("include-shape"==o){var T,M,L=mxStencilRegistry.getStencil(n.getAttribute("name"));null!=L&&(T=r+Number(n.getAttribute("x"))*h,M=a+Number(n.getAttribute("y"))*u,w=Number(n.getAttribute("w"))*h,b=Number(n.getAttribute("h"))*u,L.drawShape(t,e,T,M,w,b))}else if("fillstroke"==o)t.fillAndStroke();else if("fill"==o)t.fill();else if("stroke"==o)t.stroke();else if("strokewidth"==o){S="1"==n.getAttribute("fixed")?1:d;t.setStrokeWidth(Number(n.getAttribute("width"))*S)}else if("dashed"==o)t.setDashed("1"==n.getAttribute("dashed"));else if("dashpattern"==o){var I=n.getAttribute("pattern");if(null!=I){for(var A=I.split(" "),P=[],C=0;C<A.length;C++)0<A[C].length&&P.push(Number(A[C])*d);I=P.join(" "),t.setDashPattern(I)}}else"strokecolor"==o?t.setStrokeColor(this.parseColor(t,e,n,n.getAttribute("color"))):"linecap"==o?t.setLineCap(n.getAttribute("cap")):"linejoin"==o?t.setLineJoin(n.getAttribute("join")):"miterlimit"==o?t.setMiterLimit(Number(n.getAttribute("limit"))):"fillcolor"==o?t.setFillColor(this.parseColor(t,e,n,n.getAttribute("color"))):"alpha"==o||"fillalpha"==o||"strokealpha"==o?t.setAlpha(n.getAttribute("alpha")):"fontcolor"==o?t.setFontColor(this.parseColor(t,e,n,n.getAttribute("color"))):"fontstyle"==o?t.setFontStyle(n.getAttribute("style")):"fontfamily"==o?t.setFontFamily(n.getAttribute("family")):"fontsize"==o&&t.setFontSize(Number(n.getAttribute("size"))*d);!l||"fillstroke"!=o&&"fill"!=o&&"stroke"!=o||t.setShadow(l=!1)}},__mxOutput.mxStencil=void 0!==mxStencil?mxStencil:void 0;var mxStencilRegistry={stencils:{},addStencil:function(t,e){mxStencilRegistry.stencils[t]=e},getStencil:function(t){return mxStencilRegistry.stencils[t]}},mxMarker=(__mxOutput.mxStencilRegistry=void 0!==mxStencilRegistry?mxStencilRegistry:void 0,{markers:[],addMarker:function(t,e){mxMarker.markers[t]=e},createMarker:function(t,e,n,i,l,s,o,r,a,h){var u=mxMarker.markers[n];return null!=u?u(t,e,n,i,l,s,o,r,a,h):null}});function mxActor(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxCloud(t,e,n,i){mxActor.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxRectangleShape(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxEllipse(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxDoubleEllipse(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxRhombus(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxPolyline(t,e,n){mxShape.call(this),this.points=t,this.stroke=e,this.strokewidth=null!=n?n:1}function mxArrow(t,e,n,i,l,s,o){mxShape.call(this),this.points=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.arrowWidth=null!=l?l:mxConstants.ARROW_WIDTH,this.spacing=null!=s?s:mxConstants.ARROW_SPACING,this.endSize=null!=o?o:mxConstants.ARROW_SIZE}function mxArrowConnector(t,e,n,i,l,s,o){mxShape.call(this),this.points=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.arrowWidth=null!=l?l:mxConstants.ARROW_WIDTH,this.arrowSpacing=null!=s?s:mxConstants.ARROW_SPACING,this.startSize=mxConstants.ARROW_SIZE/5,this.endSize=mxConstants.ARROW_SIZE/5}function mxText(t,e,n,i,l,s,o,r,a,h,u,d,p,m,c,g,x,y,C,f,v){mxShape.call(this),this.value=t,this.bounds=e,this.color=null!=l?l:"black",this.align=null!=n?n:mxConstants.ALIGN_CENTER,this.valign=null!=i?i:mxConstants.ALIGN_MIDDLE,this.family=null!=s?s:mxConstants.DEFAULT_FONTFAMILY,this.size=null!=o?o:mxConstants.DEFAULT_FONTSIZE,this.fontStyle=null!=r?r:mxConstants.DEFAULT_FONTSTYLE,this.spacing=parseInt(a||2),this.spacingTop=this.spacing+parseInt(h||0),this.spacingRight=this.spacing+parseInt(u||0),this.spacingBottom=this.spacing+parseInt(d||0),this.spacingLeft=this.spacing+parseInt(p||0),this.horizontal=null==m||m,this.background=c,this.border=g,this.wrap=null!=x&&x,this.clipped=null!=y&&y,this.overflow=null!=C?C:"visible",this.labelPadding=null!=f?f:0,this.textDirection=v,this.rotation=0,this.updateMargin()}function mxTriangle(){mxActor.call(this)}function mxHexagon(){mxActor.call(this)}function mxLine(t,e,n,i){mxShape.call(this),this.bounds=t,this.stroke=e,this.strokewidth=null!=n?n:1,this.vertical=null!=i?i:this.vertical}function mxImageShape(t,e,n,i,l){mxShape.call(this),this.bounds=t,this.image=e,this.fill=n,this.stroke=i,this.strokewidth=null!=l?l:1}function mxLabel(t,e,n,i){mxRectangleShape.call(this,t,e,n,i)}function mxCylinder(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxConnector(t,e,n){mxPolyline.call(this,t,e,n)}function mxSwimlane(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxGraphLayout(t){this.graph=t}function WeightedCellSorter(t,e){this.cell=t,this.weightedValue=e}function mxStackLayout(t,e,n,i,l,s){mxGraphLayout.call(this,t),this.horizontal=null==e||e,this.spacing=null!=n?n:0,this.x0=null!=i?i:0,this.y0=null!=l?l:0,this.border=null!=s?s:0}function mxPartitionLayout(t,e,n,i){mxGraphLayout.call(this,t),this.horizontal=null==e||e,this.spacing=n||0,this.border=i||0}function mxCompactTreeLayout(t,e,n){mxGraphLayout.call(this,t),this.horizontal=null==e||e,this.invert=null!=n&&n}function mxRadialTreeLayout(t){mxCompactTreeLayout.call(this,t,!1)}function mxFastOrganicLayout(t){mxGraphLayout.call(this,t)}function mxCircleLayout(t,e){mxGraphLayout.call(this,t),this.radius=null!=e?e:100}function mxParallelEdgeLayout(t){mxGraphLayout.call(this,t)}function mxCompositeLayout(t,e,n){mxGraphLayout.call(this,t),this.layouts=e,this.master=n}function mxEdgeLabelLayout(t,e){mxGraphLayout.call(this,t)}function mxGraphAbstractHierarchyCell(){this.x=[],this.y=[],this.temp=[]}function mxGraphHierarchyNode(t){mxGraphAbstractHierarchyCell.apply(this,arguments),this.cell=t,this.id=mxObjectIdentity.get(t),this.connectsAsTarget=[],this.connectsAsSource=[]}function mxGraphHierarchyEdge(t){mxGraphAbstractHierarchyCell.apply(this,arguments),this.edges=t,this.ids=[];for(var e=0;e<t.length;e++)this.ids.push(mxObjectIdentity.get(t[e]))}function mxGraphHierarchyModel(t,e,n,i,l){t.getGraph();this.tightenToSource=l,this.roots=n,this.parent=i,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var s=[];null==e&&(e=this.graph.getChildVertices(i)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(t,e,s);for(var o=0;o<e.length;o++){for(var r=s[o].connectsAsSource,a=0;a<r.length;a++){var h,u,d=r[a],p=d.edges;null!=p&&0<p.length&&(p=p[0],h=t.getVisibleTerminal(p,!1),u=this.vertexMapper.get(h),s[o]==u&&(h=t.getVisibleTerminal(p,!0),u=this.vertexMapper.get(h)),null!=u)&&s[o]!=u&&(0==(d.target=u).connectsAsTarget.length&&(u.connectsAsTarget=[]),mxUtils.indexOf(u.connectsAsTarget,d)<0)&&u.connectsAsTarget.push(d)}s[o].temp[0]=1}}function mxSwimlaneModel(t,e,n,i,l){t.getGraph();this.tightenToSource=l,this.roots=n,this.parent=i,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var s=[];null==e&&(e=this.graph.getChildVertices(i)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(t,e,s);for(var o=0;o<e.length;o++){for(var r=s[o].connectsAsSource,a=0;a<r.length;a++){var h,u,d=r[a],p=d.edges;null!=p&&0<p.length&&(p=p[0],h=t.getVisibleTerminal(p,!1),u=this.vertexMapper.get(h),s[o]==u&&(h=t.getVisibleTerminal(p,!0),u=this.vertexMapper.get(h)),null!=u)&&s[o]!=u&&(0==(d.target=u).connectsAsTarget.length&&(u.connectsAsTarget=[]),mxUtils.indexOf(u.connectsAsTarget,d)<0)&&u.connectsAsTarget.push(d)}s[o].temp[0]=1}}function mxHierarchicalLayoutStage(){}function mxMedianHybridCrossingReduction(t){this.layout=t}function MedianCellSorter(){}function mxMinimumCycleRemover(t){this.layout=t}function mxCoordinateAssignment(t,e,n,i,l,s){this.layout=t,this.intraCellSpacing=e,this.interRankCellSpacing=n,this.orientation=i,this.initialX=l,this.parallelEdgeSpacing=s}function mxSwimlaneOrdering(t){this.layout=t}function mxHierarchicalLayout(t,e,n){mxGraphLayout.call(this,t),this.orientation=null!=e?e:mxConstants.DIRECTION_NORTH,this.deterministic=null==n||n}!function(){function t(m){return m=null!=m?m:2,function(t,e,n,i,l,s,o,r,a,h){var u=l*a*1.118,d=s*a*1.118,p=(l*=o+a,s*=o+a,i.clone()),o=(p.x-=u,p.y-=d,n!=mxConstants.ARROW_CLASSIC&&n!=mxConstants.ARROW_CLASSIC_THIN?1:.75);return i.x+=-l*o-u,i.y+=-s*o-d,function(){t.begin(),t.moveTo(p.x,p.y),t.lineTo(p.x-l-s/m,p.y-s+l/m),n!=mxConstants.ARROW_CLASSIC&&n!=mxConstants.ARROW_CLASSIC_THIN||t.lineTo(p.x-3*l/4,p.y-3*s/4),t.lineTo(p.x+s/m-l,p.y-s-l/m),t.close(),h?t.fillAndStroke():t.stroke()}}}function e(m){return m=null!=m?m:2,function(t,e,n,i,l,s,o,r,a,h){var u=l*a*1.118,d=s*a*1.118,p=(l*=o+a,s*=o+a,i.clone());return p.x-=u,p.y-=d,i.x+=2*-u,i.y+=2*-d,function(){t.begin(),t.moveTo(p.x-l-s/m,p.y-s+l/m),t.lineTo(p.x,p.y),t.lineTo(p.x+s/m-l,p.y-s-l/m),t.stroke()}}}function n(t,e,n,i,l,s,o,r,a,h){var u=n==mxConstants.ARROW_DIAMOND?.7071:.9862,d=l*a*u,u=s*a*u,p=(l*=o+a,s*=o+a,i.clone()),m=(p.x-=d,p.y-=u,i.x+=-l-d,i.y+=-s-u,n==mxConstants.ARROW_DIAMOND?2:3.4);return function(){t.begin(),t.moveTo(p.x,p.y),t.lineTo(p.x-l/2-s/m,p.y+l/m-s/2),t.lineTo(p.x-l,p.y-s),t.lineTo(p.x-l/2+s/m,p.y-s/2-l/m),t.close(),h?t.fillAndStroke():t.stroke()}}mxMarker.addMarker("classic",t(2)),mxMarker.addMarker("classicThin",t(3)),mxMarker.addMarker("block",t(2)),mxMarker.addMarker("blockThin",t(3)),mxMarker.addMarker("open",e(2)),mxMarker.addMarker("openThin",e(3)),mxMarker.addMarker("oval",function(t,e,n,i,l,s,o,r,a,h){var u=o/2,d=i.clone();return i.x-=l*u,i.y-=s*u,function(){t.ellipse(d.x-u,d.y-u,o,o),h?t.fillAndStroke():t.stroke()}}),mxMarker.addMarker("baseDash",function(t,e,n,i,l,s,o,r,a,h){var u=l*(o+a+1),d=s*(o+a+1);return function(){t.begin(),t.moveTo(i.x-d/2,i.y+u/2),t.lineTo(i.x+d/2,i.y-u/2),t.stroke()}}),mxMarker.addMarker("doubleBlock",function(t,e,n,i,l,s,o,r,a,h){var u=l*a*1.118,d=s*a*1.118,p=(l*=o+a,s*=o+a,i.clone()),o=(p.x-=u,p.y-=d,n!=mxConstants.ARROW_CLASSIC&&n!=mxConstants.ARROW_CLASSIC_THIN?1:.75);return i.x+=-l*o*2-u,i.y+=-s*o*2-d,function(){t.begin(),t.moveTo(p.x,p.y),t.lineTo(p.x-l-s/2,p.y-s+l/2),t.lineTo(p.x+s/2-l,p.y-s-l/2),t.close(),t.moveTo(p.x-l,p.y-s),t.lineTo(p.x-2*l-.5*s,p.y+.5*l-2*s),t.lineTo(p.x-2*l+.5*s,p.y-.5*l-2*s),t.close(),h?t.fillAndStroke():t.stroke()}}),mxMarker.addMarker("diamond",n),mxMarker.addMarker("diamondThin",n),mxMarker.addMarker("manyOptional",function(t,e,n,i,l,s,o,r,a,h){var u=l*(o+a+1),d=s*(o+a+1),p=o/2,m=i.x,c=i.y;return i.x-=2*u-l*a/2,i.y-=2*d-s*a/2,function(){t.begin(),t.ellipse(m-1.5*u-p,c-1.5*d-p,2*p,2*p),h?t.fillAndStroke():t.stroke(),t.begin(),t.moveTo(m,c),t.lineTo(m-u,c-d),t.moveTo(m+d/2,c-u/2),t.lineTo(m-u,c-d),t.lineTo(m-d/2,c+u/2),t.stroke()}})}(),__mxOutput.mxMarker=void 0!==mxMarker?mxMarker:void 0,mxUtils.extend(mxActor,mxShape),mxActor.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),t.begin(),this.redrawPath(t,e,n,i,l),t.fillAndStroke()},mxActor.prototype.redrawPath=function(t,e,n,i,l){var s=i/3;t.moveTo(0,l),t.curveTo(0,3*l/5,0,2*l/5,i/2,2*l/5),t.curveTo(i/2-s,2*l/5,i/2-s,0,i/2,0),t.curveTo(i/2+s,0,i/2+s,2*l/5,i/2,2*l/5),t.curveTo(i,2*l/5,i,3*l/5,i,l),t.close()},__mxOutput.mxActor=void 0!==mxActor?mxActor:void 0,mxUtils.extend(mxCloud,mxActor),mxCloud.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(.25*i,.25*l),t.curveTo(.05*i,.25*l,0,.5*l,.16*i,.55*l),t.curveTo(0,.66*l,.18*i,.9*l,.31*i,.8*l),t.curveTo(.4*i,l,.7*i,l,.8*i,.8*l),t.curveTo(i,.8*l,i,.6*l,.875*i,.5*l),t.curveTo(i,.3*l,.8*i,.1*l,.625*i,.2*l),t.curveTo(.5*i,.05*l,.3*i,.05*l,.25*i,.25*l),t.close()},__mxOutput.mxCloud=void 0!==mxCloud?mxCloud:void 0,mxUtils.extend(mxRectangleShape,mxShape),mxRectangleShape.prototype.isHtmlAllowed=function(){var t=!0;return null!=this.style&&(t="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!this.isRounded&&!this.glass&&0==this.rotation&&(t||null!=this.fill&&this.fill!=mxConstants.NONE)},mxRectangleShape.prototype.paintBackground=function(t,e,n,i,l){var s,o;this.isRounded?(o="1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,o=0)?Math.min(i/2,Math.min(l/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,Math.min(i*s,l*s)),t.roundrect(e,n,i,l,o,o)):t.rect(e,n,i,l),t.fillAndStroke()},mxRectangleShape.prototype.isRoundable=function(){return!0},mxRectangleShape.prototype.paintForeground=function(t,e,n,i,l){this.glass&&!this.outline&&null!=this.fill&&this.fill!=mxConstants.NONE&&this.paintGlassEffect(t,e,n,i,l,this.getArcSize(i+this.strokewidth,l+this.strokewidth))},__mxOutput.mxRectangleShape=void 0!==mxRectangleShape?mxRectangleShape:void 0,mxUtils.extend(mxEllipse,mxShape),mxEllipse.prototype.paintVertexShape=function(t,e,n,i,l){t.ellipse(e,n,i,l),t.fillAndStroke()},__mxOutput.mxEllipse=void 0!==mxEllipse?mxEllipse:void 0,mxUtils.extend(mxDoubleEllipse,mxShape),mxDoubleEllipse.prototype.paintBackground=function(t,e,n,i,l){t.ellipse(e,n,i,l),t.fillAndStroke()},mxDoubleEllipse.prototype.paintForeground=function(t,e,n,i,l){var s;this.outline||(e+=s=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(i/5,l/5))),n+=s,l-=2*s,0<(i-=2*s)&&0<l&&t.ellipse(e,n,i,l),t.stroke())},mxDoubleEllipse.prototype.getLabelBounds=function(t){var e=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(t.width/5/this.scale,t.height/5/this.scale)))*this.scale;return new mxRectangle(t.x+e,t.y+e,t.width-2*e,t.height-2*e)},__mxOutput.mxDoubleEllipse=void 0!==mxDoubleEllipse?mxDoubleEllipse:void 0,mxUtils.extend(mxRhombus,mxShape),mxRhombus.prototype.isRoundable=function(){return!0},mxRhombus.prototype.paintVertexShape=function(t,e,n,i,l){var s=i/2,o=l/2,r=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;t.begin(),this.addPoints(t,[new mxPoint(e+s,n),new mxPoint(e+i,n+o),new mxPoint(e+s,n+l),new mxPoint(e,n+o)],this.isRounded,r,!0),t.fillAndStroke()},__mxOutput.mxRhombus=void 0!==mxRhombus?mxRhombus:void 0,mxUtils.extend(mxPolyline,mxShape),mxPolyline.prototype.getRotation=function(){return 0},mxPolyline.prototype.getShapeRotation=function(){return 0},mxPolyline.prototype.isPaintBoundsInverted=function(){return!1},mxPolyline.prototype.paintEdgeShape=function(t,e){var n=t.pointerEventsValue;t.pointerEventsValue="stroke",null==this.style||1!=this.style[mxConstants.STYLE_CURVED]?this.paintLine(t,e,this.isRounded):this.paintCurvedLine(t,e),t.pointerEventsValue=n},mxPolyline.prototype.paintLine=function(t,e,n){var i=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;t.begin(),this.addPoints(t,e,n,i,!1),t.stroke()},mxPolyline.prototype.paintCurvedLine=function(t,e){t.begin();var n=e[0],i=e.length;t.moveTo(n.x,n.y);for(var l=1;l<i-2;l++){var s=e[l],o=e[l+1],r=(s.x+o.x)/2,a=(s.y+o.y)/2;t.quadTo(s.x,s.y,r,a)}s=e[i-2],o=e[i-1];t.quadTo(s.x,s.y,o.x,o.y),t.stroke()},__mxOutput.mxPolyline=void 0!==mxPolyline?mxPolyline:void 0,mxUtils.extend(mxArrow,mxShape),mxArrow.prototype.augmentBoundingBox=function(t){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var e=Math.max(this.arrowWidth,this.endSize);t.grow((e/2+this.strokewidth)*this.scale)},mxArrow.prototype.paintEdgeShape=function(t,e){var n=mxConstants.ARROW_SPACING,i=mxConstants.ARROW_WIDTH,l=mxConstants.ARROW_SIZE,s=e[0],e=e[e.length-1],o=e.x-s.x,r=e.y-s.y,a=Math.sqrt(o*o+r*r),l=a-2*n-l,o=o/a,r=r/a,a=i*r/3,i=-i*o/3,h=s.x-a/2+n*o,s=s.y-i/2+n*r,u=h+a,d=s+i,p=u+l*o,l=d+l*r,m=p+a,c=l+i,g=m-3*a,x=c-3*i;t.begin(),t.moveTo(h,s),t.lineTo(u,d),t.lineTo(p,l),t.lineTo(m,c),t.lineTo(e.x-n*o,e.y-n*r),t.lineTo(g,x),t.lineTo(g+a,x+i),t.close(),t.fillAndStroke()},__mxOutput.mxArrow=void 0!==mxArrow?mxArrow:void 0,mxUtils.extend(mxArrowConnector,mxShape),mxArrowConnector.prototype.useSvgBoundingBox=!0,mxArrowConnector.prototype.isRoundable=function(){return!0},mxArrowConnector.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.arrowSpacing=mxConstants.ARROW_SPACING},mxArrowConnector.prototype.apply=function(t){mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.startSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5),this.endSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5))},mxArrowConnector.prototype.augmentBoundingBox=function(t){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var e=this.getEdgeWidth();this.isMarkerStart()&&(e=Math.max(e,this.getStartArrowWidth())),this.isMarkerEnd()&&(e=Math.max(e,this.getEndArrowWidth())),t.grow((e/2+this.strokewidth)*this.scale)},mxArrowConnector.prototype.paintEdgeShape=function(o,t){var e=this.strokewidth,n=(this.outline&&(e=Math.max(1,mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth))),this.getStartArrowWidth()+e),i=this.getEndArrowWidth()+e,r=this.outline?this.getEdgeWidth()+e:this.getEdgeWidth(),l=this.isOpenEnded(),s=this.isMarkerStart(),a=this.isMarkerEnd(),h=l?0:this.arrowSpacing+e/2,u=this.startSize+e,e=this.endSize+e,d=this.isArrowRounded(),p=t[t.length-1],m=t[1].x-t[0].x,c=t[1].y-t[0].y,g=Math.sqrt(m*m+c*c);if(0!=g){for(var x,y,C,f,v,E,S=m/g,w=S,b=c/g,T=b,m=r*b,c=-r*S,M=[],g=(d?o.setLineJoin("round"):2<t.length&&o.setMiterLimit(1.42),o.begin(),S),U=b,L=(s&&!l?this.paintMarker(o,t[0].x,t[0].y,S,b,u,n,r,h,!0):(x=t[0].x+m/2+h*S,y=t[0].y+c/2+h*b,C=t[0].x-m/2+h*S,f=t[0].y-c/2+h*b,l?(o.moveTo(x,y),M.push(function(){o.lineTo(C,f)})):(o.moveTo(C,f),o.lineTo(x,y))),0);L<t.length-2;L++){var I,A,P,N,R,D=mxUtils.relativeCcw(t[L].x,t[L].y,t[L+1].x,t[L+1].y,t[L+2].x,t[L+2].y),O=t[L+2].x-t[L+1].x,H=t[L+2].y-t[L+1].y;0!=(R=Math.sqrt(O*O+H*H))&&(O=S*(w=O/R)+b*(T=H/R),H=Math.max(Math.sqrt((1+O)/2),.04),R=S+w,O=b+T,0!=(P=Math.sqrt(R*R+O*O)))&&(R/=P,O/=P,P=Math.max(H,Math.min(this.strokewidth/200+.04,.35)),P=0!=D&&d?Math.max(.1,P):Math.max(H,.06),I=t[L+1].x+O*r/2/P,A=t[L+1].y-R*r/2/P,H=t[L+1].x-O*r/2/P,O=t[L+1].y+R*r/2/P,(0!=D&&d?-1==D?(R=H+b*r,P=O-S*r,D=H+T*r,N=O-w*r,o.lineTo(R,P),o.quadTo(I,A,D,N),function(t,e){M.push(function(){o.lineTo(t,e)})}):(o.lineTo(I,A),function(t,e){var n=I-b*r,i=A+S*r,l=I-T*r,s=A+w*r;M.push(function(){o.quadTo(t,e,n,i)}),M.push(function(){o.lineTo(l,s)})}):(o.lineTo(I,A),function(t,e){M.push(function(){o.lineTo(t,e)})}))(H,O),S=w,b=T)}m=r*T,c=-r*w,a&&!l?this.paintMarker(o,p.x,p.y,-S,-b,e,i,r,h,!1):(o.lineTo(p.x-h*w+m/2,p.y-h*T+c/2),v=p.x-h*w-m/2,E=p.y-h*T-c/2,l?(o.moveTo(v,E),M.splice(0,0,function(){o.moveTo(v,E)})):o.lineTo(v,E));for(L=M.length-1;0<=L;L--)M[L]();l?(o.end(),o.stroke()):(o.close(),o.fillAndStroke()),o.setShadow(!1),o.setMiterLimit(4),d&&o.setLineJoin("flat"),2<t.length&&(o.setMiterLimit(4),s&&!l&&(o.begin(),this.paintMarker(o,t[0].x,t[0].y,g,U,u,n,r,h,!0),o.stroke(),o.end()),a)&&!l&&(o.begin(),this.paintMarker(o,p.x,p.y,-S,-b,e,i,r,h,!0),o.stroke(),o.end())}},mxArrowConnector.prototype.paintMarker=function(t,e,n,i,l,s,o,r,a,h){var o=r/o,u=r*l/2,r=-r*i/2,d=(a+s)*i,s=(a+s)*l;h?t.moveTo(e-u+d,n-r+s):t.lineTo(e-u+d,n-r+s),t.lineTo(e-u/o+d,n-r/o+s),t.lineTo(e+a*i,n+a*l),t.lineTo(e+u/o+d,n+r/o+s),t.lineTo(e+u+d,n+r+s)},mxArrowConnector.prototype.isArrowRounded=function(){return this.isRounded},mxArrowConnector.prototype.getStartArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEndArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEdgeWidth=function(){return mxConstants.ARROW_WIDTH/3},mxArrowConnector.prototype.isOpenEnded=function(){return!1},mxArrowConnector.prototype.isMarkerStart=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE},mxArrowConnector.prototype.isMarkerEnd=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE},__mxOutput.mxArrowConnector=void 0!==mxArrowConnector?mxArrowConnector:void 0,mxUtils.extend(mxText,mxShape),mxText.prototype.baseSpacingTop=0,mxText.prototype.baseSpacingBottom=0,mxText.prototype.baseSpacingLeft=0,mxText.prototype.baseSpacingRight=0,mxText.prototype.replaceLinefeeds=!0,mxText.prototype.verticalTextRotation=-90,mxText.prototype.ignoreClippedStringSize=!0,mxText.prototype.ignoreStringSize=!1,mxText.prototype.textWidthPadding=8!=document.documentMode||mxClient.IS_EM?3:4,mxText.prototype.lastValue=null,mxText.prototype.cacheEnabled=!0,mxText.prototype.isHtmlAllowed=function(){return 8!=document.documentMode||mxClient.IS_EM},mxText.prototype.getSvgScreenOffset=function(){return 0},mxText.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&0<this.scale&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)},mxText.prototype.configurePointerEvents=function(t){},mxText.prototype.getActualTextDirection=function(){var t=this.textDirection;return t=(t=t==mxConstants.TEXT_DIRECTION_AUTO?this.getAutoDirection():t)!=mxConstants.TEXT_DIRECTION_LTR&&t!=mxConstants.TEXT_DIRECTION_RTL&&t!=mxConstants.TEXT_DIRECTION_VERTICAL_LR&&t!=mxConstants.TEXT_DIRECTION_VERTICAL_RL?null:t},mxText.prototype.paint=function(t,e){var n,i,l=this.scale,s=this.bounds.x/l,o=this.bounds.y/l,r=this.bounds.width/l,a=this.bounds.height/l,l=(this.updateTransform(t,s,o,r,a),this.configureCanvas(t,s,o,r,a),this.updateSvgFilters(null!=t?t.state.scale:l),this.getActualTextDirection());e?t.updateText(s,o,r,a,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),l,this.node):(n=(e=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML)?"html":"",i=this.value,e||"html"!=n||(i=mxUtils.htmlEntities(i,!1)),"html"!=n||mxUtils.isNode(this.value)||(i=mxUtils.replaceTrailingNewlines(i,"<div><br></div>")),i=!mxUtils.isNode(this.value)&&this.replaceLinefeeds&&"html"==n?i.replace(/\n/g,"<br/>"):i,t.text(s,o,r,a,i,this.align,this.valign,this.wrap,n,this.overflow,this.clipped,this.getTextRotation(),l))},mxText.prototype.redraw=function(){var t;this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue==this.value&&(mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML)?"DIV"==this.node.nodeName?mxClient.IS_SVG?this.redrawHtmlShapeWithCss3():(this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform()):null!=(t=this.createCanvas())&&null!=t.updateText?(t.pointerEvents=this.pointerEvents,this.paint(t,!0),this.destroyCanvas(t)):mxShape.prototype.redraw.apply(this,arguments):(mxShape.prototype.redraw.apply(this,arguments),mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML?this.lastValue=this.value:this.lastValue=null)},mxText.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.color="black",this.align=mxConstants.ALIGN_CENTER,this.valign=mxConstants.ALIGN_MIDDLE,this.family=mxConstants.DEFAULT_FONTFAMILY,this.size=mxConstants.DEFAULT_FONTSIZE,this.fontStyle=mxConstants.DEFAULT_FONTSTYLE,this.spacing=2,this.spacingTop=2,this.spacingRight=2,this.spacingBottom=2,this.spacingLeft=2,this.horizontal=!0,delete this.background,delete this.border,this.textDirection=mxConstants.DEFAULT_TEXT_DIRECTION,delete this.margin},mxText.prototype.apply=function(t){var e=this.spacing;mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.fontStyle=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSTYLE,this.fontStyle),this.family=mxUtils.getValue(this.style,mxConstants.STYLE_FONTFAMILY,this.family),this.size=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSIZE,this.size),this.color=mxUtils.getValue(this.style,mxConstants.STYLE_FONTCOLOR,this.color),this.align=mxUtils.getValue(this.style,mxConstants.STYLE_ALIGN,this.align),this.valign=mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_ALIGN,this.valign),this.spacing=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing)),this.spacingTop=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_TOP,this.spacingTop-e))+this.spacing,this.spacingRight=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_RIGHT,this.spacingRight-e))+this.spacing,this.spacingBottom=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_BOTTOM,this.spacingBottom-e))+this.spacing,this.spacingLeft=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_LEFT,this.spacingLeft-e))+this.spacing,this.horizontal=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,this.horizontal),this.background=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,this.background),this.border=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BORDERCOLOR,this.border),this.textDirection=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_OPACITY,100),this.updateMargin()),this.flipV=null,this.flipH=null},mxText.prototype.getAutoDirection=function(){var t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(this.value);return null!=t&&0<t.length&&"z"<t[0]?mxConstants.TEXT_DIRECTION_RTL:mxConstants.TEXT_DIRECTION_LTR},mxText.prototype.getContentNode=function(){var t=this.node;return t=null!=t?(null==t.ownerSVGElement?this.node:t.firstChild.firstChild.firstChild).firstChild.firstChild:t},mxText.prototype.updateBoundingBox=function(){var t=this.node,e=(this.boundingBox=this.bounds.clone(),this.getTextRotation()),n=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER):null,i=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE):null;if(!(this.ignoreStringSize||null==t||"fill"==this.overflow||this.clipped&&this.ignoreClippedStringSize&&n==mxConstants.ALIGN_CENTER&&i==mxConstants.ALIGN_MIDDLE)){n=null,i=null;if(null!=t.ownerSVGElement)if(null!=t.firstChild&&null!=t.firstChild.firstChild&&"foreignObject"==t.firstChild.firstChild.nodeName&&null!=t.firstChild.firstChild.firstChild&&null!=t.firstChild.firstChild.firstChild.firstChild)i=(t=t.firstChild.firstChild.firstChild.firstChild).offsetHeight*this.scale,n="width"==this.overflow?this.boundingBox.width:t.offsetWidth*this.scale;else try{var l=t.getBBox();return void("string"==typeof this.value&&0==mxUtils.trim(this.value)||0==l.width&&0==l.height?this.boundingBox=null:this.boundingBox=new mxRectangle(l.x,l.y,l.width,l.height))}catch(t){}else var s,o,l=null!=this.state?this.state.view.textDiv:null,i=(n=(null!=this.offsetWidth&&null!=this.offsetHeight||(null!=l&&(this.updateFont(l),this.updateSize(l,!1),this.updateInnerHtml(l),t=l),l=t,8!=document.documentMode||mxClient.IS_EM?null!=l.firstChild&&"DIV"==l.firstChild.nodeName&&(l=l.firstChild):(s=Math.round(this.bounds.width/this.scale),this.wrap&&0<s?(t.style.wordWrap=mxConstants.WORD_WRAP,t.style.whiteSpace="normal","break-word"!=t.style.wordWrap&&(n=(l=0<(o=l.getElementsByTagName("div")).length?o[o.length-1]:l).offsetWidth+2,o=this.node.getElementsByTagName("div"),this.clipped&&(n=Math.min(s,n)),1<o.length)&&(o[o.length-2].style.width=n+"px")):t.style.whiteSpace="nowrap"),this.offsetWidth=l.offsetWidth+this.textWidthPadding,this.offsetHeight=l.offsetHeight),this.offsetWidth*this.scale),this.offsetHeight*this.scale);null!=n&&null!=i&&(this.boundingBox=new mxRectangle(this.bounds.x,this.bounds.y,n,i))}null!=this.boundingBox&&(0!=e?(s=mxUtils.getBoundingBox(new mxRectangle(this.margin.x*this.boundingBox.width,this.margin.y*this.boundingBox.height,this.boundingBox.width,this.boundingBox.height),e,new mxPoint(0,0)),this.unrotatedBoundingBox=mxRectangle.fromRectangle(this.boundingBox),this.unrotatedBoundingBox.x+=this.margin.x*this.unrotatedBoundingBox.width,this.unrotatedBoundingBox.y+=this.margin.y*this.unrotatedBoundingBox.height,this.boundingBox.x+=s.x,this.boundingBox.y+=s.y,this.boundingBox.width=s.width,this.boundingBox.height=s.height):(this.boundingBox.x+=this.margin.x*this.boundingBox.width,this.boundingBox.y+=this.margin.y*this.boundingBox.height,this.unrotatedBoundingBox=null))},mxText.prototype.getShapeRotation=function(){return 0},mxText.prototype.getTextRotation=function(){return null!=this.state&&null!=this.state.shape?this.state.shape.getTextRotation():0},mxText.prototype.isPaintBoundsInverted=function(){return!this.horizontal&&null!=this.state&&this.state.view.graph.model.isVertex(this.state.cell)},mxText.prototype.configureCanvas=function(t,e,n,i,l){mxShape.prototype.configureCanvas.apply(this,arguments),t.setFontColor(this.color),t.setFontBackgroundColor(this.background),t.setFontBorderColor(this.border),t.setFontFamily(this.family),t.setFontSize(this.size),t.setFontStyle(this.fontStyle)},mxText.prototype.isShadowEnabled=function(){return null!=this.style&&mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_SHADOW,!1)},mxText.prototype.getHtmlValue=function(){var t=this.value;return this.dialect!=mxConstants.DIALECT_STRICTHTML&&(t=mxUtils.htmlEntities(t,!1)),t=mxUtils.replaceTrailingNewlines(t,"<div><br></div>"),t=this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t},mxText.prototype.getTextCss=function(){var t=mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,t="display: inline-block; font-size: "+this.size+"px; font-family: "+this.family+"; color: "+this.color+"; line-height: "+t+"; pointer-events: "+(this.pointerEvents?"all":"none")+"; ",e=((this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(t+="font-weight: bold; "),(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(t+="font-style: italic; "),[]);return(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.push("underline"),(this.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&e.push("line-through"),0<e.length&&(t+="text-decoration: "+e.join(" ")+"; "),t},mxText.prototype.redrawHtmlShape=function(){var t;mxClient.IS_SVG?this.redrawHtmlShapeWithCss3():((t=this.node.style).whiteSpace="normal",t.overflow="",t.width="",t.height="",this.updateValue(),this.updateFont(this.node),this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),this.offsetWidth=null,this.offsetHeight=null,mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform())},mxText.prototype.redrawHtmlShapeWithCss3=function(){var t=Math.max(0,Math.round(this.bounds.width/this.scale)),r=Math.max(0,Math.round(this.bounds.height/this.scale)),e="position: absolute; left: "+Math.round(this.bounds.x)+"px; top: "+Math.round(this.bounds.y)+"px; pointer-events: none; ",n=this.getTextCss(),i=this.getActualTextDirection();mxSvgCanvas2D.createCss(t+2,r,this.align,this.valign,this.wrap,this.overflow,this.clipped,i,null!=this.background?mxUtils.htmlEntities(this.background):null,null!=this.border?mxUtils.htmlEntities(this.border):null,e,n,this.scale,mxUtils.bind(this,function(t,e,n,i,l,s){var o=this.getTextRotation(),o=(1!=this.scale?"scale("+this.scale+") ":"")+(0!=o?"rotate("+o+"deg) ":"")+(0!=this.margin.x||0!=this.margin.y?"translate("+100*this.margin.x+"%,"+100*this.margin.y+"%)":""),s=(""!=o&&(o="transform-origin: 0 0; transform: "+o+"; "),"block"==this.overflow&&this.valign==mxConstants.ALIGN_MIDDLE&&(o+="max-height: "+(r+1)+"px;"),""==s?(n+=i,i="display:inline-block; min-width: 100%; "+o):(i+=o,mxClient.IS_SF&&(i+="-webkit-clip-path: content-box;")),"block"==this.overflow&&(i+="width: 100%; "),this.opacity<100&&(l+="opacity: "+this.opacity/100+"; "),this.node.setAttribute("style",n),mxUtils.isNode(this.value)?this.value.outerHTML:this.getHtmlValue());null==this.node.firstChild&&(this.node.innerHTML="<div><div>"+s+"</div></div>",mxClient.IS_IE11)&&this.fixFlexboxForIe11(this.node),this.node.firstChild.firstChild.setAttribute("style",l),this.node.firstChild.setAttribute("style",i)}))},mxText.prototype.fixFlexboxForIe11=function(t){for(var e=t.querySelectorAll('div[style*="display: flex; justify-content: flex-end;"]'),n=0;n<e.length;n++)e[n].style.justifyContent="flex-start",e[n].style.flexDirection="row-reverse";if(!this.wrap)for(var e=t.querySelectorAll('div[style*="display: flex; justify-content: center;"]'),i=-window.innerWidth,n=0;n<e.length;n++)e[n].style.marginLeft=i+"px",e[n].style.marginRight=i+"px"},mxText.prototype.updateHtmlTransform=function(){var t=this.getTextRotation(),e=this.node.style,n=this.margin.x,i=this.margin.y;0!=t?(mxUtils.setPrefixedStyle(e,"transformOrigin",100*-n+"% "+100*-i+"%"),mxUtils.setPrefixedStyle(e,"transform","translate("+100*n+"%,"+100*i+"%) scale("+this.scale+") rotate("+t+"deg)")):(mxUtils.setPrefixedStyle(e,"transformOrigin","0% 0%"),mxUtils.setPrefixedStyle(e,"transform","scale("+this.scale+") translate("+100*n+"%,"+100*i+"%)")),e.left=Math.round(this.bounds.x-Math.ceil(n*("fill"!=this.overflow&&"width"!=this.overflow?3:1)))+"px",e.top=Math.round(this.bounds.y-i*("fill"!=this.overflow?3:1))+"px",this.opacity<100?e.opacity=this.opacity/100:e.opacity=""},mxText.prototype.updateInnerHtml=function(t){var e;mxUtils.isNode(this.value)?t.innerHTML=this.value.outerHTML:(e=this.value,this.dialect!=mxConstants.DIALECT_STRICTHTML&&(e=mxUtils.htmlEntities(e,!1)),e=mxUtils.replaceTrailingNewlines(e,"<div>&nbsp;</div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e,t.innerHTML=e='<div style="display:inline-block;_display:inline;">'+e+"</div>")},mxText.prototype.updateHtmlFilter=function(){var t=this.node.style,e=this.margin.x,n=this.margin.y,i=this.scale,l=(mxUtils.setOpacity(this.node,this.opacity),0),s=0,o=null!=this.state?this.state.view.textDiv:null,r=this.node,a=(null!=o?(o.style.overflow="",o.style.height="",o.style.width="",this.updateFont(o),this.updateSize(o,!1),this.updateInnerHtml(o),a=Math.round(this.bounds.width/this.scale),this.wrap&&0<a?(o.style.whiteSpace="normal",o.style.wordWrap=mxConstants.WORD_WRAP,l=a,this.clipped&&(l=Math.min(l,this.bounds.width)),o.style.width=l+"px"):o.style.whiteSpace="nowrap",null!=(r=o).firstChild&&"DIV"==r.firstChild.nodeName&&(r=r.firstChild,this.wrap)&&"break-word"==o.style.wordWrap&&(r.style.width="100%"),!this.clipped&&this.wrap&&0<a&&(l=r.offsetWidth+this.textWidthPadding,o.style.width=l+"px"),s=r.offsetHeight+2):null!=r.firstChild&&"DIV"==r.firstChild.nodeName&&(s=(r=r.firstChild).offsetHeight),l=r.offsetWidth+this.textWidthPadding,this.clipped&&(s=Math.min(s,this.bounds.height)),this.bounds.width/i),o=this.bounds.height/i,r=("fill"==this.overflow?(s=o,l=a):"width"==this.overflow&&(s=r.scrollHeight,l=a),this.offsetWidth=l,o=this.offsetHeight=s,"fill"!=this.overflow&&"width"!=this.overflow&&(a=l=this.clipped?Math.min(a,l):l,this.wrap)&&(t.width=Math.round(a)+"px"),o*=i,a*=i,this.getTextRotation()*(Math.PI/180)),s=parseFloat(parseFloat(Math.cos(r)).toFixed(8)),l=parseFloat(parseFloat(Math.sin(-r)).toFixed(8)),h=((r%=2*Math.PI)<0&&(r+=2*Math.PI),(r%=Math.PI)>Math.PI/2&&(r=Math.PI-r),Math.cos(r)),u=Math.sin(-r),e=a*-(e+.5),n=o*-(n+.5),d=(o-o*h+a*u)/2+l*e-s*n,h=(a-a*h+o*u)/2-s*e-l*n;0!=r&&(u="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+l+", M21="+-l+", M22="+s+", sizingMethod='auto expand')",null!=t.filter&&0<t.filter.length?t.filter+=" "+u:t.filter=u);t.zoom=i,t.left=Math.round(this.bounds.x+h-a/2)+"px",t.top=Math.round(this.bounds.y+d-o/2)+"px"},mxText.prototype.updateValue=function(){var t,e,n,i;mxUtils.isNode(this.value)?(this.node.innerText="",this.node.appendChild(this.value)):(e=this.value,this.dialect!=mxConstants.DIALECT_STRICTHTML&&(e=mxUtils.htmlEntities(e,!1)),e=mxUtils.replaceTrailingNewlines(e,"<div><br></div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e,n=null!=this.background&&this.background!=mxConstants.NONE?this.background:null,i=null!=this.border&&this.border!=mxConstants.NONE?this.border:null,"fill"==this.overflow||"width"==this.overflow?(null!=n&&(this.node.style.backgroundColor=n),null!=i&&(this.node.style.border="1px solid "+i)):(t="",null!=n&&(t+="background-color:"+mxUtils.htmlEntities(n)+";"),null!=i&&(t+="border:1px solid "+mxUtils.htmlEntities(i)+";"),e='<div style="zoom:1;'+t+"display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:"+(mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT)+'">'+e+"</div>"),this.node.innerHTML=e,0<(n=this.node.getElementsByTagName("div")).length&&((i=(i=this.textDirection)==mxConstants.TEXT_DIRECTION_AUTO&&this.dialect!=mxConstants.DIALECT_STRICTHTML?this.getAutoDirection():i)==mxConstants.TEXT_DIRECTION_LTR||i==mxConstants.TEXT_DIRECTION_RTL?n[n.length-1].setAttribute("dir",i):n[n.length-1].removeAttribute("dir")))},mxText.prototype.updateFont=function(t){var t=t.style,e=(t.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,t.fontSize=this.size+"px",t.fontFamily=this.family,t.verticalAlign="top",t.color=this.color,(this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?t.fontWeight="bold":t.fontWeight="",(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?t.fontStyle="italic":t.fontStyle="",[]);(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.push("underline"),(this.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&e.push("line-through"),t.textDecoration=e.join(" "),this.align==mxConstants.ALIGN_CENTER?t.textAlign="center":this.align==mxConstants.ALIGN_RIGHT?t.textAlign="right":t.textAlign="left"},mxText.prototype.updateSize=function(t,e){var n,i=Math.max(0,Math.round(this.bounds.width/this.scale)),l=Math.max(0,Math.round(this.bounds.height/this.scale)),s=t.style;this.clipped?(s.overflow="hidden",s.maxHeight=l+"px",s.maxWidth=i+"px"):"fill"==this.overflow?(s.width=i+1+"px",s.height=l+1+"px",s.overflow="hidden"):"width"==this.overflow?(s.width=i+1+"px",s.maxHeight=l+1+"px",s.overflow="hidden"):"block"==this.overflow&&(s.width=i+1+"px"),this.wrap&&0<i?(s.wordWrap=mxConstants.WORD_WRAP,s.whiteSpace="normal",s.width=i+"px",e&&"fill"!=this.overflow&&"width"!=this.overflow&&(null!=(l=t).firstChild&&"DIV"==l.firstChild.nodeName&&(l=l.firstChild,"break-word"==t.style.wordWrap)&&(l.style.width="100%"),0==(e=l.offsetWidth)&&(n=t.parentNode,t.style.visibility="hidden",document.body.appendChild(t),e=l.offsetWidth,t.style.visibility="",n.appendChild(t)),e+=3,this.clipped&&(e=Math.min(e,i)),s.width=e+"px")):s.whiteSpace="nowrap"},mxText.prototype.updateMargin=function(){this.margin=mxUtils.getAlignmentAsPoint(this.align,this.valign)},mxText.prototype.getSpacing=function(t,e){return new mxPoint(null!=e&&-.5==e.x||null==e&&this.align==mxConstants.ALIGN_CENTER?(this.spacingLeft-this.spacingRight)/2:null!=e&&-1==e.x||null==e&&this.align==mxConstants.ALIGN_RIGHT?-this.spacingRight-(t?0:this.baseSpacingRight):this.spacingLeft+(t?0:this.baseSpacingLeft),this.valign==mxConstants.ALIGN_MIDDLE?(this.spacingTop-this.spacingBottom)/2:this.valign==mxConstants.ALIGN_BOTTOM?-this.spacingBottom-(t?0:this.baseSpacingBottom):this.spacingTop+(t?0:this.baseSpacingTop))},__mxOutput.mxText=void 0!==mxText?mxText:void 0,mxUtils.extend(mxTriangle,mxActor),mxTriangle.prototype.isRoundable=function(){return!0},mxTriangle.prototype.redrawPath=function(t,e,n,i,l){var s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,.5*l),new mxPoint(0,l)],this.isRounded,s,!0)},__mxOutput.mxTriangle=void 0!==mxTriangle?mxTriangle:void 0,mxUtils.extend(mxHexagon,mxActor),mxHexagon.prototype.redrawPath=function(t,e,n,i,l){var s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(.25*i,0),new mxPoint(.75*i,0),new mxPoint(i,.5*l),new mxPoint(.75*i,l),new mxPoint(.25*i,l),new mxPoint(0,.5*l)],this.isRounded,s,!0)},__mxOutput.mxHexagon=void 0!==mxHexagon?mxHexagon:void 0,mxUtils.extend(mxLine,mxShape),mxLine.prototype.vertical=!1,mxLine.prototype.paintVertexShape=function(t,e,n,i,l){var s;t.begin(),this.vertical?(t.moveTo(s=e+i/2,n),t.lineTo(s,n+l)):(t.moveTo(e,s=n+l/2),t.lineTo(e+i,s)),t.stroke()},__mxOutput.mxLine=void 0!==mxLine?mxLine:void 0,mxUtils.extend(mxImageShape,mxRectangleShape),mxImageShape.prototype.preserveImageAspect=!0,mxImageShape.prototype.getSvgScreenOffset=function(){return 0},mxImageShape.prototype.apply=function(t){mxShape.prototype.apply.apply(this,arguments),this.fill=null,this.stroke=null,(this.gradient=null)!=this.style&&(this.preserveImageAspect=1==mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_ASPECT,1),this.imageBackground=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,null),this.imageBorder=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null),this.flipH=this.flipH||1==mxUtils.getValue(this.style,"imageFlipH",0),this.flipV=this.flipV||1==mxUtils.getValue(this.style,"imageFlipV",0),this.clipPath=mxUtils.getValue(this.style,mxConstants.STYLE_CLIP_PATH,null))},mxImageShape.prototype.isHtmlAllowed=function(){return!this.preserveImageAspect},mxImageShape.prototype.createHtml=function(){var t=document.createElement("div");return t.style.position="absolute",t},mxImageShape.prototype.isRoundable=function(){return!1},mxImageShape.prototype.getImageDataUri=function(){return this.image},mxImageShape.prototype.configurePointerEvents=function(t){},mxImageShape.prototype.paintVertexShape=function(t,e,n,i,l){null!=this.image?(null!=this.imageBackground&&(t.setFillColor(this.imageBackground),t.setStrokeColor(this.imageBorder),t.rect(e,n,i,l),t.fillAndStroke()),t.image(e,n,i,l,this.getImageDataUri(),this.preserveImageAspect,!1,!1,this.clipPath),null!=this.imageBorder&&(t.setShadow(!1),t.setStrokeColor(this.imageBorder),t.rect(e,n,i,l),t.stroke())):mxRectangleShape.prototype.paintBackground.apply(this,arguments)},mxImageShape.prototype.redrawHtmlShape=function(){var t,e;this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px",this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px",this.node.innerText="",null!=this.image?(t=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,""),e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,""),this.node.style.backgroundColor=t,this.node.style.borderColor=e,(t=document.createElement("img")).setAttribute("border","0"),t.style.position="absolute",t.src=this.image,e=this.opacity<100?"alpha(opacity="+this.opacity+")":"",this.node.style.filter=e,this.flipH&&this.flipV?e+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)":this.flipH?e+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":this.flipV&&(e+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"),t.style.filter!=e&&(t.style.filter=e),"image"==t.nodeName?t.style.rotation=this.rotation:0!=this.rotation?mxUtils.setPrefixedStyle(t.style,"transform","rotate("+this.rotation+"deg)"):mxUtils.setPrefixedStyle(t.style,"transform",""),t.style.width=this.node.style.width,t.style.height=this.node.style.height,this.node.style.backgroundImage="",this.node.appendChild(t)):this.setTransparentBackgroundImage(this.node)},__mxOutput.mxImageShape=void 0!==mxImageShape?mxImageShape:void 0,mxUtils.extend(mxLabel,mxRectangleShape),mxLabel.prototype.imageSize=mxConstants.DEFAULT_IMAGESIZE,mxLabel.prototype.spacing=2,mxLabel.prototype.indicatorSize=10,mxLabel.prototype.indicatorSpacing=2,mxLabel.prototype.init=function(t){mxShape.prototype.init.apply(this,arguments),null!=this.indicatorShape&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))},mxLabel.prototype.redraw=function(){null!=this.indicator&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection,this.indicator.redraw()),mxShape.prototype.redraw.apply(this,arguments)},mxLabel.prototype.isHtmlAllowed=function(){return mxRectangleShape.prototype.isHtmlAllowed.apply(this,arguments)&&null==this.indicatorColor&&null==this.indicatorShape},mxLabel.prototype.paintForeground=function(t,e,n,i,l){this.paintImage(t,e,n,i,l),this.paintIndicator(t,e,n,i,l),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxLabel.prototype.paintImage=function(t,e,n,i,l){null!=this.image&&(e=this.getImageBounds(e,n,i,l),n=mxUtils.getValue(this.style,mxConstants.STYLE_CLIP_PATH,null),t.image(e.x,e.y,e.width,e.height,this.image,!1,!1,!1,n))},mxLabel.prototype.getImageBounds=function(t,e,n,i){var l=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),o=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_WIDTH,mxConstants.DEFAULT_IMAGESIZE),r=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_HEIGHT,mxConstants.DEFAULT_IMAGESIZE),a=mxUtils.getNumber(this.style,mxConstants.STYLE_SPACING,this.spacing)+5;return l==mxConstants.ALIGN_CENTER?t+=(n-o)/2:l==mxConstants.ALIGN_RIGHT?t+=n-o-a:t+=a,s==mxConstants.ALIGN_TOP?e+=a:s==mxConstants.ALIGN_BOTTOM?e+=i-r-a:e+=(i-r)/2,new mxRectangle(t,e,o,r)},mxLabel.prototype.paintIndicator=function(t,e,n,i,l){null!=this.indicator?(this.indicator.bounds=this.getIndicatorBounds(e,n,i,l),this.indicator.paint(t)):null!=this.indicatorImage&&(e=this.getIndicatorBounds(e,n,i,l),t.image(e.x,e.y,e.width,e.height,this.indicatorImage,!1,!1,!1))},mxLabel.prototype.getIndicatorBounds=function(t,e,n,i){var l=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),o=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_WIDTH,this.indicatorSize),r=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_HEIGHT,this.indicatorSize),a=this.spacing+5;return l==mxConstants.ALIGN_RIGHT?t+=n-o-a:l==mxConstants.ALIGN_CENTER?t+=(n-o)/2:t+=a,s==mxConstants.ALIGN_BOTTOM?e+=i-r-a:s==mxConstants.ALIGN_TOP?e+=a:e+=(i-r)/2,new mxRectangle(t,e,o,r)},mxLabel.prototype.redrawHtmlShape=function(){for(mxRectangleShape.prototype.redrawHtmlShape.apply(this,arguments);this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);var t,e;null!=this.image&&((t=document.createElement("img")).style.position="relative",t.setAttribute("border","0"),(e=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height)).x-=this.bounds.x,e.y-=this.bounds.y,t.style.left=Math.round(e.x)+"px",t.style.top=Math.round(e.y)+"px",t.style.width=Math.round(e.width)+"px",t.style.height=Math.round(e.height)+"px",t.src=this.image,this.node.appendChild(t))},__mxOutput.mxLabel=void 0!==mxLabel?mxLabel:void 0,mxUtils.extend(mxCylinder,mxShape),mxCylinder.prototype.maxHeight=40,mxCylinder.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),t.begin(),this.redrawPath(t,e,n,i,l,!1),t.fillAndStroke(),this.outline&&null!=this.style&&0!=mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)||(t.setShadow(!1),t.begin(),this.redrawPath(t,e,n,i,l,!0),t.stroke())},mxCylinder.prototype.getCylinderSize=function(t,e,n,i){return Math.min(this.maxHeight,Math.round(i/5))},mxCylinder.prototype.redrawPath=function(t,e,n,i,l,s){e=this.getCylinderSize(e,n,i,l);(s&&null!=this.fill||!s&&null==this.fill)&&(t.moveTo(0,e),t.curveTo(0,2*e,i,2*e,i,e),s||(t.stroke(),t.begin())),s||(t.moveTo(0,e),t.curveTo(0,-e/3,i,-e/3,i,e),t.lineTo(i,l-e),t.curveTo(i,l+e/3,0,l+e/3,0,l-e),t.close())},__mxOutput.mxCylinder=void 0!==mxCylinder?mxCylinder:void 0,mxUtils.extend(mxConnector,mxPolyline),mxConnector.prototype.updateBoundingBox=function(){this.useSvgBoundingBox=null!=this.style&&1==this.style[mxConstants.STYLE_CURVED],mxShape.prototype.updateBoundingBox.apply(this,arguments)},mxConnector.prototype.paintEdgeShape=function(t,e){var n=this.createMarker(t,e,!0),e=this.createMarker(t,e,!1);mxPolyline.prototype.paintEdgeShape.apply(this,arguments),t.setShadow(!1),t.setDashed(!1),null!=n&&(t.setFillColor(mxUtils.getValue(this.style,mxConstants.STYLE_STARTFILLCOLOR,this.stroke)),n()),null!=e&&(t.setFillColor(mxUtils.getValue(this.style,mxConstants.STYLE_ENDFILLCOLOR,this.stroke)),e())},mxConnector.prototype.createMarker=function(t,e,n){var i,l,s=null,o=e.length,r=mxUtils.getValue(this.style,n?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW),a=n?e[1]:e[o-2],e=n?e[0]:e[o-1];return null!=r&&null!=a&&null!=e&&(o=e.x-a.x,a=e.y-a.y,i=o/(o=Math.sqrt(o*o+a*a)),a=a/o,o=mxUtils.getNumber(this.style,n?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE),l=0!=this.style[n?mxConstants.STYLE_STARTFILL:mxConstants.STYLE_ENDFILL],s=mxMarker.createMarker(t,this,r,e,i,a,o,n,this.strokewidth,l)),s},mxConnector.prototype.augmentBoundingBox=function(t){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var e=0;mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(e=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE)+1),mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(e=Math.max(e,mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE))+1),t.grow(e*this.scale)},__mxOutput.mxConnector=void 0!==mxConnector?mxConnector:void 0,mxUtils.extend(mxSwimlane,mxShape),mxSwimlane.prototype.imageSize=16,mxSwimlane.prototype.apply=function(t){this.spacing;mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.laneFill=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE))},mxSwimlane.prototype.isRoundable=function(){return!0},mxSwimlane.prototype.getTitleSize=function(){return Math.max(0,mxUtils.getValue(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE))},mxSwimlane.prototype.getLabelBounds=function(t){var e,n=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),i=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),t=new mxRectangle(t.x,t.y,t.width,t.height),l=this.isHorizontal(),s=this.getTitleSize(),o=this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH,l=l==!o,n=!l&&n!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST),l=l&&i!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST);return o?(e=Math.min(t.width,s*this.scale),(n||l)&&(t.x+=t.width-e),t.width=e):(e=Math.min(t.height,s*this.scale),(n||l)&&(t.y+=t.height-e),t.height=e),t},mxSwimlane.prototype.getGradientBounds=function(t,e,n,i,l){var s=this.getTitleSize();return this.isHorizontal()?new mxRectangle(e,n,i,Math.min(s,l)):new mxRectangle(e,n,Math.min(s,i),l)},mxSwimlane.prototype.getSwimlaneArcSize=function(t,e,n){return"1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?Math.min(t/2,Math.min(e/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):n*(mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100)*3},mxSwimlane.prototype.isHorizontal=function(){return 1==mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)},mxSwimlane.prototype.paintVertexShape=function(t,e,n,i,l){var s,o,r;this.outline||(o=this.getTitleSize(),s=0,o=this.isHorizontal()?Math.min(o,l):Math.min(o,i),t.translate(e,n),this.isRounded?(s=this.getSwimlaneArcSize(i,l,o),s=Math.min((this.isHorizontal()?l:i)-o,Math.min(o,s)),this.paintRoundedSwimlane(t,e,n,i,l,o,s)):this.paintSwimlane(t,e,n,i,l,o),r=mxUtils.getValue(this.style,mxConstants.STYLE_SEPARATORCOLOR,mxConstants.NONE),this.paintSeparator(t,e,n,i,l,o,r),null!=this.image&&(r=this.getImageBounds(e,n,i,l),l=mxUtils.getValue(this.style,mxConstants.STYLE_CLIP_PATH,null),t.image(r.x-e,r.y-n,r.width,r.height,this.image,!1,!1,!1,l)),this.glass&&(t.setShadow(!1),this.paintGlassEffect(t,0,0,i,o,s)))},mxSwimlane.prototype.configurePointerEvents=function(t){var e=!0,n=!0,i=!0;null!=this.style&&(e="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1"),n=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_HEAD,1),i=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_BODY,1)),(e||n||i)&&mxShape.prototype.configurePointerEvents.apply(this,arguments)},mxSwimlane.prototype.paintSwimlane=function(t,e,n,i,l,s){var o=this.laneFill,r=!0,a=!0,h=!0,u=!0;null!=this.style&&(r="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1"),a=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_LINE,1),h=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_HEAD,1),u=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_BODY,1)),this.isHorizontal()?(t.begin(),t.moveTo(0,s),t.lineTo(0,0),t.lineTo(i,0),t.lineTo(i,s),h?t.fillAndStroke():t.fill(),s<l&&(o!=mxConstants.NONE&&r||(t.pointerEvents=!1),o!=mxConstants.NONE&&t.setFillColor(o),t.begin(),t.moveTo(0,s),t.lineTo(0,l),t.lineTo(i,l),t.lineTo(i,s),u?o==mxConstants.NONE?t.stroke():u&&t.fillAndStroke():o!=mxConstants.NONE&&t.fill())):(t.begin(),t.moveTo(s,0),t.lineTo(0,0),t.lineTo(0,l),t.lineTo(s,l),h?t.fillAndStroke():t.fill(),s<i&&(o!=mxConstants.NONE&&r||(t.pointerEvents=!1),o!=mxConstants.NONE&&t.setFillColor(o),t.begin(),t.moveTo(s,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(s,l),u?o==mxConstants.NONE?t.stroke():u&&t.fillAndStroke():o!=mxConstants.NONE&&t.fill())),a&&this.paintDivider(t,e,n,i,l,s,o==mxConstants.NONE)},mxSwimlane.prototype.paintRoundedSwimlane=function(t,e,n,i,l,s,o){var r=this.laneFill,a=!0,h=!0,u=!0,d=!0;null!=this.style&&(a="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1"),h=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_LINE,1),u=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_HEAD,1),d=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_BODY,1)),this.isHorizontal()?(t.begin(),t.moveTo(i,s),t.lineTo(i,o),t.quadTo(i,0,i-Math.min(i/2,o),0),t.lineTo(Math.min(i/2,o),0),t.quadTo(0,0,0,o),t.lineTo(0,s),u?t.fillAndStroke():t.fill(),s<l&&(r!=mxConstants.NONE&&a||(t.pointerEvents=!1),r!=mxConstants.NONE&&t.setFillColor(r),t.begin(),t.moveTo(0,s),t.lineTo(0,l-o),t.quadTo(0,l,Math.min(i/2,o),l),t.lineTo(i-Math.min(i/2,o),l),t.quadTo(i,l,i,l-o),t.lineTo(i,s),d?r==mxConstants.NONE?t.stroke():d&&t.fillAndStroke():r!=mxConstants.NONE&&t.fill())):(t.begin(),t.moveTo(s,0),t.lineTo(o,0),t.quadTo(0,0,0,Math.min(l/2,o)),t.lineTo(0,l-Math.min(l/2,o)),t.quadTo(0,l,o,l),t.lineTo(s,l),u?t.fillAndStroke():t.fill(),s<i&&(r!=mxConstants.NONE&&a||(t.pointerEvents=!1),r!=mxConstants.NONE&&t.setFillColor(r),t.begin(),t.moveTo(s,l),t.lineTo(i-o,l),t.quadTo(i,l,i,l-Math.min(l/2,o)),t.lineTo(i,Math.min(l/2,o)),t.quadTo(i,0,i-o,0),t.lineTo(s,0),d?r==mxConstants.NONE?t.stroke():d&&t.fillAndStroke():r!=mxConstants.NONE&&t.fill())),h&&this.paintDivider(t,e,n,i,l,s,r==mxConstants.NONE)},mxSwimlane.prototype.paintDivider=function(t,e,n,i,l,s,o){0!=s&&(o||t.setShadow(!1),t.begin(),this.isHorizontal()?(t.moveTo(0,s),t.lineTo(i,s)):(t.moveTo(s,0),t.lineTo(s,l)),t.stroke())},mxSwimlane.prototype.paintSeparator=function(t,e,n,i,l,s,o){o!=mxConstants.NONE&&(t.setStrokeColor(o),t.setDashed(!0),t.begin(),this.isHorizontal()?(t.moveTo(i,s),t.lineTo(i,l)):(t.moveTo(s,0),t.lineTo(i,0)),t.stroke(),t.setDashed(!1))},mxSwimlane.prototype.getImageBounds=function(t,e,n,i){return this.isHorizontal()?new mxRectangle(t+n-this.imageSize,e,this.imageSize,this.imageSize):new mxRectangle(t,e,this.imageSize,this.imageSize)},__mxOutput.mxSwimlane=void 0!==mxSwimlane?mxSwimlane:void 0,mxGraphLayout.prototype.graph=null,mxGraphLayout.prototype.useBoundingBox=!0,mxGraphLayout.prototype.parent=null,mxGraphLayout.prototype.moveCell=function(t,e,n){},mxGraphLayout.prototype.resizeCell=function(t,e){},mxGraphLayout.prototype.execute=function(t){},mxGraphLayout.prototype.getGraph=function(){return this.graph},mxGraphLayout.prototype.getConstraint=function(t,e,n,i){return this.graph.getCurrentCellStyle(e)[t]},mxGraphLayout.traverse=function(t,e,n,i,l){if(null!=n&&null!=t&&(e=null==e||e,!(l=l||new mxDictionary).get(t))){l.put(t,!0);i=n(t,i);if(null==i||i){var s=this.graph.model.getEdgeCount(t);if(0<s)for(var o=0;o<s;o++){var r=this.graph.model.getEdgeAt(t,o),a=this.graph.model.getTerminal(r,!0)==t;e&&!a||(a=this.graph.view.getVisibleTerminal(r,!a),this.traverse(a,e,n,r,l))}}}},mxGraphLayout.prototype.isAncestor=function(t,e,n){if(!n)return this.graph.model.getParent(e)==t;if(e==t)return!1;for(;null!=e&&e!=t;)e=this.graph.model.getParent(e);return e==t},mxGraphLayout.prototype.isVertexMovable=function(t){return this.graph.isCellMovable(t)},mxGraphLayout.prototype.isVertexIgnored=function(t){return!this.graph.getModel().isVertex(t)||!this.graph.getModel().isVisible(t)},mxGraphLayout.prototype.isEdgeIgnored=function(t){var e=this.graph.getModel();return!e.isEdge(t)||!this.graph.getModel().isVisible(t)||null==e.getTerminal(t,!0)||null==e.getTerminal(t,!1)},mxGraphLayout.prototype.setEdgeStyleEnabled=function(t,e){this.graph.setCellStyles(mxConstants.STYLE_NOEDGESTYLE,e?"0":"1",[t])},mxGraphLayout.prototype.setOrthogonalEdge=function(t,e){this.graph.setCellStyles(mxConstants.STYLE_ORTHOGONAL,e?"1":"0",[t])},mxGraphLayout.prototype.getParentOffset=function(t){var e=new mxPoint;if(null!=t&&t!=this.parent){var n=this.graph.getModel();if(n.isAncestor(this.parent,t))for(var i=n.getGeometry(t);t!=this.parent;)e.x=e.x+i.x,e.y=e.y+i.y,t=n.getParent(t),i=n.getGeometry(t)}return e},mxGraphLayout.prototype.setEdgePoints=function(t,e){if(null!=t){var n=this.graph.model,i=n.getGeometry(t);if(null==i?(i=new mxGeometry).setRelative(!0):i=i.clone(),null!=this.parent&&null!=e)for(var l=n.getParent(t),s=this.getParentOffset(l),o=0;o<e.length;o++)e[o].x=e[o].x-s.x,e[o].y=e[o].y-s.y;i.points=e,n.setGeometry(t,i)}},mxGraphLayout.prototype.setVertexLocation=function(t,e,n){var i,l,s,o=this.graph.getModel(),r=o.getGeometry(t),a=null;return null!=r&&(a=new mxRectangle(e,n,r.width,r.height),this.useBoundingBox&&null!=(l=this.graph.getView().getState(t))&&null!=l.text&&null!=l.text.boundingBox&&(s=this.graph.getView().scale,i=l.text.boundingBox,l.text.boundingBox.x<l.x&&(e+=(l.x-i.x)/s,a.width=i.width),l.text.boundingBox.y<l.y)&&(n+=(l.y-i.y)/s,a.height=i.height),null!=this.parent&&null!=(l=o.getParent(t))&&l!=this.parent&&(e-=(s=this.getParentOffset(l)).x,n-=s.y),r.x==e&&r.y==n||((r=r.clone()).x=e,r.y=n,o.setGeometry(t,r))),a},mxGraphLayout.prototype.getVertexBounds=function(t){var e,n,i,l,s,o,r=this.graph.getModel().getGeometry(t);return this.useBoundingBox&&null!=(s=this.graph.getView().getState(t))&&null!=s.text&&null!=s.text.boundingBox&&(o=this.graph.getView().scale,l=s.text.boundingBox,e=Math.max(s.x-l.x,0)/o,n=Math.max(s.y-l.y,0)/o,i=Math.max(l.x+l.width-(s.x+s.width),0)/o,l=Math.max(l.y+l.height-(s.y+s.height),0)/o,r=new mxRectangle(r.x-e,r.y-n,r.width+e+i,r.height+n+l)),null!=this.parent&&(s=this.graph.getModel().getParent(t),r=r.clone(),null!=s)&&s!=this.parent&&(o=this.getParentOffset(s),r.x=r.x+o.x,r.y=r.y+o.y),new mxRectangle(r.x,r.y,r.width,r.height)},mxGraphLayout.prototype.arrangeGroups=function(t,e,n,i,l,s){return this.graph.updateGroupBounds(t,e,!0,n,i,l,s)},WeightedCellSorter.prototype.weightedValue=0,WeightedCellSorter.prototype.nudge=!1,WeightedCellSorter.prototype.visited=!1,WeightedCellSorter.prototype.rankIndex=null,WeightedCellSorter.prototype.cell=null,WeightedCellSorter.prototype.compare=function(t,e){return null!=t&&null!=e?e.weightedValue>t.weightedValue||!(e.weightedValue<t.weightedValue)&&e.nudge?-1:1:0},__mxOutput.mxGraphLayout=void 0!==mxGraphLayout?mxGraphLayout:void 0,mxStackLayout.prototype=new mxGraphLayout,mxStackLayout.prototype.constructor=mxStackLayout,mxStackLayout.prototype.horizontal=null,mxStackLayout.prototype.spacing=null,mxStackLayout.prototype.x0=null,mxStackLayout.prototype.y0=null,mxStackLayout.prototype.border=0,mxStackLayout.prototype.marginTop=0,mxStackLayout.prototype.marginLeft=0,mxStackLayout.prototype.marginRight=0,mxStackLayout.prototype.marginBottom=0,mxStackLayout.prototype.keepFirstLocation=!1,mxStackLayout.prototype.fill=!1,mxStackLayout.prototype.resizeParent=!1,mxStackLayout.prototype.resizeParentMax=!1,mxStackLayout.prototype.resizeLast=!1,mxStackLayout.prototype.wrap=null,mxStackLayout.prototype.borderCollapse=!0,mxStackLayout.prototype.allowGaps=!1,mxStackLayout.prototype.gridSize=0,mxStackLayout.prototype.isHorizontal=function(){return this.horizontal},mxStackLayout.prototype.moveCell=function(t,e,n){var i=this.graph.getModel(),l=i.getParent(t),s=this.isHorizontal();if(null!=t&&null!=l){var o=0,r=0,a=i.getChildCount(l),h=s?e:n,e=this.graph.getView().getState(l);for(null!=e&&(h-=s?e.x:e.y),h/=this.graph.view.scale,o=0;o<a;o++){var u=i.getChildAt(l,o);if(u!=t){u=i.getGeometry(u);if(null!=u){u=s?u.x+u.width/2:u.y+u.height/2;if(r<=h&&h<u)break;r=u}}}n=l.getIndex(t),n=Math.max(0,o-(n<o?1:0));i.add(l,t,n)}},mxStackLayout.prototype.getParentSize=function(t){var e=this.graph.getModel(),n=e.getGeometry(t);return n=null!=this.graph.container&&(null==n&&e.isLayer(t)||t==this.graph.getView().currentRoot)?new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1):n},mxStackLayout.prototype.getLayoutCells=function(t){for(var e=this.graph.getModel(),n=e.getChildCount(t),i=[],l=0;l<n;l++){var s=e.getChildAt(t,l);!this.isVertexIgnored(s)&&this.isVertexMovable(s)&&i.push(s)}return this.allowGaps&&i.sort(mxUtils.bind(this,function(t,e){t=this.graph.getCellGeometry(t),e=this.graph.getCellGeometry(e);return this.horizontal?t.x==e.x?0:0<(t.x>e.x)?1:-1:t.y==e.y?0:0<(t.y>e.y)?1:-1})),i},mxStackLayout.prototype.snap=function(t){var e;return null!=this.gridSize&&0<this.gridSize&&1<(t=Math.max(t,this.gridSize))/this.gridSize&&(t+=(e=t%this.gridSize)>this.gridSize/2?this.gridSize-e:-e),t},mxStackLayout.prototype.execute=function(t){if(null!=t){var e,n,i=this.getParentSize(t),l=this.isHorizontal(),s=this.graph.getModel(),o=null,r=(null!=i&&(o=l?i.height-this.marginTop-this.marginBottom:i.width-this.marginLeft-this.marginRight),o-=2*this.border,this.x0+this.border+this.marginLeft),a=this.y0+this.border+this.marginTop;this.graph.isSwimlane(t)&&(n=this.graph.getCellStyle(t),e=mxUtils.getNumber(n,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE),n=1==mxUtils.getValue(n,mxConstants.STYLE_HORIZONTAL,!0),null!=i&&(e=n?Math.min(e,i.height):Math.min(e,i.width)),l==n&&(o-=e),n?a+=e:r+=e),s.beginUpdate();try{for(var h=0,u=null,d=0,p=null,m=this.getLayoutCells(t),c=0;c<m.length;c++){var g,x,y,C=m[c],f=s.getGeometry(C);null!=f&&(f=f.clone(),null!=this.wrap&&null!=u&&(l&&u.x+u.width+f.width+2*this.spacing>this.wrap||!l&&u.y+u.height+f.height+2*this.spacing>this.wrap)&&(u=null,l?a+=h+this.spacing:r+=h+this.spacing,h=0),h=Math.max(h,l?f.height:f.width),x=0,this.borderCollapse||(g=this.graph.getCellStyle(C),x=mxUtils.getNumber(g,mxConstants.STYLE_STROKEWIDTH,1)),null!=u?(y=d+this.spacing+Math.floor(x/2),l?f.x=this.snap((this.allowGaps?Math.max(y,f.x):y)-this.marginLeft)+this.marginLeft:f.y=this.snap((this.allowGaps?Math.max(y,f.y):y)-this.marginTop)+this.marginTop):this.keepFirstLocation||(l?f.x=this.allowGaps&&f.x>r?Math.max(this.snap(f.x-this.marginLeft)+this.marginLeft,r):r:f.y=this.allowGaps&&f.y>a?Math.max(this.snap(f.y-this.marginTop)+this.marginTop,a):a),l?f.y=a:f.x=r,this.fill&&null!=o&&(l?f.height=o:f.width=o),l?f.width=this.snap(f.width):f.height=this.snap(f.height),this.setChildGeometry(C,f),p=C,u=f,d=l?u.x+u.width+Math.floor(x/2):u.y+u.height+Math.floor(x/2))}this.resizeParent&&null!=i&&null!=u&&!this.graph.isCellCollapsed(t)?this.updateParentGeometry(t,i,u):this.resizeLast&&null!=i&&null!=u&&null!=p&&(l?u.width=i.width-u.x-this.spacing-this.marginRight-this.marginLeft:u.height=i.height-u.y-this.spacing-this.marginBottom,this.setChildGeometry(p,u))}finally{s.endUpdate()}}},mxStackLayout.prototype.setChildGeometry=function(t,e){var n=this.graph.getCellGeometry(t);null!=n&&e.x==n.x&&e.y==n.y&&e.width==n.width&&e.height==n.height||this.graph.getModel().setGeometry(t,e)},mxStackLayout.prototype.updateParentGeometry=function(t,e,n){var i,l=this.isHorizontal(),s=this.graph.getModel(),o=e.clone();l?(i=n.x+n.width+this.marginRight+this.border,this.resizeParentMax?o.width=Math.max(o.width,i):o.width=i):(i=n.y+n.height+this.marginBottom+this.border,this.resizeParentMax?o.height=Math.max(o.height,i):o.height=i),e.x==o.x&&e.y==o.y&&e.width==o.width&&e.height==o.height||s.setGeometry(t,o)},__mxOutput.mxStackLayout=void 0!==mxStackLayout?mxStackLayout:void 0,mxPartitionLayout.prototype=new mxGraphLayout,mxPartitionLayout.prototype.constructor=mxPartitionLayout,mxPartitionLayout.prototype.horizontal=null,mxPartitionLayout.prototype.spacing=null,mxPartitionLayout.prototype.border=null,mxPartitionLayout.prototype.resizeVertices=!0,mxPartitionLayout.prototype.isHorizontal=function(){return this.horizontal},mxPartitionLayout.prototype.moveCell=function(t,e,n){var i=this.graph.getModel(),l=i.getParent(t);if(null!=t&&null!=l){for(var s=0,o=0,r=i.getChildCount(l),s=0;s<r;s++){var a=i.getChildAt(l,s),a=this.getVertexBounds(a);if(null!=a){a=a.x+a.width/2;if(o<e&&e<a)break;o=a}}var h=l.getIndex(t),h=Math.max(0,s-(h<s?1:0));i.add(l,t,h)}},mxPartitionLayout.prototype.execute=function(t){var e=this.isHorizontal(),n=this.graph.getModel(),i=n.getGeometry(t);if(null!=(i=null!=this.graph.container&&(null==i&&n.isLayer(t)||t==this.graph.getView().currentRoot)?new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1):i)){for(var l=[],s=n.getChildCount(t),o=0;o<s;o++){var r=n.getChildAt(t,o);!this.isVertexIgnored(r)&&this.isVertexMovable(r)&&l.push(r)}var a=l.length;if(0<a){var h=this.border,u=this.border,d=e?i.height:i.width,p=(d-=2*this.border,this.graph.isSwimlane(t)?this.graph.getStartSize(t):new mxRectangle),p=(d-=e?p.height:p.width,h+=p.width,u+=p.height,this.border+(a-1)*this.spacing),m=e?(i.width-h-p)/a:(i.height-u-p)/a;if(0<m){n.beginUpdate();try{for(o=0;o<a;o++){var r=l[o],c=n.getGeometry(r);null!=c&&((c=c.clone()).x=h,c.y=u,e?(this.resizeVertices&&(c.width=m,c.height=d),h+=m+this.spacing):(this.resizeVertices&&(c.height=m,c.width=d),u+=m+this.spacing),n.setGeometry(r,c))}}finally{n.endUpdate()}}}}},__mxOutput.mxPartitionLayout=void 0!==mxPartitionLayout?mxPartitionLayout:void 0,mxCompactTreeLayout.prototype=new mxGraphLayout,mxCompactTreeLayout.prototype.constructor=mxCompactTreeLayout,mxCompactTreeLayout.prototype.horizontal=null,mxCompactTreeLayout.prototype.invert=null,mxCompactTreeLayout.prototype.resizeParent=!0,mxCompactTreeLayout.prototype.maintainParentLocation=!1,mxCompactTreeLayout.prototype.groupPadding=10,mxCompactTreeLayout.prototype.groupPaddingTop=0,mxCompactTreeLayout.prototype.groupPaddingRight=0,mxCompactTreeLayout.prototype.groupPaddingBottom=0,mxCompactTreeLayout.prototype.groupPaddingLeft=0,mxCompactTreeLayout.prototype.parentsChanged=null,mxCompactTreeLayout.prototype.moveTree=!1,mxCompactTreeLayout.prototype.visited=null,mxCompactTreeLayout.prototype.levelDistance=10,mxCompactTreeLayout.prototype.nodeDistance=20,mxCompactTreeLayout.prototype.resetEdges=!0,mxCompactTreeLayout.prototype.prefHozEdgeSep=5,mxCompactTreeLayout.prototype.prefVertEdgeOff=4,mxCompactTreeLayout.prototype.minEdgeJetty=8,mxCompactTreeLayout.prototype.channelBuffer=4,mxCompactTreeLayout.prototype.edgeRouting=!0,mxCompactTreeLayout.prototype.sortEdges=!1,mxCompactTreeLayout.prototype.alignRanks=!1,mxCompactTreeLayout.prototype.maxRankHeight=null,mxCompactTreeLayout.prototype.root=null,mxCompactTreeLayout.prototype.node=null,mxCompactTreeLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(t).length},mxCompactTreeLayout.prototype.isHorizontal=function(){return this.horizontal},mxCompactTreeLayout.prototype.execute=function(t,e){this.parent=t;var n,i,l,s,o,r,a,h=this.graph.getModel();if(null==e)if(0<this.graph.getEdges(t,h.getParent(t),this.invert,!this.invert,!1).length)this.root=t;else{var u=this.graph.findTreeRoots(t,!0,this.invert);if(0<u.length)for(var d=0;d<u.length;d++)if(!this.isVertexIgnored(u[d])&&0<this.graph.getEdges(u[d],null,this.invert,!this.invert,!1).length){this.root=u[d];break}}else this.root=e;if(null!=this.root){this.resizeParent?this.parentsChanged=new Object:this.parentsChanged=null,this.parentX=null,this.parentY=null,t!=this.root&&null!=h.isVertex(t)&&this.maintainParentLocation&&null!=(r=this.graph.getCellGeometry(t))&&(this.parentX=r.x,this.parentY=r.y),h.beginUpdate();try{this.visited=new Object,this.node=this.dfs(this.root,t),this.alignRanks&&(this.maxRankHeight=[],this.findRankHeights(this.node,0),this.setCellHeights(this.node,0)),null!=this.node&&(this.layout(this.node),i=n=this.graph.gridSize,this.moveTree||null!=(l=this.getVertexBounds(this.root))&&(n=l.x,i=l.y),(a=null)!=(a=this.isHorizontal()?this.horizontalLayout(this.node,n,i):this.verticalLayout(this.node,null,n,i))&&(o=s=0,a.x<0&&(s=Math.abs(n-a.x)),a.y<0&&(o=Math.abs(i-a.y)),0==s&&0==o||this.moveNode(this.node,s,o),this.resizeParent&&this.adjustParents(),this.edgeRouting)&&this.localEdgeProcessing(this.node),null!=this.parentX)&&null!=this.parentY&&null!=(r=this.graph.getCellGeometry(t))&&((r=r.clone()).x=this.parentX,r.y=this.parentY,h.setGeometry(t,r))}finally{h.endUpdate()}}},mxCompactTreeLayout.prototype.moveNode=function(t,e,n){t.x+=e,t.y+=n,this.apply(t);for(var i=t.child;null!=i;)this.moveNode(i,e,n),i=i.next},mxCompactTreeLayout.prototype.sortOutgoingEdges=function(i,t){var l=new mxDictionary;t.sort(function(t,e){var t=t.getTerminal(t.getTerminal(!1)==i),n=l.get(t),t=(null==n&&(n=mxCellPath.create(t).split(mxCellPath.PATH_SEPARATOR),l.put(t,n)),e.getTerminal(e.getTerminal(!1)==i)),e=l.get(t);return null==e&&(e=mxCellPath.create(t).split(mxCellPath.PATH_SEPARATOR),l.put(t,e)),mxCellPath.compare(n,e)})},mxCompactTreeLayout.prototype.findRankHeights=function(t,e){(null==this.maxRankHeight[e]||this.maxRankHeight[e]<t.height)&&(this.maxRankHeight[e]=t.height);for(var n=t.child;null!=n;)this.findRankHeights(n,e+1),n=n.next},mxCompactTreeLayout.prototype.setCellHeights=function(t,e){null!=this.maxRankHeight[e]&&this.maxRankHeight[e]>t.height&&(t.height=this.maxRankHeight[e]);for(var n=t.child;null!=n;)this.setCellHeights(n,e+1),n=n.next},mxCompactTreeLayout.prototype.dfs=function(t,e){var n=mxCellPath.create(t),i=null;if(null!=t&&null==this.visited[n]&&!this.isVertexIgnored(t)){this.visited[n]=t;var i=this.createNode(t),l=this.graph.getModel(),s=null,o=this.graph.getEdges(t,e,this.invert,!this.invert,!1,!0),r=this.graph.getView();this.sortEdges&&this.sortOutgoingEdges(t,o);for(var a=0;a<o.length;a++){var h,u=o[a];this.isEdgeIgnored(u)||(this.resetEdges&&this.setEdgePoints(u,null),this.edgeRouting&&(this.setEdgeStyleEnabled(u,!1),this.setEdgePoints(u,null)),h=null!=(h=r.getState(u))?h.getVisibleTerminal(this.invert):r.getVisibleTerminal(u,this.invert),null!=(u=this.dfs(h,e))&&null!=l.getGeometry(h)&&(null==s?i.child=u:s.next=u,s=u))}}return i},mxCompactTreeLayout.prototype.layout=function(t){if(null!=t){for(var e=t.child;null!=e;)this.layout(e),e=e.next;null!=t.child?this.attachParent(t,this.join(t)):this.layoutLeaf(t)}},mxCompactTreeLayout.prototype.horizontalLayout=function(t,e,n,i){t.x+=e+t.offsetX,t.y+=n+t.offsetY,i=this.apply(t,i);var l=t.child;if(null!=l){i=this.horizontalLayout(l,t.x,t.y,i);for(var s=t.y+l.offsetY,o=l.next;null!=o;)i=this.horizontalLayout(o,t.x+l.offsetX,s,i),s+=o.offsetY,o=o.next}return i},mxCompactTreeLayout.prototype.verticalLayout=function(t,e,n,i,l){t.x+=n+t.offsetY,t.y+=i+t.offsetX,l=this.apply(t,l);var s=t.child;if(null!=s){l=this.verticalLayout(s,t,t.x,t.y,l);for(var o=t.x+s.offsetY,r=s.next;null!=r;)l=this.verticalLayout(r,t,o,t.y+s.offsetX,l),o+=r.offsetY,r=r.next}return l},mxCompactTreeLayout.prototype.attachParent=function(t,e){var n=this.nodeDistance+this.levelDistance,i=(e-t.width)/2-this.nodeDistance,e=i+t.width+2*this.nodeDistance-e;t.child.offsetX=n+t.height,t.child.offsetY=e,t.contour.upperHead=this.createLine(t.height,0,this.createLine(n,e,t.contour.upperHead)),t.contour.lowerHead=this.createLine(t.height,0,this.createLine(n,i,t.contour.lowerHead))},mxCompactTreeLayout.prototype.layoutLeaf=function(t){var e=2*this.nodeDistance;t.contour.upperTail=this.createLine(t.height+e,0),t.contour.upperHead=t.contour.upperTail,t.contour.lowerTail=this.createLine(0,-t.width-e),t.contour.lowerHead=this.createLine(t.height+e,0,t.contour.lowerTail)},mxCompactTreeLayout.prototype.join=function(t){for(var e=2*this.nodeDistance,n=t.child,i=(t.contour=n.contour,n.width+e),l=i,n=n.next;null!=n;){var s=this.merge(t.contour,n.contour);n.offsetY=s+i,n.offsetX=0,l+=s+(i=n.width+e),n=n.next}return l},mxCompactTreeLayout.prototype.merge=function(t,e){for(var n,i=0,l=0,s=0,o=t.lowerHead,r=e.upperHead;null!=r&&null!=o;){var a=this.offset(i,l,r.dx,r.dy,o.dx,o.dy);l+=a,s+=a,i+r.dx<=o.dx?(i+=r.dx,l+=r.dy,r=r.next):(i-=o.dx,l-=o.dy,o=o.next)}return null!=r?(n=this.bridge(t.upperTail,0,0,r,i,l),t.upperTail=null!=n.next?e.upperTail:n,t.lowerTail=e.lowerTail):null==(n=this.bridge(e.lowerTail,i,l,o,0,0)).next&&(t.lowerTail=n),t.lowerHead=e.lowerHead,s},mxCompactTreeLayout.prototype.offset=function(t,e,n,i,l,s){var o=0;return!(l<=t||t+n<=0)&&0<(o=0<l*i-n*s?t<0?t*i/n-e:0<t?t*s/l-e:-e:l<t+n?s-(e+(l-t)*i/n):t+n<l?(n+t)*s/l-(e+i):s-(e+i))?o:0},mxCompactTreeLayout.prototype.bridge=function(t,e,n,i,l,s){l=l+i.dx-e,e=0,e=0==i.dx?i.dy:l*i.dy/i.dx,l=this.createLine(l,e,i.next);return t.next=this.createLine(0,s+i.dy-e-n,l),l},mxCompactTreeLayout.prototype.createNode=function(t){var e=new Object,t=(e.cell=t,e.x=0,e.y=0,e.width=0,e.height=0,this.getVertexBounds(t));return null!=t&&(this.isHorizontal()?(e.width=t.height,e.height=t.width):(e.width=t.width,e.height=t.height)),e.offsetX=0,e.offsetY=0,e.contour=new Object,e},mxCompactTreeLayout.prototype.apply=function(t,e){var n=this.graph.getModel(),i=t.cell,l=n.getGeometry(i);return null!=i&&null!=l&&(this.isVertexMovable(i)&&(l=this.setVertexLocation(i,t.x,t.y),this.resizeParent)&&(t=n.getParent(i),n=mxCellPath.create(t),null==this.parentsChanged[n])&&(this.parentsChanged[n]=t),e=null==e?new mxRectangle(l.x,l.y,l.width,l.height):new mxRectangle(Math.min(e.x,l.x),Math.min(e.y,l.y),Math.max(e.x+e.width,l.x+l.width),Math.max(e.y+e.height,l.y+l.height))),e},mxCompactTreeLayout.prototype.createLine=function(t,e,n){var i=new Object;return i.dx=t,i.dy=e,i.next=n,i},mxCompactTreeLayout.prototype.adjustParents=function(){var t,e=[];for(t in this.parentsChanged)e.push(this.parentsChanged[t]);this.arrangeGroups(mxUtils.sortCells(e,!0),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)},mxCompactTreeLayout.prototype.localEdgeProcessing=function(t){this.processNodeOutgoing(t);for(var e=t.child;null!=e;)this.localEdgeProcessing(e),e=e.next},mxCompactTreeLayout.prototype.processNodeOutgoing=function(t){for(var e=t.child,n=t.cell,i=0,l=[];null!=e;){i++;var s=e.x;this.horizontal&&(s=e.y),l.push(new WeightedCellSorter(e,s)),e=e.next}l.sort(WeightedCellSorter.prototype.compare);for(var o=t.width,r=(i+1)*this.prefHozEdgeSep,a=(o>r+2*this.prefHozEdgeSep&&(o-=2*this.prefHozEdgeSep),o/i),h=a/2,u=(o>r+2*this.prefHozEdgeSep&&(h+=this.prefHozEdgeSep),this.minEdgeJetty-this.prefVertEdgeOff),d=0,p=this.getVertexBounds(n),e=t.child,m=0;m<l.length;m++){for(var c=l[m].cell.cell,g=this.getVertexBounds(c),x=this.graph.getEdgesBetween(n,c,!1),y=[],C=0,f=0,v=0;v<x.length;v++)this.horizontal?(C=p.x+p.width,f=p.y+h,y.push(new mxPoint(C,f)),C=p.x+p.width+u,y.push(new mxPoint(C,f)),f=g.y+g.height/2):(C=p.x+h,f=p.y+p.height,y.push(new mxPoint(C,f)),f=p.y+p.height+u,y.push(new mxPoint(C,f)),C=g.x+g.width/2),y.push(new mxPoint(C,f)),this.setEdgePoints(x[v],y);m<i/2?u+=this.prefVertEdgeOff:i/2<m&&(u-=this.prefVertEdgeOff),h+=a,d=Math.max(d,u)}},__mxOutput.mxCompactTreeLayout=void 0!==mxCompactTreeLayout?mxCompactTreeLayout:void 0,mxUtils.extend(mxRadialTreeLayout,mxCompactTreeLayout),mxRadialTreeLayout.prototype.angleOffset=.5,mxRadialTreeLayout.prototype.rootx=0,mxRadialTreeLayout.prototype.rooty=0,mxRadialTreeLayout.prototype.levelDistance=120,mxRadialTreeLayout.prototype.nodeDistance=10,mxRadialTreeLayout.prototype.autoRadius=!1,mxRadialTreeLayout.prototype.sortEdges=!1,mxRadialTreeLayout.prototype.rowMinX=[],mxRadialTreeLayout.prototype.rowMaxX=[],mxRadialTreeLayout.prototype.rowMinCenX=[],mxRadialTreeLayout.prototype.rowMaxCenX=[],mxRadialTreeLayout.prototype.rowRadi=[],mxRadialTreeLayout.prototype.row=[],mxRadialTreeLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(t).length},mxRadialTreeLayout.prototype.execute=function(t,e){this.parent=t,this.useBoundingBox=!1,this.edgeRouting=!1,mxCompactTreeLayout.prototype.execute.apply(this,arguments);var n,i=null,t=this.getVertexBounds(this.root);for(n in this.centerX=t.x+t.width/2,this.centerY=t.y+t.height/2,this.visited){var l=this.getVertexBounds(this.visited[n]);(i=null!=i?i:l.clone()).add(l)}this.calcRowDims([this.node],0);for(var s=0,o=0,r=0;r<this.row.length;r++)var a=(this.centerX-this.rowMinX[r]-this.nodeDistance)/this.rowRadi[r],h=(this.rowMaxX[r]-this.centerX-this.nodeDistance)/this.rowRadi[r],s=Math.max(s,a),o=Math.max(o,h);for(r=0;r<this.row.length;r++)for(var u=this.centerX-this.nodeDistance-s*this.rowRadi[r],d=this.centerX+this.nodeDistance+o*this.rowRadi[r]-u,p=0;p<this.row[r].length;p++){var m=(g=this.row[r])[p],c=((l=this.getVertexBounds(m.cell)).x+l.width/2-u)/d,c=2*Math.PI*c;m.theta=c}for(r=this.row.length-2;0<=r;r--)for(var g=this.row[r],p=0;p<g.length;p++){for(var x,y,C=(m=g[p]).child,f=0,v=0;null!=C;)v+=C.theta,f++,C=C.next;0<f&&((x=v/f)>m.theta&&p<g.length-1?(y=g[p+1].theta,m.theta=Math.min(x,y-Math.PI/10)):x<m.theta&&0<p&&(y=g[p-1].theta,m.theta=Math.max(x,y+Math.PI/10)))}for(r=0;r<this.row.length;r++)for(p=0;p<this.row[r].length;p++){m=(g=this.row[r])[p],l=this.getVertexBounds(m.cell);this.setVertexLocation(m.cell,this.centerX-l.width/2+this.rowRadi[r]*Math.cos(m.theta),this.centerY-l.height/2+this.rowRadi[r]*Math.sin(m.theta))}},mxRadialTreeLayout.prototype.calcRowDims=function(t,e){if(null!=t&&0!=t.length){this.rowMinX[e]=this.centerX,this.rowMaxX[e]=this.centerX,this.rowMinCenX[e]=this.centerX,this.rowMaxCenX[e]=this.centerX;for(var n=!(this.row[e]=[]),i=0;i<t.length;i++)for(var l=null!=t[i]?t[i].child:null;null!=l;){var s=l.cell,s=this.getVertexBounds(s);this.rowMinX[e]=Math.min(s.x,this.rowMinX[e]),this.rowMaxX[e]=Math.max(s.x+s.width,this.rowMaxX[e]),this.rowMinCenX[e]=Math.min(s.x+s.width/2,this.rowMinCenX[e]),this.rowMaxCenX[e]=Math.max(s.x+s.width/2,this.rowMaxCenX[e]),this.rowRadi[e]=s.y-this.getVertexBounds(this.root).y,null!=l.child&&(n=!0),this.row[e].push(l),l=l.next}n&&this.calcRowDims(this.row[e],e+1)}},__mxOutput.mxRadialTreeLayout=void 0!==mxRadialTreeLayout?mxRadialTreeLayout:void 0,mxFastOrganicLayout.prototype=new mxGraphLayout,mxFastOrganicLayout.prototype.constructor=mxFastOrganicLayout,mxFastOrganicLayout.prototype.useInputOrigin=!0,mxFastOrganicLayout.prototype.resetEdges=!0,mxFastOrganicLayout.prototype.disableEdgeStyle=!0,mxFastOrganicLayout.prototype.forceConstant=50,mxFastOrganicLayout.prototype.forceConstantSquared=0,mxFastOrganicLayout.prototype.minDistanceLimit=2,mxFastOrganicLayout.prototype.maxDistanceLimit=500,mxFastOrganicLayout.prototype.minDistanceLimitSquared=4,mxFastOrganicLayout.prototype.initialTemp=200,mxFastOrganicLayout.prototype.temperature=0,mxFastOrganicLayout.prototype.maxIterations=0,mxFastOrganicLayout.prototype.iteration=0,mxFastOrganicLayout.prototype.vertexArray,mxFastOrganicLayout.prototype.dispX,mxFastOrganicLayout.prototype.dispY,mxFastOrganicLayout.prototype.cellLocation,mxFastOrganicLayout.prototype.radius,mxFastOrganicLayout.prototype.radiusSquared,mxFastOrganicLayout.prototype.isMoveable,mxFastOrganicLayout.prototype.neighbours,mxFastOrganicLayout.prototype.indices,mxFastOrganicLayout.prototype.allowedToRun=!0,mxFastOrganicLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(t).length},mxFastOrganicLayout.prototype.execute=function(t){for(var e=this.graph.getModel(),n=(this.vertexArray=[],this.graph.getChildVertices(t)),i=0;i<n.length;i++)this.isVertexIgnored(n[i])||this.vertexArray.push(n[i]);var l=this.useInputOrigin?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null,s=this.vertexArray.length;this.indices=[],this.dispX=[],this.dispY=[],this.cellLocation=[],this.isMoveable=[],this.neighbours=[],this.radius=[],this.radiusSquared=[],this.forceConstant<.001&&(this.forceConstant=.001),this.forceConstantSquared=this.forceConstant*this.forceConstant;for(i=0;i<this.vertexArray.length;i++){var o=this.vertexArray[i],r=(this.cellLocation[i]=[],mxObjectIdentity.get(o));this.indices[r]=i;var a=(y=this.getVertexBounds(o)).width,h=y.height,u=y.x,d=y.y;this.cellLocation[i][0]=u+a/2,this.cellLocation[i][1]=d+h/2,this.radius[i]=Math.min(a,h),this.radiusSquared[i]=this.radius[i]*this.radius[i]}e.beginUpdate();try{for(i=0;i<s;i++){this.dispX[i]=0,this.dispY[i]=0,this.isMoveable[i]=this.isVertexMovable(this.vertexArray[i]);var p=this.graph.getConnections(this.vertexArray[i],t),n=this.graph.getOpposites(p,this.vertexArray[i]);this.neighbours[i]=[];for(var m=0;m<n.length;m++){this.resetEdges&&this.graph.resetEdge(p[m]),this.disableEdgeStyle&&this.setEdgeStyleEnabled(p[m],!1);var r=mxObjectIdentity.get(n[m]),c=this.indices[r];this.neighbours[i][m]=null!=c?c:i}}for(this.temperature=this.initialTemp,0==this.maxIterations&&(this.maxIterations=20*Math.sqrt(s)),this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun)return;this.calcRepulsion(),this.calcAttraction(),this.calcPositions(),this.reduceTemperature()}for(var g=null,x=null,i=0;i<this.vertexArray.length;i++){var y,o=this.vertexArray[i];this.isVertexMovable(o)&&null!=(y=this.getVertexBounds(o))&&(this.cellLocation[i][0]-=y.width/2,this.cellLocation[i][1]-=y.height/2,u=this.graph.snap(Math.round(this.cellLocation[i][0])),d=this.graph.snap(Math.round(this.cellLocation[i][1])),this.setVertexLocation(o,u,d),g=null==g?u:Math.min(g,u),x=null==x?d:Math.min(x,d))}var C=1-(g||0),f=1-(x||0);null!=l&&(C+=l.x,f+=l.y),this.graph.moveCells(this.vertexArray,C,f)}finally{e.endUpdate()}},mxFastOrganicLayout.prototype.calcPositions=function(){for(var t,e,n=0;n<this.vertexArray.length;n++)this.isMoveable[n]&&((e=Math.sqrt(this.dispX[n]*this.dispX[n]+this.dispY[n]*this.dispY[n]))<.001&&(e=.001),t=this.dispX[n]/e*Math.min(e,this.temperature),e=this.dispY[n]/e*Math.min(e,this.temperature),this.dispX[n]=0,this.dispY[n]=0,this.cellLocation[n][0]+=t,this.cellLocation[n][1]+=e)},mxFastOrganicLayout.prototype.calcAttraction=function(){for(var t=0;t<this.vertexArray.length;t++)for(var e=0;e<this.neighbours[t].length;e++){var n,i,l,s,o=this.neighbours[t][e];t!=o&&this.isMoveable[t]&&this.isMoveable[o]&&((i=(l=this.cellLocation[t][0]-this.cellLocation[o][0])*l+(n=this.cellLocation[t][1]-this.cellLocation[o][1])*n-this.radiusSquared[t]-this.radiusSquared[o])<this.minDistanceLimitSquared&&(i=this.minDistanceLimitSquared),s=n/(n=Math.sqrt(i))*(i=i/this.forceConstant),this.dispX[t]-=l=l/n*i,this.dispY[t]-=s,this.dispX[o]+=l,this.dispY[o]+=s)}},mxFastOrganicLayout.prototype.calcRepulsion=function(){for(var t=this.vertexArray.length,e=0;e<t;e++)for(var n,i,l,s,o=e;o<t;o++){if(!this.allowedToRun)return;o!=e&&this.isMoveable[e]&&this.isMoveable[o]&&(l=this.cellLocation[e][0]-this.cellLocation[o][0],i=this.cellLocation[e][1]-this.cellLocation[o][1],0==l&&(l=.01+Math.random()),0==i&&(i=.01+Math.random()),(s=(n=Math.sqrt(l*l+i*i))-this.radius[e]-this.radius[o])>this.maxDistanceLimit||(s<this.minDistanceLimit&&(s=this.minDistanceLimit),s=i/n*(i=this.forceConstantSquared/s),this.dispX[e]+=l=l/n*i,this.dispY[e]+=s,this.dispX[o]-=l,this.dispY[o]-=s))}},mxFastOrganicLayout.prototype.reduceTemperature=function(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)},__mxOutput.mxFastOrganicLayout=void 0!==mxFastOrganicLayout?mxFastOrganicLayout:void 0,mxCircleLayout.prototype=new mxGraphLayout,mxCircleLayout.prototype.constructor=mxCircleLayout,mxCircleLayout.prototype.radius=null,mxCircleLayout.prototype.moveCircle=!1,mxCircleLayout.prototype.x0=0,mxCircleLayout.prototype.y0=0,mxCircleLayout.prototype.resetEdges=!0,mxCircleLayout.prototype.disableEdgeStyle=!0,mxCircleLayout.prototype.execute=function(t){var e=this.graph.getModel();e.beginUpdate();try{for(var n=0,i=null,l=null,s=[],o=e.getChildCount(t),r=0;r<o;r++){var a,h=e.getChildAt(t,r);this.isVertexIgnored(h)?this.isEdgeIgnored(h)||(this.resetEdges&&this.graph.resetEdge(h),this.disableEdgeStyle&&this.setEdgeStyleEnabled(h,!1)):(s.push(h),a=this.getVertexBounds(h),i=null==i?a.y:Math.min(i,a.y),l=null==l?a.x:Math.min(l,a.x),n=Math.max(n,Math.max(a.width,a.height)))}var u=this.getRadius(s.length,n);this.moveCircle&&(l=this.x0,i=this.y0),this.circle(s,u,l,i)}finally{e.endUpdate()}},mxCircleLayout.prototype.getRadius=function(t,e){return Math.max(t*e/Math.PI,this.radius)},mxCircleLayout.prototype.circle=function(t,e,n,i){for(var l=t.length,s=2*Math.PI/l,o=0;o<l;o++)this.isVertexMovable(t[o])&&this.setVertexLocation(t[o],Math.round(n+e+e*Math.cos(o*s-Math.PI/2)),Math.round(i+e+e*Math.sin(o*s-Math.PI/2)))},__mxOutput.mxCircleLayout=void 0!==mxCircleLayout?mxCircleLayout:void 0,mxParallelEdgeLayout.prototype=new mxGraphLayout,mxParallelEdgeLayout.prototype.constructor=mxParallelEdgeLayout,mxParallelEdgeLayout.prototype.spacing=20,mxParallelEdgeLayout.prototype.checkOverlap=!1,mxParallelEdgeLayout.prototype.execute=function(t,e){var n=this.findParallels(t,e);this.graph.model.beginUpdate();try{for(var i in n){var l=n[i];1<l.length&&this.layout(l)}}finally{this.graph.model.endUpdate()}},mxParallelEdgeLayout.prototype.findParallels=function(t,e){var n=[],i=mxUtils.bind(this,function(t){var e;this.isEdgeIgnored(t)||null!=(e=this.getEdgeId(t))&&(null==n[e]&&(n[e]=[]),n[e].push(t))});if(null!=e)for(var l=0;l<e.length;l++)i(e[l]);else for(var s=this.graph.getModel(),o=s.getChildCount(t),l=0;l<o;l++)i(s.getChildAt(t,l));return n},mxParallelEdgeLayout.prototype.getEdgeId=function(t){var e=this.graph.getView(),n=e.getVisibleTerminal(t,!0),e=e.getVisibleTerminal(t,!1),i="";if(null==n||null==e)return null;if(n=mxObjectIdentity.get(n),e=mxObjectIdentity.get(e),this.checkOverlap){var l=this.graph.view.getState(t);if(null!=l&&null!=l.absolutePoints){for(var s=[],o=0;o<l.absolutePoints.length;o++){var r=l.absolutePoints[o];null!=r&&s.push(r.x,r.y)}i=s.join(",")}}return(e<n?e+"-"+n:n+"-"+e)+i},mxParallelEdgeLayout.prototype.layout=function(t){var e=t[0],n=this.graph.view.getState(e);if(null!=n&&null!=n.absolutePoints){var i=n.absolutePoints[0],n=n.absolutePoints[n.absolutePoints.length-1];if(null!=i&&null!=n){var l=this.graph.getView(),s=this.graph.getModel(),o=s.getGeometry(l.getVisibleTerminal(e,!0)),s=s.getGeometry(l.getVisibleTerminal(e,!1));if(o==s)for(var r=o.x+o.width+this.spacing,a=o.y+o.height/2,h=0;h<t.length;h++)this.route(t[h],r,a),r+=this.spacing;else if(null!=o&&null!=s){l=this.graph.view.scale,e=this.graph.view.translate,o=(i.x=i.x/l-e.x,i.y=i.y/l-e.y,n.x=n.x/l-e.x,n.y=n.y/l-e.y,n.x-i.x),s=n.y-i.y,l=Math.sqrt(o*o+s*s);if(0<l){var r=i.x+o/2,a=i.y+s/2,u=s*this.spacing/l,d=o*this.spacing/l;r+=u*(t.length-1)/2,a-=d*(t.length-1)/2;for(h=0;h<t.length;h++)this.route(t[h],r,a),r-=u,a+=d}}}}},mxParallelEdgeLayout.prototype.route=function(t,e,n){this.graph.isCellMovable(t)&&this.setEdgePoints(t,[new mxPoint(Math.round(e),Math.round(n))])},__mxOutput.mxParallelEdgeLayout=void 0!==mxParallelEdgeLayout?mxParallelEdgeLayout:void 0,mxCompositeLayout.prototype=new mxGraphLayout,mxCompositeLayout.prototype.constructor=mxCompositeLayout,mxCompositeLayout.prototype.layouts=null,mxCompositeLayout.prototype.master=null,mxCompositeLayout.prototype.moveCell=function(t,e,n){null!=this.master?this.master.moveCell.apply(this.master,arguments):this.layouts[0].moveCell.apply(this.layouts[0],arguments)},mxCompositeLayout.prototype.execute=function(t){var e=this.graph.getModel();e.beginUpdate();try{for(var n=0;n<this.layouts.length;n++)this.layouts[n].execute.apply(this.layouts[n],arguments)}finally{e.endUpdate()}},__mxOutput.mxCompositeLayout=void 0!==mxCompositeLayout?mxCompositeLayout:void 0,mxEdgeLabelLayout.prototype=new mxGraphLayout,mxEdgeLabelLayout.prototype.constructor=mxEdgeLabelLayout,mxEdgeLabelLayout.prototype.execute=function(t){for(var e=this.graph.view,n=this.graph.getModel(),i=[],l=[],s=n.getChildCount(t),o=0;o<s;o++){var r=n.getChildAt(t,o),a=e.getState(r);null!=a&&(this.isVertexIgnored(r)?this.isEdgeIgnored(r)||i.push(a):l.push(a))}this.placeLabels(l,i)},mxEdgeLabelLayout.prototype.placeLabels=function(t,e){var n=this.graph.getModel();n.beginUpdate();try{for(var i=0;i<e.length;i++){var l=e[i];if(null!=l&&null!=l.text&&null!=l.text.boundingBox)for(var s=0;s<t.length;s++){var o=t[s];null!=o&&this.avoid(l,o)}}}finally{n.endUpdate()}},mxEdgeLabelLayout.prototype.avoid=function(t,e){var n,i,l=this.graph.getModel(),s=t.text.boundingBox;mxUtils.intersects(s,e)&&(n=-s.y-s.height+e.y,i=-s.y+e.y+e.height,n=Math.abs(n)<Math.abs(i)?n:i,i=-s.x-s.width+e.x,s=-s.x+e.x+e.width,e=Math.abs(i)<Math.abs(s)?i:s,Math.abs(e)<Math.abs(n)?n=0:e=0,null!=(i=l.getGeometry(t.cell)))&&(null!=(i=i.clone()).offset?(i.offset.x+=e,i.offset.y+=n):i.offset=new mxPoint(e,n),l.setGeometry(t.cell,i))},__mxOutput.mxEdgeLabelLayout=void 0!==mxEdgeLabelLayout?mxEdgeLabelLayout:void 0,mxGraphAbstractHierarchyCell.prototype.maxRank=-1,mxGraphAbstractHierarchyCell.prototype.minRank=-1,mxGraphAbstractHierarchyCell.prototype.x=null,mxGraphAbstractHierarchyCell.prototype.y=null,mxGraphAbstractHierarchyCell.prototype.width=0,mxGraphAbstractHierarchyCell.prototype.height=0,mxGraphAbstractHierarchyCell.prototype.nextLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.previousLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.temp=null,mxGraphAbstractHierarchyCell.prototype.getNextLayerConnectedCells=function(t){return null},mxGraphAbstractHierarchyCell.prototype.getPreviousLayerConnectedCells=function(t){return null},mxGraphAbstractHierarchyCell.prototype.isEdge=function(){return!1},mxGraphAbstractHierarchyCell.prototype.isVertex=function(){return!1},mxGraphAbstractHierarchyCell.prototype.getGeneralPurposeVariable=function(t){return null},mxGraphAbstractHierarchyCell.prototype.setGeneralPurposeVariable=function(t,e){return null},mxGraphAbstractHierarchyCell.prototype.setX=function(t,e){this.isVertex()?this.x[0]=e:this.isEdge()&&(this.x[t-this.minRank-1]=e)},mxGraphAbstractHierarchyCell.prototype.getX=function(t){return this.isVertex()?this.x[0]:this.isEdge()?this.x[t-this.minRank-1]:0},mxGraphAbstractHierarchyCell.prototype.setY=function(t,e){this.isVertex()?this.y[0]=e:this.isEdge()&&(this.y[t-this.minRank-1]=e)},__mxOutput.mxGraphAbstractHierarchyCell=void 0!==mxGraphAbstractHierarchyCell?mxGraphAbstractHierarchyCell:void 0,mxGraphHierarchyNode.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyNode.prototype.constructor=mxGraphHierarchyNode,mxGraphHierarchyNode.prototype.cell=null,mxGraphHierarchyNode.prototype.id=null,mxGraphHierarchyNode.prototype.connectsAsTarget=null,mxGraphHierarchyNode.prototype.connectsAsSource=null,mxGraphHierarchyNode.prototype.hashCode=!1,mxGraphHierarchyNode.prototype.getRankValue=function(t){return this.maxRank},mxGraphHierarchyNode.prototype.getNextLayerConnectedCells=function(t){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[],this.nextLayerConnectedCells[0]=[];for(var e=0;e<this.connectsAsTarget.length;e++){var n=this.connectsAsTarget[e];-1==n.maxRank||n.maxRank==t+1?this.nextLayerConnectedCells[0].push(n.source):this.nextLayerConnectedCells[0].push(n)}}return this.nextLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.getPreviousLayerConnectedCells=function(t){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[],this.previousLayerConnectedCells[0]=[];for(var e=0;e<this.connectsAsSource.length;e++){var n=this.connectsAsSource[e];-1==n.minRank||n.minRank==t-1?this.previousLayerConnectedCells[0].push(n.target):this.previousLayerConnectedCells[0].push(n)}}return this.previousLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.isVertex=function(){return!0},mxGraphHierarchyNode.prototype.getGeneralPurposeVariable=function(t){return this.temp[0]},mxGraphHierarchyNode.prototype.setGeneralPurposeVariable=function(t,e){this.temp[0]=e},mxGraphHierarchyNode.prototype.isAncestor=function(t){if(null!=t&&null!=this.hashCode&&null!=t.hashCode&&this.hashCode.length<t.hashCode.length){if(this.hashCode!=t.hashCode){if(null==this.hashCode||null==this.hashCode)return!1;for(var e=0;e<this.hashCode.length;e++)if(this.hashCode[e]!=t.hashCode[e])return!1}return!0}return!1},mxGraphHierarchyNode.prototype.getCoreCell=function(){return this.cell},__mxOutput.mxGraphHierarchyNode=void 0!==mxGraphHierarchyNode?mxGraphHierarchyNode:void 0,mxGraphHierarchyEdge.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyEdge.prototype.constructor=mxGraphHierarchyEdge,mxGraphHierarchyEdge.prototype.edges=null,mxGraphHierarchyEdge.prototype.ids=null,mxGraphHierarchyEdge.prototype.source=null,mxGraphHierarchyEdge.prototype.target=null,mxGraphHierarchyEdge.prototype.isReversed=!1,mxGraphHierarchyEdge.prototype.invert=function(t){var e=this.source;this.source=this.target,this.target=e,this.isReversed=!this.isReversed},mxGraphHierarchyEdge.prototype.getNextLayerConnectedCells=function(t){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[];for(var e=0;e<this.temp.length;e++)this.nextLayerConnectedCells[e]=[],e==this.temp.length-1?this.nextLayerConnectedCells[e].push(this.source):this.nextLayerConnectedCells[e].push(this)}return this.nextLayerConnectedCells[t-this.minRank-1]},mxGraphHierarchyEdge.prototype.getPreviousLayerConnectedCells=function(t){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[];for(var e=0;e<this.temp.length;e++)this.previousLayerConnectedCells[e]=[],0==e?this.previousLayerConnectedCells[e].push(this.target):this.previousLayerConnectedCells[e].push(this)}return this.previousLayerConnectedCells[t-this.minRank-1]},mxGraphHierarchyEdge.prototype.isEdge=function(){return!0},mxGraphHierarchyEdge.prototype.getGeneralPurposeVariable=function(t){return this.temp[t-this.minRank-1]},mxGraphHierarchyEdge.prototype.setGeneralPurposeVariable=function(t,e){this.temp[t-this.minRank-1]=e},mxGraphHierarchyEdge.prototype.getCoreCell=function(){return null!=this.edges&&0<this.edges.length?this.edges[0]:null},__mxOutput.mxGraphHierarchyEdge=void 0!==mxGraphHierarchyEdge?mxGraphHierarchyEdge:void 0,mxGraphHierarchyModel.prototype.maxRank=null,mxGraphHierarchyModel.prototype.vertexMapper=null,mxGraphHierarchyModel.prototype.edgeMapper=null,mxGraphHierarchyModel.prototype.ranks=null,mxGraphHierarchyModel.prototype.roots=null,mxGraphHierarchyModel.prototype.parent=null,mxGraphHierarchyModel.prototype.dfsCount=0,mxGraphHierarchyModel.prototype.SOURCESCANSTARTRANK=1e8,mxGraphHierarchyModel.prototype.tightenToSource=!1,mxGraphHierarchyModel.prototype.createInternalCells=function(t,e,n){for(var i=t.getGraph(),l=0;l<e.length;l++){n[l]=new mxGraphHierarchyNode(e[l]),this.vertexMapper.put(e[l],n[l]);var s=t.getEdges(e[l]);n[l].connectsAsSource=[];for(var o=0;o<s.length;o++){var r=t.getVisibleTerminal(s[o],!1);if(r!=e[l]&&t.graph.model.isVertex(r)&&!t.isVertexIgnored(r)){var a=t.getEdgesBetween(e[l],r,!1),r=t.getEdgesBetween(e[l],r,!0);if(null!=a&&0<a.length&&null==this.edgeMapper.get(a[0])&&2*r.length>=a.length){for(var h=new mxGraphHierarchyEdge(a),u=0;u<a.length;u++){var d=a[u];this.edgeMapper.put(d,h),i.resetEdge(d),t.disableEdgeStyle&&(t.setEdgeStyleEnabled(d,!1),t.setOrthogonalEdge(d,!0))}h.source=n[l],mxUtils.indexOf(n[l].connectsAsSource,h)<0&&n[l].connectsAsSource.push(h)}}}n[l].temp[0]=0}},mxGraphHierarchyModel.prototype.initialRank=function(){var t=[];if(null!=this.roots)for(var e=0;e<this.roots.length;e++)null!=(h=this.vertexMapper.get(this.roots[e]))&&t.push(h);for(var n=this.vertexMapper.getValues(),e=0;e<n.length;e++)n[e].temp[0]=-1;for(var i=t.slice();0<t.length;){d=(h=t[0]).connectsAsTarget,l=h.connectsAsSource;for(var l,s=!0,o=this.SOURCESCANSTARTRANK,e=0;e<d.length;e++){if(5270620!=(m=d[e]).temp[0]){s=!1;break}var r=m.source,o=Math.min(o,r.temp[0]-1)}if(s){if(h.temp[0]=o,this.maxRank=Math.min(this.maxRank,o),null!=l)for(e=0;e<l.length;e++)(m=l[e]).temp[0]=5270620,-1==(r=m.target).temp[0]&&(t.push(r),r.temp[0]=-2);t.shift()}else{var a=t.shift();if(t.push(h),a==h&&1==t.length)break}}for(e=0;e<n.length;e++)n[e].temp[0]-=this.maxRank;for(e=0;e<i.length;e++)for(var h,u=0,d=(h=i[e]).connectsAsSource,p=0;p<d.length;p++){var m,r=(m=d[p]).target;h.temp[0]=Math.max(u,r.temp[0]+1),u=h.temp[0]}this.maxRank=this.SOURCESCANSTARTRANK-this.maxRank},mxGraphHierarchyModel.prototype.fixRanks=function(){var o=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)o[t]=[],this.ranks[t]=o[t];var e=null;if(null!=this.roots)for(var n=this.roots,e=[],t=0;t<n.length;t++){var i=n[t],i=this.vertexMapper.get(i);e[t]=i}this.visit(function(t,e,n,i,l){if((0==l&&e.maxRank<0&&e.minRank<0&&(o[e.temp[0]].push(e),e.maxRank=e.temp[0],e.minRank=e.temp[0],e.temp[0]=o[e.maxRank].length-1),null!=t&&null!=n)&&1<t.maxRank-e.maxRank){n.maxRank=t.maxRank,n.minRank=e.maxRank,n.temp=[],n.x=[],n.y=[];for(var s=n.minRank+1;s<n.maxRank;s++)o[s].push(n),n.setGeneralPurposeVariable(s,o[s].length-1)}},e,!1,null)},mxGraphHierarchyModel.prototype.visit=function(t,e,n,i){if(null!=e){for(var l=0;l<e.length;l++){var s=e[l];null!=s&&(null==i&&(i=new Object),n?(s.hashCode=[],s.hashCode[0]=this.dfsCount,s.hashCode[1]=l,this.extendedDfs(null,s,null,t,i,s.hashCode,l,0)):this.dfs(null,s,null,t,i,0))}this.dfsCount++}},mxGraphHierarchyModel.prototype.dfs=function(t,e,n,i,l,s){if(null!=e){var o=e.id;if(null==l[o]){i(t,l[o]=e,n,s,0);for(var r=e.connectsAsSource.slice(),a=0;a<r.length;a++){var h=r[a],u=h.target;this.dfs(e,u,h,i,l,s+1)}}else i(t,e,n,s,1)}},mxGraphHierarchyModel.prototype.extendedDfs=function(t,e,n,i,l,s,o,r){if(null!=e){null==t||null!=e.hashCode&&e.hashCode[0]==t.hashCode[0]||(a=t.hashCode.length+1,e.hashCode=t.hashCode.slice(),e.hashCode[a-1]=o);var a=e.id;if(null==l[a]){i(t,l[a]=e,n,r,0);for(var h=e.connectsAsSource.slice(),u=0;u<h.length;u++){var d=h[u],p=d.target;this.extendedDfs(e,p,d,i,l,e.hashCode,u,r+1)}}else i(t,e,n,r,1)}},__mxOutput.mxGraphHierarchyModel=void 0!==mxGraphHierarchyModel?mxGraphHierarchyModel:void 0,mxSwimlaneModel.prototype.maxRank=null,mxSwimlaneModel.prototype.vertexMapper=null,mxSwimlaneModel.prototype.edgeMapper=null,mxSwimlaneModel.prototype.ranks=null,mxSwimlaneModel.prototype.roots=null,mxSwimlaneModel.prototype.parent=null,mxSwimlaneModel.prototype.dfsCount=0,mxSwimlaneModel.prototype.SOURCESCANSTARTRANK=1e8,mxSwimlaneModel.prototype.tightenToSource=!1,mxSwimlaneModel.prototype.ranksPerGroup=null,mxSwimlaneModel.prototype.createInternalCells=function(t,e,n){for(var i=t.getGraph(),l=t.swimlanes,s=0;s<e.length;s++){n[s]=new mxGraphHierarchyNode(e[s]),this.vertexMapper.put(e[s],n[s]),n[s].swimlaneIndex=-1;for(var o=0;o<l.length;o++)if(i.model.getParent(e[s])==l[o]){n[s].swimlaneIndex=o;break}var r=t.getEdges(e[s]);n[s].connectsAsSource=[];for(var a=0;a<r.length;a++){var h=t.getVisibleTerminal(r[a],!1);if(h!=e[s]&&t.graph.model.isVertex(h)&&!t.isVertexIgnored(h)){var u=t.getEdgesBetween(e[s],h,!1),h=t.getEdgesBetween(e[s],h,!0);if(null!=u&&0<u.length&&null==this.edgeMapper.get(u[0])&&2*h.length>=u.length){for(var d=new mxGraphHierarchyEdge(u),p=0;p<u.length;p++){var m=u[p];this.edgeMapper.put(m,d),i.resetEdge(m),t.disableEdgeStyle&&(t.setEdgeStyleEnabled(m,!1),t.setOrthogonalEdge(m,!0))}d.source=n[s],mxUtils.indexOf(n[s].connectsAsSource,d)<0&&n[s].connectsAsSource.push(d)}}}n[s].temp[0]=0}},mxSwimlaneModel.prototype.initialRank=function(){this.ranksPerGroup=[];var t=[],e=new Object;if(null!=this.roots)for(var n=0;n<this.roots.length;n++){var i=this.vertexMapper.get(this.roots[n]);this.maxChainDfs(null,i,null,e,0),null!=i&&t.push(i)}for(var l=[],s=[],n=this.ranksPerGroup.length-1;0<=n;n--)n==this.ranksPerGroup.length-1?l[n]=0:l[n]=s[n+1]+1,s[n]=l[n]+this.ranksPerGroup[n];this.maxRank=s[0];for(var o=this.vertexMapper.getValues(),n=0;n<o.length;n++)o[n].temp[0]=-1;for(t.slice();0<t.length;){for(var r=(i=t[0]).connectsAsTarget,a=i.connectsAsSource,h=!0,u=s[0],n=0;n<r.length;n++){if(5270620!=(p=r[n]).temp[0]){h=!1;break}var d=p.source,u=Math.min(u,d.temp[0]-1)}if(h){if(u>s[i.swimlaneIndex]&&(u=s[i.swimlaneIndex]),i.temp[0]=u,null!=a)for(var p,n=0;n<a.length;n++)(p=a[n]).temp[0]=5270620,-1==(d=p.target).temp[0]&&(t.push(d),d.temp[0]=-2);t.shift()}else{var m=t.shift();if(t.push(i),m==i&&1==t.length)break}}},mxSwimlaneModel.prototype.maxChainDfs=function(t,e,n,i,l){if(null!=e){var s=mxCellPath.create(e.cell);if(null==i[s])for(var s=(i[s]=e).swimlaneIndex,o=((null==this.ranksPerGroup[s]||this.ranksPerGroup[s]<l)&&(this.ranksPerGroup[s]=l),e.connectsAsSource.slice()),r=0;r<o.length;r++){var a=o[r],h=a.target;e.swimlaneIndex<h.swimlaneIndex?this.maxChainDfs(e,h,a,mxUtils.clone(i,null,!0),0):e.swimlaneIndex==h.swimlaneIndex&&this.maxChainDfs(e,h,a,mxUtils.clone(i,null,!0),l+1)}}},mxSwimlaneModel.prototype.fixRanks=function(){var o=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)o[t]=[],this.ranks[t]=o[t];var e=null;if(null!=this.roots)for(var n=this.roots,e=[],t=0;t<n.length;t++){var i=n[t],i=this.vertexMapper.get(i);e[t]=i}this.visit(function(t,e,n,i,l){if((0==l&&e.maxRank<0&&e.minRank<0&&(o[e.temp[0]].push(e),e.maxRank=e.temp[0],e.minRank=e.temp[0],e.temp[0]=o[e.maxRank].length-1),null!=t&&null!=n)&&1<t.maxRank-e.maxRank){n.maxRank=t.maxRank,n.minRank=e.maxRank,n.temp=[],n.x=[],n.y=[];for(var s=n.minRank+1;s<n.maxRank;s++)o[s].push(n),n.setGeneralPurposeVariable(s,o[s].length-1)}},e,!1,null)},mxSwimlaneModel.prototype.visit=function(t,e,n,i){if(null!=e){for(var l=0;l<e.length;l++){var s=e[l];null!=s&&(null==i&&(i=new Object),n?(s.hashCode=[],s.hashCode[0]=this.dfsCount,s.hashCode[1]=l,this.extendedDfs(null,s,null,t,i,s.hashCode,l,0)):this.dfs(null,s,null,t,i,0))}this.dfsCount++}},mxSwimlaneModel.prototype.dfs=function(t,e,n,i,l,s){if(null!=e){var o=e.id;if(null==l[o]){i(t,l[o]=e,n,s,0);for(var r=e.connectsAsSource.slice(),a=0;a<r.length;a++){var h=r[a],u=h.target;this.dfs(e,u,h,i,l,s+1)}}else i(t,e,n,s,1)}},mxSwimlaneModel.prototype.extendedDfs=function(t,e,n,i,l,s,o,r){if(null!=e){null==t||null!=e.hashCode&&e.hashCode[0]==t.hashCode[0]||(a=t.hashCode.length+1,e.hashCode=t.hashCode.slice(),e.hashCode[a-1]=o);var a=e.id;if(null==l[a]){i(t,l[a]=e,n,r,0);for(var h=e.connectsAsSource.slice(),u=e.connectsAsTarget.slice(),d=0;d<h.length;d++){var p=(m=h[d]).target;e.swimlaneIndex<=p.swimlaneIndex&&this.extendedDfs(e,p,m,i,l,e.hashCode,d,r+1)}for(d=0;d<u.length;d++){var m,p=(m=u[d]).source;e.swimlaneIndex<p.swimlaneIndex&&this.extendedDfs(e,p,m,i,l,e.hashCode,d,r+1)}}else i(t,e,n,r,1)}},__mxOutput.mxSwimlaneModel=void 0!==mxSwimlaneModel?mxSwimlaneModel:void 0,mxHierarchicalLayoutStage.prototype.execute=function(t){},__mxOutput.mxHierarchicalLayoutStage=void 0!==mxHierarchicalLayoutStage?mxHierarchicalLayoutStage:void 0,mxMedianHybridCrossingReduction.prototype=new mxHierarchicalLayoutStage,mxMedianHybridCrossingReduction.prototype.constructor=mxMedianHybridCrossingReduction,mxMedianHybridCrossingReduction.prototype.layout=null,mxMedianHybridCrossingReduction.prototype.maxIterations=24,mxMedianHybridCrossingReduction.prototype.nestedBestRanks=null,mxMedianHybridCrossingReduction.prototype.currentBestCrossings=0,mxMedianHybridCrossingReduction.prototype.iterationsWithoutImprovement=0,mxMedianHybridCrossingReduction.prototype.maxNoImprovementIterations=2,mxMedianHybridCrossingReduction.prototype.execute=function(t){var e=this.layout.getModel();this.nestedBestRanks=[];for(var n=0;n<e.ranks.length;n++)this.nestedBestRanks[n]=e.ranks[n].slice();for(var i=0,l=this.calculateCrossings(e),n=0;n<this.maxIterations&&i<this.maxNoImprovementIterations;n++){this.weightedMedian(n,e),this.transpose(n,e);var s=this.calculateCrossings(e);if(s<l)for(var l=s,i=0,o=0;o<this.nestedBestRanks.length;o++)for(var r=e.ranks[o],a=0;a<r.length;a++){var h=r[a];this.nestedBestRanks[o][h.getGeneralPurposeVariable(o)]=h}else{i++;for(o=0;o<this.nestedBestRanks.length;o++)for(r=e.ranks[o],a=0;a<r.length;a++)(h=r[a]).setGeneralPurposeVariable(o,a)}if(0==l)break}for(var u=[],d=[],n=0;n<e.maxRank+1;n++)d[n]=[],u[n]=d[n];for(n=0;n<this.nestedBestRanks.length;n++)for(o=0;o<this.nestedBestRanks[n].length;o++)d[n].push(this.nestedBestRanks[n][o]);e.ranks=u},mxMedianHybridCrossingReduction.prototype.calculateCrossings=function(t){for(var e=t.ranks.length,n=0,i=1;i<e;i++)n+=this.calculateRankCrossing(i,t);return n},mxMedianHybridCrossingReduction.prototype.calculateRankCrossing=function(t,e){for(var n=0,i=e.ranks[t],l=e.ranks[t-1],s=[],o=0;o<i.length;o++){for(var r=i[o],a=r.getGeneralPurposeVariable(t),h=r.getPreviousLayerConnectedCells(t),u=[],d=0;d<h.length;d++){var p=h[d].getGeneralPurposeVariable(t-1);u.push(p)}u.sort(function(t,e){return t-e}),s[a]=u}for(var m=[],o=0;o<s.length;o++)m=m.concat(s[o]);for(var c=1;c<l.length;)c<<=1;for(var g=2*c-1,x=(--c,[]),o=0;o<g;++o)x[o]=0;for(o=0;o<m.length;o++){var y=m[o]+c;for(++x[y];0<y;)y%2&&(n+=x[y+1]),++x[y=y-1>>1]}return n},mxMedianHybridCrossingReduction.prototype.transpose=function(t,e){for(var n=!0,i=0;n&&i++<10;)for(var l=t%2==1&&i%2==1,n=!1,s=0;s<e.ranks.length;s++){for(var o=e.ranks[s],r=[],a=0;a<o.length;a++){var h=o[a],u=h.getGeneralPurposeVariable(s);r[u=u<0?a:u]=h}for(var d=null,p=null,m=null,c=null,g=null,x=null,y=null,C=null,f=null,v=null,a=0;a<o.length-1;a++){if(0==a){for(var d=(f=r[a]).getNextLayerConnectedCells(s),p=f.getPreviousLayerConnectedCells(s),g=[],x=[],E=0;E<d.length;E++)g[E]=d[E].getGeneralPurposeVariable(s+1);for(E=0;E<p.length;E++)x[E]=p[E].getGeneralPurposeVariable(s-1)}else d=m,p=c,g=y,x=C,f=v;for(m=(v=r[a+1]).getNextLayerConnectedCells(s),c=v.getPreviousLayerConnectedCells(s),y=[],C=[],E=0;E<m.length;E++)y[E]=m[E].getGeneralPurposeVariable(s+1);for(E=0;E<c.length;E++)C[E]=c[E].getGeneralPurposeVariable(s-1);for(var S=0,w=0,E=0;E<g.length;E++)for(var b=0;b<y.length;b++)g[E]>y[b]&&S++,g[E]<y[b]&&w++;for(var T,E=0;E<x.length;E++)for(b=0;b<C.length;b++)x[E]>C[b]&&S++,x[E]<C[b]&&w++;(w<S||w==S&&l)&&(T=f.getGeneralPurposeVariable(s),f.setGeneralPurposeVariable(s,v.getGeneralPurposeVariable(s)),v.setGeneralPurposeVariable(s,T),m=d,c=p,y=g,C=x,v=f,l||(n=!0))}}},mxMedianHybridCrossingReduction.prototype.weightedMedian=function(t,e){var n=t%2==0;if(n)for(var i=e.maxRank-1;0<=i;i--)this.medianRank(i,n);else for(i=1;i<e.maxRank;i++)this.medianRank(i,n)},mxMedianHybridCrossingReduction.prototype.medianRank=function(t,e){for(var n=this.nestedBestRanks[t].length,i=[],l=[],s=0;s<n;s++){var o,r,a=this.nestedBestRanks[t][s],h=new MedianCellSorter;h.cell=a,r=e?t+1:t-1,null!=(o=e?a.getNextLayerConnectedCells(t):a.getPreviousLayerConnectedCells(t))&&0!=o.length?(h.medianValue=this.medianValue(o,r),i.push(h)):l[a.getGeneralPurposeVariable(t)]=!0}i.sort(MedianCellSorter.prototype.compare);for(s=0;s<n;s++)null==l[s]&&(a=i.shift().cell).setGeneralPurposeVariable(t,s)},mxMedianHybridCrossingReduction.prototype.medianValue=function(t,e){for(var n,i,l=[],s=0,o=0;o<t.length;o++){var r=t[o];l[s++]=r.getGeneralPurposeVariable(e)}return l.sort(function(t,e){return t-e}),s%2==1?l[Math.floor(s/2)]:2==s?(l[0]+l[1])/2:(l[(n=s/2)-1]*(i=l[s-1]-l[n])+l[n]*(n=l[n-1]-l[0]))/(n+i)},MedianCellSorter.prototype.medianValue=0,MedianCellSorter.prototype.cell=!1,MedianCellSorter.prototype.compare=function(t,e){return null!=t&&null!=e?e.medianValue>t.medianValue?-1:e.medianValue<t.medianValue?1:0:0},__mxOutput.mxMedianHybridCrossingReduction=void 0!==mxMedianHybridCrossingReduction?mxMedianHybridCrossingReduction:void 0,mxMinimumCycleRemover.prototype=new mxHierarchicalLayoutStage,mxMinimumCycleRemover.prototype.constructor=mxMinimumCycleRemover,mxMinimumCycleRemover.prototype.layout=null,mxMinimumCycleRemover.prototype.execute=function(t){for(var e=this.layout.getModel(),s=new Object,n=e.vertexMapper.getValues(),o=new Object,i=0;i<n.length;i++)o[n[i].id]=n[i];var l=null;if(null!=e.roots)for(var r=e.roots,l=[],i=0;i<r.length;i++)l[i]=e.vertexMapper.get(r[i]);e.visit(function(t,e,n,i,l){e.isAncestor(t)&&(n.invert(),mxUtils.remove(n,t.connectsAsSource),t.connectsAsTarget.push(n),mxUtils.remove(n,e.connectsAsTarget),e.connectsAsSource.push(n)),s[e.id]=e,delete o[e.id]},l,!0,null);var a=mxUtils.clone(s,null,!0);e.visit(function(t,e,n,i,l){e.isAncestor(t)&&(n.invert(),mxUtils.remove(n,t.connectsAsSource),e.connectsAsSource.push(n),t.connectsAsTarget.push(n),mxUtils.remove(n,e.connectsAsTarget)),s[e.id]=e,delete o[e.id]},o,!0,a)},__mxOutput.mxMinimumCycleRemover=void 0!==mxMinimumCycleRemover?mxMinimumCycleRemover:void 0,mxCoordinateAssignment.prototype=new mxHierarchicalLayoutStage,mxCoordinateAssignment.prototype.constructor=mxCoordinateAssignment,mxCoordinateAssignment.prototype.layout=null,mxCoordinateAssignment.prototype.intraCellSpacing=30,mxCoordinateAssignment.prototype.interRankCellSpacing=100,mxCoordinateAssignment.prototype.parallelEdgeSpacing=10,mxCoordinateAssignment.prototype.maxIterations=8,mxCoordinateAssignment.prototype.prefHozEdgeSep=5,mxCoordinateAssignment.prototype.prefVertEdgeOff=2,mxCoordinateAssignment.prototype.minEdgeJetty=12,mxCoordinateAssignment.prototype.channelBuffer=4,mxCoordinateAssignment.prototype.jettyPositions=null,mxCoordinateAssignment.prototype.orientation=mxConstants.DIRECTION_NORTH,mxCoordinateAssignment.prototype.initialX=null,mxCoordinateAssignment.prototype.limitX=null,mxCoordinateAssignment.prototype.currentXDelta=null,mxCoordinateAssignment.prototype.widestRank=null,mxCoordinateAssignment.prototype.rankTopY=null,mxCoordinateAssignment.prototype.rankBottomY=null,mxCoordinateAssignment.prototype.widestRankValue=null,mxCoordinateAssignment.prototype.rankWidths=null,mxCoordinateAssignment.prototype.rankY=null,mxCoordinateAssignment.prototype.fineTuning=!0,mxCoordinateAssignment.prototype.nextLayerConnectedCache=null,mxCoordinateAssignment.prototype.previousLayerConnectedCache=null,mxCoordinateAssignment.prototype.groupPadding=10,mxCoordinateAssignment.prototype.printStatus=function(){var t=this.layout.getModel();mxLog.show(),mxLog.writeln("======Coord assignment debug=======");for(var e=0;e<t.ranks.length;e++){mxLog.write("Rank ",e," : ");for(var n=t.ranks[e],i=0;i<n.length;i++){var l=n[i];mxLog.write(l.getGeneralPurposeVariable(e),"  ")}mxLog.writeln()}mxLog.writeln("====================================")},mxCoordinateAssignment.prototype.execute=function(t){this.jettyPositions=Object();var e=this.layout.getModel(),n=(this.currentXDelta=0,this.initialCoords(this.layout.getGraph(),e),this.fineTuning&&this.minNode(e),1e8);if(this.fineTuning)for(var i=0;i<this.maxIterations;i++){if(0!=i&&(this.medianPos(i,e),this.minNode(e)),this.currentXDelta<n){for(var l=0;l<e.ranks.length;l++)for(var s=e.ranks[l],o=0;o<s.length;o++)(r=s[o]).setX(l,r.getGeneralPurposeVariable(l));n=this.currentXDelta}else for(l=0;l<e.ranks.length;l++)for(var r,s=e.ranks[l],o=0;o<s.length;o++)(r=s[o]).setGeneralPurposeVariable(l,r.getX(l));this.minPath(this.layout.getGraph(),e),this.currentXDelta=0}this.setCellLocations(this.layout.getGraph(),e)},mxCoordinateAssignment.prototype.minNode=function(t){for(var e=[],n=new mxDictionary,i=[],l=0;l<=t.maxRank;l++){i[l]=t.ranks[l];for(var s=0;s<i[l].length;s++){var o=i[l][s],r=new WeightedCellSorter(o,l);r.rankIndex=s,r.visited=!0,e.push(r),n.put(o,r)}}for(var a=10*e.length,h=0;0<e.length&&h<=a;){var u=e.shift(),d=u.cell,p=u.weightedValue,m=parseInt(u.rankIndex),c=d.getNextLayerConnectedCells(p),g=d.getPreviousLayerConnectedCells(p),x=c.length,y=g.length,C=this.medianXValue(c,p+1),f=this.medianXValue(g,p-1),v=x+y,E=d.getGeneralPurposeVariable(p),S=E,w=!1;if((S=0<v?(C*x+f*y)/v:S)<E-1?0==m||(x=(C=i[p][m-1]).getGeneralPurposeVariable(p)+C.width/2+this.intraCellSpacing+d.width/2)<S?(d.setGeneralPurposeVariable(p,S),w=!0):x<d.getGeneralPurposeVariable(p)-1&&(d.setGeneralPurposeVariable(p,x),w=!0):E+1<S&&(m==i[p].length-1||S<(y=(f=i[p][m+1]).getGeneralPurposeVariable(p)-f.width/2-this.intraCellSpacing-d.width/2)?(d.setGeneralPurposeVariable(p,S),w=!0):y>d.getGeneralPurposeVariable(p)+1&&(d.setGeneralPurposeVariable(p,y),w=!0)),w){for(l=0;l<c.length;l++){var b=c[l];null!=(T=n.get(b))&&0==T.visited&&(T.visited=!0,e.push(T))}for(l=0;l<g.length;l++){var T,b=g[l];null!=(T=n.get(b))&&0==T.visited&&(T.visited=!0,e.push(T))}}u.visited=!1,h++}},mxCoordinateAssignment.prototype.medianPos=function(t,e){if(t%2==0)for(var n=e.maxRank;0<n;n--)this.rankMedianPosition(n-1,e,n);else for(n=0;n<e.maxRank-1;n++)this.rankMedianPosition(n+1,e,n)},mxCoordinateAssignment.prototype.rankMedianPosition=function(t,e,n){for(var i=e.ranks[t],l=[],s=new Object,o=0;o<i.length;o++){var r=i[o],a=(l[o]=new WeightedCellSorter,l[o].cell=r,l[o].rankIndex=o,s[r.id]=l[o],null);a=n<t?r.getPreviousLayerConnectedCells(t):r.getNextLayerConnectedCells(t),l[o].weightedValue=this.calculatedWeightedValue(r,a)}l.sort(WeightedCellSorter.prototype.compare);for(o=0;o<l.length;o++){for(var h,u=l[o].cell,a=null,d=0,p=(null!=(a=(n<t?u.getPreviousLayerConnectedCells(t):u.getNextLayerConnectedCells(t)).slice())&&(d=0<a.length?this.medianXValue(a,n):u.getGeneralPurposeVariable(t)),0),m=-1e8,c=l[o].rankIndex-1;0<=c;)null!=(g=s[i[c].id])&&(h=g.cell,g.visited?(m=h.getGeneralPurposeVariable(t)+h.width/2+this.intraCellSpacing+p+u.width/2,c=-1):(p+=h.width+this.intraCellSpacing,c--));for(var g,x,y=0,C=1e8,c=l[o].rankIndex+1;c<l.length;)null!=(g=s[i[c].id])&&(x=g.cell,g.visited?(C=x.getGeneralPurposeVariable(t)-x.width/2-this.intraCellSpacing-y-u.width/2,c=l.length):(y+=x.width+this.intraCellSpacing,c++));m<=d&&d<=C?u.setGeneralPurposeVariable(t,d):d<m?(u.setGeneralPurposeVariable(t,m),this.currentXDelta+=m-d):C<d&&(u.setGeneralPurposeVariable(t,C),this.currentXDelta+=d-C),l[o].visited=!0}},mxCoordinateAssignment.prototype.calculatedWeightedValue=function(t,e){for(var n=0,i=0;i<e.length;i++){var l=e[i];t.isVertex()&&l.isVertex()?n++:t.isEdge()&&l.isEdge()?n+=8:n+=2}return n},mxCoordinateAssignment.prototype.medianXValue=function(t,e){if(0==t.length)return 0;for(var n,i=[],l=0;l<t.length;l++)i[l]=t[l].getGeneralPurposeVariable(e);return i.sort(function(t,e){return t-e}),t.length%2==1?i[Math.floor(t.length/2)]:(i[(n=t.length/2)-1]+i[n])/2},mxCoordinateAssignment.prototype.initialCoords=function(t,e){this.calculateWidestRank(t,e);for(var n=this.widestRank;0<=n;n--)n<e.maxRank&&this.rankCoordinates(n,t,e);for(n=this.widestRank+1;n<=e.maxRank;n++)0<n&&this.rankCoordinates(n,t,e)},mxCoordinateAssignment.prototype.rankCoordinates=function(t,e,n){for(var i=n.ranks[t],l=0,s=this.initialX+(this.widestRankValue-this.rankWidths[t])/2,o=!1,r=0;r<i.length;r++){var a,h=i[r];h.isVertex()?(null!=(a=this.layout.getVertexBounds(h.cell))?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(h.width=a.width,h.height=a.height):(h.width=a.height,h.height=a.width):o=!0,l=Math.max(l,h.height)):h.isEdge()&&(a=1,null!=h.edges?a=h.edges.length:mxLog.warn("edge.edges is null"),h.width=(a-1)*this.parallelEdgeSpacing),s+=h.width/2,h.setX(t,s),h.setGeneralPurposeVariable(t,s),s=(s+=h.width/2)+this.intraCellSpacing}1==o&&mxLog.warn("At least one cell has no bounds")},mxCoordinateAssignment.prototype.calculateWidestRank=function(t,e){var n=-this.interRankCellSpacing,i=0;this.rankWidths=[],this.rankY=[];for(var l=e.maxRank;0<=l;l--){for(var s=0,o=e.ranks[l],r=this.initialX,a=!1,h=0;h<o.length;h++){var u,d=o[h];d.isVertex()?(null!=(u=this.layout.getVertexBounds(d.cell))?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(d.width=u.width,d.height=u.height):(d.width=u.height,d.height=u.width):a=!0,s=Math.max(s,d.height)):d.isEdge()&&(u=1,null!=d.edges?u=d.edges.length:mxLog.warn("edge.edges is null"),d.width=(u-1)*this.parallelEdgeSpacing),r+=d.width/2,d.setX(l,r),d.setGeneralPurposeVariable(l,r),(r=(r+=d.width/2)+this.intraCellSpacing)>this.widestRankValue&&(this.widestRankValue=r,this.widestRank=l),this.rankWidths[l]=r}1==a&&mxLog.warn("At least one cell has no bounds"),this.rankY[l]=n;var p=s/2+i/2+this.interRankCellSpacing,i=s;this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_WEST?n+=p:n-=p;for(h=0;h<o.length;h++)o[h].setY(l,n)}},mxCoordinateAssignment.prototype.minPath=function(t,e){for(var n=e.edgeMapper.getValues(),i=0;i<n.length;i++){var l=n[i];if(!(l.maxRank-l.minRank-1<1)){for(var s=l.getGeneralPurposeVariable(l.minRank+1),o=!0,r=0,a=l.minRank+2;a<l.maxRank;a++){var h=l.getGeneralPurposeVariable(a);s!=h?(o=!1,s=h):r++}if(!o){for(var u=0,d=0,p=[],m=[],c=l.getGeneralPurposeVariable(l.minRank+1),a=l.minRank+1;a<l.maxRank-1;a++)c==(g=l.getX(a+1))||this.repositionValid(e,l,a+1,c)?(p[a-l.minRank-1]=c,u++):c=p[a-l.minRank-1]=g;for(var g,c=l.getX(a),a=l.maxRank-1;a>l.minRank+1;a--)c==(g=l.getX(a-1))||this.repositionValid(e,l,a-1,c)?(m[a-l.minRank-2]=c,d++):(m[a-l.minRank-2]=l.getX(a-1),c=g);if(r<d||r<u)if(u<=d)for(a=l.maxRank-2;a>l.minRank;a--)l.setX(a,m[a-l.minRank-1]);else if(d<u)for(a=l.minRank+2;a<l.maxRank;a++)l.setX(a,p[a-l.minRank-2])}}}},mxCoordinateAssignment.prototype.repositionValid=function(t,e,n,i){for(var l,s=t.ranks[n],o=-1,r=0;r<s.length;r++)if(e==s[r]){o=r;break}return!(o<0)&&(i<(t=e.getGeneralPurposeVariable(n))?0==o||(l=s[o-1]).getGeneralPurposeVariable(n)+l.width/2+this.intraCellSpacing+e.width/2<=i:!(t<i)||o==s.length-1||i<=(l=s[o+1]).getGeneralPurposeVariable(n)-l.width/2-this.intraCellSpacing-e.width/2)},mxCoordinateAssignment.prototype.setCellLocations=function(t,e){this.rankTopY=[],this.rankBottomY=[];for(var n=0;n<e.ranks.length;n++)this.rankTopY[n]=Number.MAX_VALUE,this.rankBottomY[n]=-Number.MAX_VALUE;for(var i=e.vertexMapper.getValues(),n=0;n<i.length;n++)this.setVertexLocation(i[n]);this.layout.edgeStyle!=mxHierarchicalEdgeStyle.ORTHOGONAL&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.POLYLINE&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.CURVE||this.localEdgeProcessing(e);for(var l=e.edgeMapper.getValues(),n=0;n<l.length;n++)this.setEdgePosition(l[n])},mxCoordinateAssignment.prototype.localEdgeProcessing=function(t){for(var e=0;e<t.ranks.length;e++)for(var n=t.ranks[e],i=0;i<n.length;i++){var l=n[i];if(l.isVertex())for(var s=l.getPreviousLayerConnectedCells(e),o=e-1,r=0;r<2;r++){if(-1<o&&o<t.ranks.length&&null!=s&&0<s.length){for(var a=[],h=0;h<s.length;h++){var u=new WeightedCellSorter(s[h],s[h].getX(o));a.push(u)}a.sort(WeightedCellSorter.prototype.compare);for(var d=l.x[0]-l.width/2,p=d+l.width,m=0,c=[],h=0;h<a.length;h++){var g=a[h].cell;if(g.isVertex())for(var x=0==r?l.connectsAsSource:l.connectsAsTarget,y=0;y<x.length;y++)x[y].source!=g&&x[y].target!=g||(m+=x[y].edges.length,c.push(x[y]));else m+=g.edges.length,c.push(g)}var C=(m+1)*this.prefHozEdgeSep;l.width>C+2*this.prefHozEdgeSep&&(d+=this.prefHozEdgeSep,p-=this.prefHozEdgeSep);for(var f=(p-d)/m,v=d+f/2,E=this.minEdgeJetty-this.prefVertEdgeOff,S=0,h=0;h<c.length;h++){var w=c[h].edges.length,b=this.jettyPositions[c[h].ids[0]];null==b&&(this.jettyPositions[c[h].ids[0]]=b=[]),h<m/2?E+=this.prefVertEdgeOff:m/2<h&&(E-=this.prefVertEdgeOff);for(var T=0;T<w;T++)b[4*T+2*r]=v,v+=f,b[4*T+2*r+1]=E;S=Math.max(S,E)}}s=l.getNextLayerConnectedCells(e),o=e+1}}},mxCoordinateAssignment.prototype.setEdgePosition=function(t){var e=0;if(101207!=t.temp[0]){for(var n=t.maxRank,i=t.minRank,l=(n==i&&(n=t.source.maxRank,i=t.target.minRank),0),s=this.jettyPositions[t.ids[0]],o=(t.isReversed?t.target:t.source).cell,r=this.layout.graph,a=this.orientation==mxConstants.DIRECTION_EAST||this.orientation==mxConstants.DIRECTION_SOUTH,h=0;h<t.edges.length;h++){var u=t.edges[h],d=this.layout.getVisibleTerminal(u,!0),p=[],m=t.isReversed,d=(d!=o&&(m=!m),null!=s&&(v=m?(a?this.rankBottomY:this.rankTopY)[i]:(a?this.rankTopY:this.rankBottomY)[n],f=s[4*l+1+(y=m?2:0)],v+=f=m!=a?-f:f,E=s[4*l+y],C=r.model.getTerminal(u,!0),this.layout.isPort(C)&&r.model.getParent(C)==d&&(E=null!=(w=r.view.getState(C))?w.x:d.geometry.x+t.source.width*C.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(p.push(new mxPoint(E,v)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&p.push(new mxPoint(E,v+f))):(p.push(new mxPoint(v,E)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&p.push(new mxPoint(v+f,E)))),t.x.length-1),c=-1,g=-1,x=t.maxRank-1;m&&(d=0,c=t.x.length,x=t.minRank+(g=1));for(var y,C,f,v,E,S,w,b=d;t.maxRank!=t.minRank&&b!=c;b+=g){var T,M=t.x[b]+e,L=(this.rankTopY[x]+this.rankBottomY[x+1])/2,I=(this.rankTopY[x-1]+this.rankBottomY[x])/2;m&&(T=L,L=I,I=T),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(p.push(new mxPoint(M,L)),p.push(new mxPoint(M,I))):(p.push(new mxPoint(L,M)),p.push(new mxPoint(I,M))),this.limitX=Math.max(this.limitX,M),x+=g}null!=s&&(C=m?(a?this.rankTopY:this.rankBottomY)[n]:(a?this.rankBottomY:this.rankTopY)[i],f=s[4*l+3-(y=m?2:0)],v=C-(f=m!=a?-f:f),E=s[4*l+2-y],d=r.model.getTerminal(u,!1),S=this.layout.getVisibleTerminal(u,!1),this.layout.isPort(d)&&r.model.getParent(d)==S&&(E=null!=(w=r.view.getState(d))?w.x:S.geometry.x+t.target.width*d.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&p.push(new mxPoint(E,v-f)),p.push(new mxPoint(E,v))):(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&p.push(new mxPoint(v-f,E)),p.push(new mxPoint(v,E)))),t.isReversed&&this.processReversedEdge(t,u),this.layout.setEdgePoints(u,p),this.layout.resetEdgeLabels&&null!=u.geometry&&((geometry=u.geometry.clone()).relative=!0,geometry.x=0,geometry.y=0,r.model.setGeometry(u,geometry)),e=0==e?this.parallelEdgeSpacing:0<e?-e:-e+this.parallelEdgeSpacing,l++}t.temp[0]=101207}},mxCoordinateAssignment.prototype.setVertexLocation=function(t){var e=t.cell,n=t.x[0]-t.width/2,i=t.y[0]-t.height/2;this.rankTopY[t.minRank]=Math.min(this.rankTopY[t.minRank],i),this.rankBottomY[t.minRank]=Math.max(this.rankBottomY[t.minRank],i+t.height),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?this.layout.setVertexLocation(e,n,i):this.layout.setVertexLocation(e,i,n),this.limitX=Math.max(this.limitX,n+t.width)},mxCoordinateAssignment.prototype.processReversedEdge=function(t,e){},__mxOutput.mxCoordinateAssignment=void 0!==mxCoordinateAssignment?mxCoordinateAssignment:void 0,mxSwimlaneOrdering.prototype=new mxHierarchicalLayoutStage,mxSwimlaneOrdering.prototype.constructor=mxSwimlaneOrdering,mxSwimlaneOrdering.prototype.layout=null,mxSwimlaneOrdering.prototype.execute=function(t){var e=this.layout.getModel(),r=new Object,a=mxUtils.clone(e.vertexMapper,null,!0),n=null;if(null!=e.roots)for(var i=e.roots,n=[],l=0;l<i.length;l++)n[l]=e.vertexMapper.get(i[l]);e.visit(function(t,e,n,i,l){var s=null!=t&&t.swimlaneIndex==e.swimlaneIndex&&e.isAncestor(t),o=null!=t&&null!=n&&t.swimlaneIndex<e.swimlaneIndex&&n.source==e,s=(s?(n.invert(),mxUtils.remove(n,t.connectsAsSource),e.connectsAsSource.push(n),t.connectsAsTarget.push(n),mxUtils.remove(n,e.connectsAsTarget)):o&&(n.invert(),mxUtils.remove(n,t.connectsAsTarget),e.connectsAsTarget.push(n),t.connectsAsSource.push(n),mxUtils.remove(n,e.connectsAsSource)),mxCellPath.create(e.cell));r[s]=e,delete a[s]},n,!0,null)},__mxOutput.mxSwimlaneOrdering=void 0!==mxSwimlaneOrdering?mxSwimlaneOrdering:void 0;var mxHierarchicalEdgeStyle={ORTHOGONAL:1,POLYLINE:2,STRAIGHT:3,CURVE:4};function mxSwimlaneLayout(t,e,n){mxGraphLayout.call(this,t),this.orientation=null!=e?e:mxConstants.DIRECTION_NORTH,this.deterministic=null==n||n}function mxGraphModel(t){this.currentEdit=this.createUndoableEdit(),null!=t?this.setRoot(t):this.clear()}function mxRootChange(t,e){this.model=t,this.root=e,this.previous=e}function mxChildChange(t,e,n,i){this.model=t,this.parent=e,this.previous=e,this.child=n,this.index=i,this.previousIndex=i}function mxTerminalChange(t,e,n,i){this.model=t,this.cell=e,this.terminal=n,this.previous=n,this.source=i}function mxValueChange(t,e,n){this.model=t,this.cell=e,this.value=n,this.previous=n}function mxStyleChange(t,e,n){this.model=t,this.cell=e,this.style=n,this.previous=n}function mxGeometryChange(t,e,n){this.model=t,this.cell=e,this.geometry=n,this.previous=n}function mxCollapseChange(t,e,n){this.model=t,this.cell=e,this.collapsed=n,this.previous=n}function mxVisibleChange(t,e,n){this.model=t,this.cell=e,this.visible=n,this.previous=n}function mxCellAttributeChange(t,e,n){this.cell=t,this.attribute=e,this.value=n,this.previous=n}function mxCell(t,e,n){this.value=t,this.setGeometry(e),this.setStyle(n),null!=this.onInit&&this.onInit()}function mxGeometry(t,e,n,i){mxRectangle.call(this,t,e,n,i)}mxHierarchicalLayout.prototype=new mxGraphLayout,mxHierarchicalLayout.prototype.constructor=mxHierarchicalLayout,mxHierarchicalLayout.prototype.roots=null,mxHierarchicalLayout.prototype.resizeParent=!1,mxHierarchicalLayout.prototype.maintainParentLocation=!1,mxHierarchicalLayout.prototype.moveParent=!1,mxHierarchicalLayout.prototype.parentBorder=0,mxHierarchicalLayout.prototype.intraCellSpacing=30,mxHierarchicalLayout.prototype.interRankCellSpacing=100,mxHierarchicalLayout.prototype.interHierarchySpacing=60,mxHierarchicalLayout.prototype.parallelEdgeSpacing=10,mxHierarchicalLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxHierarchicalLayout.prototype.fineTuning=!0,mxHierarchicalLayout.prototype.tightenToSource=!0,mxHierarchicalLayout.prototype.disableEdgeStyle=!0,mxHierarchicalLayout.prototype.resetEdgeLabels=!0,mxHierarchicalLayout.prototype.traverseAncestors=!0,mxHierarchicalLayout.prototype.model=null,mxHierarchicalLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxHierarchicalLayout.prototype.getModel=function(){return this.model},mxHierarchicalLayout.prototype.execute=function(t,e){this.parent=t;var n,i=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,null!=(e=null==e||e instanceof Array?e:[e])||null!=t){if(this.parentX=null,this.parentY=null,t!=this.root&&null!=i.isVertex(t)&&this.maintainParentLocation&&null!=(n=this.graph.getCellGeometry(t))&&(this.parentX=n.x,this.parentY=n.y),null!=e){for(var l=[],s=0;s<e.length;s++)(null==t||i.isAncestor(t,e[s]))&&i.isVertex(e[s])&&l.push(e[s]);this.roots=l}i.beginUpdate();try{this.run(t),this.resizeParent&&!this.graph.isCellCollapsed(t)&&this.graph.updateGroupBounds([t],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(n=this.graph.getCellGeometry(t))&&((n=n.clone()).x=this.parentX,n.y=this.parentY,i.setGeometry(t,n))}finally{i.endUpdate()}}},mxHierarchicalLayout.prototype.findRoots=function(t,e){var n=[];if(null!=t&&null!=e){var i,l=this.graph.model,s=null,o=-1e5;for(i in e){var r=e[i];if(l.isVertex(r)&&this.graph.isCellVisible(r)){for(var a=this.getEdges(r),h=0,u=0,d=0;d<a.length;d++)this.getVisibleTerminal(a[d],!0)==r?h++:u++;0==u&&0<h&&n.push(r);var p=h-u;o<p&&(o=p,s=r)}}0==n.length&&null!=s&&n.push(s)}return n},mxHierarchicalLayout.prototype.getEdges=function(t){var e=this.edgesCache.get(t);if(null!=e)return e;for(var n=this.graph.model,i=[],l=this.graph.isCellCollapsed(t),s=n.getChildCount(t),o=0;o<s;o++){var r=n.getChildAt(t,o);!this.isPort(r)&&!l&&this.graph.isCellVisible(r)||(i=i.concat(n.getEdges(r,!0,!0)))}for(var i=i.concat(n.getEdges(t,!0,!0)),a=[],o=0;o<i.length;o++){var h=this.getVisibleTerminal(i[o],!0),u=this.getVisibleTerminal(i[o],!1);(h==u||h!=u&&(u==t&&(null==this.parent||this.isAncestor(this.parent,h,this.traverseAncestors))||h==t&&(null==this.parent||this.isAncestor(this.parent,u,this.traverseAncestors))))&&a.push(i[o])}return this.edgesCache.put(t,a),a},mxHierarchicalLayout.prototype.getVisibleTerminal=function(t,e){var n,i=this.edgesTargetTermCache,l=(i=e?this.edgeSourceTermCache:i).get(t);return null!=l?l:(null!=(n=null==(n=null!=(l=this.graph.view.getState(t))?l.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e))?null!=l?l.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e):n)&&(this.isPort(n)&&(n=this.graph.model.getParent(n)),i.put(t,n)),n)},mxHierarchicalLayout.prototype.run=function(t){var e=[],n=[];if(null==this.roots&&null!=t){var i=Object(),l=(this.filterDescendants(t,i),this.roots=[],!0);for(h in i)if(null!=i[h]){l=!1;break}for(;!l;){for(var s=this.findRoots(t,i),o=0;o<s.length;o++){var r=Object();e.push(r),this.traverse(s[o],!0,null,n,r,e,i)}for(o=0;o<s.length;o++)this.roots.push(s[o]);for(h in l=!0,i)if(null!=i[h]){l=!1;break}}}else for(o=0;o<this.roots.length;o++){r=Object();e.push(r),this.traverse(this.roots[o],!0,null,n,r,e,null)}for(var a=0,o=0;o<e.length;o++){var h,u=[];for(h in r=e[o])u.push(r[h]);this.model=new mxGraphHierarchyModel(this,u,this.roots,t,this.tightenToSource),this.cycleStage(t),this.layeringStage(),this.crossingStage(t),a=this.placementStage(a,t)}},mxHierarchicalLayout.prototype.filterDescendants=function(t,e){var n=this.graph.model;if(n.isVertex(t)&&t!=this.parent&&this.graph.isCellVisible(t)&&(e[mxObjectIdentity.get(t)]=t),this.traverseAncestors||t==this.parent&&this.graph.isCellVisible(t))for(var i=n.getChildCount(t),l=0;l<i;l++){var s=n.getChildAt(t,l);this.isPort(s)||this.filterDescendants(s,e)}},mxHierarchicalLayout.prototype.isPort=function(t){return null!=t&&null!=t.geometry&&t.geometry.relative},mxHierarchicalLayout.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;for(var i=this.getEdges(t),l=[],s=0;s<i.length;s++){var o=this.getVisibleTerminal(i[s],!0),r=this.getVisibleTerminal(i[s],!1);(o==t&&r==e||!n&&o==e&&r==t)&&l.push(i[s])}return l},mxHierarchicalLayout.prototype.traverse=function(t,e,n,i,l,s,o){if(null!=t&&null!=i){var r=mxObjectIdentity.get(t);if(null!=i[r]||null!=o&&null==o[r]){if(null==l[r])for(p=0;p<s.length;p++){var a=s[p];if(null!=a[r]){for(var h in a)l[h]=a[h];return s.splice(p,1),l}}}else{null==l[r]&&(l[r]=t),null==i[r]&&(i[r]=t),null!==o&&delete o[r];for(var u=this.getEdges(t),d=[],p=0;p<u.length;p++)d[p]=this.getVisibleTerminal(u[p],!0)==t;for(var p=0;p<u.length;p++)if(!e||d[p]){for(var m,c=this.getVisibleTerminal(u[p],!d[p]),g=1,x=0;x<u.length;x++)x!=p&&this.getVisibleTerminal(u[x],!(m=d[x]))==c&&(m?g++:g--);0<=g&&(l=this.traverse(c,e,u[p],i,l,s,o))}}}return l},mxHierarchicalLayout.prototype.cycleStage=function(t){new mxMinimumCycleRemover(this).execute(t)},mxHierarchicalLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxHierarchicalLayout.prototype.crossingStage=function(t){new mxMedianHybridCrossingReduction(this).execute(t)},mxHierarchicalLayout.prototype.placementStage=function(t,e){t=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,t,this.parallelEdgeSpacing);return t.fineTuning=this.fineTuning,t.execute(e),t.limitX+this.interHierarchySpacing},__mxOutput.mxHierarchicalLayout=void 0!==mxHierarchicalLayout?mxHierarchicalLayout:void 0,mxSwimlaneLayout.prototype=new mxGraphLayout,mxSwimlaneLayout.prototype.constructor=mxSwimlaneLayout,mxSwimlaneLayout.prototype.roots=null,mxSwimlaneLayout.prototype.swimlanes=null,mxSwimlaneLayout.prototype.dummyVertexWidth=50,mxSwimlaneLayout.prototype.resizeParent=!1,mxSwimlaneLayout.prototype.maintainParentLocation=!1,mxSwimlaneLayout.prototype.moveParent=!1,mxSwimlaneLayout.prototype.parentBorder=30,mxSwimlaneLayout.prototype.intraCellSpacing=30,mxSwimlaneLayout.prototype.interRankCellSpacing=100,mxSwimlaneLayout.prototype.interHierarchySpacing=60,mxSwimlaneLayout.prototype.parallelEdgeSpacing=10,mxSwimlaneLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxSwimlaneLayout.prototype.fineTuning=!0,mxSwimlaneLayout.prototype.tightenToSource=!0,mxSwimlaneLayout.prototype.disableEdgeStyle=!0,mxSwimlaneLayout.prototype.traverseAncestors=!0,mxSwimlaneLayout.prototype.model=null,mxSwimlaneLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxSwimlaneLayout.prototype.getModel=function(){return this.model},mxSwimlaneLayout.prototype.execute=function(t,e){this.parent=t;var n=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,!(null==e||e.length<1)){null==t&&(t=n.getParent(e[0])),this.parentX=null,this.parentY=null,t!=this.root&&null!=n.isVertex(t)&&this.maintainParentLocation&&null!=(i=this.graph.getCellGeometry(t))&&(this.parentX=i.x,this.parentY=i.y),this.swimlanes=e;for(var i,l=[],s=0;s<e.length;s++){var o=this.graph.getChildCells(e[s]);null!=o&&0!=o.length||(o=this.graph.insertVertex(e[s],null,null,0,0,this.dummyVertexWidth,0),l.push(o))}n.beginUpdate();try{this.run(t),this.resizeParent&&!this.graph.isCellCollapsed(t)&&this.graph.updateGroupBounds([t],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(i=this.graph.getCellGeometry(t))&&((i=i.clone()).x=this.parentX,i.y=this.parentY,n.setGeometry(t,i)),this.graph.removeCells(l)}finally{n.endUpdate()}}},mxSwimlaneLayout.prototype.updateGroupBounds=function(){var t,e=[],n=this.model;for(t in n.edgeMapper)for(var i=n.edgeMapper[t],l=0;l<i.edges.length;l++)e.push(i.edges[l]);for(var s=this.graph.getBoundingBoxFromGeometry(e,!0),o=[],l=0;l<this.swimlanes.length;l++){var r,a,h=this.swimlanes[l];null!=(u=this.graph.getCellGeometry(h))&&(d=this.graph.getChildCells(h),p=this.graph.isSwimlane(h)?this.graph.getStartSize(h):new mxRectangle,r=this.graph.getBoundingBoxFromGeometry(d),a=(o[l]=r).y+u.y-p.height-this.parentBorder,r=r.y+u.y+r.height,null==s?s=new mxRectangle(0,a,0,r-a):(s.y=Math.min(s.y,a),a=Math.max(s.y+s.height,r),s.height=a-s.y))}for(l=0;l<this.swimlanes.length;l++){var u,d,p,m,c,g,x,h=this.swimlanes[l];null!=(u=this.graph.getCellGeometry(h))&&(d=this.graph.getChildCells(h),p=this.graph.isSwimlane(h)?this.graph.getStartSize(h):new mxRectangle,m=u.clone(),c=0==l?this.parentBorder:this.interRankCellSpacing/2,c=p.width+c,g=o[l].x-c,x=s.y-this.parentBorder,m.x+=g,m.y=x,m.width=o[l].width+c+this.interRankCellSpacing/2,m.height=s.height+p.height+2*this.parentBorder,this.graph.model.setGeometry(h,m),this.graph.moveCells(d,-g,u.y-x))}},mxSwimlaneLayout.prototype.findRoots=function(t,e){var n=[];if(null!=t&&null!=e){var i,l=this.graph.model,s=null,o=-1e5;for(i in e){var r=e[i];if(null!=r&&l.isVertex(r)&&this.graph.isCellVisible(r)&&l.isAncestor(t,r)){for(var a=this.getEdges(r),h=0,u=0,d=0;d<a.length;d++){var p,m=this.getVisibleTerminal(a[d],!0);m==r?(p=this.getVisibleTerminal(a[d],!1),l.isAncestor(t,p)&&h++):l.isAncestor(t,m)&&u++}0==u&&0<h&&n.push(r);var c=h-u;o<c&&(o=c,s=r)}}0==n.length&&null!=s&&n.push(s)}return n},mxSwimlaneLayout.prototype.getEdges=function(t){var e=this.edgesCache.get(t);if(null!=e)return e;for(var n=this.graph.model,i=[],l=this.graph.isCellCollapsed(t),s=n.getChildCount(t),o=0;o<s;o++){var r=n.getChildAt(t,o);!this.isPort(r)&&!l&&this.graph.isCellVisible(r)||(i=i.concat(n.getEdges(r,!0,!0)))}for(var i=i.concat(n.getEdges(t,!0,!0)),a=[],o=0;o<i.length;o++){var h=this.getVisibleTerminal(i[o],!0),u=this.getVisibleTerminal(i[o],!1);(h==u||h!=u&&(u==t&&(null==this.parent||this.graph.isValidAncestor(h,this.parent,this.traverseAncestors))||h==t&&(null==this.parent||this.graph.isValidAncestor(u,this.parent,this.traverseAncestors))))&&a.push(i[o])}return this.edgesCache.put(t,a),a},mxSwimlaneLayout.prototype.getVisibleTerminal=function(t,e){var n,i=this.edgesTargetTermCache,l=(i=e?this.edgeSourceTermCache:i).get(t);return null!=l?l:(null!=(n=null==(n=null!=(l=this.graph.view.getState(t))?l.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e))?null!=l?l.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e):n)&&(this.isPort(n)&&(n=this.graph.model.getParent(n)),i.put(t,n)),n)},mxSwimlaneLayout.prototype.run=function(t){var e=[],n=Object();if(null!=this.swimlanes&&0<this.swimlanes.length&&null!=t){for(var i=Object(),l=0;l<this.swimlanes.length;l++)this.filterDescendants(this.swimlanes[l],i);this.roots=[];var s=!0;for(h in i)if(null!=i[h]){s=!1;break}for(var o=0;!s&&o<this.swimlanes.length;){var r=this.findRoots(this.swimlanes[o],i);if(0==r.length)o++;else{for(l=0;l<r.length;l++){var a=Object();e.push(a),this.traverse(r[l],!0,null,n,a,e,i,o)}for(l=0;l<r.length;l++)this.roots.push(r[l]);for(h in s=!0,i)if(null!=i[h]){s=!1;break}}}}else for(l=0;l<this.roots.length;l++){a=Object();e.push(a),this.traverse(this.roots[l],!0,null,n,a,e,null)}var h,u=[];for(h in n)u.push(n[h]);this.model=new mxSwimlaneModel(this,u,this.roots,t,this.tightenToSource),this.cycleStage(t),this.layeringStage(),this.crossingStage(t),this.placementStage(0,t)},mxSwimlaneLayout.prototype.filterDescendants=function(t,e){var n=this.graph.model;if(n.isVertex(t)&&t!=this.parent&&n.getParent(t)!=this.parent&&this.graph.isCellVisible(t)&&(e[mxObjectIdentity.get(t)]=t),this.traverseAncestors||t==this.parent&&this.graph.isCellVisible(t))for(var i=n.getChildCount(t),l=0;l<i;l++){var s=n.getChildAt(t,l);this.isPort(s)||this.filterDescendants(s,e)}},mxSwimlaneLayout.prototype.isPort=function(t){return!!t.geometry.relative},mxSwimlaneLayout.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;for(var i=this.getEdges(t),l=[],s=0;s<i.length;s++){var o=this.getVisibleTerminal(i[s],!0),r=this.getVisibleTerminal(i[s],!1);(o==t&&r==e||!n&&o==e&&r==t)&&l.push(i[s])}return l},mxSwimlaneLayout.prototype.traverse=function(t,e,n,i,l,s,o,r){if(null!=t&&null!=i){var a=mxObjectIdentity.get(t);if(null!=i[a]||null!=o&&null==o[a]){if(null==l[a])for(m=0;m<s.length;m++){var h=s[m];if(null!=h[a]){for(var u in h)l[u]=h[u];return s.splice(m,1),l}}}else{null==l[a]&&(l[a]=t),null==i[a]&&(i[a]=t),null!==o&&delete o[a];for(var d=this.getEdges(t),p=this.graph.model,m=0;m<d.length;m++){for(var c=this.getVisibleTerminal(d[m],!0),g=c==t,x=(g&&(c=this.getVisibleTerminal(d[m],!1)),0);x<this.swimlanes.length&&!p.isAncestor(this.swimlanes[x],c);)x++;x>=this.swimlanes.length||(r<x||(!e||g)&&x==r)&&(l=this.traverse(c,e,d[m],i,l,s,o,x))}}}return l},mxSwimlaneLayout.prototype.cycleStage=function(t){new mxSwimlaneOrdering(this).execute(t)},mxSwimlaneLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxSwimlaneLayout.prototype.crossingStage=function(t){new mxMedianHybridCrossingReduction(this).execute(t)},mxSwimlaneLayout.prototype.placementStage=function(t,e){t=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,t,this.parallelEdgeSpacing);return t.fineTuning=this.fineTuning,t.execute(e),t.limitX+this.interHierarchySpacing},__mxOutput.mxSwimlaneLayout=void 0!==mxSwimlaneLayout?mxSwimlaneLayout:void 0,mxGraphModel.prototype=new mxEventSource,mxGraphModel.prototype.constructor=mxGraphModel,mxGraphModel.prototype.root=null,mxGraphModel.prototype.cells=null,mxGraphModel.prototype.maintainEdgeParent=!0,mxGraphModel.prototype.ignoreRelativeEdgeParent=!0,mxGraphModel.prototype.createIds=!0,mxGraphModel.prototype.prefix="",mxGraphModel.prototype.postfix="",mxGraphModel.prototype.nextId=0,mxGraphModel.prototype.currentEdit=null,mxGraphModel.prototype.updateLevel=0,mxGraphModel.prototype.endingUpdate=!1,mxGraphModel.prototype.clear=function(){this.setRoot(this.createRoot())},mxGraphModel.prototype.isCreateIds=function(){return this.createIds},mxGraphModel.prototype.setCreateIds=function(t){this.createIds=t},mxGraphModel.prototype.createRoot=function(){var t=new mxCell;return t.insert(new mxCell),t},mxGraphModel.prototype.getCells=function(){var t=[];if(null!=this.cells)for(var e in this.cells)t.push(this.cells[e]);return t},mxGraphModel.prototype.getCellCount=function(){var t=0;if(null!=this.cells)for(var e in this.cells)t++;return t},mxGraphModel.prototype.getCell=function(t){return null!=this.cells?this.cells[t]:null},mxGraphModel.prototype.filterCells=function(t,e){var n=null;if(null!=t)for(var n=[],i=0;i<t.length;i++)e(t[i])&&n.push(t[i]);return n},mxGraphModel.prototype.getDescendants=function(t){return this.filterDescendants(null,t)},mxGraphModel.prototype.filterDescendants=function(t,e){for(var n=[],i=(e=e||this.getRoot(),null!=t&&!t(e)||n.push(e),this.getChildCount(e)),l=0;l<i;l++)var s=this.getChildAt(e,l),n=n.concat(this.filterDescendants(t,s));return n},mxGraphModel.prototype.getRoot=function(t){var e=t||this.root;if(null!=t)for(;null!=t;)e=t,t=this.getParent(t);return e},mxGraphModel.prototype.setRoot=function(t){return this.execute(new mxRootChange(this,t)),t},mxGraphModel.prototype.rootChanged=function(t){var e=this.root;return this.root=t,this.nextId=0,this.cells=null,this.cellAdded(t),e},mxGraphModel.prototype.isRoot=function(t){return null!=t&&this.root==t},mxGraphModel.prototype.isLayer=function(t){return this.isRoot(this.getParent(t))},mxGraphModel.prototype.isAncestor=function(t,e){for(;null!=e&&e!=t;)e=this.getParent(e);return e==t},mxGraphModel.prototype.contains=function(t){return this.isAncestor(this.root,t)},mxGraphModel.prototype.getParent=function(t){return null!=t?t.getParent():null},mxGraphModel.prototype.add=function(t,e,n){var i;return e!=t&&null!=t&&null!=e&&(null==n&&(n=this.getChildCount(t)),i=t!=this.getParent(e),this.execute(new mxChildChange(this,t,e,n)),this.maintainEdgeParent)&&i&&this.updateEdgeParents(e),e},mxGraphModel.prototype.cellAdded=function(t){if(null!=t){if(null==t.getId()&&this.createIds&&t.setId(this.createId(t)),null!=t.getId()){var e=this.getCell(t.getId());if(e!=t){for(;null!=e;)t.setId(this.createId(t)),e=this.getCell(t.getId());null==this.cells&&(this.cells=new Object),this.cells[t.getId()]=t}}mxUtils.isNumeric(t.getId())&&(this.nextId=Math.max(this.nextId,t.getId()));for(var n=this.getChildCount(t),i=0;i<n;i++)this.cellAdded(this.getChildAt(t,i))}},mxGraphModel.prototype.createId=function(t){var e=this.nextId;return this.nextId++,this.prefix+e+this.postfix},mxGraphModel.prototype.updateEdgeParents=function(t,e){e=e||this.getRoot(t);for(var n=this.getChildCount(t),i=0;i<n;i++){var l=this.getChildAt(t,i);this.updateEdgeParents(l,e)}for(var s=this.getEdgeCount(t),o=[],i=0;i<s;i++)o.push(this.getEdgeAt(t,i));for(i=0;i<o.length;i++){var r=o[i];this.isAncestor(e,r)&&this.updateEdgeParent(r,e)}},mxGraphModel.prototype.updateEdgeParent=function(t,e){for(var n,i,l,s=this.getTerminal(t,!0),o=this.getTerminal(t,!1),r=null;null!=s&&!this.isEdge(s)&&null!=s.geometry&&s.geometry.relative;)s=this.getParent(s);for(;null!=o&&this.ignoreRelativeEdgeParent&&!this.isEdge(o)&&null!=o.geometry&&o.geometry.relative;)o=this.getParent(o);this.isAncestor(e,s)&&this.isAncestor(e,o)&&(null==(r=s==o?this.getParent(s):this.getNearestCommonAncestor(s,o))||this.getParent(r)==this.root&&!this.isAncestor(r,t)||this.getParent(t)==r||(null!=(e=this.getGeometry(t))&&(n=this.getOrigin(this.getParent(t)),i=(l=this.getOrigin(r)).x-n.x,l=l.y-n.y,(e=e.clone()).translate(-i,-l),this.setGeometry(t,e)),this.add(r,t,this.getChildCount(r))))},mxGraphModel.prototype.getOrigin=function(t){var e=null;return null!=t?(e=this.getOrigin(this.getParent(t)),this.isEdge(t)||null!=(t=this.getGeometry(t))&&(e.x+=t.x,e.y+=t.y)):e=new mxPoint,e},mxGraphModel.prototype.getNearestCommonAncestor=function(t,e){if(null!=t&&null!=e&&(null!=(n=mxCellPath.create(e))&&0<n.length)){var n,i=t,l=mxCellPath.create(i);for(n.length<l.length&&(i=e,t=l,l=n,n=t);null!=i;){var s=this.getParent(i);if(0==n.indexOf(l+mxCellPath.PATH_SEPARATOR)&&null!=s)return i;l=mxCellPath.getParentPath(l),i=s}}return null},mxGraphModel.prototype.remove=function(t){return t==this.root?this.setRoot(null):null!=this.getParent(t)&&this.execute(new mxChildChange(this,null,t)),t},mxGraphModel.prototype.cellRemoved=function(t){if(null!=t&&null!=this.cells){for(var e=this.getChildCount(t)-1;0<=e;e--)this.cellRemoved(this.getChildAt(t,e));null!=this.cells&&null!=t.getId()&&delete this.cells[t.getId()]}},mxGraphModel.prototype.parentForCellChanged=function(t,e,n){var i=this.getParent(t),n=(null!=e?e==i&&i.getIndex(t)==n||e.insert(t,n):null!=i&&(n=i.getIndex(t),i.remove(n)),this.contains(e)),e=this.contains(i);return n&&!e?this.cellAdded(t):e&&!n&&this.cellRemoved(t),i},mxGraphModel.prototype.getChildCount=function(t){return null!=t?t.getChildCount():0},mxGraphModel.prototype.getChildAt=function(t,e){return null!=t?t.getChildAt(e):null},mxGraphModel.prototype.getChildren=function(t){return null!=t?t.children:null},mxGraphModel.prototype.getChildVertices=function(t){return this.getChildCells(t,!0,!1)},mxGraphModel.prototype.getChildEdges=function(t){return this.getChildCells(t,!1,!0)},mxGraphModel.prototype.getChildCells=function(t,e,n){e=null!=e&&e,n=null!=n&&n;for(var i=this.getChildCount(t),l=[],s=0;s<i;s++){var o=this.getChildAt(t,s);(!n&&!e||n&&this.isEdge(o)||e&&this.isVertex(o))&&l.push(o)}return l},mxGraphModel.prototype.getTerminal=function(t,e){return null!=t?t.getTerminal(e):null},mxGraphModel.prototype.setTerminal=function(t,e,n){var i=e!=this.getTerminal(t,n);return this.execute(new mxTerminalChange(this,t,e,n)),this.maintainEdgeParent&&i&&this.updateEdgeParent(t,this.getRoot()),e},mxGraphModel.prototype.setTerminals=function(t,e,n){this.beginUpdate();try{this.setTerminal(t,e,!0),this.setTerminal(t,n,!1)}finally{this.endUpdate()}},mxGraphModel.prototype.terminalForCellChanged=function(t,e,n){var i=this.getTerminal(t,n);return null!=e?e.insertEdge(t,n):null!=i&&i.removeEdge(t,n),i},mxGraphModel.prototype.getEdgeCount=function(t){return null!=t?t.getEdgeCount():0},mxGraphModel.prototype.getEdgeAt=function(t,e){return null!=t?t.getEdgeAt(e):null},mxGraphModel.prototype.getDirectedEdgeCount=function(t,e,n){for(var i=0,l=this.getEdgeCount(t),s=0;s<l;s++){var o=this.getEdgeAt(t,s);o!=n&&this.getTerminal(o,e)==t&&i++}return i},mxGraphModel.prototype.getConnections=function(t){return this.getEdges(t,!0,!0,!1)},mxGraphModel.prototype.getIncomingEdges=function(t){return this.getEdges(t,!0,!1,!1)},mxGraphModel.prototype.getOutgoingEdges=function(t){return this.getEdges(t,!1,!0,!1)},mxGraphModel.prototype.getEdges=function(t,e,n,i){e=null==e||e,n=null==n||n,i=null==i||i;for(var l=this.getEdgeCount(t),s=[],o=0;o<l;o++){var r=this.getEdgeAt(t,o),a=this.getTerminal(r,!0),h=this.getTerminal(r,!1);(i&&a==h||a!=h&&(e&&h==t||n&&a==t))&&s.push(r)}return s},mxGraphModel.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;for(var i=this.getEdgeCount(t),l=this.getEdgeCount(e),s=t,o=i,r=(l<i&&(o=l,s=e),[]),a=0;a<o;a++){var h=this.getEdgeAt(s,a),u=this.getTerminal(h,!0),d=this.getTerminal(h,!1);(u==t&&d==e||!n&&(d==t&&u==e))&&r.push(h)}return r},mxGraphModel.prototype.getOpposites=function(t,e,n,i){n=null==n||n,i=null==i||i;var l=[];if(null!=t)for(var s=0;s<t.length;s++){var o=this.getTerminal(t[s],!0),r=this.getTerminal(t[s],!1);o==e&&null!=r&&r!=e&&i?l.push(r):r==e&&null!=o&&o!=e&&n&&l.push(o)}return l},mxGraphModel.prototype.getTopmostCells=function(t){for(var e=new mxDictionary,n=[],i=0;i<t.length;i++)e.put(t[i],!0);for(i=0;i<t.length;i++){for(var l=t[i],s=!0,o=this.getParent(l);null!=o;){if(e.get(o)){s=!1;break}o=this.getParent(o)}s&&n.push(l)}return n},mxGraphModel.prototype.isVertex=function(t){return null!=t&&t.isVertex()},mxGraphModel.prototype.isEdge=function(t){return null!=t&&t.isEdge()},mxGraphModel.prototype.isConnectable=function(t){return null!=t&&t.isConnectable()},mxGraphModel.prototype.getValue=function(t){return null!=t?t.getValue():null},mxGraphModel.prototype.setValue=function(t,e){return this.execute(new mxValueChange(this,t,e)),e},mxGraphModel.prototype.valueForCellChanged=function(t,e){return t.valueChanged(e)},mxGraphModel.prototype.getGeometry=function(t){return null!=t?t.getGeometry():null},mxGraphModel.prototype.setGeometry=function(t,e){return e!=this.getGeometry(t)&&this.execute(new mxGeometryChange(this,t,e)),e},mxGraphModel.prototype.geometryForCellChanged=function(t,e){var n=this.getGeometry(t);return t.setGeometry(e),n},mxGraphModel.prototype.getStyle=function(t){return null!=t?t.getStyle():null},mxGraphModel.prototype.setStyle=function(t,e){return e!=this.getStyle(t)&&this.execute(new mxStyleChange(this,t,e)),e},mxGraphModel.prototype.styleForCellChanged=function(t,e){var n=this.getStyle(t);return t.setStyle(e),n},mxGraphModel.prototype.isCollapsed=function(t){return null!=t&&t.isCollapsed()},mxGraphModel.prototype.setCollapsed=function(t,e){return e!=this.isCollapsed(t)&&this.execute(new mxCollapseChange(this,t,e)),e},mxGraphModel.prototype.collapsedStateForCellChanged=function(t,e){var n=this.isCollapsed(t);return t.setCollapsed(e),n},mxGraphModel.prototype.isVisible=function(t){return null!=t&&t.isVisible()},mxGraphModel.prototype.setVisible=function(t,e){return e!=this.isVisible(t)&&this.execute(new mxVisibleChange(this,t,e)),e},mxGraphModel.prototype.visibleStateForCellChanged=function(t,e){var n=this.isVisible(t);return t.setVisible(e),n},mxGraphModel.prototype.execute=function(t){t.execute(),this.beginUpdate(),this.currentEdit.add(t),this.fireEvent(new mxEventObject(mxEvent.EXECUTE,"change",t)),this.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",t)),this.endUpdate()},mxGraphModel.prototype.beginUpdate=function(){this.updateLevel++,this.fireEvent(new mxEventObject(mxEvent.BEGIN_UPDATE)),1==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.START_EDIT))},mxGraphModel.prototype.endUpdate=function(){if(this.updateLevel--,0==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.END_EDIT)),!this.endingUpdate){this.endingUpdate=0==this.updateLevel,this.fireEvent(new mxEventObject(mxEvent.END_UPDATE,"edit",this.currentEdit));try{var t;this.endingUpdate&&!this.currentEdit.isEmpty()&&(this.fireEvent(new mxEventObject(mxEvent.BEFORE_UNDO,"edit",this.currentEdit)),t=this.currentEdit,this.currentEdit=this.createUndoableEdit(),t.notify(),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",t)))}finally{this.endingUpdate=!1}}},mxGraphModel.prototype.createUndoableEdit=function(t){var e=new mxUndoableEdit(this,null==t||t);return e.notify=function(){e.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",e,"changes",e.changes)),e.source.fireEvent(new mxEventObject(mxEvent.NOTIFY,"edit",e,"changes",e.changes))},e},mxGraphModel.prototype.mergeChildren=function(t,e,n){n=null==n||n,this.beginUpdate();try{var i,l=new Object;for(i in this.mergeChildrenImpl(t,e,n,l),l){var s=l[i],o=this.getTerminal(s,!0);null!=o&&(o=l[mxCellPath.create(o)],this.setTerminal(s,o,!0)),null!=(o=this.getTerminal(s,!1))&&(o=l[mxCellPath.create(o)],this.setTerminal(s,o,!1))}}finally{this.endUpdate()}},mxGraphModel.prototype.mergeChildrenImpl=function(t,e,n,i){this.beginUpdate();try{for(var l=t.getChildCount(),s=0;s<l;s++){var o,r,a,h=t.getChildAt(s);"function"==typeof h.getId&&(null==(r=null==(o=h.getId())||this.isEdge(h)&&n?null:this.getCell(o))&&((a=h.clone()).setId(o),a.setTerminal(h.getTerminal(!0),!0),a.setTerminal(h.getTerminal(!1),!1),r=e.insert(a),this.cellAdded(r)),i[mxCellPath.create(h)]=r,this.mergeChildrenImpl(h,r,n,i))}}finally{this.endUpdate()}},mxGraphModel.prototype.getParents=function(t){var e=[];if(null!=t)for(var n=new mxDictionary,i=0;i<t.length;i++){var l=this.getParent(t[i]);null==l||n.get(l)||(n.put(l,!0),e.push(l))}return e},mxGraphModel.prototype.cloneCell=function(t,e,n){return null!=t?this.cloneCells([t],e,null,n)[0]:null},mxGraphModel.prototype.cloneCells=function(t,e,n,i){e=null==e||e,n=null!=n?n:new Object,i=null!=i&&i;for(var l=[],s=0;s<t.length;s++)null!=t[s]?l.push(this.cloneCellImpl(t[s],n,e,i)):l.push(null);for(s=0;s<l.length;s++)null!=l[s]&&this.restoreClone(l[s],t[s],n);return l},mxGraphModel.prototype.cloneCellImpl=function(t,e,n,i){var l=mxObjectIdentity.get(t),s=e[l];if(null==s&&(s=this.cellCloned(t),e[l]=s,i&&(s.id=t.id),n))for(var o=this.getChildCount(t),r=0;r<o;r++){var a=this.cloneCellImpl(this.getChildAt(t,r),e,!0,i);s.insert(a)}return s},mxGraphModel.prototype.cellCloned=function(t){return t.clone()},mxGraphModel.prototype.restoreClone=function(t,e,n){for(var i,l=this.getTerminal(e,!0),l=(null!=l&&null!=(i=n[mxObjectIdentity.get(l)])&&i.insertEdge(t,!0),this.getTerminal(e,!1)),s=(null!=l&&null!=(i=n[mxObjectIdentity.get(l)])&&i.insertEdge(t,!1),this.getChildCount(t)),o=0;o<s;o++)this.restoreClone(this.getChildAt(t,o),this.getChildAt(e,o),n)},mxRootChange.prototype.execute=function(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)},mxChildChange.prototype.execute=function(){var t,e;null!=this.child&&(e=null!=(t=this.model.getParent(this.child))?t.getIndex(this.child):0,null==this.previous&&this.connect(this.child,!1),t=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),null!=this.previous&&this.connect(this.child,!0),this.parent=this.previous,this.previous=t,this.index=this.previousIndex,this.previousIndex=e)},mxChildChange.prototype.connect=function(t,e){e=null==e||e;for(var n=t.getTerminal(!0),i=t.getTerminal(!1),l=(null!=n&&(e?this.model.terminalForCellChanged(t,n,!0):this.model.terminalForCellChanged(t,null,!0)),null!=i&&(e?this.model.terminalForCellChanged(t,i,!1):this.model.terminalForCellChanged(t,null,!1)),t.setTerminal(n,!0),t.setTerminal(i,!1),this.model.getChildCount(t)),s=0;s<l;s++)this.connect(this.model.getChildAt(t,s),e)},mxTerminalChange.prototype.execute=function(){null!=this.cell&&(this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source))},mxValueChange.prototype.execute=function(){null!=this.cell&&(this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous))},mxStyleChange.prototype.execute=function(){null!=this.cell&&(this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous))},mxGeometryChange.prototype.execute=function(){null!=this.cell&&(this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous))},mxCollapseChange.prototype.execute=function(){null!=this.cell&&(this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous))},mxVisibleChange.prototype.execute=function(){null!=this.cell&&(this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous))},mxCellAttributeChange.prototype.execute=function(){var t;null!=this.cell&&(t=this.cell.getAttribute(this.attribute),null==this.previous?this.cell.value.removeAttribute(this.attribute):this.cell.setAttribute(this.attribute,this.previous),this.previous=t)},__mxOutput.mxGraphModel=void 0!==mxGraphModel?mxGraphModel:void 0,mxCell.prototype.id=null,mxCell.prototype.value=null,mxCell.prototype.geometry=null,mxCell.prototype.style=null,mxCell.prototype.vertex=!1,mxCell.prototype.edge=!1,mxCell.prototype.connectable=!0,mxCell.prototype.visible=!0,mxCell.prototype.collapsed=!1,mxCell.prototype.parent=null,mxCell.prototype.source=null,mxCell.prototype.target=null,mxCell.prototype.children=null,mxCell.prototype.edges=null,mxCell.prototype.mxTransient=["id","value","parent","source","target","children","edges"],mxCell.prototype.getId=function(){return this.id},mxCell.prototype.setId=function(t){this.id=t},mxCell.prototype.getValue=function(){return this.value},mxCell.prototype.setValue=function(t){this.value=t},mxCell.prototype.valueChanged=function(t){var e=this.getValue();return this.setValue(t),e},mxCell.prototype.getGeometry=function(){return this.geometry},mxCell.prototype.setGeometry=function(t){this.geometry=t},mxCell.prototype.getStyle=function(){return this.style},mxCell.prototype.setStyle=function(t){this.style=t},mxCell.prototype.isVertex=function(){return 0!=this.vertex},mxCell.prototype.setVertex=function(t){this.vertex=t},mxCell.prototype.isEdge=function(){return 0!=this.edge},mxCell.prototype.setEdge=function(t){this.edge=t},mxCell.prototype.isConnectable=function(){return 0!=this.connectable},mxCell.prototype.setConnectable=function(t){this.connectable=t},mxCell.prototype.isVisible=function(){return 0!=this.visible},mxCell.prototype.setVisible=function(t){this.visible=t},mxCell.prototype.isCollapsed=function(){return 0!=this.collapsed},mxCell.prototype.setCollapsed=function(t){this.collapsed=t},mxCell.prototype.getParent=function(){return this.parent},mxCell.prototype.setParent=function(t){this.parent=t},mxCell.prototype.getTerminal=function(t){return t?this.source:this.target},mxCell.prototype.setTerminal=function(t,e){return e?this.source=t:this.target=t,t},mxCell.prototype.getChildCount=function(){return null==this.children?0:this.children.length},mxCell.prototype.getIndex=function(t){return mxUtils.indexOf(this.children,t)},mxCell.prototype.getChildAt=function(t){return null==this.children?null:this.children[t]},mxCell.prototype.insert=function(t,e){return null!=t&&(null==e&&(e=this.getChildCount(),t.getParent()==this)&&e--,t.removeFromParent(),t.setParent(this),null==this.children?(this.children=[],this.children.push(t)):this.children.splice(e,0,t)),t},mxCell.prototype.remove=function(t){var e=null;return null!=this.children&&0<=t&&null!=(e=this.getChildAt(t))&&(this.children.splice(t,1),e.setParent(null)),e},mxCell.prototype.removeFromParent=function(){var t;null!=this.parent&&(t=this.parent.getIndex(this),this.parent.remove(t))},mxCell.prototype.getEdgeCount=function(){return null==this.edges?0:this.edges.length},mxCell.prototype.getEdgeIndex=function(t){return mxUtils.indexOf(this.edges,t)},mxCell.prototype.getEdgeAt=function(t){return null==this.edges?null:this.edges[t]},mxCell.prototype.insertEdge=function(t,e){return null!=t&&(t.removeFromTerminal(e),t.setTerminal(this,e),null==this.edges||t.getTerminal(!e)!=this||mxUtils.indexOf(this.edges,t)<0)&&(null==this.edges&&(this.edges=[]),this.edges.push(t)),t},mxCell.prototype.removeEdge=function(t,e){var n;return null!=t&&(t.getTerminal(!e)!=this&&null!=this.edges&&0<=(n=this.getEdgeIndex(t))&&this.edges.splice(n,1),t.setTerminal(null,e)),t},mxCell.prototype.removeFromTerminal=function(t){var e=this.getTerminal(t);null!=e&&e.removeEdge(this,t)},mxCell.prototype.hasAttribute=function(t){var e=this.getValue();return null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT&&e.hasAttribute?e.hasAttribute(t):null!=e.getAttribute(t)},mxCell.prototype.getAttribute=function(t,e){var n=this.getValue(),n=null!=n&&n.nodeType==mxConstants.NODETYPE_ELEMENT?n.getAttribute(t):null;return null!=n?n:e},mxCell.prototype.setAttribute=function(t,e){var n=this.getValue();null!=n&&n.nodeType==mxConstants.NODETYPE_ELEMENT&&n.setAttribute(t,e)},mxCell.prototype.clone=function(){var t=mxUtils.clone(this,this.mxTransient);return t.setValue(this.cloneValue()),t},mxCell.prototype.cloneValue=function(t){return null!=(t=null!=t?t:this.getValue())&&("function"==typeof t.clone?t=t.clone():isNaN(t.nodeType)||(t=t.cloneNode(!0))),t},__mxOutput.mxCell=void 0!==mxCell?mxCell:void 0,mxGeometry.prototype=new mxRectangle,mxGeometry.prototype.constructor=mxGeometry,mxGeometry.prototype.TRANSLATE_CONTROL_POINTS=!0,mxGeometry.prototype.alternateBounds=null,mxGeometry.prototype.sourcePoint=null,mxGeometry.prototype.targetPoint=null,mxGeometry.prototype.points=null,mxGeometry.prototype.offset=null,mxGeometry.prototype.relative=!1,mxGeometry.prototype.swap=function(){var t;null!=this.alternateBounds&&(t=new mxRectangle(this.x,this.y,this.width,this.height),this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=t)},mxGeometry.prototype.getTerminalPoint=function(t){return t?this.sourcePoint:this.targetPoint},mxGeometry.prototype.setTerminalPoint=function(t,e){return e?this.sourcePoint=t:this.targetPoint=t,t},mxGeometry.prototype.rotate=function(t,e){var t=mxUtils.toRadians(t),n=Math.cos(t),i=Math.sin(t);if(this.relative||(t=new mxPoint(this.getCenterX(),this.getCenterY()),l=mxUtils.getRotatedPoint(t,n,i,e),this.x=Math.round(l.x-this.width/2),this.y=Math.round(l.y-this.height/2)),null!=this.sourcePoint&&(l=mxUtils.getRotatedPoint(this.sourcePoint,n,i,e),this.sourcePoint.x=Math.round(l.x),this.sourcePoint.y=Math.round(l.y)),null!=this.targetPoint&&(l=mxUtils.getRotatedPoint(this.targetPoint,n,i,e),this.targetPoint.x=Math.round(l.x),this.targetPoint.y=Math.round(l.y)),null!=this.points)for(var l,s=0;s<this.points.length;s++)null!=this.points[s]&&(l=mxUtils.getRotatedPoint(this.points[s],n,i,e),this.points[s].x=Math.round(l.x),this.points[s].y=Math.round(l.y))},mxGeometry.prototype.translate=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),this.relative||n||(this.x=parseFloat(this.x)+t,this.y=parseFloat(this.y)+e),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)+t,this.sourcePoint.y=parseFloat(this.sourcePoint.y)+e),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)+t,this.targetPoint.y=parseFloat(this.targetPoint.y)+e),this.TRANSLATE_CONTROL_POINTS&&null!=this.points)for(var i=0;i<this.points.length;i++)null!=this.points[i]&&(this.points[i].x=parseFloat(this.points[i].x)+t,this.points[i].y=parseFloat(this.points[i].y)+e)},mxGeometry.prototype.scale=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)*t,this.sourcePoint.y=parseFloat(this.sourcePoint.y)*e),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)*t,this.targetPoint.y=parseFloat(this.targetPoint.y)*e),null!=this.points)for(var i=0;i<this.points.length;i++)null!=this.points[i]&&(this.points[i].x=parseFloat(this.points[i].x)*t,this.points[i].y=parseFloat(this.points[i].y)*e);this.relative||(this.x=parseFloat(this.x)*t,this.y=parseFloat(this.y)*e,n&&(e=t=Math.min(t,e)),this.width=parseFloat(this.width)*t,this.height=parseFloat(this.height)*e)},mxGeometry.prototype.equals=function(t){return mxRectangle.prototype.equals.apply(this,arguments)&&this.relative==t.relative&&(null==this.sourcePoint&&null==t.sourcePoint||null!=this.sourcePoint&&this.sourcePoint.equals(t.sourcePoint))&&(null==this.targetPoint&&null==t.targetPoint||null!=this.targetPoint&&this.targetPoint.equals(t.targetPoint))&&(null==this.points&&null==t.points||null!=this.points&&mxUtils.equalPoints(this.points,t.points))&&(null==this.alternateBounds&&null==t.alternateBounds||null!=this.alternateBounds&&this.alternateBounds.equals(t.alternateBounds))&&(null==this.offset&&null==t.offset||null!=this.offset&&this.offset.equals(t.offset))},__mxOutput.mxGeometry=void 0!==mxGeometry?mxGeometry:void 0;var mxCellPath={PATH_SEPARATOR:".",create:function(t){var e="";if(null!=t)for(var n=t.getParent();null!=n;)e=n.getIndex(t)+mxCellPath.PATH_SEPARATOR+e,n=(t=n).getParent();var i=e.length;return e=1<i?e.substring(0,i-1):e},getParentPath:function(t){if(null!=t){var e=t.lastIndexOf(mxCellPath.PATH_SEPARATOR);if(0<=e)return t.substring(0,e);if(0<t.length)return""}return null},resolve:function(t,e){var n=t;if(null!=e)for(var i=e.split(mxCellPath.PATH_SEPARATOR),l=0;l<i.length;l++)n=n.getChildAt(parseInt(i[l]));return n},compare:function(t,e){for(var n,i,l=Math.min(t.length,e.length),s=0,o=0;o<l;o++)if(t[o]!=e[o]){s=0==t[o].length||0==e[o].length?t[o]==e[o]?0:t[o]>e[o]?1:-1:(n=parseInt(t[o]))==(i=parseInt(e[o]))?0:i<n?1:-1;break}return s=0==s&&(n=t.length)!=(i=e.length)?i<n?1:-1:s}},mxPerimeter=(__mxOutput.mxCellPath=void 0!==mxCellPath?mxCellPath:void 0,{RectanglePerimeter:function(t,e,n,i){var l=t.getCenterX(),s=t.getCenterY(),o=n.x-l,r=n.y-s,r=Math.atan2(r,o),o=new mxPoint(0,0),a=Math.PI,h=Math.PI/2-r,u=Math.atan2(t.height,t.width);return r<-a+u||a-u<r?(o.x=t.x,o.y=s-t.width*Math.tan(r)/2):r<-u?(o.y=t.y,o.x=l-t.height*Math.tan(h)/2):r<u?(o.x=t.x+t.width,o.y=s+t.width*Math.tan(r)/2):(o.y=t.y+t.height,o.x=l+t.height*Math.tan(h)/2),i&&(n.x>=t.x&&n.x<=t.x+t.width?o.x=n.x:n.y>=t.y&&n.y<=t.y+t.height&&(o.y=n.y),n.x<t.x?o.x=t.x:n.x>t.x+t.width&&(o.x=t.x+t.width),n.y<t.y?o.y=t.y:n.y>t.y+t.height&&(o.y=t.y+t.height)),o},EllipsePerimeter:function(t,e,n,i){var l=t.x,s=t.y,o=t.width/2,r=t.height/2,a=l+o,h=s+r,u=n.x,n=n.y,d=parseInt(u-a),p=parseInt(n-h);if(0==d&&0!=p)return new mxPoint(a,h+r*p/Math.abs(p));if(0==d&&0==p)return new mxPoint(u,n);if(i){if(s<=n&&n<=s+t.height)return c=n-h,m=Math.sqrt(o*o*(1-c*c/(r*r)))||0,new mxPoint(a+(m=u<=l?-m:m),n);if(l<=u&&u<=l+t.width)return m=u-a,c=Math.sqrt(r*r*(1-m*m/(o*o)))||0,new mxPoint(u,h+(c=n<=s?-c:c))}var i=p/d,l=h-i*a,t=o*o*i*i+r*r,m=-2*a*t,s=Math.sqrt(m*m-4*t*(o*o*i*i*a*a+r*r*a*a-o*o*r*r)),c=(-m+s)/(2*t),p=(-m-s)/(2*t),d=i*c+l,h=i*p+l,a=0,o=0,o=Math.sqrt(Math.pow(c-u,2)+Math.pow(d-n,2))<Math.sqrt(Math.pow(p-u,2)+Math.pow(h-n,2))?(a=c,d):(a=p,h);return new mxPoint(a,o)},RhombusPerimeter:function(t,e,n,i){var l,s,o=t.x,r=t.y,a=t.width,t=t.height,h=o+a/2,u=r+t/2,d=n.x,n=n.y;return h==d?new mxPoint(h,n<u?r:r+t):u==n?new mxPoint(d<h?o:o+a,u):(l=h,s=u,i&&(o<=d&&d<=o+a?l=d:r<=n&&n<=r+t&&(s=n)),d<h?n<u?mxUtils.intersection(d,n,l,s,h,r,o,u):mxUtils.intersection(d,n,l,s,h,r+t,o,u):n<u?mxUtils.intersection(d,n,l,s,h,r,o+a,u):mxUtils.intersection(d,n,l,s,h,r+t,o+a,u))},TrianglePerimeter:function(t,e,n,i){var e=null!=e?e.style[mxConstants.STYLE_DIRECTION]:null,l=e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH,s=t.x,o=t.y,r=t.width,t=t.height,a=s+r/2,h=o+t/2,u=new mxPoint(s,o),d=new mxPoint(s+r,h),p=new mxPoint(s,o+t),m=(e==mxConstants.DIRECTION_NORTH?(u=p,d=new mxPoint(a,o),p=new mxPoint(s+r,o+t)):e==mxConstants.DIRECTION_SOUTH?(d=new mxPoint(a,o+t),p=new mxPoint(s+r,o)):e==mxConstants.DIRECTION_WEST&&(u=new mxPoint(s+r,o),d=new mxPoint(s,h),p=new mxPoint(s+r,o+t)),n.x-a),c=n.y-h,c=l?Math.atan2(m,c):Math.atan2(c,m),m=l?Math.atan2(r,t):Math.atan2(t,r),g=null;return g=null==(g=(e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_WEST?-m<c&&c<m:c<-Math.PI+m||c>Math.PI-m)?i&&(l&&n.x>=u.x&&n.x<=p.x||!l&&n.y>=u.y&&n.y<=p.y)?l?new mxPoint(n.x,u.y):new mxPoint(u.x,n.y):e==mxConstants.DIRECTION_NORTH?new mxPoint(s+r/2+t*Math.tan(c)/2,o+t):e==mxConstants.DIRECTION_SOUTH?new mxPoint(s+r/2-t*Math.tan(c)/2,o):e==mxConstants.DIRECTION_WEST?new mxPoint(s+r,o+t/2+r*Math.tan(c)/2):new mxPoint(s,o+t/2-r*Math.tan(c)/2):(i&&(m=new mxPoint(a,h),n.y>=o&&n.y<=o+t?(m.x=l?a:e==mxConstants.DIRECTION_WEST?s+r:s,m.y=n.y):n.x>=s&&n.x<=s+r&&(m.x=n.x,m.y=l?e==mxConstants.DIRECTION_NORTH?o+t:o:h),n.x,m.x,n.y,m.y,a=m.x,h=m.y),l&&n.x<=s+r/2||!l&&n.y<=o+t/2?mxUtils.intersection(n.x,n.y,a,h,u.x,u.y,d.x,d.y):mxUtils.intersection(n.x,n.y,a,h,d.x,d.y,p.x,p.y)))?new mxPoint(a,h):g},HexagonPerimeter:function(t,e,n,i){var l,s=t.x,o=t.y,r=t.width,a=t.height,h=t.getCenterX(),t=t.getCenterY(),u=n.x,d=n.y,p=-Math.atan2(d-t,u-h),m=Math.PI,c=Math.PI/2,g=new mxPoint(h,t),e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,e=e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH,x=new mxPoint,y=new mxPoint;if(i=u<s&&d<o||u<s&&o+a<d||s+r<u&&d<o||s+r<u&&o+a<d?!1:i){if(e){if(u==h){if(d<=o)return new mxPoint(h,o);if(o+a<=d)return new mxPoint(h,o+a)}else if(u<s){if(d==o+a/4)return new mxPoint(s,o+a/4);if(d==o+3*a/4)return new mxPoint(s,o+3*a/4)}else if(s+r<u){if(d==o+a/4)return new mxPoint(s+r,o+a/4);if(d==o+3*a/4)return new mxPoint(s+r,o+3*a/4)}else if(u==s){if(d<t)return new mxPoint(s,o+a/4);if(t<d)return new mxPoint(s,o+3*a/4)}else if(u==s+r){if(d<t)return new mxPoint(s+r,o+a/4);if(t<d)return new mxPoint(s+r,o+3*a/4)}if(d==o)return new mxPoint(h,o);if(d==o+a)return new mxPoint(h,o+a);u<h?o+a/4<d&&d<o+3*a/4?(x=new mxPoint(s,o),y=new mxPoint(s,o+a)):d<o+a/4?(x=new mxPoint(s-Math.floor(.5*r),o+Math.floor(.5*a)),y=new mxPoint(s+r,o-Math.floor(.25*a))):o+3*a/4<d&&(x=new mxPoint(s-Math.floor(.5*r),o+Math.floor(.5*a)),y=new mxPoint(s+r,o+Math.floor(1.25*a))):h<u&&(o+a/4<d&&d<o+3*a/4?(x=new mxPoint(s+r,o),y=new mxPoint(s+r,o+a)):d<o+a/4?(x=new mxPoint(s,o-Math.floor(.25*a)),y=new mxPoint(s+Math.floor(1.5*r),o+Math.floor(.5*a))):o+3*a/4<d&&(x=new mxPoint(s+Math.floor(1.5*r),o+Math.floor(.5*a)),y=new mxPoint(s,o+Math.floor(1.25*a))))}else{if(d==t){if(u<=s)return new mxPoint(s,o+a/2);if(s+r<=u)return new mxPoint(s+r,o+a/2)}else if(d<o){if(u==s+r/4)return new mxPoint(s+r/4,o);if(u==s+3*r/4)return new mxPoint(s+3*r/4,o)}else if(o+a<d){if(u==s+r/4)return new mxPoint(s+r/4,o+a);if(u==s+3*r/4)return new mxPoint(s+3*r/4,o+a)}else if(d==o){if(u<h)return new mxPoint(s+r/4,o);if(h<u)return new mxPoint(s+3*r/4,o)}else if(d==o+a){if(u<h)return new mxPoint(s+r/4,o+a);if(t<d)return new mxPoint(s+3*r/4,o+a)}if(u==s)return new mxPoint(s,t);if(u==s+r)return new mxPoint(s+r,t);d<t?s+r/4<u&&u<s+3*r/4?(x=new mxPoint(s,o),y=new mxPoint(s+r,o)):u<s+r/4?(x=new mxPoint(s-Math.floor(.25*r),o+a),y=new mxPoint(s+Math.floor(.5*r),o-Math.floor(.5*a))):s+3*r/4<u&&(x=new mxPoint(s+Math.floor(.5*r),o-Math.floor(.5*a)),y=new mxPoint(s+Math.floor(1.25*r),o+a)):t<d&&(s+r/4<u&&u<s+3*r/4?(x=new mxPoint(s,o+a),y=new mxPoint(s+r,o+a)):u<s+r/4?(x=new mxPoint(s-Math.floor(.25*r),o),y=new mxPoint(s+Math.floor(.5*r),o+Math.floor(1.5*a))):s+3*r/4<u&&(x=new mxPoint(s+Math.floor(.5*r),o+Math.floor(1.5*a)),y=new mxPoint(s+Math.floor(1.25*r),o)))}var i=h,C=t;s<=u&&u<=s+r?(i=u,C=d<t?o+a:o):o<=d&&d<=o+a&&(C=d,i=u<h?s+r:s),g=mxUtils.intersection(i,C,n.x,n.y,x.x,x.y,y.x,y.y)}else{if(e){if(p==(l=Math.atan2(a/4,r/2)))return new mxPoint(s+r,o+Math.floor(.25*a));if(p==c)return new mxPoint(s+Math.floor(.5*r),o);if(p==m-l)return new mxPoint(s,o+Math.floor(.25*a));if(p==-l)return new mxPoint(s+r,o+Math.floor(.75*a));if(p==-c)return new mxPoint(s+Math.floor(.5*r),o+a);if(p==-m+l)return new mxPoint(s,o+Math.floor(.75*a));p<l&&-l<p?(x=new mxPoint(s+r,o),y=new mxPoint(s+r,o+a)):l<p&&p<c?(x=new mxPoint(s,o-Math.floor(.25*a)),y=new mxPoint(s+Math.floor(1.5*r),o+Math.floor(.5*a))):c<p&&p<m-l?(x=new mxPoint(s-Math.floor(.5*r),o+Math.floor(.5*a)),y=new mxPoint(s+r,o-Math.floor(.25*a))):m-l<p&&p<=m||p<-m+l&&-m<=p?(x=new mxPoint(s,o),y=new mxPoint(s,o+a)):p<-l&&-c<p?(x=new mxPoint(s+Math.floor(1.5*r),o+Math.floor(.5*a)),y=new mxPoint(s,o+Math.floor(1.25*a))):p<-c&&-m+l<p&&(x=new mxPoint(s-Math.floor(.5*r),o+Math.floor(.5*a)),y=new mxPoint(s+r,o+Math.floor(1.25*a)))}else{if(p==(l=Math.atan2(a/2,r/4)))return new mxPoint(s+Math.floor(.75*r),o);if(p==m-l)return new mxPoint(s+Math.floor(.25*r),o);if(p==m||p==-m)return new mxPoint(s,o+Math.floor(.5*a));if(0==p)return new mxPoint(s+r,o+Math.floor(.5*a));if(p==-l)return new mxPoint(s+Math.floor(.75*r),o+a);if(p==-m+l)return new mxPoint(s+Math.floor(.25*r),o+a);0<p&&p<l?(x=new mxPoint(s+Math.floor(.5*r),o-Math.floor(.5*a)),y=new mxPoint(s+Math.floor(1.25*r),o+a)):l<p&&p<m-l?(x=new mxPoint(s,o),y=new mxPoint(s+r,o)):m-l<p&&p<m?(x=new mxPoint(s-Math.floor(.25*r),o+a),y=new mxPoint(s+Math.floor(.5*r),o-Math.floor(.5*a))):p<0&&-l<p?(x=new mxPoint(s+Math.floor(.5*r),o+Math.floor(1.5*a)),y=new mxPoint(s+Math.floor(1.25*r),o)):p<-l&&-m+l<p?(x=new mxPoint(s,o+a),y=new mxPoint(s+r,o+a)):p<-m+l&&-m<p&&(x=new mxPoint(s-Math.floor(.25*r),o),y=new mxPoint(s+Math.floor(.5*r),o+Math.floor(1.5*a)))}g=mxUtils.intersection(h,t,n.x,n.y,x.x,x.y,y.x,y.y)}return null==g?new mxPoint(h,t):g}});function mxPrintPreview(t,e,n,i,l,s,o,r,a){this.graph=t,this.scale=null!=e?e:1/t.pageScale,this.border=null!=i?i:0,this.pageFormat=mxRectangle.fromRectangle(null!=n?n:t.pageFormat),this.title=null!=r?r:"Printer-friendly version",this.x0=null!=l?l:0,this.y0=null!=s?s:0,this.borderColor=o,this.pageSelector=null==a||a}function mxStylesheet(){this.styles=new Object,this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}function mxCellState(t,e,n){this.view=t,this.cell=e,this.style=null!=n?n:{},this.origin=new mxPoint,this.absoluteOffset=new mxPoint}function mxGraphSelectionModel(t){this.graph=t,this.cells=[]}function mxSelectionChange(t,e,n){this.selectionModel=t,this.added=null!=e?e.slice():null,this.removed=null!=n?n.slice():null}function mxCellEditor(t){this.graph=t,this.zoomHandler=mxUtils.bind(this,function(){this.graph.isEditing()&&this.resize()}),null!=this.graph.container&&mxEvent.addListener(this.graph.container,"scroll",this.zoomHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.zoomHandler),this.graph.view.addListener(mxEvent.SCALE,this.zoomHandler),this.changeHandler=mxUtils.bind(this,function(t){var e;null!=this.editingCell&&(null==(e=this.graph.getView().getState(this.editingCell))?this.stopEditing(!0):this.updateTextAreaStyle(e))}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)}function mxCellRenderer(){}__mxOutput.mxPerimeter=void 0!==mxPerimeter?mxPerimeter:void 0,mxPrintPreview.prototype.graph=null,mxPrintPreview.prototype.pageFormat=null,mxPrintPreview.prototype.addPageCss=!1,mxPrintPreview.prototype.pixelsPerInch=100,mxPrintPreview.prototype.pageMargin=27,mxPrintPreview.prototype.overflowClipMargin="1px",mxPrintPreview.prototype.gridSize=null,mxPrintPreview.prototype.gridSteps=null,mxPrintPreview.prototype.gridColor=null,mxPrintPreview.prototype.gridStrokeWidth=.5,mxPrintPreview.prototype.defaultCss='g[style*="filter: drop-shadow("] {\n  filter: none !important;\n}\n@media screen {\n  body {\n    background: gray;\n    transform: scale(0.7);\n    transform-origin: 0 0;\n  }\n  body > div {\n    margin-bottom: 20px;\n    box-sizing: border-box;\n  }\n  a, a * {\n    pointer-events: none;\n  }\n}\n@media print {\n  body {\n    margin: 0px;\n  }\n  * {\n    -webkit-print-color-adjust: exact;\n  }\n}',mxPrintPreview.prototype.scale=null,mxPrintPreview.prototype.border=0,mxPrintPreview.prototype.marginTop=0,mxPrintPreview.prototype.marginBottom=0,mxPrintPreview.prototype.x0=0,mxPrintPreview.prototype.y0=0,mxPrintPreview.prototype.autoOrigin=!0,mxPrintPreview.prototype.printOverlays=!1,mxPrintPreview.prototype.printControls=!1,mxPrintPreview.prototype.printBackgroundImage=!1,mxPrintPreview.prototype.backgroundColor="#ffffff",mxPrintPreview.prototype.borderColor=null,mxPrintPreview.prototype.title=null,mxPrintPreview.prototype.pageSelector=null,mxPrintPreview.prototype.wnd=null,mxPrintPreview.prototype.targetWindow=null,mxPrintPreview.prototype.pageCount=0,mxPrintPreview.prototype.clipping=!0,mxPrintPreview.prototype.getWindow=function(){return this.wnd},mxPrintPreview.prototype.getDoctype=function(){var t="";return 8==document.documentMode?t='<meta http-equiv="X-UA-Compatible" content="IE=8">':8<document.documentMode&&(t='\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--\x3e'),t},mxPrintPreview.prototype.appendGraph=function(t,e,n,i,l,s,o,r,a){this.graph=t,this.scale=null!=e?e:1/t.pageScale,this.x0=n,this.y0=i,this.open(null,null,l,s,o,r,a)},mxPrintPreview.prototype.getPageClassCss=function(t,e){var n=this.pageMargin,i=this.pixelsPerInch,l=(e.width/i).toFixed(2)+"in "+(e.height/i).toFixed(2)+"in",l="@page "+t+" {\n  margin: 0;\n  size: "+mxUtils.htmlEntities(l)+";\n}\n."+t+" {\n  page: "+t+";\n"+(mxClient.IS_SF?"  padding: "+mxUtils.htmlEntities((n/i).toFixed(2))+"in;\n":"")+"  width: "+mxUtils.htmlEntities((e.width/i).toFixed(2))+"in;\n  height: "+mxUtils.htmlEntities((e.height/i).toFixed(2))+"in;\n}\n";return mxClient.IS_SF||(l+="."+t+" > svg {\n  margin: "+mxUtils.htmlEntities((n/i).toFixed(2))+"in;\n}\n"),l},mxPrintPreview.prototype.open=function(t,e,n,i,l,s,o){var r=null;try{var a,h=this.graph.cellRenderer.initializeOverlay,u=null!=s,d=(s=mxRectangle.fromRectangle(null!=s?s:this.pageFormat)).width+1,p=s.height+1,m=(this.printOverlays&&(this.graph.cellRenderer.initializeOverlay=function(t,e){e.init(t.view.getDrawPane())}),this.printControls&&(this.graph.cellRenderer.initControl=function(t,e,n,i){e.dialect=t.view.graph.dialect,e.init(t.view.getDrawPane())}),this.wnd=null!=e?e:this.wnd,!1),c=(null==this.wnd&&(m=!0,this.wnd=window.open()),this.wnd.document),g=(m&&(null!=(a=this.getDoctype())&&0<a.length&&c.writeln(a),"CSS1Compat"===document.compatMode&&c.writeln("<!DOCTYPE html>"),c.writeln("<html>"),c.writeln("<head>"),this.writeHead(c,t),c.writeln("</head>"),c.writeln("<body>")),mxRectangle.fromRectangle(null!=o?this.graph.getBoundingBox(o):this.graph.getGraphBounds())),x=this.graph.getView().getScale(),y=x/this.scale,C=this.graph.getView().getTranslate(),f=(this.autoOrigin||(this.x0-=C.x*this.scale,this.y0-=C.y*this.scale,g.width+=g.x,g.height+=g.y,g.x=0,g.y=0,this.border=0),d-2*this.border),v=p-2*this.border,E=(p+=this.marginTop+this.marginBottom,g.width/=y,g.height/=y,Math.max(1,Math.ceil((g.width+this.x0)/f))),S=Math.max(1,Math.ceil((g.height+this.y0)/v)),w=(this.pageCount=E*S,null),b=(u&&(null==this.pendingCss&&(this.pageFormatClass={},this.pendingCss=""),w=mxUtils.htmlEntities("gePageFormat-"+String(s.width).replaceAll(".","_")+"-"+String(s.height).replaceAll(".","_")),null==this.pageFormatClass[w])&&(this.pageFormatClass[w]=!0,this.pendingCss+=this.getPageClassCss(w,s)),mxUtils.bind(this,function(t){null!=this.borderColor&&(t.style.borderColor=this.borderColor,t.style.borderStyle="solid",t.style.borderWidth="1px"),t.style.background=this.backgroundColor,null!=w?t.classList.add(w):(t.style.width=s.width+"px",t.style.height=s.height+"px"),c.body.appendChild(t)})),T=this.getCoverPages(d,p);if(null!=T)for(var M=0;M<T.length;M++)b(T[M],!0);for(var L=this.getAppendices(d,p),M=0;M<S;M++)for(var I=M*v/this.scale-this.y0/this.scale+(g.y-C.y*x)/x-M,A=0;A<E;A++){if(null==this.wnd)return null;var P=A*f/this.scale-this.x0/this.scale+(g.x-C.x*x)/x-A,N=M*E+A+1,R=((r=c.createElement("div")).style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",new mxRectangle(P,I,f,v));this.addGraphFragment(-P,-I,this.scale,N,r,R),null!=l&&0==M&&0==A&&r.setAttribute("id",l),b(r,!0)}if(null!=L)for(M=0;M<L.length;M++)b(L[M],M<L.length-1);m&&!i&&this.closeDocument(),this.wnd.focus()}catch(t){null!=r&&null!=r.parentNode&&r.parentNode.removeChild(r),null!=window.console&&console.error(t)}finally{this.graph.cellRenderer.initializeOverlay=h}return this.wnd},mxPrintPreview.prototype.addPendingCss=function(t){var e;null!=this.pendingCss&&((e=t.createElement("style")).setAttribute("type","text/css"),e.appendChild(t.createTextNode(this.pendingCss)),t.getElementsByTagName("head")[0].appendChild(e),this.pendingCss=null)},mxPrintPreview.prototype.closeDocument=function(){try{var t;null!=this.wnd&&null!=this.wnd.document&&(t=this.wnd.document,this.writePostfix(t),t.writeln("</body>"),t.writeln("</html>"),t.close(),this.addPendingCss(t),mxEvent.release(t.body))}catch(t){}},mxPrintPreview.prototype.writeHead=function(t,e){null!=this.title&&t.writeln("<title>"+mxUtils.htmlEntities(this.title)+"</title>"),mxClient.link("stylesheet",mxClient.basePath+"/css/common.css",t),t.writeln('<style type="text/css">'),t.writeln(this.defaultCss);var n=this.pageFormat;this.addPageCss&&null!=n&&(n=(n.width/this.pixelsPerInch).toFixed(2)+"in "+(n.height/this.pixelsPerInch).toFixed(2)+"in",t.writeln("@page {"),t.writeln("  margin: "+mxUtils.htmlEntities((this.pageMargin/this.pixelsPerInch).toFixed(2))+"in;"),t.writeln("  size: "+mxUtils.htmlEntities(n)+";"),t.writeln("}")),null!=e&&t.writeln(mxUtils.htmlEntities(e,!1,!1,!1)),t.writeln("</style>")},mxPrintPreview.prototype.writePostfix=function(t){},mxPrintPreview.prototype.getRoot=function(){var t=this.graph.view.currentRoot;return t=null==t?this.graph.getModel().getRoot():t},mxPrintPreview.prototype.useCssTransforms=function(){return!mxClient.NO_FO&&!mxClient.IS_SF},mxPrintPreview.prototype.isCellVisible=function(t){return!0},mxPrintPreview.prototype.drawBackgroundImage=function(t){t.redraw()},mxPrintPreview.prototype.addGraphFragment=function(t,e,n,i,l,s){var o,r,a,h=this.graph.getView(),u=this.graph.container,d=(this.graph.container=l,h.getCanvas()),p=h.getBackgroundPane(),m=h.getDrawPane(),c=h.getOverlayPane(),g=n,x=(this.graph.dialect==mxConstants.DIALECT_SVG?(h.createSvg(),this.useCssTransforms()&&((x=h.getDrawPane().parentNode).setAttribute("transformOrigin","0 0"),x.setAttribute("transform","scale("+n+","+n+")translate("+t+","+e+")"),n=1,e=t=0)):h.createHtml(),h.isEventsEnabled()),y=(h.setEventsEnabled(!1),this.graph.isEnabled()),C=(this.graph.setEnabled(!1),h.getTranslate()),f=(h.translate=new mxPoint(t,e),this.graph.selectionCellsHandler.updateHandler),v=(this.graph.selectionCellsHandler.updateHandler=function(){},this.graph.cellRenderer.redraw),E=h.states,S=h.scale,w=null,b=(this.printBackgroundImage&&null!=(o=this.getBackgroundImage())&&((w=new mxImageShape(new mxRectangle(Math.round(t*S+o.x),Math.round(e*S+o.y),o.width-1,o.height-1),o.src)).dialect=this.graph.dialect),this.clipping&&(r=new mxRectangle((s.x+C.x+1.5)*S,(s.y+C.y+1.5)*S,(s.width-1.5)*S/g,(s.height-1.5)*S/g),(a=this).graph.cellRenderer.redraw=function(t,e,n){if(null!=t){var i=E.get(t.cell);if(null!=i){i=h.getBoundingBox(i,!1);if(null!=i&&0<i.width&&0<i.height&&!mxUtils.intersects(r,i))return}if(!a.isCellVisible(t.cell))return}v.apply(this,arguments)},null!=w)&&(b=new mxRectangle(w.bounds.x*S+(C.x-t)*S,w.bounds.y*S+(C.y-e)*S,w.bounds.width*S,w.bounds.height*S),mxUtils.intersects(r,b)||(w=null)),null!=w&&(w.init(h.backgroundPane),this.drawBackgroundImage(w)),null);try{var T=[this.getRoot()];b=new mxTemporaryCellStates(h,n,T,null,mxUtils.bind(this,function(t){return this.getLinkForCellState(t)}))}finally{for(var M=l.firstChild;null!=M;){var L=M.nextSibling;"svg"==M.nodeName.toLowerCase()?(M.style.top="",M.style.left="",M.style.width="",M.style.height="",M.style.display="",M.style.maxWidth="100%",M.style.maxHeight="100%",M.style.overflow=mxClient.IS_SF?"hidden":"clip",M.style.overflowClipMargin=this.overflowClipMargin,M.setAttribute("viewBox","0 0 "+(mxClient.IS_SF?s.width+1+" "+(s.height+1):s.width-1+" "+(s.height-1))),this.addGrid(M,s),mxClient.IS_SF&&(s.width>s.height?M.style.height="100%":M.style.width="100%")):this.isTextLabel(M)||M.parentNode.removeChild(M),M=L}h.overlayPane.parentNode.removeChild(h.overlayPane),this.graph.setEnabled(y),this.graph.container=u,this.graph.cellRenderer.redraw=v,this.graph.selectionCellsHandler.updateHandler=f,h.canvas=d,h.backgroundPane=p,h.drawPane=m,h.overlayPane=c,h.translate=C,b.destroy(),h.setEventsEnabled(x)}},mxPrintPreview.prototype.addGrid=function(t,e){0<this.gridSize&&0<this.gridSteps&&null!=this.gridColor&&(e=this.createSvgGrid(t,e),null!=(t=mxUtils.getSvgDefs(t)).nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e))},mxPrintPreview.prototype.createSvgGrid=function(t,e){for(var n=this.gridSize,i=t.ownerDocument,l=null!=i.createElementNS?i.createElementNS(mxConstants.NS_SVG,"g"):i.createElement("g"),s=mxUtils.mod(Math.ceil(Math.round(e.x)/n),this.gridSteps),o=mxUtils.mod(n-mxUtils.mod(Math.round(e.x),n),n),r=mxUtils.mod(Math.ceil(Math.round(e.y)/n),this.gridSteps),a=mxUtils.mod(n-mxUtils.mod(Math.round(e.y),n),n),h=(o*=this.scale,a*=this.scale,n*=this.scale,Math.ceil(e.height/n)),u=0;u<h;u++)(d=null!=i.createElementNS?i.createElementNS(mxConstants.NS_SVG,"line"):i.createElement("line")).setAttribute("x1",0),d.setAttribute("y1",u*n+a),d.setAttribute("x2",e.width),d.setAttribute("y2",u*n+a),d.setAttribute("stroke",this.gridColor),d.setAttribute("opacity",0==mxUtils.mod(u+r,this.gridSteps)?"1":"0.2"),d.setAttribute("stroke-width","0.5"),l.appendChild(d);for(var d,p=Math.ceil(e.width/n),u=0;u<p;u++)(d=null!=i.createElementNS?i.createElementNS(mxConstants.NS_SVG,"line"):i.createElement("line")).setAttribute("x1",u*n+o),d.setAttribute("y1",0),d.setAttribute("x2",u*n+o),d.setAttribute("y2",e.height),d.setAttribute("stroke",this.gridColor),d.setAttribute("opacity",0==mxUtils.mod(u+s,this.gridSteps)?"1":"0.2"),d.setAttribute("stroke-width","0.5"),l.appendChild(d);return l},mxPrintPreview.prototype.isTextLabel=function(t){return"default"==tmp.style.cursor||"div"==t.nodeName.toLowerCase()},mxPrintPreview.prototype.getLinkForCellState=function(t){return this.graph.getLinkForCell(t.cell)},mxPrintPreview.prototype.getBackgroundImage=function(){return this.graph.backgroundImage},mxPrintPreview.prototype.getCoverPages=function(){return null},mxPrintPreview.prototype.getAppendices=function(){return null},mxPrintPreview.prototype.print=function(t){t=this.open(t);null!=t&&t.print()},mxPrintPreview.prototype.close=function(){null!=this.wnd&&(this.wnd.close(),this.wnd=null)},__mxOutput.mxPrintPreview=void 0!==mxPrintPreview?mxPrintPreview:void 0,mxStylesheet.prototype.styles,mxStylesheet.prototype.createDefaultVertexStyle=function(){var t=new Object;return t[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_RECTANGLE,t[mxConstants.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,t[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,t[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,t[mxConstants.STYLE_FILLCOLOR]="#C3D9FF",t[mxConstants.STYLE_STROKECOLOR]="#6482B9",t[mxConstants.STYLE_FONTCOLOR]="#774400",t},mxStylesheet.prototype.createDefaultEdgeStyle=function(){var t=new Object;return t[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_CONNECTOR,t[mxConstants.STYLE_ENDARROW]=mxConstants.ARROW_CLASSIC,t[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,t[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,t[mxConstants.STYLE_STROKECOLOR]="#6482B9",t[mxConstants.STYLE_FONTCOLOR]="#446299",t},mxStylesheet.prototype.putDefaultVertexStyle=function(t){this.putCellStyle("defaultVertex",t)},mxStylesheet.prototype.putDefaultEdgeStyle=function(t){this.putCellStyle("defaultEdge",t)},mxStylesheet.prototype.getDefaultVertexStyle=function(){return this.styles.defaultVertex},mxStylesheet.prototype.getDefaultEdgeStyle=function(){return this.styles.defaultEdge},mxStylesheet.prototype.putCellStyle=function(t,e){this.styles[t]=e},mxStylesheet.prototype.getCellStyle=function(t,e,n){n=null==n||n;var i=e;if(null!=t&&0<t.length)for(var l=t.split(";"),i=null!=i&&";"!=t.charAt(0)?mxUtils.clone(i):new Object,s=0;s<l.length;s++){var o=l[s],r=o.indexOf("=");if(0<=r){var a=o.substring(0,r),r=o.substring(r+1);r==mxConstants.NONE&&n?delete i[a]:mxUtils.isNumeric(r)?i[a]=parseFloat(r):i[a]=r}else{var h=this.styles[o];if(null!=h)for(var a in h)i[a]=h[a]}}return i},__mxOutput.mxStylesheet=void 0!==mxStylesheet?mxStylesheet:void 0,mxCellState.prototype=new mxRectangle,mxCellState.prototype.constructor=mxCellState,mxCellState.prototype.view=null,mxCellState.prototype.cell=null,mxCellState.prototype.style=null,mxCellState.prototype.invalidStyle=!1,mxCellState.prototype.invalid=!0,mxCellState.prototype.origin=null,mxCellState.prototype.absolutePoints=null,mxCellState.prototype.absoluteOffset=null,mxCellState.prototype.visibleSourceState=null,mxCellState.prototype.visibleTargetState=null,mxCellState.prototype.terminalDistance=0,mxCellState.prototype.length=0,mxCellState.prototype.segments=null,mxCellState.prototype.shape=null,mxCellState.prototype.text=null,mxCellState.prototype.unscaledWidth=null,mxCellState.prototype.unscaledHeight=null,mxCellState.prototype.getPerimeterBounds=function(t,e){var n;return t=t||0,e=null!=e?e:new mxRectangle(this.x,this.y,this.width,this.height),null!=this.shape&&null!=this.shape.stencil&&"fixed"==this.shape.stencil.aspect&&(n=this.shape.stencil.computeAspect(this.style,e.x,e.y,e.width,e.height),e.x=n.x,e.y=n.y,e.width=this.shape.stencil.w0*n.width,e.height=this.shape.stencil.h0*n.height),0!=t&&e.grow(t),e},mxCellState.prototype.setAbsoluteTerminalPoint=function(t,e){e?(null==this.absolutePoints&&(this.absolutePoints=[]),0==this.absolutePoints.length?this.absolutePoints.push(t):this.absolutePoints[0]=t):null==this.absolutePoints?(this.absolutePoints=[],this.absolutePoints.push(null),this.absolutePoints.push(t)):1==this.absolutePoints.length?this.absolutePoints.push(t):this.absolutePoints[this.absolutePoints.length-1]=t},mxCellState.prototype.setCursor=function(t){null!=this.shape&&this.shape.setCursor(t),null!=this.text&&this.text.setCursor(t)},mxCellState.prototype.isFloatingTerminalPoint=function(t){var e=this.getVisibleTerminalState(t);return null!=e&&(null==(e=this.view.graph.getConnectionConstraint(this,e,t))||null==e.point)},mxCellState.prototype.getVisibleTerminal=function(t){t=this.getVisibleTerminalState(t);return null!=t?t.cell:null},mxCellState.prototype.getVisibleTerminalState=function(t){return t?this.visibleSourceState:this.visibleTargetState},mxCellState.prototype.setVisibleTerminalState=function(t,e){e?this.visibleSourceState=t:this.visibleTargetState=t},mxCellState.prototype.getCellBounds=function(){return this.cellBounds},mxCellState.prototype.getPaintBounds=function(){return this.paintBounds},mxCellState.prototype.updateCachedBounds=function(){var t=this.view.translate,e=this.view.scale;this.cellBounds=new mxRectangle(this.x/e-t.x,this.y/e-t.y,this.width/e,this.height/e),this.paintBounds=mxRectangle.fromRectangle(this.cellBounds),null!=this.shape&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()},mxCellState.prototype.setState=function(t){this.view=t.view,this.cell=t.cell,this.style=t.style,this.absolutePoints=t.absolutePoints,this.origin=t.origin,this.absoluteOffset=t.absoluteOffset,this.boundingBox=t.boundingBox,this.terminalDistance=t.terminalDistance,this.segments=t.segments,this.length=t.length,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.unscaledWidth=t.unscaledWidth,this.unscaledHeight=t.unscaledHeight},mxCellState.prototype.clone=function(){var t=new mxCellState(this.view,this.cell,null!=this.style?mxUtils.clone(this.style):null);if(null!=this.absolutePoints){t.absolutePoints=[];for(var e=0;e<this.absolutePoints.length;e++)t.absolutePoints[e]=this.absolutePoints[e].clone()}return null!=this.origin&&(t.origin=this.origin.clone()),null!=this.absoluteOffset&&(t.absoluteOffset=this.absoluteOffset.clone()),null!=this.boundingBox&&(t.boundingBox=this.boundingBox.clone()),t.terminalDistance=this.terminalDistance,t.segments=this.segments,t.length=this.length,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.unscaledWidth=this.unscaledWidth,t.unscaledHeight=this.unscaledHeight,t},mxCellState.prototype.destroy=function(){this.view.graph.cellRenderer.destroy(this)},__mxOutput.mxCellState=void 0!==mxCellState?mxCellState:void 0,mxGraphSelectionModel.prototype=new mxEventSource,mxGraphSelectionModel.prototype.constructor=mxGraphSelectionModel,mxGraphSelectionModel.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphSelectionModel.prototype.updatingSelectionResource="none"!=mxClient.language?"updatingSelection":"",mxGraphSelectionModel.prototype.graph=null,mxGraphSelectionModel.prototype.singleSelection=!1,mxGraphSelectionModel.prototype.isSingleSelection=function(){return this.singleSelection},mxGraphSelectionModel.prototype.setSingleSelection=function(t){this.singleSelection=t},mxGraphSelectionModel.prototype.isSelected=function(t){return null!=t&&0<=mxUtils.indexOf(this.cells,t)},mxGraphSelectionModel.prototype.isEmpty=function(){return 0==this.cells.length},mxGraphSelectionModel.prototype.clear=function(){this.changeSelection(null,this.cells)},mxGraphSelectionModel.prototype.setCell=function(t){null!=t&&this.setCells([t])},mxGraphSelectionModel.prototype.setCells=function(t){if(null!=t){this.singleSelection&&(t=[this.getFirstSelectableCell(t)]);for(var e=[],n=0;n<t.length;n++)this.graph.isCellSelectable(t[n])&&e.push(t[n]);this.changeSelection(e,this.cells)}},mxGraphSelectionModel.prototype.getFirstSelectableCell=function(t){if(null!=t)for(var e=0;e<t.length;e++)if(this.graph.isCellSelectable(t[e]))return t[e];return null},mxGraphSelectionModel.prototype.addCell=function(t){null!=t&&this.addCells([t])},mxGraphSelectionModel.prototype.addCells=function(t){if(null!=t){for(var e=null,n=(this.singleSelection&&(e=this.cells,t=[this.getFirstSelectableCell(t)]),[]),i=0;i<t.length;i++)!this.isSelected(t[i])&&this.graph.isCellSelectable(t[i])&&n.push(t[i]);this.changeSelection(n,e)}},mxGraphSelectionModel.prototype.removeCell=function(t){null!=t&&this.removeCells([t])},mxGraphSelectionModel.prototype.removeCells=function(t){if(null!=t){for(var e=[],n=0;n<t.length;n++)this.isSelected(t[n])&&e.push(t[n]);this.changeSelection(null,e)}},mxGraphSelectionModel.prototype.changeSelection=function(t,e){(null!=t&&0<t.length&&null!=t[0]||null!=e&&0<e.length&&null!=e[0])&&((t=new mxSelectionChange(this,t,e)).execute(),(e=new mxUndoableEdit(this,!1)).add(t),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",e)))},mxGraphSelectionModel.prototype.cellAdded=function(t){null==t||this.isSelected(t)||this.cells.push(t)},mxGraphSelectionModel.prototype.cellRemoved=function(t){null!=t&&0<=(t=mxUtils.indexOf(this.cells,t))&&this.cells.splice(t,1)},mxSelectionChange.prototype.execute=function(){var t=mxLog.enter("mxSelectionChange.execute");if(window.status=mxResources.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource,null!=this.removed)for(var e=0;e<this.removed.length;e++)this.selectionModel.cellRemoved(this.removed[e]);if(null!=this.added)for(e=0;e<this.added.length;e++)this.selectionModel.cellAdded(this.added[e]);var n=this.added;this.added=this.removed,this.removed=n,window.status=mxResources.get(this.selectionModel.doneResource)||this.selectionModel.doneResource,mxLog.leave("mxSelectionChange.execute",t),this.selectionModel.fireEvent(new mxEventObject(mxEvent.CHANGE,"added",this.added,"removed",this.removed))},__mxOutput.mxGraphSelectionModel=void 0!==mxGraphSelectionModel?mxGraphSelectionModel:void 0,mxCellEditor.prototype.graph=null,mxCellEditor.prototype.textarea=null,mxCellEditor.prototype.editingCell=null,mxCellEditor.prototype.trigger=null,mxCellEditor.prototype.modified=!1,mxCellEditor.prototype.autoSize=!0,mxCellEditor.prototype.selectText=!0,mxCellEditor.prototype.rotateText=!0,mxCellEditor.prototype.emptyLabelText=mxClient.IS_FF?"<br>":"",mxCellEditor.prototype.escapeCancelsEditing=!0,mxCellEditor.prototype.textNode=null,mxCellEditor.prototype.zIndex=1,mxCellEditor.prototype.minResize=new mxRectangle(0,20),mxCellEditor.prototype.blurEnabled=!1,mxCellEditor.prototype.initialValue=null,mxCellEditor.prototype.align=null,mxCellEditor.prototype.init=function(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=!0,mxClient.IS_GC&&(this.textarea.style.minHeight="1em"),this.installListeners(this.textarea)},mxCellEditor.prototype.applyValue=function(t,e){this.graph.labelChanged(t.cell,e,this.trigger)},mxCellEditor.prototype.setAlign=function(t){var e=this.graph.getView().getState(this.editingCell);null==this.textarea||null==e||null!=(e=mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION))&&"vertical-"==e.substring(0,9)||(this.textarea.style.textAlign=t),this.align=t,this.resize()},mxCellEditor.prototype.getInitialValue=function(t,e){t=mxUtils.htmlEntities(this.graph.getEditingValue(t.cell,e),!1);return(t=mxUtils.replaceTrailingNewlines(t,"<div><br></div>")).replace(/\n/g,"<br>")},mxCellEditor.prototype.getCurrentValue=function(t){return mxUtils.extractTextWithWhitespace(this.textarea.childNodes)},mxCellEditor.prototype.isCancelEditingKeyEvent=function(t){return this.escapeCancelsEditing||mxEvent.isShiftDown(t)||mxEvent.isControlDown(t)||mxEvent.isMetaDown(t)},mxCellEditor.prototype.installListeners=function(e){mxEvent.addListener(e,"dragstart",mxUtils.bind(this,function(t){this.graph.stopEditing(!1),mxEvent.consume(t)})),mxEvent.addListener(e,"blur",mxUtils.bind(this,function(t){this.blurEnabled&&this.focusLost(t)}));var n=this.graph.container.scrollTop,i=this.graph.container.scrollLeft,t=(mxEvent.addListener(e,"keydown",mxUtils.bind(this,function(t){n=this.graph.container.scrollTop,i=this.graph.container.scrollLeft,mxEvent.isConsumed(t)||(this.isStopEditingEvent(t)?(this.graph.stopEditing(!1),mxEvent.consume(t)):27==t.keyCode&&(this.graph.stopEditing(this.isCancelEditingKeyEvent(t)),mxEvent.consume(t)))})),mxUtils.bind(this,function(t){null!=this.editingCell&&this.clearOnChange&&e.innerHTML==this.getEmptyLabelText()&&(!mxClient.IS_FF||8!=t.keyCode&&46!=t.keyCode)&&(this.clearOnChange=!1,e.innerText="")})),t=(mxEvent.addListener(e,"keypress",t),mxEvent.addListener(e,"paste",t),mxUtils.bind(this,function(t){null!=this.editingCell&&(this.graph.container.scrollTop=n,this.graph.container.scrollLeft=i,e.scrollIntoView({block:"nearest",inline:"nearest"}),0!=this.textarea.innerHTML.length&&"<br>"!=this.textarea.innerHTML||this.textarea.innerHTML==this.getEmptyLabelText()?this.clearOnChange=!1:(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=0<this.textarea.innerHTML.length))})),t=(mxEvent.addListener(e,mxClient.IS_IE11||mxClient.IS_IE?"keyup":"input",t),mxEvent.addListener(e,"cut",t),mxEvent.addListener(e,"paste",t),mxClient.IS_IE11||mxClient.IS_IE?"keydown":"input"),l=mxUtils.bind(this,function(t){null!=this.editingCell&&this.autoSize&&!mxEvent.isConsumed(t)&&(null!=this.resizeThread&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(mxUtils.bind(this,function(){this.resizeThread=null,this.resize()}),0))});mxEvent.addListener(e,t,l),mxEvent.addListener(window,"resize",l),mxEvent.addListener(e,"cut",l),mxEvent.addListener(e,"paste",l)},mxCellEditor.prototype.isStopEditingEvent=function(t){return 113==t.keyCode||this.graph.isEnterStopsCellEditing()&&13==t.keyCode&&!mxEvent.isControlDown(t)&&!mxEvent.isShiftDown(t)},mxCellEditor.prototype.isEventSource=function(t){return mxEvent.getSource(t)==this.textarea},mxCellEditor.prototype.resize=function(){var t,e,n,i,l=this.graph.getView().getState(this.editingCell);null==l?this.stopEditing(!0):null!=this.textarea&&(t=mxUtils.getAlignmentAsPoint((null!=this.align?this:this.textShape).align,this.textShape.valign),this.bounds=this.graph.cellRenderer.getLabelBounds(l,this.textShape,t,!this.rotateText),e=this.rotateText?this.textShape.getTextRotation():0,n=this.graph.getView().scale,this.bounds.x+=-.5==t.x?0:0==t.x?-n:n,this.bounds.y+=-.5==t.y?0:0==t.y?-n:n,this.textarea.style.left=Math.max(0,Math.round(this.bounds.x))+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y))+"px",this.autoSize&&"fill"!=l.style[mxConstants.STYLE_OVERFLOW]?this.graph.isWrapping(l.cell)&&(2<=this.bounds.width||2<=this.bounds.height)?(i=null!=(i=mxUtils.getValue(l.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION))&&"vertical-"==i.substring(0,9),this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal","block"==l.style[mxConstants.STYLE_OVERFLOW]||"width"==l.style[mxConstants.STYLE_OVERFLOW]?this.bounds.width-=2*n:l.view.graph.isHtmlLabel(l.cell)&&(this.bounds.width+=mxSvgCanvas2D.prototype.foreignObjectPadding*n),this.textarea.innerHTML!=this.getEmptyLabelText()?"block"==l.style[mxConstants.STYLE_OVERFLOW]||"width"==l.style[mxConstants.STYLE_OVERFLOW]?(-.5!=t.y&&"width"!=l.style[mxConstants.STYLE_OVERFLOW]||(this.textarea.style.maxHeight=Math.round(this.bounds.height/n)+"px"),this.textarea.style.width=Math.round(this.bounds.width/n)+"px"):i?this.textarea.style.maxHeight=Math.round(this.bounds.height/n)+"px":this.textarea.style.maxWidth=Math.round(this.bounds.width/n)+"px":this.textarea.style.maxWidth=Math.round(this.bounds.width/n)+"px"):(this.textarea.style.whiteSpace="nowrap",this.textarea.style.width=""):(this.textarea.style.width=Math.round(this.bounds.width/n)+"px",this.textarea.style.height=Math.round(this.bounds.height/n)+"px",this.graph.isWrapping(l.cell)&&(2<=this.bounds.width||2<=this.bounds.height)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal","fill"!=l.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=Math.round(this.bounds.width/n)+"px")):(this.textarea.style.whiteSpace="nowrap","fill"!=l.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=""))),mxUtils.setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),mxUtils.setPrefixedStyle(this.textarea.style,"transform",(0!=e?"rotate("+e+"deg) ":"")+"scale("+n+","+n+") translate("+100*t.x+"%,"+100*t.y+"%)"))},mxCellEditor.prototype.focusLost=function(){this.stopEditing(!this.graph.isInvokesStopCellEditing())},mxCellEditor.prototype.getBackgroundColor=function(t){return null},mxCellEditor.prototype.getBorderColor=function(t){return null},mxCellEditor.prototype.updateTextAreaStyle=function(t){var e=mxUtils.getValue(t.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),n=mxUtils.getValue(t.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),i=mxUtils.getValue(t.style,mxConstants.STYLE_FONTCOLOR,"black"),l=(mxUtils.getValue(t.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,s=(mxUtils.getValue(t.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,o=[],o=((mxUtils.getValue(t.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&o.push("underline"),(mxUtils.getValue(t.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&o.push("line-through"),this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(e*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.backgroundColor=this.getBackgroundColor(t),this.textarea.style.textDecoration=o.join(" "),this.textarea.style.fontWeight=l?"bold":"normal",this.textarea.style.fontStyle=s?"italic":"",this.textarea.style.fontSize=Math.round(e)+"px",this.textarea.style.zIndex=this.zIndex,this.textarea.style.fontFamily=mxUtils.parseCssFontFamily(n),this.textarea.style.writingMode="",this.textarea.style.color=i,this.getBorderColor(t)),l=(this.textarea.style.border=null!=o?"1px solid "+o:"1px solid transparent",mxUtils.getValue(t.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)),s=mxUtils.getValue(t.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT);this.textarea.removeAttribute("dir"),(l=l!=mxConstants.TEXT_DIRECTION_AUTO||null==t||null==t.text||t.text.dialect==mxConstants.DIALECT_STRICTHTML||mxUtils.isNode(t.text.value)?l:t.text.getAutoDirection())==mxConstants.TEXT_DIRECTION_LTR||l==mxConstants.TEXT_DIRECTION_RTL?this.textarea.setAttribute("dir",l):l!=mxConstants.TEXT_DIRECTION_VERTICAL_LR&&l!=mxConstants.TEXT_DIRECTION_VERTICAL_RL||(s=(e=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))==mxConstants.ALIGN_TOP?"left":e==mxConstants.ALIGN_BOTTOM?"right":"center",this.textarea.style.writingMode=l),this.textarea.style.textAlign=s},mxCellEditor.prototype.startEditing=function(t,e,n){this.stopEditing(!0),(this.align=null)==this.textarea&&this.init(),null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.hideTooltip();var i=this.graph.getView().getState(t);null!=i&&(this.updateTextAreaStyle(i),this.textarea.innerHTML=this.getInitialValue(i,e)||"",this.initialValue=this.textarea.innerHTML,0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=this.textarea.innerHTML==this.getEmptyLabelText(),this.textShape=i.text,this.editingCell=t,this.trigger=e,null==this.textShape&&(this.textShape=this.graph.cellRenderer.createTextShape(i,"",this.graph.dialect)),t=mxUtils.bind(this,function(){var t,e;null!=this.editingCell&&(null!=this.textShape&&null!=this.textShape.node&&this.isHideLabel(i)&&(this.textNode=this.textShape.node,this.textNode.style.visibility="hidden"),this.resize(),this.graph.container.appendChild(this.textarea),mxClient.IS_IOS&&(this.graph.container.scrollTop=Math.max(this.graph.container.scrollTop,i.y+i.height-this.graph.container.clientHeight/3)),this.textarea.scrollIntoView({block:"nearest",inline:"nearest"}),this.textarea.focus(),null!=n?(this.textarea.innerHTML=n,(t=document.createRange()).selectNodeContents(this.textarea),t.collapse(!1),(e=window.getSelection()).removeAllRanges(),e.addRange(t)):this.isSelectText()&&0<this.textarea.innerHTML.length&&(this.textarea.innerHTML!=this.getEmptyLabelText()||!this.clearOnChange)&&document.execCommand("selectAll",!1,null))}),mxClient.IS_IOS?t():window.setTimeout(t,0))},mxCellEditor.prototype.isSelectText=function(){return this.selectText},mxCellEditor.prototype.clearSelection=function(){var t=null;window.getSelection?t=window.getSelection():document.selection&&(t=document.selection),null!=t&&(t.empty?t.empty():t.removeAllRanges&&t.removeAllRanges())},mxCellEditor.prototype.stopEditing=function(t){if(t=t||!1,null!=this.editingCell){null!=this.textNode&&(this.textNode.style.visibility="visible",this.textNode=null);var t=t?null:this.graph.view.getState(this.editingCell),e=this.initialValue;if(this.initialValue=null,this.editingCell=null,this.textShape=null,this.trigger=null,this.bounds=null,this.textarea.blur(),this.clearSelection(),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.textarea.innerText="",this.clearOnChange=!1),null!=t&&(this.textarea.innerHTML!=e||null!=this.align)){this.prepareTextarea();e=this.getCurrentValue(t);this.graph.getModel().beginUpdate();try{null!=e&&this.applyValue(t,e),null!=this.align&&this.graph.setCellStyles(mxConstants.STYLE_ALIGN,this.align,[t.cell])}finally{this.graph.getModel().endUpdate()}}mxEvent.release(this.textarea),this.textarea=null,this.align=null}},mxCellEditor.prototype.prepareTextarea=function(){null!=this.textarea.lastChild&&"BR"==this.textarea.lastChild.nodeName&&this.textarea.removeChild(this.textarea.lastChild)},mxCellEditor.prototype.isHideLabel=function(t){return!0},mxCellEditor.prototype.getMinimumSize=function(t){var e=this.graph.getView().scale;return new mxRectangle(0,0,null==t.text?30:t.text.size*e+20,"left"==this.textarea.style.textAlign?120:40)},mxCellEditor.prototype.getEmptyLabelText=function(t){return this.emptyLabelText},mxCellEditor.prototype.getEditingCell=function(){return this.editingCell},mxCellEditor.prototype.destroy=function(){null!=this.textarea&&(mxEvent.release(this.textarea),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.zoomHandler&&(null!=this.graph.container&&mxEvent.removeListener(this.graph.container,"scroll",this.zoomHandler),this.graph.view.removeListener(this.zoomHandler),this.zoomHandler=null)},__mxOutput.mxCellEditor=void 0!==mxCellEditor?mxCellEditor:void 0,mxCellRenderer.defaultShapes=new Object,mxCellRenderer.prototype.defaultEdgeShape=mxConnector,mxCellRenderer.prototype.defaultVertexShape=mxRectangleShape,mxCellRenderer.prototype.defaultTextShape=mxText,mxCellRenderer.prototype.legacyControlPosition=!0,mxCellRenderer.prototype.legacySpacing=!0,mxCellRenderer.prototype.antiAlias=!0,mxCellRenderer.prototype.minSvgStrokeWidth=1,mxCellRenderer.prototype.forceControlClickHandler=!1,mxCellRenderer.registerShape=function(t,e){mxCellRenderer.defaultShapes[t]=e},mxCellRenderer.registerShape(mxConstants.SHAPE_RECTANGLE,mxRectangleShape),mxCellRenderer.registerShape(mxConstants.SHAPE_ELLIPSE,mxEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_RHOMBUS,mxRhombus),mxCellRenderer.registerShape(mxConstants.SHAPE_CYLINDER,mxCylinder),mxCellRenderer.registerShape(mxConstants.SHAPE_CONNECTOR,mxConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_ACTOR,mxActor),mxCellRenderer.registerShape(mxConstants.SHAPE_TRIANGLE,mxTriangle),mxCellRenderer.registerShape(mxConstants.SHAPE_HEXAGON,mxHexagon),mxCellRenderer.registerShape(mxConstants.SHAPE_CLOUD,mxCloud),mxCellRenderer.registerShape(mxConstants.SHAPE_LINE,mxLine),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW,mxArrow),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW_CONNECTOR,mxArrowConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_SWIMLANE,mxSwimlane),mxCellRenderer.registerShape(mxConstants.SHAPE_IMAGE,mxImageShape),mxCellRenderer.registerShape(mxConstants.SHAPE_LABEL,mxLabel),mxCellRenderer.prototype.initializeShape=function(t){t.shape.dialect=t.view.graph.dialect,this.configureShape(t),t.shape.init(t.view.getDrawPane())},mxCellRenderer.prototype.createShape=function(t){var e,n=null;return null!=t.style&&(e=t.style[mxConstants.STYLE_SHAPE],n=null!=(e=null==mxCellRenderer.defaultShapes[e]?mxStencilRegistry.getStencil(e):null)?new mxShape(e):new(this.getShapeConstructor(t))),n},mxCellRenderer.prototype.createIndicatorShape=function(t){t.shape.indicatorShape=this.getShape(t.view.graph.getIndicatorShape(t))},mxCellRenderer.prototype.getShape=function(t){return null!=t?mxCellRenderer.defaultShapes[t]:null},mxCellRenderer.prototype.getShapeConstructor=function(t){var e=this.getShape(t.style[mxConstants.STYLE_SHAPE]);return e=null==e?t.view.graph.getModel().isEdge(t.cell)?this.defaultEdgeShape:this.defaultVertexShape:e},mxCellRenderer.prototype.configureShape=function(t){t.shape.apply(t),t.shape.image=t.view.graph.getImage(t),t.shape.indicatorColor=t.view.graph.getIndicatorColor(t),t.shape.indicatorStrokeColor=t.style[mxConstants.STYLE_INDICATOR_STROKECOLOR],t.shape.indicatorGradientColor=t.view.graph.getIndicatorGradientColor(t),t.shape.indicatorDirection=t.style[mxConstants.STYLE_INDICATOR_DIRECTION],t.shape.indicatorImage=t.view.graph.getIndicatorImage(t),this.postConfigureShape(t)},mxCellRenderer.prototype.postConfigureShape=function(t){null!=t.shape&&(this.resolveColor(t,"indicatorGradientColor",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(t,"indicatorColor",mxConstants.STYLE_FILLCOLOR),this.resolveColor(t,"gradient",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(t,"stroke",mxConstants.STYLE_STROKECOLOR),this.resolveColor(t,"fill",mxConstants.STYLE_FILLCOLOR))},mxCellRenderer.prototype.checkPlaceholderStyles=function(t){if(null!=t.style)for(var e=["inherit","swimlane","indicated"],n=[mxConstants.STYLE_FILLCOLOR,mxConstants.STYLE_STROKECOLOR,mxConstants.STYLE_GRADIENTCOLOR,mxConstants.STYLE_FONTCOLOR],i=0;i<n.length;i++)if(0<=mxUtils.indexOf(e,t.style[n[i]]))return!0;return!1},mxCellRenderer.prototype.resolveColor=function(t,e,n){var i,l,s,o=n==mxConstants.STYLE_FONTCOLOR?t.text:t.shape;null!=o&&(i=t.view.graph,l=null,"inherit"==(s=o[e])?l=i.model.getParent(t.cell):"swimlane"==s?(o[e]=n==mxConstants.STYLE_STROKECOLOR||n==mxConstants.STYLE_FONTCOLOR?"#000000":"#ffffff",l=null!=i.model.getTerminal(t.cell,!1)?i.model.getTerminal(t.cell,!1):t.cell,l=i.getSwimlane(l),n=i.swimlaneIndicatorColorAttribute):"indicated"==s&&null!=t.shape?o[e]=t.shape.indicatorColor:n!=mxConstants.STYLE_FILLCOLOR&&s==mxConstants.STYLE_FILLCOLOR&&null!=t.shape?o[e]=t.style[mxConstants.STYLE_FILLCOLOR]:n!=mxConstants.STYLE_STROKECOLOR&&s==mxConstants.STYLE_STROKECOLOR&&null!=t.shape&&(o[e]=t.style[mxConstants.STYLE_STROKECOLOR]),null!=l)&&(s=i.getView().getState(l),(o[e]=null)!=s)&&(t=n==mxConstants.STYLE_FONTCOLOR?s.text:s.shape,o[e]=null!=t&&"indicatorColor"!=e?t[e]:s.style[n])},mxCellRenderer.prototype.getLabelValue=function(t){return t.view.graph.getLabel(t.cell)},mxCellRenderer.prototype.createTextShape=function(t,e,n){var i=t.view.graph,e=new this.defaultTextShape(e,new mxRectangle,t.style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER,i.getVerticalAlign(t),t.style[mxConstants.STYLE_FONTCOLOR],t.style[mxConstants.STYLE_FONTFAMILY],t.style[mxConstants.STYLE_FONTSIZE],t.style[mxConstants.STYLE_FONTSTYLE],t.style[mxConstants.STYLE_SPACING],t.style[mxConstants.STYLE_SPACING_TOP],t.style[mxConstants.STYLE_SPACING_RIGHT],t.style[mxConstants.STYLE_SPACING_BOTTOM],t.style[mxConstants.STYLE_SPACING_LEFT],t.style[mxConstants.STYLE_HORIZONTAL],t.style[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR],t.style[mxConstants.STYLE_LABEL_BORDERCOLOR],i.isWrapping(t.cell)&&i.isHtmlLabel(t.cell),i.isLabelClipped(t.cell),t.style[mxConstants.STYLE_OVERFLOW],t.style[mxConstants.STYLE_LABEL_PADDING],mxUtils.getValue(t.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION));return e.opacity=mxUtils.getValue(t.style,mxConstants.STYLE_TEXT_OPACITY,100),e.dialect=n,e.style=t.style,e.state=t,e},mxCellRenderer.prototype.createLabel=function(i,t){var e,l,n,s=i.view.graph;(0<i.style[mxConstants.STYLE_FONTSIZE]||null==i.style[mxConstants.STYLE_FONTSIZE])&&(e=s.isHtmlLabel(i.cell)||null!=t&&mxUtils.isNode(t),i.text=this.createTextShape(i,t,e?mxConstants.DIALECT_STRICTHTML:i.view.graph.dialect),this.initializeLabel(i,i.text),this.configureShape(i),l=!1,n=function(t){var e,n=i;return(mxClient.IS_TOUCH||l)&&(e=mxEvent.getClientX(t),t=mxEvent.getClientY(t),e=mxUtils.convertPoint(s.container,e,t),n=s.view.getState(s.getCellAt(e.x,e.y))),n},mxEvent.addGestureListeners(i.text.node,mxUtils.bind(this,function(t){this.isLabelEvent(i,t)&&(s.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,i)),l=s.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(t).nodeName)}),mxUtils.bind(this,function(t){this.isLabelEvent(i,t)&&s.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,n(t)))}),mxUtils.bind(this,function(t){this.isLabelEvent(i,t)&&(s.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,n(t))),l=!1)})),s.nativeDblClickEnabled)&&mxEvent.addListener(i.text.node,"dblclick",mxUtils.bind(this,function(t){this.isLabelEvent(i,t)&&(s.dblClick(t,i.cell),mxEvent.consume(t))}))},mxCellRenderer.prototype.initializeLabel=function(t,e){mxClient.IS_SVG&&mxClient.NO_FO&&e.dialect!=mxConstants.DIALECT_SVG?e.init(t.view.graph.container):e.init(t.view.getDrawPane())},mxCellRenderer.prototype.createCellOverlays=function(t){var e=t.view.graph.getCellOverlays(t.cell),n=null;if(null!=e)for(var n=new mxDictionary,i=0;i<e.length;i++){var l,s=null!=t.overlays?t.overlays.remove(e[i]):null;null==s?((l=new mxImageShape(new mxRectangle,e[i].image.src)).dialect=t.view.graph.dialect,l.preserveImageAspect=!1,l.overlay=e[i],this.initializeOverlay(t,l),this.installCellOverlayListeners(t,e[i],l),null!=e[i].cursor&&(l.node.style.cursor=e[i].cursor),n.put(e[i],l)):n.put(e[i],s)}null!=t.overlays&&t.overlays.visit(function(t,e){e.destroy()}),t.overlays=n},mxCellRenderer.prototype.initializeOverlay=function(t,e){e.init(t.view.getOverlayPane())},mxCellRenderer.prototype.installCellOverlayListeners=function(e,n,t){var i=e.view.graph;mxEvent.addListener(t.node,"click",function(t){i.isEditing()&&i.stopEditing(!i.isInvokesStopCellEditing()),n.fireEvent(new mxEventObject(mxEvent.CLICK,"event",t,"cell",e.cell))}),mxEvent.addGestureListeners(t.node,function(t){mxEvent.consume(t)},function(t){i.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,e))}),mxClient.IS_TOUCH&&mxEvent.addListener(t.node,"touchend",function(t){n.fireEvent(new mxEventObject(mxEvent.CLICK,"event",t,"cell",e.cell))})},mxCellRenderer.prototype.createControl=function(t){var e,n=t.view.graph,i=n.getFoldingImage(t);n.foldingEnabled&&null!=i?null==t.control&&(e=new mxRectangle(0,0,i.width,i.height),t.control=new mxImageShape(e,i.src),t.control.preserveImageAspect=!1,t.control.dialect=n.dialect,this.initControl(t,t.control,!0,this.createControlClickHandler(t))):null!=t.control&&(t.control.destroy(),t.control=null)},mxCellRenderer.prototype.createControlClickHandler=function(n){var i=n.view.graph;return mxUtils.bind(this,function(t){var e;(this.forceControlClickHandler||i.isEnabled())&&(e=!i.isCellCollapsed(n.cell),i.foldCells(e,!1,[n.cell],null,t),mxEvent.consume(t))})},mxCellRenderer.prototype.initControl=function(e,t,n,i){var l,s=e.view.graph,t=(s.isHtmlLabel(e.cell)&&mxClient.NO_FO&&s.dialect==mxConstants.DIALECT_SVG?(t.dialect=mxConstants.DIALECT_PREFERHTML,t.init(s.container),t.node.style.zIndex=1):t.init(e.view.getOverlayPane()),t.innerNode||t.node);return null==i||mxClient.IS_IOS||(s.isEnabled()&&(t.style.cursor="pointer"),mxEvent.addListener(t,"click",i)),n&&(l=null,mxEvent.addGestureListeners(t,function(t){l=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),s.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,e)),mxEvent.consume(t)},function(t){s.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,e))},function(t){s.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,e)),mxEvent.consume(t)}),null!=i)&&mxClient.IS_IOS&&t.addEventListener("touchend",function(t){var e;null!=l&&(e=s.tolerance,Math.abs(l.x-mxEvent.getClientX(t))<e)&&Math.abs(l.y-mxEvent.getClientY(t))<e&&(i.call(i,t),mxEvent.consume(t))},!0),t},mxCellRenderer.prototype.isShapeEvent=function(t,e){return!0},mxCellRenderer.prototype.isLabelEvent=function(t,e){return!0},mxCellRenderer.prototype.installListeners=function(i){function e(t){var e,n=i;return(l.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(t).nodeName||mxClient.IS_TOUCH)&&(e=mxEvent.getClientX(t),t=mxEvent.getClientY(t),e=mxUtils.convertPoint(l.container,e,t),n=l.view.getState(l.getCellAt(e.x,e.y))),n}var l=i.view.graph;mxEvent.addGestureListeners(i.shape.node,mxUtils.bind(this,function(t){this.isShapeEvent(i,t)&&l.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,i))}),mxUtils.bind(this,function(t){this.isShapeEvent(i,t)&&l.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,e(t)))}),mxUtils.bind(this,function(t){this.isShapeEvent(i,t)&&l.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,e(t)))})),l.nativeDblClickEnabled&&mxEvent.addListener(i.shape.node,"dblclick",mxUtils.bind(this,function(t){this.isShapeEvent(i,t)&&(l.dblClick(t,i.cell),mxEvent.consume(t))}))},mxCellRenderer.prototype.redrawLabel=function(t,e){var n,i=t.view.graph,l=this.getLabelValue(t),s=i.isWrapping(t.cell),o=i.isLabelClipped(t.cell),r=t.view.graph.isHtmlLabel(t.cell)||null!=l&&mxUtils.isNode(l)?mxConstants.DIALECT_STRICTHTML:t.view.graph.dialect,a=t.style[mxConstants.STYLE_OVERFLOW]||"visible";null==t.text||t.text.wrap==s&&t.text.clipped==o&&t.text.overflow==a&&t.text.dialect==r||(t.text.destroy(),t.text=null),null==t.text&&null!=l&&(mxUtils.isNode(l)||0<l.length)?this.createLabel(t,l):null==t.text||null!=l&&0!=l.length||(t.text.destroy(),t.text=null),null!=t.text&&(e&&(null!=t.text.lastValue&&this.isTextShapeInvalid(t,t.text)&&(t.text.lastValue=null),t.text.resetStyles(),t.text.apply(t),this.configureShape(t),t.text.valign=i.getVerticalAlign(t)),i=this.getLabelBounds(t),n=this.getTextScale(t),this.resolveColor(t,"color",mxConstants.STYLE_FONTCOLOR),!e&&t.text.value==l&&t.text.isWrapping==s&&t.text.overflow==a&&t.text.isClipping==o&&t.text.scale==n&&t.text.dialect==r&&null!=t.text.bounds&&t.text.bounds.equals(i)||(t.text.dialect=r,t.text.value=l,t.text.bounds=i,t.text.scale=n,t.text.wrap=s,t.text.clipped=o,t.text.overflow=a,e=t.text.node.style.visibility,this.redrawLabelShape(t.text),t.text.node.style.visibility=e))},mxCellRenderer.prototype.isTextShapeInvalid=function(i,l){function t(t,e,n){return"spacingTop"==e||"spacingRight"==e||"spacingBottom"==e||"spacingLeft"==e?parseFloat(l[t])-parseFloat(l.spacing)!=(i.style[e]||n):l[t]!=(null!=i.style[e]?i.style[e]:n)}return t("fontStyle",mxConstants.STYLE_FONTSTYLE,mxConstants.DEFAULT_FONTSTYLE)||t("family",mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY)||t("size",mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE)||t("color",mxConstants.STYLE_FONTCOLOR,"black")||t("align",mxConstants.STYLE_ALIGN,"")||t("valign",mxConstants.STYLE_VERTICAL_ALIGN,"")||t("spacing",mxConstants.STYLE_SPACING,2)||t("spacingTop",mxConstants.STYLE_SPACING_TOP,0)||t("spacingRight",mxConstants.STYLE_SPACING_RIGHT,0)||t("spacingBottom",mxConstants.STYLE_SPACING_BOTTOM,0)||t("spacingLeft",mxConstants.STYLE_SPACING_LEFT,0)||t("horizontal",mxConstants.STYLE_HORIZONTAL,!0)||t("background",mxConstants.STYLE_LABEL_BACKGROUNDCOLOR)||t("border",mxConstants.STYLE_LABEL_BORDERCOLOR)||t("opacity",mxConstants.STYLE_TEXT_OPACITY,100)||t("textDirection",mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)},mxCellRenderer.prototype.redrawLabelShape=function(t){t.redraw()},mxCellRenderer.prototype.getTextScale=function(t){return t.view.scale},mxCellRenderer.prototype.getLabelBounds=function(t,e,n,i){e=null!=e?e:t.text;var l,s=new mxRectangle(t.absoluteOffset.x,t.absoluteOffset.y),o=t.view.graph.getModel().isEdge(t.cell),r=t.view.scale,a=(o?(a=e.getSpacing(null,n),s.x+=a.x*r,s.y+=a.y*r,null!=(a=t.view.graph.getCellGeometry(t.cell))&&(s.width=Math.max(0,a.width*r),s.height=Math.max(0,a.height*r))):(e.isPaintBoundsInverted()&&!i&&(l=s.x,s.x=s.y,s.y=l),s.x+=t.x,s.y+=t.y,s.width=Math.max(1,t.width),s.height=Math.max(1,t.height)),e.isPaintBoundsInverted()&&!i&&(a=(t.width-t.height)/2,s.x+=a,s.y-=a,l=s.width,s.width=s.height,s.height=l),null!=t.shape&&(a=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),l=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),a==mxConstants.ALIGN_CENTER)&&l==mxConstants.ALIGN_MIDDLE&&(s=t.shape.getLabelBounds(s)),mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null));return null!=a&&(s.width=parseFloat(a)*r),o||this.rotateLabelBounds(t,s,e,n,i),s},mxCellRenderer.prototype.rotateLabelBounds=function(t,e,n,i,l){var s,o,r,i=null!=i?i:n.margin,i=(e.y-=i.y*e.height,e.x-=i.x*e.width,this.legacySpacing&&("fill"==t.style[mxConstants.STYLE_OVERFLOW]||"width"==t.style[mxConstants.STYLE_OVERFLOW]||"block"==t.style[mxConstants.STYLE_OVERFLOW]&&"1"!=t.style[mxConstants.STYLE_BLOCK_SPACING])||(r=t.view.scale,i=n.getSpacing("1"==t.style[mxConstants.STYLE_BLOCK_SPACING],i),e.x+=i.x*r,e.y+=i.y*r,i=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),o=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),s=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null),e.width=Math.max(0,e.width-(i==mxConstants.ALIGN_CENTER&&null==s?n.spacingLeft*r+n.spacingRight*r:0)),e.height=Math.max(0,e.height-(o==mxConstants.ALIGN_MIDDLE?n.spacingTop*r+n.spacingBottom*r:0))),l?0:n.getTextRotation());0!=i&&null!=t&&t.view.graph.model.isVertex(t.cell)&&(s=t.getCenterX(),o=t.getCenterY(),e.x==s&&e.y==o||(r=i*(Math.PI/180),l=mxUtils.getRotatedPoint(new mxPoint(e.x,e.y),Math.cos(r),Math.sin(r),new mxPoint(s,o)),e.x=l.x,e.y=l.y))},mxCellRenderer.prototype.redrawCellOverlays=function(o,r){var a,t,h,u;this.createCellOverlays(o),null!=o.overlays&&(a=mxUtils.mod(mxUtils.getValue(o.style,mxConstants.STYLE_ROTATION,0),90),t=mxUtils.toRadians(a),h=Math.cos(t),u=Math.sin(t),o.overlays.visit(function(t,e){var n,i,l,s=e.overlay.getBounds(o);o.view.graph.getModel().isEdge(o.cell)||null!=o.shape&&0!=a&&(i=s.getCenterX(),l=s.getCenterY(),i=(n=mxUtils.getRotatedPoint(new mxPoint(i,l),h,u,new mxPoint(o.getCenterX(),o.getCenterY()))).x,l=n.y,s.x=Math.round(i-s.width/2),s.y=Math.round(l-s.height/2)),!r&&null!=e.bounds&&e.scale==o.view.scale&&e.bounds.equals(s)||(e.bounds=s,e.scale=o.view.scale,e.redraw())}))},mxCellRenderer.prototype.redrawControl=function(t,e){var n,i,l=t.view.graph.getFoldingImage(t);null!=t.control&&null!=l&&(l=this.getControlBounds(t,l.width,l.height),n=this.legacyControlPosition?mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0):t.shape.getTextRotation(),i=t.view.scale,!e&&t.control.scale==i&&t.control.bounds.equals(l)&&t.control.rotation==n||(t.control.rotation=n,t.control.bounds=l,t.control.scale=i,t.control.redraw()))},mxCellRenderer.prototype.getControlBounds=function(t,e,n){var i,l,s,o,r;return null!=t.control?(i=t.view.scale,o=t.getCenterX(),r=t.getCenterY(),t.view.graph.getModel().isEdge(t.cell)||(o=t.x+e*i,r=t.y+n*i,null!=t.shape&&(s=t.shape.getShapeRotation(),this.legacyControlPosition?s=mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0):t.shape.isPaintBoundsInverted()&&(o+=l=(t.width-t.height)/2,r-=l),0!=s)&&(l=mxUtils.toRadians(s),s=Math.cos(l),l=Math.sin(l),o=(s=mxUtils.getRotatedPoint(new mxPoint(o,r),s,l,new mxPoint(t.getCenterX(),t.getCenterY()))).x,r=s.y)),t.view.graph.getModel().isEdge(t.cell),new mxRectangle(Math.round(o-e/2*i),Math.round(r-n/2*i),Math.round(e*i),Math.round(n*i))):null},mxCellRenderer.prototype.insertStateAfter=function(t,e,n){for(var i=this.getShapesForState(t),l=0;l<i.length;l++)if(null!=i[l]&&null!=i[l].node){var s=i[l].node.parentNode!=t.view.getDrawPane()&&i[l].node.parentNode!=t.view.getOverlayPane(),o=s?n:e;if(null!=o&&o.nextSibling!=i[l].node)null==o.nextSibling?o.parentNode.appendChild(i[l].node):o.parentNode.insertBefore(i[l].node,o.nextSibling);else if(null==o)if(i[l].node.parentNode==t.view.graph.container){for(var r=t.view.canvas;null!=r&&r.parentNode!=t.view.graph.container;)r=r.parentNode;null!=r&&null!=r.nextSibling?r.nextSibling!=i[l].node&&i[l].node.parentNode.insertBefore(i[l].node,r.nextSibling):i[l].node.parentNode.appendChild(i[l].node)}else null!=i[l].node.parentNode&&null!=i[l].node.parentNode.firstChild&&i[l].node.parentNode.firstChild!=i[l].node&&i[l].node.parentNode.insertBefore(i[l].node,i[l].node.parentNode.firstChild);s?n=i[l].node:e=i[l].node}return[e,n]},mxCellRenderer.prototype.getShapesForState=function(t){return[t.shape,t.text,t.control]},mxCellRenderer.prototype.redraw=function(t,e,n){e=this.redrawShape(t,e,n);null==t.shape||null!=n&&!n||(this.redrawLabel(t,e),this.redrawCellOverlays(t,e),this.redrawControl(t,e))},mxCellRenderer.prototype.redrawShape=function(t,e,n){var i=t.view.graph.model,l=!1;return null!=t.shape&&null!=t.shape.style&&null!=t.style&&t.shape.style[mxConstants.STYLE_SHAPE]!=t.style[mxConstants.STYLE_SHAPE]&&(t.shape.destroy(),t.shape=null),null==t.shape&&null!=t.view.graph.container&&t.cell!=t.view.currentRoot&&(i.isVertex(t.cell)||i.isEdge(t.cell))?(t.shape=this.createShape(t),null!=t.shape&&(t.shape.minSvgStrokeWidth=this.minSvgStrokeWidth,t.shape.antiAlias=this.antiAlias,this.createIndicatorShape(t),this.initializeShape(t),this.createCellOverlays(t),this.installListeners(t),t.view.graph.selectionCellsHandler.updateHandler(t))):e||null==t.shape||mxUtils.equalEntries(t.shape.style,t.style)&&!this.checkPlaceholderStyles(t)||(t.shape.resetStyles(),this.configureShape(t),t.view.graph.selectionCellsHandler.updateHandler(t),e=!0),null!=t.shape&&t.shape.indicatorShape!=this.getShape(t.view.graph.getIndicatorShape(t))&&(null!=t.shape.indicator&&(t.shape.indicator.destroy(),t.shape.indicator=null),this.createIndicatorShape(t),null!=t.shape.indicatorShape)&&(t.shape.indicator=new t.shape.indicatorShape,t.shape.indicator.dialect=t.shape.dialect,t.shape.indicator.init(t.node),e=!0),null!=t.shape&&(this.createControl(t),e||this.isShapeInvalid(t,t.shape))&&(null!=t.absolutePoints?(t.shape.points=t.absolutePoints.slice(),t.shape.bounds=null):(t.shape.points=null,t.shape.bounds=new mxRectangle(t.x,t.y,t.width,t.height)),t.shape.scale=t.view.scale,null!=n&&!n||this.doRedrawShape(t),l=!0),l},mxCellRenderer.prototype.doRedrawShape=function(t){t.shape.redraw()},mxCellRenderer.prototype.isShapeInvalid=function(t,e){return null==e.bounds||e.scale!=t.view.scale||null==t.absolutePoints&&!e.bounds.equals(t)||null!=t.absolutePoints&&!mxUtils.equalPoints(e.points,t.absolutePoints)},mxCellRenderer.prototype.destroy=function(t){null!=t.shape&&(null!=t.text&&(t.text.destroy(),t.text=null),null!=t.overlays&&(t.overlays.visit(function(t,e){e.destroy()}),t.overlays=null),null!=t.control&&(t.control.destroy(),t.control=null),t.shape.destroy(),t.shape=null)},__mxOutput.mxCellRenderer=void 0!==mxCellRenderer?mxCellRenderer:void 0;var mxEdgeStyle={EntityRelation:function(t,e,n,i,l){var s=t.view,o=s.graph,r=mxUtils.getValue(t.style,mxConstants.STYLE_SEGMENT,mxConstants.ENTITY_SEGMENT)*s.scale,a=t.absolutePoints,h=a[0],a=a[a.length-1],u=!1;if(null!=e&&((p=o.getCellGeometry(e.cell)).relative?u=p.x<=.5:null!=n&&(u=(null!=a?a.x:n.x+n.width)<(null!=h?h:e).x)),null!=h)(e=new mxCellState).x=h.x,e.y=h.y;else{if(null==e)return;(d=mxUtils.getPortConstraints(e,t,!0,mxConstants.DIRECTION_MASK_NONE))!=mxConstants.DIRECTION_MASK_NONE&&d!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST&&(u=d==mxConstants.DIRECTION_MASK_WEST)}var d,p=!0;null!=n&&((o=o.getCellGeometry(n.cell)).relative?p=o.x<=.5:null!=e&&(p=(null!=h?h.x:e.x+e.width)<(null!=a?a:n).x)),null!=a?((n=new mxCellState).x=a.x,n.y=a.y):null!=n&&(d=mxUtils.getPortConstraints(n,t,!1,mxConstants.DIRECTION_MASK_NONE))!=mxConstants.DIRECTION_MASK_NONE&&d!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST&&(p=d==mxConstants.DIRECTION_MASK_WEST),null!=e&&null!=n&&(o=u?e.x:e.x+e.width,h=s.getRoutingCenterY(e),a=p?n.x:n.x+n.width,t=s.getRoutingCenterY(n),d=r,e=new mxPoint(o+(u?-d:d),h),s=new mxPoint(a+(p?-d:d),t),u==p?(n=u?Math.min(o,a)-r:Math.max(o,a)+r,l.push(new mxPoint(n,h)),l.push(new mxPoint(n,t))):(e.x<s.x==u?(d=h+(t-h)/2,l.push(e),l.push(new mxPoint(e.x,d)),l.push(new mxPoint(s.x,d))):l.push(e),l.push(s)))},Loop:function(t,e,n,i,l){var s,o,r,a,h,u=t.absolutePoints,d=u[0],u=u[u.length-1];if(null!=d&&null!=u){if(null!=i&&0<i.length)for(var p=0;p<i.length;p++){var m=i[p];m=t.view.transformControlPoint(t,m),l.push(new mxPoint(m.x,m.y))}}else null!=e&&(u=(d=t.view).graph,null!=(m=null!=i&&0<i.length?i[0]:null)&&(m=d.transformControlPoint(t,m),mxUtils.contains(e,m.x,m.y))&&(m=null),a=r=o=s=0,u=mxUtils.getValue(t.style,mxConstants.STYLE_SEGMENT,u.gridSize)*d.scale,(h=mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_WEST))==mxConstants.DIRECTION_NORTH||h==mxConstants.DIRECTION_SOUTH?(s=d.getRoutingCenterX(e),o=u):(r=d.getRoutingCenterY(e),a=u),null==m||m.x<e.x||m.x>e.x+e.width?null!=m?(s=m.x,a=Math.max(Math.abs(r-m.y),a)):h==mxConstants.DIRECTION_NORTH?r=e.y-2*o:h==mxConstants.DIRECTION_SOUTH?r=e.y+e.height+2*o:s=h==mxConstants.DIRECTION_EAST?e.x-2*a:e.x+e.width+2*a:null!=m&&(s=d.getRoutingCenterX(e),o=Math.max(Math.abs(s-m.x),a),r=m.y,a=0),l.push(new mxPoint(s-o,r-a)),l.push(new mxPoint(s+o,r+a)))},ElbowConnector:function(t,e,n,i,l){var s,o,r,a,h=null!=i&&0<i.length?i[0]:null,u=!1,d=!1;null!=e&&null!=n&&(null!=h?(s=Math.min(e.x,n.x),o=Math.max(e.x+e.width,n.x+n.width),r=Math.min(e.y,n.y),a=Math.max(e.y+e.height,n.y+n.height),u=(h=t.view.transformControlPoint(t,h)).y<r||h.y>a,d=h.x<s||h.x>o):(u=(s=Math.max(e.x,n.x))==(o=Math.min(e.x+e.width,n.x+n.width)))||(d=(r=Math.max(e.y,n.y))==(a=Math.min(e.y+e.height,n.y+n.height)))),d||!u&&t.style[mxConstants.STYLE_ELBOW]!=mxConstants.ELBOW_VERTICAL?mxEdgeStyle.SideToSide(t,e,n,i,l):mxEdgeStyle.TopToBottom(t,e,n,i,l)},SideToSide:function(t,e,n,i,l){var s=t.view,i=null!=i&&0<i.length?i[0]:null,o=t.absolutePoints,r=o[0],o=o[o.length-1];null!=i&&(i=s.transformControlPoint(t,i)),null!=r&&((e=new mxCellState).x=r.x,e.y=r.y),null!=o&&((n=new mxCellState).x=o.x,n.y=o.y),null!=e&&null!=n&&(t=Math.max(e.x,n.x),r=Math.min(e.x+e.width,n.x+n.width),o=null!=i?i.x:Math.round(r+(t-r)/2),t=s.getRoutingCenterY(e),r=s.getRoutingCenterY(n),null!=i&&(i.y>=e.y&&i.y<=e.y+e.height&&(t=i.y),i.y>=n.y)&&i.y<=n.y+n.height&&(r=i.y),mxUtils.contains(n,o,t)||mxUtils.contains(e,o,t)||l.push(new mxPoint(o,t)),mxUtils.contains(n,o,r)||mxUtils.contains(e,o,r)||l.push(new mxPoint(o,r)),1==l.length)&&(null!=i?mxUtils.contains(n,o,i.y)||mxUtils.contains(e,o,i.y)||l.push(new mxPoint(o,i.y)):(s=Math.max(e.y,n.y),t=Math.min(e.y+e.height,n.y+n.height),l.push(new mxPoint(o,s+(t-s)/2))))},TopToBottom:function(t,e,n,i,l){var s=t.view,i=null!=i&&0<i.length?i[0]:null,o=t.absolutePoints,r=o[0],o=o[o.length-1];null!=i&&(i=s.transformControlPoint(t,i)),null!=r&&((e=new mxCellState).x=r.x,e.y=r.y),null!=o&&((n=new mxCellState).x=o.x,n.y=o.y),null!=e&&null!=n&&(t=Math.max(e.y,n.y),r=Math.min(e.y+e.height,n.y+n.height),o=s.getRoutingCenterX(e),null!=i&&i.x>=e.x&&i.x<=e.x+e.width&&(o=i.x),t=null!=i?i.y:Math.round(r+(t-r)/2),mxUtils.contains(n,o,t)||mxUtils.contains(e,o,t)||l.push(new mxPoint(o,t)),o=null!=i&&i.x>=n.x&&i.x<=n.x+n.width?i.x:s.getRoutingCenterX(n),mxUtils.contains(n,o,t)||mxUtils.contains(e,o,t)||l.push(new mxPoint(o,t)),1==l.length)&&(null!=i&&1==l.length?mxUtils.contains(n,i.x,t)||mxUtils.contains(e,i.x,t)||l.push(new mxPoint(i.x,t)):(r=Math.max(e.x,n.x),s=Math.min(e.x+e.width,n.x+n.width),l.push(new mxPoint(r+(s-r)/2,t))))},SegmentConnector:function(t,e,n,i,l){var s=mxEdgeStyle.scalePointArray(t.absolutePoints,t.view.scale),o=mxEdgeStyle.scaleCellState(e,t.view.scale),r=mxEdgeStyle.scaleCellState(n,t.view.scale),a=1,h=[];function u(t){h.push(t)}var d=0<l.length?l[0]:null,p=!0,m=null;var c=s[0],g=(null==c&&null!=o?c=new mxPoint(t.view.getRoutingCenterX(o),t.view.getRoutingCenterY(o)):null!=c&&(c=c.clone()),s.length-1);if(null!=i&&0<i.length){for(var x=[],y=0;y<i.length;y++){var C=t.view.transformControlPoint(t,i[y],!0);null!=C&&x.push(C)}if(0==x.length)return;null!=c&&null!=x[0]&&(Math.abs(x[0].x-c.x)<a&&(x[0].x=c.x),Math.abs(x[0].y-c.y)<a)&&(x[0].y=c.y);var f=s[g],v=(null!=f&&null!=x[x.length-1]&&(Math.abs(x[x.length-1].x-f.x)<a&&(x[x.length-1].x=f.x),Math.abs(x[x.length-1].y-f.y)<a)&&(x[x.length-1].y=f.y),m=x[0],o),E=s[0],S=m;null!=E&&(v=null);for(y=0;y<2;y++){var w=null!=E&&E.x==S.x,b=null!=E&&E.y==S.y,T=null!=v&&S.y>=v.y&&S.y<=v.y+v.height,M=null!=v&&S.x>=v.x&&S.x<=v.x+v.width,L=b||null==E&&T,I=w||null==E&&M;if(0!=y||!(L&&I||w&&b)){if(null!=E&&!b&&!w&&(T||M)){p=!T;break}if(I||L){p=L,1==y&&(p=x.length%2==0?L:I);break}}v=r,null!=(E=s[g])&&(v=null),S=x[x.length-1],w&&b&&(x=x.slice(1))}p&&(null!=s[0]&&s[0].y!=m.y||null==s[0]&&null!=o&&(m.y<o.y||m.y>o.y+o.height))?u(new mxPoint(c.x,m.y)):!p&&(null!=s[0]&&s[0].x!=m.x||null==s[0]&&null!=o&&(m.x<o.x||m.x>o.x+o.width))&&u(new mxPoint(m.x,c.y)),p?c.y=m.y:c.x=m.x;for(y=0;y<x.length;y++)m=x[y],(p=!p)?c.y=m.y:c.x=m.x,u(c.clone())}else m=c,p=!0;if(null!=(c=null==(c=s[g])&&null!=r?new mxPoint(t.view.getRoutingCenterX(r),t.view.getRoutingCenterY(r)):c)&&null!=m&&(p&&(null!=s[g]&&s[g].y!=m.y||null==s[g]&&null!=r&&(m.y<r.y||m.y>r.y+r.height))?u(new mxPoint(c.x,m.y)):!p&&(null!=s[g]&&s[g].x!=m.x||null==s[g]&&null!=r&&(m.x<r.x||m.x>r.x+r.width))&&u(new mxPoint(m.x,c.y))),null==s[0]&&null!=o)for(;0<h.length&&null!=h[0]&&mxUtils.contains(o,h[0].x,h[0].y);)h.splice(0,1);if(null==s[g]&&null!=r)for(;0<h.length&&null!=h[h.length-1]&&mxUtils.contains(r,h[h.length-1].x,h[h.length-1].y);)h.splice(h.length-1,1);for(var A,y=0;y<h.length;y++)(A=h[y]).x=Math.round(A.x*t.view.scale*10)/10,A.y=Math.round(A.y*t.view.scale*10)/10,(null==d||Math.abs(d.x-A.x)>=a||Math.abs(d.y-A.y)>=Math.max(1,t.view.scale))&&(l.push(A),d=A);null!=f&&null!=l[l.length-1]&&Math.abs(f.x-l[l.length-1].x)<=a&&Math.abs(f.y-l[l.length-1].y)<=a&&(l.splice(l.length-1,1),null!=l[l.length-1])&&(Math.abs(l[l.length-1].x-f.x)<a&&(l[l.length-1].x=f.x),Math.abs(l[l.length-1].y-f.y)<a)&&(l[l.length-1].y=f.y)},orthBuffer:10,orthPointsFallback:!0,dirVectors:[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]],wayPoints1:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],routePatterns:[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]],inlineRoutePatterns:[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]],vertexSeperations:[],limits:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],LEFT_MASK:32,TOP_MASK:64,RIGHT_MASK:128,BOTTOM_MASK:256,LEFT:1,TOP:2,RIGHT:4,BOTTOM:8,SIDE_MASK:480,CENTER_MASK:512,SOURCE_MASK:1024,TARGET_MASK:2048,VERTEX_MASK:3072,getJettySize:function(t,e){var n=mxUtils.getValue(t.style,e?mxConstants.STYLE_SOURCE_JETTY_SIZE:mxConstants.STYLE_TARGET_JETTY_SIZE,mxUtils.getValue(t.style,mxConstants.STYLE_JETTY_SIZE,mxEdgeStyle.orthBuffer));return n="auto"==n?mxUtils.getValue(t.style,e?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE?(t=mxUtils.getNumber(t.style,e?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE),Math.max(2,Math.ceil((t+mxEdgeStyle.orthBuffer)/mxEdgeStyle.orthBuffer))*mxEdgeStyle.orthBuffer):2*mxEdgeStyle.orthBuffer:n},scalePointArray:function(t,e){var n=[];if(null!=t)for(var i,l=0;l<t.length;l++)null!=t[l]?(i=new mxPoint(Math.round(t[l].x/e*10)/10,Math.round(t[l].y/e*10)/10),n[l]=i):n[l]=null;else n=null;return n},scaleCellState:function(t,e){var n=null;return null!=t?(n=t.clone()).setRect(Math.round(t.x/e*10)/10,Math.round(t.y/e*10)/10,Math.round(t.width/e*10)/10,Math.round(t.height/e*10)/10):n=null,n},OrthConnector:function(t,U,G,_,e){t.view.graph;var n=mxEdgeStyle.scalePointArray(t.absolutePoints,t.view.scale),i=mxEdgeStyle.scaleCellState(U,t.view.scale),l=mxEdgeStyle.scaleCellState(G,t.view.scale),s=n[0],o=n[n.length-1],n=(null!=i?i:s).x,r=(null!=i?i:s).y,a=null!=i?i.width:1,h=null!=i?i.height:1,u=(null!=l?l:o).x,d=(null!=l?l:o).y,p=null!=l?l.width:1,k=null!=l?l.height:1,m=mxEdgeStyle.getJettySize(t,!0),V=mxEdgeStyle.getJettySize(t,!1),c=(null!=i&&l==i&&(m=V=Math.max(m,V)),V+m),g=!1;if((g=null!=s&&null!=o?(z=o.x-s.x)*z+(B=o.y-s.y)*B<c*c:g)||mxEdgeStyle.orthPointsFallback&&null!=_&&0<_.length)mxEdgeStyle.SegmentConnector(t,U,G,_,e);else{var x=[mxConstants.DIRECTION_MASK_ALL,mxConstants.DIRECTION_MASK_ALL],g=0;if(null!=i&&(x[0]=mxUtils.getPortConstraints(i,t,!0,mxConstants.DIRECTION_MASK_ALL),0!=(g=mxUtils.getValue(i.style,mxConstants.STYLE_ROTATION,0)))&&(n=(w=mxUtils.getBoundingBox(new mxRectangle(n,r,a,h),g)).x,r=w.y,a=w.width,h=w.height),null!=l&&(x[1]=mxUtils.getPortConstraints(l,t,!1,mxConstants.DIRECTION_MASK_ALL),0!=(g=mxUtils.getValue(l.style,mxConstants.STYLE_ROTATION,0)))&&(u=(w=mxUtils.getBoundingBox(new mxRectangle(u,d,p,k),g)).x,d=w.y,p=w.width,k=w.height),0!=a&&0!=h&&0!=p&&0!=k){for(var y=[0,0],C=[[n,r,a,h],[u,d,p,k]],F=[m,V],f=0;f<2;f++)mxEdgeStyle.limits[f][1]=C[f][0]-F[f],mxEdgeStyle.limits[f][2]=C[f][1]-F[f],mxEdgeStyle.limits[f][4]=C[f][0]+C[f][2]+F[f],mxEdgeStyle.limits[f][8]=C[f][1]+C[f][3]+F[f];for(var z,U=C[0][0]+C[0][2]/2,G=C[0][1]+C[0][3]/2,_=C[1][0]+C[1][2]/2,B=G-(C[1][1]+C[1][3]/2),v=0,E=((z=U-_)<0?v=B<0?2:1:B<=0&&(v=3,0==z)&&(v=2),null),S=(null!=i&&(E=s),[[.5,.5],[.5,.5]]),f=0;f<2;f++)null!=E&&(S[f][0]=(E.x-C[f][0])/C[f][2],Math.abs(E.x-C[f][0])<=1?y[f]=mxConstants.DIRECTION_MASK_WEST:Math.abs(E.x-C[f][0]-C[f][2])<=1&&(y[f]=mxConstants.DIRECTION_MASK_EAST),S[f][1]=(E.y-C[f][1])/C[f][3],Math.abs(E.y-C[f][1])<=1?y[f]=mxConstants.DIRECTION_MASK_NORTH:Math.abs(E.y-C[f][1]-C[f][3])<=1&&(y[f]=mxConstants.DIRECTION_MASK_SOUTH)),(E=null)!=l&&(E=o);for(var g=C[0][1]-(C[1][1]+C[1][3]),w=C[0][0]-(C[1][0]+C[1][2]),n=C[1][1]-(C[0][1]+C[0][3]),r=C[1][0]-(C[0][0]+C[0][2]),b=(mxEdgeStyle.vertexSeperations[1]=Math.max(w-c,0),mxEdgeStyle.vertexSeperations[2]=Math.max(g-c,0),mxEdgeStyle.vertexSeperations[4]=Math.max(n-c,0),mxEdgeStyle.vertexSeperations[3]=Math.max(r-c,0),[]),T=[],M=[],a=(T[0]=r<=w?mxConstants.DIRECTION_MASK_WEST:mxConstants.DIRECTION_MASK_EAST,M[0]=n<=g?mxConstants.DIRECTION_MASK_NORTH:mxConstants.DIRECTION_MASK_SOUTH,T[1]=mxUtils.reversePortConstraints(T[0]),M[1]=mxUtils.reversePortConstraints(M[0]),r<=w?w:r),h=n<=g?g:n,L=[[0,0],[0,0]],u=!1,f=0;f<2;f++)0==y[f]&&(0==(T[f]&x[f])&&(T[f]=mxUtils.reversePortConstraints(T[f])),0==(M[f]&x[f])&&(M[f]=mxUtils.reversePortConstraints(M[f])),L[f][0]=M[f],L[f][1]=T[f]);0<h&&0<a&&(0<(T[0]&x[0])&&0<(M[1]&x[1])?(L[0][0]=T[0],L[0][1]=M[0],L[1][0]=M[1],L[1][1]=T[1],u=!0):0<(M[0]&x[0])&&0<(T[1]&x[1])&&(L[0][0]=M[0],L[0][1]=T[0],L[1][0]=T[1],L[1][1]=M[1],u=!0)),0<h&&!u&&(L[0][0]=M[0],L[0][1]=T[0],L[1][0]=M[1],L[1][1]=T[1],u=!0),0<a&&!u&&(L[0][0]=T[0],L[0][1]=M[0],L[1][0]=T[1],L[1][1]=M[1],u=!0);for(f=0;f<2;f++)0==y[f]&&(0==(L[f][0]&x[f])&&(L[f][0]=L[f][1]),b[f]=L[f][0]&x[f],b[f]|=(L[f][1]&x[f])<<8,b[f]|=(L[1-f][f]&x[f])<<16,b[f]|=(L[1-f][1-f]&x[f])<<24,0==(15&b[f])&&(b[f]=b[f]<<8),0==(3840&b[f])&&(b[f]=15&b[f]|b[f]>>8),0==(983040&b[f])&&(b[f]=65535&b[f]|(251658240&b[f])>>8),y[f]=15&b[f],x[f]==mxConstants.DIRECTION_MASK_WEST||x[f]==mxConstants.DIRECTION_MASK_NORTH||x[f]==mxConstants.DIRECTION_MASK_EAST||x[f]==mxConstants.DIRECTION_MASK_SOUTH)&&(y[f]=x[f]);var d=y[0]==mxConstants.DIRECTION_MASK_EAST?3:y[0],p=y[1]==mxConstants.DIRECTION_MASK_EAST?3:y[1],I=((d-=v)<1&&(d+=4),(p-=v)<1&&(p+=4),mxEdgeStyle.routePatterns[d-1][p-1]);switch(mxEdgeStyle.wayPoints1[0][0]=C[0][0],mxEdgeStyle.wayPoints1[0][1]=C[0][1],y[0]){case mxConstants.DIRECTION_MASK_WEST:mxEdgeStyle.wayPoints1[0][0]-=m,mxEdgeStyle.wayPoints1[0][1]+=S[0][1]*C[0][3];break;case mxConstants.DIRECTION_MASK_SOUTH:mxEdgeStyle.wayPoints1[0][0]+=S[0][0]*C[0][2],mxEdgeStyle.wayPoints1[0][1]+=C[0][3]+m;break;case mxConstants.DIRECTION_MASK_EAST:mxEdgeStyle.wayPoints1[0][0]+=C[0][2]+m,mxEdgeStyle.wayPoints1[0][1]+=S[0][1]*C[0][3];break;case mxConstants.DIRECTION_MASK_NORTH:mxEdgeStyle.wayPoints1[0][0]+=S[0][0]*C[0][2],mxEdgeStyle.wayPoints1[0][1]-=m}for(var A=0,Y=0<(y[0]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))?0:1,j=Y,f=0;f<I.length;f++){var P,N=15&I[f],N=N==mxConstants.DIRECTION_MASK_EAST?3:N,R=(4<(N+=v)&&(N-=4),mxEdgeStyle.dirVectors[N-1]),W=((P=0<N%2?0:1)!=Y&&(A++,mxEdgeStyle.wayPoints1[A][0]=mxEdgeStyle.wayPoints1[A-1][0],mxEdgeStyle.wayPoints1[A][1]=mxEdgeStyle.wayPoints1[A-1][1]),0<(I[f]&mxEdgeStyle.TARGET_MASK)),D=0<(I[f]&mxEdgeStyle.SOURCE_MASK),O=(I[f]&mxEdgeStyle.SIDE_MASK)>>5,X=(15<(O<<=v)&&(O>>=4),0<(I[f]&mxEdgeStyle.CENTER_MASK));(D||W)&&O<9?(W=0,D=D?0:1,W=X&&0==P?C[D][0]+S[D][0]*C[D][2]:X?C[D][1]+S[D][1]*C[D][3]:mxEdgeStyle.limits[D][O],0==P?0<(D=(W-mxEdgeStyle.wayPoints1[A][0])*R[0])&&(mxEdgeStyle.wayPoints1[A][0]+=R[0]*D):0<(O=(W-mxEdgeStyle.wayPoints1[A][1])*R[1])&&(mxEdgeStyle.wayPoints1[A][1]+=R[1]*O)):X&&(mxEdgeStyle.wayPoints1[A][0]+=R[0]*Math.abs(mxEdgeStyle.vertexSeperations[N]/2),mxEdgeStyle.wayPoints1[A][1]+=R[1]*Math.abs(mxEdgeStyle.vertexSeperations[N]/2)),0<A&&mxEdgeStyle.wayPoints1[A][P]==mxEdgeStyle.wayPoints1[A-1][P]?A--:Y=P}for(f=0;f<=A;f++){if(f==A)if(((0<(y[1]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))?0:1)==j?0:1)!=(A+1)%2)break;e.push(new mxPoint(Math.round(mxEdgeStyle.wayPoints1[f][0]*t.view.scale*10)/10,Math.round(mxEdgeStyle.wayPoints1[f][1]*t.view.scale*10)/10))}for(var H=1;H<e.length;)null==e[H-1]||null==e[H]||e[H-1].x!=e[H].x||e[H-1].y!=e[H].y?H++:e.splice(H,1)}}},getRoutePattern:function(t,e,n,i){var l=t[0]==mxConstants.DIRECTION_MASK_EAST?3:t[0],t=t[1]==mxConstants.DIRECTION_MASK_EAST?3:t[1],e=((l-=e)<1&&(l+=4),(t-=e)<1&&(t+=4),routePatterns[l-1][t-1]);return 0!=n&&0!=i||null!=inlineRoutePatterns[l-1][t-1]&&(e=inlineRoutePatterns[l-1][t-1]),e}},mxStyleRegistry=(__mxOutput.mxEdgeStyle=void 0!==mxEdgeStyle?mxEdgeStyle:void 0,{values:[],putValue:function(t,e){mxStyleRegistry.values[t]=e},getValue:function(t){return mxStyleRegistry.values[t]},getName:function(t){for(var e in mxStyleRegistry.values)if(mxStyleRegistry.values[e]==t)return e;return null}});function mxGraphView(t){this.graph=t,this.translate=new mxPoint,this.graphBounds=new mxRectangle,this.states=new mxDictionary}function mxCurrentRootChange(t,e){if(this.view=t,this.root=e,this.previous=e,this.isUp=null==e,!this.isUp)for(var n=this.view.currentRoot,i=this.view.graph.getModel();null!=n;){if(n==e){this.isUp=!0;break}n=i.getParent(n)}}function mxGraph(t,e,n,i,l){this.mouseListeners=null,this.renderHint=n,mxClient.IS_SVG?this.dialect=mxConstants.DIALECT_SVG:n==mxConstants.RENDERING_HINT_FASTEST?this.dialect=mxConstants.DIALECT_STRICTHTML:n==mxConstants.RENDERING_HINT_FASTER?this.dialect=mxConstants.DIALECT_PREFERHTML:this.dialect=mxConstants.DIALECT_MIXEDHTML,this.model=null!=e?e:new mxGraphModel,this.multiplicities=[],this.imageBundles=[],this.cellRenderer=this.createCellRenderer(),this.setSelectionModel(this.createSelectionModel()),this.setStylesheet(null!=i?i:this.createStylesheet()),this.view=this.createGraphView(),this.view.rendering=null!=l?l:this.view.rendering,this.graphModelChangeListener=mxUtils.bind(this,function(t,e){this.graphModelChanged(e.getProperty("edit").changes)}),this.model.addListener(mxEvent.CHANGE,this.graphModelChangeListener),this.createHandlers(),null!=t&&this.init(t),this.view.rendering&&this.view.revalidate()}function mxCellOverlay(t,e,n,i,l,s){this.image=t,this.tooltip=e,this.align=null!=n?n:this.align,this.verticalAlign=null!=i?i:this.verticalAlign,this.offset=null!=l?l:new mxPoint,this.cursor=null!=s?s:"help"}function mxOutline(t,e){this.source=t,null!=e&&this.init(e)}function mxMultiplicity(t,e,n,i,l,s,o,r,a,h){this.source=t,this.type=e,this.attr=n,this.value=i,this.min=null!=l?l:0,this.max=null!=s?s:"n",this.validNeighbors=o,this.countError=mxResources.get(r)||r,this.typeError=mxResources.get(a)||a,this.validNeighborsAllowed=null==h||h}function mxLayoutManager(t){this.undoHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.beforeUndo(e.getProperty("edit"))}),this.moveHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.cellsMoved(e.getProperty("cells"),e.getProperty("event"))}),this.resizeHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.cellsResized(e.getProperty("cells"),e.getProperty("bounds"),e.getProperty("previous"))}),this.setGraph(t)}function mxSwimlaneManager(t,e,n,i){this.horizontal=null==e||e,this.addEnabled=null==n||n,this.resizeEnabled=null==i||i,this.addHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.isAddEnabled()&&this.cellsAdded(e.getProperty("cells"))}),this.resizeHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.isResizeEnabled()&&this.cellsResized(e.getProperty("cells"))}),this.setGraph(t)}function mxTemporaryCellStates(l,t,e,n,s,o){t=null!=t?t:1,this.view=l,this.oldValidateCellState=l.validateCellState,this.oldBounds=l.getGraphBounds(),this.oldStates=l.getStates(),this.oldScale=l.getScale(),this.oldDoRedrawShape=l.graph.cellRenderer.doRedrawShape;var r=this;if(null!=s&&(l.graph.cellRenderer.doRedrawShape=function(n){var i=n.shape.paint;n.shape.paint=function(t){var e=s(n);null!=e&&t.setLink(e,null!=o?o(n):null),i.apply(this,arguments),null!=e&&t.setLink(null)},r.oldDoRedrawShape.apply(l.graph.cellRenderer,arguments),n.shape.paint=i}),l.validateCellState=function(t,e){return null==t||null==n||n(t)?r.oldValidateCellState.apply(l,arguments):null},l.setStates(new mxDictionary),l.setScale(t),null!=e){l.resetValidationState();for(var i=null,a=0;a<e.length;a++){var h=l.getBoundingBox(l.validateCellState(l.validateCell(e[a])));null==i?i=h:i.add(h)}l.setGraphBounds(i||new mxRectangle)}}function mxCellStatePreview(t){this.deltas=new mxDictionary,this.graph=t}function mxConnectionConstraint(t,e,n,i,l){this.point=t,this.perimeter=null==e||e,this.name=n,this.dx=i||0,this.dy=l||0}function mxGraphHandler(t){this.graph=t,this.graph.addMouseListener(this),this.panHandler=mxUtils.bind(this,function(){this.suspended||(this.updatePreview(),this.updateHint())}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.escapeHandler=mxUtils.bind(this,function(t,e){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler),this.refreshHandler=mxUtils.bind(this,function(t,e){this.refreshThread&&window.clearTimeout(this.refreshThread),this.refreshThread=window.setTimeout(mxUtils.bind(this,function(){var t,e;(this.refreshThread=null)==this.first||this.suspended||(t=this.currentDx,e=this.currentDy,this.currentDx=0,this.currentDy=0,this.updatePreview(),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),null!=this.pBounds||this.livePreviewUsed?(this.currentDx=t,this.currentDy=e,this.updatePreview(),this.updateHint(),this.livePreviewUsed&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1,!0),this.updatePreview())):this.reset())}),0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.addListener(mxEvent.REFRESH,this.refreshHandler),this.keyHandler=mxUtils.bind(this,function(t){null==this.graph.container||"hidden"==this.graph.container.style.visibility||null==this.first||this.suspended||(t=this.graph.isCloneEvent(t)&&this.graph.isCellsCloneable()&&this.isCloneEnabled())!=this.cloning&&(this.cloning=t,this.checkPreview(),this.updatePreview())}),mxEvent.addListener(document,"keydown",this.keyHandler),mxEvent.addListener(document,"keyup",this.keyHandler)}function mxPanningHandler(t){null!=t&&(this.graph=t,this.graph.addMouseListener(this),this.forcePanningHandler=mxUtils.bind(this,function(t,e){var n=e.getProperty("eventName"),e=e.getProperty("event");n==mxEvent.MOUSE_DOWN&&this.isForcePanningEvent(e)&&(this.start(e),this.active=!0,this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",e)),e.consume())}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=mxUtils.bind(this,function(t,e){this.isPinchEnabled()&&(e=e.getProperty("event"),mxEvent.isConsumed(e)||"gesturestart"!=e.type?"gestureend"==e.type&&null!=this.initialScale&&(this.initialScale=null):(this.initialScale=this.graph.view.scale,this.active||null==this.mouseDownEvent||(this.start(this.mouseDownEvent),this.mouseDownEvent=null)),null!=this.initialScale)&&this.zoomGraph(e)}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.reset()}),mxEvent.addGestureListeners(document,null,null,this.mouseUpListener),mxEvent.addListener(document,"mouseleave",this.mouseUpListener))}function mxPopupMenuHandler(t,e){null!=t&&(this.graph=t,this.factoryMethod=e,this.graph.addMouseListener(this),this.gestureHandler=mxUtils.bind(this,function(t,e){this.inTolerance=!1}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.init())}function mxCellMarker(t,e,n,i){mxEventSource.call(this),null!=t&&(this.graph=t,this.validColor=null!=e?e:mxConstants.DEFAULT_VALID_COLOR,this.invalidColor=null!=n?n:mxConstants.DEFAULT_INVALID_COLOR,this.hotspot=null!=i?i:mxConstants.DEFAULT_HOTSPOT,this.highlight=new mxCellHighlight(t))}function mxSelectionCellsHandler(t){mxEventSource.call(this),this.graph=t,this.handlers=new mxDictionary,this.graph.addMouseListener(this),this.redrawHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.refresh(!1)}),this.refreshHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.refresh(!0)}),this.graph.addListener(mxEvent.EDITING_STOPPED,this.redrawHandler),this.graph.addListener(mxEvent.EDITING_STARTED,this.redrawHandler),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.redrawHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE,this.refreshHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.DOWN,this.refreshHandler),this.graph.getView().addListener(mxEvent.UP,this.refreshHandler)}function mxConnectionHandler(t,e){mxEventSource.call(this),null!=t&&(this.graph=t,this.factoryMethod=e,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,e){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxConstraintHandler(t){this.graph=t,this.resetHandler=mxUtils.bind(this,function(t,e){null!=this.currentFocus&&null==this.graph.view.getState(this.currentFocus.cell)?this.reset():this.redraw()}),this.graph.model.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE,this.resetHandler),this.graph.addListener(mxEvent.ROOT,this.resetHandler)}function mxRubberband(t){null!=t&&(this.graph=t,this.graph.addMouseListener(this),this.forceRubberbandHandler=mxUtils.bind(this,function(t,e){var n,i=e.getProperty("eventName"),e=e.getProperty("event");i==mxEvent.MOUSE_DOWN&&this.isForceRubberbandEvent(e)&&(i=mxUtils.getOffset(this.graph.container),(n=mxUtils.getScrollOrigin(this.graph.container)).x-=i.x,n.y-=i.y,this.start(e.getX()+n.x,e.getY()+n.y),e.consume(!1))}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.gestureHandler=mxUtils.bind(this,function(t,e){null!=this.first&&this.reset()}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),mxClient.IS_IE)&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxHandle(t,e,n,i){this.graph=t.view.graph,this.state=t,this.cursor=null!=e?e:this.cursor,this.image=null!=n?n:this.image,this.shape=null!=i?i:null,this.init()}function mxVertexHandler(t){null!=t&&(this.state=t,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,e){this.livePreview&&null!=this.index&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxEdgeHandler(i){null!=i&&null!=i.shape&&(this.state=i,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,e){var n=null!=this.index;this.reset(),n&&this.graph.cellRenderer.redraw(this.state,!1,i.view.isRendering())}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxElbowEdgeHandler(t){mxEdgeHandler.call(this,t)}function mxEdgeSegmentHandler(t){mxEdgeHandler.call(this,t)}function mxKeyHandler(t,e){null!=t&&(this.graph=t,this.target=e||document.documentElement,this.normalKeys=[],this.shiftKeys=[],this.controlKeys=[],this.controlShiftKeys=[],this.keydownHandler=mxUtils.bind(this,function(t){this.keyDown(t)}),mxEvent.addListener(this.target,"keydown",this.keydownHandler),mxClient.IS_IE)&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxTooltipHandler(t,e){null!=t&&(this.graph=t,this.delay=e||500,this.graph.addMouseListener(this))}function mxCellTracker(t,e,n){mxCellMarker.call(this,t,e),this.graph.addMouseListener(this),null!=n&&(this.getCell=n),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxCellHighlight(t,e,n,i){null!=t&&(this.graph=t,this.highlightColor=null!=e?e:mxConstants.DEFAULT_VALID_COLOR,this.strokeWidth=null!=n?n:mxConstants.HIGHLIGHT_STROKEWIDTH,this.dashed=null!=i&&i,this.opacity=mxConstants.HIGHLIGHT_OPACITY,this.repaintHandler=mxUtils.bind(this,function(){var t;null!=this.state&&(null==(t=this.graph.view.getState(this.state.cell))?this.hide():(this.state=t,this.repaint()))}),this.graph.getView().addListener(mxEvent.SCALE,this.repaintHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.repaintHandler),this.resetHandler=mxUtils.bind(this,function(){this.hide()}),this.graph.getView().addListener(mxEvent.DOWN,this.resetHandler),this.graph.getView().addListener(mxEvent.UP,this.resetHandler))}mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ELBOW,mxEdgeStyle.ElbowConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ENTITY_RELATION,mxEdgeStyle.EntityRelation),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_LOOP,mxEdgeStyle.Loop),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SIDETOSIDE,mxEdgeStyle.SideToSide),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_TOPTOBOTTOM,mxEdgeStyle.TopToBottom),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ORTHOGONAL,mxEdgeStyle.OrthConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SEGMENT,mxEdgeStyle.SegmentConnector),mxStyleRegistry.putValue(mxConstants.PERIMETER_ELLIPSE,mxPerimeter.EllipsePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RECTANGLE,mxPerimeter.RectanglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RHOMBUS,mxPerimeter.RhombusPerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_TRIANGLE,mxPerimeter.TrianglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_HEXAGON,mxPerimeter.HexagonPerimeter),__mxOutput.mxStyleRegistry=void 0!==mxStyleRegistry?mxStyleRegistry:void 0,mxGraphView.prototype=new mxEventSource,mxGraphView.prototype.constructor=mxGraphView,mxGraphView.prototype.EMPTY_POINT=new mxPoint,mxGraphView.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphView.prototype.updatingDocumentResource="none"!=mxClient.language?"updatingDocument":"",mxGraphView.prototype.allowEval=!1,mxGraphView.prototype.captureDocumentGesture=!0,mxGraphView.prototype.rendering=!0,mxGraphView.prototype.graph=null,mxGraphView.prototype.currentRoot=null,mxGraphView.prototype.graphBounds=null,mxGraphView.prototype.scale=1,mxGraphView.prototype.translate=null,mxGraphView.prototype.states=null,mxGraphView.prototype.updateStyle=!1,mxGraphView.prototype.lastNode=null,mxGraphView.prototype.lastHtmlNode=null,mxGraphView.prototype.lastForegroundNode=null,mxGraphView.prototype.lastForegroundHtmlNode=null,mxGraphView.prototype.getGraphBounds=function(){return this.graphBounds},mxGraphView.prototype.setGraphBounds=function(t){this.graphBounds=t},mxGraphView.prototype.getBounds=function(t){var e=null;if(null!=t&&0<t.length)for(var n,i=this.graph.getModel(),l=0;l<t.length;l++)(i.isVertex(t[l])||i.isEdge(t[l]))&&null!=(n=this.getState(t[l]))&&(null==e?e=mxRectangle.fromRectangle(n):e.add(n));return e},mxGraphView.prototype.setCurrentRoot=function(t){var e,n;return this.currentRoot!=t&&((e=new mxCurrentRootChange(this,t)).execute(),(n=new mxUndoableEdit(this,!0)).add(e),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",n)),this.graph.sizeDidChange()),t},mxGraphView.prototype.scaleAndTranslate=function(t,e,n){var i=this.scale,l=new mxPoint(this.translate.x,this.translate.y);this.scale==t&&this.translate.x==e&&this.translate.y==n||(this.scale=t,this.translate.x=e,this.translate.y=n,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.SCALE_AND_TRANSLATE,"scale",t,"previousScale",i,"translate",this.translate,"previousTranslate",l))},mxGraphView.prototype.getScale=function(){return this.scale},mxGraphView.prototype.setScale=function(t){var e=this.scale;this.scale!=t&&(this.scale=t,this.isEventsEnabled())&&this.viewStateChanged(),this.fireEvent(new mxEventObject(mxEvent.SCALE,"scale",t,"previousScale",e))},mxGraphView.prototype.getTranslate=function(){return this.translate},mxGraphView.prototype.setTranslate=function(t,e){var n=new mxPoint(this.translate.x,this.translate.y);this.translate.x==t&&this.translate.y==e||(this.translate.x=t,this.translate.y=e,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.TRANSLATE,"translate",this.translate,"previousTranslate",n))},mxGraphView.prototype.viewStateChanged=function(){this.revalidate(),this.graph.sizeDidChange()},mxGraphView.prototype.refresh=function(){null!=this.currentRoot&&this.clear(),this.revalidate()},mxGraphView.prototype.revalidate=function(){this.invalidate(),this.validate()},mxGraphView.prototype.clear=function(t,e,n){var i=this.graph.getModel();if(t=t||i.getRoot(),e=null!=e&&e,n=null==n||n,this.removeState(t),n&&(e||t!=this.currentRoot))for(var l=i.getChildCount(t),s=0;s<l;s++)this.clear(i.getChildAt(t,s),e);else this.invalidate(t)},mxGraphView.prototype.invalidate=function(t,e,n){var i=this.graph.getModel();if(null!=(t=t||i.getRoot())){e=null==e||e,n=null==n||n;var l=this.getState(t);if(null!=l&&(l.invalid=!0),!t.invalidating){if(t.invalidating=!0,e)for(var s=i.getChildCount(t),o=0;o<s;o++){var r=i.getChildAt(t,o);this.invalidate(r,e,n)}if(n)for(var a=i.getEdgeCount(t),o=0;o<a;o++)this.invalidate(i.getEdgeAt(t,o),e,n);delete t.invalidating}}},mxGraphView.prototype.validate=function(t){var e=mxLog.enter("mxGraphView.validate"),n=(window.status=mxResources.get(this.updatingDocumentResource)||this.updatingDocumentResource,this.resetValidationState(),null),t=(null==this.canvas||null!=this.textDiv||8!=document.documentMode||mxClient.IS_EM||(this.placeholder=document.createElement("div"),this.placeholder.style.position="absolute",this.placeholder.style.width=this.canvas.clientWidth+"px",this.placeholder.style.height=this.canvas.clientHeight+"px",this.canvas.parentNode.appendChild(this.placeholder),n=this.drawPane.style.display,this.canvas.style.display="none",this.textDiv=document.createElement("div"),this.textDiv.style.position="absolute",this.textDiv.style.whiteSpace="nowrap",this.textDiv.style.visibility="hidden",this.textDiv.style.display="inline-block",this.textDiv.style.zoom="1",document.body.appendChild(this.textDiv)),null!=t?t:null!=this.currentRoot?this.currentRoot:this.graph.getModel().getRoot()),t=this.validateCellState(this.validateCell(t)),t=this.getBoundingBox(t,!0,!0);this.setGraphBounds(null!=t?t:this.getEmptyBounds()),this.validateBackground(),null!=n&&(this.canvas.style.display=n,this.textDiv.parentNode.removeChild(this.textDiv),null!=this.placeholder&&this.placeholder.parentNode.removeChild(this.placeholder),this.textDiv=null),this.resetValidationState(),window.status=mxResources.get(this.doneResource)||this.doneResource,mxLog.leave("mxGraphView.validate",e)},mxGraphView.prototype.getEmptyBounds=function(){return new mxRectangle(this.translate.x*this.scale,this.translate.y*this.scale)},mxGraphView.prototype.updateBoundingBox=function(t){null!=t.shape&&t.shape.updateBoundingBox(),null!=t.text&&t.text.updateBoundingBox()},mxGraphView.prototype.getBoundingBox=function(t,e,n){e=null==e||e,n=null!=n&&n;var i=null;if(null!=t){function l(t){var e;null==(e=t)||null==e.boundingBox||isNaN(e.boundingBox.x)||isNaN(e.boundingBox.y)||isNaN(e.boundingBox.width)||isNaN(e.boundingBox.height)||(null==i?i=t.boundingBox.clone():i.add(t.boundingBox))}if(n&&this.updateBoundingBox(t),l(t.shape),l(t.text),e)for(var s=this.graph.getModel(),o=s.getChildCount(t.cell),r=0;r<o;r++){var a=this.getBoundingBox(this.getState(s.getChildAt(t.cell,r)),e,n);null!=a&&(null==i?i=a:i.add(a))}}return i},mxGraphView.prototype.createBackgroundPageShape=function(t){return new mxRectangleShape(t,"white","black")},mxGraphView.prototype.validateBackground=function(){this.validateBackgroundImage(),this.validateBackgroundPage()},mxGraphView.prototype.validateBackgroundImage=function(){var t,e=this.graph.getBackgroundImage();null!=e?(null!=this.backgroundImage&&this.backgroundImage.image==e.src||(null!=this.backgroundImage&&this.backgroundImage.destroy(),t=new mxRectangle(0,0,1,1),this.backgroundImage=new mxImageShape(t,e.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw()),this.redrawBackgroundImage(this.backgroundImage,e)):null!=this.backgroundImage&&(this.backgroundImage.destroy(),this.backgroundImage=null)},mxGraphView.prototype.validateBackgroundPage=function(){var t;this.graph.pageVisible?(t=this.getBackgroundPageBounds(),null==this.backgroundPageShape?(this.backgroundPageShape=this.createBackgroundPageShape(t),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.graph.nativeDblClickEnabled&&mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(t){this.graph.dblClick(t)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.isHideOnHover()&&this.graph.tooltipHandler.hide(),this.graph.isMouseDown&&!mxEvent.isConsumed(t)&&this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))}))):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=t,this.backgroundPageShape.redraw())):null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)},mxGraphView.prototype.getBackgroundPageBounds=function(){var t=this.graph.pageFormat,e=this.scale*this.graph.pageScale;return new mxRectangle(this.scale*this.translate.x,this.scale*this.translate.y,t.width*e,t.height*e)},mxGraphView.prototype.redrawBackgroundImage=function(t,e){e=new mxRectangle(this.scale*(this.translate.x+e.x),this.scale*(this.translate.y+e.y),this.scale*e.width,this.scale*e.height);t.scale==this.scale&&e.equals(t.bounds)||(t.scale=this.scale,t.bounds=e,null==t.node||"g"!=t.node.nodeName||"image"!=t.node.firstChild.nodeName&&"svg"!=t.node.firstChild.nodeName?t.redraw():(t.node.firstChild.setAttribute("x",e.x),t.node.firstChild.setAttribute("y",e.y),t.node.firstChild.setAttribute("width",e.width),t.node.firstChild.setAttribute("height",e.height)))},mxGraphView.prototype.validateCell=function(t,e){if(e=null==e||e,null!=t)if(e=e&&this.graph.isCellVisible(t),null==this.getState(t,e)||e)for(var n=this.graph.getModel(),i=n.getChildCount(t),l=0;l<i;l++)this.validateCell(n.getChildAt(t,l),e&&(!this.isCellCollapsed(t)||t==this.currentRoot));else this.removeState(t);return t},mxGraphView.prototype.validateCellState=function(t,e){e=null==e||e;var n=null;if(null!=t&&null!=(n=this.getState(t))){var i=this.graph.getModel();if(n.invalid&&(n.invalid=!1,null!=n.style&&!n.invalidStyle||(n.style=this.graph.getCellStyle(n.cell),n.invalidStyle=!1),t!=this.currentRoot&&this.validateCellState(i.getParent(t),!1),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(t,!0),!1),!0),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(t,!1),!1),!1),this.updateCellState(n),t==this.currentRoot||n.invalid||(this.graph.cellRenderer.redraw(n,!1,this.isRendering()),n.updateCachedBounds())),e&&!n.invalid){null!=n.shape&&this.stateValidated(n);for(var l=i.getChildCount(t),s=0;s<l;s++)this.validateCellState(i.getChildAt(t,s))}}return n},mxGraphView.prototype.updateCellState=function(t){var e,n,i,l,s;t.absoluteOffset.x=0,t.absoluteOffset.y=0,t.origin.x=0,t.origin.y=0,t.length=0,t.cell!=this.currentRoot&&(e=this.graph.getModel(),null!=(n=this.getState(e.getParent(t.cell)))&&n.cell!=this.currentRoot&&(t.origin.x+=n.origin.x,t.origin.y+=n.origin.y),null!=(s=this.graph.getChildOffsetForCell(t.cell))&&(t.origin.x+=s.x,t.origin.y+=s.y),null!=(i=this.graph.getCellGeometry(t.cell)))&&(e.isEdge(t.cell)||(s=null!=i.offset?i.offset:this.EMPTY_POINT,i.relative&&null!=n?e.isEdge(n.cell)?null!=(l=this.getPoint(n,i))&&(t.origin.x+=l.x/this.scale-n.origin.x-this.translate.x,t.origin.y+=l.y/this.scale-n.origin.y-this.translate.y):(t.origin.x+=i.x*n.unscaledWidth+s.x,t.origin.y+=i.y*n.unscaledHeight+s.y):(t.absoluteOffset.x=this.scale*s.x,t.absoluteOffset.y=this.scale*s.y,t.origin.x+=i.x,t.origin.y+=i.y)),t.x=this.scale*(this.translate.x+t.origin.x),t.y=this.scale*(this.translate.y+t.origin.y),t.width=this.scale*i.width,t.unscaledWidth=i.width,t.height=this.scale*i.height,t.unscaledHeight=i.height,e.isVertex(t.cell)&&this.updateVertexState(t,i),e.isEdge(t.cell))&&this.updateEdgeState(t,i),t.updateCachedBounds()},mxGraphView.prototype.isCellCollapsed=function(t){return this.graph.isCellCollapsed(t)},mxGraphView.prototype.updateVertexState=function(t,e){var n,i=this.graph.getModel(),l=this.getState(i.getParent(t.cell));e.relative&&null!=l&&!i.isEdge(l.cell)&&0!=(e=mxUtils.toRadians(l.style[mxConstants.STYLE_ROTATION]||"0"))&&(i=Math.cos(e),e=Math.sin(e),n=new mxPoint(t.getCenterX(),t.getCenterY()),l=new mxPoint(l.getCenterX(),l.getCenterY()),n=mxUtils.getRotatedPoint(n,i,e,l),t.x=n.x-t.width/2,t.y=n.y-t.height/2),this.updateVertexLabelOffset(t)},mxGraphView.prototype.updateEdgeState=function(t,e){var n=t.getVisibleTerminalState(!0),i=t.getVisibleTerminalState(!1);null!=this.graph.model.getTerminal(t.cell,!0)&&null==n||null==n&&null==e.getTerminalPoint(!0)||null!=this.graph.model.getTerminal(t.cell,!1)&&null==i||null==i&&null==e.getTerminalPoint(!1)||(this.updateFixedTerminalPoints(t,n,i),this.updatePoints(t,e.points,n,i),this.updateFloatingTerminalPoints(t,n,i),e=t.absolutePoints,t.cell!=this.currentRoot&&(null==e||e.length<2||null==e[0]||null==e[e.length-1]))?this.clear(t.cell,!0):(this.updateEdgeBounds(t),this.updateEdgeLabelOffset(t))},mxGraphView.prototype.updateVertexLabelOffset=function(t){var e,n=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),i=(n==mxConstants.ALIGN_LEFT?(null!=(e=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null))?e*=this.scale:e=t.width,t.absoluteOffset.x-=e):n==mxConstants.ALIGN_RIGHT?t.absoluteOffset.x+=t.width:n==mxConstants.ALIGN_CENTER&&null!=(e=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null))&&(n=0,(i=mxUtils.getValue(t.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER))==mxConstants.ALIGN_CENTER?n=.5:i==mxConstants.ALIGN_RIGHT&&(n=1),0!=n)&&(t.absoluteOffset.x-=(e*this.scale-t.width)*n),mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE));i==mxConstants.ALIGN_TOP?t.absoluteOffset.y-=t.height:i==mxConstants.ALIGN_BOTTOM&&(t.absoluteOffset.y+=t.height)},mxGraphView.prototype.resetValidationState=function(){this.lastNode=null,this.lastHtmlNode=null,this.lastForegroundNode=null,this.lastForegroundHtmlNode=null},mxGraphView.prototype.stateValidated=function(t){var e=this.graph.getModel().isEdge(t.cell)&&this.graph.keepEdgesInForeground||this.graph.getModel().isVertex(t.cell)&&this.graph.keepEdgesInBackground,n=e&&this.lastForegroundHtmlNode||this.lastHtmlNode,i=e&&this.lastForegroundNode||this.lastNode,t=this.graph.cellRenderer.insertStateAfter(t,i,n);e?(this.lastForegroundHtmlNode=t[1],this.lastForegroundNode=t[0]):(this.lastHtmlNode=t[1],this.lastNode=t[0])},mxGraphView.prototype.updateFixedTerminalPoints=function(t,e,n){this.updateFixedTerminalPoint(t,e,!0,this.graph.getConnectionConstraint(t,e,!0)),this.updateFixedTerminalPoint(t,n,!1,this.graph.getConnectionConstraint(t,n,!1))},mxGraphView.prototype.updateFixedTerminalPoint=function(t,e,n,i){t.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(t,e,n,i),n)},mxGraphView.prototype.getFixedTerminalPoint=function(t,e,n,i){var l,s=null;return s=null==(s=null!=i?this.graph.getConnectionPoint(e,i,!1):s)&&null==e&&(i=this.scale,e=this.translate,l=t.origin,null!=(s=this.graph.getCellGeometry(t.cell).getTerminalPoint(n)))?new mxPoint(i*(e.x+s.x+l.x),i*(e.y+s.y+l.y)):s},mxGraphView.prototype.updateBoundsFromStencil=function(t){var e,n=null;return null!=t&&null!=t.shape&&null!=t.shape.stencil&&"fixed"==t.shape.stencil.aspect&&(n=mxRectangle.fromRectangle(t),e=t.shape.stencil.computeAspect(t.style,t.x,t.y,t.width,t.height),t.setRect(e.x,e.y,t.shape.stencil.w0*e.width,t.shape.stencil.h0*e.height)),n},mxGraphView.prototype.updatePoints=function(t,e,n,i){if(null!=t){var l=[],s=(l.push(t.absolutePoints[0]),this.getEdgeStyle(t,e,n,i));if(null!=s){var n=this.getTerminalPort(t,n,!0),i=this.getTerminalPort(t,i,!1),o=this.updateBoundsFromStencil(n),r=this.updateBoundsFromStencil(i);s(t,n,i,e,l),null!=o&&n.setRect(o.x,o.y,o.width,o.height),null!=r&&i.setRect(r.x,r.y,r.width,r.height)}else if(null!=e)for(var a,h=0;h<e.length;h++)null!=e[h]&&(a=mxUtils.clone(e[h]),l.push(this.transformControlPoint(t,a)));s=t.absolutePoints;l.push(s[s.length-1]),t.absolutePoints=l}},mxGraphView.prototype.transformControlPoint=function(t,e,n){return null!=t&&null!=e?(t=t.origin,new mxPoint((n=n?1:this.scale)*(e.x+this.translate.x+t.x),n*(e.y+this.translate.y+t.y))):null},mxGraphView.prototype.isLoopStyleEnabled=function(t,e,n,i){var l=this.graph.getConnectionConstraint(t,n,!0),s=this.graph.getConnectionConstraint(t,i,!1);return!(!(null==e||e.length<2)||mxUtils.getValue(t.style,mxConstants.STYLE_ORTHOGONAL_LOOP,!1)&&(null!=l&&null!=l.point||null!=s&&null!=s.point))&&null!=n&&n==i},mxGraphView.prototype.getEdgeStyle=function(t,e,n,i){e=this.isLoopStyleEnabled(t,e,n,i)?mxUtils.getValue(t.style,mxConstants.STYLE_LOOP,this.graph.defaultLoopStyle):mxUtils.getValue(t.style,mxConstants.STYLE_NOEDGESTYLE,!1)?null:t.style[mxConstants.STYLE_EDGE];return"function"==typeof(e="string"==typeof e?n=null==(n=mxStyleRegistry.getValue(e))&&this.isAllowEval()?mxUtils.eval(e):n:e)?e:null},mxGraphView.prototype.updateFloatingTerminalPoints=function(t,e,n){var i=t.absolutePoints,l=i[0];null==i[i.length-1]&&null!=n&&this.updateFloatingTerminalPoint(t,n,e,!1),null==l&&null!=e&&this.updateFloatingTerminalPoint(t,e,n,!0)},mxGraphView.prototype.updateFloatingTerminalPoint=function(t,e,n,i){t.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(t,e,n,i),i)},mxGraphView.prototype.getFloatingTerminalPoint=function(t,e,n,i){e=this.getTerminalPort(t,e,i);var l,s,n=this.getNextPoint(t,n,i),o=this.graph.isOrthogonal(t),r=mxUtils.toRadians(Number(e.style[mxConstants.STYLE_ROTATION]||"0")),a=new mxPoint(e.getCenterX(),e.getCenterY()),h=(0!=r&&(l=Math.cos(-r),s=Math.sin(-r),n=mxUtils.getRotatedPoint(n,l,s,a)),parseFloat(t.style[mxConstants.STYLE_PERIMETER_SPACING]||0)),t=(h+=parseFloat(t.style[i?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0),this.getPerimeterPoint(e,n,0==r&&o,h));return 0!=r&&(l=Math.cos(r),s=Math.sin(r),t=mxUtils.getRotatedPoint(t,l,s,a)),t},mxGraphView.prototype.getTerminalPort=function(t,e,n){var n=n?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT,t=mxUtils.getValue(t.style,n);return e=null!=t&&null!=(n=this.getState(this.graph.getModel().getCell(t)))?n:e},mxGraphView.prototype.getPerimeterPoint=function(t,e,n,i){var l,s,o=null;return o=null!=t&&(null!=(l=this.getPerimeterFunction(t))&&null!=e&&(0<(i=this.getPerimeterBounds(t,i)).width||0<i.height)&&(o=new mxPoint(e.x,e.y),s=e=!1,this.graph.model.isVertex(t.cell)&&(e=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPH,0),s=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPV,0),null!=t.shape&&null!=t.shape.stencil&&(e=1==mxUtils.getValue(t.style,"stencilFlipH",0)||e,s=1==mxUtils.getValue(t.style,"stencilFlipV",0)||s),e&&(o.x=2*i.getCenterX()-o.x),s)&&(o.y=2*i.getCenterY()-o.y),null!=(o=l(i,t,o,n)))&&(e&&(o.x=2*i.getCenterX()-o.x),s)&&(o.y=2*i.getCenterY()-o.y),null==o)?this.getPoint(t):o},mxGraphView.prototype.getRoutingCenterX=function(t){var e=null!=t.style&&parseFloat(t.style[mxConstants.STYLE_ROUTING_CENTER_X])||0;return t.getCenterX()+e*t.width},mxGraphView.prototype.getRoutingCenterY=function(t){var e=null!=t.style&&parseFloat(t.style[mxConstants.STYLE_ROUTING_CENTER_Y])||0;return t.getCenterY()+e*t.height},mxGraphView.prototype.getPerimeterBounds=function(t,e){return e=null!=e?e:0,null!=t&&(e+=parseFloat(t.style[mxConstants.STYLE_PERIMETER_SPACING]||0)),t.getPerimeterBounds(e*this.scale)},mxGraphView.prototype.getPerimeterFunction=function(t){var e,t=t.style[mxConstants.STYLE_PERIMETER];return"function"==typeof(t="string"==typeof t?e=null==(e=mxStyleRegistry.getValue(t))&&this.isAllowEval()?mxUtils.eval(t):e:t)?t:null},mxGraphView.prototype.getNextPoint=function(t,e,n){var i,t=t.absolutePoints,l=null;return null!=t&&2<=t.length&&(i=t.length,l=t[n?Math.min(1,i-1):Math.max(0,i-2)]),l=null==l&&null!=e?new mxPoint(e.getCenterX(),e.getCenterY()):l},mxGraphView.prototype.getVisibleTerminal=function(t,e){for(var n=this.graph.getModel(),i=n.getTerminal(t,e),l=i;null!=i&&i!=this.currentRoot;)this.graph.isCellVisible(l)&&!this.isCellCollapsed(i)||(l=i),i=n.getParent(i);return l=null==l||n.contains(l)&&n.getParent(l)!=n.getRoot()&&l!=this.currentRoot?l:null},mxGraphView.prototype.updateEdgeBounds=function(t){var e=t.absolutePoints,n=e[0],i=e[e.length-1],l=(n.x!=i.x||n.y!=i.y?(p=i.x-n.x,m=i.y-n.y,t.terminalDistance=Math.sqrt(p*p+m*m)):t.terminalDistance=0,0),s=[],o=n;if(null!=o){for(var r=o.x,a=o.y,h=r,u=a,d=1;d<e.length;d++){var p,m,c,g=e[d];null!=g&&(p=o.x-g.x,m=o.y-g.y,c=Math.sqrt(p*p+m*m),s.push(c),l+=c,o=g,r=Math.min(o.x,r),a=Math.min(o.y,a),h=Math.max(o.x,h),u=Math.max(o.y,u))}t.length=l,t.segments=s;t.x=r,t.y=a,t.width=Math.max(1,h-r),t.height=Math.max(1,u-a)}},mxGraphView.prototype.getPoint=function(t,e){var n=t.getCenterX(),i=t.getCenterY();if(null==t.segments||null!=e&&!e.relative)null!=e&&null!=(m=e.offset)&&(n+=m.x,i+=m.y);else{for(var l=null!=e?e.x/2:0,s=t.absolutePoints.length,o=Math.round((.5+l)*t.length),r=t.segments[0],a=0,h=1;o>=Math.round(a+r)&&h<s-1;)a+=r,r=t.segments[h++];var u,d,p,m,l=0==r?0:(o-a)/r,c=t.absolutePoints[h-1],g=t.absolutePoints[h];null!=c&&null!=g&&(d=u=p=0,null!=e&&(p=e.y,null!=(m=e.offset))&&(u=m.x,d=m.y),e=g.x-c.x,m=g.y-c.y,n=c.x+e*l+((0==r?0:m/r)*p+u)*this.scale,i=c.y+m*l-((0==r?0:e/r)*p-d)*this.scale)}return new mxPoint(n,i)},mxGraphView.prototype.getRelativePoint=function(t,e,n){var i=this.graph.getModel().getGeometry(t.cell);if(null!=i){var l=t.absolutePoints.length;if(i.relative&&1<l){for(var i=t.length,s=t.segments,o=t.absolutePoints[0],r=t.absolutePoints[1],a=mxUtils.ptSegDistSq(o.x,o.y,r.x,r.y,e,n),h=0,u=0,d=0,p=2;p<l;p++){var o=r,r=t.absolutePoints[p],m=mxUtils.ptSegDistSq(o.x,o.y,r.x,r.y,e,n);d+=s[p-2],m<=a&&(a=m,u=p-1,h=d)}var c=s[u],g=(o=t.absolutePoints[u],r=t.absolutePoints[u+1],o.x),x=o.y,y=r.x,C=r.y,f=e,v=n,g=g-y,x=x-C,E=0,y=(g-(f-=y))*g+(x-(v-=C))*x,E=y<=0?0:y*y/(g*g+x*x),f=Math.sqrt(E),C=(c<f&&(f=c),Math.sqrt(mxUtils.ptSegDistSq(o.x,o.y,r.x,r.y,e,n)));return new mxPoint((i/2-h-f)/i*-2,(C=-1==mxUtils.relativeCcw(o.x,o.y,r.x,r.y,e,n)?-C:C)/this.scale)}}return new mxPoint},mxGraphView.prototype.updateEdgeLabelOffset=function(t){var e,n,i,l,s,o=t.absolutePoints;t.absoluteOffset.x=t.getCenterX(),t.absoluteOffset.y=t.getCenterY(),null!=o&&0<o.length&&null!=t.segments&&((l=this.graph.getCellGeometry(t.cell)).relative?null!=(e=this.getPoint(t,l))&&(t.absoluteOffset=e):(e=o[0],o=o[o.length-1],null!=e&&null!=o&&(s=o.x-e.x,o=o.y-e.y,i=n=0,null!=(l=l.offset)&&(n=l.x,i=l.y),l=e.x+s/2+n*this.scale,s=e.y+o/2+i*this.scale,t.absoluteOffset.x=l,t.absoluteOffset.y=s)))},mxGraphView.prototype.getState=function(t,e){e=e||!1;var n=null;return null!=t&&(n=this.states.get(t),e)&&(null==n||this.updateStyle)&&this.graph.isCellVisible(t)&&(null==n?(n=this.createState(t),this.states.put(t,n)):n.style=this.graph.getCellStyle(t)),n},mxGraphView.prototype.isRendering=function(){return this.rendering},mxGraphView.prototype.setRendering=function(t){this.rendering=t},mxGraphView.prototype.isAllowEval=function(){return this.allowEval},mxGraphView.prototype.setAllowEval=function(t){this.allowEval=t},mxGraphView.prototype.getStates=function(){return this.states},mxGraphView.prototype.setStates=function(t){this.states=t},mxGraphView.prototype.getCellStates=function(t){if(null==t)return this.states;for(var e=[],n=0;n<t.length;n++){var i=this.getState(t[n]);null!=i&&e.push(i)}return e},mxGraphView.prototype.removeState=function(t){var e=null;return null!=t&&null!=(e=this.states.remove(t))&&(this.graph.cellRenderer.destroy(e),e.invalid=!0,e.destroy()),e},mxGraphView.prototype.createState=function(t){return new mxCellState(this,t,this.graph.getCellStyle(t))},mxGraphView.prototype.getCanvas=function(){return this.canvas},mxGraphView.prototype.getBackgroundPane=function(){return this.backgroundPane},mxGraphView.prototype.getDrawPane=function(){return this.drawPane},mxGraphView.prototype.getOverlayPane=function(){return this.overlayPane},mxGraphView.prototype.getDecoratorPane=function(){return this.decoratorPane},mxGraphView.prototype.isContainerEvent=function(t){t=mxEvent.getSource(t);return t==this.graph.container||this.backgroundPane.contains(t)||t==this.canvas.parentNode||t==this.canvas||t==this.drawPane||t==this.overlayPane||t==this.decoratorPane},mxGraphView.prototype.isScrollEvent=function(t){var e=mxUtils.getOffset(this.graph.container),t=new mxPoint(t.clientX-e.x,t.clientY-e.y),e=this.graph.container.offsetWidth,n=this.graph.container.clientWidth;return n<e&&t.x>n+2&&t.x<=e||(n=this.graph.container.offsetHeight,(e=this.graph.container.clientHeight)<n&&t.y>e+2&&t.y<=n)},mxGraphView.prototype.init=function(){this.installListeners(),this.graph.dialect==mxConstants.DIALECT_SVG?this.createSvg():this.createHtml()},mxGraphView.prototype.installListeners=function(){var i=this.graph,l=i.container;null!=l&&(mxClient.IS_TOUCH&&(mxEvent.addListener(l,"gesturestart",mxUtils.bind(this,function(t){i.fireGestureEvent(t),mxEvent.consume(t)})),mxEvent.addListener(l,"gesturechange",mxUtils.bind(this,function(t){i.fireGestureEvent(t),mxEvent.consume(t)})),mxEvent.addListener(l,"gestureend",mxUtils.bind(this,function(t){i.fireGestureEvent(t),mxEvent.consume(t)}))),mxEvent.addGestureListeners(l,mxUtils.bind(this,function(t){!this.isContainerEvent(t)||(mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_GC||mxClient.IS_OP||mxClient.IS_SF)&&this.isScrollEvent(t)||i.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.isContainerEvent(t)&&i.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.isContainerEvent(t)&&i.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))})),mxEvent.addListener(l,"dblclick",mxUtils.bind(this,function(t){this.isContainerEvent(t)&&i.dblClick(t)})),i.addMouseListener({mouseDown:function(t,e){i.popupMenuHandler.hideMenu()},mouseMove:function(){},mouseUp:function(){}}),this.moveHandler=mxUtils.bind(this,function(t){var e,n;null!=i.tooltipHandler&&i.tooltipHandler.isHideOnHover()&&i.tooltipHandler.hide(),this.captureDocumentGesture&&i.isMouseDown&&null!=i.container&&!this.isContainerEvent(t)&&"none"!=i.container.style.display&&"hidden"!=i.container.style.visibility&&!mxEvent.isConsumed(t)&&i.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,(t=t,n=null,mxClient.IS_TOUCH&&(e=mxEvent.getClientX(t),t=mxEvent.getClientY(t),e=mxUtils.convertPoint(l,e,t),n=i.view.getState(i.getCellAt(e.x,e.y))),n)))}),this.endHandler=mxUtils.bind(this,function(t){this.captureDocumentGesture&&i.isMouseDown&&null!=i.container&&!this.isContainerEvent(t)&&"none"!=i.container.style.display&&"hidden"!=i.container.style.visibility&&i.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))}),mxEvent.addGestureListeners(document,null,this.moveHandler,this.endHandler))},mxGraphView.prototype.createHtml=function(){var t=this.graph.container;null!=t&&(this.canvas=this.createHtmlPane("100%","100%"),this.canvas.style.overflow="hidden",this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),t.appendChild(this.canvas),this.updateContainerStyle(t))},mxGraphView.prototype.updateHtmlCanvasSize=function(t,e){var n,i;null!=this.graph.container&&(n=this.graph.container.offsetWidth,i=this.graph.container.offsetHeight,this.canvas.style.width=n<t?t+"px":"100%",this.canvas.style.height=i<e?e+"px":"100%")},mxGraphView.prototype.createHtmlPane=function(t,e){var n=document.createElement("DIV");return null!=t&&null!=e?(n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=t,n.style.height=e):n.style.position="relative",n},mxGraphView.prototype.createSvg=function(){var t=this.graph.container,e=(this.canvas=document.createElementNS(mxConstants.NS_SVG,"g"),this.backgroundPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.backgroundPane),this.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.drawPane),this.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.decoratorPane),document.createElementNS(mxConstants.NS_SVG,"svg"));e.style.left="0px",e.style.top="0px",e.style.width="100%",e.style.height="100%",e.style.display="block",e.appendChild(this.canvas),(mxClient.IS_IE||mxClient.IS_IE11)&&(e.style.overflow="hidden"),null!=t&&(t.appendChild(e),this.updateContainerStyle(t))},mxGraphView.prototype.updateContainerStyle=function(t){var e=mxUtils.getCurrentStyle(t);null!=e&&"static"==e.position&&(t.style.position="relative"),mxClient.IS_POINTER&&(t.style.touchAction="none")},mxGraphView.prototype.destroy=function(){var t=null!=this.canvas?this.canvas.ownerSVGElement:null;null!=(t=null==t?this.canvas:t)&&null!=t.parentNode&&(this.clear(this.currentRoot,!0),mxEvent.removeGestureListeners(document,null,this.moveHandler,this.endHandler),mxEvent.release(this.graph.container),t.parentNode.removeChild(t),this.moveHandler=null,this.endHandler=null,this.canvas=null,this.backgroundPane=null,this.drawPane=null,this.overlayPane=null,this.decoratorPane=null)},mxCurrentRootChange.prototype.execute=function(){var t=this.view.currentRoot,t=(this.view.currentRoot=this.previous,this.previous=t,this.view.graph.getTranslateForRoot(this.view.currentRoot)),t=(null!=t&&(this.view.translate=new mxPoint(-t.x,-t.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0),this.view.validate()):this.view.refresh(),this.isUp?mxEvent.UP:mxEvent.DOWN);this.view.fireEvent(new mxEventObject(t,"root",this.view.currentRoot,"previous",this.previous)),this.isUp=!this.isUp},__mxOutput.mxGraphView=void 0!==mxGraphView?mxGraphView:void 0,mxLoadResources?mxResources.add(mxClient.basePath+"/resources/graph"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/graph"),mxGraph.prototype=new mxEventSource,mxGraph.prototype.constructor=mxGraph,mxGraph.prototype.mouseListeners=null,mxGraph.prototype.isMouseDown=!1,mxGraph.prototype.model=null,mxGraph.prototype.view=null,mxGraph.prototype.stylesheet=null,mxGraph.prototype.selectionModel=null,mxGraph.prototype.cellEditor=null,mxGraph.prototype.cellRenderer=null,mxGraph.prototype.multiplicities=null,mxGraph.prototype.renderHint=null,mxGraph.prototype.dialect=null,mxGraph.prototype.gridSize=10,mxGraph.prototype.gridEnabled=!0,mxGraph.prototype.portsEnabled=!0,mxGraph.prototype.nativeDblClickEnabled=!0,mxGraph.prototype.doubleTapEnabled=!0,mxGraph.prototype.doubleTapTimeout=500,mxGraph.prototype.doubleTapTolerance=25,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchTime=0,mxGraph.prototype.tapAndHoldEnabled=!0,mxGraph.prototype.tapAndHoldDelay=350,mxGraph.prototype.tapAndHoldInProgress=!1,mxGraph.prototype.tapAndHoldValid=!1,mxGraph.prototype.initialTouchX=0,mxGraph.prototype.initialTouchY=0,mxGraph.prototype.tolerance=4,mxGraph.prototype.defaultOverlap=.5,mxGraph.prototype.defaultParent=null,mxGraph.prototype.alternateEdgeStyle=null,mxGraph.prototype.backgroundImage=null,mxGraph.prototype.pageVisible=!1,mxGraph.prototype.pageBreaksVisible=!1,mxGraph.prototype.pageBreakColor="gray",mxGraph.prototype.pageBreakDashed=!0,mxGraph.prototype.minPageBreakDist=20,mxGraph.prototype.preferPageSize=!1,mxGraph.prototype.pageFormat=mxConstants.PAGE_FORMAT_A4_PORTRAIT,mxGraph.prototype.pageScale=1.5,mxGraph.prototype.enabled=!0,mxGraph.prototype.escapeEnabled=!0,mxGraph.prototype.invokesStopCellEditing=!0,mxGraph.prototype.enterStopsCellEditing=!1,mxGraph.prototype.useScrollbarsForPanning=!0,mxGraph.prototype.exportEnabled=!0,mxGraph.prototype.importEnabled=!0,mxGraph.prototype.cellsLocked=!1,mxGraph.prototype.cellsCloneable=!0,mxGraph.prototype.foldingEnabled=!0,mxGraph.prototype.cellsEditable=!0,mxGraph.prototype.cellsDeletable=!0,mxGraph.prototype.cellsMovable=!0,mxGraph.prototype.edgeLabelsMovable=!0,mxGraph.prototype.vertexLabelsMovable=!1,mxGraph.prototype.dropEnabled=!1,mxGraph.prototype.splitEnabled=!0,mxGraph.prototype.cellsResizable=!0,mxGraph.prototype.cellsBendable=!0,mxGraph.prototype.cellsSelectable=!0,mxGraph.prototype.cellsDisconnectable=!0,mxGraph.prototype.autoSizeCells=!1,mxGraph.prototype.autoSizeCellsOnAdd=!1,mxGraph.prototype.autoScroll=!0,mxGraph.prototype.ignoreScrollbars=!1,mxGraph.prototype.translateToScrollPosition=!1,mxGraph.prototype.timerAutoScroll=!1,mxGraph.prototype.allowAutoPanning=!1,mxGraph.prototype.autoExtend=!0,mxGraph.prototype.maximumGraphBounds=null,mxGraph.prototype.minimumGraphSize=null,mxGraph.prototype.minimumContainerSize=null,mxGraph.prototype.maximumContainerSize=null,mxGraph.prototype.resizeContainer=!1,mxGraph.prototype.border=0,mxGraph.prototype.keepEdgesInForeground=!1,mxGraph.prototype.keepEdgesInBackground=!1,mxGraph.prototype.allowNegativeCoordinates=!0,mxGraph.prototype.constrainChildren=!0,mxGraph.prototype.constrainRelativeChildren=!1,mxGraph.prototype.extendParents=!0,mxGraph.prototype.extendParentsOnAdd=!0,mxGraph.prototype.extendParentsOnMove=!1,mxGraph.prototype.recursiveResize=!1,mxGraph.prototype.collapseToPreferredSize=!0,mxGraph.prototype.zoomFactor=1.2,mxGraph.prototype.keepSelectionVisibleOnZoom=!1,mxGraph.prototype.centerZoom=!0,mxGraph.prototype.resetViewOnRootChange=!0,mxGraph.prototype.resetEdgesOnResize=!1,mxGraph.prototype.resetEdgesOnMove=!1,mxGraph.prototype.resetEdgesOnConnect=!0,mxGraph.prototype.allowLoops=!1,mxGraph.prototype.defaultLoopStyle=mxEdgeStyle.Loop,mxGraph.prototype.multigraph=!0,mxGraph.prototype.connectableEdges=!1,mxGraph.prototype.allowDanglingEdges=!0,mxGraph.prototype.cloneInvalidEdges=!1,mxGraph.prototype.disconnectOnMove=!0,mxGraph.prototype.labelsVisible=!0,mxGraph.prototype.htmlLabels=!1,mxGraph.prototype.swimlaneSelectionEnabled=!0,mxGraph.prototype.swimlaneNesting=!0,mxGraph.prototype.swimlaneIndicatorColorAttribute=mxConstants.STYLE_FILLCOLOR,mxGraph.prototype.imageBundles=null,mxGraph.prototype.minFitScale=.1,mxGraph.prototype.maxFitScale=8,mxGraph.prototype.panDx=0,mxGraph.prototype.panDy=0,mxGraph.prototype.collapsedImage=new mxImage(mxClient.imageBasePath+"/collapsed.gif",9,9),mxGraph.prototype.expandedImage=new mxImage(mxClient.imageBasePath+"/expanded.gif",9,9),mxGraph.prototype.warningImage=new mxImage(mxClient.imageBasePath+"/warning"+(mxClient.IS_MAC?".png":".gif"),16,16),mxGraph.prototype.alreadyConnectedResource="none"!=mxClient.language?"alreadyConnected":"",mxGraph.prototype.containsValidationErrorsResource="none"!=mxClient.language?"containsValidationErrors":"",mxGraph.prototype.collapseExpandResource="none"!=mxClient.language?"collapse-expand":"",mxGraph.prototype.init=function(t){this.container=t,this.cellEditor=this.createCellEditor(),this.view.init(),this.sizeDidChange(),mxEvent.addListener(t,"mouseleave",mxUtils.bind(this,function(t){null!=this.tooltipHandler&&null!=this.tooltipHandler.div&&this.tooltipHandler.div!=t.relatedTarget&&this.tooltipHandler.hide()})),mxClient.IS_IE&&(mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})),mxEvent.addListener(t,"selectstart",mxUtils.bind(this,function(t){return this.isEditing()||!this.isMouseDown&&!mxEvent.isShiftDown(t)})))},mxGraph.prototype.createHandlers=function(){this.tooltipHandler=this.createTooltipHandler(),this.tooltipHandler.setEnabled(!1),this.selectionCellsHandler=this.createSelectionCellsHandler(),this.connectionHandler=this.createConnectionHandler(),this.connectionHandler.setEnabled(!1),this.graphHandler=this.createGraphHandler(),this.panningHandler=this.createPanningHandler(),this.panningHandler.panningEnabled=!1,this.popupMenuHandler=this.createPopupMenuHandler()},mxGraph.prototype.createTooltipHandler=function(){return new mxTooltipHandler(this)},mxGraph.prototype.createSelectionCellsHandler=function(){return new mxSelectionCellsHandler(this)},mxGraph.prototype.createConnectionHandler=function(){return new mxConnectionHandler(this)},mxGraph.prototype.createGraphHandler=function(){return new mxGraphHandler(this)},mxGraph.prototype.createPanningHandler=function(){return new mxPanningHandler(this)},mxGraph.prototype.createPopupMenuHandler=function(){return new mxPopupMenuHandler(this)},mxGraph.prototype.createSelectionModel=function(){return new mxGraphSelectionModel(this)},mxGraph.prototype.createStylesheet=function(){return new mxStylesheet},mxGraph.prototype.createGraphView=function(){return new mxGraphView(this)},mxGraph.prototype.createCellRenderer=function(){return new mxCellRenderer},mxGraph.prototype.createCellEditor=function(){return new mxCellEditor(this)},mxGraph.prototype.getModel=function(){return this.model},mxGraph.prototype.getView=function(){return this.view},mxGraph.prototype.getStylesheet=function(){return this.stylesheet},mxGraph.prototype.setStylesheet=function(t){this.stylesheet=t},mxGraph.prototype.getSelectionModel=function(){return this.selectionModel},mxGraph.prototype.setSelectionModel=function(t){this.selectionModel=t},mxGraph.prototype.getSelectionCellsForChanges=function(t,e){for(var i=new mxDictionary,l=[],s=mxUtils.bind(this,function(t){if(null!=t&&!i.get(t)&&this.model.contains(t)&&!this.model.isLayer(t))if(this.model.isEdge(t)||this.model.isVertex(t))i.put(t,!0),l.push(t);else for(var e=this.model.getChildCount(t),n=0;n<e;n++)s(this.model.getChildAt(t,n))}),n=0;n<t.length;n++){var o=t[n];o.constructor==mxRootChange||null!=e&&e(o)||s(this.getCellForChange(o))}return l},mxGraph.prototype.getCellForChange=function(t){var e=null;return t instanceof mxChildChange?e=t.child:null!=t.cell&&t.cell instanceof mxCell&&(e=t.cell),e},mxGraph.prototype.graphModelChanged=function(t){for(var e=0;e<t.length;e++)this.processChange(t[e]);this.updateSelection(),this.view.validate(),this.sizeDidChange()},mxGraph.prototype.updateSelection=function(){for(var t=this.getSelectionCells(),e=[],n=0;n<t.length;n++)if(this.model.contains(t[n])&&this.isCellVisible(t[n]))for(var i=this.model.getParent(t[n]);null!=i&&i!=this.view.currentRoot;){if(this.isCellCollapsed(i)||!this.isCellVisible(i)){e.push(t[n]);break}i=this.model.getParent(i)}else e.push(t[n]);this.removeSelectionCells(e)},mxGraph.prototype.processChange=function(t){var e;t instanceof mxRootChange?(this.clearSelection(),this.setDefaultParent(null),this.removeStateForCell(t.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new mxEventObject(mxEvent.ROOT))):t instanceof mxChildChange?(e=this.model.getParent(t.child),this.view.invalidate(t.child,!0,!0),this.model.contains(e)&&!this.isCellCollapsed(e)||(this.view.invalidate(t.child,!0,!0),this.removeStateForCell(t.child),this.view.currentRoot==t.child&&this.home()),e!=t.previous&&(null!=e&&this.view.invalidate(e,!1,!1),null!=t.previous)&&this.view.invalidate(t.previous,!1,!1)):t instanceof mxTerminalChange||t instanceof mxGeometryChange?(t instanceof mxTerminalChange||null==t.previous&&null!=t.geometry||null!=t.previous&&!t.previous.equals(t.geometry))&&this.view.invalidate(t.cell):t instanceof mxValueChange?this.view.invalidate(t.cell,!1,!1):t instanceof mxStyleChange?(this.view.invalidate(t.cell,!0,!0),null!=(e=this.view.getState(t.cell))&&(e.invalidStyle=!0)):null!=t.cell&&t.cell instanceof mxCell&&this.removeStateForCell(t.cell)},mxGraph.prototype.removeStateForCell=function(t){for(var e=this.model.getChildCount(t),n=0;n<e;n++)this.removeStateForCell(this.model.getChildAt(t,n));this.view.invalidate(t,!1,!0),this.view.removeState(t)},mxGraph.prototype.addCellOverlay=function(t,e){null==t.overlays&&(t.overlays=[]),t.overlays.push(e);var n=this.view.getState(t);return null!=n&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject(mxEvent.ADD_OVERLAY,"cell",t,"overlay",e)),e},mxGraph.prototype.getCellOverlays=function(t){return t.overlays},mxGraph.prototype.removeCellOverlay=function(t,e){var n;return null==e?this.removeCellOverlays(t):0<=(n=mxUtils.indexOf(t.overlays,e))?(t.overlays.splice(n,1),0==t.overlays.length&&(t.overlays=null),null!=(n=this.view.getState(t))&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",t,"overlay",e))):e=null,e},mxGraph.prototype.removeCellOverlays=function(t){var e=t.overlays;if(null!=e){t.overlays=null;var n=this.view.getState(t);null!=n&&this.cellRenderer.redraw(n);for(var i=0;i<e.length;i++)this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",t,"overlay",e[i]))}return e},mxGraph.prototype.clearCellOverlays=function(t){t=null!=t?t:this.model.getRoot(),this.removeCellOverlays(t);for(var e=this.model.getChildCount(t),n=0;n<e;n++){var i=this.model.getChildAt(t,n);this.clearCellOverlays(i)}},mxGraph.prototype.setCellWarning=function(n,t,e,i){return null!=t&&0<t.length?(e=new mxCellOverlay(e=null!=e?e:this.warningImage,"<font color=red>"+t+"</font>"),i&&e.addListener(mxEvent.CLICK,mxUtils.bind(this,function(t,e){this.isEnabled()&&this.setSelectionCell(n)})),this.addCellOverlay(n,e)):(this.removeCellOverlays(n),null)},mxGraph.prototype.startEditing=function(t,e){this.startEditingAtCell(null,t,e)},mxGraph.prototype.startEditingAtCell=function(t,e,n){null!=e&&mxEvent.isMultiTouchEvent(e)||null!=(t=null!=t||null==(t=this.getSelectionCell())||this.isCellEditable(t)?t:null)&&(this.fireEvent(new mxEventObject(mxEvent.START_EDITING,"cell",t,"event",e)),this.cellEditor.startEditing(t,e,n),this.fireEvent(new mxEventObject(mxEvent.EDITING_STARTED,"cell",t,"event",e)))},mxGraph.prototype.getEditingValue=function(t,e){return this.convertValueToString(t)},mxGraph.prototype.stopEditing=function(t){this.cellEditor.stopEditing(t),this.fireEvent(new mxEventObject(mxEvent.EDITING_STOPPED,"cancel",t))},mxGraph.prototype.labelChanged=function(t,e,n){this.model.beginUpdate();try{var i=t.value;this.cellLabelChanged(t,e,this.isAutoSizeCell(t)),this.fireEvent(new mxEventObject(mxEvent.LABEL_CHANGED,"cell",t,"value",e,"old",i,"event",n))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellLabelChanged=function(t,e,n){this.model.beginUpdate();try{this.model.setValue(t,e),n&&this.cellSizeUpdated(t,!1)}finally{this.model.endUpdate()}},mxGraph.prototype.escape=function(t){this.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",t))},mxGraph.prototype.click=function(t){var n,e=t.getEvent(),i=t.getCell(),l=new mxEventObject(mxEvent.CLICK,"event",e,"cell",i);if(t.isConsumed()&&l.consume(),this.fireEvent(l),this.isEnabled()&&!mxEvent.isConsumed(e)&&!l.isConsumed()){if(null!=i)this.isTransparentClickEvent(e)&&(n=!1,null!=(l=this.getCellAt(t.graphX,t.graphY,null,null,null,mxUtils.bind(this,function(t){var e=this.isCellSelected(t.cell);return!(n=n||e)||e||t.cell!=i&&this.model.isAncestor(t.cell,i)}))))&&(i=l);else if(this.isSwimlaneSelectionEnabled()&&!(null==(i=this.getSwimlaneAt(t.getGraphX(),t.getGraphY()))||this.isToggleEvent(e)&&mxEvent.isAltDown(e))){for(var s=i,o=[];null!=s;){var s=this.model.getParent(s),r=this.view.getState(s);this.isSwimlane(s)&&null!=r&&o.push(s)}if(0<o.length){(o=o.reverse()).splice(0,0,i),o.push(i);for(var a=0;a<o.length-1;a++)this.isCellSelected(o[a])&&(i=o[this.isToggleEvent(e)?a:a+1])}}null!=i?this.selectCellForEvent(i,e):this.isToggleEvent(e)||this.clearSelection()}},mxGraph.prototype.isSiblingSelected=function(t){for(var e=this.model,n=e.getParent(t),i=e.getChildCount(n),l=0;l<i;l++){var s=e.getChildAt(n,l);if(t!=s&&this.isCellSelected(s))return!0}return!1},mxGraph.prototype.dblClick=function(t,e){var n=new mxEventObject(mxEvent.DOUBLE_CLICK,"event",t,"cell",e);this.fireEvent(n),!this.isEnabled()||mxEvent.isConsumed(t)||n.isConsumed()||null==e||!this.isCellEditable(e)||this.isEditing(e)||(this.startEditingAtCell(e,t),mxEvent.consume(t))},mxGraph.prototype.tapAndHold=function(t){var e=t.getEvent(),n=new mxEventObject(mxEvent.TAP_AND_HOLD,"event",e,"cell",t.getCell());this.fireEvent(n),n.isConsumed()&&(this.panningHandler.panningTrigger=!1),this.isEnabled()&&!mxEvent.isConsumed(e)&&!n.isConsumed()&&this.connectionHandler.isEnabled()&&null!=(e=this.view.getState(this.connectionHandler.marker.getCell(t)))&&(this.connectionHandler.marker.currentColor=this.connectionHandler.marker.validColor,this.connectionHandler.marker.markedState=e,this.connectionHandler.marker.mark(),this.connectionHandler.first=new mxPoint(t.getGraphX(),t.getGraphY()),this.connectionHandler.edgeState=this.connectionHandler.createEdgeState(t),this.connectionHandler.previous=e,this.connectionHandler.fireEvent(new mxEventObject(mxEvent.START,"state",this.connectionHandler.previous)))},mxGraph.prototype.scrollPointToVisible=function(t,e,n,i){var l,s,o,r,a,h;this.timerAutoScroll||!this.ignoreScrollbars&&!mxUtils.hasScrollbars(this.container)?this.allowAutoPanning&&!this.panningHandler.isActive()&&(null==this.panningManager&&(this.panningManager=this.createPanningManager()),this.panningManager.panTo(t+this.panDx,e+this.panDy)):(i=null!=i?i:20,t>=(l=this.container).scrollLeft&&e>=l.scrollTop&&t<=l.scrollLeft+l.clientWidth&&e<=l.scrollTop+l.clientHeight&&((s=l.scrollLeft+l.clientWidth-t)<i?(r=l.scrollLeft,l.scrollLeft+=i-s,n&&r==l.scrollLeft&&(this.dialect==mxConstants.DIALECT_SVG?(a=this.view.getDrawPane().ownerSVGElement,o=this.container.scrollWidth+i-s,a.style.width=o+"px"):(o=Math.max(l.clientWidth,l.scrollWidth)+i-s,this.view.getCanvas().style.width=o+"px"),l.scrollLeft+=i-s)):(s=t-l.scrollLeft)<i&&(l.scrollLeft-=i-s),(o=l.scrollTop+l.clientHeight-e)<i?(r=l.scrollTop,l.scrollTop+=i-o,r==l.scrollTop&&n&&(this.dialect==mxConstants.DIALECT_SVG?(a=this.view.getDrawPane().ownerSVGElement,h=this.container.scrollHeight+i-o,a.style.height=h+"px"):(h=Math.max(l.clientHeight,l.scrollHeight)+i-o,this.view.getCanvas().style.height=h+"px"),l.scrollTop+=i-o)):(o=e-l.scrollTop)<i&&(l.scrollTop-=i-o)))},mxGraph.prototype.createPanningManager=function(){return new mxPanningManager(this)},mxGraph.prototype.getBorderSizes=function(){var t=mxUtils.getCurrentStyle(this.container);return new mxRectangle(mxUtils.parseCssNumber(t.paddingLeft)+("none"!=t.borderLeftStyle?mxUtils.parseCssNumber(t.borderLeftWidth):0),mxUtils.parseCssNumber(t.paddingTop)+("none"!=t.borderTopStyle?mxUtils.parseCssNumber(t.borderTopWidth):0),mxUtils.parseCssNumber(t.paddingRight)+("none"!=t.borderRightStyle?mxUtils.parseCssNumber(t.borderRightWidth):0),mxUtils.parseCssNumber(t.paddingBottom)+("none"!=t.borderBottomStyle?mxUtils.parseCssNumber(t.borderBottomWidth):0))},mxGraph.prototype.getPreferredPageSize=function(t,e,n){this.view.scale;var i=this.view.translate,l=this.pageFormat,s=this.pageScale,l=new mxRectangle(0,0,Math.ceil(l.width*s),Math.ceil(l.height*s)),s=this.pageBreaksVisible?Math.ceil(e/l.width):1,e=this.pageBreaksVisible?Math.ceil(n/l.height):1;return new mxRectangle(0,0,s*l.width+2+i.x,e*l.height+2+i.y)},mxGraph.prototype.fit=function(t,e,n,i,l,s,o){if(null!=this.container){t=null!=t?t:this.getBorder(),e=null!=e&&e,n=null!=n?n:0,i=null==i||i,l=null!=l&&l,s=null!=s&&s;var r=this.getBorderSizes(),a=this.container.offsetWidth-r.x-r.width-1,o=null!=o?o:this.container.offsetHeight-r.y-r.height-1,r=this.view.getGraphBounds();if(0<r.width&&0<r.height){e&&null!=r.x&&null!=r.y&&((r=r.clone()).width+=r.x,r.height+=r.y,r.x=0,r.y=0);var h=this.view.scale,u=r.width/h,d=r.height/h,p=(null!=this.backgroundImage&&null!=this.backgroundImage.width&&null!=this.backgroundImage.height&&(u=Math.max(u,this.backgroundImage.width-r.x/h),d=Math.max(d,this.backgroundImage.height-r.y/h)),(e?t:2*t)+n+1),p=(a-=p,o-=p,l?o/d:s?a/u:Math.min(a/u,o/d));if(null!=this.minFitScale&&(p=Math.max(p,this.minFitScale)),null!=this.maxFitScale&&(p=Math.min(p,this.maxFitScale)),!i)return p;e?this.view.scale!=p&&this.view.setScale(p):mxUtils.hasScrollbars(this.container)?(this.view.setScale(p),null!=(l=this.getGraphBounds()).x&&(this.container.scrollLeft=l.x),null!=l.y&&(this.container.scrollTop=l.y)):(s=null!=r.x?Math.floor(this.view.translate.x-r.x/h+t/p+n/2):t,a=null!=r.y?Math.floor(this.view.translate.y-r.y/h+t/p+n/2):t,this.view.scaleAndTranslate(p,s,a))}}return this.view.scale},mxGraph.prototype.sizeDidChange=function(){var t,e,n,i=this.getGraphBounds();null!=this.container&&(e=this.getBorder(),t=Math.max(0,i.x)+i.width+2*e,e=Math.max(0,i.y)+i.height+2*e,null!=this.minimumContainerSize&&(t=Math.max(t,this.minimumContainerSize.width),e=Math.max(e,this.minimumContainerSize.height)),this.resizeContainer&&this.doResizeContainer(t,e),(this.preferPageSize||!mxClient.IS_IE&&this.pageVisible)&&null!=(n=this.getPreferredPageSize(i,Math.max(1,t),Math.max(1,e)))&&(t=n.width*this.view.scale,e=n.height*this.view.scale),null!=this.minimumGraphSize&&(t=Math.max(t,this.minimumGraphSize.width*this.view.scale),e=Math.max(e,this.minimumGraphSize.height*this.view.scale)),t=Math.ceil(t),e=Math.ceil(e),this.dialect==mxConstants.DIALECT_SVG?null!=(n=this.view.getDrawPane().ownerSVGElement)&&(n.style.minWidth=Math.max(1,t)+"px",n.style.minHeight=Math.max(1,e)+"px",n.style.width="100%",n.style.height="100%"):(this.view.canvas.style.minWidth=Math.max(1,t)+"px",this.view.canvas.style.minHeight=Math.max(1,e)+"px"),this.updatePageBreaks(this.pageBreaksVisible,t,e)),this.fireEvent(new mxEventObject(mxEvent.SIZE,"bounds",i))},mxGraph.prototype.doResizeContainer=function(t,e){null!=this.maximumContainerSize&&(t=Math.min(this.maximumContainerSize.width,t),e=Math.min(this.maximumContainerSize.height,e)),this.container.style.width=Math.ceil(t)+"px",this.container.style.height=Math.ceil(e)+"px"},mxGraph.prototype.updatePageBreaks=function(t,e,n){var i=this.view.scale,l=this.view.translate,s=this.pageFormat,o=i*this.pageScale,r=new mxRectangle(0,0,s.width*o,s.height*o),s=mxRectangle.fromRectangle(this.getGraphBounds()),a=(s.width=Math.max(1,s.width),s.height=Math.max(1,s.height),r.x=Math.floor((s.x-l.x*i)/r.width)*r.width+l.x*i,r.y=Math.floor((s.y-l.y*i)/r.height)*r.height+l.y*i,s.width=Math.ceil((s.width+(s.x-r.x))/r.width)*r.width,s.height=Math.ceil((s.height+(s.y-r.y))/r.height)*r.height,(t=t&&Math.min(r.width,r.height)>this.minPageBreakDist)?Math.ceil(s.height/r.height)+1:0),h=t?Math.ceil(s.width/r.width)+1:0,u=(h-1)*r.width,d=(a-1)*r.height,o=(null==this.horizontalPageBreaks&&0<a&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&0<h&&(this.verticalPageBreaks=[]),mxUtils.bind(this,function(t){if(null!=t){for(var e=t==this.horizontalPageBreaks?a:h,n=0;n<=e;n++){var i=t==this.horizontalPageBreaks?[new mxPoint(Math.round(r.x),Math.round(r.y+n*r.height)),new mxPoint(Math.round(r.x+u),Math.round(r.y+n*r.height))]:[new mxPoint(Math.round(r.x+n*r.width),Math.round(r.y)),new mxPoint(Math.round(r.x+n*r.width),Math.round(r.y+d))];null!=t[n]?(t[n].points=i,t[n].redraw()):((i=new mxPolyline(i,this.pageBreakColor)).dialect=this.dialect,i.pointerEvents=!1,i.isDashed=this.pageBreakDashed,i.init(this.view.backgroundPane),i.redraw(),t[n]=i)}for(n=e;n<t.length;n++)t[n].destroy();t.splice(e,t.length-e)}}));o(this.horizontalPageBreaks),o(this.verticalPageBreaks)},mxGraph.prototype.getCurrentCellStyle=function(t,e){e=e?null:this.view.getState(t);return null!=e?e.style:this.getCellStyle(t)},mxGraph.prototype.getCellStyle=function(t,e){e=null==e||e;var n=this.model.getStyle(t),i=null,i=this.model.isEdge(t)?this.stylesheet.getDefaultEdgeStyle():this.stylesheet.getDefaultVertexStyle();return null!=n&&0<n.length?i=this.stylesheet.getCellStyle(n,i,e):null!=i&&(i=mxUtils.clone(i)),null==i?i=new Object:e&&(i=this.postProcessCellStyle(t,i)),i},mxGraph.prototype.postProcessCellStyle=function(t,e){var n,i;return null!=e&&(i=e[mxConstants.STYLE_IMAGE],null!=(n=this.getImageFromBundles(i))?e[mxConstants.STYLE_IMAGE]=n:n=i,null!=n)&&"function"==typeof n.substring&&"data:image/"==n.substring(0,11)&&("data:image/svg+xml,<"==n.substring(0,20)?n=n.substring(0,19)+encodeURIComponent(n.substring(19)):"data:image/svg+xml,%3C"!=n.substring(0,22)&&0<(i=n.indexOf(","))&&";base64,"!=n.substring(i-7,i+1)&&(n=n.substring(0,i)+";base64,"+n.substring(i+1)),e[mxConstants.STYLE_IMAGE]=n),e},mxGraph.prototype.setCellStyle=function(t,e){if(null!=(e=e||this.getSelectionCells())){this.model.beginUpdate();try{for(var n=0;n<e.length;n++)this.model.setStyle(e[n],t)}finally{this.model.endUpdate()}}},mxGraph.prototype.toggleCellStyle=function(t,e,n){return n=n||this.getSelectionCell(),this.toggleCellStyles(t,e,[n])},mxGraph.prototype.toggleCellStyles=function(t,e,n){e=null!=e&&e;var i,l=null;return null!=(n=n||this.getEditableCells(this.getSelectionCells()))&&0<n.length&&(i=this.getCurrentCellStyle(n[0]),l=mxUtils.getValue(i,t,e)?0:1,this.setCellStyles(t,l,n)),l},mxGraph.prototype.setCellStyles=function(t,e,n){n=n||this.getEditableCells(this.getSelectionCells()),mxUtils.setCellStyles(this.model,n,t,e)},mxGraph.prototype.toggleCellStyleFlags=function(t,e,n){this.setCellStyleFlags(t,e,null,n)},mxGraph.prototype.setCellStyleFlags=function(t,e,n,i){var l;null!=(i=i||this.getEditableCells(this.getSelectionCells()))&&0<i.length&&(null==n&&(l=this.getCurrentCellStyle(i[0]),n=!((parseInt(l[t]||0)&e)==e)),mxUtils.setCellStyleFlags(this.model,i,t,e,n))},mxGraph.prototype.getOriginForCell=function(t){for(var e=this.model.getParent(t),n=new mxPoint;null!=e;){var i=this.getCellGeometry(e);null==i||i.relative||(n.x+=i.x,n.y+=i.y),e=this.model.getParent(e)}return n},mxGraph.prototype.alignCells=function(t,e,n){if(null!=(e=null==e?this.getMovableCells(this.getSelectionCells()):e)&&1<e.length){if(null==n)for(var i=0;i<e.length;i++){var l=this.getOriginForCell(e[i]),s=this.getCellGeometry(e[i]);if(!this.model.isEdge(e[i])&&null!=s&&!s.relative)if(null==n){if(t==mxConstants.ALIGN_CENTER){n=l.x+s.x+s.width/2;break}if(t==mxConstants.ALIGN_RIGHT)n=l.x+s.x+s.width;else if(t==mxConstants.ALIGN_TOP)n=l.y+s.y;else{if(t==mxConstants.ALIGN_MIDDLE){n=l.y+s.y+s.height/2;break}n=t==mxConstants.ALIGN_BOTTOM?l.y+s.y+s.height:l.x+s.x}}else n=t==mxConstants.ALIGN_RIGHT?Math.max(n,l.x+s.x+s.width):t==mxConstants.ALIGN_TOP?Math.min(n,l.y+s.y):t==mxConstants.ALIGN_BOTTOM?Math.max(n,l.y+s.y+s.height):Math.min(n,l.x+s.x)}if(null!=n){e=mxUtils.sortCells(e),this.model.beginUpdate();try{for(i=0;i<e.length;i++){l=this.getOriginForCell(e[i]),s=this.getCellGeometry(e[i]);this.model.isEdge(e[i])||null==s||s.relative||(s=s.clone(),t==mxConstants.ALIGN_CENTER?s.x=n-l.x-s.width/2:t==mxConstants.ALIGN_RIGHT?s.x=n-l.x-s.width:t==mxConstants.ALIGN_TOP?s.y=n-l.y:t==mxConstants.ALIGN_MIDDLE?s.y=n-l.y-s.height/2:t==mxConstants.ALIGN_BOTTOM?s.y=n-l.y-s.height:s.x=n-l.x,this.resizeCell(e[i],s))}this.fireEvent(new mxEventObject(mxEvent.ALIGN_CELLS,"align",t,"cells",e))}finally{this.model.endUpdate()}}}return e},mxGraph.prototype.flipEdge=function(t){if(null!=t&&null!=this.alternateEdgeStyle){this.model.beginUpdate();try{var e=this.model.getStyle(t);null==e||0==e.length?this.model.setStyle(t,this.alternateEdgeStyle):this.model.setStyle(t,null),this.resetEdge(t),this.fireEvent(new mxEventObject(mxEvent.FLIP_EDGE,"edge",t))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.addImageBundle=function(t){this.imageBundles.push(t)},mxGraph.prototype.removeImageBundle=function(t){for(var e=[],n=0;n<this.imageBundles.length;n++)this.imageBundles[n]!=t&&e.push(this.imageBundles[n]);this.imageBundles=e},mxGraph.prototype.getImageFromBundles=function(t){if(null!=t)for(var e=0;e<this.imageBundles.length;e++){var n=this.imageBundles[e].getImage(t);if(null!=n)return n}return null},mxGraph.prototype.orderCells=function(t,e,n){null==e&&(e=mxUtils.sortCells(this.getEditableCells(this.getSelectionCells()),!0)),this.model.beginUpdate();try{this.cellsOrdered(e,t,n),this.fireEvent(new mxEventObject(mxEvent.ORDER_CELLS,"back",t,"cells",e,"increment",n))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsOrdered=function(t,e,n){if(null!=t){this.model.beginUpdate();try{for(var i=0;i<t.length;i++){var l=this.model.getParent(t[i]);e?n?this.model.add(l,t[i],Math.max(0,l.getIndex(t[i])-1)):this.model.add(l,t[i],i):n?this.model.add(l,t[i],Math.min(this.model.getChildCount(l)-1,l.getIndex(t[i])+1)):this.model.add(l,t[i],this.model.getChildCount(l)-1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ORDERED,"back",e,"cells",t,"increment",n))}finally{this.model.endUpdate()}}},mxGraph.prototype.groupCells=function(t,e,n){null==n&&(n=mxUtils.sortCells(this.getSelectionCells(),!0)),n=this.getCellsForGroup(n),null==t&&(t=this.createGroupCell(n));var i=this.getBoundsForGroup(t,n,e);if(1<n.length&&null!=i){var l=this.model.getParent(t);null==l&&(l=this.model.getParent(n[0])),this.model.beginUpdate();try{null==this.getCellGeometry(t)&&this.model.setGeometry(t,new mxGeometry),this.cellsResized([t],[i],!1);var s=this.model.getChildCount(l);this.cellsAdded([t],l,s,null,null,!1,!1,!1),s=this.model.getChildCount(t),this.cellsAdded(n,t,s,null,null,!1,!1,!1),this.cellsMoved(n,-i.x,-i.y,!1,!1,!1),this.fireEvent(new mxEventObject(mxEvent.GROUP_CELLS,"group",t,"border",e,"cells",n))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.getCellsForGroup=function(t){var e=[];if(null!=t&&0<t.length){var n=this.model.getParent(t[0]);e.push(t[0]);for(var i=1;i<t.length;i++)this.model.getParent(t[i])==n&&e.push(t[i])}return e},mxGraph.prototype.getBoundsForGroup=function(t,e,n){e=this.getBoundingBoxFromGeometry(e,!0);return null!=e&&(this.isSwimlane(t)&&(t=this.getStartSize(t),e.x-=t.width,e.y-=t.height,e.width+=t.width,e.height+=t.height),null!=n)&&(e.x-=n,e.y-=n,e.width+=2*n,e.height+=2*n),e},mxGraph.prototype.createGroupCell=function(t){var e=new mxCell("");return e.setVertex(!0),e.setConnectable(!1),e},mxGraph.prototype.ungroupCells=function(t){var e=[];if(null!=(t=null==t?this.getCellsForUngroup():t)&&0<t.length){this.model.beginUpdate();try{for(var n=0;n<t.length;n++)if(null!=(i=this.model.getChildren(t[n]))&&0<i.length){var i=i.slice(),l=this.model.getParent(t[n]),s=this.model.getChildCount(l);this.cellsAdded(i,l,s,null,null,!0);for(var o,r,e=e.concat(i),a=0;a<i.length;a++)this.model.isVertex(i[a])&&(o=this.view.getState(i[a]),r=this.getCellGeometry(i[a]),null!=o)&&null!=r&&r.relative&&((r=r.clone()).x=o.origin.x,r.y=o.origin.y,r.relative=!1,this.model.setGeometry(i[a],r))}this.removeCellsAfterUngroup(t),this.fireEvent(new mxEventObject(mxEvent.UNGROUP_CELLS,"cells",t))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.getCellsForUngroup=function(){for(var t=this.getEditableCells(this.getSelectionCells()),e=[],n=0;n<t.length;n++)this.model.isVertex(t[n])&&0<this.model.getChildCount(t[n])&&e.push(t[n]);return e},mxGraph.prototype.removeCellsAfterUngroup=function(t){this.cellsRemoved(this.addAllEdges(t))},mxGraph.prototype.removeCellsFromParent=function(t){null==t&&(t=this.getSelectionCells()),this.model.beginUpdate();try{var e=this.getDefaultParent(),n=this.model.getChildCount(e);this.cellsAdded(t,e,n,null,null,!0),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS_FROM_PARENT,"cells",t))}finally{this.model.endUpdate()}return t},mxGraph.prototype.updateGroupBounds=function(t,e,n,i,l,s,o){null==t&&(t=this.getSelectionCells()),e=null!=e?e:0,n=null!=n&&n,i=null!=i?i:0,l=null!=l?l:0,s=null!=s?s:0,o=null!=o?o:0,this.model.beginUpdate();try{for(var r=t.length-1;0<=r;r--){var a,h,u,d=this.getCellGeometry(t[r]);null!=d&&null!=(a=this.getChildCells(t[r]))&&0<a.length&&null!=(h=this.getBoundingBoxFromGeometry(a,!0))&&0<h.width&&0<h.height&&(u=this.isSwimlane(t[r])?this.getActualStartSize(t[r],!0):new mxRectangle,d=d.clone(),n&&(d.x=Math.round(d.x+h.x-e-u.x-o),d.y=Math.round(d.y+h.y-e-u.y-i)),d.width=Math.round(h.width+2*e+u.x+o+l+u.width),d.height=Math.round(h.height+2*e+u.y+i+s+u.height),this.model.setGeometry(t[r],d),this.moveCells(a,e+u.x-h.x+o,e+u.y-h.y+i))}}finally{this.model.endUpdate()}return t},mxGraph.prototype.getBoundingBox=function(t){var e=null;if(null!=t&&0<t.length)for(var n,i=0;i<t.length;i++)(this.model.isVertex(t[i])||this.model.isEdge(t[i]))&&null!=(n=this.view.getBoundingBox(this.view.getState(t[i]),!0))&&(null==e?e=mxRectangle.fromRectangle(n):e.add(n));return e},mxGraph.prototype.cloneCell=function(t,e,n,i){return this.cloneCells([t],e,n,i)[0]},mxGraph.prototype.cloneCells=function(t,e,n,i){e=null==e||e;var l=null;if(null!=t){for(var s=new mxDictionary,o=[],r=0;r<t.length;r++)s.put(t[r],!0),o.push(t[r]);if(0<o.length)for(var a=this.view.scale,h=this.view.translate,l=this.model.cloneCells(t,!0,n),r=0;r<t.length;r++)if(!e&&this.model.isEdge(l[r])&&null!=this.getEdgeValidationError(l[r],this.model.getTerminal(l[r],!0),this.model.getTerminal(l[r],!1)))l[r]=null;else{var u=this.model.getGeometry(l[r]);if(null!=u){var d=this.view.getState(t[r]),p=this.view.getState(this.model.getParent(t[r]));if(null!=d&&null!=p){var m=p.origin.x,c=p.origin.y;if(this.model.isEdge(l[r])){p=d.absolutePoints;if(null!=p){var g=this.model.getTerminal(t[r],!0);if(null!=g){for(;null!=g&&!s.get(g);)g=this.model.getParent(g);null==g&&null!=p[0]&&u.setTerminalPoint(new mxPoint(Math.round(p[0].x/a-h.x-m),Math.round(p[0].y/a-h.y-c)),!0)}i||null!=(x=u.getTerminalPoint(!0))&&(x.x+=m,x.y+=c);var x,y=this.model.getTerminal(t[r],!1);if(null!=y){for(;null!=y&&!s.get(y);)y=this.model.getParent(y);d=p.length-1;null==y&&null!=p[d]&&u.setTerminalPoint(new mxPoint(Math.round(p[d].x/a-h.x-m),Math.round(p[d].y/a-h.y-c)),!1)}i||null!=(x=u.getTerminalPoint(!1))&&(x.x+=m,x.y+=c);var C=u.points;if(!i&&null!=C)for(var f=0;f<C.length;f++)null!=C[f]&&(C[f].x+=m,C[f].y+=c)}}else i||u.translate(m,c)}}}else l=[]}return l},mxGraph.prototype.insertVertex=function(t,e,n,i,l,s,o,r,a){e=this.createVertex(t,e,n,i,l,s,o,r,a);return this.addCell(e,t)},mxGraph.prototype.createVertex=function(t,e,n,i,l,s,o,r,a){i=new mxGeometry(i,l,s,o),i.relative=null!=a&&a,l=new mxCell(n,i,r);return l.setId(e),l.setVertex(!0),l.setConnectable(!0),l},mxGraph.prototype.insertEdge=function(t,e,n,i,l,s){e=this.createEdge(t,e,n,i,l,s);return this.addEdge(e,t,i,l)},mxGraph.prototype.createEdge=function(t,e,n,i,l,s){n=new mxCell(n,new mxGeometry,s);return n.setId(e),n.setEdge(!0),n.geometry.relative=!0,n},mxGraph.prototype.addEdge=function(t,e,n,i,l){return this.addCell(t,e,l,n,i)},mxGraph.prototype.addCell=function(t,e,n,i,l){return this.addCells([t],e,n,i,l)[0]},mxGraph.prototype.addCells=function(t,e,n,i,l,s){null==e&&(e=this.getDefaultParent()),null==n&&(n=this.model.getChildCount(e)),this.model.beginUpdate();try{this.cellsAdded(t,e,n,i,l,null!=s&&s,!0),this.fireEvent(new mxEventObject(mxEvent.ADD_CELLS,"cells",t,"parent",e,"index",n,"source",i,"target",l))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsAdded=function(n,t,e,i,l,s,o,r){if(null!=n&&null!=t&&null!=e){this.model.beginUpdate();try{for(var a,h,u,d,p,m,c,g=s?this.view.getState(t):null,x=null!=g?g.origin:null,y=new mxPoint(0,0),C=0;C<n.length;C++)null==n[C]?e--:(a=this.model.getParent(n[C]),null!=x&&n[C]!=t&&t!=a&&(u=null!=(h=this.view.getState(a))?h.origin:y,null!=(m=this.model.getGeometry(n[C])))&&(d=u.x-x.x,p=u.y-x.y,(m=m.clone()).translate(d,p),m.relative||!this.model.isVertex(n[C])||this.isAllowNegativeCoordinates()||(m.x=Math.max(0,m.x),m.y=Math.max(0,m.y)),this.model.setGeometry(n[C],m)),t==a&&e+C>this.model.getChildCount(t)&&e--,c=this.model.updateEdgeParent,this.model.updateEdgeParent=function(t,e){mxUtils.indexOf(n,t)<0&&c.apply(this,arguments)},this.model.add(t,n[C],e+C),this.model.updateEdgeParent=c,this.autoSizeCellsOnAdd&&this.autoSizeCell(n[C],!0),(null==r||r)&&this.isExtendParentsOnAdd(n[C])&&this.isExtendParent(n[C])&&this.extendParent(n[C]),null!=o&&!o||this.constrainChild(n[C]),null!=i&&this.cellConnected(n[C],i,!0),null!=l&&this.cellConnected(n[C],l,!1));this.fireEvent(new mxEventObject(mxEvent.CELLS_ADDED,"cells",n,"parent",t,"index",e,"source",i,"target",l,"absolute",s))}finally{this.model.endUpdate()}}},mxGraph.prototype.autoSizeCell=function(t,e){if(e=null==e||e)for(var n=this.model.getChildCount(t),i=0;i<n;i++)this.autoSizeCell(this.model.getChildAt(t,i));this.getModel().isVertex(t)&&this.isAutoSizeCell(t)&&this.updateCellSize(t)},mxGraph.prototype.removeCells=function(t,e){if(e=null==e||e,null==t&&(t=this.getDeletableCells(this.getSelectionCells())),e)t=this.getDeletableCells(this.addAllEdges(t));else{t=t.slice();for(var n=this.getDeletableCells(this.getAllEdges(t)),i=new mxDictionary,l=0;l<t.length;l++)i.put(t[l],!0);for(l=0;l<n.length;l++)null!=this.view.getState(n[l])||i.get(n[l])||(i.put(n[l],!0),t.push(n[l]))}this.model.beginUpdate();try{this.cellsRemoved(t),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS,"cells",t,"includeEdges",e))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsRemoved=function(h){if(null!=h&&0<h.length){var u=this.view.scale,d=this.view.translate;this.model.beginUpdate();try{for(var t=new mxDictionary,p=0;p<h.length;p++)t.put(h[p],!0);for(p=0;p<h.length;p++){for(var e=this.getAllEdges([h[p]]),n=mxUtils.bind(this,function(t,e){if(null!=(n=this.model.getGeometry(t))){for(var n,i,l,s,o=this.model.getTerminal(t,e),r=!1,a=o;null!=a;){if(h[p]==a){r=!0;break}a=this.model.getParent(a)}r&&(n=n.clone(),null!=(i=this.view.getState(t))&&null!=i.absolutePoints?(s=i.absolutePoints,l=e?0:s.length-1,n.setTerminalPoint(new mxPoint(s[l].x/u-d.x-i.origin.x,s[l].y/u-d.y-i.origin.y),e)):null!=(s=this.view.getState(o))&&n.setTerminalPoint(new mxPoint(s.getCenterX()/u-d.x,s.getCenterY()/u-d.y),e),this.model.setGeometry(t,n),this.model.setTerminal(t,null,e))}}),i=0;i<e.length;i++)t.get(e[i])||(t.put(e[i],!0),n(e[i],!0),n(e[i],!1));this.model.remove(h[p])}this.fireEvent(new mxEventObject(mxEvent.CELLS_REMOVED,"cells",h))}finally{this.model.endUpdate()}}},mxGraph.prototype.splitEdge=function(t,e,n,i,l,s,o,r){i=i||0,l=l||0,r=null!=r?r:this.model.getParent(t);var a,h,u,d,p,m=this.model.getTerminal(t,!0);this.model.beginUpdate();try{null==n&&(n=this.cloneCell(t),a=this.view.getState(t),null!=(h=this.getCellGeometry(n)))&&null!=h.points&&null!=a&&(u=this.view.translate,d=this.view.scale,p=mxUtils.findNearestSegment(a,(i+u.x)*d,(l+u.y)*d),h.points=h.points.slice(0,p),null!=(h=this.getCellGeometry(t)))&&null!=h.points&&((h=h.clone()).points=h.points.slice(p),this.model.setGeometry(t,h)),this.cellsMoved(e,i,l,!1,!1),this.cellsAdded([n],r,this.model.getChildCount(r),m,e[0],!1),this.cellsAdded(e,r,this.model.getChildCount(r),null,null,!0),this.cellConnected(t,e[0],!0),this.fireEvent(new mxEventObject(mxEvent.SPLIT_EDGE,"edge",t,"cells",e,"newEdge",n,"dx",i,"dy",l))}finally{this.model.endUpdate()}return n},mxGraph.prototype.toggleCells=function(t,e,n){null==e&&(e=this.getSelectionCells()),n&&(e=this.addAllEdges(e)),this.model.beginUpdate();try{this.cellsToggled(e,t),this.fireEvent(new mxEventObject(mxEvent.TOGGLE_CELLS,"show",t,"cells",e,"includeEdges",n))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsToggled=function(t,e){if(null!=t&&0<t.length){this.model.beginUpdate();try{for(var n=0;n<t.length;n++)this.model.setVisible(t[n],e)}finally{this.model.endUpdate()}}},mxGraph.prototype.foldCells=function(t,e,n,i,l){e=null!=e&&e,null==n&&(n=this.getFoldableCells(this.getSelectionCells(),t)),this.stopEditing(!1),this.model.beginUpdate();try{this.cellsFolded(n,t,e,i),this.fireEvent(new mxEventObject(mxEvent.FOLD_CELLS,"collapse",t,"recurse",e,"cells",n))}finally{this.model.endUpdate()}return n},mxGraph.prototype.cellsFolded=function(t,e,n,i){if(null!=t&&0<t.length){this.model.beginUpdate();try{for(var l,s=0;s<t.length;s++)i&&!this.isCellFoldable(t[s],e)||e==this.isCellCollapsed(t[s])||(this.model.setCollapsed(t[s],e),this.swapBounds(t[s],e),this.isExtendParent(t[s])&&this.extendParent(t[s]),n&&(l=this.model.getChildren(t[s]),this.cellsFolded(l,e,n)),this.constrainChild(t[s]));this.fireEvent(new mxEventObject(mxEvent.CELLS_FOLDED,"cells",t,"collapse",e,"recurse",n))}finally{this.model.endUpdate()}}},mxGraph.prototype.swapBounds=function(t,e){var n;null!=t&&null!=(n=this.model.getGeometry(t))&&(n=n.clone(),this.updateAlternateBounds(t,n,e),n.swap(),this.model.setGeometry(t,n))},mxGraph.prototype.updateAlternateBounds=function(t,e,n){var i,l,s,o;null!=t&&null!=e&&(s=this.getCurrentCellStyle(t),null==e.alternateBounds&&(l=e,this.collapseToPreferredSize&&(i="1"==mxUtils.getValue(s,mxConstants.STYLE_AUTOSIZE_GRID,this.gridEnabled?"1":"0"),null!=(t=this.getPreferredSizeForCell(t,null,i)))&&(l=t,0<(i=mxUtils.getValue(s,mxConstants.STYLE_STARTSIZE)))&&(l.height=Math.max(l.height,i)),e.alternateBounds=new mxRectangle(0,0,l.width,l.height)),null!=e.alternateBounds)&&(e.alternateBounds.x=e.x,e.alternateBounds.y=e.y,0!=(t=mxUtils.toRadians(s[mxConstants.STYLE_ROTATION]||0)))&&(i=e.alternateBounds.getCenterX()-e.getCenterX(),l=e.alternateBounds.getCenterY()-e.getCenterY(),s=Math.cos(t),o=(t=Math.sin(t))*i+s*l,e.alternateBounds.x+=s*i-t*l-i,e.alternateBounds.y+=o-l)},mxGraph.prototype.addAllEdges=function(t){var e=t.slice();return mxUtils.removeDuplicates(e.concat(this.getAllEdges(t)))},mxGraph.prototype.getAllEdges=function(t){var e=[];if(null!=t)for(var n=0;n<t.length;n++){for(var i=this.model.getEdgeCount(t[n]),l=0;l<i;l++)e.push(this.model.getEdgeAt(t[n],l));var s=this.model.getChildren(t[n]),e=e.concat(this.getAllEdges(s))}return e},mxGraph.prototype.updateCellSize=function(t,e){e=null!=e&&e,this.model.beginUpdate();try{this.cellSizeUpdated(t,e),this.fireEvent(new mxEventObject(mxEvent.UPDATE_CELL_SIZE,"cell",t,"ignoreChildren",e))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellSizeUpdated=function(t,e){if(null!=t){this.model.beginUpdate();try{var n,i,l,s,o,r,a,h,u,d,p,m,c,g,x=this.getCellStyle(t),y=this.model.getGeometry(t);null!=y&&(n=null,(i=mxUtils.getValue(x,mxConstants.STYLE_FIXED_WIDTH,!1))&&(n=y.width-2*parseFloat(mxUtils.getValue(x,mxConstants.STYLE_SPACING,2))-parseFloat(mxUtils.getValue(x,mxConstants.STYLE_SPACING_LEFT,0))-parseFloat(mxUtils.getValue(x,mxConstants.STYLE_SPACING_RIGHT,0))),l="1"==mxUtils.getValue(x,mxConstants.STYLE_AUTOSIZE_GRID,this.gridEnabled?"1":"0"),null!=(s=this.getPreferredSizeForCell(t,n,l)))&&(o=this.isCellCollapsed(t),y=y.clone(),this.isSwimlane(t)?(null==(r=this.model.getStyle(t))&&(r=""),mxUtils.getValue(x,mxConstants.STYLE_HORIZONTAL,!0)?(r=mxUtils.setStyle(r,mxConstants.STYLE_STARTSIZE,s.height+8),o&&(y.height=s.height+8),i||(y.width=s.width)):(r=mxUtils.setStyle(r,mxConstants.STYLE_STARTSIZE,s.width+8),o&&!i&&(y.width=s.width+8),y.height=s.height),this.model.setStyle(t,r)):(h=(a=this.view.createState(t)).style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER,u=this.getVerticalAlign(a),"fixed"==a.style[mxConstants.STYLE_ASPECT]&&(s.height=Math.round(y.height*s.width*100/y.width)/100),u==mxConstants.ALIGN_BOTTOM?y.y+=y.height-s.height:u==mxConstants.ALIGN_MIDDLE&&(y.y+=Math.round((y.height-s.height)/2)),y.height=s.height,i||(h==mxConstants.ALIGN_RIGHT?y.x+=y.width-s.width:h==mxConstants.ALIGN_CENTER&&(y.x+=Math.round((y.width-s.width)/2)),y.width=s.width)),e||o||null!=(d=this.view.getBounds(this.model.getChildren(t)))&&(p=this.view.translate,m=this.view.scale,c=(d.x+d.width)/m-y.x-p.x,g=(d.y+d.height)/m-y.y-p.y,y.height=Math.max(y.height,g),i||(y.width=Math.max(y.width,c))),this.cellsResized([t],[y],!1))}finally{this.model.endUpdate()}}},mxGraph.prototype.getPreferredSizeForCell=function(t,e,n){n=null!=n?n:this.gridEnabled;var i,l,s,o,r,a=null;return null!=t&&(i=(s=this.view.createState(t)).style,this.model.isEdge(t)||(t=i[mxConstants.STYLE_FONTSIZE]||mxConstants.DEFAULT_FONTSIZE,l=r=0,null==this.getImage(s)&&null==i[mxConstants.STYLE_IMAGE]||i[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_LABEL&&(i[mxConstants.STYLE_VERTICAL_ALIGN]==mxConstants.ALIGN_MIDDLE&&(r+=parseFloat(mxUtils.getValue(i,mxConstants.STYLE_IMAGE_WIDTH,mxLabel.prototype.imageSize))),i[mxConstants.STYLE_ALIGN]!=mxConstants.ALIGN_CENTER)&&(l+=parseFloat(mxUtils.getValue(i,mxConstants.STYLE_IMAGE_HEIGHT,mxLabel.prototype.imageSize))),r=(r=(r+=2*parseFloat(mxUtils.getValue(i,mxConstants.STYLE_SPACING,2)))+parseFloat(mxUtils.getValue(i,mxConstants.STYLE_SPACING_LEFT,2)))+parseFloat(mxUtils.getValue(i,mxConstants.STYLE_SPACING_RIGHT,2)),l=(l=(l+=2*parseFloat(mxUtils.getValue(i,mxConstants.STYLE_SPACING,2)))+parseFloat(mxUtils.getValue(i,mxConstants.STYLE_SPACING_TOP,2)))+parseFloat(mxUtils.getValue(i,mxConstants.STYLE_SPACING_BOTTOM,2)),null!=(o=this.getFoldingImage(s))&&(r+=o.width+8),a=null!=(o=this.cellRenderer.getLabelValue(s))&&0<o.length?(this.isHtmlLabel(s.cell)?null!=e&&(e+=mxSvgCanvas2D.prototype.foreignObjectPadding):o=mxUtils.htmlEntities(o,!1),o=o.replace(/\n/g,"<br>"),o=(s=mxUtils.getSizeForString(o,t,i[mxConstants.STYLE_FONTFAMILY],e,i[mxConstants.STYLE_FONTSTYLE])).width+r,t=s.height+l,mxUtils.getValue(i,mxConstants.STYLE_HORIZONTAL,!0)||(e=t,t=o,o=e),n&&(o=this.snap(o+this.gridSize/2),t=this.snap(t+this.gridSize/2)),new mxRectangle(0,0,o,t)):new mxRectangle(0,0,r=4*this.gridSize,r))),a},mxGraph.prototype.resizeCell=function(t,e,n){return this.resizeCells([t],[e],n)[0]},mxGraph.prototype.resizeCells=function(t,e,n){n=null!=n?n:this.isRecursiveResize(),this.model.beginUpdate();try{var i=this.cellsResized(t,e,n);this.fireEvent(new mxEventObject(mxEvent.RESIZE_CELLS,"cells",t,"bounds",e,"previous",i))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsResized=function(t,e,n){n=null!=n&&n;var i=[];if(null!=t&&null!=e&&t.length==e.length){this.model.beginUpdate();try{for(var l=0;l<t.length;l++)i.push(this.cellResized(t[l],e[l],!1,n)),this.isExtendParent(t[l])&&this.extendParent(t[l]),this.constrainChild(t[l]);this.resetEdgesOnResize&&this.resetEdges(t),this.fireEvent(new mxEventObject(mxEvent.CELLS_RESIZED,"cells",t,"bounds",e,"previous",i))}finally{this.model.endUpdate()}}return i},mxGraph.prototype.cellResized=function(t,e,n,i){var l=this.model.getGeometry(t);if(null!=l&&(l.x!=e.x||l.y!=e.y||l.width!=e.width||l.height!=e.height)){var s=l.clone();!n&&s.relative?null!=(n=s.offset)&&(n.x+=e.x-s.x,n.y+=e.y-s.y):(s.x=e.x,s.y=e.y),s.width=e.width,s.height=e.height,s.relative||!this.model.isVertex(t)||this.isAllowNegativeCoordinates()||(s.x=Math.max(0,s.x),s.y=Math.max(0,s.y)),this.model.beginUpdate();try{i&&this.resizeChildCells(t,s),this.model.setGeometry(t,s),this.isCellCollapsed(t)||this.constrainChildCells(t)}finally{this.model.endUpdate()}}return l},mxGraph.prototype.resizeChildCells=function(t,e){for(var n=this.model.getGeometry(t),i=0!=n.width?e.width/n.width:1,l=0!=n.height?e.height/n.height:1,s=this.model.getChildCount(t),o=0;o<s;o++)this.scaleCell(this.model.getChildAt(t,o),i,l,!0)},mxGraph.prototype.constrainChildCells=function(t){for(var e=this.model.getChildCount(t),n=0;n<e;n++)this.constrainChild(this.model.getChildAt(t,n))},mxGraph.prototype.scaleCell=function(t,e,n,i){var l,s,o,r,a,h=this.model.getGeometry(t);null!=h&&(l=this.getCurrentCellStyle(t),s=(h=h.clone()).x,o=h.y,r=h.width,a=h.height,h.scale(e,n,"fixed"==l[mxConstants.STYLE_ASPECT]),"1"==l[mxConstants.STYLE_RESIZE_WIDTH]?h.width=r*e:"0"==l[mxConstants.STYLE_RESIZE_WIDTH]&&(h.width=r),"1"==l[mxConstants.STYLE_RESIZE_HEIGHT]?h.height=a*n:"0"==l[mxConstants.STYLE_RESIZE_HEIGHT]&&(h.height=a),this.isCellMovable(t)||(h.x=s,h.y=o),this.isCellResizable(t)||(h.width=r,h.height=a),this.model.isVertex(t)?this.cellResized(t,h,!0,i):this.model.setGeometry(t,h))},mxGraph.prototype.extendParent=function(t){var e,n;null!=t&&(e=this.model.getParent(t),n=this.getCellGeometry(e),null==e||null==n||this.isCellCollapsed(e)||null!=(t=this.getCellGeometry(t))&&!t.relative&&(n.width<t.x+t.width||n.height<t.y+t.height)&&((n=n.clone()).width=Math.max(n.width,t.x+t.width),n.height=Math.max(n.height,t.y+t.height),this.cellsResized([e],[n],!1)))},mxGraph.prototype.importCells=function(t,e,n,i,l,s){return this.moveCells(t,e,n,!0,i,l,s)},mxGraph.prototype.moveCells=function(t,e,n,i,l,s,o){if(e=null!=e?e:0,n=null!=n?n:0,i=null!=i&&i,null!=t&&(0!=e||0!=n||i||null!=l)){var r=t=this.model.getTopmostCells(t);this.model.beginUpdate();try{for(var a=new mxDictionary,h=0;h<t.length;h++)a.put(t[h],!0);for(var u=mxUtils.bind(this,function(t){for(;null!=t;){if(a.get(t))return!0;t=this.model.getParent(t)}return!1}),d=[],h=0;h<t.length;h++){var p=this.getCellGeometry(t[h]),m=this.model.getParent(t[h]);null!=p&&p.relative&&this.model.isEdge(m)&&(u(this.model.getTerminal(m,!0))||u(this.model.getTerminal(m,!1)))||d.push(t[h])}t=d,i&&(t=this.cloneCells(t,this.isCloneInvalidEdges(),o),null==l)&&(l=this.getDefaultParent());var c=this.isAllowNegativeCoordinates();if(null!=l&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(t,e,n,!i&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),null==l,this.isExtendParentsOnMove()&&null==l),this.setAllowNegativeCoordinates(c),null!=l){var g=this.model.getChildCount(l);if(this.cellsAdded(t,l,g,null,null,!0),i)for(h=0;h<t.length;h++){p=this.getCellGeometry(t[h]),m=this.model.getParent(r[h]);null!=p&&p.relative&&this.model.isEdge(m)&&this.model.contains(m)&&this.model.add(m,t[h])}}this.fireEvent(new mxEventObject(mxEvent.MOVE_CELLS,"cells",t,"dx",e,"dy",n,"clone",i,"target",l,"event",s))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.cellsMoved=function(t,e,n,i,l,s){if(null!=t&&(0!=e||0!=n)){s=null!=s&&s,this.model.beginUpdate();try{i&&this.disconnectGraph(t);for(var o=0;o<t.length;o++)this.translateCell(t[o],e,n),s&&this.isExtendParent(t[o])?this.extendParent(t[o]):l&&this.constrainChild(t[o]);this.resetEdgesOnMove&&this.resetEdges(t),this.fireEvent(new mxEventObject(mxEvent.CELLS_MOVED,"cells",t,"dx",e,"dy",n,"disconnect",i))}finally{this.model.endUpdate()}}},mxGraph.prototype.translateCell=function(t,e,n){var i,l,s=this.model.getGeometry(t);null!=s&&(e=parseFloat(e),n=parseFloat(n),(s=s.clone()).translate(e,n,this.model.isEdge(t)),s.relative||!this.model.isVertex(t)||this.isAllowNegativeCoordinates()||(s.x=Math.max(0,parseFloat(s.x)),s.y=Math.max(0,parseFloat(s.y))),s.relative&&!this.model.isEdge(t)&&(i=this.model.getParent(t),l=0,this.model.isVertex(i)&&(i=this.getCurrentCellStyle(i),l=mxUtils.getValue(i,mxConstants.STYLE_ROTATION,0)),0!=l&&(i=mxUtils.toRadians(-l),l=Math.cos(i),i=Math.sin(i),e=(l=mxUtils.getRotatedPoint(new mxPoint(e,n),l,i,new mxPoint(0,0))).x,n=l.y),null==s.offset?s.offset=new mxPoint(Math.round(e),Math.round(n)):(s.offset.x=Math.round(parseFloat(s.offset.x+e)),s.offset.y=Math.round(parseFloat(s.offset.y+n)))),this.model.setGeometry(t,s))},mxGraph.prototype.getCellContainmentArea=function(t){if(null!=t&&!this.model.isEdge(t)){t=this.model.getParent(t);if(null!=t&&t!=this.getDefaultParent()){var e,n,i,l,s,o,r,a=this.model.getGeometry(t);if(null!=a)return n=e=0,i=a.width,a=a.height,this.isSwimlane(t)&&(l=this.getStartSize(t),t=this.getCurrentCellStyle(t),s=mxUtils.getValue(t,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),o=1==mxUtils.getValue(t,mxConstants.STYLE_FLIPH,0),t=1==mxUtils.getValue(t,mxConstants.STYLE_FLIPV,0),s!=mxConstants.DIRECTION_SOUTH&&s!=mxConstants.DIRECTION_NORTH||(r=l.width,l.width=l.height,l.height=r),(s==mxConstants.DIRECTION_EAST&&!t||s==mxConstants.DIRECTION_NORTH&&!o||s==mxConstants.DIRECTION_WEST&&t||s==mxConstants.DIRECTION_SOUTH&&o)&&(e=l.width,n=l.height),i-=l.width,a-=l.height),new mxRectangle(e,n,i,a)}}return null},mxGraph.prototype.getMaximumGraphBounds=function(){return this.maximumGraphBounds},mxGraph.prototype.constrainChild=function(t,e){if(null!=t&&(null!=(r=this.getCellGeometry(t))&&(this.isConstrainRelativeChildren()||!r.relative))){var n=this.model.getParent(t),i=(this.getCellGeometry(n),this.getMaximumGraphBounds());if(null!=i&&null!=(n=this.getBoundingBoxFromGeometry([n],!1))&&((i=mxRectangle.fromRectangle(i)).x-=n.x,i.y-=n.y),this.isConstrainChild(t)&&null!=(n=this.getCellContainmentArea(t))&&(0<(h=this.getOverlap(t))&&((n=mxRectangle.fromRectangle(n)).x-=n.width*h,n.y-=n.height*h,n.width+=2*n.width*h,n.height+=2*n.height*h),null==i?i=n:(i=mxRectangle.fromRectangle(i)).intersect(n)),null!=i){var l=[t];if(!this.isCellCollapsed(t))for(var s=this.model.getDescendants(t),o=0;o<s.length;o++)this.isCellVisible(s[o])&&l.push(s[o]);var r,a,h=this.getBoundingBoxFromGeometry(l,!1);null!=h&&(n=0,(r=r.clone()).width>i.width&&(n=r.width-i.width,r.width-=n),h.x+h.width>i.x+i.width&&(n-=h.x+h.width-i.x-i.width-n),a=0,r.height>i.height&&(a=r.height-i.height,r.height-=a),h.y+h.height>i.y+i.height&&(a-=h.y+h.height-i.y-i.height-a),h.x<i.x&&(n-=h.x-i.x),h.y<i.y&&(a-=h.y-i.y),0==n&&0==a||(r.relative?(null==r.offset&&(r.offset=new mxPoint),r.offset.x+=n,r.offset.y+=a):(r.x+=n,r.y+=a)),this.model.setGeometry(t,r))}}},mxGraph.prototype.resetEdges=function(t){if(null!=t){for(var e=new mxDictionary,n=0;n<t.length;n++)e.put(t[n],!0);this.model.beginUpdate();try{for(n=0;n<t.length;n++){var i=this.model.getEdges(t[n]);if(null!=i)for(var l=0;l<i.length;l++){var s=this.view.getState(i[l]),o=null!=s?s.getVisibleTerminal(!0):this.view.getVisibleTerminal(i[l],!0),r=null!=s?s.getVisibleTerminal(!1):this.view.getVisibleTerminal(i[l],!1);e.get(o)&&e.get(r)||this.resetEdge(i[l])}this.resetEdges(this.model.getChildren(t[n]))}}finally{this.model.endUpdate()}}},mxGraph.prototype.resetEdge=function(t){var e=this.model.getGeometry(t);return null!=e&&null!=e.points&&0<e.points.length&&((e=e.clone()).points=[],this.model.setGeometry(t,e)),t},mxGraph.prototype.getOutlineConstraint=function(t,e,n){var i,l,s,o,r,a,h,u,d;return null!=e.shape?(i=this.view.getPerimeterBounds(e),(l=e.style[mxConstants.STYLE_DIRECTION])!=mxConstants.DIRECTION_NORTH&&l!=mxConstants.DIRECTION_SOUTH||(i.x+=i.width/2-i.height/2,i.y+=i.height/2-i.width/2,h=i.width,i.width=i.height,i.height=h),0!=(o=mxUtils.toRadians(e.shape.getShapeRotation()))&&(s=Math.cos(-o),o=Math.sin(-o),r=new mxPoint(i.getCenterX(),i.getCenterY()),t=mxUtils.getRotatedPoint(t,s,o,r)),o=s=1,a=r=0,this.getModel().isVertex(e.cell)&&(u=e.style[mxConstants.STYLE_FLIPH],d=e.style[mxConstants.STYLE_FLIPV],null!=e.shape&&null!=e.shape.stencil&&(u=1==mxUtils.getValue(e.style,"stencilFlipH",0)||u,d=1==mxUtils.getValue(e.style,"stencilFlipV",0)||d),l!=mxConstants.DIRECTION_NORTH&&l!=mxConstants.DIRECTION_SOUTH||(h=u,u=d,d=h),u&&(s=-1,r=-i.width),d)&&(o=-1,a=-i.height),t=new mxPoint((t.x-i.x)*s-r+i.x,(t.y-i.y)*o-a+i.y),new mxConnectionConstraint(new mxPoint(0==i.width?0:Math.round(1e3*(t.x-i.x)/i.width)/1e3,0==i.height?0:Math.round(1e3*(t.y-i.y)/i.height)/1e3),!1)):null},mxGraph.prototype.getAllConnectionConstraints=function(t,e){return null!=t&&null!=t.shape&&null!=t.shape.stencil?t.shape.stencil.constraints:null},mxGraph.prototype.getConnectionConstraint=function(t,e,n){var i,l=null,s=t.style[n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X],o=!1,r=0,a=0;return null!=(l=null!=s&&null!=(i=t.style[n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y])?new mxPoint(parseFloat(s),parseFloat(i)):l)&&(o=mxUtils.getValue(t.style,n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,!0),r=parseFloat(t.style[n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX]),a=parseFloat(t.style[n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY]),r=isFinite(r)?r:0,a=isFinite(a)?a:0),new mxConnectionConstraint(l,o,null,r,a)},mxGraph.prototype.setConnectionConstraint=function(t,e,n,i){if(null!=i){this.model.beginUpdate();try{null==i||null==i.point?(this.setCellStyles(n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[t])):null!=i.point&&(this.setCellStyles(n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,i.point.x,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,i.point.y,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,i.dx,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,i.dy,[t]),i.perimeter?this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[t]):this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,"0",[t]))}finally{this.model.endUpdate()}}},mxGraph.prototype.getConnectionPoint=function(t,e,n){n=null==n||n;var i,l,s,o,r,a,h,u=null;return null!=t&&null!=e.point&&(l=new mxPoint((i=this.view.getPerimeterBounds(t)).getCenterX(),i.getCenterY()),o=0,null!=(r=t.style[mxConstants.STYLE_DIRECTION])&&1==mxUtils.getValue(t.style,mxConstants.STYLE_ANCHOR_POINT_DIRECTION,1)&&(r==mxConstants.DIRECTION_NORTH?o+=270:r==mxConstants.DIRECTION_WEST?o+=180:r==mxConstants.DIRECTION_SOUTH&&(o+=90),r!=mxConstants.DIRECTION_NORTH&&r!=mxConstants.DIRECTION_SOUTH||i.rotate90()),s=this.view.scale,u=new mxPoint(i.x+e.point.x*i.width+e.dx*s,i.y+e.point.y*i.height+e.dy*s),s=t.style[mxConstants.STYLE_ROTATION]||0,e.perimeter?(0!=o&&(h=a=0,90==o?h=1:180==o?a=-1:270==o&&(h=-1),u=mxUtils.getRotatedPoint(u,a,h,l)),u=this.view.getPerimeterPoint(t,u,!1)):(s+=o,this.getModel().isVertex(t.cell)&&(e=1==t.style[mxConstants.STYLE_FLIPH],o=1==t.style[mxConstants.STYLE_FLIPV],null!=t.shape&&null!=t.shape.stencil&&(e=1==mxUtils.getValue(t.style,"stencilFlipH",0)||e,o=1==mxUtils.getValue(t.style,"stencilFlipV",0)||o),r!=mxConstants.DIRECTION_NORTH&&r!=mxConstants.DIRECTION_SOUTH||(t=e,e=o,o=t),e&&(u.x=2*i.getCenterX()-u.x),o)&&(u.y=2*i.getCenterY()-u.y)),0!=s)&&null!=u&&(r=mxUtils.toRadians(s),a=Math.cos(r),h=Math.sin(r),u=mxUtils.getRotatedPoint(u,a,h,l)),n&&null!=u&&(u.x=Math.round(u.x),u.y=Math.round(u.y)),u},mxGraph.prototype.connectCell=function(t,e,n,i){this.model.beginUpdate();try{var l=this.model.getTerminal(t,n);this.cellConnected(t,e,n,i),this.fireEvent(new mxEventObject(mxEvent.CONNECT_CELL,"edge",t,"terminal",e,"source",n,"previous",l))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellConnected=function(t,e,n,i){if(null!=t){this.model.beginUpdate();try{var l,s,o=this.model.getTerminal(t,n);this.setConnectionConstraint(t,e,n,i),this.isPortsEnabled()&&(l=null,this.isPort(e)&&(l=e.getId(),e=this.getTerminalForPort(e,n)),s=n?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT,this.setCellStyles(s,l,[t])),this.model.setTerminal(t,e,n),this.resetEdgesOnConnect&&this.resetEdge(t),this.fireEvent(new mxEventObject(mxEvent.CELL_CONNECTED,"edge",t,"terminal",e,"source",n,"previous",o))}finally{this.model.endUpdate()}}},mxGraph.prototype.disconnectGraph=function(t){if(null!=t){this.model.beginUpdate();try{for(var e=this.view.scale,n=this.view.translate,i=new mxDictionary,l=0;l<t.length;l++)i.put(t[l],!0);for(l=0;l<t.length;l++)if(this.model.isEdge(t[l]))if(null!=(r=this.model.getGeometry(t[l]))){var s=this.view.getState(t[l]),o=this.view.getState(this.model.getParent(t[l]));if(null!=s&&null!=o){var r=r.clone(),a=-o.origin.x,h=-o.origin.y,u=s.absolutePoints,d=this.model.getTerminal(t[l],!0);if(null!=d&&this.isCellDisconnectable(t[l],d,!0)){for(;null!=d&&!i.get(d);)d=this.model.getParent(d);null==d&&(r.setTerminalPoint(new mxPoint(u[0].x/e-n.x+a,u[0].y/e-n.y+h),!0),this.model.setTerminal(t[l],null,!0))}var p,m=this.model.getTerminal(t[l],!1);if(null!=m&&this.isCellDisconnectable(t[l],m,!1)){for(;null!=m&&!i.get(m);)m=this.model.getParent(m);null==m&&(p=u.length-1,r.setTerminalPoint(new mxPoint(u[p].x/e-n.x+a,u[p].y/e-n.y+h),!1),this.model.setTerminal(t[l],null,!1))}this.model.setGeometry(t[l],r)}}}finally{this.model.endUpdate()}}},mxGraph.prototype.getCurrentRoot=function(){return this.view.currentRoot},mxGraph.prototype.getTranslateForRoot=function(t){return null},mxGraph.prototype.isPort=function(t){return!1},mxGraph.prototype.getTerminalForPort=function(t,e){return this.model.getParent(t)},mxGraph.prototype.getChildOffsetForCell=function(t){return null},mxGraph.prototype.enterGroup=function(t){null!=(t=t||this.getSelectionCell())&&this.isValidRoot(t)&&(this.view.setCurrentRoot(t),this.clearSelection(),(t=mxRectangle.fromRectangle(this.getGraphBounds())).x-=this.view.translate.x,t.y-=this.view.translate.y,this.scrollRectToVisible(t))},mxGraph.prototype.exitGroup=function(){var t=this.model.getRoot(),e=this.getCurrentRoot();if(null!=e){for(var n=this.model.getParent(e);n!=t&&!this.isValidRoot(n)&&this.model.getParent(n)!=t;)n=this.model.getParent(n);n==t||this.model.getParent(n)==t?this.view.setCurrentRoot(null):this.view.setCurrentRoot(n),null!=this.view.getState(e)&&(this.setSelectionCell(e),this.scrollCellToVisible(e))}},mxGraph.prototype.home=function(){var t=this.getCurrentRoot();null!=t&&(this.view.setCurrentRoot(null),null!=this.view.getState(t))&&this.setSelectionCell(t)},mxGraph.prototype.isValidRoot=function(t){return null!=t},mxGraph.prototype.getGraphBounds=function(){return this.view.getGraphBounds()},mxGraph.prototype.getCellBounds=function(t,e,n){var i=[t],l=(e&&(i=i.concat(this.model.getEdges(t))),this.view.getBounds(i));if(n)for(var s=this.model.getChildCount(t),o=0;o<s;o++){var r=this.getCellBounds(this.model.getChildAt(t,o),e,!0);null!=l?l.add(r):l=r}return l},mxGraph.prototype.getBoundingBoxFromGeometry=function(t,e,n,i){e=null!=e&&e;var l=null;if(null!=t)for(var s=0;s<t.length;s++)if(e||this.model.isVertex(t[s])){var o=this.getCellGeometry(t[s]);if(null!=o){var r=this.model.getParent(t[s]),a=null;if(this.model.isEdge(t[s])){var h=function(t){null!=t&&(null==a?a=new mxRectangle(t.x,t.y,0,0):a.add(new mxRectangle(t.x,t.y,0,0)))},u=(null==this.model.getTerminal(t[s],!0)&&h(o.getTerminalPoint(!0)),null==this.model.getTerminal(t[s],!1)&&h(o.getTerminalPoint(!1)),o.points);if(null!=u)for(var d=0;d<u.length;d++)h(u[d]);null!=a&&this.model.isVertex(r)&&0<=mxUtils.indexOf(null!=n?n:t,r)&&null!=(p=this.getBoundingBoxFromGeometry([r],!1,null!=n?n:t,i))&&(a.x+=p.x,a.y+=p.y)}else{o.relative?this.model.isVertex(r)&&r!=this.view.currentRoot&&null!=(p=this.getBoundingBoxFromGeometry([r],!1,null!=n?n:t,i))&&(a=new mxRectangle(o.x*p.width,o.y*p.height,o.width,o.height),0<=mxUtils.indexOf(null!=n?n:t,r))&&(a.x+=p.x,a.y+=p.y):(a=mxRectangle.fromRectangle(o),this.model.isVertex(r)&&0<=mxUtils.indexOf(null!=n?n:t,r)&&null!=(p=this.getBoundingBoxFromGeometry([r],!1,null!=n?n:t,i))&&(a.x+=p.x,a.y+=p.y)),null!=a&&null!=o.offset&&(a.x+=o.offset.x,a.y+=o.offset.y);var p,m=this.getCurrentCellStyle(t[s]);null!=a&&0!=(r=mxUtils.getValue(m,mxConstants.STYLE_ROTATION,0))&&(a=mxUtils.getBoundingBox(a,r))}null!=a&&(i&&null!=(m=this.getCurrentCellStyle(t[s],!0))&&(o=mxUtils.getNumber(m,mxConstants.STYLE_STROKEWIDTH,1),a.grow(o/2)),null==l?l=mxRectangle.fromRectangle(a):l.add(a))}}return l},mxGraph.prototype.refresh=function(t){this.view.clear(t,null==t),this.view.validate(),this.sizeDidChange(),this.fireEvent(new mxEventObject(mxEvent.REFRESH))},mxGraph.prototype.snap=function(t){return t=this.gridEnabled?Math.round(t/this.gridSize)*this.gridSize:t},mxGraph.prototype.snapDelta=function(t,e,n,i,l){var s,o,r,a=this.view.translate,h=this.view.scale;return!n&&this.gridEnabled?(s=this.gridSize*h*.5,i||(o=e.x-(this.snap(e.x/h-a.x)+a.x)*h,Math.abs(t.x-o)<s?t.x=0:t.x=this.snap(t.x/h)*h-o),l||(r=e.y-(this.snap(e.y/h-a.y)+a.y)*h,Math.abs(t.y-r)<s?t.y=0:t.y=this.snap(t.y/h)*h-r)):(s=.5*h,i||(o=e.x-(Math.round(e.x/h-a.x)+a.x)*h,Math.abs(t.x-o)<s?t.x=0:t.x=Math.round(t.x/h)*h-o),l||(r=e.y-(Math.round(e.y/h-a.y)+a.y)*h,Math.abs(t.y-r)<s?t.y=0:t.y=Math.round(t.y/h)*h-r)),t},mxGraph.prototype.panGraph=function(t,e){if(this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container))this.container.scrollLeft=-t,this.container.scrollTop=-e;else{var n=this.view.getCanvas();if(this.dialect==mxConstants.DIALECT_SVG)if(0==t&&0==e){if(mxClient.IS_IE?n.setAttribute("transform","translate("+t+","+e+")"):n.removeAttribute("transform"),null!=this.shiftPreview1){for(var i=this.shiftPreview1.firstChild;null!=i;){var l=i.nextSibling;this.container.appendChild(i),i=l}for(null!=this.shiftPreview1.parentNode&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,this.container.appendChild(n.parentNode),i=this.shiftPreview2.firstChild;null!=i;){l=i.nextSibling;this.container.appendChild(i),i=l}null!=this.shiftPreview2.parentNode&&this.shiftPreview2.parentNode.removeChild(this.shiftPreview2),this.shiftPreview2=null}}else{if(n.setAttribute("transform","translate("+t+","+e+")"),null==this.shiftPreview1){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";for(var s=this.shiftPreview1,i=this.container.firstChild;null!=i;){l=i.nextSibling;i!=n.parentNode?s.appendChild(i):s=this.shiftPreview2,i=l}null!=this.shiftPreview1.firstChild&&(null!=n.parentNode&&n.parentNode.parentNode==this.container?this.container.insertBefore(this.shiftPreview1,n.parentNode):this.container.appendChild(this.shiftPreview1)),null!=this.shiftPreview2.firstChild&&this.container.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=t+"px",this.shiftPreview1.style.top=e+"px",this.shiftPreview2.style.left=t+"px",this.shiftPreview2.style.top=e+"px"}else n.style.left=t+"px",n.style.top=e+"px";this.panDx=t,this.panDy=e,this.fireEvent(new mxEventObject(mxEvent.PAN))}},mxGraph.prototype.zoomIn=function(){this.zoom(this.zoomFactor)},mxGraph.prototype.zoomOut=function(){this.zoom(1/this.zoomFactor)},mxGraph.prototype.zoomActual=function(){1==this.view.scale?this.view.setTranslate(0,0):(this.view.translate.x=0,this.view.translate.y=0,this.view.setScale(1))},mxGraph.prototype.zoomTo=function(t,e){this.zoom(t/this.view.scale,e)},mxGraph.prototype.center=function(t,e,n,i){t=null==t||t,e=null==e||e,n=null!=n?n:.5,i=null!=i?i:.5;var l,s=mxUtils.hasScrollbars(this.container),o=2*this.getBorder(),r=this.container.clientWidth-o,o=this.container.clientHeight-o,a=this.getGraphBounds(),h=this.view.translate,u=this.view.scale,d=t?r-a.width:0,p=e?o-a.height:0;s?(a.x-=h.x,a.y-=h.y,r<(s=this.container.scrollWidth)&&(d=0),o<(l=this.container.scrollHeight)&&(p=0),this.view.setTranslate(Math.floor(d/2-a.x),Math.floor(p/2-a.y)),this.container.scrollLeft=(s-r)/2,this.container.scrollTop=(l-o)/2):this.view.setTranslate(t?Math.floor(h.x-a.x/u+d*n/u):h.x,e?Math.floor(h.y-a.y/u+p*i/u):h.y)},mxGraph.prototype.zoom=function(t,e,n){e=null!=e?e:this.centerZoom;var i,l,s,o,r,a,h=Math.round(this.view.scale*t*100)/100,n=(null!=n&&(h=Math.round(h*n)/n),this.view.getState(this.getSelectionCell()));t=h/this.view.scale,this.keepSelectionVisibleOnZoom&&null!=n?(n=new mxRectangle(n.x*t,n.y*t,n.width*t,n.height*t),this.view.scale=h,this.scrollRectToVisible(n)||(this.view.revalidate(),this.view.setScale(h))):(n=mxUtils.hasScrollbars(this.container),e&&!n?(r=this.container.offsetWidth,a=this.container.offsetHeight,1<t?(r*=-(i=(t-1)/(2*h)),a*=-i):(r*=i=(1/t-1)/(2*this.view.scale),a*=i),this.view.scaleAndTranslate(h,this.view.translate.x+r,this.view.translate.y+a)):(i=this.view.translate.x,l=this.view.translate.y,s=this.container.scrollLeft,o=this.container.scrollTop,this.view.setScale(h),n&&(a=r=0,e&&(r=this.container.offsetWidth*(t-1)/2,a=this.container.offsetHeight*(t-1)/2),this.container.scrollLeft=(this.view.translate.x-i)*this.view.scale+Math.round(s*t+r),this.container.scrollTop=(this.view.translate.y-l)*this.view.scale+Math.round(o*t+a))))},mxGraph.prototype.zoomToRect=function(t){var e,n=this.container.clientWidth/t.width/(this.container.clientHeight/t.height),i=(t.x=Math.max(0,t.x),t.y=Math.max(0,t.y),Math.min(this.container.scrollWidth,t.x+t.width)),l=Math.min(this.container.scrollHeight,t.y+t.height),n=(t.width=i-t.x,t.height=l-t.y,n<1?(s=((e=t.height/n)-t.height)/2,t.height=e,e=Math.min(t.y,s),t.y=t.y-e,l=Math.min(this.container.scrollHeight,t.y+t.height),t.height=l-t.y):(e=((s=t.width*n)-t.width)/2,t.width=s,l=Math.min(t.x,e),t.x=t.x-l,i=Math.min(this.container.scrollWidth,t.x+t.width),t.width=i-t.x),this.container.clientWidth/t.width),s=this.view.scale*n;mxUtils.hasScrollbars(this.container)?(this.view.setScale(s),this.container.scrollLeft=Math.round(t.x*n),this.container.scrollTop=Math.round(t.y*n)):this.view.scaleAndTranslate(s,this.view.translate.x-t.x/this.view.scale,this.view.translate.y-t.y/this.view.scale)},mxGraph.prototype.scrollCellToVisible=function(t,e){var n=-this.view.translate.x,i=-this.view.translate.y,t=this.view.getState(t);null!=t&&(n=new mxRectangle(n+t.x,i+t.y,t.width,t.height),e&&null!=this.container&&(i=this.container.clientWidth,t=this.container.clientHeight,n.x=n.getCenterX()-i/2,n.width=i,n.y=n.getCenterY()-t/2,n.height=t),e=new mxPoint(this.view.translate.x,this.view.translate.y),this.scrollRectToVisible(n))&&(i=new mxPoint(this.view.translate.x,this.view.translate.y),this.view.translate.x=e.x,this.view.translate.y=e.y,this.view.setTranslate(i.x,i.y))},mxGraph.prototype.scrollRectToVisible=function(t){var e,n,i,l,s,o,r,a,h=!1;return null!=t&&(e=this.container.offsetWidth,n=this.container.offsetHeight,i=Math.min(e,t.width),l=Math.min(n,t.height),mxUtils.hasScrollbars(this.container)?(o=this.container,t.x+=this.view.translate.x,t.y+=this.view.translate.y,r=o.scrollLeft-t.x,a=Math.max(r-o.scrollLeft,0),0<r?o.scrollLeft-=2+r:0<(r=t.x+i-o.scrollLeft-o.clientWidth)&&(o.scrollLeft+=2+r),r=o.scrollTop-t.y,s=Math.max(0,r-o.scrollTop),0<r?o.scrollTop-=2+r:0<(r=t.y+l-o.scrollTop-o.clientHeight)&&(o.scrollTop+=2+r),this.useScrollbarsForPanning||0==a&&0==s||this.view.setTranslate(a,s)):(o=-this.view.translate.x,r=-this.view.translate.y,a=this.view.scale,t.x+i>o+e&&(this.view.translate.x-=(t.x+i-e-o)/a,h=!0),t.y+l>r+n&&(this.view.translate.y-=(t.y+l-n-r)/a,h=!0),t.x<o&&(this.view.translate.x+=(o-t.x)/a,h=!0),t.y<r&&(this.view.translate.y+=(r-t.y)/a,h=!0),h&&(this.view.refresh(),null!=this.selectionCellsHandler)&&this.selectionCellsHandler.refresh())),h},mxGraph.prototype.getCellGeometry=function(t){return this.model.getGeometry(t)},mxGraph.prototype.isCellVisible=function(t){return this.model.isVisible(t)},mxGraph.prototype.isCellCollapsed=function(t){return this.model.isCollapsed(t)},mxGraph.prototype.isCellConnectable=function(t){return this.model.isConnectable(t)},mxGraph.prototype.isOrthogonal=function(t){var e=t.style[mxConstants.STYLE_ORTHOGONAL];return null!=e?e:(e=this.view.getEdgeStyle(t))==mxEdgeStyle.SegmentConnector||e==mxEdgeStyle.ElbowConnector||e==mxEdgeStyle.SideToSide||e==mxEdgeStyle.TopToBottom||e==mxEdgeStyle.EntityRelation||e==mxEdgeStyle.OrthConnector},mxGraph.prototype.isLoop=function(t){var e=t.getVisibleTerminalState(!0),t=t.getVisibleTerminalState(!1);return null!=e&&e==t},mxGraph.prototype.isCloneEvent=function(t){return mxEvent.isControlDown(t)},mxGraph.prototype.isTransparentClickEvent=function(t){return!1},mxGraph.prototype.isToggleEvent=function(t){return mxClient.IS_MAC?mxEvent.isMetaDown(t):mxEvent.isControlDown(t)},mxGraph.prototype.isGridEnabledEvent=function(t){return null!=t&&!mxEvent.isAltDown(t)},mxGraph.prototype.isConstrainedEvent=function(t){return mxEvent.isShiftDown(t)&&!mxEvent.isAltDown(t)},mxGraph.prototype.isIgnoreTerminalEvent=function(t){return!1},mxGraph.prototype.validationAlert=function(t){mxUtils.alert(t)},mxGraph.prototype.isEdgeValid=function(t,e,n){return null==this.getEdgeValidationError(t,e,n)},mxGraph.prototype.getEdgeValidationError=function(t,e,n){if(null!=t&&!this.isAllowDanglingEdges()&&(null==e||null==n))return"";if(null!=t&&null==this.model.getTerminal(t,!0)&&null==this.model.getTerminal(t,!1))return null;if(!this.allowLoops&&e==n&&null!=e)return"";if(!this.isValidConnection(e,n))return"";if(null==e||null==n)return this.allowDanglingEdges?null:"";var i,l="",s=(!this.multigraph&&(1<(i=this.model.getEdgesBetween(e,n,!0)).length||1==i.length&&i[0]!=t)&&(l+=(mxResources.get(this.alreadyConnectedResource)||this.alreadyConnectedResource)+"\n"),this.model.getDirectedEdgeCount(e,!0,t)),o=this.model.getDirectedEdgeCount(n,!1,t);if(null!=this.multiplicities)for(var r,a=0;a<this.multiplicities.length;a++)null!=(r=this.multiplicities[a].check(this,t,e,n,s,o))&&(l+=r);return null!=(r=this.validateEdge(t,e,n))&&(l+=r),0<l.length?l:null},mxGraph.prototype.validateEdge=function(t,e,n){return null},mxGraph.prototype.validateGraph=function(t,e){t=null!=t?t:this.model.getRoot(),e=null!=e?e:new Object;for(var n=!0,i=this.model.getChildCount(t),l=0;l<i;l++){var s=this.model.getChildAt(t,l),o=e,o=(this.isValidRoot(s)&&(o=new Object),this.validateGraph(s,o));null!=o?this.setCellWarning(s,o.replace(/\n/g,"<br>")):this.setCellWarning(s,null),n=n&&null==o}var r="",a=(this.isCellCollapsed(t)&&!n&&(r+=(mxResources.get(this.containsValidationErrorsResource)||this.containsValidationErrorsResource)+"\n"),this.model.isEdge(t)?r+=this.getEdgeValidationError(t,this.model.getTerminal(t,!0),this.model.getTerminal(t,!1))||"":r+=this.getCellValidationError(t)||"",this.validateCell(t,e));return null!=a&&(r+=a),null==this.model.getParent(t)&&this.view.validate(),0<r.length||!n?r:null},mxGraph.prototype.getCellValidationError=function(t){var e=this.model.getDirectedEdgeCount(t,!0),n=this.model.getDirectedEdgeCount(t,!1),i=this.model.getValue(t),l="";if(null!=this.multiplicities)for(var s=0;s<this.multiplicities.length;s++){var o=this.multiplicities[s];(o.source&&mxUtils.isNode(i,o.type,o.attr,o.value)&&(e>o.max||e<o.min)||!o.source&&mxUtils.isNode(i,o.type,o.attr,o.value)&&(n>o.max||n<o.min))&&(l+=o.countError+"\n")}return 0<l.length?l:null},mxGraph.prototype.validateCell=function(t,e){return null},mxGraph.prototype.getBackgroundImage=function(){return this.backgroundImage},mxGraph.prototype.setBackgroundImage=function(t){this.backgroundImage=t},mxGraph.prototype.getFoldingImage=function(t){if(null!=t&&this.foldingEnabled&&!this.getModel().isEdge(t.cell)){var e=this.isCellCollapsed(t.cell);if(this.isCellFoldable(t.cell,!e))return e?this.collapsedImage:this.expandedImage}return null},mxGraph.prototype.convertValueToString=function(t){t=this.model.getValue(t);if(null!=t){if(mxUtils.isNode(t))return t.nodeName;if("function"==typeof t.toString)return t.toString()}return""},mxGraph.prototype.getLabel=function(t){var e,n="";return this.labelsVisible&&null!=t&&(e=this.getCurrentCellStyle(t),mxUtils.getValue(e,mxConstants.STYLE_NOLABEL,!1)||(n=this.convertValueToString(t))),n},mxGraph.prototype.isHtmlLabel=function(t){return this.isHtmlLabels()},mxGraph.prototype.isHtmlLabels=function(){return this.htmlLabels},mxGraph.prototype.setHtmlLabels=function(t){this.htmlLabels=t},mxGraph.prototype.isWrapping=function(t){return"wrap"==this.getCurrentCellStyle(t)[mxConstants.STYLE_WHITE_SPACE]},mxGraph.prototype.isLabelClipped=function(t){return"hidden"==this.getCurrentCellStyle(t)[mxConstants.STYLE_OVERFLOW]},mxGraph.prototype.getTooltip=function(t,n,e,i){var l,s=null;return s=null!=t&&(null==t.control||n!=t.control.node&&n.parentNode!=t.control.node||(s=this.collapseExpandResource,s=mxUtils.htmlEntities(mxResources.get(s)||s).replace(/\\n/g,"<br>")),null==s&&null!=t.overlays&&t.overlays.visit(function(t,e){null!=s||n!=e.node&&n.parentNode!=e.node||(s=mxUtils.htmlEntities(e.overlay.toString()).replace(/\\n/g,"<br>"))}),null==(s=null==s&&null!=(l=this.selectionCellsHandler.getHandler(t.cell))&&"function"==typeof l.getTooltipForNode?l.getTooltipForNode(n):s))?this.getTooltipForCell(t.cell):s},mxGraph.prototype.getTooltipForCell=function(t){return null!=t&&null!=t.getTooltip?t.getTooltip():this.convertValueToString(t)},mxGraph.prototype.getLinkForCell=function(t){return null},mxGraph.prototype.getLinkTargetForCell=function(t){return null},mxGraph.prototype.getCursorForMouseEvent=function(t){return this.getCursorForCell(t.getCell())},mxGraph.prototype.getCursorForCell=function(t){return null},mxGraph.prototype.getStartSize=function(t,e){var n=new mxRectangle,t=this.getCurrentCellStyle(t,e),e=parseInt(mxUtils.getValue(t,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE));return mxUtils.getValue(t,mxConstants.STYLE_HORIZONTAL,!0)?n.height=e:n.width=e,n},mxGraph.prototype.getSwimlaneDirection=function(t){var e=mxUtils.getValue(t,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),n=1==mxUtils.getValue(t,mxConstants.STYLE_FLIPH,0),i=1==mxUtils.getValue(t,mxConstants.STYLE_FLIPV,0),t=mxUtils.getValue(t,mxConstants.STYLE_HORIZONTAL,!0)?0:3,e=(e==mxConstants.DIRECTION_NORTH?t--:e==mxConstants.DIRECTION_WEST?t+=2:e==mxConstants.DIRECTION_SOUTH&&(t+=1),mxUtils.mod(t,2));return n&&1==e&&(t+=2),i&&0==e&&(t+=2),[mxConstants.DIRECTION_NORTH,mxConstants.DIRECTION_EAST,mxConstants.DIRECTION_SOUTH,mxConstants.DIRECTION_WEST][mxUtils.mod(t,4)]},mxGraph.prototype.getActualStartSize=function(t,e){var n=new mxRectangle;return this.isSwimlane(t,e)&&(t=this.getCurrentCellStyle(t,e),e=parseInt(mxUtils.getValue(t,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE)),(t=this.getSwimlaneDirection(t))==mxConstants.DIRECTION_NORTH?n.y=e:t==mxConstants.DIRECTION_WEST?n.x=e:t==mxConstants.DIRECTION_SOUTH?n.height=e:n.width=e),n},mxGraph.prototype.getImage=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_IMAGE]:null},mxGraph.prototype.isTransparentState=function(t){var e,n,i=!1;return null!=t&&(e=mxUtils.getValue(t.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),n=mxUtils.getValue(t.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE),i=e==mxConstants.NONE&&n==mxConstants.NONE&&null==this.getImage(t)),i},mxGraph.prototype.getVerticalAlign=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_VERTICAL_ALIGN]||mxConstants.ALIGN_MIDDLE:null},mxGraph.prototype.getIndicatorColor=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_COLOR]:null},mxGraph.prototype.getIndicatorGradientColor=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_GRADIENTCOLOR]:null},mxGraph.prototype.getIndicatorShape=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_SHAPE]:null},mxGraph.prototype.getIndicatorImage=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_IMAGE]:null},mxGraph.prototype.getBorder=function(){return this.border},mxGraph.prototype.setBorder=function(t){this.border=t},mxGraph.prototype.isSwimlane=function(t,e){return null!=t&&this.model.getParent(t)!=this.model.getRoot()&&!this.model.isEdge(t)&&this.getCurrentCellStyle(t,e)[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_SWIMLANE},mxGraph.prototype.isResizeContainer=function(){return this.resizeContainer},mxGraph.prototype.setResizeContainer=function(t){this.resizeContainer=t},mxGraph.prototype.isEnabled=function(){return this.enabled},mxGraph.prototype.setEnabled=function(t){this.enabled=t,this.fireEvent(new mxEventObject("enabledChanged","enabled",t))},mxGraph.prototype.isEscapeEnabled=function(){return this.escapeEnabled},mxGraph.prototype.setEscapeEnabled=function(t){this.escapeEnabled=t},mxGraph.prototype.isInvokesStopCellEditing=function(){return this.invokesStopCellEditing},mxGraph.prototype.setInvokesStopCellEditing=function(t){this.invokesStopCellEditing=t},mxGraph.prototype.isEnterStopsCellEditing=function(){return this.enterStopsCellEditing},mxGraph.prototype.setEnterStopsCellEditing=function(t){this.enterStopsCellEditing=t},mxGraph.prototype.isCellLocked=function(t){var e=this.model.getGeometry(t);return this.isCellsLocked()||null!=e&&this.model.isVertex(t)&&e.relative},mxGraph.prototype.isCellsLocked=function(){return this.cellsLocked},mxGraph.prototype.setCellsLocked=function(t){this.cellsLocked=t},mxGraph.prototype.getCloneableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellCloneable(t)}))},mxGraph.prototype.isCellCloneable=function(t){t=this.getCurrentCellStyle(t);return this.isCellsCloneable()&&0!=t[mxConstants.STYLE_CLONEABLE]},mxGraph.prototype.isCellsCloneable=function(){return this.cellsCloneable},mxGraph.prototype.setCellsCloneable=function(t){this.cellsCloneable=t},mxGraph.prototype.getExportableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.canExportCell(t)}))},mxGraph.prototype.canExportCell=function(t){return this.exportEnabled},mxGraph.prototype.getImportableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.canImportCell(t)}))},mxGraph.prototype.canImportCell=function(t){return this.importEnabled},mxGraph.prototype.isCellSelectable=function(t){return this.isCellsSelectable()},mxGraph.prototype.isCellsSelectable=function(){return this.cellsSelectable},mxGraph.prototype.setCellsSelectable=function(t){this.cellsSelectable=t},mxGraph.prototype.getDeletableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellDeletable(t)}))},mxGraph.prototype.isCellDeletable=function(t){t=this.getCurrentCellStyle(t);return this.isCellsDeletable()&&0!=t[mxConstants.STYLE_DELETABLE]},mxGraph.prototype.isCellsDeletable=function(){return this.cellsDeletable},mxGraph.prototype.setCellsDeletable=function(t){this.cellsDeletable=t},mxGraph.prototype.isLabelMovable=function(t){return!this.isCellLocked(t)&&(this.model.isEdge(t)&&this.edgeLabelsMovable||this.model.isVertex(t)&&this.vertexLabelsMovable)},mxGraph.prototype.getRotatableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellRotatable(t)}))},mxGraph.prototype.isCellRotatable=function(t){return 0!=this.getCurrentCellStyle(t)[mxConstants.STYLE_ROTATABLE]},mxGraph.prototype.getMovableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellMovable(t)}))},mxGraph.prototype.isCellMovable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsMovable()&&!this.isCellLocked(t)&&0!=e[mxConstants.STYLE_MOVABLE]},mxGraph.prototype.isCellsMovable=function(){return this.cellsMovable},mxGraph.prototype.setCellsMovable=function(t){this.cellsMovable=t},mxGraph.prototype.isGridEnabled=function(){return this.gridEnabled},mxGraph.prototype.setGridEnabled=function(t){this.gridEnabled=t},mxGraph.prototype.isPortsEnabled=function(){return this.portsEnabled},mxGraph.prototype.setPortsEnabled=function(t){this.portsEnabled=t},mxGraph.prototype.getGridSize=function(){return this.gridSize},mxGraph.prototype.setGridSize=function(t){this.gridSize=t},mxGraph.prototype.getTolerance=function(){return this.tolerance},mxGraph.prototype.setTolerance=function(t){this.tolerance=t},mxGraph.prototype.isVertexLabelsMovable=function(){return this.vertexLabelsMovable},mxGraph.prototype.setVertexLabelsMovable=function(t){this.vertexLabelsMovable=t},mxGraph.prototype.isEdgeLabelsMovable=function(){return this.edgeLabelsMovable},mxGraph.prototype.setEdgeLabelsMovable=function(t){this.edgeLabelsMovable=t},mxGraph.prototype.isSwimlaneNesting=function(){return this.swimlaneNesting},mxGraph.prototype.setSwimlaneNesting=function(t){this.swimlaneNesting=t},mxGraph.prototype.isSwimlaneSelectionEnabled=function(){return this.swimlaneSelectionEnabled},mxGraph.prototype.setSwimlaneSelectionEnabled=function(t){this.swimlaneSelectionEnabled=t},mxGraph.prototype.isMultigraph=function(){return this.multigraph},mxGraph.prototype.setMultigraph=function(t){this.multigraph=t},mxGraph.prototype.isAllowLoops=function(){return this.allowLoops},mxGraph.prototype.setAllowDanglingEdges=function(t){this.allowDanglingEdges=t},mxGraph.prototype.isAllowDanglingEdges=function(){return this.allowDanglingEdges},mxGraph.prototype.setConnectableEdges=function(t){this.connectableEdges=t},mxGraph.prototype.isConnectableEdges=function(){return this.connectableEdges},mxGraph.prototype.setCloneInvalidEdges=function(t){this.cloneInvalidEdges=t},mxGraph.prototype.isCloneInvalidEdges=function(){return this.cloneInvalidEdges},mxGraph.prototype.setAllowLoops=function(t){this.allowLoops=t},mxGraph.prototype.isDisconnectOnMove=function(){return this.disconnectOnMove},mxGraph.prototype.setDisconnectOnMove=function(t){this.disconnectOnMove=t},mxGraph.prototype.isDropEnabled=function(){return this.dropEnabled},mxGraph.prototype.setDropEnabled=function(t){this.dropEnabled=t},mxGraph.prototype.isSplitEnabled=function(){return this.splitEnabled},mxGraph.prototype.setSplitEnabled=function(t){this.splitEnabled=t},mxGraph.prototype.getResizableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellResizable(t)}))},mxGraph.prototype.isCellResizable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsResizable()&&!this.isCellLocked(t)&&"0"!=mxUtils.getValue(e,mxConstants.STYLE_RESIZABLE,"1")},mxGraph.prototype.isCellsResizable=function(){return this.cellsResizable},mxGraph.prototype.setCellsResizable=function(t){this.cellsResizable=t},mxGraph.prototype.isTerminalPointMovable=function(t,e){return!0},mxGraph.prototype.isCellBendable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsBendable()&&!this.isCellLocked(t)&&0!=e[mxConstants.STYLE_BENDABLE]},mxGraph.prototype.isCellsBendable=function(){return this.cellsBendable},mxGraph.prototype.setCellsBendable=function(t){this.cellsBendable=t},mxGraph.prototype.getEditableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellEditable(t)}))},mxGraph.prototype.isCellEditable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsEditable()&&!this.isCellLocked(t)&&0!=e[mxConstants.STYLE_EDITABLE]},mxGraph.prototype.isCellsEditable=function(){return this.cellsEditable},mxGraph.prototype.setCellsEditable=function(t){this.cellsEditable=t},mxGraph.prototype.isCellDisconnectable=function(t,e,n){return this.isCellsDisconnectable()&&!this.isCellLocked(t)},mxGraph.prototype.isCellsDisconnectable=function(){return this.cellsDisconnectable},mxGraph.prototype.setCellsDisconnectable=function(t){this.cellsDisconnectable=t},mxGraph.prototype.isValidSource=function(t){return null==t&&this.allowDanglingEdges||null!=t&&(!this.model.isEdge(t)||this.connectableEdges)&&this.isCellConnectable(t)},mxGraph.prototype.isValidTarget=function(t){return this.isValidSource(t)},mxGraph.prototype.isValidConnection=function(t,e){return this.isValidSource(t)&&this.isValidTarget(e)},mxGraph.prototype.setConnectable=function(t){this.connectionHandler.setEnabled(t)},mxGraph.prototype.isConnectable=function(){return this.connectionHandler.isEnabled()},mxGraph.prototype.setTooltips=function(t){this.tooltipHandler.setEnabled(t)},mxGraph.prototype.setPanning=function(t){this.panningHandler.panningEnabled=t},mxGraph.prototype.isEditing=function(t){var e;return null!=this.cellEditor&&(e=this.cellEditor.getEditingCell(),null==t?null!=e:t==e)},mxGraph.prototype.isAutoSizeCell=function(t){t=this.getCurrentCellStyle(t);return this.isAutoSizeCells()||1==t[mxConstants.STYLE_AUTOSIZE]},mxGraph.prototype.isAutoSizeCells=function(){return this.autoSizeCells},mxGraph.prototype.setAutoSizeCells=function(t){this.autoSizeCells=t},mxGraph.prototype.isExtendParent=function(t){return!this.getModel().isEdge(t)&&this.isExtendParents()},mxGraph.prototype.isExtendParents=function(){return this.extendParents},mxGraph.prototype.setExtendParents=function(t){this.extendParents=t},mxGraph.prototype.isExtendParentsOnAdd=function(t){return this.extendParentsOnAdd},mxGraph.prototype.setExtendParentsOnAdd=function(t){this.extendParentsOnAdd=t},mxGraph.prototype.isExtendParentsOnMove=function(){return this.extendParentsOnMove},mxGraph.prototype.setExtendParentsOnMove=function(t){this.extendParentsOnMove=t},mxGraph.prototype.isRecursiveResize=function(t){return this.recursiveResize},mxGraph.prototype.setRecursiveResize=function(t){this.recursiveResize=t},mxGraph.prototype.isConstrainChild=function(t){return this.isConstrainChildren()&&!this.getModel().isEdge(this.getModel().getParent(t))},mxGraph.prototype.isConstrainChildren=function(){return this.constrainChildren},mxGraph.prototype.setConstrainChildren=function(t){this.constrainChildren=t},mxGraph.prototype.isConstrainRelativeChildren=function(){return this.constrainRelativeChildren},mxGraph.prototype.setConstrainRelativeChildren=function(t){this.constrainRelativeChildren=t},mxGraph.prototype.isAllowNegativeCoordinates=function(){return this.allowNegativeCoordinates},mxGraph.prototype.setAllowNegativeCoordinates=function(t){this.allowNegativeCoordinates=t},mxGraph.prototype.getOverlap=function(t){return this.isAllowOverlapParent(t)?this.defaultOverlap:0},mxGraph.prototype.isAllowOverlapParent=function(t){return!1},mxGraph.prototype.getFoldableCells=function(t,e){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellFoldable(t,e)}))},mxGraph.prototype.isCellFoldable=function(t,e){var n=this.getCurrentCellStyle(t);return 0<this.model.getChildCount(t)&&0!=n[mxConstants.STYLE_FOLDABLE]},mxGraph.prototype.isValidDropTarget=function(t,e,n){return null!=t&&!this.isCellLocked(t)&&(this.isSplitEnabled()&&this.isSplitTarget(t,e,n)||!this.model.isEdge(t)&&(this.isSwimlane(t)||0<this.model.getChildCount(t)&&!this.isCellCollapsed(t)))},mxGraph.prototype.isSplitTarget=function(t,e,n){var i;return!(!this.model.isEdge(t)||null==e||1!=e.length||!this.isCellConnectable(e[0])||null!=this.getEdgeValidationError(t,this.model.getTerminal(t,!0),e[0])||(i=this.model.getTerminal(t,!0),t=this.model.getTerminal(t,!1),this.model.isAncestor(e[0],i))||this.model.isAncestor(e[0],t))},mxGraph.prototype.getDropTarget=function(t,e,n,i){if(!this.isSwimlaneNesting())for(var l=0;l<t.length;l++)if(this.isSwimlane(t[l]))return null;var s=mxUtils.convertPoint(this.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),s=(s.x-=this.panDx,s.y-=this.panDy,this.getSwimlaneAt(s.x,s.y));if(null==n)n=s;else if(null!=s){for(var o=this.model.getParent(s);null!=o&&this.isSwimlane(o)&&o!=n;)o=this.model.getParent(o);o==n&&(n=s)}for(;null!=n&&!this.isValidDropTarget(n,t,e)&&!this.model.isLayer(n);)n=this.model.getParent(n);if(null==i||!i)for(var r=n;null!=r&&mxUtils.indexOf(t,r)<0;)r=this.model.getParent(r);return this.model.isLayer(n)||null!=r?null:n},mxGraph.prototype.getDefaultParent=function(){var t,e=this.getCurrentRoot();return null==e&&null==(e=this.defaultParent)&&(t=this.model.getRoot(),e=this.model.getChildAt(t,0)),e},mxGraph.prototype.setDefaultParent=function(t){this.defaultParent=t},mxGraph.prototype.getSwimlane=function(t){for(;null!=t&&!this.isSwimlane(t);)t=this.model.getParent(t);return t},mxGraph.prototype.getSwimlaneAt=function(t,e,n){if(null!=(n=null==n&&null==(n=this.getCurrentRoot())?this.model.getRoot():n))for(var i=this.model.getChildCount(n),l=0;l<i;l++){var s=this.model.getChildAt(n,l);if(null!=s){var o=this.getSwimlaneAt(t,e,s);if(null!=o)return o;if(this.isCellVisible(s)&&this.isSwimlane(s)){o=this.view.getState(s);if(this.intersects(o,t,e))return s}}}return null},mxGraph.prototype.getCellAt=function(t,e,n,i,l,s){if(i=null==i||i,l=null==l||l,null!=(n=null==n&&null==(n=this.getCurrentRoot())?this.getModel().getRoot():n))for(var o=this.model.getChildCount(n)-1;0<=o;o--){var r=this.model.getChildAt(n,o),a=this.getCellAt(t,e,r,i,l,s);if(null!=a)return a;if(this.isCellVisible(r)&&(l&&this.model.isEdge(r)||i&&this.model.isVertex(r))){a=this.view.getState(r);if(null!=a&&(null==s||!s(a,t,e))&&this.intersects(a,t,e))return r}}return null},mxGraph.prototype.intersects=function(t,e,n){if(null!=t){var i=t.absolutePoints;if(null!=i)for(var l=this.tolerance*this.tolerance,s=i[0],o=1;o<i.length;o++){var r=i[o];if(mxUtils.ptSegDistSq(s.x,s.y,r.x,r.y,e,n)<=l)return!0;s=r}else{var a,h,u=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0);if(0!=u&&(a=Math.cos(-u),u=Math.sin(-u),h=new mxPoint(t.getCenterX(),t.getCenterY()),e=(s=mxUtils.getRotatedPoint(new mxPoint(e,n),a,u,h)).x,n=s.y),mxUtils.contains(t,e,n))return!0}}return!1},mxGraph.prototype.hitsSwimlaneContent=function(t,e,n){var i=this.getView().getState(t),t=this.getStartSize(t);if(null!=i){var l=this.getView().getScale();if(e-=i.x,n-=i.y,0<t.width&&0<e&&e>t.width*l)return!0;if(0<t.height&&0<n&&n>t.height*l)return!0}return!1},mxGraph.prototype.getChildVertices=function(t){return this.getChildCells(t,!0,!1)},mxGraph.prototype.getChildEdges=function(t){return this.getChildCells(t,!1,!0)},mxGraph.prototype.getChildCells=function(t,e,n){t=null!=t?t:this.getDefaultParent();for(var i=this.model.getChildCells(t,e=null!=e&&e,n=null!=n&&n),l=[],s=0;s<i.length;s++)this.isCellVisible(i[s])&&l.push(i[s]);return l},mxGraph.prototype.getConnections=function(t,e){return this.getEdges(t,e,!0,!0,!1)},mxGraph.prototype.getIncomingEdges=function(t,e){return this.getEdges(t,e,!0,!1,!1)},mxGraph.prototype.getOutgoingEdges=function(t,e){return this.getEdges(t,e,!1,!0,!1)},mxGraph.prototype.getEdges=function(t,e,n,i,l,s){n=null==n||n,i=null==i||i,l=null==l||l,s=null!=s&&s;for(var o=[],r=this.isCellCollapsed(t),a=this.model.getChildCount(t),h=0;h<a;h++){var u=this.model.getChildAt(t,h);!r&&this.isCellVisible(u)||(o=o.concat(this.model.getEdges(u,n,i)))}for(var o=o.concat(this.model.getEdges(t,n,i)),d=[],h=0;h<o.length;h++){var p=this.view.getState(o[h]),m=null!=p?p.getVisibleTerminal(!0):this.view.getVisibleTerminal(o[h],!0),p=null!=p?p.getVisibleTerminal(!1):this.view.getVisibleTerminal(o[h],!1);(l&&m==p||m!=p&&(n&&p==t&&(null==e||this.isValidAncestor(m,e,s))||i&&m==t&&(null==e||this.isValidAncestor(p,e,s))))&&d.push(o[h])}return d},mxGraph.prototype.isValidAncestor=function(t,e,n){return n?this.model.isAncestor(e,t):this.model.getParent(t)==e},mxGraph.prototype.getOpposites=function(t,e,n,i){n=null==n||n,i=null==i||i;var l=[],s=new mxDictionary;if(null!=t)for(var o=0;o<t.length;o++){var r=this.view.getState(t[o]),a=null!=r?r.getVisibleTerminal(!0):this.view.getVisibleTerminal(t[o],!0),r=null!=r?r.getVisibleTerminal(!1):this.view.getVisibleTerminal(t[o],!1);a==e&&null!=r&&r!=e&&i?s.get(r)||(s.put(r,!0),l.push(r)):r==e&&null!=a&&a!=e&&n&&!s.get(a)&&(s.put(a,!0),l.push(a))}return l},mxGraph.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;for(var i=this.getEdges(t),l=[],s=0;s<i.length;s++){var o=this.view.getState(i[s]),r=null!=o?o.getVisibleTerminal(!0):this.view.getVisibleTerminal(i[s],!0),o=null!=o?o.getVisibleTerminal(!1):this.view.getVisibleTerminal(i[s],!1);(r==t&&o==e||!n&&r==e&&o==t)&&l.push(i[s])}return l},mxGraph.prototype.getPointForEvent=function(t,e){var t=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),n=this.view.scale,i=this.view.translate,e=0!=e?this.gridSize/2:0;return t.x=this.snap(t.x/n-i.x-e),t.y=this.snap(t.y/n-i.y-e),t},mxGraph.prototype.getCells=function(t,e,n,i,l,s,o,r,a){if(s=null!=s?s:[],0<n||0<i||null!=o){var h=this.getModel(),u=t+n,d=e+i;if(null!=(l=null==l&&null==(l=this.getCurrentRoot())?h.getRoot():l))for(var p=h.getChildCount(l),m=0;m<p;m++){var c,g=h.getChildAt(l,m),x=this.view.getState(g);null==x||!this.isCellVisible(g)||null!=r&&r(x)||(0!=(c=mxUtils.getValue((x=x).style,mxConstants.STYLE_ROTATION)||0)&&(x=mxUtils.getBoundingBox(x,c)),(c=null!=o&&h.isVertex(g)&&mxUtils.intersects(o,x)||null!=o&&h.isEdge(g)&&mxUtils.intersects(o,x)||null==o&&(h.isEdge(g)||h.isVertex(g))&&x.x>=t&&x.y+x.height<=d&&x.y>=e&&x.x+x.width<=u)&&s.push(g),c&&!a)||this.getCells(t,e,n,i,g,s,o,r,a)}}return s},mxGraph.prototype.getCellsBeyond=function(t,e,n,i,l){var s=[];if((i||l)&&null!=(n=null==n?this.getDefaultParent():n))for(var o=this.model.getChildCount(n),r=0;r<o;r++){var a=this.model.getChildAt(n,r),h=this.view.getState(a);this.isCellVisible(a)&&null!=h&&(!i||h.x>=t)&&(!l||h.y>=e)&&s.push(a)}return s},mxGraph.prototype.findTreeRoots=function(t,e,n){e=null!=e&&e,n=null!=n&&n;var i=[];if(null!=t){for(var l=this.getModel(),s=l.getChildCount(t),o=null,r=0,a=0;a<s;a++){var h=l.getChildAt(t,a);if(this.model.isVertex(h)&&this.isCellVisible(h)){for(var u=this.getConnections(h,e?t:null),d=0,p=0,m=0;m<u.length;m++)this.view.getVisibleTerminal(u[m],!0)==h?d++:p++;(n&&0==d&&0<p||!n&&0==p&&0<d)&&i.push(h);var c=n?p-d:d-p;r<c&&(r=c,o=h)}}0==i.length&&null!=o&&i.push(o)}return i},mxGraph.prototype.traverse=function(t,e,n,i,l,s){if(null!=n&&null!=t&&(e=null==e||e,s=null!=s&&s,l=l||new mxDictionary,null==i||!l.get(i))){l.put(i,!0);i=n(t,i);if(null==i||i){var o=this.model.getEdgeCount(t);if(0<o)for(var r=0;r<o;r++){var a=this.model.getEdgeAt(t,r),h=this.model.getTerminal(a,!0)==t;e&&!s!=h||(h=this.model.getTerminal(a,!h),this.traverse(h,e,n,a,l,s))}}}},mxGraph.prototype.isCellSelected=function(t){return this.getSelectionModel().isSelected(t)},mxGraph.prototype.isAncestorSelected=function(t){for(var e=this.model.getParent(t);null!=e&&e!=this.getCurrentRoot();){if(this.isCellSelected(e))return!0;e=this.model.getParent(e)}return!1},mxGraph.prototype.isSelectionEmpty=function(){return this.getSelectionModel().isEmpty()},mxGraph.prototype.clearSelection=function(){return this.getSelectionModel().clear()},mxGraph.prototype.getSelectionCount=function(){return this.getSelectionModel().cells.length},mxGraph.prototype.getSelectionCell=function(){return this.getSelectionModel().cells[0]},mxGraph.prototype.getSelectionCells=function(){return this.getSelectionModel().cells.slice()},mxGraph.prototype.setSelectionCell=function(t){this.getSelectionModel().setCell(t)},mxGraph.prototype.setSelectionCells=function(t){this.getSelectionModel().setCells(t)},mxGraph.prototype.addSelectionCell=function(t){this.getSelectionModel().addCell(t)},mxGraph.prototype.addSelectionCells=function(t){this.getSelectionModel().addCells(t)},mxGraph.prototype.removeSelectionCell=function(t){this.getSelectionModel().removeCell(t)},mxGraph.prototype.removeSelectionCells=function(t){this.getSelectionModel().removeCells(t)},mxGraph.prototype.selectRegion=function(t,e){t=this.getCells(t.x,t.y,t.width,t.height);return this.selectCellsForEvent(t,e),t},mxGraph.prototype.selectNextCell=function(){this.selectCell(!0)},mxGraph.prototype.selectPreviousCell=function(){this.selectCell()},mxGraph.prototype.selectParentCell=function(){this.selectCell(!1,!0)},mxGraph.prototype.selectChildCell=function(){this.selectCell(!1,!1,!0)},mxGraph.prototype.selectCell=function(t,e,n){var i,l=this.selectionModel,s=0<l.cells.length?l.cells[0]:null,l=(1<l.cells.length&&l.clear(),null!=s?this.model.getParent(s):this.getDefaultParent()),o=this.model.getChildCount(l);null==s&&0<o?(i=this.model.getChildAt(l,0),this.setSelectionCell(i)):null!=s&&!e||null==this.view.getState(l)||null==this.model.getGeometry(l)?null!=s&&n?0<this.model.getChildCount(s)&&(i=this.model.getChildAt(s,0),this.setSelectionCell(i)):0<o&&(e=l.getIndex(s),i=t?this.model.getChildAt(l,++e%o):this.model.getChildAt(l,--e<0?o-1:e),this.setSelectionCell(i)):this.getCurrentRoot()!=l&&this.setSelectionCell(l)},mxGraph.prototype.selectAll=function(e,t){e=e||this.getDefaultParent();t=t?this.model.filterDescendants(mxUtils.bind(this,function(t){return t!=e&&null!=this.view.getState(t)}),e):this.model.getChildren(e);null!=t&&this.setSelectionCells(t)},mxGraph.prototype.selectVertices=function(t,e){this.selectCells(!0,!1,t,e)},mxGraph.prototype.selectEdges=function(t){this.selectCells(!1,!0,t)},mxGraph.prototype.selectCells=function(e,n,t,i){t=t||this.getDefaultParent();var l=mxUtils.bind(this,function(t){return null!=this.view.getState(t)&&((i||0==this.model.getChildCount(t))&&this.model.isVertex(t)&&e&&!this.model.isEdge(this.model.getParent(t))||this.model.isEdge(t)&&n)}),l=this.model.filterDescendants(l,t);null!=l&&this.setSelectionCells(l)},mxGraph.prototype.selectCellForEvent=function(t,e){var n=this.isCellSelected(t);this.isToggleEvent(e)?n?this.removeSelectionCell(t):this.addSelectionCell(t):n&&1==this.getSelectionCount()||this.setSelectionCell(t)},mxGraph.prototype.selectCellsForEvent=function(t,e){this.isToggleEvent(e)?this.addSelectionCells(t):this.setSelectionCells(t)},mxGraph.prototype.createHandler=function(t){var e,n,i,l=null;return l=null!=t?this.model.isEdge(t.cell)?(e=t.getVisibleTerminalState(!0),n=t.getVisibleTerminalState(!1),i=this.getCellGeometry(t.cell),i=this.view.getEdgeStyle(t,null!=i?i.points:null,e,n),this.createEdgeHandler(t,i)):this.createVertexHandler(t):l},mxGraph.prototype.createVertexHandler=function(t){return new mxVertexHandler(t)},mxGraph.prototype.createEdgeHandler=function(t,e){return e==mxEdgeStyle.Loop||e==mxEdgeStyle.ElbowConnector||e==mxEdgeStyle.SideToSide||e==mxEdgeStyle.TopToBottom?this.createElbowEdgeHandler(t):e==mxEdgeStyle.SegmentConnector||e==mxEdgeStyle.OrthConnector?this.createEdgeSegmentHandler(t):new mxEdgeHandler(t)},mxGraph.prototype.createEdgeSegmentHandler=function(t){return new mxEdgeSegmentHandler(t)},mxGraph.prototype.createElbowEdgeHandler=function(t){return new mxElbowEdgeHandler(t)},mxGraph.prototype.addMouseListener=function(t){null==this.mouseListeners&&(this.mouseListeners=[]),this.mouseListeners.push(t)},mxGraph.prototype.removeMouseListener=function(t){if(null!=this.mouseListeners)for(var e=0;e<this.mouseListeners.length;e++)if(this.mouseListeners[e]==t){this.mouseListeners.splice(e,1);break}},mxGraph.prototype.updateMouseEvent=function(t,e){var n;return null!=t.graphX&&null!=t.graphY||(n=mxUtils.convertPoint(this.container,t.getX(),t.getY()),t.graphX=n.x-this.panDx,t.graphY=n.y-this.panDy,null==t.getCell()&&this.isMouseDown&&e==mxEvent.MOUSE_MOVE&&(t.state=this.view.getState(this.getCellAt(n.x,n.y,null,null,null,function(t){return null==t.shape||t.shape.paintBackground!=mxRectangleShape.prototype.paintBackground||"1"==mxUtils.getValue(t.style,mxConstants.STYLE_POINTER_EVENTS,"1")||null!=t.shape.fill&&t.shape.fill!=mxConstants.NONE})))),t},mxGraph.prototype.getStateForTouchEvent=function(t){var e=mxEvent.getClientX(t),t=mxEvent.getClientY(t),e=mxUtils.convertPoint(this.container,e,t);return this.view.getState(this.getCellAt(e.x,e.y))},mxGraph.prototype.isEventIgnored=function(t,e,n){var i,l=mxEvent.isMouseEvent(e.getEvent()),s=!1;return e.getEvent()==this.lastEvent?s=!0:this.lastEvent=e.getEvent(),null!=this.eventSource&&t!=mxEvent.MOUSE_MOVE?(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.mouseMoveRedirect=null,this.mouseUpRedirect=null,this.eventSource=null):mxClient.IS_GC||null==this.eventSource||e.getSource()==this.eventSource?!mxClient.IS_TOUCH||t!=mxEvent.MOUSE_DOWN||l||mxEvent.isPenEvent(e.getEvent())||(this.eventSource=e.getSource(),i=null,!mxClient.IS_ANDROID&&mxClient.IS_LINUX&&mxClient.IS_GC||(i=e.getEvent().pointerId),this.mouseMoveRedirect=mxUtils.bind(this,function(t){null!=i&&t.pointerId!=i||this.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,this.getStateForTouchEvent(t)))}),this.mouseUpRedirect=mxUtils.bind(this,function(t){this.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,this.getStateForTouchEvent(t))),i=null}),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect)):s=!0,this.isSyntheticEventIgnored(t,e,n)&&(s=!0),!mxEvent.isPopupTrigger(this.lastEvent)&&t!=mxEvent.MOUSE_MOVE&&2==this.lastEvent.detail||(t==mxEvent.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:t!=mxEvent.MOUSE_DOWN||this.isMouseDown?!s&&((!mxClient.IS_FF||t!=mxEvent.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!=l||t==mxEvent.MOUSE_DOWN&&this.isMouseDown||t==mxEvent.MOUSE_UP&&!this.isMouseDown)&&(s=!0):(this.isMouseDown=!0,this.isMouseTrigger=l),s||t!=mxEvent.MOUSE_DOWN||(this.lastMouseX=e.getX(),this.lastMouseY=e.getY()),s)},mxGraph.prototype.isSyntheticEventIgnored=function(t,e,n){var i=!1,e=mxEvent.isMouseEvent(e.getEvent());return this.ignoreMouseEvents&&e&&t!=mxEvent.MOUSE_MOVE?(this.ignoreMouseEvents=t!=mxEvent.MOUSE_UP,i=!0):mxClient.IS_FF&&!e&&t==mxEvent.MOUSE_UP&&(this.ignoreMouseEvents=!0),i},mxGraph.prototype.isEventSourceIgnored=function(t,e){var n=e.getSource(),i=null!=n.nodeName?n.nodeName.toLowerCase():"",e=!mxEvent.isMouseEvent(e.getEvent())||mxEvent.isLeftMouseButton(e.getEvent());return t==mxEvent.MOUSE_DOWN&&e&&("select"==i||"option"==i||"input"==i&&"checkbox"!=n.type&&"radio"!=n.type&&"button"!=n.type&&"submit"!=n.type&&"file"!=n.type)},mxGraph.prototype.getEventState=function(t){return t},mxGraph.prototype.isPointerEventIgnored=function(t,e){var n,i=!1;return!mxClient.IS_ANDROID&&mxClient.IS_LINUX&&mxClient.IS_GC||(n=e.getEvent().pointerId,t==mxEvent.MOUSE_DOWN?null!=this.currentPointerId&&this.currentPointerId!=n?i=!0:null==this.currentPointerId&&(this.currentPointerId=e.getEvent().pointerId):t==mxEvent.MOUSE_MOVE?null!=this.currentPointerId&&this.currentPointerId!=n&&(i=!0):t==mxEvent.MOUSE_UP&&(this.currentPointerId=null)),i},mxGraph.prototype.fireMouseEvent=function(t,e,n){if(this.isEventSourceIgnored(t,e))null!=this.tooltipHandler&&this.tooltipHandler.hide();else if(this.isPointerEventIgnored(t,e))this.tapAndHoldValid=!1;else{if(null==n&&(n=this),e=this.updateMouseEvent(e,t),!this.nativeDblClickEnabled&&!mxEvent.isPopupTrigger(e.getEvent())||this.doubleTapEnabled&&mxClient.IS_TOUCH&&(mxEvent.isTouchEvent(e.getEvent())||mxEvent.isPenEvent(e.getEvent()))){var i=(new Date).getTime();if(t==mxEvent.MOUSE_DOWN)if(null!=this.lastTouchEvent&&this.lastTouchEvent!=e.getEvent()&&i-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-e.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-e.getY())<this.doubleTapTolerance&&this.doubleClickCounter<2){this.doubleClickCounter++;var l,s=!1;if(t==mxEvent.MOUSE_UP?e.getCell()==this.lastTouchCell&&null!=this.lastTouchCell&&(this.lastTouchTime=0,l=this.lastTouchCell,this.lastTouchCell=null,this.dblClick(e.getEvent(),l),s=!0):(this.fireDoubleClick=!0,this.lastTouchTime=0),s)return void mxEvent.consume(e.getEvent())}else null!=this.lastTouchEvent&&this.lastTouchEvent==e.getEvent()||(this.lastTouchCell=e.getCell(),this.lastTouchX=e.getX(),this.lastTouchY=e.getY(),this.lastTouchTime=i,this.lastTouchEvent=e.getEvent(),this.doubleClickCounter=0);else if((this.isMouseDown||t==mxEvent.MOUSE_UP)&&this.fireDoubleClick)return this.fireDoubleClick=!1,l=this.lastTouchCell,this.lastTouchCell=null,this.isMouseDown=!1,void((null!=l||(mxEvent.isTouchEvent(e.getEvent())||mxEvent.isPenEvent(e.getEvent()))&&(mxClient.IS_GC||mxClient.IS_SF))&&Math.abs(this.lastTouchX-e.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-e.getY())<this.doubleTapTolerance?this.dblClick(e.getEvent(),l):mxEvent.consume(e.getEvent()))}if(!this.isEventIgnored(t,e,n)){if(e.state=this.getEventState(e.getState()),this.fireEvent(new mxEventObject(mxEvent.FIRE_MOUSE_EVENT,"eventName",t,"event",e)),mxClient.IS_OP||mxClient.IS_SF||mxClient.IS_GC||mxClient.IS_IE11||mxClient.IS_IE&&mxClient.IS_SVG||e.getEvent().target!=this.container){if(t==mxEvent.MOUSE_MOVE&&this.isMouseDown&&this.autoScroll&&!mxEvent.isMultiTouchEvent(e.getEvent)?this.scrollPointToVisible(e.getGraphX(),e.getGraphY(),this.autoExtend):t==mxEvent.MOUSE_UP&&this.ignoreScrollbars&&this.translateToScrollPosition&&(0!=this.container.scrollLeft||0!=this.container.scrollTop)&&(s=this.view.scale,i=this.view.translate,this.view.setTranslate(i.x-this.container.scrollLeft/s,i.y-this.container.scrollTop/s),this.container.scrollLeft=0,this.container.scrollTop=0),null!=this.mouseListeners){var o=[n,e];e.getEvent().preventDefault||(e.getEvent().returnValue=!0);for(var r=0;r<this.mouseListeners.length;r++){var a=this.mouseListeners[r];t==mxEvent.MOUSE_DOWN?a.mouseDown.apply(a,o):t==mxEvent.MOUSE_MOVE?a.mouseMove.apply(a,o):t==mxEvent.MOUSE_UP&&a.mouseUp.apply(a,o)}}t==mxEvent.MOUSE_UP&&this.click(e)}(mxEvent.isTouchEvent(e.getEvent())||mxEvent.isPenEvent(e.getEvent()))&&t==mxEvent.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress?(this.tapAndHoldInProgress=!0,this.initialTouchX=e.getGraphX(),this.initialTouchY=e.getGraphY(),this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(mxUtils.bind(this,function(){this.tapAndHoldValid&&this.tapAndHold(e),this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1}),this.tapAndHoldDelay),this.tapAndHoldValid=!0):t==mxEvent.MOUSE_UP?(this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1):this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-e.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-e.getGraphY())<this.tolerance),t==mxEvent.MOUSE_DOWN&&this.isEditing()&&!this.cellEditor.isEventSource(e.getEvent())&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(t,e,n)}}},mxGraph.prototype.consumeMouseEvent=function(t,e,n){this.fireEvent(new mxEventObject(mxEvent.CONSUME_MOUSE_EVENT,"eventName",t,"event",e)),t==mxEvent.MOUSE_DOWN&&mxEvent.isTouchEvent(e.getEvent())&&e.consume(!1)},mxGraph.prototype.fireGestureEvent=function(t,e){this.lastTouchTime=0,this.fireEvent(new mxEventObject(mxEvent.GESTURE,"event",t,"cell",e))},mxGraph.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tooltipHandler&&this.tooltipHandler.destroy(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.destroy(),null!=this.panningHandler&&this.panningHandler.destroy(),null!=this.popupMenuHandler&&this.popupMenuHandler.destroy(),null!=this.connectionHandler&&this.connectionHandler.destroy(),null!=this.graphHandler&&this.graphHandler.destroy(),null!=this.cellEditor&&this.cellEditor.destroy(),null!=this.view&&this.view.destroy(),null!=this.model&&null!=this.graphModelChangeListener&&(this.model.removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null),this.container=null)},__mxOutput.mxGraph=void 0!==mxGraph?mxGraph:void 0,mxCellOverlay.prototype=new mxEventSource,mxCellOverlay.prototype.constructor=mxCellOverlay,mxCellOverlay.prototype.image=null,mxCellOverlay.prototype.tooltip=null,mxCellOverlay.prototype.align=mxConstants.ALIGN_RIGHT,mxCellOverlay.prototype.verticalAlign=mxConstants.ALIGN_BOTTOM,mxCellOverlay.prototype.offset=null,mxCellOverlay.prototype.cursor=null,mxCellOverlay.prototype.defaultOverlap=.5,mxCellOverlay.prototype.getBounds=function(t){var e,n,i=t.view.graph.getModel().isEdge(t.cell),l=t.view.scale,s=null,o=this.image.width,r=this.image.height;return i?s=(i=t.absolutePoints).length%2==1?i[Math.floor(i.length/2)]:(n=i[(e=i.length/2)-1],i=i[e],new mxPoint(n.x+(i.x-n.x)/2,n.y+(i.y-n.y)/2)):(s=new mxPoint,this.align==mxConstants.ALIGN_LEFT?s.x=t.x:this.align==mxConstants.ALIGN_CENTER?s.x=t.x+t.width/2:s.x=t.x+t.width,this.verticalAlign==mxConstants.ALIGN_TOP?s.y=t.y:this.verticalAlign==mxConstants.ALIGN_MIDDLE?s.y=t.y+t.height/2:s.y=t.y+t.height),new mxRectangle(Math.round(s.x-(o*this.defaultOverlap-this.offset.x)*l),Math.round(s.y-(r*this.defaultOverlap-this.offset.y)*l),o*l,r*l)},mxCellOverlay.prototype.toString=function(){return this.tooltip},__mxOutput.mxCellOverlay=void 0!==mxCellOverlay?mxCellOverlay:void 0,mxOutline.prototype.source=null,mxOutline.prototype.container=null,mxOutline.prototype.enabled=!0,mxOutline.prototype.suspended=!1,mxOutline.prototype.border=14,mxOutline.prototype.opacity=mxClient.IS_IE11?.9:.7,mxOutline.prototype.init=function(t){this.container=t,this.updateHandler=mxUtils.bind(this,function(t,e){this.update(!0)}),this.source.getModel().addListener(mxEvent.CHANGE,this.updateHandler),this.source.addListener(mxEvent.REFRESH,this.updateHandler);t=this.source.getView();t.addListener(mxEvent.UP,this.updateHandler),t.addListener(mxEvent.DOWN,this.updateHandler),t.addListener(mxEvent.SCALE,this.updateHandler),t.addListener(mxEvent.TRANSLATE,this.updateHandler),t.addListener(mxEvent.SCALE_AND_TRANSLATE,this.updateHandler),this.scrollHandler=mxUtils.bind(this,function(t,e){this.update(!1)}),mxEvent.addListener(this.source.container,"scroll",this.scrollHandler),this.source.addListener(mxEvent.PAN,this.scrollHandler),this.update(!0)},mxOutline.prototype.isEnabled=function(){return this.enabled},mxOutline.prototype.setEnabled=function(t){this.enabled=t},mxOutline.prototype.isSuspended=function(){return this.suspended},mxOutline.prototype.setSuspended=function(t){this.suspended=t,this.update(!0)},mxOutline.prototype.isScrolling=function(){return this.source.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.source.container)},mxOutline.prototype.createSvg=function(){var t=document.createElementNS(mxConstants.NS_SVG,"svg");return t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.width="100%",t.style.height="100%",t.style.display="block",t.style.padding=this.border+"px",t.style.boxSizing="border-box",t.style.overflow="visible",t.style.cursor="default",t.setAttribute("shape-rendering","optimizeSpeed"),t.setAttribute("image-rendering","optimizeSpeed"),t},mxOutline.prototype.addGestureListeners=function(o){var r=null,a=0,h=0,u=1,t=mxUtils.bind(this,function(t){var e,n,i,l,s;this.isEnabled()&&(r=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),e=o.clientWidth-2*this.border,n=o.clientHeight-2*this.border,i=this.getViewBox(),u=Math.max(i.width/e,i.height/n),mxEvent.getSource(t)!=this.viewport&&(this.isScrolling()?(l=e-i.width/u,s=n-i.height/u,e=this.svg.getBoundingClientRect(),this.source.container.scrollLeft=i.x-l*u/2+(r.x-this.border-e.left)*u,this.source.container.scrollTop=i.y-s*u/2+(r.y-this.border-e.top)*u):(n=this.source.view.translate,i=this.viewport.getBoundingClientRect(),l=(mxEvent.getClientX(t)-i.left)*u/this.source.view.scale,s=(mxEvent.getClientY(t)-i.top)*u/this.source.view.scale,this.source.getView().setTranslate(n.x-l,n.y-s),this.source.panGraph(0,0))),mxEvent.addGestureListeners(document,null,d,p),a=this.source.container.scrollLeft,h=this.source.container.scrollTop,mxEvent.consume(t))}),d=mxUtils.bind(this,function(t){this.isEnabled()&&null!=r&&(this.isScrolling()?(this.source.container.scrollLeft=a+(mxEvent.getClientX(t)-r.x)*u,this.source.container.scrollTop=h+(mxEvent.getClientY(t)-r.y)*u):this.source.panGraph((r.x-mxEvent.getClientX(t))*u,(r.y-mxEvent.getClientY(t))*u),mxEvent.consume(t))}),p=mxUtils.bind(this,function(t){var e,n,i;this.isEnabled()&&null!=r&&(this.isScrolling()||(e=(mxEvent.getClientX(t)-r.x)*u/this.source.view.scale,n=(mxEvent.getClientY(t)-r.y)*u/this.source.view.scale,i=this.source.view.translate,this.source.getView().setTranslate(i.x-e,i.y-n),this.source.panGraph(0,0)),mxEvent.removeGestureListeners(document,null,d,p),mxEvent.consume(t),r=null)});mxEvent.addGestureListeners(o,t,d,p)},mxOutline.prototype.getViewBox=function(){return this.source.getGraphBounds()},mxOutline.prototype.updateSvg=function(){null==this.svg&&(this.svg=this.createSvg(),this.addGestureListeners(this.svg),this.container.appendChild(this.svg));var t=this.getViewBox(),t=(this.svg.setAttribute("viewBox",Math.round(t.x)+" "+Math.round(t.y)+" "+Math.round(t.width)+" "+Math.round(t.height)),this.source.background);this.svg.style.backgroundColor=t==mxConstants.NONE?"":t,this.updateDrawPane()},mxOutline.prototype.updateDrawPane=function(){null!=this.drawPane&&this.drawPane.parentNode.removeChild(this.drawPane),this.drawPane=this.source.view.getDrawPane().cloneNode(!0),this.drawPane.style.opacity=this.opacity,this.processSvg(this.drawPane),null!=this.viewport?this.svg.insertBefore(this.drawPane,this.viewport):this.svg.appendChild(this.drawPane)},mxOutline.prototype.processSvg=function(t){var n=mxClient.IS_IE11?Math.max(1,this.source.view.scale):this.source.view.scale;Array.prototype.slice.call(t.getElementsByTagName("*")).forEach(mxUtils.bind(this,function(t){var e;"text"!=t.nodeName&&"foreignObject"!=t.nodeName&&"hidden"!=t.getAttribute("visibility")&&t instanceof SVGElement?(e=parseInt(t.getAttribute("stroke-width")||1),isNaN(e)||t.setAttribute("stroke-width",Math.max(mxClient.IS_IE11?4:1,e/(5*n))),t.setAttribute("vector-effect","non-scaling-stroke"),t.style.cursor=""):t.parentNode.removeChild(t)}))},mxOutline.prototype.updateViewport=function(){var t;null!=this.svg&&(null==this.viewport&&(this.viewport=this.createViewport(),this.svg.appendChild(this.viewport)),t=new mxRectangle((t=this.source.container).scrollLeft,t.scrollTop,t.clientWidth,t.clientHeight),this.isScrolling()||(t.x=-this.source.panDx,t.y=-this.source.panDy),this.viewport.setAttribute("x",t.x),this.viewport.setAttribute("y",t.y),this.viewport.setAttribute("width",t.width),this.viewport.setAttribute("height",t.height))},mxOutline.prototype.createViewport=function(){var t=this.svg.ownerDocument.createElementNS(mxConstants.NS_SVG,"rect");return t.setAttribute("stroke-width",mxClient.IS_IE11?"12":"3"),t.setAttribute("stroke",HoverIcons.prototype.arrowFill),t.setAttribute("fill",HoverIcons.prototype.arrowFill),t.setAttribute("vector-effect","non-scaling-stroke"),t.setAttribute("fill-opacity",.2),t.style.cursor="move",t},mxOutline.prototype.update=function(t){null!=this.source&&null!=this.source.container&&(null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null),this.fullUpdate=this.fullUpdate||t,this.thread=window.setTimeout(mxUtils.bind(this,function(){this.isSuspended()||(this.fullUpdate&&this.updateSvg(),this.updateViewport()),this.fullUpdate=null,this.thread=null}),this.isScrolling()?10:0))},mxOutline.prototype.destroy=function(){null!=this.svg&&(this.svg.parentNode.removeChild(this.svg),this.svg=null),null!=this.source&&(this.source.removeListener(this.scrollHandler),this.source.removeListener(this.updateHandler),this.source.getView().removeListener(this.updateHandler),this.source.getModel().removeListener(this.updateHandler),mxEvent.removeListener(this.source.container,"scroll",this.scrollHandler),this.source=null)},__mxOutput.mxOutline=void 0!==mxOutline?mxOutline:void 0,mxMultiplicity.prototype.type=null,mxMultiplicity.prototype.attr=null,mxMultiplicity.prototype.value=null,mxMultiplicity.prototype.source=null,mxMultiplicity.prototype.min=null,mxMultiplicity.prototype.max=null,mxMultiplicity.prototype.validNeighbors=null,mxMultiplicity.prototype.validNeighborsAllowed=!0,mxMultiplicity.prototype.countError=null,mxMultiplicity.prototype.typeError=null,mxMultiplicity.prototype.check=function(t,e,n,i,l,s){var o="";return(this.source&&this.checkTerminal(t,n,e)||!this.source&&this.checkTerminal(t,i,e))&&(null!=this.countError&&(this.source&&(0==this.max||l>=this.max)||!this.source&&(0==this.max||s>=this.max))&&(o+=this.countError+"\n"),null!=this.validNeighbors)&&null!=this.typeError&&0<this.validNeighbors.length&&(this.checkNeighbors(t,e,n,i)||(o+=this.typeError+"\n")),0<o.length?o:null},mxMultiplicity.prototype.checkNeighbors=function(t,e,n,i){for(var l=t.model.getValue(n),s=t.model.getValue(i),o=!this.validNeighborsAllowed,r=this.validNeighbors,a=0;a<r.length;a++){if(this.source&&this.checkType(t,s,r[a])){o=this.validNeighborsAllowed;break}if(!this.source&&this.checkType(t,l,r[a])){o=this.validNeighborsAllowed;break}}return o},mxMultiplicity.prototype.checkTerminal=function(t,e,n){e=t.model.getValue(e);return this.checkType(t,e,this.type,this.attr,this.value)},mxMultiplicity.prototype.checkType=function(t,e,n,i,l){return null!=e&&(isNaN(e.nodeType)?e==n:mxUtils.isNode(e,n,i,l))},__mxOutput.mxMultiplicity=void 0!==mxMultiplicity?mxMultiplicity:void 0,mxLayoutManager.prototype=new mxEventSource,mxLayoutManager.prototype.constructor=mxLayoutManager,mxLayoutManager.prototype.graph=null,mxLayoutManager.prototype.bubbling=!0,mxLayoutManager.prototype.enabled=!0,mxLayoutManager.prototype.undoHandler=null,mxLayoutManager.prototype.moveHandler=null,mxLayoutManager.prototype.resizeHandler=null,mxLayoutManager.prototype.isEnabled=function(){return this.enabled},mxLayoutManager.prototype.setEnabled=function(t){this.enabled=t},mxLayoutManager.prototype.isBubbling=function(){return this.bubbling},mxLayoutManager.prototype.setBubbling=function(t){this.bubbling=t},mxLayoutManager.prototype.getGraph=function(){return this.graph},mxLayoutManager.prototype.setGraph=function(t){null!=this.graph&&(this.graph.getModel().removeListener(this.undoHandler),this.graph.removeListener(this.moveHandler),this.graph.removeListener(this.resizeHandler)),this.graph=t,null!=this.graph&&(this.graph.getModel().addListener(mxEvent.BEFORE_UNDO,this.undoHandler),this.graph.addListener(mxEvent.MOVE_CELLS,this.moveHandler),this.graph.addListener(mxEvent.RESIZE_CELLS,this.resizeHandler))},mxLayoutManager.prototype.hasLayout=function(t){return null!=this.getLayout(t,mxEvent.LAYOUT_CELLS)},mxLayoutManager.prototype.getLayout=function(t,e){return null},mxLayoutManager.prototype.beforeUndo=function(t){this.executeLayoutForCells(this.getCellsForChanges(t.changes))},mxLayoutManager.prototype.cellsMoved=function(t,e){if(null!=t&&null!=e)for(var n=mxUtils.convertPoint(this.getGraph().container,mxEvent.getClientX(e),mxEvent.getClientY(e)),i=this.getGraph().getModel(),l=0;l<t.length;l++){var s=this.getLayout(i.getParent(t[l]),mxEvent.MOVE_CELLS);null!=s&&s.moveCell(t[l],n.x,n.y)}},mxLayoutManager.prototype.cellsResized=function(t,e,n){if(null!=t&&null!=e)for(var i=this.getGraph().getModel(),l=0;l<t.length;l++){var s=this.getLayout(i.getParent(t[l]),mxEvent.RESIZE_CELLS);null!=s&&s.resizeCell(t[l],e[l],n[l])}},mxLayoutManager.prototype.getCellsForChanges=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(i instanceof mxRootChange)return[];e=e.concat(this.getCellsForChange(i))}return e},mxLayoutManager.prototype.getCellsForChange=function(t){return t instanceof mxChildChange?this.addCellsWithLayout(t.child,this.addCellsWithLayout(t.previous)):t instanceof mxValueChange||t instanceof mxTerminalChange||t instanceof mxGeometryChange||t instanceof mxVisibleChange||t instanceof mxStyleChange?this.addCellsWithLayout(t.cell):[]},mxLayoutManager.prototype.addCellsWithLayout=function(t,e){return this.addDescendantsWithLayout(t,this.addAncestorsWithLayout(t,e))},mxLayoutManager.prototype.addAncestorsWithLayout=function(t,e){var n;return e=null!=e?e:[],null!=t&&(this.hasLayout(t)&&e.push(t),this.isBubbling())&&(n=this.getGraph().getModel(),this.addAncestorsWithLayout(n.getParent(t),e)),e},mxLayoutManager.prototype.addDescendantsWithLayout=function(t,e){if(e=null!=e?e:[],null!=t&&this.hasLayout(t))for(var n=this.getGraph().getModel(),i=0;i<n.getChildCount(t);i++){var l=n.getChildAt(t,i);this.hasLayout(l)&&(e.push(l),this.addDescendantsWithLayout(l,e))}return e},mxLayoutManager.prototype.executeLayoutForCells=function(t){var e=this.getGraph().getModel();e.beginUpdate();try{var n=mxUtils.sortCells(t,!1);this.layoutCells(n,!0),this.layoutCells(n.reverse(),!1)}finally{e.endUpdate()}},mxLayoutManager.prototype.layoutCells=function(t,e){if(0<t.length){var n=this.getGraph().getModel();n.beginUpdate();try{for(var i=null,l=0;l<t.length;l++)t[l]!=n.getRoot()&&t[l]!=i&&(this.executeLayout(t[l],e),i=t[l]);this.fireEvent(new mxEventObject(mxEvent.LAYOUT_CELLS,"cells",t))}finally{n.endUpdate()}}},mxLayoutManager.prototype.executeLayout=function(t,e){e=this.getLayout(t,e?mxEvent.BEGIN_UPDATE:mxEvent.END_UPDATE);null!=e&&e.execute(t)},mxLayoutManager.prototype.destroy=function(){this.setGraph(null)},__mxOutput.mxLayoutManager=void 0!==mxLayoutManager?mxLayoutManager:void 0,mxSwimlaneManager.prototype=new mxEventSource,mxSwimlaneManager.prototype.constructor=mxSwimlaneManager,mxSwimlaneManager.prototype.graph=null,mxSwimlaneManager.prototype.enabled=!0,mxSwimlaneManager.prototype.horizontal=!0,mxSwimlaneManager.prototype.addEnabled=!0,mxSwimlaneManager.prototype.resizeEnabled=!0,mxSwimlaneManager.prototype.addHandler=null,mxSwimlaneManager.prototype.resizeHandler=null,mxSwimlaneManager.prototype.isEnabled=function(){return this.enabled},mxSwimlaneManager.prototype.setEnabled=function(t){this.enabled=t},mxSwimlaneManager.prototype.isHorizontal=function(){return this.horizontal},mxSwimlaneManager.prototype.setHorizontal=function(t){this.horizontal=t},mxSwimlaneManager.prototype.isAddEnabled=function(){return this.addEnabled},mxSwimlaneManager.prototype.setAddEnabled=function(t){this.addEnabled=t},mxSwimlaneManager.prototype.isResizeEnabled=function(){return this.resizeEnabled},mxSwimlaneManager.prototype.setResizeEnabled=function(t){this.resizeEnabled=t},mxSwimlaneManager.prototype.getGraph=function(){return this.graph},mxSwimlaneManager.prototype.setGraph=function(t){null!=this.graph&&(this.graph.removeListener(this.addHandler),this.graph.removeListener(this.resizeHandler)),this.graph=t,null!=this.graph&&(this.graph.addListener(mxEvent.ADD_CELLS,this.addHandler),this.graph.addListener(mxEvent.CELLS_RESIZED,this.resizeHandler))},mxSwimlaneManager.prototype.isSwimlaneIgnored=function(t){return!this.getGraph().isSwimlane(t)},mxSwimlaneManager.prototype.isCellHorizontal=function(t){return this.graph.isSwimlane(t)?(t=this.graph.getCellStyle(t),1==mxUtils.getValue(t,mxConstants.STYLE_HORIZONTAL,1)):!this.isHorizontal()},mxSwimlaneManager.prototype.cellsAdded=function(t){if(null!=t){var e=this.getGraph().getModel();e.beginUpdate();try{for(var n=0;n<t.length;n++)this.isSwimlaneIgnored(t[n])||this.swimlaneAdded(t[n])}finally{e.endUpdate()}}},mxSwimlaneManager.prototype.swimlaneAdded=function(t){for(var e,n=this.getGraph().getModel(),i=n.getParent(t),l=n.getChildCount(i),s=null,o=0;o<l;o++){var r=n.getChildAt(i,o);if(r!=t&&!this.isSwimlaneIgnored(r)&&null!=(s=n.getGeometry(r)))break}null!=s&&(e=null!=i?this.isCellHorizontal(i):this.horizontal,this.resizeSwimlane(t,s.width,s.height,e))},mxSwimlaneManager.prototype.cellsResized=function(t){if(null!=t){var e=this.getGraph().getModel();e.beginUpdate();try{for(var n=0;n<t.length;n++)if(!this.isSwimlaneIgnored(t[n])){var i=e.getGeometry(t[n]);if(null!=i){for(var l=new mxRectangle(0,0,i.width,i.height),s=o=t[n];null!=s;){var o=s,s=e.getParent(s),r=this.graph.isSwimlane(s)?this.graph.getStartSize(s):new mxRectangle;l.width+=r.width,l.height+=r.height}var a=null!=s?this.isCellHorizontal(s):this.horizontal;this.resizeSwimlane(o,l.width,l.height,a)}}}finally{e.endUpdate()}}},mxSwimlaneManager.prototype.resizeSwimlane=function(t,e,n,i){var l=this.getGraph().getModel();l.beginUpdate();try{for(var s,o=this.isCellHorizontal(t),r=(this.isSwimlaneIgnored(t)||null!=(s=l.getGeometry(t))&&(i&&s.height!=n||!i&&s.width!=e)&&(s=s.clone(),i?s.height=n:s.width=e,l.setGeometry(t,s)),this.graph.isSwimlane(t)?this.graph.getStartSize(t):new mxRectangle),a=(e-=r.width,n-=r.height,l.getChildCount(t)),h=0;h<a;h++){var u=l.getChildAt(t,h);this.resizeSwimlane(u,e,n,o)}}finally{l.endUpdate()}},mxSwimlaneManager.prototype.destroy=function(){this.setGraph(null)},__mxOutput.mxSwimlaneManager=void 0!==mxSwimlaneManager?mxSwimlaneManager:void 0,mxTemporaryCellStates.prototype.view=null,mxTemporaryCellStates.prototype.oldStates=null,mxTemporaryCellStates.prototype.oldBounds=null,mxTemporaryCellStates.prototype.oldScale=null,mxTemporaryCellStates.prototype.destroy=function(){this.view.setScale(this.oldScale),this.view.setStates(this.oldStates),this.view.setGraphBounds(this.oldBounds),this.view.validateCellState=this.oldValidateCellState,this.view.graph.cellRenderer.doRedrawShape=this.oldDoRedrawShape},__mxOutput.mxTemporaryCellStates=void 0!==mxTemporaryCellStates?mxTemporaryCellStates:void 0,mxCellStatePreview.prototype.graph=null,mxCellStatePreview.prototype.deltas=null,mxCellStatePreview.prototype.count=0,mxCellStatePreview.prototype.isEmpty=function(){return 0==this.count},mxCellStatePreview.prototype.moveState=function(t,e,n,i,l){i=null==i||i,l=null==l||l;var s=this.deltas.get(t.cell);return null==s?(s={point:new mxPoint(e,n),state:t},this.deltas.put(t.cell,s),this.count++):i?(s.point.x+=e,s.point.y+=n):(s.point.x=e,s.point.y=n),l&&this.addEdges(t),s.point},mxCellStatePreview.prototype.show=function(n){this.deltas.visit(mxUtils.bind(this,function(t,e){this.translateState(e.state,e.point.x,e.point.y)})),this.deltas.visit(mxUtils.bind(this,function(t,e){this.revalidateState(e.state,e.point.x,e.point.y,n)}))},mxCellStatePreview.prototype.translateState=function(t,e,n){if(null!=t)for(var i,l=this.graph.getModel(),s=(l.isVertex(t.cell)&&(t.view.updateCellState(t),i=l.getGeometry(t.cell),0==e&&0==n||null==i||i.relative&&null==this.deltas.get(t.cell)||(t.x+=e,t.y+=n)),l.getChildCount(t.cell)),o=0;o<s;o++)this.translateState(t.view.getState(l.getChildAt(t.cell,o)),e,n)},mxCellStatePreview.prototype.revalidateState=function(t,e,n,i){if(null!=t)for(var l=this.graph.getModel(),s=(l.isEdge(t.cell)&&t.view.updateCellState(t),this.graph.getCellGeometry(t.cell)),o=t.view.getState(l.getParent(t.cell)),r=(0==e&&0==n||null==s||!s.relative||!l.isVertex(t.cell)||null!=o&&!l.isVertex(o.cell)&&null==this.deltas.get(t.cell)||(t.x+=e,t.y+=n),this.graph.cellRenderer.redraw(t),null!=i&&i(t),l.getChildCount(t.cell)),a=0;a<r;a++)this.revalidateState(this.graph.view.getState(l.getChildAt(t.cell,a)),e,n,i)},mxCellStatePreview.prototype.addEdges=function(t){for(var e=this.graph.getModel(),n=e.getEdgeCount(t.cell),i=0;i<n;i++){var l=t.view.getState(e.getEdgeAt(t.cell,i));null!=l&&this.moveState(l,0,0)}},__mxOutput.mxCellStatePreview=void 0!==mxCellStatePreview?mxCellStatePreview:void 0,mxConnectionConstraint.prototype.point=null,mxConnectionConstraint.prototype.perimeter=null,mxConnectionConstraint.prototype.name=null,mxConnectionConstraint.prototype.dx=null,mxConnectionConstraint.prototype.dy=null,__mxOutput.mxConnectionConstraint=void 0!==mxConnectionConstraint?mxConnectionConstraint:void 0,mxGraphHandler.prototype.graph=null,mxGraphHandler.prototype.maxCells=mxClient.IS_IE?20:50,mxGraphHandler.prototype.enabled=!0,mxGraphHandler.prototype.highlightEnabled=!0,mxGraphHandler.prototype.cloneEnabled=!0,mxGraphHandler.prototype.moveEnabled=!0,mxGraphHandler.prototype.guidesEnabled=!1,mxGraphHandler.prototype.handlesVisible=!0,mxGraphHandler.prototype.guide=null,mxGraphHandler.prototype.currentDx=null,mxGraphHandler.prototype.currentDy=null,mxGraphHandler.prototype.updateCursor=!0,mxGraphHandler.prototype.selectEnabled=!0,mxGraphHandler.prototype.removeCellsFromParent=!0,mxGraphHandler.prototype.removeEmptyParents=!1,mxGraphHandler.prototype.connectOnDrop=!1,mxGraphHandler.prototype.scrollOnMove=!0,mxGraphHandler.prototype.minimumSize=6,mxGraphHandler.prototype.previewColor="black",mxGraphHandler.prototype.htmlPreview=!1,mxGraphHandler.prototype.shape=null,mxGraphHandler.prototype.scaleGrid=!1,mxGraphHandler.prototype.rotationEnabled=!0,mxGraphHandler.prototype.maxLivePreview=0,mxGraphHandler.prototype.allowLivePreview=mxClient.IS_SVG,mxGraphHandler.prototype.isEnabled=function(){return this.enabled},mxGraphHandler.prototype.setEnabled=function(t){this.enabled=t},mxGraphHandler.prototype.isCloneEnabled=function(){return this.cloneEnabled},mxGraphHandler.prototype.setCloneEnabled=function(t){this.cloneEnabled=t},mxGraphHandler.prototype.isMoveEnabled=function(){return this.moveEnabled},mxGraphHandler.prototype.setMoveEnabled=function(t){this.moveEnabled=t},mxGraphHandler.prototype.isSelectEnabled=function(){return this.selectEnabled},mxGraphHandler.prototype.setSelectEnabled=function(t){this.selectEnabled=t},mxGraphHandler.prototype.isRemoveCellsFromParent=function(){return this.removeCellsFromParent},mxGraphHandler.prototype.setRemoveCellsFromParent=function(t){this.removeCellsFromParent=t},mxGraphHandler.prototype.isPropagateSelectionCell=function(t,e,n){var i=this.graph.model.getParent(t);return e?(e=this.graph.model.isEdge(t)?null:this.graph.getCellGeometry(t),!this.graph.isSiblingSelected(t)&&(null!=e&&e.relative||!this.graph.isSwimlane(i))):(!this.graph.isToggleEvent(n.getEvent())||!this.graph.isSiblingSelected(t)&&!this.graph.isCellSelected(t)&&!this.graph.isSwimlane(i)||this.graph.isCellSelected(i))&&(this.graph.isToggleEvent(n.getEvent())||!this.graph.isCellSelected(i))},mxGraphHandler.prototype.getInitialCellForEvent=function(t){var e=t.getState();if(!(this.graph.isToggleEvent(t.getEvent())&&mxEvent.isAltDown(t.getEvent())||null==e||this.graph.isCellSelected(e.cell)))for(var n=this.graph.model,i=this.graph.view.getState(n.getParent(e.cell));null!=i&&!this.graph.isCellSelected(i.cell)&&(n.isVertex(i.cell)||n.isEdge(i.cell))&&this.isPropagateSelectionCell(e.cell,!0,t)&&i.cell!=this.graph.getCurrentRoot();)e=i,i=this.graph.view.getState(this.graph.getModel().getParent(e.cell));return null!=e?e.cell:null},mxGraphHandler.prototype.isDelayedSelection=function(t,e){if(!this.graph.isToggleEvent(e.getEvent())||!mxEvent.isAltDown(e.getEvent()))for(;null!=t;){if(this.graph.selectionCellsHandler.isHandled(t))return this.graph.cellEditor.getEditingCell()!=t;t=this.graph.model.getParent(t)}return this.graph.isToggleEvent(e.getEvent())},mxGraphHandler.prototype.selectDelayed=function(t){var e;this.graph.popupMenuHandler.isPopupTrigger(t)||(null==(e=t.getCell())&&(e=this.cell),this.selectCellForEvent(e,t))},mxGraphHandler.prototype.selectCellForEvent=function(t,e){var n=this.graph.view.getState(t);if(null!=n){if(!(e.isSource(n.control)||this.graph.isToggleEvent(e.getEvent())&&mxEvent.isAltDown(e.getEvent())))for(var i=this.graph.getModel(),l=i.getParent(t);null!=this.graph.view.getState(l)&&(i.isVertex(l)||i.isEdge(l)&&!this.graph.isToggleEvent(e.getEvent()))&&this.isPropagateSelectionCell(t,!1,e)&&l!=this.graph.getCurrentRoot();)t=l,l=i.getParent(t);this.graph.selectCellForEvent(t,e.getEvent())}return t},mxGraphHandler.prototype.consumeMouseEvent=function(t,e){e.consume()},mxGraphHandler.prototype.mouseDown=function(t,e){this.mouseDownX=e.getX(),this.mouseDownY=e.getY();var n,i=e.getEvent(),l=mxEvent.isAltDown(i)&&mxEvent.isShiftDown(i)&&!this.graph.isSelectionEmpty();e.isConsumed()||!this.isEnabled()||!this.graph.isEnabled()||null==e.getState()&&!l||mxEvent.isMultiTouchEvent(i)||(n=this.getInitialCellForEvent(e),this.delayedSelection=this.isDelayedSelection(n,e),(this.cell=null)==n&&l&&(n=this.graph.getSelectionCell()),l=this.graph.getSelectionCount(),this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(n,i),mxEvent.isTouchEvent(e.getEvent())&&this.graph.isCellSelected(n)&&0<l&&(this.blockDelayedSelection=!0,this.delayedSelection=!0),this.isMoveEnabled()&&(this.delayedSelection?this.cell=n:this.start(n,e.getX(),e.getY()),this.cellWasClicked=!0,this.graph.isCellLocked(n)||this.consumeMouseEvent(mxEvent.MOUSE_DOWN,e)))},mxGraphHandler.prototype.getGuideStates=function(){var t=this.graph.getDefaultParent(),e=this.graph.getModel(),n=mxUtils.bind(this,function(t){return null!=this.graph.view.getState(t)&&e.isVertex(t)&&null!=e.getGeometry(t)&&!e.getGeometry(t).relative});return this.graph.view.getCellStates(e.filterDescendants(n,t))},mxGraphHandler.prototype.getCells=function(t,e){if(null==e&&!this.delayedSelection&&this.graph.isCellMovable(t))return[this.graph.getCompositeParent(t)];e=null!=e?e:this.graph.getSelectionCells();for(var n=new mxDictionary,i=[],l=0;l<e.length;l++){var s=this.graph.getCompositeParent(e[l]);null==n.get(s)&&(n.put(s,!0),i.push(s))}for(var o=[],l=0;l<i.length;l++){for(var r=this.graph.model.getParent(i[l]);null==n.get(r)&&null!=r;)r=this.graph.model.getParent(r);null==r&&o.push(i[l])}return this.graph.getMovableCells(o)},mxGraphHandler.prototype.getPreviewBounds=function(t){var e,t=this.getBoundingBox(t);return null!=t&&(t.width=Math.max(0,t.width-1),t.height=Math.max(0,t.height-1),t.width<this.minimumSize?(e=this.minimumSize-t.width,t.x-=e/2,t.width=this.minimumSize):(t.x=Math.round(t.x),t.width=Math.ceil(t.width)),this.graph.view.translate,this.graph.view.scale,t.height<this.minimumSize?(e=this.minimumSize-t.height,t.y-=e/2,t.height=this.minimumSize):(t.y=Math.round(t.y),t.height=Math.ceil(t.height))),t},mxGraphHandler.prototype.getBoundingBox=function(t){var e=null;if(null!=t&&0<t.length)for(var n,i,l=this.graph.getModel(),s=0;s<t.length;s++)(l.isVertex(t[s])||l.isEdge(t[s]))&&null!=(n=this.graph.view.getState(t[s]))&&(i=n,l.isVertex(t[s])&&null!=n.shape&&null!=n.shape.boundingBox&&(i=n.shape.boundingBox),null==e?e=mxRectangle.fromRectangle(i):e.add(i));return e},mxGraphHandler.prototype.createPreviewShape=function(t){t=new mxRectangleShape(t,null,this.previewColor);return t.isDashed=!0,this.htmlPreview?(t.dialect=mxConstants.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),t.pointerEvents=!1,mxClient.IS_IOS&&(t.getSvgScreenOffset=function(){return 0})),t},mxGraphHandler.prototype.start=function(t,e,n,i){var l=this.graph.model,s=l.getGeometry(t);if(null==this.first&&this.graph.isCellMovable(t)&&(!l.isEdge(t)||1<this.graph.getSelectionCount()||null!=s.points&&0<s.points.length||null==l.getTerminal(t,!0)||null==l.getTerminal(t,!1)||this.graph.allowDanglingEdges)){this.cell=t,this.first=mxUtils.convertPoint(this.graph.container,e,n),this.cells=null!=i?i:this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.allCells=new mxDictionary,this.cloning=!1;for(var o=this.cellCount=0;o<this.cells.length;o++)this.cellCount+=this.addStates(this.cells[o],this.allCells);if(this.guidesEnabled){this.guide=new mxGuide(this.graph,this.getGuideStates());for(var r=this.graph.model.getParent(t),a=this.graph.model.getChildCount(r)<2,h=new mxDictionary,u=this.graph.getOpposites(this.graph.getEdges(this.cell),this.cell),o=0;o<u.length;o++){var d=this.graph.view.getState(u[o]);null==d||h.get(d)||h.put(d,!0)}this.guide.isStateIgnored=mxUtils.bind(this,function(t){var e=this.graph.model.getParent(t.cell);return null!=t.cell&&(!this.cloning&&this.isCellMoving(t.cell)||t.cell!=(this.target||r)&&!a&&!h.get(t)&&(null==this.target||2<=this.graph.model.getChildCount(this.target))&&e!=(this.target||r))})}}},mxGraphHandler.prototype.addStates=function(t,e){var n=this.graph.view.getState(t),i=0;if(null!=n&&null==e.get(t)){e.put(t,n),i++;for(var l=this.graph.model.getChildCount(t),s=0;s<l;s++)i+=this.addStates(this.graph.model.getChildAt(t,s),e)}return i},mxGraphHandler.prototype.isCellMoving=function(t){return null!=this.allCells.get(t)},mxGraphHandler.prototype.useGuidesForEvent=function(t){return null==this.guide||this.guide.isEnabledForEvent(t.getEvent())&&!this.isConstrainedEvent(t)},mxGraphHandler.prototype.snap=function(t){var e=this.scaleGrid?this.graph.view.scale:1;return t.x=this.graph.snap(t.x/e)*e,t.y=this.graph.snap(t.y/e)*e,t},mxGraphHandler.prototype.getDelta=function(t){t=mxUtils.convertPoint(this.graph.container,t.getX(),t.getY());return new mxPoint(t.x-this.first.x-this.graph.panDx,t.y-this.first.y-this.graph.panDy)},mxGraphHandler.prototype.updateHint=function(t){},mxGraphHandler.prototype.removeHint=function(){},mxGraphHandler.prototype.roundLength=function(t){return Math.round(100*t)/100},mxGraphHandler.prototype.isValidDropTarget=function(t,e){for(var n=0;n<this.cells.length;n++)if(this.graph.model.getParent(this.cells[n])!=t)return!0;return!1};mxGraphHandler.prototype.checkPreview=function(){this.livePreviewActive&&this.cloning?(this.resetLivePreview(),this.livePreviewActive=!1):this.maxLivePreview>=this.cellCount&&!this.livePreviewActive&&this.allowLivePreview?this.cloning&&this.livePreviewActive||(this.livePreviewActive=!0,this.livePreviewUsed=!0):this.livePreviewUsed||null!=this.shape||(this.shape=this.createPreviewShape(this.bounds))},mxGraphHandler.prototype.mouseMove=function(t,e){var n,i,l,s,o,r,a=this.graph,h=a.tolerance,u=(null==this.first&&this.delayedSelection&&null!=this.cell&&null!=this.mouseDownX&&null!=this.mouseDownY&&(Math.abs(this.mouseDownX-e.getX())>h||Math.abs(this.mouseDownY-e.getY())>h)&&(this.delayedSelection=!1,this.cellWasClicked=!0,this.graph.isCellSelected(this.cell)||mxEvent.isAltDown(e.getEvent())||(this.graph.isToggleEvent(e.getEvent())?a.addSelectionCell(this.cell):this.graph.isAncestorSelected(this.cell)||a.setSelectionCell(this.cell)),u=a.getSelectionCells(),this.graph.isToggleEvent(e.getEvent())&&mxEvent.isAltDown(e.getEvent())&&!a.isSelectionEmpty()||(u=u.concat(this.cell)),this.start(this.cell,this.mouseDownX,this.mouseDownY,this.getCells(null,u))),null!=this.first?this.getDelta(e):null);e.isConsumed()||!a.isMouseDown||null==this.cell||null==u||null==this.bounds||this.suspended?!this.isMoveEnabled()&&!this.isCloneEnabled()||!this.updateCursor||e.isConsumed()||null==e.getState()&&null==e.sourceState||a.isMouseDown||null!=(n=null==(n=a.getCursorForMouseEvent(e))&&a.isEnabled()&&a.isCellMovable(e.getCell())?a.getModel().isEdge(e.getCell())?mxConstants.CURSOR_MOVABLE_EDGE:mxConstants.CURSOR_MOVABLE_VERTEX:n)&&null!=e.sourceState&&e.sourceState.setCursor(n):mxEvent.isMultiTouchEvent(e.getEvent())?this.reset():((null!=this.shape||this.livePreviewActive||this.cloning||Math.abs(u.x)>h||Math.abs(u.y)>h)&&(null==this.highlight&&(this.highlight=new mxCellHighlight(this.graph,mxConstants.DROP_TARGET_COLOR,3)),n=a.isCloneEvent(e.getEvent())&&a.isCellsCloneable()&&this.isCloneEnabled(),h=a.isGridEnabledEvent(e.getEvent()),i=null!=(i=e.getCell())&&mxUtils.indexOf(this.cells,i)<0?i:a.getCellAt(e.getGraphX(),e.getGraphY(),null,null,null,mxUtils.bind(this,function(t,e,n){return 0<=mxUtils.indexOf(this.cells,t.cell)})),l=!0,o=null,this.cloning=n,a.isDropEnabled()&&this.highlightEnabled&&(o=a.getDropTarget(this.cells,e.getEvent(),i,n)),s=!1,null!=(r=a.getView().getState(o))&&(n||this.isValidDropTarget(o,e))?(this.target!=o&&(this.target=o,this.setHighlightColor(mxConstants.DROP_TARGET_COLOR)),s=!0):(this.target=null,this.connectOnDrop&&null!=i&&1==this.cells.length&&a.getModel().isVertex(i)&&a.isCellConnectable(i)&&null!=(r=a.getView().getState(i))&&(o=null==a.getEdgeValidationError(null,this.cell,i)?mxConstants.VALID_COLOR:mxConstants.INVALID_CONNECT_TARGET_COLOR,this.setHighlightColor(o),s=!0)),null!=r&&s?this.highlight.highlight(r):this.highlight.hide(),null!=this.guide&&this.useGuidesForEvent(e)?(u=this.guide.move(this.bounds,u,h,n),l=!1):u=a.snapDelta(u,this.bounds,!h,!1,!1),null!=this.guide&&l&&this.guide.hide(),this.isConstrainedEvent(e)&&(Math.abs(u.x)>Math.abs(u.y)?u.y=0:u.x=0),this.checkPreview(),this.currentDx==u.x&&this.currentDy==u.y||(this.currentDx=u.x,this.currentDy=u.y,this.updatePreview())),this.updateHint(e),this.consumeMouseEvent(mxEvent.MOUSE_MOVE,e),mxEvent.consume(e.getEvent()))},mxGraphHandler.prototype.isConstrainedEvent=function(t){return(null==this.target||this.graph.isCloneEvent(t.getEvent()))&&this.graph.isConstrainedEvent(t.getEvent())},mxGraphHandler.prototype.updatePreview=function(t){this.livePreviewUsed&&!t?null!=this.cells&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1),this.updateLivePreview(this.currentDx,this.currentDy)):this.updatePreviewShape()},mxGraphHandler.prototype.updatePreviewShape=function(){null!=this.shape&&null!=this.pBounds&&(this.shape.bounds=new mxRectangle(Math.round(this.pBounds.x+this.currentDx),Math.round(this.pBounds.y+this.currentDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())},mxGraphHandler.prototype.updateLivePreview=function(i,l){if(!this.suspended){var s=[];if(null!=this.allCells&&this.allCells.visit(mxUtils.bind(this,function(t,e){var n=this.graph.view.getState(e.cell);n!=e&&(e.destroy(),null!=n?this.allCells.put(e.cell,n):this.allCells.remove(e.cell),e=n),null!=e&&(n=e.clone(),s.push([e,n]),null!=e.shape&&(null==e.shape.originalPointerEvents&&(e.shape.originalPointerEvents=e.shape.pointerEvents),e.shape.pointerEvents=!1,null!=e.text)&&(null==e.text.originalPointerEvents&&(e.text.originalPointerEvents=e.text.pointerEvents),e.text.pointerEvents=!1),this.graph.model.isVertex(e.cell))&&(this.cloning&&!this.graph.isCellCloneable(e.cell)||(e.x+=i,e.y+=l),this.cloning?null!=e.text&&(e.text.updateBoundingBox(),null!=e.text.boundingBox&&(e.text.boundingBox.x+=i,e.text.boundingBox.y+=l),null!=e.text.unrotatedBoundingBox)&&(e.text.unrotatedBoundingBox.x+=i,e.text.unrotatedBoundingBox.y+=l):(e.view.graph.cellRenderer.redraw(e,!0),e.view.invalidate(e.cell),e.invalid=!1,null!=e.control&&null!=e.control.node&&(e.control.node.style.visibility="hidden")))})),0==s.length)this.reset();else{for(var t=this.graph.view.scale,e=0;e<s.length;e++){var n=s[e][0];if(this.graph.model.isEdge(n.cell)&&(!this.cloning||this.graph.isCellCloneable(n.cell))){var o=this.graph.getCellGeometry(n.cell),r=[];if(null!=o&&null!=o.points)for(var a=0;a<o.points.length;a++)null!=o.points[a]&&r.push(new mxPoint(o.points[a].x+i/t,o.points[a].y+l/t));var h,u=n.visibleSourceState,d=n.visibleTargetState,p=s[e][1].absolutePoints;null!=u&&this.isCellMoving(u.cell)?n.view.updateFixedTerminalPoint(n,u,!0,this.graph.getConnectionConstraint(n,u,!0)):(h=p[0],n.setAbsoluteTerminalPoint(new mxPoint(h.x+i,h.y+l),!0),u=null),null!=d&&this.isCellMoving(d.cell)?n.view.updateFixedTerminalPoint(n,d,!1,this.graph.getConnectionConstraint(n,d,!1)):(h=p[p.length-1],n.setAbsoluteTerminalPoint(new mxPoint(h.x+i,h.y+l),!1),d=null),n.view.updatePoints(n,r,u,d),n.view.updateFloatingTerminalPoints(n,u,d),n.view.updateEdgeLabelOffset(n),n.invalid=!1,this.cloning||n.view.graph.cellRenderer.redraw(n,!0)}}this.graph.view.validate(),this.redrawHandles(s),this.resetPreviewStates(s)}}},mxGraphHandler.prototype.redrawHandles=function(t){for(var e=0;e<t.length;e++){var n=this.graph.selectionCellsHandler.getHandler(t[e][0].cell);null!=n&&n.redraw(!0)}},mxGraphHandler.prototype.resetPreviewStates=function(t){for(var e=0;e<t.length;e++)t[e][0].setState(t[e][1])},mxGraphHandler.prototype.suspend=function(){this.suspended||(this.livePreviewUsed&&this.updateLivePreview(0,0),null!=this.shape&&(this.shape.node.style.visibility="hidden"),null!=this.guide&&this.guide.setVisible(!1),this.suspended=!0)},mxGraphHandler.prototype.resume=function(){this.suspended&&(this.suspended=null,this.livePreviewUsed&&(this.livePreviewActive=!0),null!=this.shape&&(this.shape.node.style.visibility="visible"),null!=this.guide)&&this.guide.setVisible(!0)},mxGraphHandler.prototype.resetLivePreview=function(){null!=this.allCells&&(this.allCells.visit(mxUtils.bind(this,function(t,e){null!=e.shape&&null!=e.shape.originalPointerEvents&&(e.shape.pointerEvents=e.shape.originalPointerEvents,e.shape.originalPointerEvents=null,(e.shape.bounds=null)!=e.text)&&(e.text.pointerEvents=e.text.originalPointerEvents,e.text.originalPointerEvents=null),null!=e.control&&null!=e.control.node&&"hidden"==e.control.node.style.visibility&&(e.control.node.style.visibility=""),this.cloning||null!=e.text&&e.text.updateBoundingBox(),e.view.invalidate(e.cell)})),this.graph.view.validate())},mxGraphHandler.prototype.setHandlesVisibleForCells=function(t,e,n){if(n||this.handlesVisible!=e){this.handlesVisible=e;for(var i=0;i<t.length;i++){var l=this.graph.selectionCellsHandler.getHandler(t[i]);null!=l&&(l.setHandlesVisible(e),e)&&l.redraw()}}},mxGraphHandler.prototype.setHighlightColor=function(t){null!=this.highlight&&this.highlight.setHighlightColor(t)},mxGraphHandler.prototype.mouseUp=function(t,e){var n,i,l,s;e.isConsumed()||(this.livePreviewUsed&&this.resetLivePreview(),null!=this.cell&&null!=this.first&&null!=this.currentDx&&null!=this.currentDy&&(null!=this.shape||this.livePreviewUsed||this.cloning)?(n=this.graph,l=e.getCell(),this.connectOnDrop&&null==this.target&&null!=l&&n.getModel().isVertex(l)&&n.isCellConnectable(l)&&n.isEdgeValid(null,this.cell,l)?n.connectionHandler.connect(this.cell,l,e.getEvent()):(l=n.getView().scale,i=this.roundLength(this.currentDx/l),l=this.roundLength(this.currentDy/l),s=this.target,n.isSplitEnabled()&&n.isSplitTarget(s,this.cells,e.getEvent())?n.splitEdge(s,this.cells,null,i,l,e.getGraphX(),e.getGraphY()):this.moveCells(this.cells,i,l,this.cloning,this.target,e.getEvent()))):this.isSelectEnabled()&&this.delayedSelection&&!this.blockDelayedSelection&&null!=this.cell&&this.selectDelayed(e)),this.cellWasClicked&&this.consumeMouseEvent(mxEvent.MOUSE_UP,e),this.reset()},mxGraphHandler.prototype.reset=function(){this.livePreviewUsed&&(this.resetLivePreview(),this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!0)),this.destroyShapes(),this.removeHint(),this.blockDelayedSelection=!1,this.delayedSelection=!1,this.livePreviewActive=null,this.livePreviewUsed=null,this.cellWasClicked=!1,this.suspended=null,this.currentDx=null,this.currentDy=null,this.cellCount=null,this.cloning=!1,this.allCells=null,this.pBounds=null,this.guides=null,this.target=null,this.first=null,this.cells=null,this.cell=null},mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(t,e,n){if(this.graph.getModel().isVertex(t)){var i,l,s,t=this.graph.getView().getState(t);if(null!=t)return n=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(n),mxEvent.getClientY(n)),0!=(l=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0))&&(i=Math.cos(-l),l=Math.sin(-l),s=new mxPoint(t.getCenterX(),t.getCenterY()),n=mxUtils.getRotatedPoint(n,i,l,s)),!mxUtils.contains(t,n.x,n.y)}return!1},mxGraphHandler.prototype.moveCells=function(t,e,n,i,l,s){i&&(t=this.graph.getCloneableCells(t));var o=this.graph.getModel().getParent(this.cell);!this.graph.isCellSelected(this.cell)&&this.graph.isCellSelected(o)&&(o=this.graph.getModel().getParent(o)),null==l&&null!=s&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(o,t,s)&&(l=this.graph.getDefaultParent()),i=i&&!this.graph.isCellLocked(l||this.graph.getDefaultParent()),this.graph.getModel().beginUpdate();try{var r=[];if(!i&&null!=l&&this.removeEmptyParents){for(var a=new mxDictionary,h=0;h<t.length;h++)a.put(t[h],!0);for(h=0;h<t.length;h++){var u=this.graph.model.getParent(t[h]);null==u||a.get(u)||(a.put(u,!0),r.push(u))}}t=this.graph.moveCells(t,e,n,i,l,s);for(var d=[],h=0;h<r.length;h++)this.shouldRemoveParent(r[h])&&d.push(r[h]);this.graph.removeCells(d,!1)}finally{this.graph.getModel().endUpdate()}i&&this.graph.setSelectionCells(t),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(t[0])},mxGraphHandler.prototype.shouldRemoveParent=function(t){t=this.graph.view.getState(t);return null!=t&&(this.graph.model.isEdge(t.cell)||this.graph.model.isVertex(t.cell))&&this.graph.isCellDeletable(t.cell)&&0==this.graph.model.getChildCount(t.cell)&&this.graph.isTransparentState(t)},mxGraphHandler.prototype.destroyShapes=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.guide&&(this.guide.destroy(),this.guide=null),null!=this.highlight&&(this.highlight.destroy(),this.highlight=null)},mxGraphHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.refreshHandler&&(this.graph.getModel().removeListener(this.refreshHandler),this.graph.removeListener(this.refreshHandler),this.refreshHandler=null),mxEvent.removeListener(document,"keydown",this.keyHandler),mxEvent.removeListener(document,"keyup",this.keyHandler),this.destroyShapes(),this.removeHint()},__mxOutput.mxGraphHandler=void 0!==mxGraphHandler?mxGraphHandler:void 0,mxPanningHandler.prototype=new mxEventSource,mxPanningHandler.prototype.constructor=mxPanningHandler,mxPanningHandler.prototype.graph=null,mxPanningHandler.prototype.useLeftButtonForPanning=!1,mxPanningHandler.prototype.usePopupTrigger=!0,mxPanningHandler.prototype.ignoreCell=!1,mxPanningHandler.prototype.previewEnabled=!0,mxPanningHandler.prototype.useGrid=!1,mxPanningHandler.prototype.panningEnabled=!0,mxPanningHandler.prototype.pinchEnabled=!0,mxPanningHandler.prototype.maxScale=8,mxPanningHandler.prototype.minScale=.01,mxPanningHandler.prototype.dx=null,mxPanningHandler.prototype.dy=null,mxPanningHandler.prototype.startX=0,mxPanningHandler.prototype.startY=0,mxPanningHandler.prototype.isActive=function(){return this.active||null!=this.initialScale},mxPanningHandler.prototype.isPanningEnabled=function(){return this.panningEnabled},mxPanningHandler.prototype.setPanningEnabled=function(t){this.panningEnabled=t},mxPanningHandler.prototype.isPinchEnabled=function(){return this.pinchEnabled},mxPanningHandler.prototype.setPinchEnabled=function(t){this.pinchEnabled=t},mxPanningHandler.prototype.isPanningTrigger=function(t){var e=t.getEvent();return this.useLeftButtonForPanning&&null==t.getState()&&mxEvent.isLeftMouseButton(e)||mxEvent.isControlDown(e)&&mxEvent.isShiftDown(e)||this.usePopupTrigger&&mxEvent.isPopupTrigger(e)},mxPanningHandler.prototype.isForcePanningEvent=function(t){return this.ignoreCell||mxEvent.isMultiTouchEvent(t.getEvent())},mxPanningHandler.prototype.mouseDown=function(t,e){!(this.mouseDownEvent=e).isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(e)&&(this.start(e),this.consumePanningTrigger(e))},mxPanningHandler.prototype.start=function(t){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=t.getX(),this.startY=t.getY(),this.dx=null,this.dy=null,this.panningTrigger=!0},mxPanningHandler.prototype.consumePanningTrigger=function(t){t.consume()},mxPanningHandler.prototype.mouseMove=function(t,e){var n;this.dx=e.getX()-this.startX,this.dy=e.getY()-this.startY,this.active?(this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject(mxEvent.PAN,"event",e))):this.panningTrigger&&(n=this.active,this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!n)&&this.active&&this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",e)),(this.active||this.panningTrigger)&&e.consume()},mxPanningHandler.prototype.mouseUp=function(t,e){var n,i;this.active&&(null!=this.dx&&null!=this.dy&&(this.graph.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.graph.container)||(n=this.graph.getView().scale,i=this.graph.getView().translate,this.graph.panGraph(0,0),this.panGraph(i.x+this.dx/n,i.y+this.dy/n)),e.consume()),this.fireEvent(new mxEventObject(mxEvent.PAN_END,"event",e))),this.reset()},mxPanningHandler.prototype.zoomGraph=function(t){var e=Math.round(this.initialScale*t.scale*100)/100;null!=this.minScale&&(e=Math.max(this.minScale,e)),null!=this.maxScale&&(e=Math.min(this.maxScale,e)),this.graph.view.scale!=e&&(this.graph.zoomTo(e),mxEvent.consume(t))},mxPanningHandler.prototype.reset=function(){this.graph.isMouseDown=!1,this.panningTrigger=!1,this.mouseDownEvent=null,this.active=!1,this.dx=null,this.dy=null},mxPanningHandler.prototype.panGraph=function(t,e){this.graph.getView().setTranslate(t,e)},mxPanningHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler),mxEvent.removeGestureListeners(document,null,null,this.mouseUpListener),mxEvent.removeListener(document,"mouseleave",this.mouseUpListener)},__mxOutput.mxPanningHandler=void 0!==mxPanningHandler?mxPanningHandler:void 0,mxPopupMenuHandler.prototype=new mxPopupMenu,mxPopupMenuHandler.prototype.constructor=mxPopupMenuHandler,mxPopupMenuHandler.prototype.graph=null,mxPopupMenuHandler.prototype.selectOnPopup=!0,mxPopupMenuHandler.prototype.clearSelectionOnBackground=!0,mxPopupMenuHandler.prototype.triggerX=null,mxPopupMenuHandler.prototype.triggerY=null,mxPopupMenuHandler.prototype.screenX=null,mxPopupMenuHandler.prototype.screenY=null,mxPopupMenuHandler.prototype.init=function(){mxPopupMenu.prototype.init.apply(this),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(t){this.graph.tooltipHandler.hide()}))},mxPopupMenuHandler.prototype.isSelectOnPopup=function(t){return this.selectOnPopup},mxPopupMenuHandler.prototype.mouseDown=function(t,e){this.isEnabled()&&!mxEvent.isMultiTouchEvent(e.getEvent())&&(this.hideMenu(),this.triggerX=e.getGraphX(),this.triggerY=e.getGraphY(),this.screenX=mxEvent.getMainEvent(e.getEvent()).screenX,this.screenY=mxEvent.getMainEvent(e.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(e),this.inTolerance=!0)},mxPopupMenuHandler.prototype.mouseMove=function(t,e){this.inTolerance&&null!=this.screenX&&null!=this.screenY&&(Math.abs(mxEvent.getMainEvent(e.getEvent()).screenX-this.screenX)>this.graph.tolerance||Math.abs(mxEvent.getMainEvent(e.getEvent()).screenY-this.screenY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxPopupMenuHandler.prototype.mouseUp=function(t,n,e){var i,l=null==e;e=null!=e?e:mxUtils.bind(this,function(t){var e=mxUtils.getScrollOrigin();this.popup(n.getX()+e.x+1,n.getY()+e.y+1,t,n.getEvent())}),this.popupTrigger&&this.inTolerance&&null!=this.triggerX&&null!=this.triggerY&&(i=this.getCellForPopupEvent(n),this.graph.isEnabled()&&this.isSelectOnPopup(n)&&null!=i&&!this.graph.isCellSelected(i)?this.graph.setSelectionCell(i):this.clearSelectionOnBackground&&null==i&&this.graph.clearSelection(),this.graph.tooltipHandler.hide(),e(i),l)&&n.consume(),this.popupTrigger=!1,this.inTolerance=!1},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(t){return t.getCell()},mxPopupMenuHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),mxPopupMenu.prototype.destroy.apply(this)},__mxOutput.mxPopupMenuHandler=void 0!==mxPopupMenuHandler?mxPopupMenuHandler:void 0,mxUtils.extend(mxCellMarker,mxEventSource),mxCellMarker.prototype.graph=null,mxCellMarker.prototype.enabled=!0,mxCellMarker.prototype.hotspot=mxConstants.DEFAULT_HOTSPOT,mxCellMarker.prototype.hotspotEnabled=!1,mxCellMarker.prototype.validColor=null,mxCellMarker.prototype.invalidColor=null,mxCellMarker.prototype.currentColor=null,mxCellMarker.prototype.validState=null,mxCellMarker.prototype.markedState=null,mxCellMarker.prototype.setEnabled=function(t){this.enabled=t},mxCellMarker.prototype.isEnabled=function(){return this.enabled},mxCellMarker.prototype.setHotspot=function(t){this.hotspot=t},mxCellMarker.prototype.getHotspot=function(){return this.hotspot},mxCellMarker.prototype.setHotspotEnabled=function(t){this.hotspotEnabled=t},mxCellMarker.prototype.isHotspotEnabled=function(){return this.hotspotEnabled},mxCellMarker.prototype.hasValidState=function(){return null!=this.validState},mxCellMarker.prototype.getValidState=function(){return this.validState},mxCellMarker.prototype.getMarkedState=function(){return this.markedState},mxCellMarker.prototype.reset=function(){(this.validState=null)!=this.markedState&&(this.markedState=null,this.unmark())},mxCellMarker.prototype.process=function(t){var e=null;return this.isEnabled()&&(e=this.getState(t),this.setCurrentState(e,t)),e},mxCellMarker.prototype.setCurrentState=function(t,e,n){var i=null!=t&&this.isValidState(t);n=null!=n?n:this.getMarkerColor(e.getEvent(),t,i),this.validState=i?t:null,t==this.markedState&&n==this.currentColor||(this.currentColor=n,null!=t&&null!=this.currentColor?(this.markedState=t,this.mark()):null!=this.markedState&&(this.markedState=null,this.unmark()))},mxCellMarker.prototype.markCell=function(t,e){t=this.graph.getView().getState(t);null!=t&&(this.currentColor=null!=e?e:this.validColor,this.markedState=t,this.mark())},mxCellMarker.prototype.mark=function(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new mxEventObject(mxEvent.MARK,"state",this.markedState))},mxCellMarker.prototype.unmark=function(){this.mark()},mxCellMarker.prototype.isValidState=function(t){return!0},mxCellMarker.prototype.getMarkerColor=function(t,e,n){return n?this.validColor:this.invalidColor},mxCellMarker.prototype.getState=function(t){var e=this.graph.getView(),n=this.getCell(t),e=this.getStateToMark(e.getState(n));return null!=e&&this.intersects(e,t)?e:null},mxCellMarker.prototype.getCell=function(t){return t.getCell()},mxCellMarker.prototype.getStateToMark=function(t){return t},mxCellMarker.prototype.intersects=function(t,e){return!this.hotspotEnabled||mxUtils.intersectsHotspot(t,e.getGraphX(),e.getGraphY(),this.hotspot,mxConstants.MIN_HOTSPOT_SIZE,mxConstants.MAX_HOTSPOT_SIZE)},mxCellMarker.prototype.destroy=function(){this.highlight.destroy()},__mxOutput.mxCellMarker=void 0!==mxCellMarker?mxCellMarker:void 0,mxUtils.extend(mxSelectionCellsHandler,mxEventSource),mxSelectionCellsHandler.prototype.graph=null,mxSelectionCellsHandler.prototype.enabled=!0,mxSelectionCellsHandler.prototype.refreshHandler=null,mxSelectionCellsHandler.prototype.maxHandlers=100,mxSelectionCellsHandler.prototype.handlers=null,mxSelectionCellsHandler.prototype.isEnabled=function(){return this.enabled},mxSelectionCellsHandler.prototype.setEnabled=function(t){this.enabled=t},mxSelectionCellsHandler.prototype.getHandler=function(t){return this.handlers.get(t)},mxSelectionCellsHandler.prototype.isHandled=function(t){return null!=this.getHandler(t)},mxSelectionCellsHandler.prototype.reset=function(){this.handlers.visit(function(t,e){e.reset.apply(e)})},mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){return this.graph.getSelectionCells()},mxSelectionCellsHandler.prototype.refresh=function(t){var e,n=this.handlers,i=(this.handlers=new mxDictionary,mxUtils.sortCells(this.getHandledSelectionCells(),!1));!t&&0<this.graph.graphHandler.maxCells&&0<this.graph.getSelectionCount()&&0<(e=n.getCount())&&(t=e<=this.graph.graphHandler.maxCells!=this.graph.getSelectionCount()<=this.graph.graphHandler.maxCells);for(var l=0;l<i.length;l++)null!=(s=this.graph.view.getState(i[l]))&&(null!=(o=n.remove(i[l]))&&(o.state!=s?(o.destroy(),o=null):this.isHandlerActive(o)||(t&&o.refresh(),o.redraw())),null!=o)&&this.handlers.put(i[l],o);n.visit(mxUtils.bind(this,function(t,e){this.fireEvent(new mxEventObject(mxEvent.REMOVE,"state",e.state)),e.destroy()}));for(var s,o,l=0;l<i.length;l++)null!=(s=this.graph.view.getState(i[l]))&&(null==(o=this.handlers.get(i[l]))?(o=this.graph.createHandler(s),this.fireEvent(new mxEventObject(mxEvent.ADD,"state",s)),this.handlers.put(i[l],o)):o.updateParentHighlight())},mxSelectionCellsHandler.prototype.isHandlerActive=function(t){return null!=t.index},mxSelectionCellsHandler.prototype.updateHandler=function(t){var e,n,i,l=this.handlers.remove(t.cell);null!=l&&(e=l.index,n=l.startX,i=l.startY,l.destroy(),null!=(l=this.graph.createHandler(t)))&&(this.handlers.put(t.cell,l),null!=e)&&null!=n&&null!=i&&l.start(n,i,e)},mxSelectionCellsHandler.prototype.mouseDown=function(t,e){var n;this.graph.isEnabled()&&this.isEnabled()&&(n=[t,e],this.handlers.visit(function(t,e){e.mouseDown.apply(e,n)}))},mxSelectionCellsHandler.prototype.mouseMove=function(t,e){var n;this.graph.isEnabled()&&this.isEnabled()&&(n=[t,e],this.handlers.visit(function(t,e){e.mouseMove.apply(e,n)}))},mxSelectionCellsHandler.prototype.mouseUp=function(t,e){var n;this.graph.isEnabled()&&this.isEnabled()&&(n=[t,e],this.handlers.visit(function(t,e){e.mouseUp.apply(e,n)}))},mxSelectionCellsHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.refreshHandler&&(this.graph.getSelectionModel().removeListener(this.redrawHandler),this.graph.getModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler),this.graph.removeListener(this.redrawHandler),this.redrawHandler=null,this.refreshHandler=null)},__mxOutput.mxSelectionCellsHandler=void 0!==mxSelectionCellsHandler?mxSelectionCellsHandler:void 0,mxUtils.extend(mxConnectionHandler,mxEventSource),mxConnectionHandler.prototype.graph=null,mxConnectionHandler.prototype.factoryMethod=!0,mxConnectionHandler.prototype.moveIconFront=!1,mxConnectionHandler.prototype.moveIconBack=!1,mxConnectionHandler.prototype.connectImage=null,mxConnectionHandler.prototype.targetConnectImage=!1,mxConnectionHandler.prototype.enabled=!0,mxConnectionHandler.prototype.select=!0,mxConnectionHandler.prototype.createTarget=!1,mxConnectionHandler.prototype.marker=null,mxConnectionHandler.prototype.constraintHandler=null,mxConnectionHandler.prototype.error=null,mxConnectionHandler.prototype.waypointsEnabled=!1,mxConnectionHandler.prototype.ignoreMouseDown=!1,mxConnectionHandler.prototype.first=null,mxConnectionHandler.prototype.connectIconOffset=new mxPoint(0,mxConstants.TOOLTIP_VERTICAL_OFFSET),mxConnectionHandler.prototype.edgeState=null,mxConnectionHandler.prototype.changeHandler=null,mxConnectionHandler.prototype.drillHandler=null,mxConnectionHandler.prototype.mouseDownCounter=0,mxConnectionHandler.prototype.movePreviewAway=!1,mxConnectionHandler.prototype.outlineConnect=!1,mxConnectionHandler.prototype.livePreview=!1,mxConnectionHandler.prototype.cursor=null,mxConnectionHandler.prototype.insertBeforeSource=!1,mxConnectionHandler.prototype.isEnabled=function(){return this.enabled},mxConnectionHandler.prototype.setEnabled=function(t){this.enabled=t},mxConnectionHandler.prototype.isInsertBefore=function(t,e,n,i,l){return this.insertBeforeSource&&e!=n&&this.graph.model.getParent(t)==this.graph.model.getParent(e)},mxConnectionHandler.prototype.isCreateTarget=function(t){return this.createTarget},mxConnectionHandler.prototype.setCreateTarget=function(t){this.createTarget=t},mxConnectionHandler.prototype.createShape=function(){var t=this.livePreview&&null!=this.edgeState?this.graph.cellRenderer.createShape(this.edgeState):new mxPolyline([],mxConstants.INVALID_COLOR);return t.dialect=mxConstants.DIALECT_SVG,t.scale=this.graph.view.scale,t.svgStrokeTolerance=0,t.pointerEvents=!1,t.isDashed=!0,t.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(t.node,this.graph,null),t},mxConnectionHandler.prototype.init=function(){this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.changeHandler=mxUtils.bind(this,function(t){null!=this.iconState&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),null!=this.iconState?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):null!=this.previous&&null==this.graph.view.getState(this.previous.cell)&&this.reset()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE,this.changeHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=mxUtils.bind(this,function(t){this.reset()}),this.graph.addListener(mxEvent.START_EDITING,this.drillHandler),this.graph.getView().addListener(mxEvent.DOWN,this.drillHandler),this.graph.getView().addListener(mxEvent.UP,this.drillHandler)},mxConnectionHandler.prototype.isConnectableCell=function(t){return!0},mxConnectionHandler.prototype.createMarker=function(){var i=new mxCellMarker(this.graph);return i.hotspotEnabled=!0,i.getCell=mxUtils.bind(this,function(t){var e,n=mxCellMarker.prototype.getCell.apply(i,arguments);return(this.error=null)==(n=null==n&&null!=this.currentPoint?this.graph.getCellAt(this.currentPoint.x,this.currentPoint.y):n)||this.graph.isCellConnectable(n)||(e=this.graph.getModel().getParent(n),this.graph.getModel().isVertex(e)&&this.graph.isCellConnectable(e)&&(n=e)),null!=(n=this.graph.isSwimlane(n)&&null!=this.currentPoint&&this.graph.hitsSwimlaneContent(n,this.currentPoint.x,this.currentPoint.y)||!this.isConnectableCell(n)?null:n)?this.isConnecting()?null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,n),null!=this.error)&&0==this.error.length&&(n=null,this.isCreateTarget(t.getEvent()))&&(this.error=null):this.isValidSource(n,t)||(n=null):!this.isConnecting()||this.isCreateTarget(t.getEvent())||this.graph.allowDanglingEdges||(this.error=""),n}),i.isValidState=mxUtils.bind(this,function(t){return this.isConnecting()?null==this.error:mxCellMarker.prototype.isValidState.apply(i,arguments)}),i.getMarkerColor=mxUtils.bind(this,function(t,e,n){return null==this.connectImage||this.isConnecting()?mxCellMarker.prototype.getMarkerColor.apply(i,arguments):null}),i.intersects=mxUtils.bind(this,function(t,e){return!(null==this.connectImage&&!this.isConnecting())||mxCellMarker.prototype.intersects.apply(i,arguments)}),i},mxConnectionHandler.prototype.start=function(t,e,n,i){this.previous=t,this.first=new mxPoint(e,n),this.edgeState=null!=i?i:this.createEdgeState(null),this.marker.currentColor=this.marker.validColor,this.marker.markedState=t,this.marker.mark(),this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous))},mxConnectionHandler.prototype.isConnecting=function(){return null!=this.first&&null!=this.shape},mxConnectionHandler.prototype.isValidSource=function(t,e){return this.graph.isValidSource(t)},mxConnectionHandler.prototype.isValidTarget=function(t){return!0},mxConnectionHandler.prototype.validateConnection=function(t,e){return this.isValidTarget(e)?this.graph.getEdgeValidationError(null,t,e):""},mxConnectionHandler.prototype.getConnectImage=function(t){return this.connectImage},mxConnectionHandler.prototype.isMoveIconToFrontForState=function(t){return null!=t.text&&t.text.node.parentNode==this.graph.container||this.moveIconFront},mxConnectionHandler.prototype.createIcons=function(t){var e,n,i,l=this.getConnectImage(t);return null!=l&&null!=t?(this.iconState=t,e=[],(n=new mxImageShape(new mxRectangle(0,0,l.width,l.height),l.src,null,null,0)).preserveImageAspect=!1,this.isMoveIconToFrontForState(t)?(n.dialect=mxConstants.DIALECT_STRICTHTML,n.init(this.graph.container)):(n.dialect=mxConstants.DIALECT_SVG,n.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&null!=n.node.previousSibling&&n.node.parentNode.insertBefore(n.node,n.node.parentNode.firstChild)),n.node.style.cursor=mxConstants.CURSOR_CONNECT,i=mxUtils.bind(this,function(){return null!=this.currentState?this.currentState:t}),l=mxUtils.bind(this,function(t){mxEvent.isConsumed(t)||(this.icon=n,this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,i())))}),mxEvent.redirectMouseEvents(n.node,this.graph,i,l),e.push(n),this.redrawIcons(e,this.iconState),e):null},mxConnectionHandler.prototype.redrawIcons=function(t,e){null!=t&&null!=t[0]&&null!=e&&(e=this.getIconPosition(t[0],e),t[0].bounds.x=e.x,t[0].bounds.y=e.y,t[0].redraw())},mxConnectionHandler.prototype.getIconPosition=function(t,e){var n,i=this.graph.getView().scale,l=e.getCenterX(),s=e.getCenterY();return this.graph.isSwimlane(e.cell)&&(l=0!=(n=this.graph.getStartSize(e.cell)).width?e.x+n.width*i/2:l,s=0!=n.height?e.y+n.height*i/2:s,0!=(n=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0)))&&(i=Math.cos(n),n=Math.sin(n),e=new mxPoint(e.getCenterX(),e.getCenterY()),l=(i=mxUtils.getRotatedPoint(new mxPoint(l,s),i,n,e)).x,s=i.y),new mxPoint(l-t.bounds.width/2,s-t.bounds.height/2)},mxConnectionHandler.prototype.destroyIcons=function(){if(null!=this.icons){for(var t=0;t<this.icons.length;t++)this.icons[t].destroy();this.icons=null,this.icon=null,this.selectedIcon=null,this.iconState=null}},mxConnectionHandler.prototype.isStartEvent=function(t){return null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint||null!=this.previous&&null==this.error&&(null==this.icons||null!=this.icons&&null!=this.icon)},mxConnectionHandler.prototype.mouseDown=function(t,e){var n;this.mouseDownCounter++,this.isEnabled()&&this.graph.isEnabled()&&!e.isConsumed()&&!this.isConnecting()&&this.isStartEvent(e)&&(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new mxPoint(e.getGraphX(),e.getGraphY()),this.edgeState=this.createEdgeState(e),this.mouseDownCounter=1,this.waypointsEnabled&&null==this.shape&&(this.waypoints=null,this.shape=this.createShape(),null!=this.edgeState)&&this.shape.apply(this.edgeState),null==this.previous&&null!=this.edgeState&&(n=this.graph.getPointForEvent(e.getEvent()),this.edgeState.cell.geometry.setTerminalPoint(n,!0)),this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous)),e.consume()),this.selectedIcon=this.icon,this.icon=null},mxConnectionHandler.prototype.isImmediateConnectSource=function(t){return!this.graph.isCellMovable(t.cell)},mxConnectionHandler.prototype.createEdgeState=function(t){return null},mxConnectionHandler.prototype.isOutlineConnectEvent=function(t){var e,n,i,l,s;return(!mxEvent.isShiftDown(t.getEvent())||!mxEvent.isAltDown(t.getEvent()))&&(s=mxUtils.getOffset(this.graph.container),n=t.getEvent(),e=mxEvent.getClientX(n),n=mxEvent.getClientY(n),i=document.documentElement,l=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),i=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),l=this.currentPoint.x-this.graph.container.scrollLeft+s.x-l,s=this.currentPoint.y-this.graph.container.scrollTop+s.y-i,this.outlineConnect)&&(mxEvent.isShiftDown(t.getEvent())&&!mxEvent.isAltDown(t.getEvent())||t.isSource(this.marker.highlight.shape)||!mxEvent.isShiftDown(t.getEvent())&&mxEvent.isAltDown(t.getEvent())&&null!=t.getState()||this.marker.highlight.isHighlightAt(e,n)||(l!=e||s!=n)&&null==t.getState()&&this.marker.highlight.isHighlightAt(l,s))},mxConnectionHandler.prototype.updateCurrentState=function(t,e){var n;this.constraintHandler.update(t,null==this.first,!1,null==this.first||t.isSource(this.marker.highlight.shape)?null:e),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint?(null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),null==this.error&&(this.currentState=this.constraintHandler.currentFocus),null==this.error&&(null==this.currentState||this.isCellEnabled(this.currentState.cell))||this.constraintHandler.reset())):(this.graph.isIgnoreTerminalEvent(t.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(t),this.currentState=this.marker.getValidState()),null==this.currentState||this.isCellEnabled(this.currentState.cell)||(this.constraintHandler.reset(),this.marker.reset(),this.currentState=null),n=this.isOutlineConnectEvent(t),null!=this.currentState&&n&&(t.isSource(this.marker.highlight.shape)&&(e=new mxPoint(t.getGraphX(),t.getGraphY())),n=this.graph.getOutlineConstraint(e,this.currentState,t),this.constraintHandler.setFocus(t,this.currentState,!1),this.constraintHandler.currentConstraint=n,this.constraintHandler.currentPoint=e),this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&(n=this.graph.view.scale,null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=mxConstants.OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/n/n,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.graph.isCellConnectable(t.getCell())&&this.marker.getValidState()!=t.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/n/n,this.marker.highlight.repaint())))},mxConnectionHandler.prototype.isCellEnabled=function(t){return!0},mxConnectionHandler.prototype.convertWaypoint=function(t){var e=this.graph.getView().getScale(),n=this.graph.getView().getTranslate();t.x=t.x/e-n.x,t.y=t.y/e-n.y},mxConnectionHandler.prototype.snapToPreview=function(t,e){var n,i;mxEvent.isAltDown(t.getEvent())||null==this.previous||(n=this.graph.gridSize*this.graph.view.scale/2,i=null!=this.sourceConstraint?this.first:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),Math.abs(i.x-t.getGraphX())<n&&(e.x=i.x),Math.abs(i.y-t.getGraphY())<n&&(e.y=i.y))},mxConnectionHandler.prototype.mouseMove=function(t,e){if(e.isConsumed()||!this.ignoreMouseDown&&null==this.first&&this.graph.isMouseDown)this.constraintHandler.reset();else{this.isEnabled()||null==this.currentState||(this.destroyIcons(),this.currentState=null);var n=this.graph.getView(),i=n.scale,n=n.translate,l=new mxPoint(e.getGraphX(),e.getGraphY());if(this.error=null,this.graph.isGridEnabledEvent(e.getEvent())&&(l=new mxPoint((this.graph.snap(l.x/i-n.x)+n.x)*i,(this.graph.snap(l.y/i-n.y)+n.y)*i)),this.snapToPreview(e,l),this.currentPoint=l,(null!=this.first||this.isEnabled()&&this.graph.isEnabled())&&(null!=this.shape||null==this.first||Math.abs(e.getGraphX()-this.first.x)>this.graph.tolerance||Math.abs(e.getGraphY()-this.first.y)>this.graph.tolerance)&&this.updateCurrentState(e,l),null!=this.first){var s,n=null,i=l,o=(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(n=this.constraintHandler.currentConstraint,i=this.constraintHandler.currentPoint.clone()):null!=this.previous&&mxEvent.isShiftDown(e.getEvent())&&!this.graph.isIgnoreTerminalEvent(e.getEvent())&&(o=new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),null!=this.sourceConstraint&&(o=this.first),Math.abs(o.x-l.x)<Math.abs(o.y-l.y)?l.x=o.x:l.y=o.y),this.first);if(null!=this.selectedIcon&&(s=this.selectedIcon.bounds.width,r=this.selectedIcon.bounds.height,null!=this.currentState&&this.targetConnectImage?(d=this.getIconPosition(this.selectedIcon,this.currentState),this.selectedIcon.bounds.x=d.x,this.selectedIcon.bounds.y=d.y):(d=new mxRectangle(e.getGraphX()+this.connectIconOffset.x,e.getGraphY()+this.connectIconOffset.y,s,r),this.selectedIcon.bounds=d),this.selectedIcon.redraw()),null!=this.edgeState?(this.updateEdgeState(i,n),i=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],o=this.edgeState.absolutePoints[0]):(null!=this.currentState&&null==this.constraintHandler.currentConstraint&&null!=(a=this.getTargetPerimeterPoint(this.currentState,e))&&(i=a),null==this.sourceConstraint&&null!=this.previous&&(s=null!=this.waypoints&&0<this.waypoints.length?this.waypoints[0]:i,null!=(a=this.getSourcePerimeterPoint(this.previous,s,e)))&&(o=a)),null==this.currentState&&this.movePreviewAway){var r,a=o,h=(null!=this.edgeState&&2<=this.edgeState.absolutePoints.length&&null!=(r=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2])&&(a=r),i.x-a.x),u=i.y-a.y,d=Math.sqrt(h*h+u*u);if(0==d)return;this.originalPoint=i.clone(),i.x-=4*h/d,i.y-=4*u/d}else this.originalPoint=null;null==this.shape&&(h=Math.abs(e.getGraphX()-this.first.x),u=Math.abs(e.getGraphY()-this.first.y),h>this.graph.tolerance||u>this.graph.tolerance)&&(this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState),this.updateCurrentState(e,l)),null!=this.shape&&(null!=this.edgeState?this.shape.points=this.edgeState.absolutePoints:(n=[o],(n=null!=this.waypoints?n.concat(this.waypoints):n).push(i),this.shape.points=n),this.drawPreview()),null!=this.cursor&&(this.graph.container.style.cursor=this.cursor),mxEvent.consume(e.getEvent()),e.consume()}else this.isEnabled()&&this.graph.isEnabled()?this.previous!=this.currentState&&null==this.edgeState?(this.destroyIcons(),null!=this.currentState&&null==this.error&&null==this.constraintHandler.currentConstraint&&(this.icons=this.createIcons(this.currentState),null==this.icons)&&(this.currentState.setCursor(mxConstants.CURSOR_CONNECT),e.consume()),this.previous=this.currentState):this.previous!=this.currentState||null==this.currentState||null!=this.icons||this.graph.isMouseDown||e.consume():this.constraintHandler.reset();if(!this.graph.isMouseDown&&null!=this.currentState&&null!=this.icons){for(var p=!1,m=e.getSource(),c=0;c<this.icons.length&&!p;c++)p=m==this.icons[c].node||m.parentNode==this.icons[c].node;p||this.updateIcons(this.currentState,this.icons,e)}}},mxConnectionHandler.prototype.updateEdgeState=function(t,e){null!=this.sourceConstraint&&null!=this.sourceConstraint.point&&(this.edgeState.style[mxConstants.STYLE_EXIT_X]=this.sourceConstraint.point.x,this.edgeState.style[mxConstants.STYLE_EXIT_Y]=this.sourceConstraint.point.y),null!=e&&null!=e.point?(this.edgeState.style[mxConstants.STYLE_ENTRY_X]=e.point.x,this.edgeState.style[mxConstants.STYLE_ENTRY_Y]=e.point.y):(delete this.edgeState.style[mxConstants.STYLE_ENTRY_X],delete this.edgeState.style[mxConstants.STYLE_ENTRY_Y]),this.edgeState.absolutePoints=[null,null!=this.currentState?null:t],this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),null!=this.currentState&&(null==e&&(e=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,e));var n=null;if(null!=this.waypoints)for(var n=[],i=0;i<this.waypoints.length;i++){var l=this.waypoints[i].clone();this.convertWaypoint(l),n[i]=l}this.graph.view.updatePoints(this.edgeState,n,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)},mxConnectionHandler.prototype.getTargetPerimeterPoint=function(t,e){var n,i=null,l=t.view,s=l.getPerimeterFunction(t);return null!=s?(n=null!=this.waypoints&&0<this.waypoints.length?this.waypoints[this.waypoints.length-1]:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),null!=(s=s(l.getPerimeterBounds(t),this.edgeState,n,!1))&&(i=s)):i=new mxPoint(t.getCenterX(),t.getCenterY()),i},mxConnectionHandler.prototype.getSourcePerimeterPoint=function(t,e,n){var i,l,s=null,o=t.view,r=o.getPerimeterFunction(t),a=new mxPoint(t.getCenterX(),t.getCenterY());return null!=r?(l=-(i=mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0))*(Math.PI/180),0!=i&&(e=mxUtils.getRotatedPoint(new mxPoint(e.x,e.y),Math.cos(l),Math.sin(l),a)),null!=(r=r(o.getPerimeterBounds(t),t,e,!1))&&(s=r=0!=i?mxUtils.getRotatedPoint(new mxPoint(r.x,r.y),Math.cos(-l),Math.sin(-l),a):r)):s=a,s},mxConnectionHandler.prototype.updateIcons=function(t,e,n){},mxConnectionHandler.prototype.isStopEvent=function(t){return null!=t.getState()},mxConnectionHandler.prototype.addWaypointForEvent=function(t){var e=mxUtils.convertPoint(this.graph.container,t.getX(),t.getY()),n=Math.abs(e.x-this.first.x),i=Math.abs(e.y-this.first.y);(null!=this.waypoints||1<this.mouseDownCounter&&(n>this.graph.tolerance||i>this.graph.tolerance))&&(null==this.waypoints&&(this.waypoints=[]),n=this.graph.view.scale,e=new mxPoint(this.graph.snap(t.getGraphX()/n)*n,this.graph.snap(t.getGraphY()/n)*n),this.waypoints.push(e))},mxConnectionHandler.prototype.checkConstraints=function(t,e){return null==t||null==e||null==t.point||null==e.point||!t.point.equals(e.point)||t.dx!=e.dx||t.dy!=e.dy||t.perimeter!=e.perimeter},mxConnectionHandler.prototype.mouseUp=function(t,e){if(!e.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(e))return this.addWaypointForEvent(e),void e.consume();var n=this.sourceConstraint,i=this.constraintHandler.currentConstraint,l=null!=this.previous?this.previous.cell:null,s=null;null==(s=null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?this.constraintHandler.currentFocus.cell:s)&&null!=this.currentState&&(s=this.currentState.cell),null!=this.error||null!=l&&null!=s&&l==s&&!this.checkConstraints(n,i)?(null!=this.previous&&null!=this.marker.validState&&this.previous.cell==this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.source,e.getEvent()),null!=this.error&&0<this.error.length&&this.graph.validationAlert(this.error)):this.connect(l,s,e.getEvent(),e.getCell()),this.destroyIcons(),e.consume()}null!=this.first&&this.reset()},mxConnectionHandler.prototype.reset=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.cursor&&null!=this.graph.container&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.originalPoint=null,this.currentPoint=null,this.edgeState=null,this.previous=null,this.error=null,this.sourceConstraint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new mxEventObject(mxEvent.RESET))},mxConnectionHandler.prototype.drawPreview=function(){this.updatePreview(null==this.error),null!=this.edgeState&&(this.edgeState.shape=this.shape,this.graph.cellRenderer.postConfigureShape(this.edgeState),this.edgeState.shape=null),this.shape.redraw()},mxConnectionHandler.prototype.updatePreview=function(t){this.shape.strokewidth=this.getEdgeWidth(t),this.shape.stroke=this.getEdgeColor(t)},mxConnectionHandler.prototype.getEdgeColor=function(t){return t?mxConstants.VALID_COLOR:mxConstants.INVALID_COLOR},mxConnectionHandler.prototype.getEdgeWidth=function(t){return t?3:1},mxConnectionHandler.prototype.connect=function(t,e,n,i){if(null!=e||this.isCreateTarget(n)||this.graph.allowDanglingEdges){var l=this.graph.getModel(),s=!1,o=null;l.beginUpdate();try{null!=t&&null==e&&!this.graph.isIgnoreTerminalEvent(n)&&this.isCreateTarget(n)&&null!=(e=this.createTargetVertex(n,t))&&(i=this.graph.getDropTarget([e],n,i),s=!0,null!=i&&this.graph.getModel().isEdge(i)?i=this.graph.getDefaultParent():null!=(g=this.graph.getView().getState(i))&&((m=l.getGeometry(e)).x-=g.origin.x,m.y-=g.origin.y),this.graph.addCell(e,i));var r=this.graph.getDefaultParent(),a=this.graph.getReferenceTerminal(t),h=this.graph.getReferenceTerminal(e),u=r,d=(null!=a&&null!=h?u=l.getNearestCommonAncestor(a,h):null!=a&&(u=l.getParent(a)),null==u||l.isEdge(u)||u==l.getRoot()||(r=u),null),p=null;if(null!=this.edgeState&&(d=this.edgeState.cell.value,p=this.edgeState.cell.style),null!=(o=this.insertEdge(r,null,d,t,e,p))){if(this.graph.setConnectionConstraint(o,t,!0,this.sourceConstraint),this.graph.setConnectionConstraint(o,e,!1,this.constraintHandler.currentConstraint),null!=this.edgeState&&l.setGeometry(o,this.edgeState.cell.geometry),this.isInsertBefore(o,t,e,n,i)&&(null==this.constraintHandler.currentConstraint||this.constraintHandler.currentConstraint.perimeter)){for(var m=t;null!=m.parent&&null!=m.geometry&&m.geometry.relative&&m.parent!=o.parent;)m=this.graph.model.getParent(m);null!=m&&null!=m.parent&&m.parent==o.parent&&l.add(r,o,m.parent.getIndex(m))}var c,g,x=l.getGeometry(o);if(null==x&&((x=new mxGeometry).relative=!0,l.setGeometry(o,x)),null!=this.waypoints&&0<this.waypoints.length){var y=this.graph.view.scale,C=this.graph.view.translate;x.points=[];for(var f=0;f<this.waypoints.length;f++){var v=this.waypoints[f];x.points.push(new mxPoint(v.x/y-C.x,v.y/y-C.y))}}null==e&&(c=this.graph.view.translate,y=this.graph.view.scale,(v=null!=this.originalPoint?new mxPoint(this.originalPoint.x/y-c.x,this.originalPoint.y/y-c.y):new mxPoint(this.currentPoint.x/y-c.x,this.currentPoint.y/y-c.y)).x-=this.graph.panDx/this.graph.view.scale,v.y-=this.graph.panDy/this.graph.view.scale,null!=(g=this.graph.getView().getState(l.getParent(o)))&&(v.x-=g.origin.x,v.y-=g.origin.y),x.setTerminalPoint(v,!1)),this.fireEvent(new mxEventObject(mxEvent.CONNECT,"cell",o,"terminal",e,"event",n,"target",i,"terminalInserted",s))}}catch(t){mxLog.show(),mxLog.debug(t.message)}finally{l.endUpdate()}this.select&&this.selectCells(o,s?e:null)}},mxConnectionHandler.prototype.selectCells=function(t,e){this.graph.setSelectionCell(t)},mxConnectionHandler.prototype.insertEdge=function(t,e,n,i,l,s){return null==this.factoryMethod?this.graph.insertEdge(t,e,n,i,l,s):(e=this.createEdge(n,i,l,s),this.graph.addEdge(e,t,i,l))},mxConnectionHandler.prototype.createTargetVertex=function(t,e){for(var n=this.graph.getCellGeometry(e);null!=n&&n.relative;)e=this.graph.getModel().getParent(e),n=this.graph.getCellGeometry(e);var i,l,s,o,r,a=this.graph.cloneCell(e);return null!=(n=this.graph.getModel().getGeometry(a))&&(i=this.graph.view.translate,l=this.graph.view.scale,s=new mxPoint(this.currentPoint.x/l-i.x,this.currentPoint.y/l-i.y),n.x=Math.round(s.x-n.width/2-this.graph.panDx/l),n.y=Math.round(s.y-n.height/2-this.graph.panDy/l),0<(s=this.getAlignmentTolerance()))&&null!=(r=this.graph.view.getState(e))&&(o=r.x/l-i.x,r=r.y/l-i.y,Math.abs(o-n.x)<=s&&(n.x=Math.round(o)),Math.abs(r-n.y)<=s)&&(n.y=Math.round(r)),a},mxConnectionHandler.prototype.getAlignmentTolerance=function(t){return this.graph.isGridEnabled()?this.graph.gridSize/2:this.graph.tolerance},mxConnectionHandler.prototype.createEdge=function(t,e,n,i){var l=null;return null==(l=null!=this.factoryMethod?this.factoryMethod(e,n,i):l)&&((l=new mxCell(t||"")).setEdge(!0),l.setStyle(i),(e=new mxGeometry).relative=!0,l.setGeometry(e)),l},mxConnectionHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler),this.changeHandler=null),null!=this.drillHandler&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler),this.drillHandler=null),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null)},__mxOutput.mxConnectionHandler=void 0!==mxConnectionHandler?mxConnectionHandler:void 0,mxConstraintHandler.prototype.pointImage=new mxImage(mxClient.imageBasePath+"/point.gif",5,5),mxConstraintHandler.prototype.graph=null,mxConstraintHandler.prototype.enabled=!0,mxConstraintHandler.prototype.highlightColor=mxConstants.DEFAULT_VALID_COLOR,mxConstraintHandler.prototype.isEnabled=function(){return this.enabled},mxConstraintHandler.prototype.setEnabled=function(t){this.enabled=t},mxConstraintHandler.prototype.reset=function(){if(null!=this.focusIcons){for(var t=0;t<this.focusIcons.length;t++)this.focusIcons[t].destroy();this.focusIcons=null}null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.currentConstraint=null,this.currentFocusArea=null,this.currentPoint=null,this.currentFocus=null,this.focusPoints=null},mxConstraintHandler.prototype.getTolerance=function(t){return this.graph.getTolerance()},mxConstraintHandler.prototype.getImageForConstraint=function(t,e,n){return this.pointImage},mxConstraintHandler.prototype.isEventIgnored=function(t,e){return!1},mxConstraintHandler.prototype.isStateIgnored=function(t,e){return!1},mxConstraintHandler.prototype.destroyIcons=function(){if(null!=this.focusIcons){for(var t=0;t<this.focusIcons.length;t++)this.focusIcons[t].destroy();this.focusIcons=null,this.focusPoints=null}},mxConstraintHandler.prototype.destroyFocusHighlight=function(){null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null)},mxConstraintHandler.prototype.isKeepFocusEvent=function(t){return mxEvent.isShiftDown(t.getEvent())&&!mxEvent.isAltDown(t.getEvent())},mxConstraintHandler.prototype.getCellForEvent=function(t,e){var n=t.getCell();return null==(n=null!=n||null==e||t.getGraphX()==e.x&&t.getGraphY()==e.y?n:this.graph.getCellAt(e.x,e.y))||this.graph.isCellConnectable(n)||(t=this.graph.getModel().getParent(n),this.graph.getModel().isVertex(t)&&this.graph.isCellConnectable(t)&&(n=t)),this.graph.isCellLocked(n)?null:n},mxConstraintHandler.prototype.update=function(t,e,n,i){if(this.isEnabled()&&!this.isEventIgnored(t)){null==this.mouseleaveHandler&&null!=this.graph.container&&(this.mouseleaveHandler=mxUtils.bind(this,function(){this.reset()}),mxEvent.addListener(this.graph.container,"mouseleave",this.resetHandler));var l=this.getTolerance(t),s=new mxRectangle((null!=i?i.x:t.getGraphX())-l,(null!=i?i.y:t.getGraphY())-l,2*l,2*l),o=new mxRectangle(t.getGraphX()-l,t.getGraphY()-l,2*l,2*l),r=this.graph.view.getState(this.getCellForEvent(t,i)),a=(this.isKeepFocusEvent(t)||null!=this.currentFocusArea&&null!=this.currentFocus&&null==r&&this.graph.getModel().isVertex(this.currentFocus.cell)&&mxUtils.intersects(this.currentFocusArea,o)||r==this.currentFocus||(this.currentFocusArea=null,this.currentFocus=null,this.setFocus(t,r,e)),this.currentConstraint=null,this.currentPoint=null);if(null!=this.focusIcons&&null!=this.constraints&&(null==r||this.currentFocus==r))for(var h=o.getCenterX(),u=o.getCenterY(),d=0;d<this.focusIcons.length;d++){var p,m=h-this.focusIcons[d].bounds.getCenterX(),c=u-this.focusIcons[d].bounds.getCenterY(),m=m*m+c*c;(this.intersects(this.focusIcons[d],o,e,n)||null!=i&&this.intersects(this.focusIcons[d],s,e,n))&&(null==a||m<a)&&(this.currentConstraint=this.constraints[d],this.currentPoint=this.focusPoints[d],a=m,(m=this.focusIcons[d].bounds.clone()).grow(mxConstants.HIGHLIGHT_SIZE+1),--m.width,--m.height,null==this.focusHighlight&&((c=this.createHighlightShape()).dialect=mxConstants.DIALECT_SVG,c.pointerEvents=!1,c.init(this.graph.getView().getOverlayPane()),this.focusHighlight=c,p=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:r}),mxEvent.redirectMouseEvents(c.node,this.graph,p)),this.focusHighlight.bounds=m,this.focusHighlight.redraw())}null==this.currentConstraint&&this.destroyFocusHighlight()}else this.currentConstraint=null,this.currentFocus=null,this.currentPoint=null},mxConstraintHandler.prototype.redraw=function(){if(null!=this.currentFocus&&null!=this.constraints&&null!=this.focusIcons){var t=this.graph.view.getState(this.currentFocus.cell);this.currentFocus=t,this.currentFocusArea=new mxRectangle(t.x,t.y,t.width,t.height);for(var e=0;e<this.constraints.length;e++){var n=this.graph.getConnectionPoint(t,this.constraints[e]),i=this.getImageForConstraint(t,this.constraints[e],n),i=new mxRectangle(Math.round(n.x-i.width/2),Math.round(n.y-i.height/2),i.width,i.height);this.focusIcons[e].bounds=i,this.focusIcons[e].redraw(),this.currentFocusArea.add(this.focusIcons[e].bounds),this.focusPoints[e]=n}}},mxConstraintHandler.prototype.setFocus=function(t,e,n){if(this.constraints=null!=e&&!this.isStateIgnored(e,n)&&this.graph.isCellConnectable(e.cell)?this.isEnabled()&&this.graph.getAllConnectionConstraints(e,n)||[]:null,null!=this.constraints){if(this.currentFocus=e,this.currentFocusArea=new mxRectangle(e.x,e.y,e.width,e.height),null!=this.focusIcons){for(var i=0;i<this.focusIcons.length;i++)this.focusIcons[i].destroy();this.focusIcons=null,this.focusPoints=null}this.focusPoints=[],this.focusIcons=[];for(i=0;i<this.constraints.length;i++){var l=this.graph.getConnectionPoint(e,this.constraints[i]),s=this.getImageForConstraint(e,this.constraints[i],l),o=s.src,s=new mxImageShape(new mxRectangle(Math.round(l.x-s.width/2),Math.round(l.y-s.height/2),s.width,s.height),o),o=(s.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,s.preserveImageAspect=!1,s.init(this.graph.getView().getDecoratorPane()),null!=s.node.previousSibling&&s.node.parentNode.insertBefore(s.node,s.node.parentNode.firstChild),mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:e}));s.redraw(),mxEvent.redirectMouseEvents(s.node,this.graph,o),this.currentFocusArea.add(s.bounds),this.focusIcons.push(s),this.focusPoints.push(l)}this.currentFocusArea.grow(this.getTolerance(t))}else this.destroyIcons(),this.destroyFocusHighlight()},mxConstraintHandler.prototype.createHighlightShape=function(){var t=new mxRectangleShape(null,this.highlightColor,this.highlightColor,mxConstants.HIGHLIGHT_STROKEWIDTH);return t.opacity=mxConstants.HIGHLIGHT_OPACITY,t},mxConstraintHandler.prototype.intersects=function(t,e,n,i){return mxUtils.intersects(t.bounds,e)},mxConstraintHandler.prototype.destroy=function(){this.reset(),null!=this.resetHandler&&(this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.resetHandler=null),null!=this.mouseleaveHandler&&null!=this.graph.container&&(mxEvent.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)},__mxOutput.mxConstraintHandler=void 0!==mxConstraintHandler?mxConstraintHandler:void 0,mxRubberband.prototype.defaultOpacity=20,mxRubberband.prototype.enabled=!0,mxRubberband.prototype.div=null,mxRubberband.prototype.sharedDiv=null,mxRubberband.prototype.currentX=0,mxRubberband.prototype.currentY=0,mxRubberband.prototype.fadeOut=!1,mxRubberband.prototype.isEnabled=function(){return this.enabled},mxRubberband.prototype.setEnabled=function(t){this.enabled=t},mxRubberband.prototype.isForceRubberbandEvent=function(t){return mxEvent.isAltDown(t.getEvent())&&!mxEvent.isShiftDown(t.getEvent())},mxRubberband.prototype.mouseDown=function(t,e){var n,i;e.isConsumed()||!this.isEnabled()||!this.graph.isEnabled()||null!=e.getState()&&!this.graph.isCellLocked(e.getCell())||mxEvent.isMultiTouchEvent(e.getEvent())||(n=mxUtils.getOffset(this.graph.container),(i=mxUtils.getScrollOrigin(this.graph.container)).x-=n.x,i.y-=n.y,this.start(e.getX()+i.x,e.getY()+i.y),e.consume(!1))},mxRubberband.prototype.start=function(t,e){this.first=new mxPoint(t,e);var n=this.graph.container;function i(t){var t=new mxMouseEvent(t),e=mxUtils.convertPoint(n,t.getX(),t.getY());return t.graphX=e.x,t.graphY=e.y,t}this.dragHandler=mxUtils.bind(this,function(t){this.mouseMove(this.graph,i(t))}),this.dropHandler=mxUtils.bind(this,function(t){this.mouseUp(this.graph,i(t))}),mxClient.IS_FF&&mxEvent.addGestureListeners(document,null,this.dragHandler,this.dropHandler)},mxRubberband.prototype.mouseMove=function(t,e){var n,i,l,s,o;!e.isConsumed()&&null!=this.first&&(i=mxUtils.getScrollOrigin(this.graph.container),n=mxUtils.getOffset(this.graph.container),i.x-=n.x,i.y-=n.y,n=e.getX()+i.x,i=e.getY()+i.y,l=this.first.x-n,s=this.first.y-i,o=this.graph.tolerance,null!=this.div||Math.abs(l)>o||Math.abs(s)>o)&&(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(n,i),e.consume())},mxRubberband.prototype.createShape=function(){null==this.sharedDiv&&(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",mxUtils.setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv);var t=this.sharedDiv;return mxClient.IS_SVG&&(!mxClient.IS_IE||10<=document.documentMode)&&this.fadeOut&&(this.sharedDiv=null),t},mxRubberband.prototype.isActive=function(t,e){return null!=this.div&&"none"!=this.div.style.display},mxRubberband.prototype.mouseUp=function(t,e){var n=this.isActive();this.reset(),n&&(this.execute(e.getEvent()),e.consume())},mxRubberband.prototype.execute=function(t){var e=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(e,t)},mxRubberband.prototype.reset=function(){var t;null!=this.div&&(mxClient.IS_SVG&&(!mxClient.IS_IE||10<=document.documentMode)&&this.fadeOut?(t=this.div,mxUtils.setPrefixedStyle(t.style,"transition","all 0.2s linear"),t.style.pointerEvents="none",t.style.opacity=0,window.setTimeout(function(){t.parentNode.removeChild(t)},200)):this.div.parentNode.removeChild(this.div)),mxEvent.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dragHandler=null,this.dropHandler=null,this.currentX=0,this.currentY=0,this.first=null,this.div=null},mxRubberband.prototype.update=function(t,e){this.currentX=t,this.currentY=e,this.repaint()},mxRubberband.prototype.repaint=function(){var t,e;null!=this.div&&(t=this.currentX-this.graph.panDx,e=this.currentY-this.graph.panDy,this.x=Math.min(this.first.x,t),this.y=Math.min(this.first.y,e),this.width=Math.max(this.first.x,t)-this.x,this.height=Math.max(this.first.y,e)-this.y,this.div.style.left=this.x+0+"px",this.div.style.top=this.y+0+"px",this.div.style.width=Math.max(1,this.width)+"px",this.div.style.height=Math.max(1,this.height)+"px")},mxRubberband.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),null!=this.sharedDiv&&(this.sharedDiv=null))},__mxOutput.mxRubberband=void 0!==mxRubberband?mxRubberband:void 0,mxHandle.prototype.cursor="default",mxHandle.prototype.image=null,mxHandle.prototype.ignoreGrid=!1,mxHandle.prototype.getPosition=function(t){},mxHandle.prototype.setPosition=function(t,e,n){},mxHandle.prototype.execute=function(t){},mxHandle.prototype.copyStyle=function(t){this.graph.setCellStyles(t,this.state.style[t],[this.state.cell])},mxHandle.prototype.processEvent=function(t){var e=this.graph.view.scale,n=this.graph.view.translate,n=new mxPoint(t.getGraphX()/e-n.x,t.getGraphY()/e-n.y),e=(null!=this.shape&&null!=this.shape.bounds&&(n.x-=this.shape.bounds.width/e/4,n.y-=this.shape.bounds.height/e/4),-mxUtils.toRadians(this.getRotation())),i=-mxUtils.toRadians(this.getTotalRotation())-e,n=this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(n,e),this.ignoreGrid||!this.graph.isGridEnabledEvent(t.getEvent())),i));this.setPosition(this.state.getPaintBounds(),n,t),this.redraw()},mxHandle.prototype.positionChanged=function(){null!=this.state.text&&this.state.text.apply(this.state),null!=this.state.shape&&this.graph.cellRenderer.configureShape(this.state),this.graph.cellRenderer.redraw(this.state,!0)},mxHandle.prototype.getRotation=function(){return null!=this.state.shape?this.state.shape.getRotation():0},mxHandle.prototype.getTotalRotation=function(){return null!=this.state.shape?this.state.shape.getShapeRotation():0},mxHandle.prototype.init=function(){var t=this.isHtmlRequired();null!=this.image?(this.shape=new mxImageShape(new mxRectangle(0,0,this.image.width,this.image.height),this.image.src),this.shape.preserveImageAspect=!1):null==this.shape&&(this.shape=this.createShape(t)),this.initShape(t)},mxHandle.prototype.createShape=function(t){return new mxRectangleShape(new mxRectangle(0,0,mxConstants.HANDLE_SIZE,mxConstants.HANDLE_SIZE),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxHandle.prototype.initShape=function(t){t&&this.shape.isHtmlAllowed()?(this.shape.dialect=mxConstants.DIALECT_STRICTHTML,this.shape.init(this.graph.container)):(this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,null!=this.cursor&&this.shape.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.shape.node.style.cursor=this.cursor},mxHandle.prototype.redraw=function(){var t,e,n;null!=this.shape&&null!=this.state.shape&&null!=(t=this.getPosition(this.state.getPaintBounds()))&&(e=mxUtils.toRadians(this.getTotalRotation()),t=this.rotatePoint(this.flipPoint(t),e),e=this.graph.view.scale,n=this.graph.view.translate,this.shape.bounds.x=Math.floor((t.x+n.x)*e-this.shape.bounds.width/2),this.shape.bounds.y=Math.floor((t.y+n.y)*e-this.shape.bounds.height/2),this.shape.redraw())},mxHandle.prototype.isHtmlRequired=function(){return null!=this.state.text&&this.state.text.node.parentNode==this.graph.container},mxHandle.prototype.rotatePoint=function(t,e){var n=this.state.getCellBounds(),n=new mxPoint(n.getCenterX(),n.getCenterY()),i=Math.cos(e),e=Math.sin(e);return mxUtils.getRotatedPoint(t,i,e,n)},mxHandle.prototype.flipPoint=function(t){var e;return null!=this.state.shape&&(e=this.state.getCellBounds(),this.state.shape.flipH&&(t.x=2*e.x+e.width-t.x),this.state.shape.flipV)&&(t.y=2*e.y+e.height-t.y),t},mxHandle.prototype.snapPoint=function(t,e){return e||(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t},mxHandle.prototype.setVisible=function(t){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display=t?"":"none")},mxHandle.prototype.reset=function(){this.setVisible(!0),this.state.style=this.graph.getCellStyle(this.state.cell),this.positionChanged()},mxHandle.prototype.destroy=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null)},__mxOutput.mxHandle=void 0!==mxHandle?mxHandle:void 0,mxVertexHandler.prototype.graph=null,mxVertexHandler.prototype.state=null,mxVertexHandler.prototype.singleSizer=!1,mxVertexHandler.prototype.index=null,mxVertexHandler.prototype.allowHandleBoundsCheck=!0,mxVertexHandler.prototype.handleImage=null,mxVertexHandler.prototype.handlesVisible=!0,mxVertexHandler.prototype.tolerance=0,mxVertexHandler.prototype.rotationEnabled=!1,mxVertexHandler.prototype.parentHighlightEnabled=!1,mxVertexHandler.prototype.rotationRaster=!0,mxVertexHandler.prototype.rotationCursor="crosshair",mxVertexHandler.prototype.livePreview=!1,mxVertexHandler.prototype.movePreviewToFront=!1,mxVertexHandler.prototype.manageSizers=!1,mxVertexHandler.prototype.constrainGroupByChildren=!1,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxVertexHandler.prototype.horizontalOffset=0,mxVertexHandler.prototype.verticalOffset=0,mxVertexHandler.prototype.init=function(){this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=mxConstants.DIALECT_SVG,this.selectionBorder.svgStrokeTolerance=0,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.selectionBorder.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellLocked(this.state.cell)&&this.selectionBorder.setCursor(mxConstants.CURSOR_MOVABLE_VERTEX),this.refresh(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds()},mxVertexHandler.prototype.isHandlesVisible=function(){return!this.graph.isCellLocked(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<=mxGraphHandler.prototype.maxCells)},mxVertexHandler.prototype.refresh=function(){null!=this.selectionBorder&&(this.selectionBorder.strokewidth=this.getSelectionStrokeWidth(),this.selectionBorder.isDashed=this.isSelectionDashed(),this.selectionBorder.stroke=this.getSelectionColor(),this.selectionBorder.redraw()),null!=this.sizers&&this.destroySizers(),this.isHandlesVisible()&&(this.sizers=this.createSizers()),null!=this.customHandles&&this.destroyCustomHandles(),this.isHandlesVisible()&&(this.customHandles=this.createCustomHandles())},mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)},mxVertexHandler.prototype.isConstrainedEvent=function(t){return mxEvent.isShiftDown(t.getEvent())||"fixed"==this.state.style[mxConstants.STYLE_ASPECT]},mxVertexHandler.prototype.isCenteredEvent=function(t,e){return!1},mxVertexHandler.prototype.createCustomHandles=function(){return null},mxVertexHandler.prototype.updateMinBounds=function(){var t,e=this.graph.getChildCells(this.state.cell);0<e.length&&(this.minBounds=this.graph.view.getBounds(e),null!=this.minBounds)&&(e=this.state.view.scale,t=this.state.view.translate,this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=e,this.minBounds.y/=e,this.minBounds.width/=e,this.minBounds.height/=e,this.x0=this.state.x/e-t.x,this.y0=this.state.y/e-t.y)},mxVertexHandler.prototype.getSelectionBounds=function(t){return new mxRectangle(Math.round(t.x),Math.round(t.y),Math.round(t.width),Math.round(t.height))},mxVertexHandler.prototype.createParentHighlightShape=function(t){return this.createSelectionShape(t)},mxVertexHandler.prototype.createSelectionShape=function(t){t=new mxRectangleShape(mxRectangle.fromRectangle(t),null,this.getSelectionColor());return t.strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t},mxVertexHandler.prototype.getSelectionColor=function(){return this.graph.isCellEditable(this.state.cell)?mxConstants.VERTEX_SELECTION_COLOR:mxConstants.LOCKED_HANDLE_FILLCOLOR},mxVertexHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.VERTEX_SELECTION_STROKEWIDTH},mxVertexHandler.prototype.isSelectionDashed=function(){return mxConstants.VERTEX_SELECTION_DASHED},mxVertexHandler.prototype.createSizer=function(t,e,n,i){n=new mxRectangle(0,0,n=n||mxConstants.HANDLE_SIZE,n),n=this.createSizerShape(n,e,i,this.handleImage);return n.isHtmlAllowed()&&null!=this.state.text&&this.state.text.node.parentNode==this.graph.container?(--n.bounds.height,--n.bounds.width,n.dialect=mxConstants.DIALECT_STRICTHTML,n.init(this.graph.container)):(n.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,n.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(n.node,this.graph,this.state),this.graph.isEnabled()&&n.setCursor(t),this.isSizerVisible(e)||(n.visible=!1),n},mxVertexHandler.prototype.isSizerVisible=function(t){return!0},mxVertexHandler.prototype.createSizerShape=function(t,e,n,i){return null!=i?((i=new mxImageShape(t=new mxRectangle(t.x,t.y,i.width,i.height),i.src)).preserveImageAspect=!1,i):new(e==mxEvent.ROTATION_HANDLE?mxEllipse:mxRectangleShape)(t,n||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxVertexHandler.prototype.moveSizerTo=function(t,e,n){null!=t&&(t.bounds.x=Math.floor(e-t.bounds.width/2),t.bounds.y=Math.floor(n-t.bounds.height/2),null!=t.node)&&"none"!=t.node.style.display&&t.redraw()},mxVertexHandler.prototype.getHandleForEvent=function(n){var t=mxEvent.isMouseEvent(n.getEvent())?1:this.tolerance,i=this.allowHandleBoundsCheck&&(mxClient.IS_IE||0<t)?new mxRectangle(n.getGraphX()-t,n.getGraphY()-t,2*t,2*t):null,e=mxUtils.bind(this,function(t){var e=null!=t&&t.constructor!=mxImageShape&&this.allowHandleBoundsCheck?t.strokewidth+t.svgStrokeTolerance:null,e=null!=e?new mxRectangle(n.getGraphX()-Math.floor(e/2),n.getGraphY()-Math.floor(e/2),e,e):i;return null!=t&&(n.isSource(t)||t.intersectsRectangle(e))});if(e(this.rotationShape))return mxEvent.ROTATION_HANDLE;if(e(this.labelShape))return mxEvent.LABEL_HANDLE;if(null!=this.sizers)for(var l=0;l<this.sizers.length;l++)if(e(this.sizers[l]))return l;if(null!=this.customHandles&&this.isCustomHandleEvent(n))for(l=this.customHandles.length-1;0<=l;l--)if(null!=this.customHandles[l]&&e(this.customHandles[l].shape))return mxEvent.CUSTOM_HANDLE-l;return null},mxVertexHandler.prototype.isCustomHandleEvent=function(t){return!0},mxVertexHandler.prototype.mouseDown=function(t,e){var n;e.isConsumed()||!this.graph.isEnabled()||mxEvent.isAltDown(e.getEvent())&&mxEvent.isShiftDown(e.getEvent())||null!=(n=this.getHandleForEvent(e))&&(this.start(e.getGraphX(),e.getGraphY(),n),e.consume())},mxVertexHandler.prototype.isLivePreviewBorder=function(){return null!=this.state.shape&&null==this.state.shape.fill&&null==this.state.shape.stroke},mxVertexHandler.prototype.start=function(t,e,n){if(null!=this.selectionBorder)if(this.livePreviewActive=this.livePreview&&0==this.graph.model.getChildCount(this.state.cell),this.inTolerance=!0,this.childOffsetX=0,this.childOffsetY=0,this.index=n,this.startX=t,this.startY=e,this.index<=mxEvent.CUSTOM_HANDLE&&this.isGhostPreview())this.ghostPreview=this.createGhostPreview();else{var t=this.state.view.graph.model,e=t.getParent(this.state.cell);if(this.state.view.currentRoot!=e&&(t.isVertex(e)||t.isEdge(e))&&(this.parentState=this.state.view.graph.view.getState(e)),this.selectionBorder.node.style.display=n==mxEvent.ROTATION_HANDLE?"inline":"none",this.livePreviewActive&&!this.isLivePreviewBorder()||(this.preview=this.createSelectionShape(this.bounds),mxClient.IS_SVG&&0!=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")||null==this.state.text||this.state.text.node.parentNode!=this.graph.container?(this.preview.dialect=mxConstants.DIALECT_SVG,this.preview.init(this.graph.view.getOverlayPane())):(this.preview.dialect=mxConstants.DIALECT_STRICTHTML,this.preview.init(this.graph.container))),n==mxEvent.ROTATION_HANDLE&&(e=(t=this.getRotationHandlePosition()).x-this.state.getCenterX(),t=t.y-this.state.getCenterY(),this.startAngle=0!=e?180*Math.atan(t/e)/Math.PI+90:0,this.startDist=Math.sqrt(e*e+t*t)),this.livePreviewActive){this.hideSizers(),n==mxEvent.ROTATION_HANDLE?this.rotationShape.node.style.display="":n==mxEvent.LABEL_HANDLE?this.labelShape.node.style.display="":null!=this.sizers&&null!=this.sizers[n]?this.sizers[n].node.style.display="":n<=mxEvent.CUSTOM_HANDLE&&null!=this.customHandles&&null!=this.customHandles[mxEvent.CUSTOM_HANDLE-n]&&this.customHandles[mxEvent.CUSTOM_HANDLE-n].setVisible(!0);var i=this.graph.getEdges(this.state.cell);this.edgeHandlers=[];for(var l=0;l<i.length;l++){var s=this.graph.selectionCellsHandler.getHandler(i[l]);null!=s&&this.edgeHandlers.push(s)}}}},mxVertexHandler.prototype.createGhostPreview=function(){var t=this.graph.cellRenderer.createShape(this.state);return t.init(this.graph.view.getOverlayPane()),t.scale=this.state.view.scale,t.bounds=this.bounds,t.outline=!0,t},mxVertexHandler.prototype.setHandlesVisible=function(t){if(this.handlesVisible=t,null!=this.sizers)for(var e=0;e<this.sizers.length;e++)this.sizers[e].node.style.display=t?"":"none";if(null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)null!=this.customHandles[e]&&this.customHandles[e].setVisible(t)},mxVertexHandler.prototype.hideSizers=function(){this.setHandlesVisible(!1)},mxVertexHandler.prototype.checkTolerance=function(t){this.inTolerance&&null!=this.startX&&null!=this.startY&&(mxEvent.isMouseEvent(t.getEvent())||Math.abs(t.getGraphX()-this.startX)>this.graph.tolerance||Math.abs(t.getGraphY()-this.startY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxVertexHandler.prototype.updateHint=function(t){},mxVertexHandler.prototype.removeHint=function(){},mxVertexHandler.prototype.roundAngle=function(t){return Math.round(10*t)/10},mxVertexHandler.prototype.roundLength=function(t){return Math.round(100*t)/100},mxVertexHandler.prototype.mouseMove=function(t,e){e.isConsumed()||null==this.index?this.graph.isMouseDown||null==this.getHandleForEvent(e)||e.consume(!1):(this.checkTolerance(e),this.inTolerance||(this.index<=mxEvent.CUSTOM_HANDLE?null!=this.customHandles&&null!=this.customHandles[mxEvent.CUSTOM_HANDLE-this.index]&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(e),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].active=!0,null!=this.ghostPreview?(this.ghostPreview.apply(this.state),this.ghostPreview.strokewidth=this.getSelectionStrokeWidth()/this.ghostPreview.scale/this.ghostPreview.scale,this.ghostPreview.isDashed=this.isSelectionDashed(),this.ghostPreview.stroke=this.getSelectionColor(),this.ghostPreview.redraw(),null!=this.selectionBounds&&(this.selectionBorder.node.style.display="none")):(this.movePreviewToFront&&this.moveToFront(),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].positionChanged())):this.index==mxEvent.LABEL_HANDLE?this.moveLabel(e):(this.index==mxEvent.ROTATION_HANDLE?this.rotateVertex(e):this.resizeVertex(e),this.updateHint(e))),e.consume())},mxVertexHandler.prototype.isGhostPreview=function(){return 0<this.state.view.graph.model.getChildCount(this.state.cell)},mxVertexHandler.prototype.moveLabel=function(t){var e=new mxPoint(t.getGraphX(),t.getGraphY()),n=this.graph.view.translate,i=this.graph.view.scale,t=(this.graph.isGridEnabledEvent(t.getEvent())&&(e.x=(this.graph.snap(e.x/i-n.x)+n.x)*i,e.y=(this.graph.snap(e.y/i-n.y)+n.y)*i),null!=this.rotationShape?this.sizers.length-2:this.sizers.length-1);this.moveSizerTo(this.sizers[t],e.x,e.y)},mxVertexHandler.prototype.rotateVertex=function(t){var e=new mxPoint(t.getGraphX(),t.getGraphY()),n=this.state.x+this.state.width/2-e.x,i=this.state.y+this.state.height/2-e.y;this.currentAlpha=0!=n?180*Math.atan(i/n)/Math.PI+90:i<0?180:0,0<n&&(this.currentAlpha-=180),this.currentAlpha-=this.startAngle,this.rotationRaster&&this.graph.isGridEnabledEvent(t.getEvent())?(n=e.x-this.state.getCenterX(),i=e.y-this.state.getCenterY(),e=(t=Math.sqrt(n*n+i*i))-this.startDist<2?15:t-this.startDist<25?5:1,this.currentAlpha=Math.round(this.currentAlpha/e)*e):this.currentAlpha=this.roundAngle(this.currentAlpha),this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreviewActive&&this.redrawHandles()},mxVertexHandler.prototype.resizeVertex=function(t){var e=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),n=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),i=new mxPoint(t.getGraphX(),t.getGraphY()),l=this.graph.view.translate,s=this.graph.view.scale,o=Math.cos(-n),r=Math.sin(-n),a=i.x-this.startX,i=i.y-this.startY,h=r*a+o*i,h=(a=o*a-r*i,i=h,this.graph.getCellGeometry(this.state.cell)),u=(this.unscaledBounds=this.union(h,a/s,i/s,this.index,this.graph.isGridEnabledEvent(t.getEvent()),1,new mxPoint(0,0),this.isConstrainedEvent(t),this.isCenteredEvent(this.state,t)),h.relative||(null!=(p=this.graph.getMaximumGraphBounds())&&null!=this.parentState&&((p=mxRectangle.fromRectangle(p)).x-=(this.parentState.x-l.x*s)/s,p.y-=(this.parentState.y-l.y*s)/s),this.graph.isConstrainChild(this.state.cell)&&null!=(d=this.graph.getCellContainmentArea(this.state.cell))&&(0<(u=this.graph.getOverlap(this.state.cell))&&((d=mxRectangle.fromRectangle(d)).x-=d.width*u,d.y-=d.height*u,d.width+=2*d.width*u,d.height+=2*d.height*u),null==p?p=d:(p=mxRectangle.fromRectangle(p)).intersect(d)),null!=p&&(this.unscaledBounds.x<p.x&&(this.unscaledBounds.width-=p.x-this.unscaledBounds.x,this.unscaledBounds.x=p.x),this.unscaledBounds.y<p.y&&(this.unscaledBounds.height-=p.y-this.unscaledBounds.y,this.unscaledBounds.y=p.y),this.unscaledBounds.x+this.unscaledBounds.width>p.x+p.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-p.x-p.width),this.unscaledBounds.y+this.unscaledBounds.height>p.y+p.height)&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-p.y-p.height)),this.bounds),d=(this.bounds=new mxRectangle((null!=this.parentState?this.parentState.x:l.x*s)+this.unscaledBounds.x*s,(null!=this.parentState?this.parentState.y:l.y*s)+this.unscaledBounds.y*s,this.unscaledBounds.width*s,this.unscaledBounds.height*s),h.relative&&null!=this.parentState&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),o=Math.cos(n),r=Math.sin(n),new mxPoint(this.bounds.getCenterX(),this.bounds.getCenterY())),p=o*(a=d.x-e.x)-r*(i=d.y-e.y)-a,l=r*a+o*i-i,h=this.bounds.x-this.state.x,n=this.bounds.y-this.state.y,d=o*h-r*n,e=r*h+o*n;this.bounds.x+=p,this.bounds.y+=l,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+p/s),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+l/s),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),this.graph.isCellCollapsed(this.state.cell)||0==p&&0==l?(this.childOffsetX=0,this.childOffsetY=0):(this.childOffsetX=this.state.x-this.bounds.x+d,this.childOffsetY=this.state.y-this.bounds.y+e),u.equals(this.bounds)||(this.livePreviewActive&&this.updateLivePreview(t),null!=this.preview?this.drawPreview():this.updateParentHighlight())},mxVertexHandler.prototype.updateLivePreview=function(t){var e=this.graph.view.scale,n=this.graph.view.translate,i=this.state.clone(),e=(this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new mxPoint(this.state.x/e-n.x,this.state.y/e-n.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height,this.state.absoluteOffset),n=(new mxPoint(e.x,e.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0,this.graph.getCellGeometry(this.state.cell));null!=n&&(null==(e=n.offset||this.EMPTY_POINT)||n.relative||(this.state.absoluteOffset.x=this.state.view.scale*e.x,this.state.absoluteOffset.y=this.state.view.scale*e.y),this.state.view.updateVertexLabelOffset(this.state)),this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.movePreviewToFront&&this.moveToFront(),null!=this.state.control&&null!=this.state.control.node&&(this.state.control.node.style.visibility="hidden"),this.state.setState(i)},mxVertexHandler.prototype.moveToFront=function(){(null!=this.state.text&&null!=this.state.text.node&&null!=this.state.text.node.nextSibling||null!=this.state.shape&&null!=this.state.shape.node&&null!=this.state.shape.node.nextSibling&&(null==this.state.text||this.state.shape.node.nextSibling!=this.state.text.node))&&(null!=this.state.shape&&null!=this.state.shape.node&&this.state.shape.node.parentNode.appendChild(this.state.shape.node),null!=this.state.text)&&null!=this.state.text.node&&this.state.text.node.parentNode.appendChild(this.state.text.node)},mxVertexHandler.prototype.mouseUp=function(t,e){if(null!=this.index&&null!=this.state){var n,i,l,s,o,r,a,h,u,d,p,m=new mxPoint(e.getGraphX(),e.getGraphY()),c=this.index;(this.index=null)==this.ghostPreview&&this.state.view.invalidate(this.state.cell,!1,!1),this.graph.getModel().beginUpdate();try{c<=mxEvent.CUSTOM_HANDLE?null!=this.customHandles&&null!=this.customHandles[mxEvent.CUSTOM_HANDLE-c]&&(n=this.state.view.graph.getCellStyle(this.state.cell),this.customHandles[mxEvent.CUSTOM_HANDLE-c].active=!1,this.customHandles[mxEvent.CUSTOM_HANDLE-c].execute(e),null!=this.customHandles)&&null!=this.customHandles[mxEvent.CUSTOM_HANDLE-c]&&(this.state.style=n,this.customHandles[mxEvent.CUSTOM_HANDLE-c].positionChanged()):c==mxEvent.ROTATION_HANDLE?null!=this.currentAlpha?0!=(i=this.currentAlpha-(this.state.style[mxConstants.STYLE_ROTATION]||0))&&this.rotateCell(this.state.cell,i):this.rotateClick():(l=this.graph.isGridEnabledEvent(e.getEvent()),s=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),o=Math.cos(-s),a=(r=Math.sin(-s))*(h=m.x-this.startX)+o*(u=m.y-this.startY),h=o*h-r*u,u=a,d=this.graph.view.scale,p=this.isRecursiveResize(this.state,e),this.resizeCell(this.state.cell,this.roundLength(h/d),this.roundLength(u/d),c,l,this.isConstrainedEvent(e),p))}finally{this.graph.getModel().endUpdate()}this.state.invalid&&this.state.view.validate(),e.consume(),this.reset(),this.redrawHandles()}},mxVertexHandler.prototype.isRecursiveResize=function(t,e){return this.graph.isRecursiveResize(this.state)},mxVertexHandler.prototype.rotateClick=function(){},mxVertexHandler.prototype.rotateCell=function(t,e,n){if(0!=e){var i=this.graph.getModel();if(i.isVertex(t)||i.isEdge(t)){i.isEdge(t)||(l=(this.graph.getCurrentCellStyle(t)[mxConstants.STYLE_ROTATION]||0)+e,this.graph.setCellStyles(mxConstants.STYLE_ROTATION,l,[t]));var l=this.graph.getCellGeometry(t);if(null!=l){var s=this.graph.getCellGeometry(n);if(null==s||i.isEdge(n)||((l=l.clone()).rotate(e,new mxPoint(s.width/2,s.height/2)),i.setGeometry(t,l)),i.isVertex(t)&&!l.relative||i.isEdge(t))for(var o=i.getChildCount(t),r=0;r<o;r++)this.rotateCell(i.getChildAt(t,r),e,t)}}}},mxVertexHandler.prototype.reset=function(){if(null!=this.sizers&&null!=this.index&&null!=this.sizers[this.index]&&"none"==this.sizers[this.index].node.style.display&&(this.sizers[this.index].node.style.display=""),this.currentAlpha=null,this.inTolerance=null,(this.index=null)!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.livePreviewActive&&null!=this.sizers){for(var t=0;t<this.sizers.length;t++)null!=this.sizers[t]&&(this.sizers[t].node.style.display="");null!=this.state.control&&null!=this.state.control.node&&(this.state.control.node.style.visibility="")}if(null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)null!=this.customHandles[t]&&(this.customHandles[t].active?(this.customHandles[t].active=!1,this.customHandles[t].reset()):this.customHandles[t].setVisible(!0));null!=this.selectionBorder&&(this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview()),this.removeHint(),this.redrawHandles(),this.edgeHandlers=null,this.handlesVisible=!0,this.unscaledBounds=null,this.livePreviewActive=null},mxVertexHandler.prototype.resizeCell=function(t,e,n,i,l,s,o){var r,a,h,u=this.graph.model.getGeometry(t);null!=u&&(i==mxEvent.LABEL_HANDLE?(i=-mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),r=1==mxUtils.getValue(this.state.style,mxConstants.STYLE_HORIZONTAL,!0),a=Math.cos(i),i=Math.sin(i),h=this.graph.view.scale,a=mxUtils.getRotatedPoint(new mxPoint(Math.round((this.labelShape.bounds.getCenterX()-this.startX)/h),Math.round((this.labelShape.bounds.getCenterY()-this.startY)/h)),a,i),r||(a.y=-a.y),null==(u=u.clone()).offset?u.offset=a:(u.offset.x+=a.x,u.offset.y+=a.y),this.graph.model.setGeometry(t,u)):null!=this.unscaledBounds&&(h=this.graph.view.scale,0==this.childOffsetX&&0==this.childOffsetY||this.moveChildren(t,Math.round(this.childOffsetX/h),Math.round(this.childOffsetY/h)),this.graph.resizeCell(t,this.unscaledBounds,o)))},mxVertexHandler.prototype.moveChildren=function(t,e,n){for(var i=this.graph.getModel(),l=i.getChildCount(t),s=0;s<l;s++){var o=i.getChildAt(t,s),r=this.graph.getCellGeometry(o);null!=r&&((r=r.clone()).translate(e,n),i.setGeometry(o,r))}},mxVertexHandler.prototype.union=function(t,e,n,i,l,s,o,r,a){var h,u,d,p,m,c,g;return l=(null==l||l)&&this.graph.gridEnabled,this.singleSizer?(h=t.x+t.width+e,u=t.y+t.height+n,l&&(h=this.graph.snap(h/s)*s,u=this.graph.snap(u/s)*s),(d=new mxRectangle(t.x,t.y,0,0)).add(new mxRectangle(h,u,0,0)),d):(h=t.width,u=t.height,p=(d=t.x-o.x*s)+h,m=(t=t.y-o.y*s)+u,c=d+h/2,g=t+u/2,4<i?(m+=n,m=l?this.graph.snap(m/s)*s:Math.round(m/s)*s):i<3&&(t+=n,t=l?this.graph.snap(t/s)*s:Math.round(t/s)*s),0==i||3==i||5==i?(d+=e,d=l?this.graph.snap(d/s)*s:Math.round(d/s)*s):2!=i&&4!=i&&7!=i||(p+=e,p=l?this.graph.snap(p/s)*s:Math.round(p/s)*s),n=p-d,e=m-t,r&&null!=(l=this.graph.getCellGeometry(this.state.cell))&&(r=l.width/l.height,1==i||2==i||7==i||6==i?n=e*r:e=n/r,0==i)&&(d=p-n,t=m-e),a&&(d+=l=c-(d+(n+=n-h)/2),t+=r=g-(t+(e+=e-u)/2),p+=l,m+=r),n<0&&(d+=n,n=Math.abs(n)),e<0&&(t+=e,e=Math.abs(e)),i=new mxRectangle(d+o.x*s,t+o.y*s,n,e),null!=this.minBounds&&(i.width=Math.max(i.width,this.minBounds.x*s+this.minBounds.width*s+Math.max(0,this.x0*s-i.x)),i.height=Math.max(i.height,this.minBounds.y*s+this.minBounds.height*s+Math.max(0,this.y0*s-i.y))),i)},mxVertexHandler.prototype.redraw=function(t){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview(),t||this.redrawHandles()},mxVertexHandler.prototype.getHandlePadding=function(){var t=new mxPoint(0,0),e=this.tolerance;return null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]&&(this.bounds.width<2*this.sizers[0].bounds.width+2*e||this.bounds.height<2*this.sizers[0].bounds.height+2*e)&&(t.x=this.sizers[0].bounds.width+(e/=2),t.y=this.sizers[0].bounds.height+e),t},mxVertexHandler.prototype.getSizerBounds=function(){return this.bounds},mxVertexHandler.prototype.redrawHandles=function(){var t,e,n,i,l,s,o,r,a,h,u=this.getSizerBounds(),d=this.tolerance;if(this.horizontalOffset=0,this.verticalOffset=0,null!=this.customHandles)for(var p,m=0;m<this.customHandles.length;m++)null!=this.customHandles[m]&&(p=this.customHandles[m].shape.node.style.display,this.customHandles[m].redraw(),this.customHandles[m].shape.node.style.display=p,this.customHandles[m].shape.node.style.visibility=this.handlesVisible&&this.isHandlesVisible()&&this.isCustomHandleVisible(this.customHandles[m])&&!this.graph.isEditing()?"":"hidden");if(null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]&&(null==this.index&&this.manageSizers&&8<=this.sizers.length&&(t=this.getHandlePadding(),this.horizontalOffset=t.x,this.verticalOffset=t.y,0==this.horizontalOffset&&0==this.verticalOffset||((u=new mxRectangle(u.x,u.y,u.width,u.height)).x-=this.horizontalOffset/2,u.width+=this.horizontalOffset,u.y-=this.verticalOffset/2,u.height+=this.verticalOffset),8<=this.sizers.length)&&(u.width<2*this.sizers[0].bounds.width+2*d||u.height<2*this.sizers[0].bounds.height+2*d?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):this.handlesVisible&&(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display="")),t=u.x+u.width,d=u.y+u.height,this.singleSizer?this.moveSizerTo(this.sizers[0],t,d):(e=u.x+u.width/2,n=u.y+u.height/2,8<=this.sizers.length?(i=["nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize"],s=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),o=Math.cos(s),r=Math.sin(s),l=Math.round(4*s/Math.PI),a=new mxPoint(u.getCenterX(),u.getCenterY()),h=mxUtils.getRotatedPoint(new mxPoint(u.x,u.y),o,r,a),this.moveSizerTo(this.sizers[0],h.x,h.y),this.sizers[0].setCursor(i[mxUtils.mod(0+l,i.length)]),h.x=e,h.y=u.y,h=mxUtils.getRotatedPoint(h,o,r,a),this.moveSizerTo(this.sizers[1],h.x,h.y),this.sizers[1].setCursor(i[mxUtils.mod(1+l,i.length)]),h.x=t,h.y=u.y,h=mxUtils.getRotatedPoint(h,o,r,a),this.moveSizerTo(this.sizers[2],h.x,h.y),this.sizers[2].setCursor(i[mxUtils.mod(2+l,i.length)]),h.x=u.x,h.y=n,h=mxUtils.getRotatedPoint(h,o,r,a),this.moveSizerTo(this.sizers[3],h.x,h.y),this.sizers[3].setCursor(i[mxUtils.mod(7+l,i.length)]),h.x=t,h.y=n,h=mxUtils.getRotatedPoint(h,o,r,a),this.moveSizerTo(this.sizers[4],h.x,h.y),this.sizers[4].setCursor(i[mxUtils.mod(3+l,i.length)]),h.x=u.x,h.y=d,h=mxUtils.getRotatedPoint(h,o,r,a),this.moveSizerTo(this.sizers[5],h.x,h.y),this.sizers[5].setCursor(i[mxUtils.mod(6+l,i.length)]),h.x=e,h.y=d,h=mxUtils.getRotatedPoint(h,o,r,a),this.moveSizerTo(this.sizers[6],h.x,h.y),this.sizers[6].setCursor(i[mxUtils.mod(5+l,i.length)]),h.x=t,h.y=d,h=mxUtils.getRotatedPoint(h,o,r,a),this.moveSizerTo(this.sizers[7],h.x,h.y),this.sizers[7].setCursor(i[mxUtils.mod(4+l,i.length)]),u=1==mxUtils.getValue(this.state.style,mxConstants.STYLE_HORIZONTAL,!0),h.x=e+this.state.absoluteOffset.x,h.y=n+(u?1:-1)*this.state.absoluteOffset.y,h=mxUtils.getRotatedPoint(h,o,r,a),this.moveSizerTo(this.sizers[8],h.x,h.y)):2<=this.state.width&&2<=this.state.height&&null!=this.state.absoluteOffset?this.moveSizerTo(this.sizers[0],e+this.state.absoluteOffset.x,n+this.state.absoluteOffset.y):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y))),null!=this.sizers)for(m=0;m<this.sizers.length;m++)this.sizers[m].node.style.visibility=this.isHandlesVisible()?"":"hidden";if(null!=this.rotationShape&&(s=mxUtils.toRadians(null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0"),o=Math.cos(s),r=Math.sin(s),a=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),h=mxUtils.getRotatedPoint(this.getRotationHandlePosition(),o,r,a),null!=this.rotationShape.node)&&(this.moveSizerTo(this.rotationShape,h.x,h.y),this.rotationShape.node.style.visibility=!this.state.view.graph.isEditing()&&this.handlesVisible&&this.isHandlesVisible()&&this.isRotationHandleVisible()?"":"hidden"),null!=this.selectionBorder&&(this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")),null!=this.edgeHandlers)for(m=0;m<this.edgeHandlers.length;m++)this.edgeHandlers[m].redraw()},mxVertexHandler.prototype.isCustomHandleVisible=function(t){return 1==this.state.view.graph.getSelectionCount()},mxVertexHandler.prototype.getRotationHandlePosition=function(){return new mxPoint(this.bounds.x+this.bounds.width/2,this.bounds.y+this.rotationHandleVSpacing)},mxVertexHandler.prototype.isParentHighlightVisible=function(){return!this.graph.isCellSelected(this.graph.model.getParent(this.state.cell))},mxVertexHandler.prototype.destroyParentHighlight=function(){null!=this.parentHighlight.state&&(delete this.parentHighlight.state.parentHighlight,delete this.parentHighlight.state),this.parentHighlight.destroy(),this.parentHighlight=null},mxVertexHandler.prototype.updateParentHighlight=function(){var t,e,n,i;this.isDestroyed()||(t=this.isParentHighlightVisible(),e=this.graph.model.getParent(this.state.cell),n=this.graph.view.getState(e),null!=this.parentHighlight?this.graph.model.isVertex(e)&&t?(i=this.parentHighlight.bounds,null==n||i.x==n.x&&i.y==n.y&&i.width==n.width&&i.height==n.height||(this.parentHighlight.bounds=mxRectangle.fromRectangle(n),this.parentHighlight.redraw())):this.destroyParentHighlight():this.parentHighlightEnabled&&t&&this.graph.model.isVertex(e)&&null!=n&&null==n.parentHighlight&&(this.parentHighlight=this.createParentHighlightShape(n),this.parentHighlight.dialect=mxConstants.DIALECT_SVG,this.parentHighlight.svgStrokeTolerance=0,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(n.style[mxConstants.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()),this.parentHighlight.redraw(),n.parentHighlight=this.parentHighlight,this.parentHighlight.state=n))},mxVertexHandler.prototype.drawPreview=function(){null!=this.preview&&(this.preview.bounds=this.bounds,this.preview.node.parentNode==this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.preview.redraw()),this.selectionBorder.bounds=this.getSelectionBorderBounds(),this.selectionBorder.redraw(),this.updateParentHighlight()},mxVertexHandler.prototype.getSelectionBorderBounds=function(){return this.bounds},mxVertexHandler.prototype.createSizers=function(){var t,e=this.graph.isCellResizable(this.state.cell)&&!this.graph.isCellLocked(this.state.cell),n=[];return e||this.graph.isLabelMovable(this.state.cell)&&2<=this.state.width&&2<=this.state.height?(t=0,e&&(this.singleSizer||(n.push(this.createSizer("nw-resize",t++)),n.push(this.createSizer("n-resize",t++)),n.push(this.createSizer("ne-resize",t++)),n.push(this.createSizer("w-resize",t++)),n.push(this.createSizer("e-resize",t++)),n.push(this.createSizer("sw-resize",t++)),n.push(this.createSizer("s-resize",t++))),n.push(this.createSizer("se-resize",t++))),null==(t=this.graph.model.getGeometry(this.state.cell))||t.relative||this.graph.isSwimlane(this.state.cell)||!this.graph.isLabelMovable(this.state.cell)||(this.labelShape=this.createSizer(mxConstants.CURSOR_LABEL_HANDLE,mxEvent.LABEL_HANDLE,mxConstants.LABEL_HANDLE_SIZE,mxConstants.LABEL_HANDLE_FILLCOLOR),n.push(this.labelShape))):this.graph.isCellMovable(this.state.cell)&&!e&&this.state.width<2&&this.state.height<2&&(this.labelShape=this.createSizer(mxConstants.CURSOR_MOVABLE_VERTEX,mxEvent.LABEL_HANDLE,null,mxConstants.LABEL_HANDLE_FILLCOLOR),n.push(this.labelShape)),null==this.rotationShape&&(this.rotationShape=this.createSizer(this.rotationCursor,mxEvent.ROTATION_HANDLE,mxConstants.HANDLE_SIZE+3,mxConstants.HANDLE_FILLCOLOR),n.push(this.rotationShape)),n},mxVertexHandler.prototype.destroyCustomHandles=function(){if(null!=this.customHandles){for(var t=0;t<this.customHandles.length;t++)null!=this.customHandles[t]&&this.customHandles[t].destroy();this.customHandles=null}},mxVertexHandler.prototype.destroySizers=function(){if(null!=this.sizers){for(var t=0;t<this.sizers.length;t++)this.sizers[t].destroy();this.sizers=null,this.rotationShape=null}},mxVertexHandler.prototype.isDestroyed=function(){return null==this.selectionBorder},mxVertexHandler.prototype.destroy=function(){null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),null!=this.parentHighlight&&this.destroyParentHighlight(),this.labelShape=null,this.removeHint(),this.destroySizers(),this.destroyCustomHandles()},__mxOutput.mxVertexHandler=void 0!==mxVertexHandler?mxVertexHandler:void 0,mxEdgeHandler.prototype.graph=null,mxEdgeHandler.prototype.state=null,mxEdgeHandler.prototype.marker=null,mxEdgeHandler.prototype.constraintHandler=null,mxEdgeHandler.prototype.error=null,mxEdgeHandler.prototype.shape=null,mxEdgeHandler.prototype.bends=null,mxEdgeHandler.prototype.labelShape=null,mxEdgeHandler.prototype.cloneEnabled=!0,mxEdgeHandler.prototype.addEnabled=!1,mxEdgeHandler.prototype.removeEnabled=!1,mxEdgeHandler.prototype.dblClickRemoveEnabled=!1,mxEdgeHandler.prototype.mergeRemoveEnabled=!1,mxEdgeHandler.prototype.straightRemoveEnabled=!1,mxEdgeHandler.prototype.virtualBendsEnabled=!1,mxEdgeHandler.prototype.virtualBendOpacity=40,mxEdgeHandler.prototype.parentHighlightEnabled=!1,mxEdgeHandler.prototype.preferHtml=!1,mxEdgeHandler.prototype.allowHandleBoundsCheck=!0,mxEdgeHandler.prototype.snapToTerminals=!1,mxEdgeHandler.prototype.handleImage=null,mxEdgeHandler.prototype.tolerance=0,mxEdgeHandler.prototype.outlineConnect=!1,mxEdgeHandler.prototype.manageLabelHandle=!1,mxEdgeHandler.prototype.init=function(){var t;this.graph=this.state.view.graph,this.marker=this.createMarker(),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.svgStrokeTolerance=0,this.shape.pointerEvents=!1,mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.shape.setCursor(mxConstants.CURSOR_MOVABLE_EDGE),this.preferHtml=null!=this.state.text&&this.state.text.node.parentNode==this.graph.container,this.preferHtml||(null!=(t=this.state.getVisibleTerminalState(!0))&&(this.preferHtml=null!=t.text&&t.text.node.parentNode==this.graph.container),this.preferHtml)||null!=(t=this.state.getVisibleTerminalState(!1))&&(this.preferHtml=null!=t.text&&t.text.node.parentNode==this.graph.container),this.updateParentHighlight(),this.refresh(),this.redraw()},mxEdgeHandler.prototype.createLabelShape=function(){var t=this.createLabelHandleShape();return this.initBend(t),t},mxEdgeHandler.prototype.getConstraintHandler=function(){return null==this.constraintHandler&&(this.constraintHandler=this.createConstraintHandler()),this.constraintHandler},mxEdgeHandler.prototype.createConstraintHandler=function(){return new mxConstraintHandler(this.graph)},mxEdgeHandler.prototype.isParentHighlightVisible=mxVertexHandler.prototype.isParentHighlightVisible,mxEdgeHandler.prototype.destroyParentHighlight=mxVertexHandler.prototype.destroyParentHighlight,mxEdgeHandler.prototype.updateParentHighlight=mxVertexHandler.prototype.updateParentHighlight,mxEdgeHandler.prototype.createCustomHandles=function(){return null},mxEdgeHandler.prototype.isVirtualBendsEnabled=function(t){return this.virtualBendsEnabled&&(null==this.state.style[mxConstants.STYLE_EDGE]||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.NONE||1==this.state.style[mxConstants.STYLE_NOEDGESTYLE])&&"arrow"!=mxUtils.getValue(this.state.style,mxConstants.STYLE_SHAPE,null)},mxEdgeHandler.prototype.isCellEnabled=function(t){return!0},mxEdgeHandler.prototype.isAddPointEvent=function(t){return mxEvent.isShiftDown(t)},mxEdgeHandler.prototype.isRemovePointEvent=function(t){return mxEvent.isShiftDown(t)},mxEdgeHandler.prototype.getSelectionPoints=function(t){return t.absolutePoints},mxEdgeHandler.prototype.createParentHighlightShape=function(t){t=new mxRectangleShape(mxRectangle.fromRectangle(t),null,this.getSelectionColor());return t.strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t},mxEdgeHandler.prototype.createSelectionShape=function(t){var e=new this.state.shape.constructor;return e.outline=!0,e.apply(this.state),e.isDashed=this.isSelectionDashed(),e.stroke=this.getSelectionColor(),e.isShadow=!1,e},mxEdgeHandler.prototype.getSelectionColor=function(){return this.graph.isCellEditable(this.state.cell)?mxConstants.EDGE_SELECTION_COLOR:mxConstants.LOCKED_HANDLE_FILLCOLOR},mxEdgeHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.EDGE_SELECTION_STROKEWIDTH},mxEdgeHandler.prototype.isSelectionDashed=function(){return mxConstants.EDGE_SELECTION_DASHED},mxEdgeHandler.prototype.isConnectableCell=function(t){return!0},mxEdgeHandler.prototype.getCellAt=function(t,e){return this.outlineConnect?null:this.graph.getCellAt(t,e)},mxEdgeHandler.prototype.createMarker=function(){var t=new mxCellMarker(this.graph),i=this;return t.getCell=function(t){var e=mxCellMarker.prototype.getCell.apply(this,arguments),n=(null==(e=e!=i.state.cell&&null!=e||null==i.currentPoint?e:i.graph.getCellAt(i.currentPoint.x,i.currentPoint.y))||this.graph.isCellConnectable(e)||(n=this.graph.getModel().getParent(e),this.graph.getModel().isVertex(n)&&this.graph.isCellConnectable(n)&&(e=n)),i.graph.getModel());return(this.graph.isSwimlane(e)&&null!=i.currentPoint&&this.graph.hitsSwimlaneContent(e,i.currentPoint.x,i.currentPoint.y)||!i.isConnectableCell(e)||e==i.state.cell||null!=e&&!i.graph.connectableEdges&&n.isEdge(e)||n.isAncestor(i.state.cell,e))&&(e=null),e=this.graph.isCellConnectable(e)?e:null},t.isValidState=function(t){var e=i.graph.getModel(),e=i.graph.view.getTerminalPort(t,i.graph.view.getState(e.getTerminal(i.state.cell,!i.isSource)),!i.isSource),e=null!=e?e.cell:null,n=i.isSource?t.cell:e,e=i.isSource?e:t.cell;return i.error=i.validateConnection(n,e),null==i.error},t},mxEdgeHandler.prototype.validateConnection=function(t,e){return this.graph.getEdgeValidationError(this.state.cell,t,e)},mxEdgeHandler.prototype.createBends=function(){var t=this.state.cell,n=[];if(null!=this.abspoints)for(var e,i,l,s=0;s<this.abspoints.length;s++)this.isHandleVisible(s)&&(e=0==s,i=s==this.abspoints.length-1,(l=e||i)||this.graph.isCellBendable(t))&&mxUtils.bind(this,function(t){var e=this.createHandleShape(t,null,t==this.abspoints.length-1);this.initBend(e,mxUtils.bind(this,mxUtils.bind(this,function(){this.dblClickRemoveEnabled&&this.removePoint(this.state,t)}))),this.isHandleEnabled(s)&&e.setCursor(l?mxConstants.CURSOR_TERMINAL_HANDLE:mxConstants.CURSOR_BEND_HANDLE),n.push(e),l||(this.points.push(new mxPoint(0,0)),e.node.style.visibility="hidden")})(s);return n},mxEdgeHandler.prototype.createVirtualBends=function(){var e=[];if(null!=this.abspoints&&0<this.abspoints.length&&this.graph.isCellBendable(this.state.cell))for(var t=1;t<this.abspoints.length;t++)mxUtils.bind(this,function(t){this.initBend(t),t.setCursor(mxConstants.CURSOR_VIRTUAL_BEND_HANDLE),e.push(t)})(this.createHandleShape());return e},mxEdgeHandler.prototype.isHandleEnabled=function(t){return!0},mxEdgeHandler.prototype.isHandleVisible=function(t){var e=this.state.getVisibleTerminalState(!0),n=this.state.getVisibleTerminalState(!1),i=this.graph.getCellGeometry(this.state.cell);return(null!=i?this.graph.view.getEdgeStyle(this.state,i.points,e,n):null)!=mxEdgeStyle.EntityRelation||0==t||t==this.abspoints.length-1},mxEdgeHandler.prototype.createHandleShape=function(t){var e;return null!=this.handleImage?((e=new mxImageShape(new mxRectangle(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src)).preserveImageAspect=!1,e):(e=mxConstants.HANDLE_SIZE,this.preferHtml&&--e,new mxRectangleShape(new mxRectangle(0,0,e,e),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR))},mxEdgeHandler.prototype.createLabelHandleShape=function(){var t;return null!=this.labelHandleImage?((t=new mxImageShape(new mxRectangle(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src)).preserveImageAspect=!1,t):new mxRectangleShape(new mxRectangle(0,0,t=mxConstants.LABEL_HANDLE_SIZE,t),mxConstants.LABEL_HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxEdgeHandler.prototype.initBend=function(t,e){this.preferHtml?(t.dialect=mxConstants.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(t.node,this.graph,this.state,null,null,null,e),mxClient.IS_TOUCH&&t.node.setAttribute("pointer-events","none")},mxEdgeHandler.prototype.getHandleForEvent=function(n){var t=null;if(null!=this.state){var e=mxEvent.isMouseEvent(n.getEvent())?0:2*this.tolerance,i=this.allowHandleBoundsCheck?new mxRectangle(n.getGraphX()-e,n.getGraphY()-e,e,e):null,l=null;function s(t){if(null!=t&&(n.isSource(t)||t.intersectsRectangle(i))){var e=n.getGraphX()-t.bounds.getCenterX(),t=n.getGraphY()-t.bounds.getCenterY(),e=e*e+t*t;if(null==l||e<=l)return l=e,1}}if(null!=this.customHandles&&this.isCustomHandleEvent(n))for(var o=this.customHandles.length-1;0<=o;o--)if(s(this.customHandles[o].shape))return mxEvent.CUSTOM_HANDLE-o;if(null!=this.state.text&&(n.isSource(this.state.text)||s(this.labelShape))&&(t=mxEvent.LABEL_HANDLE),null!=this.bends)for(o=0;o<this.bends.length;o++)s(this.bends[o])&&(t=o);if(null!=this.virtualBends&&this.isAddVirtualBendEvent(n))for(o=0;o<this.virtualBends.length;o++)s(this.virtualBends[o])&&(t=mxEvent.VIRTUAL_HANDLE-o)}return t},mxEdgeHandler.prototype.isAddVirtualBendEvent=function(t){return!0},mxEdgeHandler.prototype.isCustomHandleEvent=function(t){return!0},mxEdgeHandler.prototype.mouseDown=function(t,e){var n,i;this.graph.isCellEditable(this.state.cell)&&(n=this.getHandleForEvent(e),null!=this.bends&&null!=this.bends[n]&&(i=this.bends[n].bounds,this.snapPoint=new mxPoint(i.getCenterX(),i.getCenterY())),this.addEnabled&&null==n&&this.isAddPointEvent(e.getEvent())?(this.addPoint(this.state,e.getEvent()),e.consume()):null!=n&&!e.isConsumed()&&this.graph.isEnabled()&&(this.removeEnabled&&this.isRemovePointEvent(e.getEvent())?this.removePoint(this.state,n):n==mxEvent.LABEL_HANDLE&&!this.graph.isLabelMovable(e.getCell())||(n<=mxEvent.VIRTUAL_HANDLE&&mxUtils.setOpacity(this.virtualBends[mxEvent.VIRTUAL_HANDLE-n].node,100),this.mouseDownX=e.getX(),this.mouseDownY=e.getY(),this.handle=n),mxEvent.isShiftDown(e.getEvent())||e.consume()))},mxEdgeHandler.prototype.start=function(t,e,n){if(this.startX=t,this.startY=e,this.isSource=null!=this.bends&&0==n,this.isTarget=null!=this.bends&&n==this.bends.length-1,this.isLabel=n==mxEvent.LABEL_HANDLE,(!this.isSource&&!this.isTarget||(t=this.state.cell,null==(e=this.graph.model.getTerminal(t,this.isSource))&&this.graph.isTerminalPointMovable(t,this.isSource))||null!=e&&this.graph.isCellDisconnectable(t,e,this.isSource))&&(this.index=n),this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE&&null!=this.customHandles)for(var i=0;i<this.customHandles.length;i++)i!=mxEvent.CUSTOM_HANDLE-this.index&&this.customHandles[i].setVisible(!1)},mxEdgeHandler.prototype.clonePreviewState=function(t,e){return this.state.clone()},mxEdgeHandler.prototype.getSnapToTerminalTolerance=function(){return 2},mxEdgeHandler.prototype.updateHint=function(t,e){},mxEdgeHandler.prototype.removeHint=function(){},mxEdgeHandler.prototype.roundLength=function(t){return Math.round(t)},mxEdgeHandler.prototype.isSnapToTerminalsEvent=function(t){return this.snapToTerminals&&!mxEvent.isAltDown(t.getEvent())},mxEdgeHandler.prototype.getPointForEvent=function(t){var e=this.graph.getView(),n=e.scale,i=new mxPoint(this.roundLength(t.getGraphX()/n)*n,this.roundLength(t.getGraphY()/n)*n),l=this.getSnapToTerminalTolerance(),s=!1,o=!1;if(0<l&&this.isSnapToTerminalsEvent(t)){function r(t){var e;null!=t&&(e=t.x,Math.abs(i.x-e)<l&&(i.x=e,s=!0),e=t.y,Math.abs(i.y-e)<l)&&(i.y=e,o=!0)}function a(t){null!=t&&r.call(this,new mxPoint(e.getRoutingCenterX(t),e.getRoutingCenterY(t)))}a.call(this,this.state.getVisibleTerminalState(!0)),a.call(this,this.state.getVisibleTerminalState(!1));var h=this.state.absolutePoints;if(null!=h)for(var u=0;u<h.length;u++)(0<u||!this.state.isFloatingTerminalPoint(!0))&&(u<h.length-1||!this.state.isFloatingTerminalPoint(!1))&&r.call(this,this.state.absolutePoints[u])}return this.graph.isGridEnabledEvent(t.getEvent())&&(t=e.translate,s||(i.x=(this.graph.snap(i.x/n-t.x)+t.x)*n),o||(i.y=(this.graph.snap(i.y/n-t.y)+t.y)*n)),i},mxEdgeHandler.prototype.getPreviewTerminalState=function(t){var e,n,i=this.getConstraintHandler();return i.update(t,this.isSource,!0,t.isSource(this.marker.highlight.shape)?null:this.currentPoint),null!=i.currentFocus&&null!=i.currentConstraint?(null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==i.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(i.currentFocus.cell,"transparent"),n=this.graph.getModel(),n=null!=(n=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(n.getTerminal(this.state.cell,!this.isSource)),!this.isSource))?n.cell:null,e=this.isSource?i.currentFocus.cell:n,n=this.isSource?n:i.currentFocus.cell,this.error=this.validateConnection(e,n),(e=null)==this.error&&(e=i.currentFocus),null==this.error&&(null==e||this.isCellEnabled(e.cell))||i.reset(),e):this.graph.isIgnoreTerminalEvent(t.getEvent())?(this.marker.reset(),null):(this.marker.process(t),null==(n=this.marker.getValidState())||this.isCellEnabled(n.cell)||(i.reset(),this.marker.reset()),this.marker.getValidState())},mxEdgeHandler.prototype.getPreviewPoints=function(t,e){var n=this.graph.getCellGeometry(this.state.cell),i=null!=n.points?n.points.slice():null,n=new mxPoint(t.x,t.y),l=null;if(this.isSource||this.isTarget)this.graph.resetEdgesOnConnect&&(i=null);else if(this.convertPoint(n,!1),null==i)i=[n];else{if(this.index<=mxEvent.VIRTUAL_HANDLE&&i.splice(mxEvent.VIRTUAL_HANDLE-this.index,0,n),!this.isSource&&!this.isTarget){for(var s,o,r,a,h=0;h<this.bends.length;h++)h!=this.index&&null!=(s=this.bends[h])&&mxUtils.contains(s.bounds,t.x,t.y)&&(this.index<=mxEvent.VIRTUAL_HANDLE?i.splice(mxEvent.VIRTUAL_HANDLE-this.index,1):i.splice(this.index-1,1),l=i);null!=l||!this.straightRemoveEnabled||null!=e&&mxEvent.isAltDown(e.getEvent())||(e=this.graph.tolerance*this.graph.tolerance,(o=this.state.absolutePoints.slice())[this.index]=t,null==(r=this.state.getVisibleTerminalState(!0))||null!=(a=this.graph.getConnectionConstraint(this.state,r,!0))&&null!=this.graph.getConnectionPoint(r,a)||(o[0]=new mxPoint(r.view.getRoutingCenterX(r),r.view.getRoutingCenterY(r))),null==(r=this.state.getVisibleTerminalState(!1))||null!=(a=this.graph.getConnectionConstraint(this.state,r,!1))&&null!=this.graph.getConnectionPoint(r,a)||(o[o.length-1]=new mxPoint(r.view.getRoutingCenterX(r),r.view.getRoutingCenterY(r))),a=this.index,r=t,0<a&&a<o.length-1&&mxUtils.ptSegDistSq(o[a-1].x,o[a-1].y,o[a+1].x,o[a+1].y,r.x,r.y)<e&&(i.splice(a-1,1),l=i))}null==l&&this.index>mxEvent.VIRTUAL_HANDLE&&(i[this.index-1]=n)}return null!=l?l:i},mxEdgeHandler.prototype.isOutlineConnectEvent=function(t){var e,n,i,l,s;return(!mxEvent.isShiftDown(t.getEvent())||!mxEvent.isAltDown(t.getEvent()))&&(s=mxUtils.getOffset(this.graph.container),n=t.getEvent(),e=mxEvent.getClientX(n),n=mxEvent.getClientY(n),i=document.documentElement,l=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),i=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),l=this.currentPoint.x-this.graph.container.scrollLeft+s.x-l,s=this.currentPoint.y-this.graph.container.scrollTop+s.y-i,this.outlineConnect)&&(mxEvent.isShiftDown(t.getEvent())&&!mxEvent.isAltDown(t.getEvent())||t.isSource(this.marker.highlight.shape)||!mxEvent.isShiftDown(t.getEvent())&&mxEvent.isAltDown(t.getEvent())&&null!=t.getState()||this.marker.highlight.isHighlightAt(e,n)||(l!=e||s!=n)&&null==t.getState()&&this.marker.highlight.isHighlightAt(l,s))},mxEdgeHandler.prototype.updatePreviewState=function(t,e,n,i,l){var s,o=this.isSource?n:this.state.getVisibleTerminalState(!0),r=this.isTarget?n:this.state.getVisibleTerminalState(!1),a=this.graph.getConnectionConstraint(t,o,!0),h=this.graph.getConnectionConstraint(t,r,!1),u=this.getConstraintHandler(),d=u.currentConstraint;null==d&&l&&(null!=n?(i.isSource(this.marker.highlight.shape)&&(e=new mxPoint(i.getGraphX(),i.getGraphY())),d=this.graph.getOutlineConstraint(e,n,i),u.setFocus(i,n,this.isSource),u.currentConstraint=d,u.currentPoint=e):d=new mxConnectionConstraint),this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&(s=this.graph.view.scale,null!=u.currentConstraint&&null!=u.currentFocus?(this.marker.highlight.shape.stroke=l?mxConstants.OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/s/s,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.highlight.shape.stroke=this.graph.isCellConnectable(i.getCell())&&this.marker.getValidState()!=i.getState()?"transparent":mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/s/s,this.marker.highlight.repaint())),this.isSource?a=d:this.isTarget&&(h=d),(this.isSource||this.isTarget)&&(null!=d&&null!=d.point?(t.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X]=d.point.x,t.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y]=d.point.y):(delete t.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X],delete t.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y])),t.setVisibleTerminalState(o,!0),t.setVisibleTerminalState(r,!1),this.isSource&&null==o||t.view.updateFixedTerminalPoint(t,o,!0,a),this.isTarget&&null==r||t.view.updateFixedTerminalPoint(t,r,!1,h),(this.isSource||this.isTarget)&&null==n&&(t.setAbsoluteTerminalPoint(e,this.isSource),null==this.marker.getMarkedState())&&(this.error=this.graph.allowDanglingEdges?null:""),t.view.updatePoints(t,this.points,o,r),t.view.updateFloatingTerminalPoints(t,o,r)},mxEdgeHandler.prototype.mouseMove=function(t,e){var n,i,l;null!=this.index&&null!=this.marker?(n=this.getConstraintHandler(),this.currentPoint=this.getPointForEvent(e),(this.error=null)!=this.snapPoint&&mxEvent.isShiftDown(e.getEvent())&&!this.graph.isIgnoreTerminalEvent(e.getEvent())&&null==n.currentFocus&&n.currentFocus!=this.state&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y),this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE?null!=this.customHandles&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(e),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].positionChanged(),null!=this.shape)&&null!=this.shape.node&&(this.shape.node.style.display="none"):this.isLabel?(this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y):(this.points=this.getPreviewPoints(this.currentPoint,e),i=this.isSource||this.isTarget?this.getPreviewTerminalState(e):null,null!=n.currentConstraint&&null!=n.currentFocus&&null!=n.currentPoint?this.currentPoint=n.currentPoint.clone():this.outlineConnect&&((l=!(!this.isSource&&!this.isTarget)&&this.isOutlineConnectEvent(e))?i=this.marker.highlight.state:null!=i&&i!=e.getState()&&this.graph.isCellConnectable(e.getCell())&&null!=this.marker.highlight.shape&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),i=null)),null==i||this.isCellEnabled(i.cell)||(i=null,this.marker.reset()),n=this.clonePreviewState(this.currentPoint,null!=i?i.cell:null),this.updatePreviewState(n,this.currentPoint,i,e,l),i=null==this.error?this.marker.validColor:this.marker.invalidColor,this.setPreviewColor(i),this.abspoints=n.absolutePoints,this.active=!0,this.updateHint(e,this.currentPoint,n)),this.drawPreview(),mxEvent.consume(e.getEvent()),e.consume()):!mxEvent.isShiftDown(e.getEvent())&&null!=this.handle&&null!=this.mouseDownX&&null!=this.mouseDownY&&(l=this.graph.tolerance,Math.abs(this.mouseDownX-e.getX())>l||Math.abs(this.mouseDownY-e.getY())>l)&&this.start(this.mouseDownX,this.mouseDownY,this.handle)},mxEdgeHandler.prototype.mouseUp=function(t,e){if(null!=this.index&&null!=this.marker){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display="");var n=this.state.cell,i=this.index;if(this.index=null,e.getX()!=this.startX||e.getY()!=this.startY){var l=!this.graph.isIgnoreTerminalEvent(e.getEvent())&&this.cloneEnabled&&this.graph.isCloneEvent(e.getEvent())&&this.graph.isCellsCloneable();if(null!=this.error)0<this.error.length&&this.graph.validationAlert(this.error);else if(i<=mxEvent.CUSTOM_HANDLE&&i>mxEvent.VIRTUAL_HANDLE){if(null!=this.customHandles){(o=this.graph.getModel()).beginUpdate();try{this.customHandles[mxEvent.CUSTOM_HANDLE-i].execute(e),null!=this.shape&&null!=this.shape.node&&(this.shape.apply(this.state),this.shape.redraw())}finally{o.endUpdate()}}}else if(this.isLabel)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget){var s=null;if(null!=(s=null==(s=null!=this.constraintHandler&&null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?this.constraintHandler.currentFocus.cell:s)&&this.marker.hasValidState()&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&"transparent"!=this.marker.highlight.shape.stroke&&"white"!=this.marker.highlight.shape.stroke?this.marker.validState.cell:s)){var o,r,a,h,i=(o=this.graph.getModel()).getParent(n);o.beginUpdate();try{l&&(r=o.getGeometry(n),a=this.graph.cloneCell(n),o.add(i,a,o.getChildCount(i)),null!=r&&(r=r.clone(),o.setGeometry(a,r)),h=o.getTerminal(n,!this.isSource),this.graph.connectCell(a,h,!this.isSource),n=a),n=this.connect(n,s,this.isSource,l,e)}finally{o.endUpdate()}}else this.graph.isAllowDanglingEdges()&&((i=this.abspoints[this.isSource?0:this.abspoints.length-1]).x=this.roundLength(i.x/this.graph.view.scale-this.graph.view.translate.x),i.y=this.roundLength(i.y/this.graph.view.scale-this.graph.view.translate.y),null!=(r=this.graph.getView().getState(this.graph.getModel().getParent(n)))&&(i.x-=r.origin.x,i.y-=r.origin.y),i.x-=this.graph.panDx/this.graph.view.scale,i.y-=this.graph.panDy/this.graph.view.scale,n=this.changeTerminalPoint(n,i,this.isSource,l))}else this.active?n=this.changePoints(n,this.points,l):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}else this.graph.isToggleEvent(e.getEvent())&&this.graph.selectCellForEvent(this.state.cell,e.getEvent());null!=this.marker&&(this.reset(),n!=this.state.cell)&&this.graph.setSelectionCell(n),e.consume()}else null==this.handle||null==this.bends||mxEvent.isAltDown(e.getEvent())||0!=this.handle&&this.handle!=this.bends.length-1||null!=(s=this.state.getVisibleTerminal(0==this.handle))&&(this.graph.selectCellForEvent(s,e.getEvent()),e.consume());this.handle=null,this.mouseDownX=null,this.mouseDownY=null},mxEdgeHandler.prototype.reset=function(){if(this.active&&this.refresh(),this.error=null,this.index=null,this.label=null,this.points=null,this.handle=null,this.startX=null,this.startY=null,this.mouseDownX=null,this.mouseDownY=null,this.snapPoint=null,this.isLabel=!1,this.isSource=!1,this.isTarget=!1,this.active=!1,this.livePreview&&null!=this.sizers)for(var t=0;t<this.sizers.length;t++)null!=this.sizers[t]&&(this.sizers[t].node.style.display="");if(null!=this.marker&&this.marker.reset(),null!=this.constraintHandler&&this.constraintHandler.reset(),null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)this.customHandles[t].reset();this.setPreviewColor(mxConstants.EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()},mxEdgeHandler.prototype.setPreviewColor=function(t){null!=this.shape&&(this.shape.stroke=t)},mxEdgeHandler.prototype.convertPoint=function(t,e){var n=this.graph.getView().getScale(),i=this.graph.getView().getTranslate(),e=(e&&(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t.x=Math.round(t.x/n-i.x),t.y=Math.round(t.y/n-i.y),this.graph.getView().getState(this.graph.getModel().getParent(this.state.cell)));return null!=e&&(t.x-=e.origin.x,t.y-=e.origin.y),t},mxEdgeHandler.prototype.moveLabel=function(t,e,n){var i,l,s,o,r=this.graph.getModel(),a=r.getGeometry(t.cell);null!=a&&(i=this.graph.getView().scale,(a=a.clone()).relative?(o=this.graph.getView().getRelativePoint(t,e,n),a.x=Math.round(1e4*o.x)/1e4,a.y=Math.round(o.y),a.offset=new mxPoint(0,0),o=this.graph.view.getPoint(t,a),a.offset=new mxPoint(Math.round((e-o.x)/i),Math.round((n-o.y)/i))):(l=(o=t.absolutePoints)[0],o=o[o.length-1],null!=l&&null!=o&&(s=l.x+(o.x-l.x)/2,o=l.y+(o.y-l.y)/2,a.offset=new mxPoint(Math.round((e-s)/i),Math.round((n-o)/i)),a.x=0,a.y=0)),r.setGeometry(t.cell,a))},mxEdgeHandler.prototype.connect=function(t,e,n,i,l){var s=this.graph.getModel();s.beginUpdate();try{var o=null!=this.constraintHandler?this.constraintHandler.currentConstraint:null;null==o&&(o=new mxConnectionConstraint),this.graph.connectCell(t,e,n,o)}finally{s.endUpdate()}return t},mxEdgeHandler.prototype.changeTerminalPoint=function(t,e,n,i){var l=this.graph.getModel();l.beginUpdate();try{i&&(s=l.getParent(t),o=l.getTerminal(t,!n),t=this.graph.cloneCell(t),l.add(s,t,l.getChildCount(s)),l.setTerminal(t,o,!n));var s,o,r=l.getGeometry(t);null!=r&&((r=r.clone()).setTerminalPoint(e,n),l.setGeometry(t,r),this.graph.connectCell(t,null,n,new mxConnectionConstraint))}finally{l.endUpdate()}return t},mxEdgeHandler.prototype.changePoints=function(t,e,n){var i=this.graph.getModel();i.beginUpdate();try{n&&(l=i.getParent(t),s=i.getTerminal(t,!0),o=i.getTerminal(t,!1),t=this.graph.cloneCell(t),i.add(l,t,i.getChildCount(l)),i.setTerminal(t,s,!0),i.setTerminal(t,o,!1));var l,s,o,r=i.getGeometry(t);null!=r&&((r=r.clone()).points=e,i.setGeometry(t,r))}finally{i.endUpdate()}return t},mxEdgeHandler.prototype.addPoint=function(t,e){var n=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),i=this.graph.isGridEnabledEvent(e);this.convertPoint(n,i),this.addPointAt(t,n.x,n.y),mxEvent.consume(e)},mxEdgeHandler.prototype.addPointAt=function(t,e,n){var i,l,s=this.graph.getCellGeometry(t.cell),e=new mxPoint(e,n);null!=s&&(s=s.clone(),n=this.graph.view.translate,i=this.graph.view.scale,n=new mxPoint(n.x*i,n.y*i),l=this.graph.model.getParent(this.state.cell),this.graph.model.isVertex(l)&&(n=new mxPoint((l=this.graph.view.getState(l)).x,l.y)),l=mxUtils.findNearestSegment(t,e.x*i+n.x,e.y*i+n.y),null==s.points?s.points=[e]:s.points.splice(l,0,e),this.graph.getModel().setGeometry(t.cell,s),this.refresh(),this.redraw())},mxEdgeHandler.prototype.removePoint=function(t,e){var n;0<e&&e<this.abspoints.length-1&&null!=(n=this.graph.getCellGeometry(this.state.cell))&&null!=n.points&&((n=n.clone()).points.splice(e-1,1),this.graph.getModel().setGeometry(t.cell,n),this.refresh(),this.redraw())},mxEdgeHandler.prototype.getHandleFillColor=function(t){var t=0==t,e=this.state.cell,n=this.graph.getModel().getTerminal(e,t),i=mxConstants.HANDLE_FILLCOLOR;return null!=n&&!this.graph.isCellDisconnectable(e,n,t)||null==n&&!this.graph.isTerminalPointMovable(e,t)?i=mxConstants.LOCKED_HANDLE_FILLCOLOR:null!=n&&this.graph.isCellDisconnectable(e,n,t)&&(i=mxConstants.CONNECT_HANDLE_FILLCOLOR),i},mxEdgeHandler.prototype.redraw=function(t){if(null!=this.state&&null!=this.state.absolutePoints){this.abspoints=this.state.absolutePoints.slice();var e=this.graph.getModel().getGeometry(this.state.cell);if(null!=e){var n=e.points;if(null!=this.bends&&0<this.bends.length&&null!=n){null==this.points&&(this.points=[]);for(var i=1;i<this.bends.length-1;i++)null!=this.bends[i]&&null!=this.abspoints[i]&&(this.points[i-1]=n[i-1])}}this.drawPreview(),t||this.redrawHandles()}},mxEdgeHandler.prototype.isTerminalHandleVisible=function(t){return!0},mxEdgeHandler.prototype.redrawHandles=function(){var t,e,n,i,l=this.state.cell;if(null!=this.labelShape&&(o=this.labelShape.bounds,this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new mxRectangle(Math.round(this.label.x-o.width/2),Math.round(this.label.y-o.height/2),o.width,o.height),n=this.graph.getLabel(l),this.labelShape.visible=null!=n&&0<n.length&&this.graph.isCellEditable(this.state.cell)&&this.graph.isLabelMovable(l)&&this.isHandlesVisible()),null!=this.bends&&0<this.bends.length&&(n=this.abspoints.length-1,t=(l=this.abspoints[0]).x,e=l.y,o=this.bends[0].bounds,this.bends[0].bounds=new mxRectangle(Math.floor(t-o.width/2),Math.floor(e-o.height/2),o.width,o.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds),this.bends[0].node.style.visibility=this.isHandlesVisible()&&this.isTerminalHandleVisible(!0)?"":"hidden",e=(t=this.abspoints[n]).x,n=t.y,i=this.bends.length-1,o=this.bends[i].bounds,this.bends[i].bounds=new mxRectangle(Math.floor(e-o.width/2),Math.floor(n-o.height/2),o.width,o.height),this.bends[i].fill=this.getHandleFillColor(i),this.bends[i].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[i].bounds),this.bends[i].node.style.visibility=this.isHandlesVisible()&&this.isTerminalHandleVisible(!1)?"":"hidden",this.redrawInnerBends(l,t)),null!=this.abspoints&&null!=this.virtualBends&&0<this.virtualBends.length)for(var s,o,r,a,h=this.abspoints[0],u=0;u<this.virtualBends.length;u++)null!=this.virtualBends[u]&&null!=this.abspoints[u+1]&&(s=this.abspoints[u+1],o=this.virtualBends[u],r=h.x+(s.x-h.x)/2,a=h.y+(s.y-h.y)/2,o.bounds=new mxRectangle(Math.floor(r-o.bounds.width/2),Math.floor(a-o.bounds.height/2),o.bounds.width,o.bounds.height),o.redraw(),mxUtils.setOpacity(o.node,this.virtualBendOpacity),h=s,this.manageLabelHandle&&this.checkLabelHandle(o.bounds),o.node.style.visibility=this.isHandlesVisible()?"":"hidden");if(null!=this.labelShape&&this.labelShape.redraw(),null!=this.customHandles)for(u=0;u<this.customHandles.length;u++){var d=this.customHandles[u].shape.node.style.display;this.customHandles[u].redraw(),this.customHandles[u].shape.node.style.display=d,this.customHandles[u].shape.node.style.visibility=!this.graph.isEditing()&&this.isHandlesVisible()&&this.isCustomHandleVisible(this.customHandles[u])?"":"hidden"}},mxEdgeHandler.prototype.isCustomHandleVisible=function(t){return 1==this.state.view.graph.getSelectionCount()},mxEdgeHandler.prototype.setHandlesVisible=function(t){if(null!=this.bends)for(var e=0;e<this.bends.length;e++)null!=this.bends[e]&&(this.bends[e].node.style.display=t?"":"none");if(null!=this.virtualBends)for(e=0;e<this.virtualBends.length;e++)null!=this.virtualBends[e]&&(this.virtualBends[e].node.style.display=t?"":"none");if(null!=this.labelShape&&(this.labelShape.node.style.display=t?"":"none"),null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].setVisible(t)},mxEdgeHandler.prototype.redrawInnerBends=function(t,e){for(var n,i,l,s=1;s<this.bends.length-1;s++)null!=this.bends[s]&&(null!=this.abspoints[s]?(n=this.abspoints[s].x,i=this.abspoints[s].y,l=this.bends[s].bounds,this.bends[s].bounds=new mxRectangle(Math.round(n-l.width/2),Math.round(i-l.height/2),l.width,l.height),this.manageLabelHandle?this.checkLabelHandle(this.bends[s].bounds):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(this.bends[s].bounds,this.labelShape.bounds)&&(w=mxConstants.HANDLE_SIZE+3,h=mxConstants.HANDLE_SIZE+3,this.bends[s].bounds=new mxRectangle(Math.round(n-w/2),Math.round(i-h/2),w,h)),this.bends[s].redraw(),this.bends[s].node.style.visibility=this.isHandlesVisible()?"":"hidden"):(this.bends[s].destroy(),this.bends[s]=null))},mxEdgeHandler.prototype.checkLabelHandle=function(t){var e;null!=this.labelShape&&(e=this.labelShape.bounds,mxUtils.intersects(t,e))&&(t.getCenterY()<e.getCenterY()?e.y=t.y+t.height:e.y=t.y-e.height)},mxEdgeHandler.prototype.drawPreview=function(){try{var t,e;this.isLabel&&(t=this.labelShape.bounds,e=new mxRectangle(Math.round(this.label.x-t.width/2),Math.round(this.label.y-t.height/2),t.width,t.height),this.labelShape.bounds.equals(e)||(this.labelShape.bounds=e,this.labelShape.redraw())),null==this.shape||mxUtils.equalPoints(this.shape.points,this.abspoints)||(this.shape.apply(this.state),this.shape.points=this.abspoints.slice(),this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokewidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.isShadow=!1,this.shape.redraw()),this.updateParentHighlight()}catch(t){}},mxEdgeHandler.prototype.isHandlesVisible=function(){return!this.graph.isCellLocked(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<=mxGraphHandler.prototype.maxCells)},mxEdgeHandler.prototype.refresh=function(){null!=this.state&&(this.abspoints=this.getSelectionPoints(this.state),this.points=[],null!=this.shape&&(this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.isShadow=!1,this.shape.redraw()),null!=this.bends&&(this.destroyBends(this.bends),this.bends=null),this.isHandlesVisible()&&(this.bends=this.createBends()),null!=this.virtualBends&&(this.destroyBends(this.virtualBends),this.virtualBends=null),this.isHandlesVisible()&&(this.virtualBends=this.createVirtualBends()),null!=this.customHandles&&(this.destroyBends(this.customHandles),this.customHandles=null),this.isHandlesVisible()&&(this.customHandles=this.createCustomHandles()),null!=this.labelShape&&(this.labelShape.destroy(),this.labelShape=null),this.isHandlesVisible())&&(this.labelShape=this.createLabelShape(),null!=this.labelShape)&&null!=this.labelShape.node&&null!=this.labelShape.node.parentNode&&this.labelShape.node.parentNode.appendChild(this.labelShape.node)},mxEdgeHandler.prototype.isDestroyed=function(){return null==this.shape},mxEdgeHandler.prototype.destroyBends=function(t){if(null!=t)for(var e=0;e<t.length;e++)null!=t[e]&&t[e].destroy()},mxEdgeHandler.prototype.destroy=function(){null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.labelShape&&(this.labelShape.destroy(),this.labelShape=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),null!=this.parentHighlight&&this.destroyParentHighlight(),this.destroyBends(this.virtualBends),this.virtualBends=null,this.destroyBends(this.customHandles),this.customHandles=null,this.destroyBends(this.bends),this.bends=null,this.removeHint()},__mxOutput.mxEdgeHandler=void 0!==mxEdgeHandler?mxEdgeHandler:void 0,mxUtils.extend(mxElbowEdgeHandler,mxEdgeHandler),mxElbowEdgeHandler.prototype.flipEnabled=!0,mxElbowEdgeHandler.prototype.doubleClickOrientationResource="none"!=mxClient.language?"doubleClickOrientation":"",mxElbowEdgeHandler.prototype.createBends=function(){var t=[],e=this.createHandleShape(0);return this.initBend(e),e.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(e),t.push(this.createVirtualBend(mxUtils.bind(this,function(t){!mxEvent.isConsumed(t)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell,t),mxEvent.consume(t))}))),this.points.push(new mxPoint(0,0)),e=this.createHandleShape(2,null,!0),this.initBend(e),e.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(e),t},mxElbowEdgeHandler.prototype.createVirtualBends=function(){return null},mxElbowEdgeHandler.prototype.createVirtualBend=function(t){var e=this.createHandleShape();return this.initBend(e,t),e.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(e.node.style.display="none"),e},mxElbowEdgeHandler.prototype.getCursorForBend=function(){return this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_TOPTOBOTTOM||(this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_ELBOW)&&this.state.style[mxConstants.STYLE_ELBOW]==mxConstants.ELBOW_VERTICAL?"row-resize":"col-resize"},mxElbowEdgeHandler.prototype.getTooltipForNode=function(t){var e=null;return null==this.bends||null==this.bends[1]||t!=this.bends[1].node&&t.parentNode!=this.bends[1].node||(e=this.doubleClickOrientationResource,e=mxResources.get(e)||e),e},mxElbowEdgeHandler.prototype.convertPoint=function(t,e){var n=this.graph.getView().getScale(),i=this.graph.getView().getTranslate(),l=this.state.origin;return e&&(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t.x=Math.round(t.x/n-i.x-l.x),t.y=Math.round(t.y/n-i.y-l.y),t},mxElbowEdgeHandler.prototype.redrawInnerBends=function(t,e){var n=this.graph.getModel().getGeometry(this.state.cell),i=this.state.absolutePoints,l=null,n=(1<i.length?(t=i[1],e=i[i.length-2]):null!=n.points&&0<n.points.length&&(l=i[0]),l=null==l?new mxPoint(t.x+(e.x-t.x)/2,t.y+(e.y-t.y)/2):new mxPoint(this.graph.getView().scale*(l.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(l.y+this.graph.getView().translate.y+this.state.origin.y)),this.bends[1].bounds),i=n.width,e=n.height,t=new mxRectangle(Math.round(l.x-i/2),Math.round(l.y-e/2),i,e);this.manageLabelHandle?this.checkLabelHandle(t):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(t,this.labelShape.bounds)&&(i=mxConstants.HANDLE_SIZE+3,e=mxConstants.HANDLE_SIZE+3,t=new mxRectangle(Math.floor(l.x-i/2),Math.floor(l.y-e/2),i,e)),this.bends[1].bounds=t,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)},__mxOutput.mxElbowEdgeHandler=void 0!==mxElbowEdgeHandler?mxElbowEdgeHandler:void 0,mxUtils.extend(mxEdgeSegmentHandler,mxElbowEdgeHandler),mxEdgeSegmentHandler.prototype.getCurrentPoints=function(){var t,e,n=this.state.absolutePoints;return null!=n&&(t=Math.max(1,this.graph.view.scale),2==n.length||3==n.length&&(Math.abs(n[0].x-n[1].x)<t&&Math.abs(n[1].x-n[2].x)<t||Math.abs(n[0].y-n[1].y)<t&&Math.abs(n[1].y-n[2].y)<t))&&(t=n[0].x+(n[n.length-1].x-n[0].x)/2,e=n[0].y+(n[n.length-1].y-n[0].y)/2,n=[n[0],new mxPoint(t,e),new mxPoint(t,e),n[n.length-1]]),n},mxEdgeSegmentHandler.prototype.getPreviewPoints=function(t){if(this.isSource||this.isTarget)return mxElbowEdgeHandler.prototype.getPreviewPoints.apply(this,arguments);for(var e,n,i,l,s,o=this.getCurrentPoints(),r=this.convertPoint(o[0].clone(),!1),a=(t=this.convertPoint(t.clone(),!1),[]),h=1;h<o.length;h++){var u=this.convertPoint(o[h].clone(),!1);h==this.index&&(0==Math.round(r.x-u.x)&&(r.x=t.x,u.x=t.x),0==Math.round(r.y-u.y))&&(r.y=t.y,u.y=t.y),h<o.length-1&&a.push(u),r=u}return a=1==a.length&&(e=this.state.getVisibleTerminalState(!0),n=this.state.getVisibleTerminalState(!1),s=this.state.view.getScale(),i=this.state.view.getTranslate(),l=a[0].x*s+i.x,s=a[0].y*s+i.y,null!=e&&mxUtils.contains(e,l,s)||null!=n&&mxUtils.contains(n,l,s))?[t,t]:a},mxEdgeSegmentHandler.prototype.updatePreviewState=function(t,e,n,i){if(mxEdgeHandler.prototype.updatePreviewState.apply(this,arguments),!this.isSource&&!this.isTarget){e=this.convertPoint(e.clone(),!1);for(var l=t.absolutePoints,s=l[0],o=l[1],r=[],a=2;a<l.length;a++){var h=l[a];0==Math.round(s.x-o.x)&&0==Math.round(o.x-h.x)||0==Math.round(s.y-o.y)&&0==Math.round(o.y-h.y)||r.push(this.convertPoint(o.clone(),!1)),s=o,o=h}var u,d,p,m,c,g=this.state.getVisibleTerminalState(!0),x=this.state.getVisibleTerminalState(!1),y=this.state.absolutePoints;0!=r.length||0!=Math.round(l[0].x-l[l.length-1].x)&&0!=Math.round(l[0].y-l[l.length-1].y)?5==l.length&&2==r.length&&null!=g&&null!=x&&null!=y&&0==Math.round(y[0].x-y[y.length-1].x)&&(u=(y=this.graph.getView()).getScale(),d=y.getTranslate(),p=y.getRoutingCenterY(g)/u-d.y,null!=(m=this.graph.getConnectionConstraint(t,g,!0))&&null!=(c=this.graph.getConnectionPoint(g,m))&&(this.convertPoint(c,!1),p=c.y),m=y.getRoutingCenterY(x)/u-d.y,(y=this.graph.getConnectionConstraint(t,x,!1))&&null!=(c=this.graph.getConnectionPoint(x,y))&&(this.convertPoint(c,!1),m=c.y),r=[new mxPoint(e.x,p),new mxPoint(e.x,m)]):r=[e,e],this.points=r,t.view.updateFixedTerminalPoints(t,g,x),t.view.updatePoints(t,this.points,g,x),t.view.updateFloatingTerminalPoints(t,g,x)}},mxEdgeSegmentHandler.prototype.connect=function(t,e,n,i,l){var s=this.graph.getModel(),o=s.getGeometry(t),r=null;if(null!=o&&null!=o.points&&0<o.points.length)for(var a=this.abspoints,h=a[0],u=a[1],r=[],d=2;d<a.length;d++){var p=a[d];0==Math.round(h.x-u.x)&&0==Math.round(u.x-p.x)||0==Math.round(h.y-u.y)&&0==Math.round(u.y-p.y)||r.push(this.convertPoint(u.clone(),!1)),h=u,u=p}s.beginUpdate();try{null!=r&&null!=(o=s.getGeometry(t))&&((o=o.clone()).points=r,s.setGeometry(t,o)),t=mxEdgeHandler.prototype.connect.apply(this,arguments)}finally{s.endUpdate()}return t},mxEdgeSegmentHandler.prototype.getTooltipForNode=function(t){return null},mxEdgeSegmentHandler.prototype.start=function(t,e,n){mxEdgeHandler.prototype.start.apply(this,arguments),null==this.bends||null==this.bends[n]||this.isSource||this.isTarget||mxUtils.setOpacity(this.bends[n].node,100)},mxEdgeSegmentHandler.prototype.createBends=function(){var t=[],e=this.getCurrentPoints();if(null!=e){var n=this.createHandleShape(0);if(this.initBend(n),n.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(n),this.graph.isCellBendable(this.state.cell)){null==this.points&&(this.points=[]);for(var i=0;i<e.length-1;i++){n=this.createVirtualBend(),t.push(n);var l=0==Math.round(e[i].x-e[i+1].x);0==Math.round(e[i].y-e[i+1].y)&&i<e.length-2&&(l=0==Math.round(e[i].x-e[i+2].x)),n.setCursor(l?"col-resize":"row-resize"),this.points.push(new mxPoint(0,0))}}n=this.createHandleShape(e.length,null,!0);this.initBend(n),n.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(n)}return t},mxEdgeSegmentHandler.prototype.createVirtualBends=function(){return null},mxEdgeSegmentHandler.prototype.redrawInnerBends=function(t,e){if(this.graph.isCellBendable(this.state.cell)){var n=this.getCurrentPoints();if(null!=n&&1<n.length){var i,l=!1;4==n.length&&0==Math.round(n[1].x-n[2].x)&&0==Math.round(n[1].y-n[2].y)&&(l=!0,0==Math.round(n[0].y-n[n.length-1].y)?(i=n[0].x+(n[n.length-1].x-n[0].x)/2,n[1]=new mxPoint(i,n[1].y),n[2]=new mxPoint(i,n[2].y)):(i=n[0].y+(n[n.length-1].y-n[0].y)/2,n[1]=new mxPoint(n[1].x,i),n[2]=new mxPoint(n[2].x,i)));for(var s,o,r=0;r<n.length-1;r++)null!=this.bends[r+1]&&(t=n[r],e=n[r+1],s=new mxPoint(t.x+(e.x-t.x)/2,t.y+(e.y-t.y)/2),o=this.bends[r+1].bounds,this.bends[r+1].bounds=new mxRectangle(Math.floor(s.x-o.width/2),Math.floor(s.y-o.height/2),o.width,o.height),this.bends[r+1].redraw(),this.manageLabelHandle)&&this.checkLabelHandle(this.bends[r+1].bounds);l&&(mxUtils.setOpacity(this.bends[1].node,this.virtualBendOpacity),mxUtils.setOpacity(this.bends[3].node,this.virtualBendOpacity))}}},__mxOutput.mxEdgeSegmentHandler=void 0!==mxEdgeSegmentHandler?mxEdgeSegmentHandler:void 0,mxKeyHandler.prototype.graph=null,mxKeyHandler.prototype.target=null,mxKeyHandler.prototype.normalKeys=null,mxKeyHandler.prototype.shiftKeys=null,mxKeyHandler.prototype.controlKeys=null,mxKeyHandler.prototype.controlShiftKeys=null,mxKeyHandler.prototype.enabled=!0,mxKeyHandler.prototype.isEnabled=function(){return this.enabled},mxKeyHandler.prototype.setEnabled=function(t){this.enabled=t},mxKeyHandler.prototype.bindKey=function(t,e){this.normalKeys[t]=e},mxKeyHandler.prototype.bindShiftKey=function(t,e){this.shiftKeys[t]=e},mxKeyHandler.prototype.bindControlKey=function(t,e){this.controlKeys[t]=e},mxKeyHandler.prototype.bindControlShiftKey=function(t,e){this.controlShiftKeys[t]=e},mxKeyHandler.prototype.isControlDown=function(t){return mxEvent.isControlDown(t)},mxKeyHandler.prototype.getFunction=function(t){return null==t||mxEvent.isAltDown(t)?null:(this.isControlDown(t)?mxEvent.isShiftDown(t)?this.controlShiftKeys:this.controlKeys:mxEvent.isShiftDown(t)?this.shiftKeys:this.normalKeys)[t.keyCode]},mxKeyHandler.prototype.isGraphEvent=function(t){var e=mxEvent.getSource(t);return!!(e==this.target||e.parentNode==this.target||null!=this.graph.cellEditor&&this.graph.cellEditor.isEventSource(t))||mxUtils.isAncestorNode(this.graph.container,e)},mxKeyHandler.prototype.keyDown=function(t){var e;this.isEnabledForEvent(t)&&(27==t.keyCode?this.escape(t):this.isEventIgnored(t)||null!=(e=this.getFunction(t))&&(e(t),mxEvent.consume(t)))},mxKeyHandler.prototype.isEnabledForEvent=function(t){return this.graph.isEnabled()&&!mxEvent.isConsumed(t)&&this.isGraphEvent(t)&&this.isEnabled()},mxKeyHandler.prototype.isEventIgnored=function(t){return this.graph.isEditing()},mxKeyHandler.prototype.escape=function(t){this.graph.isEscapeEnabled()&&this.graph.escape(t)},mxKeyHandler.prototype.destroy=function(){null!=this.target&&null!=this.keydownHandler&&(mxEvent.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null},__mxOutput.mxKeyHandler=void 0!==mxKeyHandler?mxKeyHandler:void 0,mxTooltipHandler.prototype.zIndex=10005,mxTooltipHandler.prototype.graph=null,mxTooltipHandler.prototype.delay=null,mxTooltipHandler.prototype.ignoreTouchEvents=!0,mxTooltipHandler.prototype.hideOnHover=!1,mxTooltipHandler.prototype.destroyed=!1,mxTooltipHandler.prototype.enabled=!1,mxTooltipHandler.prototype.isEnabled=function(){return this.enabled},mxTooltipHandler.prototype.setEnabled=function(t){this.enabled=t},mxTooltipHandler.prototype.isHideOnHover=function(){return this.hideOnHover},mxTooltipHandler.prototype.setHideOnHover=function(t){this.hideOnHover=t},mxTooltipHandler.prototype.init=function(){null!=document.body&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(t){"A"!=mxEvent.getSource(t).nodeName&&this.hideTooltip()})))},mxTooltipHandler.prototype.getStateForEvent=function(t){return t.getState()},mxTooltipHandler.prototype.mouseDown=function(t,e){this.reset(e,!1),this.hideTooltip()},mxTooltipHandler.prototype.mouseMove=function(t,e){var n;(e.getX()!=this.lastX||e.getY()!=this.lastY)&&(this.reset(e,!0),n=this.getStateForEvent(e),this.isHideOnHover()||n!=this.state||e.getSource()!=this.node&&(!this.stateSource||null!=n&&this.stateSource==(e.isSource(n.shape)||!e.isSource(n.text))))&&this.hideTooltip(),this.lastX=e.getX(),this.lastY=e.getY()},mxTooltipHandler.prototype.mouseUp=function(t,e){this.reset(e,!0),this.hideTooltip()},mxTooltipHandler.prototype.resetTimer=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null)},mxTooltipHandler.prototype.reset=function(t,e,n){var i,l,s,o;this.ignoreTouchEvents&&!mxEvent.isMouseEvent(t.getEvent())||(this.resetTimer(),n=null!=n?n:this.getStateForEvent(t),e&&this.isEnabled()&&null!=n&&(null==this.div||"hidden"==this.div.style.visibility)&&(i=t.getSource(),l=t.getX(),s=t.getY(),o=t.isSource(n.shape)||t.isSource(n.text),this.thread=window.setTimeout(mxUtils.bind(this,function(){var t;this.graph.isEditing()||this.graph.popupMenuHandler.isMenuShowing()||this.graph.isMouseDown||(t=this.graph.getTooltip(n,i,l,s),this.show(t,l,s),this.state=n,this.node=i,this.stateSource=o)}),this.delay)))},mxTooltipHandler.prototype.hide=function(){this.resetTimer(),this.hideTooltip()},mxTooltipHandler.prototype.hideTooltip=function(){null!=this.div&&(this.div.style.visibility="hidden",this.div.innerText="")},mxTooltipHandler.prototype.show=function(t,e,n){var i;!this.destroyed&&null!=t&&0<t.length&&(null==this.div&&this.init(),i=mxUtils.getScrollOrigin(),this.div.style.zIndex=this.zIndex,this.div.style.left=e+i.x+"px",this.div.style.top=n+mxConstants.TOOLTIP_VERTICAL_OFFSET+i.y+"px",mxUtils.isNode(t)?(this.div.style.whiteSpace="",this.div.innerText="",this.div.appendChild(t)):(this.div.style.whiteSpace="pre-line",this.div.innerHTML=t),this.div.style.visibility="",mxUtils.fit(this.div))},mxTooltipHandler.prototype.destroy=function(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent.release(this.div),null!=this.div&&null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)},__mxOutput.mxTooltipHandler=void 0!==mxTooltipHandler?mxTooltipHandler:void 0,mxUtils.extend(mxCellTracker,mxCellMarker),mxCellTracker.prototype.mouseDown=function(t,e){},mxCellTracker.prototype.mouseMove=function(t,e){this.isEnabled()&&this.process(e)},mxCellTracker.prototype.mouseUp=function(t,e){},mxCellTracker.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),mxCellMarker.prototype.destroy.apply(this))},__mxOutput.mxCellTracker=void 0!==mxCellTracker?mxCellTracker:void 0,mxCellHighlight.prototype.keepOnTop=!1,mxCellHighlight.prototype.graph=null,mxCellHighlight.prototype.state=null,mxCellHighlight.prototype.spacing=0,mxCellHighlight.prototype.resetHandler=null,mxCellHighlight.prototype.setHighlightColor=function(t){this.highlightColor=t,null!=this.shape&&(this.shape.stroke=t)},mxCellHighlight.prototype.drawHighlight=function(){this.shape=this.createShape(),this.repaint(),this.keepOnTop||this.shape.node.parentNode.firstChild==this.shape.node||this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)},mxCellHighlight.prototype.createShape=function(){var t=this.graph.cellRenderer.createShape(this.state);return t.svgStrokeTolerance=this.graph.tolerance,t.points=this.state.absolutePoints,t.apply(this.state),t.stroke=this.highlightColor,t.opacity=this.opacity,t.isDashed=this.dashed,t.isShadow=!1,t.dialect=mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(t.node,this.graph,this.state),this.graph.dialect!=mxConstants.DIALECT_SVG?t.pointerEvents=!1:t.svgPointerEvents="stroke",t},mxCellHighlight.prototype.getStrokeWidth=function(t){return this.strokeWidth},mxCellHighlight.prototype.repaint=function(){null!=this.state&&null!=this.shape&&(this.shape.scale=this.state.view.scale,this.graph.model.isEdge(this.state.cell)?(this.shape.strokewidth=this.getStrokeWidth(),this.shape.points=this.state.absolutePoints,this.shape.outline=!1):(this.shape.bounds=new mxRectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.shape.strokewidth=this.getStrokeWidth()/this.state.view.scale,this.shape.outline=!0),null!=this.state.shape&&this.shape.setCursor(this.state.shape.getCursor()),this.shape.redraw())},mxCellHighlight.prototype.hide=function(){this.highlight(null)},mxCellHighlight.prototype.highlight=function(t){this.state!=t&&(null!=this.shape&&(this.shape.destroy(),this.shape=null),this.state=t,null!=this.state)&&this.drawHighlight()},mxCellHighlight.prototype.isHighlightAt=function(t,e){var n=!1;if(null!=this.shape&&null!=document.elementFromPoint)for(var i=document.elementFromPoint(t,e);null!=i;){if(i==this.shape.node){n=!0;break}i=i.parentNode}return n},mxCellHighlight.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getView().removeListener(this.repaintHandler),this.graph.getModel().removeListener(this.repaintHandler),null!=this.shape&&(this.shape.destroy(),this.shape=null)},__mxOutput.mxCellHighlight=void 0!==mxCellHighlight?mxCellHighlight:void 0;var mxCodecRegistry={codecs:[],aliases:[],register:function(t){var e,n;return null!=t&&(e=t.getName(),mxCodecRegistry.codecs[e]=t,(n=mxUtils.getFunctionName(t.template.constructor))!=e)&&mxCodecRegistry.addAlias(n,e),t},addAlias:function(t,e){mxCodecRegistry.aliases[t]=e},getCodec:function(t){var e=null;if(null!=t){var n=mxUtils.getFunctionName(t),i=mxCodecRegistry.aliases[n];if(null==(e=mxCodecRegistry.codecs[n=null!=i?i:n]))try{e=new mxObjectCodec(new t),mxCodecRegistry.register(e)}catch(t){}}return e}};function mxCodec(t){this.document=t||mxUtils.createXmlDocument(),this.objects=[]}function mxObjectCodec(t,e,n,i){for(var l in this.template=t,this.exclude=null!=e?e:[],this.idrefs=null!=n?n:[],this.mapping=null!=i?i:[],this.reverse=new Object,this.mapping)this.reverse[this.mapping[l]]=l}__mxOutput.mxCodecRegistry=void 0!==mxCodecRegistry?mxCodecRegistry:void 0,mxCodec.allowlist=null,mxCodec.prototype.document=null,mxCodec.prototype.objects=null,mxCodec.prototype.elements=null,mxCodec.prototype.encodeDefaults=!1,mxCodec.prototype.putObject=function(t,e){return this.objects[t]=e},mxCodec.prototype.getObject=function(t){var e=null;return e=null!=t&&null==(e=this.objects[t])&&null==(e=this.lookup(t))&&null!=(t=this.getElementById(t))?this.decode(t):e},mxCodec.prototype.lookup=function(t){return null},mxCodec.prototype.getElementById=function(t){return this.updateElements(),this.elements[t]},mxCodec.prototype.updateElements=function(){null==this.elements&&(this.elements=new Object,null!=this.document.documentElement)&&this.addElement(this.document.documentElement)},mxCodec.prototype.addElement=function(t){if(t.nodeType==mxConstants.NODETYPE_ELEMENT){var e=t.getAttribute("id");if(null!=e)if(null==this.elements[e])this.elements[e]=t;else if(this.elements[e]!=t)throw new Error(e+": Duplicate ID")}for(t=t.firstChild;null!=t;)this.addElement(t),t=t.nextSibling},mxCodec.prototype.isObjectIgnored=function(t){return null==t},mxCodec.prototype.getId=function(t){var e=null;return null==t||this.isObjectIgnored(t)||null==(e=this.reference(t))&&t instanceof mxCell&&null==(e=t.getId())&&0==(e=mxCellPath.create(t)).length&&(e="root"),e},mxCodec.prototype.reference=function(t){return null},mxCodec.prototype.encode=function(t){var e,n=null;return null==t||null==t.constructor||this.isObjectIgnored(t)||(null!=(e=mxCodecRegistry.getCodec(t.constructor))?n=e.encode(this,t):mxUtils.isNode(t)?n=mxUtils.importNode(this.document,t,!0):mxLog.warn("mxCodec.encode: No codec for "+mxUtils.getFunctionName(t.constructor))),n},mxCodec.prototype.decode=function(t,e){this.updateElements();var n,i=null;return null!=t&&t.nodeType==mxConstants.NODETYPE_ELEMENT&&(n=this.getConstructor(t.nodeName),null!=(n=mxCodecRegistry.getCodec(n))?i=n.decode(this,t,e):(i=t.cloneNode(!0)).removeAttribute("as")),i},mxCodec.prototype.isConstructorAllowed=function(t){return null==mxCodec.allowlist||0<=mxUtils.indexOf(mxCodec.allowlist,t)},mxCodec.prototype.getConstructor=function(t){var e=null;try{this.isConstructorAllowed(t)&&(e=__mxOutput[t])}catch(t){}return e},mxCodec.prototype.encodeCell=function(t,e,n){if(!this.isObjectIgnored(t)){var i=this.encode(t);if(null!=i&&e.appendChild(i),null==n||n)for(var l=t.getChildCount(),s=0;s<l;s++)this.encodeCell(t.getChildAt(s),e)}},mxCodec.prototype.isCellCodec=function(t){return null!=t&&"function"==typeof t.isCellCodec&&t.isCellCodec()},mxCodec.prototype.decodeCell=function(t,e){e=null==e||e;var n=null;if(null!=t&&t.nodeType==mxConstants.NODETYPE_ELEMENT){var i=mxCodecRegistry.getCodec(t.nodeName);if(!this.isCellCodec(i))for(var l=t.firstChild;null!=l&&!this.isCellCodec(i);)i=mxCodecRegistry.getCodec(l.nodeName),l=l.nextSibling;n=(i=this.isCellCodec(i)?i:mxCodecRegistry.getCodec(mxCell)).decode(this,t),e&&this.insertIntoGraph(n)}return n},mxCodec.prototype.insertIntoGraph=function(t){var e=t.parent,n=t.getTerminal(!0),i=t.getTerminal(!1);if(t.setTerminal(null,!1),t.setTerminal(null,!0),(t.parent=null)!=e){if(e==t)throw new Error(e.id+": Self Reference");e.insert(t)}null!=n&&n.insertEdge(t,!0),null!=i&&i.insertEdge(t,!1)},mxCodec.prototype.setAttribute=function(t,e,n){null!=e&&null!=n&&t.setAttribute(e,n)},__mxOutput.mxCodec=void 0!==mxCodec?mxCodec:void 0,mxObjectCodec.allowEval=!1,mxObjectCodec.prototype.template=null,mxObjectCodec.prototype.exclude=null,mxObjectCodec.prototype.idrefs=null,mxObjectCodec.prototype.mapping=null,mxObjectCodec.prototype.reverse=null,mxObjectCodec.prototype.getName=function(){return mxUtils.getFunctionName(this.template.constructor)},mxObjectCodec.prototype.cloneTemplate=function(){return new this.template.constructor},mxObjectCodec.prototype.getFieldName=function(t){var e;return t=null!=t&&null!=(e=this.reverse[t])?e:t},mxObjectCodec.prototype.getAttributeName=function(t){var e;return t=null!=t&&null!=(e=this.mapping[t])?e:t},mxObjectCodec.prototype.isExcluded=function(t,e,n,i){return e==mxObjectIdentity.FIELD_NAME||0<=mxUtils.indexOf(this.exclude,e)},mxObjectCodec.prototype.isReference=function(t,e,n,i){return 0<=mxUtils.indexOf(this.idrefs,e)},mxObjectCodec.prototype.encode=function(t,e){var n=t.document.createElement(this.getName());return e=this.beforeEncode(t,e,n),this.encodeObject(t,e,n),this.afterEncode(t,e,n)},mxObjectCodec.prototype.encodeObject=function(t,e,n){for(var i in t.setAttribute(n,"id",t.getId(e)),e){var l=e[i];null==l||this.isExcluded(e,i,l,!0)||(mxUtils.isInteger(i)&&(i=null),this.encodeValue(t,e,i,l,n))}},mxObjectCodec.prototype.encodeValue=function(t,e,n,i,l){if(null!=i){if(this.isReference(e,n,i,!0)){var s=t.getId(i);if(null==s)return void mxLog.warn("mxObjectCodec.encode: No ID for "+this.getName()+"."+n+"="+i);i=s}s=this.template[n];null!=n&&!t.encodeDefaults&&s==i||(n=this.getAttributeName(n),this.writeAttribute(t,e,n,i,l))}},mxObjectCodec.prototype.writeAttribute=function(t,e,n,i,l){"object"!=typeof i?this.writePrimitiveAttribute(t,e,n,i,l):this.writeComplexAttribute(t,e,n,i,l)},mxObjectCodec.prototype.writePrimitiveAttribute=function(t,e,n,i,l){i=this.convertAttributeToXml(t,e,n,i,l),null==n?(e=t.document.createElement("add"),"function"==typeof i?e.appendChild(t.document.createTextNode(i)):t.setAttribute(e,"value",i),l.appendChild(e)):"function"!=typeof i&&t.setAttribute(l,n,i)},mxObjectCodec.prototype.writeComplexAttribute=function(t,e,n,i,l){t=t.encode(i);null!=t?(null!=n&&t.setAttribute("as",n),l.appendChild(t)):mxLog.warn("mxObjectCodec.encode: No node for "+this.getName()+"."+n+": "+i)},mxObjectCodec.prototype.convertAttributeToXml=function(t,e,n,i){return i=this.isBooleanAttribute(t,e,n,i)?1==i?"1":"0":i},mxObjectCodec.prototype.isBooleanAttribute=function(t,e,n,i){return void 0===i.length&&(1==i||0==i)},mxObjectCodec.prototype.convertAttributeFromXml=function(t,e,n){var i=e.value;return this.isNumericAttribute(t,e,n)&&(i=parseFloat(i),!isNaN(i)&&isFinite(i)||(i=0)),i},mxObjectCodec.prototype.isNumericAttribute=function(t,e,n){return n.constructor==mxGeometry&&("x"==e.name||"y"==e.name||"width"==e.name||"height"==e.name)||n.constructor==mxPoint&&("x"==e.name||"y"==e.name)||mxUtils.isNumeric(e.value)},mxObjectCodec.prototype.beforeEncode=function(t,e,n){return e},mxObjectCodec.prototype.afterEncode=function(t,e,n){return n},mxObjectCodec.prototype.decode=function(t,e,n){var i=e.getAttribute("id"),l=t.objects[i];return null==l&&(l=n||this.cloneTemplate(),null!=i)&&t.putObject(i,l),e=this.beforeDecode(t,e,l),this.decodeNode(t,e,l),this.afterDecode(t,e,l)},mxObjectCodec.prototype.decodeNode=function(t,e,n){null!=e&&(this.decodeAttributes(t,e,n),this.decodeChildren(t,e,n))},mxObjectCodec.prototype.decodeAttributes=function(t,e,n){var i=e.attributes;if(null!=i)for(var l=0;l<i.length;l++)this.decodeAttribute(t,i[l],n)},mxObjectCodec.prototype.isIgnoredAttribute=function(t,e,n){return"as"==e.nodeName||"id"==e.nodeName||"function"==typeof n[e.nodeName]},mxObjectCodec.prototype.decodeAttribute=function(t,e,n){if(!this.isIgnoredAttribute(t,e,n)){var i=e.nodeName,e=this.convertAttributeFromXml(t,e,n),l=this.getFieldName(i);if(this.isReference(n,l,e,!1)){l=t.getObject(e);if(null==l)return void mxLog.warn("mxObjectCodec.decode: No object for "+this.getName()+"."+i+"="+e);e=l}this.isExcluded(n,i,e,!1)||(n[i]=e)}},mxObjectCodec.prototype.decodeChildren=function(t,e,n){for(var i=e.firstChild;null!=i;){var l=i.nextSibling;i.nodeType!=mxConstants.NODETYPE_ELEMENT||this.processInclude(t,i,n)||this.decodeChild(t,i,n),i=l}},mxObjectCodec.prototype.decodeChild=function(t,e,n){var i=this.getFieldName(e.getAttribute("as"));if(null==i||!this.isExcluded(n,i,e,!1)){var l=this.getFieldTemplate(n,i,e),s=null;"add"==e.nodeName?null==(s=e.getAttribute("value"))&&mxObjectCodec.allowEval&&(s=mxUtils.eval(mxUtils.getTextContent(e))):s=t.decode(e,l);try{this.addObjectValue(n,i,s,l)}catch(t){throw new Error(t.message+" for "+e.nodeName)}}},mxObjectCodec.prototype.getFieldTemplate=function(t,e,n){t=t[e];return t=t instanceof Array&&0<t.length?null:t},mxObjectCodec.prototype.addObjectValue=function(t,e,n,i){if(null!=n&&n!=i)if(null!=e&&0<e.length)t[e]=n;else{if(t.constructor!==Array)throw new Error("Could not add object");t.push(n)}},mxObjectCodec.prototype.processInclude=function(t,e,n){if("include"!=e.nodeName)return!1;e=e.getAttribute("name");if(null!=e)try{var i=mxUtils.load(e).getDocumentElement();null!=i&&t.decode(i,n)}catch(t){}return!0},mxObjectCodec.prototype.beforeDecode=function(t,e,n){return e},mxObjectCodec.prototype.afterDecode=function(t,e,n){return n},__mxOutput.mxObjectCodec=void 0!==mxObjectCodec?mxObjectCodec:void 0,mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxCell,["children","edges","overlays","mxTransient"],["parent","source","target"]);return t.isCellCodec=function(){return!0},t.isNumericAttribute=function(t,e,n){return"value"!==e.nodeName&&mxObjectCodec.prototype.isNumericAttribute.apply(this,arguments)},t.isExcluded=function(t,e,n,i){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||i&&"value"==e&&mxUtils.isNode(n)},t.afterEncode=function(t,e,n){var i;return null!=e.value&&mxUtils.isNode(e.value)&&(i=n,(n=mxUtils.importNode(t.document,e.value,!0)).appendChild(i),t=i.getAttribute("id"),n.setAttribute("id",t),i.removeAttribute("id")),n},t.beforeDecode=function(t,e,n){var i=e.cloneNode(!0),l=this.getName();if(e.nodeName!=l?(i=null!=(l=e.getElementsByTagName(l)[0])&&l.parentNode==e?(mxUtils.removeWhitespace(l,!0),mxUtils.removeWhitespace(l,!1),l.parentNode.removeChild(l),l):null,n.value=e.cloneNode(!0),null!=(l=n.value.getAttribute("id"))&&(n.setId(l),n.value.removeAttribute("id"))):n.setId(e.getAttribute("id")),null!=i)for(var s=0;s<this.idrefs.length;s++){var o,r,a=this.idrefs[s],h=i.getAttribute(a);null!=h&&(i.removeAttribute(a),null==(r=t.objects[h]||t.lookup(h))&&(null!=(o=t.getElementById(h))?r=(mxCodecRegistry.codecs[o.nodeName]||this).decode(t,o):null!=window.console&&console.error("mxCellCodec.beforeDecode: "+this.idrefs[s]+" "+h+" not found for cell "+n.getId())),n[a]=r)}return i},t}()),__mxOutput.mxCellCodec="undefined"!=typeof mxCellCodec?mxCellCodec:void 0,mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxGraphModel);return t.encodeObject=function(t,e,n){var i=t.document.createElement("root");t.encodeCell(e.getRoot(),i),n.appendChild(i)},t.decodeChild=function(t,e,n){"root"==e.nodeName?this.decodeRoot(t,e,n):mxObjectCodec.prototype.decodeChild.apply(this,arguments)},t.decodeRoot=function(t,e,n){for(var i=null,l=e.firstChild;null!=l;){var s=t.decodeCell(l);null!=s&&null==s.getParent()&&(i=s),l=l.nextSibling}null!=i&&n.setRoot(i)},t}()),__mxOutput.mxModelCodec="undefined"!=typeof mxModelCodec?mxModelCodec:void 0,mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxRootChange,["model","previous","root"]);return t.afterEncode=function(t,e,n){return t.encodeCell(e.root,n),n},t.beforeDecode=function(t,e,n){if(null!=e.firstChild&&e.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var i=(e=e.cloneNode(!0)).firstChild,l=(n.root=t.decodeCell(i,!1),i.nextSibling);for(i.parentNode.removeChild(i),i=l;null!=i;)l=i.nextSibling,t.decodeCell(i),i.parentNode.removeChild(i),i=l}return e},t.afterDecode=function(t,e,n){return n.previous=n.root,n},t}()),__mxOutput.mxRootChangeCodec="undefined"!=typeof mxRootChangeCodec?mxRootChangeCodec:void 0,mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxChildChange,["model","child","previousIndex"],["parent","previous"]);return t.isReference=function(t,e,n,i){return!("child"!=e||i&&!t.model.contains(t.previous))||0<=mxUtils.indexOf(this.idrefs,e)},t.isExcluded=function(t,e,n,i){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||i&&null!=n&&("previous"==e||"parent"==e)&&!t.model.contains(n)},t.afterEncode=function(t,e,n){return this.isReference(e,"child",e.child,!0)?n.setAttribute("child",t.getId(e.child)):t.encodeCell(e.child,n),n},t.beforeDecode=function(t,e,n){if(null!=e.firstChild&&e.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var i=(e=e.cloneNode(!0)).firstChild,l=(n.child=t.decodeCell(i,!1),i.nextSibling);for(i.parentNode.removeChild(i),i=l;null!=i;){var s,l=i.nextSibling;i.nodeType==mxConstants.NODETYPE_ELEMENT&&(s=i.getAttribute("id"),null==t.lookup(s))&&t.decodeCell(i),i.parentNode.removeChild(i),i=l}}else{var o=e.getAttribute("child");n.child=t.getObject(o)}return e},t.afterDecode=function(t,e,n){return null!=n.child&&(null!=n.child.parent&&null!=n.previous&&n.child.parent!=n.previous&&(n.previous=n.child.parent),n.child.parent=n.previous,n.previous=n.parent,n.previousIndex=n.index),n},t}()),__mxOutput.mxChildChangeCodec="undefined"!=typeof mxChildChangeCodec?mxChildChangeCodec:void 0,mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxTerminalChange,["model","previous"],["cell","terminal"]);return t.afterDecode=function(t,e,n){return n.previous=n.terminal,n},t}()),__mxOutput.mxTerminalChangeCodec="undefined"!=typeof mxTerminalChangeCodec?mxTerminalChangeCodec:void 0;var mxGenericChangeCodec=function(t,i){t=new mxObjectCodec(t,["model","previous"],["cell"]);return t.afterDecode=function(t,e,n){return mxUtils.isNode(n.cell)&&(n.cell=t.decodeCell(n.cell,!1)),n.previous=n[i],n},t},mxStylesheetCodec=(mxCodecRegistry.register(mxGenericChangeCodec(new mxValueChange,"value")),mxCodecRegistry.register(mxGenericChangeCodec(new mxStyleChange,"style")),mxCodecRegistry.register(mxGenericChangeCodec(new mxGeometryChange,"geometry")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCollapseChange,"collapsed")),mxCodecRegistry.register(mxGenericChangeCodec(new mxVisibleChange,"visible")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCellAttributeChange,"value")),__mxOutput.mxGenericChangeCodec=void 0!==mxGenericChangeCodec?mxGenericChangeCodec:void 0,mxCodecRegistry.register(new mxObjectCodec(new mxGraph,["graphListeners","eventListeners","view","container","cellRenderer","editor","selection"])),__mxOutput.mxGraphCodec="undefined"!=typeof mxGraphCodec?mxGraphCodec:void 0,mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxGraphView);return t.encode=function(t,e){return this.encodeCell(t,e,e.graph.getModel().getRoot())},t.encodeCell=function(t,e,n){var i=e.graph.getModel(),l=e.getState(n),s=i.getParent(n);if(null==s||null!=l){var o=i.getChildCount(n),r=e.graph.getCellGeometry(n),a=null;if(s==i.getRoot()?a="layer":null==s?a="graph":i.isEdge(n)?a="edge":0<o&&null!=r?a="group":i.isVertex(n)&&(a="vertex"),null!=a){var h=t.document.createElement(a);if(null!=e.graph.getLabel(n)&&(h.setAttribute("label",e.graph.getLabel(n)),e.graph.isHtmlLabel(n))&&h.setAttribute("html",!0),null==s){a=e.getGraphBounds();null!=a&&(h.setAttribute("x",Math.round(a.x)),h.setAttribute("y",Math.round(a.y)),h.setAttribute("width",Math.round(a.width)),h.setAttribute("height",Math.round(a.height))),h.setAttribute("scale",e.scale)}else if(null!=l&&null!=r){for(var u in l.style){var d=l.style[u];null!=(d="function"==typeof d&&"object"==typeof d?mxStyleRegistry.getName(d):d)&&"function"!=typeof d&&"object"!=typeof d&&h.setAttribute(u,d)}var p=l.absolutePoints;if(null!=p&&0<p.length){for(var m=Math.round(p[0].x)+","+Math.round(p[0].y),u=1;u<p.length;u++)m+=" "+Math.round(p[u].x)+","+Math.round(p[u].y);h.setAttribute("points",m)}else h.setAttribute("x",Math.round(l.x)),h.setAttribute("y",Math.round(l.y)),h.setAttribute("width",Math.round(l.width)),h.setAttribute("height",Math.round(l.height));s=l.absoluteOffset;null!=s&&(0!=s.x&&h.setAttribute("dx",Math.round(s.x)),0!=s.y)&&h.setAttribute("dy",Math.round(s.y))}for(u=0;u<o;u++){var c=this.encodeCell(t,e,i.getChildAt(n,u));null!=c&&h.appendChild(c)}}}return h},t}()),__mxOutput.mxGraphViewCodec="undefined"!=typeof mxGraphViewCodec?mxGraphViewCodec:void 0,mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxStylesheet);return t.encode=function(t,e){var n,i=t.document.createElement(this.getName());for(n in e.styles){var l=e.styles[n],s=t.document.createElement("add");if(null!=n){for(var o in s.setAttribute("as",n),l){var r,a=this.getStringValue(o,l[o]);null!=a&&((r=t.document.createElement("add")).setAttribute("value",a),r.setAttribute("as",o),s.appendChild(r))}0<s.childNodes.length&&i.appendChild(s)}}return i},t.getStringValue=function(t,e){var n=typeof e;return"function"==n?e=mxStyleRegistry.getName(e):"object"==n&&(e=null),e},t.decode=function(t,e,n){var i=n||new this.template.constructor,n=e.getAttribute("id");for(null!=n&&(t.objects[n]=i),e=e.firstChild;null!=e;){if(!this.processInclude(t,e,i)&&"add"==e.nodeName){var l=e.getAttribute("as");if(null!=l){for(var s,o,r,a=e.getAttribute("extend"),h=null!=a?mxUtils.clone(i.styles[a]):null,u=(null==h&&(null!=a&&mxLog.warn("mxStylesheetCodec.decode: stylesheet "+a+" not found to extend"),h=new Object),e.firstChild);null!=u;)u.nodeType==mxConstants.NODETYPE_ELEMENT&&(s=u.getAttribute("as"),"add"==u.nodeName?((r=null)!=(o=mxUtils.getTextContent(u))&&0<o.length&&mxStylesheetCodec.allowEval?r=mxUtils.eval(o):(r=u.getAttribute("value"),mxUtils.isNumeric(r)&&(r=parseFloat(r))),null!=r&&(h[s]=r)):"remove"==u.nodeName&&delete h[s]),u=u.nextSibling;i.putCellStyle(l,h)}}e=e.nextSibling}return i},t}()));mxStylesheetCodec.allowEval=!1,__mxOutput.mxStylesheetCodec=void 0!==mxStylesheetCodec?mxStylesheetCodec:void 0;let Editor=function(t,e,n,i,l){mxEventSource.call(this),this.chromeless=null!=t?t:this.chromeless,this.initStencilRegistry(),this.graph=i||this.createGraph(e,n),this.editable=null!=l?l:!t,this.undoManager=this.createUndoManager(),this.status="",this.getOrCreateFilename=function(){return this.filename||mxResources.get("drawing",[Editor.pageCounter])+".xml"},this.getFilename=function(){return this.filename},this.setStatus=function(t,e){this.status=t,this.statusFunction=e,this.fireEvent(new mxEventObject("statusChanged"))},this.getStatus=function(){return this.status},this.graphChangeListener=function(t,e){e=null!=e?e.getProperty("edit"):null;null!=e&&e.ignoreEdit||this.setModified(!0)},this.graph.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.graphChangeListener.apply(this,arguments)})),this.graph.resetViewOnRootChange=!1,this.init()},OpenFile=(mxConstants.POINTS=1,mxConstants.MILLIMETERS=2,mxConstants.INCHES=3,mxConstants.METERS=4,mxConstants.PIXELS_PER_MM=3.937,mxConstants.PIXELS_PER_INCH=100,Editor.pageCounter=0,!function(){try{for(var t=window;null!=t.opener&&void 0!==t.opener.Editor&&!isNaN(t.opener.Editor.pageCounter)&&t.opener!=t;)t=t.opener;null!=t&&(t.Editor.pageCounter++,Editor.pageCounter=t.Editor.pageCounter)}catch(t){}}(),Editor.defaultHtmlFont='-apple-system, BlinkMacSystemFont, "Segoe UI Variable", "Segoe UI", system-ui, ui-sans-serif, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"',Editor.useLocalStorage="undefined"!=typeof Storage&&mxClient.IS_IOS,Editor.smallScreenWidth=1024,Editor.lightCheckmarkImage="data:image/gif;base64,R0lGODlhFQAVAMQfAGxsbHx8fIqKioaGhvb29nJycvr6+sDAwJqamltbW5OTk+np6YGBgeTk5Ly8vJiYmP39/fLy8qWlpa6ursjIyOLi4vj4+N/f3+3t7fT09LCwsHZ2dubm5r6+vmZmZv///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY4NTZERTQ5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY4NTZERTU5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Rjg1NkRFMjlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Rjg1NkRFMzlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAB8ALAAAAAAVABUAAAVI4CeOZGmeaKqubKtylktSgCOLRyLd3+QJEJnh4VHcMoOfYQXQLBcBD4PA6ngGlIInEHEhPOANRkaIFhq8SuHCE1Hb8Lh8LgsBADs=",Editor.darkCheckmarkImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAARVBMVEUAAACZmZkICAgEBASNjY2Dg4MYGBiTk5N5eXl1dXVmZmZQUFBCQkI3NzceHh4MDAykpKSJiYl+fn5sbGxaWlo/Pz8SEhK96uPlAAAAAXRSTlMAQObYZgAAAE5JREFUGNPFzTcSgDAQQ1HJGUfy/Y9K7V1qeOUfzQifCQZai1XHaz11LFysbDbzgDSSWMZiETz3+b8yNUc/MMsktxuC8XQBSncdLwz+8gCCggGXzBcozAAAAABJRU5ErkJggg==",Editor.helpImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDB6Ii8+PHBhdGggZD0iTTExIDE4aDJ2LTJoLTJ2MnptMS0xNkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTAtMTRjLTIuMjEgMC00IDEuNzktNCA0aDJjMC0xLjEuOS0yIDItMnMyIC45IDIgMmMwIDItMyAxLjc1LTMgNWgyYzAtMi4yNSAzLTIuNSAzLTUgMC0yLjIxLTEuNzktNC00LTR6Ii8+PC9zdmc+",Editor.menuImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTMgMThoMTh2LTJIM3Yyem0wLTVoMTh2LTJIM3Yyem0wLTd2MmgxOFY2SDN6Ii8+PC9zdmc+",Editor.moveImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI4cHgiIGhlaWdodD0iMjhweCI+PGc+PC9nPjxnPjxnPjxnPjxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNCwyLjQpc2NhbGUoMC44KXJvdGF0ZSg0NSwxMiwxMikiIHN0cm9rZT0iIzI5YjZmMiIgZmlsbD0iIzI5YjZmMiIgZD0iTTE1LDNsMi4zLDIuM2wtMi44OSwyLjg3bDEuNDIsMS40MkwxOC43LDYuN0wyMSw5VjNIMTV6IE0zLDlsMi4zLTIuM2wyLjg3LDIuODlsMS40Mi0xLjQyTDYuNyw1LjNMOSwzSDNWOXogTTksMjEgbC0yLjMtMi4zbDIuODktMi44N2wtMS40Mi0xLjQyTDUuMywxNy4zTDMsMTV2Nkg5eiBNMjEsMTVsLTIuMywyLjNsLTIuODctMi44OWwtMS40MiwxLjQybDIuODksMi44N0wxNSwyMWg2VjE1eiIvPjwvZz48L2c+PC9nPjwvc3ZnPgo=",Editor.zoomInImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTUuNSAxNGgtLjc5bC0uMjgtLjI3QzE1LjQxIDEyLjU5IDE2IDExLjExIDE2IDkuNSAxNiA1LjkxIDEzLjA5IDMgOS41IDNTMyA1LjkxIDMgOS41IDUuOTEgMTYgOS41IDE2YzEuNjEgMCAzLjA5LS41OSA0LjIzLTEuNTdsLjI3LjI4di43OWw1IDQuOTlMMjAuNDkgMTlsLTQuOTktNXptLTYgMEM3LjAxIDE0IDUgMTEuOTkgNSA5LjVTNy4wMSA1IDkuNSA1IDE0IDcuMDEgMTQgOS41IDExLjk5IDE0IDkuNSAxNHptMi41LTRoLTJ2Mkg5di0ySDdWOWgyVjdoMXYyaDJ2MXoiLz48L3N2Zz4=",Editor.zoomOutImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTUuNSAxNGgtLjc5bC0uMjgtLjI3QzE1LjQxIDEyLjU5IDE2IDExLjExIDE2IDkuNSAxNiA1LjkxIDEzLjA5IDMgOS41IDNTMyA1LjkxIDMgOS41IDUuOTEgMTYgOS41IDE2YzEuNjEgMCAzLjA5LS41OSA0LjIzLTEuNTdsLjI3LjI4di43OWw1IDQuOTlMMjAuNDkgMTlsLTQuOTktNXptLTYgMEM3LjAxIDE0IDUgMTEuOTkgNSA5LjVTNy4wMSA1IDkuNSA1IDE0IDcuMDEgMTQgOS41IDExLjk5IDE0IDkuNSAxNHpNNyA5aDV2MUg3eiIvPjwvc3ZnPg==",Editor.fullscreenImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMyA1djRoMlY1aDRWM0g1Yy0xLjEgMC0yIC45LTIgMnptMiAxMEgzdjRjMCAxLjEuOSAyIDIgMmg0di0ySDV2LTR6bTE0IDRoLTR2Mmg0YzEuMSAwIDItLjkgMi0ydi00aC0ydjR6bTAtMTZoLTR2Mmg0djRoMlY1YzAtMS4xLS45LTItMi0yeiIvPjwvc3ZnPg==",Editor.fullscreenExitImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTUgMTZoM3YzaDJ2LTVINXYyem0zLThINXYyaDVWNUg4djN6bTYgMTFoMnYtM2gzdi0yaC01djV6bTItMTFWNWgtMnY1aDVWOGgtM3oiLz48L3N2Zz4=",Editor.zoomFitImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTUgMTVIM3Y0YzAgMS4xLjkgMiAyIDJoNHYtMkg1di00ek01IDVoNFYzSDVjLTEuMSAwLTIgLjktMiAydjRoMlY1em03IDNjLTIuMjEgMC00IDEuNzktNCA0czEuNzkgNCA0IDQgNC0xLjc5IDQtNC0xLjc5LTQtNC00em0wIDZjLTEuMSAwLTItLjktMi0ycy45LTIgMi0yIDIgLjkgMiAyLS45IDItMiAyem03LTExaC00djJoNHY0aDJWNWMwLTEuMS0uOS0yLTItMnptMCAxNmgtNHYyaDRjMS4xIDAgMi0uOSAyLTJ2LTRoLTJ2NHoiLz48L3N2Zz4=",Editor.layersImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTExLjk5IDE4LjU0bC03LjM3LTUuNzNMMyAxNC4wN2w5IDcgOS03LTEuNjMtMS4yN3pNMTIgMTZsNy4zNi01LjczTDIxIDlsLTktNy05IDcgMS42MyAxLjI3TDEyIDE2em0wLTExLjQ3TDE3Ljc0IDkgMTIgMTMuNDcgNi4yNiA5IDEyIDQuNTN6Ii8+PC9zdmc+",Editor.previousImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE1LjQxIDcuNDFMMTQgNmwtNiA2IDYgNiAxLjQxLTEuNDFMMTAuODMgMTJsNC41OC00LjU5eiIvPjwvc3ZnPg==",Editor.nextImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEwIDZMOC41OSA3LjQxIDEzLjE3IDEybC00LjU4IDQuNTlMMTAgMThsNi02LTYtNnoiLz48L3N2Zz4=",Editor.editImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE0LjA2IDkuMDJsLjkyLjkyTDUuOTIgMTlINXYtLjkybDkuMDYtOS4wNk0xNy42NiAzYy0uMjUgMC0uNTEuMS0uNy4yOWwtMS44MyAxLjgzIDMuNzUgMy43NSAxLjgzLTEuODNjLjM5LS4zOS4zOS0xLjAyIDAtMS40MWwtMi4zNC0yLjM0Yy0uMi0uMi0uNDUtLjI5LS43MS0uMjl6bS0zLjYgMy4xOUwzIDE3LjI1VjIxaDMuNzVMMTcuODEgOS45NGwtMy43NS0zLjc1eiIvPjwvc3ZnPg==",Editor.duplicateImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE2IDFINGMtMS4xIDAtMiAuOS0yIDJ2MTRoMlYzaDEyVjF6bTMgNEg4Yy0xLjEgMC0yIC45LTIgMnYxNGMwIDEuMS45IDIgMiAyaDExYzEuMSAwIDItLjkgMi0yVjdjMC0xLjEtLjktMi0yLTJ6bTAgMTZIOFY3aDExdjE0eiIvPjwvc3ZnPg==",Editor.addImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnoiLz48L3N2Zz4=",Editor.crossImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE5IDYuNDFMMTcuNTkgNSAxMiAxMC41OSA2LjQxIDUgNSA2LjQxIDEwLjU5IDEyIDUgMTcuNTkgNi40MSAxOSAxMiAxMy40MSAxNy41OSAxOSAxOSAxNy41OSAxMy40MSAxMiAxOSA2LjQxeiIvPjwvc3ZnPg==",Editor.verticalDotsImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDhjMS4xIDAgMi0uOSAyLTJzLS45LTItMi0yLTIgLjktMiAyIC45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem0wIDZjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yeiIvPjwvc3ZnPg==",Editor.trashImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE2IDl2MTBIOFY5aDhtLTEuNS02aC01bC0xIDFINXYyaDE0VjRoLTMuNWwtMS0xek0xOCA3SDZ2MTJjMCAxLjEuOSAyIDIgMmg4YzEuMSAwIDItLjkgMi0yVjd6Ii8+PC9zdmc+",Editor.hiddenImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6bTAgMGgyNHYyNEgwVjB6bTAgMGgyNHYyNEgwVjB6bTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDZjMy43OSAwIDcuMTcgMi4xMyA4LjgyIDUuNS0uNTkgMS4yMi0xLjQyIDIuMjctMi40MSAzLjEybDEuNDEgMS40MWMxLjM5LTEuMjMgMi40OS0yLjc3IDMuMTgtNC41M0MyMS4yNyA3LjExIDE3IDQgMTIgNGMtMS4yNyAwLTIuNDkuMi0zLjY0LjU3bDEuNjUgMS42NUMxMC42NiA2LjA5IDExLjMyIDYgMTIgNnptLTEuMDcgMS4xNEwxMyA5LjIxYy41Ny4yNSAxLjAzLjcxIDEuMjggMS4yOGwyLjA3IDIuMDdjLjA4LS4zNC4xNC0uNy4xNC0xLjA3QzE2LjUgOS4wMSAxNC40OCA3IDEyIDdjLS4zNyAwLS43Mi4wNS0xLjA3LjE0ek0yLjAxIDMuODdsMi42OCAyLjY4QzMuMDYgNy44MyAxLjc3IDkuNTMgMSAxMS41IDIuNzMgMTUuODkgNyAxOSAxMiAxOWMxLjUyIDAgMi45OC0uMjkgNC4zMi0uODJsMy40MiAzLjQyIDEuNDEtMS40MUwzLjQyIDIuNDUgMi4wMSAzLjg3em03LjUgNy41bDIuNjEgMi42MWMtLjA0LjAxLS4wOC4wMi0uMTIuMDItMS4zOCAwLTIuNS0xLjEyLTIuNS0yLjUgMC0uMDUuMDEtLjA4LjAxLS4xM3ptLTMuNC0zLjRsMS43NSAxLjc1Yy0uMjMuNTUtLjM2IDEuMTUtLjM2IDEuNzggMCAyLjQ4IDIuMDIgNC41IDQuNSA0LjUuNjMgMCAxLjIzLS4xMyAxLjc3LS4zNmwuOTguOThjLS44OC4yNC0xLjguMzgtMi43NS4zOC0zLjc5IDAtNy4xNy0yLjEzLTguODItNS41LjctMS40MyAxLjcyLTIuNjEgMi45My0zLjUzeiIvPjwvc3ZnPg==",Editor.visibleImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDZjMy43OSAwIDcuMTcgMi4xMyA4LjgyIDUuNUMxOS4xNyAxNC44NyAxNS43OSAxNyAxMiAxN3MtNy4xNy0yLjEzLTguODItNS41QzQuODMgOC4xMyA4LjIxIDYgMTIgNm0wLTJDNyA0IDIuNzMgNy4xMSAxIDExLjUgMi43MyAxNS44OSA3IDE5IDEyIDE5czkuMjctMy4xMSAxMS03LjVDMjEuMjcgNy4xMSAxNyA0IDEyIDR6bTAgNWMxLjM4IDAgMi41IDEuMTIgMi41IDIuNVMxMy4zOCAxNCAxMiAxNHMtMi41LTEuMTItMi41LTIuNVMxMC42MiA5IDEyIDltMC0yYy0yLjQ4IDAtNC41IDIuMDItNC41IDQuNVM5LjUyIDE2IDEyIDE2czQuNS0yLjAyIDQuNS00LjVTMTQuNDggNyAxMiA3eiIvPjwvc3ZnPg==",Editor.lockedImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PGcgZmlsbD0ibm9uZSI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBvcGFjaXR5PSIuODciLz48L2c+PHBhdGggZD0iTTE4IDhoLTFWNmMwLTIuNzYtMi4yNC01LTUtNVM3IDMuMjQgNyA2djJINmMtMS4xIDAtMiAuOS0yIDJ2MTBjMCAxLjEuOSAyIDIgMmgxMmMxLjEgMCAyLS45IDItMlYxMGMwLTEuMS0uOS0yLTItMnpNOSA2YzAtMS42NiAxLjM0LTMgMy0zczMgMS4zNCAzIDN2Mkg5VjZ6bTkgMTRINlYxMGgxMnYxMHptLTYtM2MxLjEgMCAyLS45IDItMnMtLjktMi0yLTItMiAuOS0yIDIgLjkgMiAyIDJ6Ii8+PC9zdmc+",Editor.unlockedImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE4IDhoLTFWNmMwLTIuNzYtMi4yNC01LTUtNVM3IDMuMjQgNyA2aDJjMC0xLjY2IDEuMzQtMyAzLTNzMyAxLjM0IDMgM3YySDZjLTEuMSAwLTIgLjktMiAydjEwYzAgMS4xLjkgMiAyIDJoMTJjMS4xIDAgMi0uOSAyLTJWMTBjMC0xLjEtLjktMi0yLTJ6bTAgMTJINlYxMGgxMnYxMHptLTYtM2MxLjEgMCAyLS45IDItMnMtLjktMi0yLTItMiAuOS0yIDIgLjkgMiAyIDJ6Ii8+PC9zdmc+",Editor.printImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE5IDhoLTFWM0g2djVINWMtMS42NiAwLTMgMS4zNC0zIDN2Nmg0djRoMTJ2LTRoNHYtNmMwLTEuNjYtMS4zNC0zLTMtM3pNOCA1aDh2M0g4VjV6bTggMTJ2Mkg4di00aDh2MnptMi0ydi0ySDZ2Mkg0di00YzAtLjU1LjQ1LTEgMS0xaDE0Yy41NSAwIDEgLjQ1IDEgMXY0aC0yeiIvPjxjaXJjbGUgY3g9IjE4IiBjeT0iMTEuNSIgcj0iMSIvPjwvc3ZnPg==",Editor.refreshImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE3LjY1IDYuMzVDMTYuMiA0LjkgMTQuMjEgNCAxMiA0Yy00LjQyIDAtNy45OSAzLjU4LTcuOTkgOHMzLjU3IDggNy45OSA4YzMuNzMgMCA2Ljg0LTIuNTUgNy43My02aC0yLjA4Yy0uODIgMi4zMy0zLjA0IDQtNS42NSA0LTMuMzEgMC02LTIuNjktNi02czIuNjktNiA2LTZjMS42NiAwIDMuMTQuNjkgNC4yMiAxLjc4TDEzIDExaDdWNGwtMi4zNSAyLjM1eiIvPjwvc3ZnPg==",Editor.backImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIiBvcGFjaXR5PSIuODciLz48cGF0aCBkPSJNMTcuNTEgMy44N0wxNS43MyAyLjEgNS44NCAxMmw5LjkgOS45IDEuNzctMS43N0w5LjM4IDEybDguMTMtOC4xM3oiLz48L3N2Zz4=",Editor.closeImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIiBvcGFjaXR5PSIuODciLz48cGF0aCBkPSJNMTIgMkM2LjQ3IDIgMiA2LjQ3IDIgMTJzNC40NyAxMCAxMCAxMCAxMC00LjQ3IDEwLTEwUzE3LjUzIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTMuNTktMTNMMTIgMTAuNTkgOC40MSA3IDcgOC40MSAxMC41OSAxMiA3IDE1LjU5IDguNDEgMTcgMTIgMTMuNDEgMTUuNTkgMTcgMTcgMTUuNTkgMTMuNDEgMTIgMTcgOC40MXoiLz48L3N2Zz4=",Editor.closeBlackImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjZweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjZweCI+PGVsbGlwc2UgY3g9IjEyIiBjeT0iMTIiIHJ4PSI5IiByeT0iOSIgc3Ryb2tlPSJub25lIiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTE0LjU5IDhMMTIgMTAuNTkgOS40MSA4IDggOS40MSAxMC41OSAxMiA4IDE0LjU5IDkuNDEgMTYgMTIgMTMuNDEgMTQuNTkgMTYgMTYgMTQuNTkgMTMuNDEgMTIgMTYgOS40MSAxNC41OSA4ek0xMiAyQzYuNDcgMiAyIDYuNDcgMiAxMnM0LjQ3IDEwIDEwIDEwIDEwLTQuNDcgMTAtMTBTMTcuNTMgMiAxMiAyem0wIDE4Yy00LjQxIDAtOC0zLjU5LTgtOHMzLjU5LTggOC04IDggMy41OSA4IDgtMy41OSA4LTggOHoiLz48L3N2Zz4=",Editor.minusImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZD0iTTEwIDI1LjV2LTNoMjh2M1oiLz48L3N2Zz4=",Editor.plusImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgMTNoLTZ2NmgtMnYtNkg1di0yaDZWNWgydjZoNnYyeiIvPjwvc3ZnPg==",Editor.addBoxImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0iTTExIDE3aDJ2LTRoNHYtMmgtNFY3aC0ydjRIN3YyaDRabS02IDRxLS44MjUgMC0xLjQxMy0uNTg3UTMgMTkuODI1IDMgMTlWNXEwLS44MjUuNTg3LTEuNDEzUTQuMTc1IDMgNSAzaDE0cS44MjUgMCAxLjQxMy41ODdRMjEgNC4xNzUgMjEgNXYxNHEwIC44MjUtLjU4NyAxLjQxM1ExOS44MjUgMjEgMTkgMjFabTAtMmgxNFY1SDV2MTRaTTUgNXYxNFY1WiIvPjwvc3ZnPg==",Editor.shapesImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0iTTE1IDE1Wm0tNyAyLjk1cS4yNS4wMjUuNDg4LjAzOFE4LjcyNSAxOCA5IDE4dC41MTItLjAxMnEuMjM4LS4wMTMuNDg4LS4wMzhWMjBoMTBWMTBoLTIuMDVxLjAyNS0uMjUuMDM4LS40ODhRMTggOS4yNzUgMTggOXQtLjAxMi0uNTEyUTE3Ljk3NSA4LjI1IDE3Ljk1IDhIMjBxLjgyNSAwIDEuNDEzLjU4N1EyMiA5LjE3NSAyMiAxMHYxMHEwIC44MjUtLjU4NyAxLjQxM1EyMC44MjUgMjIgMjAgMjJIMTBxLS44MjUgMC0xLjQxMi0uNTg3UTggMjAuODI1IDggMjBaTTkgMTZxLTIuOTI1IDAtNC45NjMtMi4wMzhRMiAxMS45MjUgMiA5dDIuMDM3LTQuOTYzUTYuMDc1IDIgOSAycTIuOTI1IDAgNC45NjMgMi4wMzdRMTYgNi4wNzUgMTYgOXEwIDIuOTI1LTIuMDM3IDQuOTYyUTExLjkyNSAxNiA5IDE2Wm0wLTJxMi4wNzUgMCAzLjUzOC0xLjQ2M1ExNCAxMS4wNzUgMTQgOXQtMS40NjItMy41MzdRMTEuMDc1IDQgOSA0IDYuOTI1IDQgNS40NjMgNS40NjMgNCA2LjkyNSA0IDl0MS40NjMgMy41MzdRNi45MjUgMTQgOSAxNFptMC01WiIvPjwvc3ZnPg==",Editor.formatImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0iTTExIDIycS0uODI1IDAtMS40MTItLjU4N1E5IDIwLjgyNSA5IDIwdi00SDZxLS44MjUgMC0xLjQxMi0uNTg4UTQgMTQuODI1IDQgMTRWN3EwLTEuNjUgMS4xNzUtMi44MjVRNi4zNSAzIDggM2gxMnYxMXEwIC44MjUtLjU4NyAxLjQxMlExOC44MjUgMTYgMTggMTZoLTN2NHEwIC44MjUtLjU4NyAxLjQxM1ExMy44MjUgMjIgMTMgMjJaTTYgMTBoMTJWNWgtMXY0aC0yVjVoLTF2MmgtMlY1SDhxLS44MjUgMC0xLjQxMi41ODhRNiA2LjE3NSA2IDdabTAgNGgxMnYtMkg2djJabTAtMnYyWiIvPjwvc3ZnPg==",Editor.freehandImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyNCIgd2lkdGg9IjI0Ii8+PHBhdGggZD0iTTQuNSw4YzEuMDQsMCwyLjM0LTEuNSw0LjI1LTEuNWMxLjUyLDAsMi43NSwxLjIzLDIuNzUsMi43NWMwLDIuMDQtMS45OSwzLjE1LTMuOTEsNC4yMkM1LjQyLDE0LjY3LDQsMTUuNTcsNCwxNyBjMCwxLjEsMC45LDIsMiwydjJjLTIuMjEsMC00LTEuNzktNC00YzAtMi43MSwyLjU2LTQuMTQsNC42Mi01LjI4YzEuNDItMC43OSwyLjg4LTEuNiwyLjg4LTIuNDdjMC0wLjQxLTAuMzQtMC43NS0wLjc1LTAuNzUgQzcuNSw4LjUsNi4yNSwxMCw0LjUsMTBDMy4xMiwxMCwyLDguODgsMiw3LjVDMiw1LjQ1LDQuMTcsMi44Myw1LDJsMS40MSwxLjQxQzUuNDEsNC40Miw0LDYuNDMsNCw3LjVDNCw3Ljc4LDQuMjIsOCw0LjUsOHogTTgsMjEgbDMuNzUsMGw4LjA2LTguMDZsLTMuNzUtMy43NUw4LDE3LjI1TDgsMjF6IE0xMCwxOC4wOGw2LjA2LTYuMDZsMC45MiwwLjkyTDEwLjkyLDE5TDEwLDE5TDEwLDE4LjA4eiBNMjAuMzcsNi4yOSBjLTAuMzktMC4zOS0xLjAyLTAuMzktMS40MSwwbC0xLjgzLDEuODNsMy43NSwzLjc1bDEuODMtMS44M2MwLjM5LTAuMzksMC4zOS0xLjAyLDAtMS40MUwyMC4zNyw2LjI5eiIvPjwvc3ZnPg==",Editor.undoImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIuNSA4Yy0yLjY1IDAtNS4wNS45OS02LjkgMi42TDIgN3Y5aDlsLTMuNjItMy42MmMxLjM5LTEuMTYgMy4xNi0xLjg4IDUuMTItMS44OCAzLjU0IDAgNi41NSAyLjMxIDcuNiA1LjVsMi4zNy0uNzhDMjEuMDggMTEuMDMgMTcuMTUgOCAxMi41IDh6Ii8+PC9zdmc+",Editor.redoImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTguNCAxMC42QzE2LjU1IDguOTkgMTQuMTUgOCAxMS41IDhjLTQuNjUgMC04LjU4IDMuMDMtOS45NiA3LjIyTDMuOSAxNmMxLjA1LTMuMTkgNC4wNS01LjUgNy42LTUuNSAxLjk1IDAgMy43My43MiA1LjEyIDEuODhMMTMgMTZoOVY3bC0zLjYgMy42eiIvPjwvc3ZnPg==",Editor.outlineImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0ibTE1IDIxLTYtMi4xLTQuNjUgMS44cS0uNS4yLS45MjUtLjExM1EzIDIwLjI3NSAzIDE5Ljc1di0xNHEwLS4zMjUuMTg4LS41NzUuMTg3LS4yNS41MTItLjM3NUw5IDNsNiAyLjEgNC42NS0xLjhxLjUtLjIuOTI1LjExMi40MjUuMzEzLjQyNS44Mzh2MTRxMCAuMzI1LS4xODguNTc1LS4xODcuMjUtLjUxMi4zNzVabS0xLTIuNDVWNi44NWwtNC0xLjR2MTEuN1ptMiAwIDMtMVY1LjdsLTMgMS4xNVpNNSAxOC4zbDMtMS4xNVY1LjQ1bC0zIDFaTTE2IDYuODV2MTEuN1ptLTgtMS40djExLjdaIi8+PC9zdmc+",Editor.saveImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE5IDEydjdINXYtN0gzdjdjMCAxLjEuOSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMnYtN2gtMnptLTYgLjY3bDIuNTktMi41OEwxNyAxMS41bC01IDUtNS01IDEuNDEtMS40MUwxMSAxMi42N1YzaDJ2OS42N3oiLz48L3N2Zz4=",Editor.compareImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZD0ibTE1Ljg1IDQwLTIuMS0yLjEgNi4wNS02LjA1SDR2LTNoMTUuOGwtNi4wNS02LjA1IDIuMS0yLjEgOS42NSA5LjY1Wm0xNi4zLTEyLjctOS42NS05LjY1TDMyLjE1IDhsMi4xIDIuMS02LjA1IDYuMDVINDR2M0gyOC4ybDYuMDUgNi4wNVoiLz48L3N2Zz4=",Editor.expandMoreImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0ibTEyIDE1LjM3NS02LTYgMS40LTEuNCA0LjYgNC42IDQuNi00LjYgMS40IDEuNFoiLz48L3N2Zz4=",Editor.expandLessImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0ibTcuNCAxNS4zNzUtMS40LTEuNCA2LTYgNiA2LTEuNCAxLjQtNC42LTQuNloiLz48L3N2Zz4=",Editor.gearImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0ibTkuMjUgMjItLjQtMy4ycS0uMzI1LS4xMjUtLjYxMi0uMy0uMjg4LS4xNzUtLjU2My0uMzc1TDQuNyAxOS4zNzVsLTIuNzUtNC43NSAyLjU3NS0xLjk1UTQuNSAxMi41IDQuNSAxMi4zMzd2LS42NzVxMC0uMTYyLjAyNS0uMzM3TDEuOTUgOS4zNzVsMi43NS00Ljc1IDIuOTc1IDEuMjVxLjI3NS0uMi41NzUtLjM3NS4zLS4xNzUuNi0uM2wuNC0zLjJoNS41bC40IDMuMnEuMzI1LjEyNS42MTMuMy4yODcuMTc1LjU2Mi4zNzVsMi45NzUtMS4yNSAyLjc1IDQuNzUtMi41NzUgMS45NXEuMDI1LjE3NS4wMjUuMzM3di42NzVxMCAuMTYzLS4wNS4zMzhsMi41NzUgMS45NS0yLjc1IDQuNzUtMi45NS0xLjI1cS0uMjc1LjItLjU3NS4zNzUtLjMuMTc1LS42LjNsLS40IDMuMlptMi44LTYuNXExLjQ1IDAgMi40NzUtMS4wMjVRMTUuNTUgMTMuNDUgMTUuNTUgMTJxMC0xLjQ1LTEuMDI1LTIuNDc1UTEzLjUgOC41IDEyLjA1IDguNXEtMS40NzUgMC0yLjQ4OCAxLjAyNVE4LjU1IDEwLjU1IDguNTUgMTJxMCAxLjQ1IDEuMDEyIDIuNDc1UTEwLjU3NSAxNS41IDEyLjA1IDE1LjVabTAtMnEtLjYyNSAwLTEuMDYyLS40MzgtLjQzOC0uNDM3LS40MzgtMS4wNjJ0LjQzOC0xLjA2MnEuNDM3LS40MzggMS4wNjItLjQzOHQxLjA2My40MzhxLjQzNy40MzcuNDM3IDEuMDYydC0uNDM3IDEuMDYycS0uNDM4LjQzOC0xLjA2My40MzhaTTEyIDEyWm0tMSA4aDEuOTc1bC4zNS0yLjY1cS43NzUtLjIgMS40MzgtLjU4OC42NjItLjM4NyAxLjIxMi0uOTM3bDIuNDc1IDEuMDI1Ljk3NS0xLjctMi4xNS0xLjYyNXEuMTI1LS4zNS4xNzUtLjczOC4wNS0uMzg3LjA1LS43ODd0LS4wNS0uNzg4cS0uMDUtLjM4Ny0uMTc1LS43MzdsMi4xNS0xLjYyNS0uOTc1LTEuNy0yLjQ3NSAxLjA1cS0uNTUtLjU3NS0xLjIxMi0uOTYzLS42NjMtLjM4Ny0xLjQzOC0uNTg3TDEzIDRoLTEuOTc1bC0uMzUgMi42NXEtLjc3NS4yLTEuNDM3LjU4Ny0uNjYzLjM4OC0xLjIxMy45MzhMNS41NSA3LjE1bC0uOTc1IDEuNyAyLjE1IDEuNnEtLjEyNS4zNzUtLjE3NS43NS0uMDUuMzc1LS4wNS44IDAgLjQuMDUuNzc1dC4xNzUuNzVsLTIuMTUgMS42MjUuOTc1IDEuNyAyLjQ3NS0xLjA1cS41NS41NzUgMS4yMTMuOTYyLjY2Mi4zODggMS40MzcuNTg4WiIvPjwvc3ZnPg==",Editor.extensionImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0iTTguOCAyMUg1cS0uODI1IDAtMS40MTMtLjU4N1EzIDE5LjgyNSAzIDE5di0zLjhxMS4yIDAgMi4xLS43NjIuOS0uNzYzLjktMS45MzggMC0xLjE3NS0uOS0xLjkzOFE0LjIgOS44IDMgOS44VjZxMC0uODI1LjU4Ny0xLjQxMlE0LjE3NSA0IDUgNGg0cTAtMS4wNS43MjUtMS43NzVRMTAuNDUgMS41IDExLjUgMS41cTEuMDUgMCAxLjc3NS43MjVRMTQgMi45NSAxNCA0aDRxLjgyNSAwIDEuNDEzLjU4OFEyMCA1LjE3NSAyMCA2djRxMS4wNSAwIDEuNzc1LjcyNS43MjUuNzI1LjcyNSAxLjc3NSAwIDEuMDUtLjcyNSAxLjc3NVEyMS4wNSAxNSAyMCAxNXY0cTAgLjgyNS0uNTg3IDEuNDEzUTE4LjgyNSAyMSAxOCAyMWgtMy44cTAtMS4yNS0uNzg3LTIuMTI1UTEyLjYyNSAxOCAxMS41IDE4dC0xLjkxMi44NzVROC44IDE5Ljc1IDguOCAyMVpNNSAxOWgyLjEyNXEuNi0xLjY1IDEuOTI1LTIuMzI1UTEwLjM3NSAxNiAxMS41IDE2cTEuMTI1IDAgMi40NS42NzUgMS4zMjUuNjc1IDEuOTI1IDIuMzI1SDE4di02aDJxLjIgMCAuMzUtLjE1LjE1LS4xNS4xNS0uMzUgMC0uMi0uMTUtLjM1UTIwLjIgMTIgMjAgMTJoLTJWNmgtNlY0cTAtLjItLjE1LS4zNS0uMTUtLjE1LS4zNS0uMTUtLjIgMC0uMzUuMTVRMTEgMy44IDExIDR2Mkg1djIuMnExLjM1LjUgMi4xNzUgMS42NzVROCAxMS4wNSA4IDEyLjVxMCAxLjQyNS0uODI1IDIuNlQ1IDE2LjhabTcuNzUtNy43NVoiLz48L3N2Zz4=",Editor.colorDropperImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZD0iTTYgNDJ2LTguNGwxOC44NS0xOC44NS0zLjYtMy42TDIzLjMgOS4xbDQuNiA0LjZMMzUgNi42cS41NS0uNTUgMS4xNzUtLjU1dDEuMTc1LjU1bDQuMDUgNC4wNXEuNTUuNTUuNTUgMS4xNzVUNDEuNCAxM2wtNy4xIDcuMSA0LjYgNC42LTIuMDUgMi4wNS0zLjYtMy42TDE0LjQgNDJabTMtM2g0LjM1TDMxLjEgMjEuMjVsLTQuMzUtNC4zNUw5IDM0LjY1Wm0yMy4xNS0yMSA2LjItNi4yLTIuMTUtMi4xNS02LjIgNi4yWm0wIDBMMzAgMTUuODUgMzIuMTUgMThaIi8+PC9zdmc+",Editor.magnifyImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIGQ9Ik03ODQtMTIwIDUzMi0zNzJxLTMwIDI0LTY5IDM4dC04MyAxNHEtMTA5IDAtMTg0LjUtNzUuNVQxMjAtNTgwcTAtMTA5IDc1LjUtMTg0LjVUMzgwLTg0MHExMDkgMCAxODQuNSA3NS41VDY0MC01ODBxMCA0NC0xNCA4M3QtMzggNjlsMjUyIDI1Mi01NiA1NlpNMzgwLTQwMHE3NSAwIDEyNy41LTUyLjVUNTYwLTU4MHEwLTc1LTUyLjUtMTI3LjVUMzgwLTc2MHEtNzUgMC0xMjcuNSA1Mi41VDIwMC01ODBxMCA3NSA1Mi41IDEyNy41VDM4MC00MDBaIi8+PC9zdmc+",Editor.sendImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIGQ9Ik0xMjAtMTYwdi02NDBsNzYwIDMyMC03NjAgMzIwWm04MC0xMjAgNDc0LTIwMC00NzQtMjAwdjE0MGwyNDAgNjAtMjQwIDYwdjE0MFptMCAwdi00MDAgNDAwWiIvPjwvc3ZnPg==",Editor.sparklesImage="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KDTwhLS0gVXBsb2FkZWQgdG86IFNWRyBSZXBvLCB3d3cuc3ZncmVwby5jb20sIFRyYW5zZm9ybWVkIGJ5OiBTVkcgUmVwbyBNaXhlciBUb29scyAtLT4KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBpZD0iaWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbD0iI2ZjZmY0NyIgZGF0YS1kYXJrcmVhZGVyLWlubGluZS1maWxsPSIiIHN0eWxlPSItLWRhcmtyZWFkZXItaW5saW5lLWZpbGw6ICNkNmQ4NTA7IC0tZGFya3JlYWRlci1pbmxpbmUtc3Ryb2tlOiAjZDZkODUwOyIgc3Ryb2tlPSIjZmNmZjQ3IiBkYXRhLWRhcmtyZWFkZXItaW5saW5lLXN0cm9rZT0iIj4KDTxnIGlkPSJTVkdSZXBvX2JnQ2FycmllciIgc3Ryb2tlLXdpZHRoPSIwIi8+Cg08ZyBpZD0iU1ZHUmVwb190cmFjZXJDYXJyaWVyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KDTxnIGlkPSJTVkdSZXBvX2ljb25DYXJyaWVyIj4KDTxwYXRoIGQ9Ik0yNTkuOTIsMjYyLjkxLDIxNi40LDE0OS43N2E5LDksMCwwLDAtMTYuOCwwTDE1Ni4wOCwyNjIuOTFhOSw5LDAsMCwxLTUuMTcsNS4xN0wzNy43NywzMTEuNmE5LDksMCwwLDAsMCwxNi44bDExMy4xNCw0My41MmE5LDksMCwwLDEsNS4xNyw1LjE3TDE5OS42LDQ5MC4yM2E5LDksMCwwLDAsMTYuOCwwbDQzLjUyLTExMy4xNGE5LDksMCwwLDEsNS4xNy01LjE3TDM3OC4yMywzMjguNGE5LDksMCwwLDAsMC0xNi44TDI2NS4wOSwyNjguMDhBOSw5LDAsMCwxLDI1OS45MiwyNjIuOTFaIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxOS45NjgiIGRhdGEtZGFya3JlYWRlci1pbmxpbmUtc3Ryb2tlPSIiIHN0eWxlPSItLWRhcmtyZWFkZXItaW5saW5lLXN0cm9rZTogIzE4MWExYjsiLz4KDTxwb2x5Z29uIHBvaW50cz0iMTA4IDY4IDg4IDE2IDY4IDY4IDE2IDg4IDY4IDEwOCA4OCAxNjAgMTA4IDEwOCAxNjAgODggMTA4IDY4IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxOS45NjgiIGRhdGEtZGFya3JlYWRlci1pbmxpbmUtc3Ryb2tlPSIiIHN0eWxlPSItLWRhcmtyZWFkZXItaW5saW5lLXN0cm9rZTogIzE4MWExYjsiLz4KDTxwb2x5Z29uIHBvaW50cz0iNDI2LjY3IDExNy4zMyA0MDAgNDggMzczLjMzIDExNy4zMyAzMDQgMTQ0IDM3My4zMyAxNzAuNjcgNDAwIDI0MCA0MjYuNjcgMTcwLjY3IDQ5NiAxNDQgNDI2LjY3IDExNy4zMyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMTkuOTY4IiBkYXRhLWRhcmtyZWFkZXItaW5saW5lLXN0cm9rZT0iIiBzdHlsZT0iLS1kYXJrcmVhZGVyLWlubGluZS1zdHJva2U6ICMxODFhMWI7Ii8+Cg08L2c+Cg08L3N2Zz4=",Editor.checkmarkImage=Editor.lightCheckmarkImage,Editor.roughFillStyles=[{val:"auto",dispName:"Auto"},{val:"hachure",dispName:"Hachure"},{val:"solid",dispName:"Solid"},{val:"zigzag",dispName:"ZigZag"},{val:"cross-hatch",dispName:"Cross Hatch"},{val:"dashed",dispName:"Dashed"},{val:"zigzag-line",dispName:"ZigZag Line"}],Editor.fillStyles=[{val:"auto",dispName:"Auto"},{val:"hatch",dispName:"Hatch"},{val:"solid",dispName:"Solid"},{val:"dots",dispName:"Dots"},{val:"cross-hatch",dispName:"Cross Hatch"},{val:"dashed",dispName:"Dashed"},{val:"zigzag-line",dispName:"ZigZag Line"}],Editor.themes=[],Editor.ctrlKey=mxClient.IS_MAC?"Cmd":"Ctrl",Editor.hintOffset=20,Editor.shapePickerHoverDelay=300,Editor.fitWindowBorders=null,Editor.popupsAllowed=null==window.urlParams||"1"!=urlParams.noDevice,Editor.simpleLabels=!1,Editor.enableNativeCipboard=window==window.top&&!mxClient.IS_FF&&null!=navigator.clipboard,Editor.sketchMode=!1,Editor.enableCssDarkMode=!window.mxIsElectron,Editor.cssDarkMode=!1,Editor.darkMode=!1,Editor.currentTheme=uiTheme,Editor.darkColor=Editor.enableCssDarkMode?"#121212":"#18141D",Editor.lightColor="#f0f0f0",Editor.fontSizeUnit="px",Editor.pageSizeUnit=mxConstants.INCHES,Editor.isDarkMode=function(t){return Editor.darkMode},Editor.isPngDataUrl=function(t){return null!=t&&"data:image/png;"==t.substring(0,15)},Editor.isPngData=function(t){return 8<t.length&&137==t.charCodeAt(0)&&80==t.charCodeAt(1)&&78==t.charCodeAt(2)&&71==t.charCodeAt(3)&&13==t.charCodeAt(4)&&10==t.charCodeAt(5)&&26==t.charCodeAt(6)&&10==t.charCodeAt(7)},Editor.convertHtmlToText=function(t){var e;return null!=t?((e=document.createElement("div")).innerHTML=Graph.sanitizeHtml(t),mxUtils.extractTextWithWhitespace(e.childNodes)):null},Editor.extractGraphModelFromPng=function(t){var i=null;try{var e=t.substring(t.indexOf(",")+1),l=window.atob&&!mxClient.IS_SF?atob(e):Base64.decode(e,!0);EditorUi.parsePng(l,mxUtils.bind(this,function(t,e,n){t=l.substring(t+8,t+8+n);if("zTXt"==e?(n=t.indexOf(String.fromCharCode(0)),"mxGraphModel"==t.substring(0,n)&&null!=(n=pako.inflateRaw(Graph.stringToArrayBuffer(t.substring(n+2)),{to:"string"}).replace(/\+/g," "))&&0<n.length&&(i=n)):"tEXt"==e&&1<(n=t.split(String.fromCharCode(0))).length&&("mxGraphModel"==n[0]||"mxfile"==n[0])&&(i=n[1]),null!=i||"IDAT"==e)return!0}))}catch(t){}return i=null!=(i=null!=i&&"%"==i.charAt(0)?decodeURIComponent(i):i)&&"%"==i.charAt(0)?decodeURIComponent(i):i},Editor.soundex=function(t){if(null==t||0==t.length)return"";var e,n=[],i=1,l="01230120022455012603010202";n[0]=t[0].toUpperCase();for(var s=1,o=t.length;s<o&&!(0<=(e=t[s].toUpperCase().charCodeAt(0)-65)&&e<=25&&"0"!=l[e]&&(l[e]!=n[i-1]&&(n[i]=l[e],i++),3<i));s++);if(i<=3)for(;i<=3;)n[i]="0",i++;return n.join("")},Editor.selectFilename=function(t){var e,n=0<(n=0<(n=t.value.lastIndexOf("."))&&"drawio"!=(e=t.value.substring(n+1))&&0<=mxUtils.indexOf(["png","svg","html","xml","pdf"],e)&&0<(e=t.value.lastIndexOf(".drawio.",n))?e:n)?n:t.value.length;Editor.selectSubstring(t,0,n)},Editor.selectSubstring=function(t,e,n){t.focus(),void 0!==t.selectionStart?(t.selectionStart=e,t.selectionEnd=n):document.selection&&document.selection.createRange&&(t.select(),(t=document.selection.createRange()).collapse(!0),t.moveEnd("character",n),t.moveStart("character",e),t.select())},Editor.toUnit=function(t,e){return e==mxConstants.INCHES?Math.round(100*t/mxConstants.PIXELS_PER_INCH)/100:e==mxConstants.MILLIMETERS?Math.round(100*t/mxConstants.PIXELS_PER_MM)/100:e==mxConstants.METERS?Math.round(1e3*t/(1e3*mxConstants.PIXELS_PER_MM))/1e3:Math.round(t)},Editor.fromUnit=function(t,e){return e==mxConstants.INCHES?Math.round(t*mxConstants.PIXELS_PER_INCH):e==mxConstants.MILLIMETERS?Math.round(t*mxConstants.PIXELS_PER_MM):e==mxConstants.METERS?Math.round(t*mxConstants.PIXELS_PER_MM*1e3):Math.round(t)},mxUtils.extend(Editor,mxEventSource),Editor.prototype.originalNoForeignObject=mxClient.NO_FO,Editor.prototype.transparentImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhMAAwAIAAAP///wAAACH5BAEAAAAALAAAAAAwADAAAAIxhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8egpAAA7":IMAGE_PATH+"/transparent.gif",Editor.prototype.extendCanvas=!0,Editor.prototype.chromeless=!1,Editor.prototype.cancelFirst=!0,Editor.prototype.enabled=!0,Editor.prototype.filename=null,Editor.prototype.modified=!1,Editor.prototype.autosave=!0,Editor.prototype.initialTopSpacing=0,Editor.prototype.appName=document.title,Editor.prototype.editBlankUrl=window.location.origin+window.location.pathname,Editor.prototype.defaultGraphOverflow="hidden",Editor.prototype.init=function(){},Editor.prototype.isChromelessView=function(){return this.chromeless},Editor.prototype.setAutosave=function(t){this.autosave=t,this.fireEvent(new mxEventObject("autosaveChanged"))},Editor.prototype.getEditBlankUrl=function(t){return this.editBlankUrl+t},Editor.prototype.editAsNew=function(e,t){var n,i,t=null!=t?"?title="+encodeURIComponent(t):"";null!=urlParams.ui&&(t+=(0<t.length?"&":"?")+"ui="+urlParams.ui),void 0!==window.postMessage&&(null==document.documentMode||10<=document.documentMode)?(n=null,i=mxUtils.bind(this,function(t){"ready"==t.data&&t.source==n&&(mxEvent.removeListener(window,"message",i),n.postMessage(e,"*"))}),mxEvent.addListener(window,"message",i),n=this.graph.openLink(this.getEditBlankUrl(t+(0<t.length?"&":"?")+"client=1"),null,!0)):this.graph.openLink(this.getEditBlankUrl(t)+"#R"+encodeURIComponent(e))},Editor.prototype.createGraph=function(t,e){var e=new Graph(null,e,null,null,t),n=(e.transparentBackground=!1,e.isCssTransformsSupported),i=this;return e.isCssTransformsSupported=function(){return n.apply(this,arguments)&&(!i.chromeless||!mxClient.IS_SF)},this.chromeless||(e.isBlankLink=function(t){return!this.isExternalProtocol(t)}),e},Editor.prototype.resetGraph=function(){this.graph.gridEnabled=this.graph.defaultGridEnabled&&(!this.isChromelessView()||"1"==urlParams.grid),this.graph.graphHandler.guidesEnabled=!0,this.graph.setTooltips(!0),this.graph.setConnectable(!0),this.graph.foldingEnabled=!0,this.graph.scrollbars=this.graph.defaultScrollbars,this.graph.pageVisible=this.graph.defaultPageVisible,this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,this.graph.background=null,this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.pageFormat=mxGraph.prototype.pageFormat,this.graph.currentScale=1,this.graph.currentTranslate.x=0,this.graph.currentTranslate.y=0,this.updateGraphComponents(),this.graph.view.setScale(1)},Editor.prototype.readGraphState=function(t){var e=t.getAttribute("grid"),e=(null!=e&&""!=e||(e=this.graph.defaultGridEnabled?"1":"0"),this.graph.gridEnabled="0"!=e&&(!this.isChromelessView()||"1"==urlParams.grid),this.graph.gridSize=parseFloat(t.getAttribute("gridSize"))||mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled="0"!=t.getAttribute("guides"),this.graph.setTooltips("0"!=t.getAttribute("tooltips")),this.graph.setConnectable("0"!=t.getAttribute("connect")),this.graph.connectionArrowsEnabled="0"!=t.getAttribute("arrows"),this.graph.foldingEnabled="0"!=t.getAttribute("fold"),this.isChromelessView()&&this.graph.foldingEnabled&&(this.graph.foldingEnabled="1"==urlParams.nav,this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled),parseFloat(t.getAttribute("pageScale"))),e=(!isNaN(e)&&0<e?this.graph.pageScale=e:this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.isLightboxView()||this.graph.isViewer()?this.graph.pageVisible=!1:(e=t.getAttribute("page"),this.graph.pageVisible=null!=e?"0"!=e:this.graph.defaultPageVisible),this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,parseFloat(t.getAttribute("pageWidth"))),n=parseFloat(t.getAttribute("pageHeight")),e=(isNaN(e)||isNaN(n)||(this.graph.pageFormat=new mxRectangle(0,0,e,n)),t.getAttribute("background"));null!=e&&0<e.length?this.graph.background=e:this.graph.background=null},Editor.prototype.setGraphXml=function(t){if(null!=t){var e=new mxCodec(t.ownerDocument);if("mxGraphModel"==t.nodeName){this.graph.model.beginUpdate();try{this.graph.model.clear(),this.graph.view.scale=1,this.readGraphState(t),this.updateGraphComponents(),e.decode(t,this.graph.getModel())}finally{this.graph.model.endUpdate()}}else{if("root"!=t.nodeName)throw{message:mxResources.get("cannotOpenFile"),node:t,toString:function(){return this.message}};this.resetGraph();var n=e.document.createElement("mxGraphModel");n.appendChild(t),e.decode(n,this.graph.getModel()),this.updateGraphComponents()}}else this.resetGraph(),this.graph.model.clear();this.fireEvent(new mxEventObject("resetGraphView"))},Editor.prototype.getGraphXml=function(t){var e=null;return(t=null==t||t)?(e=(t=new mxCodec(mxUtils.createXmlDocument())).encode(this.graph.getModel()),t.document.appendChild(e)):e=this.graph.encodeCells(mxUtils.sortCells(this.graph.model.getTopmostCells(this.graph.getSelectionCells()))),0==this.graph.view.translate.x&&0==this.graph.view.translate.y||(e.setAttribute("dx",Math.round(100*this.graph.view.translate.x)/100),e.setAttribute("dy",Math.round(100*this.graph.view.translate.y)/100)),e.setAttribute("grid",this.graph.isGridEnabled()?"1":"0"),e.setAttribute("gridSize",this.graph.gridSize),e.setAttribute("guides",this.graph.graphHandler.guidesEnabled?"1":"0"),e.setAttribute("tooltips",this.graph.tooltipHandler.isEnabled()?"1":"0"),e.setAttribute("connect",this.graph.connectionHandler.isEnabled()?"1":"0"),e.setAttribute("arrows",this.graph.connectionArrowsEnabled?"1":"0"),e.setAttribute("fold",this.graph.foldingEnabled?"1":"0"),e.setAttribute("page",this.graph.pageVisible?"1":"0"),e.setAttribute("pageScale",this.graph.pageScale),e.setAttribute("pageWidth",this.graph.pageFormat.width),e.setAttribute("pageHeight",this.graph.pageFormat.height),null!=this.graph.background&&e.setAttribute("background",this.graph.background),e},Editor.prototype.updateGraphComponents=function(){var t=this.graph;null!=t.container&&(t.view.validateBackground(),t.container.style.overflow=t.scrollbars?"auto":this.defaultGraphOverflow,this.fireEvent(new mxEventObject("updateGraphComponents")))},Editor.prototype.setModified=function(t){this.modified=t},Editor.prototype.setFilename=function(t){this.filename=t},Editor.prototype.createUndoManager=function(){function t(t,e){var e=e.getProperty("edit").changes,n=o.getSelectionCellsForChanges(e),i=!1;if(0<n.length){for(var l=[],s=0;s<n.length;s++)null!=o.view.getState(n[s])&&(l.push(n[s]),i||(o.scrollCellToVisible(n[s]),i=!0));o.setSelectionCells(l)}}var o=this.graph,n=new mxUndoManager,e=(this.undoListener=function(t,e){n.undoableEditHappened(e.getProperty("edit"))},mxUtils.bind(this,function(t,e){this.undoListener.apply(this,arguments)}));o.getModel().addListener(mxEvent.UNDO,e),o.getView().addListener(mxEvent.UNDO,e);return n.addListener(mxEvent.UNDO,t),n.addListener(mxEvent.REDO,t),n},Editor.prototype.initStencilRegistry=function(){},Editor.prototype.destroy=function(){null!=this.graph&&(this.graph.destroy(),this.graph=null)},function(t){this.producer=null,this.consumer=null,this.done=t,this.args=null});function Dialog(i,l,s,o,t,e,n,r,a,h,u){this.editorUi=i;var d,p=a?57:0,m=s,c=o,g=a?0:64,x=Editor.inlineFullscreen||null==i.embedViewport?this.getDocumentSize():mxUtils.clone(i.embedViewport),y=(null==i.embedViewport&&null!=window.innerHeight&&(x.height=window.innerHeight),x.height),x=Math.max(1,Math.round((x.width-s-g)/2)),C=Math.max(1,Math.round((y-o-i.footerHeight)/3)),f=(l.style.maxHeight="100%",s=null!=document.body?Math.min(s,document.body.scrollWidth-g):s,o=Math.min(o,y-g),0<i.dialogs.length&&(this.zIndex+=2*i.dialogs.length),null==this.bg&&(this.bg=i.createDiv("geBackground"),this.bg.style.position="absolute",this.bg.style.height=y+"px",this.bg.style.right="0px",this.bg.style.zIndex=this.zIndex-2,mxUtils.setOpacity(this.bg,this.bgOpacity)),mxUtils.getDocumentScrollOrigin(document)),v=(this.bg.style.left=f.x+"px",this.bg.style.top=f.y+"px",x+=f.x,C+=f.y,Editor.inlineFullscreen||null==i.embedViewport||(this.bg.style.height=this.getDocumentSize().height+"px",C+=i.embedViewport.y,x+=i.embedViewport.x),t&&document.body.appendChild(this.bg),i.createDiv(a?"geTransDialog":"geDialog")),f=this.getPosition(x,C,s,o),x=f.x,C=f.y;v.style.width=s+"px",v.style.height=o+"px",v.style.left=x+"px",v.style.top=C+"px",v.style.zIndex=this.zIndex,v.appendChild(l),document.body.appendChild(v),!r&&l.clientHeight>v.clientHeight-g&&(l.style.overflowY="auto"),l.style.overflowX="hidden",e&&((t=document.createElement("img")).setAttribute("src",Dialog.prototype.closeImage),t.setAttribute("title",mxResources.get("close")),t.className="geDialogClose",t.style.top=C+14+"px",t.style.left=x+s+38-p+"px",t.style.zIndex=this.zIndex,mxEvent.addListener(t,"click",mxUtils.bind(this,function(){i.hideDialog(!0)})),document.body.appendChild(t),this.dialogImg=t,u||(d=!1,mxEvent.addGestureListeners(this.bg,mxUtils.bind(this,function(t){d=!0}),null,mxUtils.bind(this,function(t){d&&(i.hideDialog(!0),d=!1)})))),this.resizeListener=mxUtils.bind(this,function(){null!=h&&null!=(t=h())&&(m=s=t.w,c=o=t.h);var t=Editor.inlineFullscreen||null==i.embedViewport?this.getDocumentSize():mxUtils.clone(i.embedViewport),e=(y=t.height,this.bg.style.height=y+"px",Editor.inlineFullscreen||null==i.embedViewport||(this.bg.style.height=this.getDocumentSize().height+"px"),e=Math.max(1,Math.round((t.width-s-g)/2)),n=Math.max(1,Math.round((y-o-i.footerHeight)/3)),s=null!=document.body?Math.min(m,document.body.scrollWidth-g):m,o=Math.min(c,y-g),Math.max(1,Math.round((t.width-s-g)/2))),n=Math.max(1,Math.round((y-o-i.footerHeight)/3)),t=this.getPosition(e,n,s,o),e=t.x,n=t.y,t=mxUtils.getDocumentScrollOrigin(document);e+=t.x,n+=t.y,Editor.inlineFullscreen||null==i.embedViewport||(n+=i.embedViewport.y,e+=i.embedViewport.x),v.style.left=e+"px",v.style.top=n+"px",v.style.width=s+"px",v.style.height=o+"px",!r&&l.clientHeight>v.clientHeight-g&&(l.style.overflowY="auto"),null!=this.dialogImg&&(this.dialogImg.style.top=n+14+"px",this.dialogImg.style.left=e+s+38-p+"px")}),null!=i.embedViewport?i.addListener("embedViewportChanged",this.resizeListener):mxEvent.addListener(window,"resize",this.resizeListener),this.onDialogClose=n,this.container=v,i.editor.fireEvent(new mxEventObject("showDialog"))}OpenFile.prototype.setConsumer=function(t){this.consumer=t,this.execute()},OpenFile.prototype.setData=function(){this.args=arguments,this.execute()},OpenFile.prototype.error=function(t){this.cancel(!0),mxUtils.alert(t)},OpenFile.prototype.execute=function(){null!=this.consumer&&null!=this.args&&(this.cancel(!1),this.consumer.apply(this,this.args))},OpenFile.prototype.cancel=function(t){null!=this.done&&this.done(null==t||t)},Dialog.prototype.zIndex=mxPopupMenu.prototype.zIndex-2,Dialog.prototype.noColorImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzRDlBMUUwODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzRDlBMUUxODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTNEOUExREU4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTNEOUExREY4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xh3fmAAAABlBMVEX////MzMw46qqDAAAAGElEQVR42mJggAJGKGAYIIGBth8KAAIMAEUQAIElnLuQAAAAAElFTkSuQmCC":IMAGE_PATH+"/nocolor.png",Dialog.prototype.defaultColorImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAABlBMVEUAAAD///+l2Z/dAAAAKUlEQVQI1wXBMREAIAwEsHAMjJVQKZVW6U8CDpdH0QxLnLjxoqJjYvMBewMJ51TWcscAAAAASUVORK5CYII=":IMAGE_PATH+"/defaultcolor.png",Dialog.prototype.closeImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAABlBMVEV7mr3///+wksspAAAAAnRSTlP/AOW3MEoAAAAdSURBVAgdY9jXwCDDwNDRwHCwgeExmASygSL7GgB12QiqNHZZIwAAAABJRU5ErkJggg==":IMAGE_PATH+"/close.png",Dialog.prototype.clearImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQAKAIABAMDAwP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUIzOEM1NzI4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUIzOEM1NzM4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QjM4QzU3MDg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QjM4QzU3MTg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAANAAoAAAIXTGCJebD9jEOTqRlttXdrB32PJ2ncyRQAOw==":IMAGE_PATH+"/clear.gif",Dialog.prototype.bgOpacity=80,Dialog.prototype.getDocumentSize=function(){return mxUtils.getDocumentSize()},Dialog.prototype.getPosition=function(t,e){return new mxPoint(t,e)},Dialog.prototype.close=function(t,e){if(null!=this.onDialogClose){if(0==this.onDialogClose(t,e))return!1;this.onDialogClose=null}null!=this.dialogImg&&null!=this.dialogImg.parentNode&&(this.dialogImg.parentNode.removeChild(this.dialogImg),this.dialogImg=null),null!=this.bg&&null!=this.bg.parentNode&&this.bg.parentNode.removeChild(this.bg),null!=this.editorUi.embedViewport?this.editorUi.removeListener(this.resizeListener):mxEvent.removeListener(window,"resize",this.resizeListener),null!=this.container.parentNode&&this.container.parentNode.removeChild(this.container)};var ErrorDialog=function(t,e,n,i,l,s,o,r,a,h,u){a=null==a||a;var d=document.createElement("div"),e=(d.style.textAlign="center",null!=e&&((p=document.createElement("div")).style.padding="0px",p.style.margin="0px",p.style.fontSize="18px",p.style.paddingBottom="16px",p.style.marginBottom="10px",p.style.borderBottom="1px solid #c0c0c0",p.style.color="gray",p.style.whiteSpace="nowrap",p.style.textOverflow="ellipsis",p.style.overflow="hidden",mxUtils.write(p,e),p.setAttribute("title",e),d.appendChild(p)),document.createElement("div")),p=(e.style.lineHeight="1.2em",e.style.padding="6px","string"==typeof n&&(n=n.replace(/\n/g,"<br/>")),e.innerHTML=Graph.sanitizeHtml(n),d.appendChild(e),document.createElement("div")),m=(p.style.marginTop="12px",p.style.textAlign="center",null!=s&&((n=mxUtils.button(mxResources.get("tryAgain"),function(){t.hideDialog(),s()})).className="geBtn",p.appendChild(n),p.style.textAlign="center"),null!=h&&((e=mxUtils.button(h,function(){null!=u&&u()})).className="geBtn",p.appendChild(e)),mxUtils.button(i,function(){a&&t.hideDialog(),null!=l&&l()}));m.className="geBtn",p.appendChild(m),null!=o&&((n=mxUtils.button(o,function(){a&&t.hideDialog(),null!=r&&r()})).className="geBtn gePrimaryBtn",p.appendChild(n)),this.init=function(){m.focus()},d.appendChild(p),this.container=d},PrintDialog=function(t,e,n){this.create(t,e,n)},PageSetupDialog=(PrintDialog.prototype.create=function(t){var e,r=t.editor.graph,n=document.createElement("table"),i=(n.style.width="100%",n.style.height="100%",document.createElement("tbody")),l=document.createElement("tr"),a=document.createElement("input"),s=(a.setAttribute("type","checkbox"),(e=document.createElement("td")).setAttribute("colspan","2"),e.style.fontSize="10pt",e.appendChild(a),document.createElement("span")),h=(mxUtils.write(s," "+mxResources.get("fitPage")),e.appendChild(s),mxEvent.addListener(s,"click",function(t){a.checked=!a.checked,h.checked=!a.checked,mxEvent.consume(t)}),mxEvent.addListener(a,"change",function(){h.checked=!a.checked}),l.appendChild(e),i.appendChild(l),l=l.cloneNode(!1),document.createElement("input")),s=(h.setAttribute("type","checkbox"),(e=document.createElement("td")).style.fontSize="10pt",e.appendChild(h),document.createElement("span")),u=(mxUtils.write(s," "+mxResources.get("posterPrint")+":"),e.appendChild(s),mxEvent.addListener(s,"click",function(t){h.checked=!h.checked,a.checked=!h.checked,mxEvent.consume(t)}),l.appendChild(e),document.createElement("input")),d=(u.setAttribute("value","1"),u.setAttribute("type","number"),u.setAttribute("min","1"),u.setAttribute("size","4"),u.setAttribute("disabled","disabled"),u.style.width="50px",(e=document.createElement("td")).style.fontSize="10pt",e.appendChild(u),mxUtils.write(e," "+mxResources.get("pages")+" (max)"),l.appendChild(e),i.appendChild(l),mxEvent.addListener(h,"change",function(){h.checked?u.removeAttribute("disabled"):u.setAttribute("disabled","disabled"),a.checked=!h.checked}),l=l.cloneNode(!1),e=document.createElement("td"),mxUtils.write(e,mxResources.get("pageScale")+":"),l.appendChild(e),e=document.createElement("td"),document.createElement("input"));function o(t){var e=a.checked||h.checked,n=parseInt(d.value)/100,i=(isNaN(n)&&(n=1,d.value="100%"),mxClient.IS_SF&&(n*=.75),r.pageFormat||mxConstants.PAGE_FORMAT_A4_PORTRAIT),l=1/r.pageScale,s=(e&&(s=a.checked?1:parseInt(u.value),isNaN(s)||(l=mxUtils.getScaleForPageCount(s,r,i))),0),o=0,n=((i=mxRectangle.fromRectangle(i)).width=Math.ceil(i.width*n),i.height=Math.ceil(i.height*n),l*=n,!e&&r.pageVisible?(s-=(n=r.getPageLayout()).x*i.width,o-=n.y*i.height):e=!0,PrintDialog.createPrintPreview(r,l,i,0,s,o,e));n.open(),t&&PrintDialog.printPreview(n)}d.setAttribute("value","100 %"),d.setAttribute("size","5"),d.style.width="50px",e.appendChild(d),l.appendChild(e),i.appendChild(l),l=document.createElement("tr"),(e=document.createElement("td")).colSpan=2,e.style.paddingTop="20px",e.setAttribute("align","right");var s=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog()}),p=(s.className="geBtn",t.editor.cancelFirst&&e.appendChild(s),PrintDialog.previewEnabled&&((p=mxUtils.button(mxResources.get("preview"),function(){t.hideDialog(),o(!1)})).className="geBtn",e.appendChild(p)),mxUtils.button(mxResources.get(PrintDialog.previewEnabled?"print":"ok"),function(){t.hideDialog(),o(!0)}));p.className="geBtn gePrimaryBtn",e.appendChild(p),t.editor.cancelFirst||e.appendChild(s),l.appendChild(e),i.appendChild(l),n.appendChild(i),this.container=n},PrintDialog.printPreview=function(t){try{null!=t.wnd&&window.setTimeout(function(){t.wnd.focus(),t.wnd.print(),t.wnd.close()},500)}catch(t){}},PrintDialog.createPrintPreview=function(e,t,n,i,l,s,o){var t=new mxPrintPreview(e,t,n,i,l,s),n=(t.title=mxResources.get("preview"),t.addPageCss=!mxClient.IS_SF,t.printBackgroundImage=!0,t.autoOrigin=o,e.background),r=(null!=n&&""!=n&&n!=mxConstants.NONE||(n="#ffffff"),t.backgroundColor=n,t.isTextLabel),a=(t.isTextLabel=function(t){return"geHint"==!t.className&&r.apply(this,arguments)},t.getLinkForCellState);return t.getLinkForCellState=function(t){return e.getAbsoluteUrl(a.apply(this,arguments))},t},PrintDialog.previewEnabled=!0,function(i){var l=i.editor.graph,t=document.createElement("table"),e=(t.style.width="100%",t.style.height="100%",document.createElement("tbody")),n=document.createElement("tr"),s=document.createElement("td"),o=(s.style.verticalAlign="top",s.style.fontSize="10pt",mxUtils.write(s,mxResources.get("paperSize")+":"),n.appendChild(s),(s=document.createElement("td")).style.verticalAlign="top",s.style.fontSize="10pt",PageSetupDialog.addPageFormatPanel(s,"pagesetupdialog",l.pageFormat)),r=(n.appendChild(s),e.appendChild(n),n=document.createElement("tr"),s=document.createElement("td"),mxUtils.write(s,mxResources.get("gridSize")+":"),n.appendChild(s),(s=document.createElement("td")).style.whiteSpace="nowrap",document.createElement("input")),a=(r.setAttribute("type","number"),r.setAttribute("min","0"),r.style.width="40px",r.style.marginLeft="6px",r.value=l.getGridSize(),s.appendChild(r),mxEvent.addListener(r,"change",function(){var t=parseInt(r.value);r.value=Math.max(1,isNaN(t)?l.getGridSize():t)}),n.appendChild(s),e.appendChild(n),n=document.createElement("tr"),s=document.createElement("td"),mxUtils.write(s,mxResources.get("background")+":"),n.appendChild(s),s=document.createElement("td"),document.createElement("button")),h=(a.className="geBtn",a.style.margin="0px",mxUtils.write(a,mxResources.get("change")+"..."),document.createElement("div")),u=(h.style.display="inline-block",h.style.verticalAlign="middle",h.style.backgroundPosition="center center",h.style.backgroundRepeat="no-repeat",h.style.backgroundSize="contain",h.style.border="1px solid lightGray",h.style.borderRadius="4px",h.style.marginRight="14px",h.style.height="32px",h.style.width="64px",h.style.cursor="pointer",h.style.padding="4px",l.backgroundImage),d=l.background,p=l.shadowVisible;function m(){var t=u;null!=(t=null!=t&&null!=t.originalSrc?i.createImageForPageLink(t.originalSrc,null):t)&&null!=t.src?(h.style.backgroundImage="url("+t.src+")",h.style.display="inline-block"):(h.style.backgroundImage="",h.style.display="none"),h.style.backgroundColor="",null!=d&&d!=mxConstants.NONE&&(h.style.backgroundColor=d,h.style.display="inline-block")}function c(t){i.showBackgroundImageDialog(function(t,e,n,i){e||(null!=t&&null!=t.src&&Graph.isPageLink(t.src)&&(t={originalSrc:t.src}),u=t,p=i),d=n,m()},u,d,!0),mxEvent.consume(t)}mxEvent.addListener(a,"click",c),mxEvent.addListener(h,"click",c),m(),s.appendChild(h),s.appendChild(a),n.appendChild(s),e.appendChild(n),n=document.createElement("tr"),(s=document.createElement("td")).colSpan=2,s.style.paddingTop="16px",s.setAttribute("align","right");var a=mxUtils.button(mxResources.get("cancel"),function(){i.hideDialog()}),g=(a.className="geBtn",i.editor.cancelFirst&&s.appendChild(a),mxUtils.button(mxResources.get("apply"),function(){i.hideDialog();var t=parseInt(r.value),t=(isNaN(t)||l.gridSize===t||l.setGridSize(t),new ChangePageSetup(i,d,u,o.get())),e=(t.ignoreColor=l.background==d,null!=l.backgroundImage?l.backgroundImage.src:null),n=null!=u?u.src:null;t.ignoreImage=e===n,null!=p&&(t.shadowVisible=p),l.pageFormat.width==t.previousFormat.width&&l.pageFormat.height==t.previousFormat.height&&t.ignoreColor&&t.ignoreImage&&t.shadowVisible==l.shadowVisible||l.model.execute(t)}));g.className="geBtn gePrimaryBtn",s.appendChild(g),i.editor.cancelFirst||s.appendChild(a),n.appendChild(s),e.appendChild(n),t.appendChild(e),this.container=t}),FilenameDialog=(PageSetupDialog.addPageFormatPanel=function(t,e,i,l){for(var e="format-"+e,n=document.createElement("input"),s=(n.setAttribute("name",e),n.setAttribute("type","radio"),n.setAttribute("value","portrait"),document.createElement("input")),o=(s.setAttribute("name",e),s.setAttribute("type","radio"),s.setAttribute("value","landscape"),document.createElement("select")),r=(o.style.marginBottom="4px",o.style.borderRadius="4px",o.style.borderWidth="1px",o.style.borderStyle="solid",o.style.boxSizing="border-box",o.style.padding="2px",o.style.width="206px",document.createElement("div")),e=(r.style.whiteSpace="nowrap",r.style.marginLeft="4px",r.style.width="210px",r.style.height="24px",n.style.marginRight="6px",r.appendChild(n),document.createElement("span")),a=(e.style.maxWidth="100px",mxUtils.write(e,mxResources.get("portrait")),r.appendChild(e),s.style.marginLeft="10px",s.style.marginRight="6px",r.appendChild(s),document.createElement("span")),h=(a.style.width="100px",mxUtils.write(a,mxResources.get("landscape")),r.appendChild(a),document.createElement("div")),u=(h.style.whiteSpace="nowrap",h.style.marginLeft="4px",h.style.fontSize="12px",h.style.width="210px",h.style.height="24px",document.createElement("input")),d=(u.setAttribute("size","7"),u.setAttribute("title",mxResources.get("width")),u.style.textAlign="right",h.appendChild(u),mxUtils.write(h," x "),document.createElement("input")),p=(d.setAttribute("size","7"),d.setAttribute("title",mxResources.get("height")),d.style.textAlign="right",h.appendChild(d),document.createElement("select")),m=(p.style.marginLeft="4px",p.style.maxWidth="78px",p.style.width="78px",[{label:mxResources.get("points"),unit:mxConstants.POINTS},{label:mxResources.get("inches"),unit:mxConstants.INCHES},{label:mxResources.get("millimeters"),unit:mxConstants.MILLIMETERS}]),c=0;c<m.length;c++){var g=document.createElement("option");g.setAttribute("value",m[c].unit),mxUtils.write(g,m[c].label),p.appendChild(g)}p.value=Editor.pageSizeUnit,h.appendChild(p),r.style.display="none",h.style.display="none";for(var x=new Object,y=PageSetupDialog.getFormats(),c=0;c<y.length;c++){var C=y[c],f=(x[C.key]=C,document.createElement("option"));f.setAttribute("value",C.key),mxUtils.write(f,C.title),o.appendChild(f)}function v(){o.value="custom";for(var t=0;t<y.length;t++){var e=y[t];null!=e.format&&("a4"==e.key?826==i.width?(i=mxRectangle.fromRectangle(i)).width=827:826==i.height&&((i=mxRectangle.fromRectangle(i)).height=827):"a5"==e.key&&(584==i.width?(i=mxRectangle.fromRectangle(i)).width=583:584==i.height&&((i=mxRectangle.fromRectangle(i)).height=583)),i.width==e.format.width&&i.height==e.format.height?(o.value=e.key,n.setAttribute("checked","checked"),n.defaultChecked=!0,n.checked=!0,s.removeAttribute("checked"),s.defaultChecked=!1,s.checked=!1,detected=!0):i.width==e.format.height&&i.height==e.format.width&&(o.value=e.key,n.removeAttribute("checked"),n.defaultChecked=!1,n.checked=!1,s.setAttribute("checked","checked"),s.defaultChecked=!0,s.checked=!0,detected=!0))}"custom"==o.value?(u.value=Editor.toUnit(i.width,p.value),d.value=Editor.toUnit(i.height,p.value),n.setAttribute("checked","checked"),o.value="custom",r.style.display="none",h.style.display=""):(r.style.display="",h.style.display="none")}function E(t,e){null!=(n=x[o.value]).format?(u.value=Editor.toUnit(s.checked?n.format.height:n.format.width,p.value),d.value=Editor.toUnit(s.checked?n.format.width:n.format.height,p.value),h.style.display="none",r.style.display=""):(r.style.display="none",h.style.display="");var n=parseFloat(u.value),n=((isNaN(n)||n<=0)&&(u.value=Editor.toUnit(i.width,p.value)),parseFloat(d.value)),n=((isNaN(n)||n<=0)&&(d.value=Editor.toUnit(i.height,p.value)),new mxRectangle(0,0,Math.floor(Editor.fromUnit(parseFloat(u.value),p.value)),Math.floor(Editor.fromUnit(parseFloat(d.value),p.value))));e||n.width==i.width&&n.height==i.height||(i=n,null!=l&&l(i))}v(),t.appendChild(o),mxUtils.br(t),t.appendChild(r),t.appendChild(h);return mxEvent.addListener(e,"click",function(t){n.checked=!0,E(),mxEvent.consume(t)}),mxEvent.addListener(a,"click",function(t){s.checked=!0,E(),mxEvent.consume(t)}),mxEvent.addListener(u,"blur",E),mxEvent.addListener(u,"click",E),mxEvent.addListener(d,"blur",E),mxEvent.addListener(d,"click",E),mxEvent.addListener(s,"change",E),mxEvent.addListener(n,"change",E),mxEvent.addListener(o,"change",function(t){E(0,"custom"==o.value),mxEvent.consume(t)}),mxEvent.addListener(p,"change",function(t){u.value=Editor.toUnit(Editor.fromUnit(u.value,Editor.pageSizeUnit),p.value),d.value=Editor.toUnit(Editor.fromUnit(d.value,Editor.pageSizeUnit),p.value),Editor.pageSizeUnit=p.value,E(0,!0),mxEvent.consume(t)}),E(0,!0),{set:function(t){i=t,v()},get:function(){return i},widthInput:u,heightInput:d}},PageSetupDialog.getFormats=function(){return[{key:"letter",title:'US-Letter (8,5" x 11")',format:mxConstants.PAGE_FORMAT_LETTER_PORTRAIT},{key:"legal",title:'US-Legal (8,5" x 14")',format:new mxRectangle(0,0,850,1400)},{key:"tabloid",title:'US-Tabloid (11" x 17")',format:new mxRectangle(0,0,1100,1700)},{key:"executive",title:'US-Executive (7" x 10")',format:new mxRectangle(0,0,700,1e3)},{key:"a0",title:"A0 (841 mm x 1189 mm)",format:new mxRectangle(0,0,3300,4681)},{key:"a1",title:"A1 (594 mm x 841 mm)",format:new mxRectangle(0,0,2339,3300)},{key:"a2",title:"A2 (420 mm x 594 mm)",format:new mxRectangle(0,0,1654,2336)},{key:"a3",title:"A3 (297 mm x 420 mm)",format:new mxRectangle(0,0,1169,1654)},{key:"a4",title:"A4 (210 mm x 297 mm)",format:mxConstants.PAGE_FORMAT_A4_PORTRAIT},{key:"a5",title:"A5 (148 mm x 210 mm)",format:new mxRectangle(0,0,583,827)},{key:"a6",title:"A6 (105 mm x 148 mm)",format:new mxRectangle(0,0,413,583)},{key:"a7",title:"A7 (74 mm x 105 mm)",format:new mxRectangle(0,0,291,413)},{key:"b4",title:"B4 (250 mm x 353 mm)",format:new mxRectangle(0,0,980,1390)},{key:"b5",title:"B5 (176 mm x 250 mm)",format:new mxRectangle(0,0,690,980)},{key:"16-9",title:"16:9 (1600 x 900)",format:new mxRectangle(0,0,900,1600)},{key:"16-10",title:"16:10 (1920 x 1200)",format:new mxRectangle(0,0,1200,1920)},{key:"4-3",title:"4:3 (1600 x 1200)",format:new mxRectangle(0,0,1200,1600)},{key:"custom",title:mxResources.get("custom"),format:null}]},function(t,e,n,i,l,s,o,r,a,h,u){a=null==a||a;var d=document.createElement("div"),p=document.createElement("div"),m=(p.style.width="100%",p.style.display="grid",p.style.gap="5px 8px",p.style.gridAutoColumns="auto 1fr",p.style.boxSizing="border-box",p.style.padding="3px",document.createElement("div")),c=(m.style.display="inline-flex",m.style.alignItems="center",m.style.justifyContent="flex-end",m.style.minWidth="0",document.createElement("div")),g=(c.style.display="inline-block",c.style.textOverflow="ellipsis",c.style.whiteSpace="nowrap",c.style.overflow="hidden",c.style.fontSize="10pt",c.style.padding="2px 0",c.setAttribute("title",l||mxResources.get("filename")),mxUtils.write(c,(l||mxResources.get("filename"))+":"),m.appendChild(c),p.appendChild(m),document.createElement("input")),x=(g.setAttribute("value",e||""),g.style.flexGrow="1",mxUtils.button(n,function(){null!=s&&!s(g.value)||(a&&t.hideDialog(),i(g.value))})),e=(x.className="geBtn gePrimaryBtn",this.init=function(){var t,e;null==l&&null!=o||(null!=u?Editor.selectFilename(g):(g.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode?g.select():document.execCommand("selectAll",!1,null)),Graph.fileSupport&&null!=(t=p.parentNode)&&(e=null,mxEvent.addListener(t,"dragleave",function(t){null!=e&&(e.style.backgroundColor="",e=null),t.stopPropagation(),t.preventDefault()}),mxEvent.addListener(t,"dragover",mxUtils.bind(this,function(t){null==e&&(!mxClient.IS_IE||10<document.documentMode)&&((e=g).style.backgroundColor="#ebf2f9"),t.stopPropagation(),t.preventDefault()})),mxEvent.addListener(t,"drop",mxUtils.bind(this,function(t){null!=e&&(e.style.backgroundColor="",e=null),0<=mxUtils.indexOf(t.dataTransfer.types,"text/uri-list")&&(g.value=decodeURIComponent(t.dataTransfer.getData("text/uri-list")),x.click()),t.stopPropagation(),t.preventDefault()}))))},(m=document.createElement("div")).style.display="inline-flex",m.style.alignItems="center",m.style.gap="4px",m.style.whiteSpace="nowrap",m.appendChild(g),p.appendChild(m),null==l&&null!=o||null!=u&&null!=t.editor.diagramFileTypes&&((m=document.createElement("div")).style.display="inline-flex",m.style.alignItems="center",m.style.textOverflow="ellipsis",m.style.justifyContent="flex-end",m.style.fontSize="10pt",mxUtils.write(m,mxResources.get("type")+":"),p.appendChild(m),(m=document.createElement("div")).style.display="inline-flex",m.style.alignItems="center",m.style.whiteSpace="nowrap",p.appendChild(m),(c=FilenameDialog.createFileTypes(t,g,t.editor.diagramFileTypes)).style.width="100%",m.appendChild(c)),null!=o&&p.appendChild(o),(row=document.createElement("div")).style.gridColumn="1 / span 2",row.style.paddingTop=null!=u?"6px":"14px",row.style.whiteSpace="nowrap",row.style.display="inline-flex",row.style.alignItems="center",row.style.justifyContent="flex-end",row.setAttribute("align","right"),mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog(),null!=h&&h()}));e.className="geBtn",null==r||t.isOffline()||row.appendChild(t.createHelpIcon(r)),t.editor.cancelFirst&&row.appendChild(e),mxEvent.addListener(g,"keypress",function(t){13==t.keyCode&&x.click()}),row.appendChild(x),t.editor.cancelFirst||row.appendChild(e),p.appendChild(row),d.appendChild(p),this.container=d}),WrapperWindow=(FilenameDialog.filenameHelpLink=null,FilenameDialog.createFileTypes=function(t,o,r){for(var a=document.createElement("select"),e=0;e<r.length;e++){var n=document.createElement("option");n.setAttribute("value",e),mxUtils.write(n,mxResources.get(r[e].description)+" (."+r[e].extension+")"),a.appendChild(n)}mxEvent.addListener(a,"change",function(t){var e=r[a.value].extension,n=o.value.lastIndexOf(".drawio."),n=0<n?n:o.value.lastIndexOf(".");"drawio"!=e&&(e="drawio."+e),o.value=0<n?o.value.substring(0,n+1)+e:o.value+"."+e,"createEvent"in document?((n=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),o.dispatchEvent(n)):o.fireEvent("onchange")});function i(t){for(var e=o.value.toLowerCase(),n=0,i=0;i<r.length;i++){var l=r[i].extension,s=null;if("drawio"!=l&&(l=".drawio."+(s=l)),e.substring(e.length-l.length-1)=="."+l||null!=s&&e.substring(e.length-s.length-1)=="."+s){n=i;break}}a.value=n}return mxEvent.addListener(o,"change",i),mxEvent.addListener(o,"keyup",i),i(),a},function(e,t,n,i,l,s,o){var r=e.createSidebarContainer();o(r),this.window=new mxWindow(t,r,n,i,l,s,!0,!0),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),e.installResizeHandler(this,!0),mxClient.IS_SF&&(this.window.div.onselectstart=mxUtils.bind(this,function(t){return null!=(t=null==t?window.event:t)&&e.isSelectionAllowed(t)}))});function Actions(t){this.editorUi=t,this.actions=new Object,this.init()}function Action(t,e,n,i,l){mxEventSource.call(this),this.label=t,this.funct=this.createFunction(e),this.enabled=null==n||n,this.iconCls=i,this.shortcut=l,this.visible=!0}!function(){mxGraphView.prototype.validateBackgroundPage=function(){var e=this.graph;if(null!=e.container&&!e.transparentBackground){if(e.pageVisible){var t=this.getBackgroundPageBounds();if(null==this.backgroundPageShape){for(var n=e.container.firstChild;null!=n&&n.nodeType!=mxConstants.NODETYPE_ELEMENT;)n=n.nextSibling;null!=n&&(this.backgroundPageShape=this.createBackgroundPageShape(t),this.backgroundPageShape.scale=1,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=mxConstants.DIALECT_STRICTHTML,this.backgroundPageShape.init(e.container),n.style.position="absolute",e.container.insertBefore(this.backgroundPageShape.node,n),this.backgroundPageShape.redraw(),this.backgroundPageShape.node.className="geBackgroundPage",mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(t){e.dblClick(t)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(t){e.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){null!=e.tooltipHandler&&e.tooltipHandler.isHideOnHover()&&e.tooltipHandler.hide(),e.isMouseDown&&!mxEvent.isConsumed(t)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))})))}else this.backgroundPageShape.scale=1,this.backgroundPageShape.bounds=t,this.backgroundPageShape.redraw()}else null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null);this.validateBackgroundStyles()}},mxGraphView.prototype.validateBackgroundStyles=function(t,e,n){var i,l,s,o,r=this.graph,a=(t=null!=t?t:1,null==r.background||r.background==mxConstants.NONE?r.defaultPageBackgroundColor:r.background),h=null!=a&&this.gridColor!=a.toLowerCase()?this.gridColor:"#ffffff",u="none",d="",p=((r.isGridEnabled()||r.gridVisible)&&(i=10,mxClient.IS_SVG?(u=unescape(encodeURIComponent(this.createSvgGrid(h,t))),u="url(data:image/svg+xml;base64,"+(u=window.btoa?btoa(u):Base64.encode(u,!0))+")",i=r.gridSize*this.scale*this.gridSteps*t):u="url("+this.gridImage+")",o=h=0,e=null!=e?e-this.translate.x*this.scale:0,n=null!=n?n-this.translate.y*this.scale:0,l=e%(s=r.gridSize*this.scale*this.gridSteps),s=n%s,null!=r.view.backgroundPageShape&&(h=1+(p=this.getBackgroundPageBounds()).x,o=1+p.y),d=-Math.round(i-mxUtils.mod(this.translate.x*this.scale-h+e,i)+l*t)+"px "+-Math.round(i-mxUtils.mod(this.translate.y*this.scale-o+n,i)+s*t)+"px"),r.view.canvas),h=(null!=p.ownerSVGElement&&(p=p.ownerSVGElement),!Editor.isDarkMode()&&r.enableDiagramBackground);null!=r.view.backgroundPageShape?(r.view.backgroundPageShape.node.style.backgroundPosition=d,r.view.backgroundPageShape.node.style.backgroundImage=u,r.view.backgroundPageShape.node.style.backgroundColor=a,r.view.backgroundPageShape.node.style.borderColor=r.defaultPageBorderColor,r.container.classList.add("geDiagramBackdrop"),p.style.backgroundImage="none",p.style.backgroundColor="",r.container.style.backgroundColor=h?r.diagramBackgroundColor:""):(r.container.classList.remove("geDiagramBackdrop"),p.style.backgroundPosition=d,p.style.backgroundImage=u,!h||null!=r.background&&r.background!=mxConstants.NONE?p.style.backgroundColor=a:(p.style.backgroundColor=r.diagramBackgroundColor,r.container.style.backgroundColor=""))},mxGraphView.prototype.createSvgGrid=function(t,e){for(var n=this.graph.gridSize*this.scale*(e=null!=e?e:1);n<this.minGridSize;)n*=2;for(var i=this.gridSteps*n,l=[],s=1;s<this.gridSteps;s++){var o=s*n;l.push("M 0 "+o+" L "+i+" "+o+" M "+o+" 0 L "+o+" "+i)}return'<svg width="'+i+'" height="'+i+'" xmlns="'+mxConstants.NS_SVG+'"><defs><pattern id="grid" width="'+i+'" height="'+i+'" patternUnits="userSpaceOnUse"><path d="'+l.join(" ")+'" fill="none" stroke="'+t+'" opacity="0.2" stroke-width="1"/><path d="M '+i+" 0 L 0 0 0 "+i+'" fill="none" stroke="'+t+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>'};var l=mxGraph.prototype.panGraph,s=(mxGraph.prototype.panGraph=function(t,e){var n,i;l.apply(this,arguments),null!=this.shiftPreview1&&(null!=(n=this.view.canvas).ownerSVGElement&&(n=n.ownerSVGElement),i=this.gridSize*this.view.scale*this.view.gridSteps,t=-Math.round(i-mxUtils.mod(this.view.translate.x*this.view.scale+t,i))+"px "+-Math.round(i-mxUtils.mod(this.view.translate.y*this.view.scale+e,i))+"px",n.style.backgroundPosition=t)},mxGraph.prototype.updatePageBreaks=function(t,e,n){var i=this.view.scale,l=this.view.translate,s=this.pageFormat,o=i*this.pageScale,r=this.view.getBackgroundPageBounds(),a=(e=r.width,n=r.height,new mxRectangle(i*l.x,i*l.y,s.width*o,s.height*o)),h=(t=t&&Math.min(a.width,a.height)>this.minPageBreakDist)?Math.ceil(n/a.height)-1:0,u=t?Math.ceil(e/a.width)-1:0,d=r.x+e,p=r.y+n,i=(null==this.horizontalPageBreaks&&0<h&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&0<u&&(this.verticalPageBreaks=[]),mxUtils.bind(this,function(t){if(null!=t){for(var e=t==this.horizontalPageBreaks?h:u,n=0;n<=e;n++){var i=t==this.horizontalPageBreaks?[new mxPoint(Math.round(r.x),Math.round(r.y+(n+1)*a.height)),new mxPoint(Math.round(d),Math.round(r.y+(n+1)*a.height))]:[new mxPoint(Math.round(r.x+(n+1)*a.width),Math.round(r.y)),new mxPoint(Math.round(r.x+(n+1)*a.width),Math.round(p))];null!=t[n]?(t[n].points=i,t[n].redraw()):((i=new mxPolyline(i,this.pageBreakColor)).dialect=this.dialect,i.isDashed=this.pageBreakDashed,i.pointerEvents=!1,i.init(this.view.backgroundPane),i.redraw(),t[n]=i)}for(n=e;n<t.length;n++)null!=t[n]&&t[n].destroy();t.splice(e,t.length-e)}}));i(this.horizontalPageBreaks),i(this.verticalPageBreaks)},mxGraphHandler.prototype.shouldRemoveCellsFromParent),t=(mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(t,e,n){for(var i=0;i<e.length;i++){if(this.graph.isTableCell(e[i])||this.graph.isTableRow(e[i]))return!1;if(this.graph.getModel().isVertex(e[i])){var l=this.graph.getCellGeometry(e[i]);if(null!=l&&l.relative)return!1}}return s.apply(this,arguments)},mxConnectionHandler.prototype.createMarker),n=(mxConnectionHandler.prototype.createMarker=function(){var n=t.apply(this,arguments);return n.intersects=mxUtils.bind(this,function(t,e){return!!this.isConnecting()||mxCellMarker.prototype.intersects.apply(n,arguments)}),n},mxGraphView.prototype.createBackgroundPageShape=function(t){return new mxRectangleShape(t,"#ffffff",this.graph.defaultPageBorderColor)},mxGraphView.prototype.getBackgroundPageBounds=function(){var t=this.getGraphBounds(),e=0<t.width?t.x/this.scale-this.translate.x:0,n=0<t.height?t.y/this.scale-this.translate.y:0,i=t.width/this.scale,t=t.height/this.scale,l=this.graph.pageFormat,s=this.graph.pageScale,o=l.width*s,l=l.height*s,s=Math.floor(Math.min(0,e)/o),r=Math.floor(Math.min(0,n)/l),e=Math.ceil(Math.max(1,e+i)/o),i=Math.ceil(Math.max(1,n+t)/l);return new mxRectangle(this.scale*(this.translate.x+s*o),this.scale*(this.translate.y+r*l),this.scale*(e-s)*o,this.scale*(i-r)*l)},mxGraph.prototype.panGraph),r=(mxGraph.prototype.panGraph=function(t,e){n.apply(this,arguments),this.dialect==mxConstants.DIALECT_SVG||null==this.view.backgroundPageShape||this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container)||(this.view.backgroundPageShape.node.style.marginLeft=t+"px",this.view.backgroundPageShape.node.style.marginTop=e+"px")},mxPopupMenu.prototype.addItem),o=(mxPopupMenu.prototype.addItem=function(t,e,n,i,l,s){var o=r.apply(this,arguments);return null==s||s||mxEvent.addListener(o,"mousedown",function(t){mxEvent.consume(t)}),o},mxGraphHandler.prototype.isPropagateSelectionCell);mxGraphHandler.prototype.isPropagateSelectionCell=function(t,e,n){var i=!1,l=this.graph.model.getParent(t);return e?(e=this.graph.model.isEdge(t)?null:this.graph.getCellGeometry(t),i=!this.graph.model.isEdge(l)&&!this.graph.isSiblingSelected(t)&&(null!=e&&e.relative||!this.graph.isContainer(l)||this.graph.isPart(t))):(i=o.apply(this,arguments),(this.graph.isTableCell(t)||this.graph.isTableRow(t))&&(this.graph.isTable(e=l)||(e=this.graph.model.getParent(e)),i=!this.graph.selectionCellsHandler.isHandled(e)||this.graph.isCellSelected(e)&&this.graph.isToggleEvent(n.getEvent())||this.graph.isCellSelected(t)&&!this.graph.isToggleEvent(n.getEvent())||this.graph.isTableCell(t)&&this.graph.isCellSelected(l))),i},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(t){for(var e=t.getCell(),n=this.graph.getModel(),i=n.getParent(e),l=this.graph.view.getState(i),s=this.graph.isCellSelected(e);null!=l&&(n.isVertex(i)||n.isEdge(i));){var o=this.graph.isCellSelected(i),s=s||o;(o||!s&&(this.graph.isTableCell(e)||this.graph.isTableRow(e)))&&(e=i),i=n.getParent(i)}return e}}(),__mxOutput.Editor=void 0!==Editor?Editor:void 0,Actions.prototype.init=function(){function t(){return Action.prototype.isEnabled.apply(this,arguments)&&c.isEnabled()}var o=this.editorUi,a=o.editor,c=a.graph;function n(t){c.escape();t=c.deleteCells(c.getDeletableCells(c.getSelectionCells()),t);null!=t&&c.setSelectionCells(t)}function i(){if(!c.isSelectionEmpty()){c.getModel().beginUpdate();try{for(var t=c.getSelectionCells(),e=0;e<t.length;e++)c.cellLabelChanged(t[e],"")}finally{c.getModel().endUpdate()}}}this.addAction("new...",function(){c.openLink(o.getUrl())}),this.addAction("open...",function(){window.openNew=!0,window.openKey="open",o.openFile()}),this.put("smartFit",new Action(mxResources.get("fitWindow")+" / "+mxResources.get("resetView"),function(){c.popupMenuHandler.hideMenu();var t=c.view.scale,e=c.container.scrollLeft,n=c.container.scrollTop,i=c.view.translate.x,l=c.view.translate.y;o.actions.get("resetView").funct(),Math.abs(t-c.view.scale)<1e-5&&Math.abs(e-c.container.scrollLeft)<5&&Math.abs(n-c.container.scrollTop)<5&&i==c.view.translate.x&&l==c.view.translate.y&&o.actions.get("fitWindow").funct()},null,null,"Enter")),this.addAction("keyPressEnter",function(){c.isSelectionEmpty()?o.actions.get("smartFit").funct():c.isEnabled()&&c.startEditingAtCell()}),this.addAction("import...",function(){window.openNew=!1,window.openKey="import",window.openFile=new OpenFile(mxUtils.bind(this,function(){o.hideDialog()})),window.openFile.setConsumer(mxUtils.bind(this,function(t,e){try{var n=mxUtils.parseXml(t);a.graph.setSelectionCells(a.graph.importGraphModel(n.documentElement))}catch(t){mxUtils.alert(mxResources.get("invalidOrMissingFile")+": "+t.message)}})),o.showDialog(new OpenDialog(this).container,320,220,!0,!0,function(){window.openFile=null})}).isEnabled=t,this.addAction("save",function(){o.saveFile(!1)},null,null,Editor.ctrlKey+"+S").isEnabled=t,this.addAction("saveAs...",function(){o.saveFile(!0)},null,null,Editor.ctrlKey+"+Shift+S"),this.addAction("export...",function(){o.showDialog(new ExportDialog(o).container,300,340,!0,!0)}),this.addAction("editDiagram...",function(){var t=new EditDiagramDialog(o);o.showDialog(t.container,620,420,!0,!1),t.init()}).isEnabled=t,this.addAction("pageSetup...",function(){o.showDialog(new PageSetupDialog(o).container,320,240,!0,!0)}).isEnabled=t,this.addAction("print...",function(){o.showPrintDialog()},null,"sprite-print",Editor.ctrlKey+"+P"),this.addAction("preview",function(){mxUtils.show(c,null,10,10)}),this.addAction("undo",function(){o.undo()},null,"sprite-undo",Editor.ctrlKey+"+Z"),this.addAction("redo",function(){o.redo()},null,"sprite-redo",mxClient.IS_WIN?Editor.ctrlKey+"+Y":Editor.ctrlKey+"+Shift+Z"),this.addAction("cut",function(){var t=null;try{null!=(t=o.copyXml())&&c.removeCells(t,!1)}catch(t){}try{null==t&&mxClipboard.cut(c)}catch(t){o.handleError(t)}},null,"sprite-cut",Editor.ctrlKey+"+X"),this.addAction("copy",function(){try{o.copyXml()}catch(t){}try{mxClipboard.copy(c)}catch(t){o.handleError(t)}},null,"sprite-copy",Editor.ctrlKey+"+C"),this.addAction("paste",function(){if(c.isEnabled()&&!c.isCellLocked(c.getDefaultParent())){var t=!1;try{Editor.enableNativeCipboard&&(o.readGraphModelFromClipboard(function(t){if(null!=t){c.getModel().beginUpdate();try{o.pasteXml(t,!0)}finally{c.getModel().endUpdate()}}else mxClipboard.paste(c)}),t=!0)}catch(t){}t||mxClipboard.paste(c)}},!1,"sprite-paste",Editor.ctrlKey+"+V"),this.addAction("pasteHere",function(t){function e(t){if(null!=t){for(var e=!0,n=0;n<t.length&&e;n++)e=e&&c.model.isEdge(t[n]);var i,l=c.view.translate,s=c.view.scale,o=l.x,l=l.y,r=null;null!=(r=null!=(r=1==t.length&&e&&null!=(i=c.getCellGeometry(t[0]))?i.getTerminalPoint(!0):r)?r:c.getBoundingBoxFromGeometry(t,e))&&(i=Math.round(c.snap(c.popupMenuHandler.triggerX/s-o)),o=Math.round(c.snap(c.popupMenuHandler.triggerY/s-l)),c.cellsMoved(t,i-r.x,o-r.y))}}function n(){c.getModel().beginUpdate();try{e(mxClipboard.paste(c))}finally{c.getModel().endUpdate()}}if(c.isEnabled()&&!c.isCellLocked(c.getDefaultParent())){var i=!1;try{Editor.enableNativeCipboard&&(o.readGraphModelFromClipboard(function(t){if(null!=t){c.getModel().beginUpdate();try{e(o.pasteXml(t,!0))}finally{c.getModel().endUpdate()}}else n()}),i=!0)}catch(t){}i||n()}}),this.addAction("swap",function(){var t=c.getSelectionCells();2==t.length&&c.swapShapes(t[0],t[1])}),this.addAction("copySize",function(){var t=c.getSelectionCell();c.isEnabled()&&null!=t&&c.getModel().isVertex(t)&&null!=(t=c.getCellGeometry(t))&&(o.copiedSize=new mxRectangle(t.x,t.y,t.width,t.height))},null,null,"Alt+Shift+F"),this.addAction("pasteSize",function(){if(c.isEnabled()&&!c.isSelectionEmpty()&&null!=o.copiedSize){c.getModel().beginUpdate();try{for(var t,e=c.getResizableCells(c.getSelectionCells()),n=0;n<e.length;n++)c.getModel().isVertex(e[n])&&null!=(t=c.getCellGeometry(e[n]))&&((t=t.clone()).width=o.copiedSize.width,t.height=o.copiedSize.height,c.getModel().setGeometry(e[n],t))}finally{c.getModel().endUpdate()}}},null,null,"Alt+Shift+V"),this.addAction("copyData",function(){var t=c.getSelectionCell()||c.getModel().getRoot();c.isEnabled()&&null!=t&&null!=(t=t.cloneValue())&&!isNaN(t.nodeType)&&(o.copiedValue=t)},null,null,"Alt+Shift+B"),this.addAction("copyAsText",function(){var t=c.getSelectionCell();if(c.isEnabled()&&null!=t)try{c.isHtmlLabel(t)?o.writeHtmlToClipboard(c.getLabel(t),mxUtils.bind(this,function(t){o.handleError(t)})):o.writeTextToClipboard(c.getLabel(t),mxUtils.bind(this,function(t){o.handleError(t)}))}catch(t){o.handleError(t)}}),this.addAction("pasteData",function(i,t){var i=null!=t?t:i,l=c.getModel();function e(t,e){var n=l.getValue(t);(e=t.cloneValue(e)).removeAttribute("placeholders"),null==n||isNaN(n.nodeType)||e.setAttribute("placeholders",n.getAttribute("placeholders")),null!=i&&mxEvent.isShiftDown(i)||e.setAttribute("label",c.convertValueToString(t)),l.setValue(t,e)}if(c.isEnabled()&&!c.isSelectionEmpty()&&null!=o.copiedValue){l.beginUpdate();try{var n=c.getEditableCells(c.getSelectionCells());if(0==n.length)e(l.getRoot(),o.copiedValue);else for(var s=0;s<n.length;s++)e(n[s],o.copiedValue)}finally{l.endUpdate()}}},null,null,"Alt+Shift+E"),this.addAction("delete",function(t,e){null!=(t=null!=e?e:t)&&mxEvent.isShiftDown(t)?i():n(null!=t&&(mxEvent.isControlDown(t)||mxEvent.isMetaDown(t)||mxEvent.isAltDown(t)))},null,null,"Delete"),this.addAction("deleteAll",function(){n(!0)}),this.addAction("deleteLabels",function(){i()},null,null,Editor.ctrlKey+"+Delete"),this.addAction("duplicate",function(){try{c.setSelectionCells(c.duplicateCells()),c.scrollCellToVisible(c.getSelectionCell())}catch(t){o.handleError(t)}},null,null,Editor.ctrlKey+"+D"),this.put("mergeCells",new Action(mxResources.get("merge"),function(){var t=o.getSelectionState();if(null!=t.mergeCell){c.getModel().beginUpdate();try{c.setCellStyles("rowspan",t.rowspan,[t.mergeCell]),c.setCellStyles("colspan",t.colspan,[t.mergeCell])}finally{c.getModel().endUpdate()}}})),this.put("unmergeCells",new Action(mxResources.get("unmerge"),function(){var t=o.getSelectionState();if(0<t.cells.length){c.getModel().beginUpdate();try{c.setCellStyles("rowspan",null,t.cells),c.setCellStyles("colspan",null,t.cells)}finally{c.getModel().endUpdate()}}})),this.put("turn",new Action(mxResources.get("turn")+" / "+mxResources.get("reverse"),function(t,e){t=null!=e?e:t;c.turnShapes(c.getResizableCells(c.getSelectionCells()),null!=t&&mxEvent.isShiftDown(t))},null,null,mxClient.IS_SF?null:Editor.ctrlKey+"+R")),this.put("selectConnections",new Action(mxResources.get("selectEdges"),function(t){var e=c.getSelectionCell();c.isEnabled()&&null!=e&&c.addSelectionCells(c.getEdges(e))})),this.addAction("selectVertices",function(){c.selectVertices(null,!0)},null,null,Editor.ctrlKey+"+Shift+I"),this.addAction("selectEdges",function(){c.selectEdges()},null,null,Editor.ctrlKey+"+Shift+E"),this.addAction("selectAll",function(){c.selectAll(null,!0)},null,null,Editor.ctrlKey+"+A"),this.addAction("selectNone",function(){c.clearSelection()},null,null,Editor.ctrlKey+"+Shift+A"),this.addAction("lockUnlock",function(){if(!c.isSelectionEmpty()){c.getModel().beginUpdate();try{var t=c.getSelectionCells(),e=c.getCurrentCellStyle(c.getSelectionCell()),n=1==mxUtils.getValue(e,mxConstants.STYLE_EDITABLE,1)?0:1;c.setCellStyles(mxConstants.STYLE_MOVABLE,n,t),c.setCellStyles(mxConstants.STYLE_RESIZABLE,n,t),c.setCellStyles(mxConstants.STYLE_ROTATABLE,n,t),c.setCellStyles(mxConstants.STYLE_DELETABLE,n,t),c.setCellStyles(mxConstants.STYLE_EDITABLE,n,t),c.setCellStyles("locked",1==n?0:1,t),c.setCellStyles("connectable",n,t)}finally{c.getModel().endUpdate()}}},null,null,Editor.ctrlKey+"+L"),this.addAction("explore",function(){c.model.isVertex(c.getSelectionCell())&&Graph.exploreFromCell(o.editor.graph,o.editor.graph.getSelectionCell())}),this.addAction("home",function(){c.home()},null,null,"Shift+Home"),this.addAction("exitGroup",function(){c.exitGroup()},null,null,Editor.ctrlKey+"+Shift+Home"),this.addAction("enterGroup",function(){c.enterGroup()},null,null,Editor.ctrlKey+"+Shift+End"),this.addAction("collapse",function(){c.foldCells(!0)},null,null,Editor.ctrlKey+"+Home"),this.addAction("expand",function(){c.foldCells(!1)},null,null,Editor.ctrlKey+"+End"),this.addAction("toFront",function(){c.orderCells(!1)},null,null,Editor.ctrlKey+"+Shift+F"),this.addAction("toBack",function(){c.orderCells(!0)},null,null,Editor.ctrlKey+"+Shift+B"),this.addAction("bringForward",function(t){c.orderCells(!1,null,!0)},null,null,Editor.ctrlKey+"+Alt+Shift+F"),this.addAction("sendBackward",function(t){c.orderCells(!0,null,!0)},null,null,Editor.ctrlKey+"+Alt+Shift+B"),this.addAction("group",function(){var t;c.isEnabled()&&(1!=(t=mxUtils.sortCells(c.getSelectionCells(),!0)).length||c.isTable(t[0])||c.isTableRow(t[0])?1<(t=c.getCellsForGroup(t)).length&&c.setSelectionCell(c.groupCells(null,0,t)):c.setCellStyles("container","1"))},null,null,Editor.ctrlKey+"+G"),this.addAction("ungroup",function(){if(c.isEnabled()){var t=c.getEditableCells(c.getSelectionCells());c.model.beginUpdate();try{var e=c.ungroupCells();if(null!=t)for(var n=0;n<t.length;n++)c.model.contains(t[n])&&(0==c.model.getChildCount(t[n])&&c.model.isVertex(t[n])&&c.setCellStyles("container","0",[t[n]]),e.push(t[n]))}finally{c.model.endUpdate()}0<e.length&&c.setSelectionCells(e)}},null,null,Editor.ctrlKey+"+Shift+U"),this.addAction("removeFromGroup",function(){if(c.isEnabled()){var t=c.getSelectionCells();if(null!=t){for(var e=[],n=0;n<t.length;n++)c.isTableRow(t[n])||c.isTableCell(t[n])||e.push(t[n]);c.removeCellsFromParent(e),0<e.length&&c.scrollCellToVisible(e[0])}}}),this.addAction("edit",function(){c.isEnabled()&&c.startEditingAtCell()},null,null,"F2/Enter"),this.addAction("editData...",function(){var t=c.getSelectionCell()||c.getModel().getRoot();o.showDataDialog(t)},null,null,Editor.ctrlKey+"+M"),this.addAction("editTooltip...",function(){var t,e,n=c.getSelectionCell();c.isEnabled()&&null!=n&&c.isCellEditable(n)&&(t="",mxUtils.isNode(n.value)&&(e=null)!=(e=null==(e=Graph.translateDiagram&&null!=Graph.diagramLanguage&&n.value.hasAttribute("tooltip_"+Graph.diagramLanguage)?n.value.getAttribute("tooltip_"+Graph.diagramLanguage):e)?n.value.getAttribute("tooltip"):e)&&(t=e),e=new TextareaDialog(o,mxResources.get("editTooltip")+":",t,function(t){c.setTooltipForCell(n,t)}),o.showDialog(e.container,320,200,!0,!0),e.init())},null,null,"Alt+Shift+T"),this.addAction("openLink",function(){var t=c.getLinkForCell(c.getSelectionCell());null!=t&&c.openLink(t)}),this.addAction("editLink...",function(){var t,i=c.getSelectionCell();c.isEnabled()&&null!=i&&c.isCellEditable(i)&&(t=c.getLinkForCell(i,!0)||"",o.showLinkDialog(t,mxResources.get("ok"),function(t,e,n){c.getModel().beginUpdate();try{c.setLinkForCell(i,0<t.length?t:null),c.setAttributeForCell(i,"linkTarget",n)}finally{c.getModel().endUpdate()}},!0,c.getLinkTargetForCell(i)))},null,null,"Alt+Shift+L"),this.put("insertImage",new Action(mxResources.get("image")+"...",function(){c.isEnabled()&&!c.isCellLocked(c.getDefaultParent())&&(c.clearSelection(),o.actions.get("image").funct())})).isEnabled=t,this.addAction("editImage...",function(){o.actions.get("image").funct()}),this.put("insertLink",new Action(mxResources.get("link")+"...",function(){c.isEnabled()&&!c.isCellLocked(c.getDefaultParent())&&o.showLinkDialog("",mxResources.get("ok"),function(t,e,n){if(0<(t=mxUtils.trim(t)).length){var i=null,l=c.getLinkTitle(t),e=new mxCell(l=null!=e&&0<e.length&&(i=e[0].iconUrl,30<(l=(l=e[0].name||e[0].type).charAt(0).toUpperCase()+l.substring(1)).length)?l.substring(0,30)+"...":l,new mxGeometry(0,0,100,40),"fontColor=#0000EE;fontStyle=4;rounded=1;overflow=hidden;"+(null!=i?"shape=label;imageWidth=16;imageHeight=16;spacingLeft=26;align=left;image="+i:"spacing=10;")),l=(e.vertex=!0,c.getCenterInsertPoint(c.getBoundingBoxFromGeometry([e],!0)));e.geometry.x=l.x,e.geometry.y=l.y,c.setAttributeForCell(e,"linkTarget",n),c.setLinkForCell(e,t),c.cellSizeUpdated(e,!0),c.getModel().beginUpdate();try{e=c.addCell(e),c.fireEvent(new mxEventObject("cellsInserted","cells",[e]))}finally{c.getModel().endUpdate()}c.setSelectionCell(e),c.scrollCellToVisible(c.getSelectionCell())}},!0)},null,null,"L")).isEnabled=t,this.addAction("link...",mxUtils.bind(this,function(){if(c.isEnabled())if(c.cellEditor.isContentEditing()){var t=c.getSelectedElement(),e=c.getParentByName(t,"A",c.cellEditor.textarea),n="";if(null==e&&null!=t&&null!=t.getElementsByTagName)for(var i=t.getElementsByTagName("a"),l=0;l<i.length&&null==e;l++)i[l].textContent==t.textContent&&(e=i[l]);null!=e&&"A"==e.nodeName&&(n=e.getAttribute("href")||"",c.selectNode(e));var s=c.cellEditor.saveSelection();o.showLinkDialog(n,mxResources.get("ok"),mxUtils.bind(this,function(t){c.cellEditor.restoreSelection(s),null!=t&&c.insertLink(t)}))}else(c.isSelectionEmpty()?this.get("insertLink"):this.get("editLink")).funct()})).isEnabled=t,this.addAction("autosize",function(){var t=c.getSelectionCells();if(null!=t){c.getModel().beginUpdate();try{for(var e=0;e<t.length;e++){var n=t[e];c.getModel().isVertex(n)&&(0<c.getModel().getChildCount(n)?c.updateGroupBounds([n],0,!0):c.updateCellSize(n))}}finally{c.getModel().endUpdate()}}},null,null,Editor.ctrlKey+"+Shift+Y"),this.addAction("snapToGrid",function(){c.snapCellsToGrid(c.getSelectionCells(),c.gridSize)}),this.addAction("formattedText",function(){c.stopEditing();var t=c.getCommonStyle(c.getSelectionCells()),e="1"==mxUtils.getValue(t,"html","0")?null:"1";c.getModel().beginUpdate();try{for(var n,i,l=c.getEditableCells(c.getSelectionCells()),s=0;s<l.length;s++)null!=(state=c.getView().getState(l[s]))&&("1"==(n=mxUtils.getValue(state.style,"html","0"))&&null==e?(c.removeTextStyleForCell(state.cell),c.setCellStyles("html",e,[l[s]])):"0"==n&&"1"==e&&(i=mxUtils.htmlEntities(c.convertValueToString(state.cell),!1),"0"!=mxUtils.getValue(state.style,"nl2Br","1")&&(i=i.replace(/\n/g,"<br/>")),c.cellLabelChanged(state.cell,Graph.sanitizeHtml(i)),c.setCellStyles("html",e,[l[s]])));o.fireEvent(new mxEventObject("styleChanged","keys",["html"],"values",[null!=e?e:"0"],"cells",l))}finally{c.getModel().endUpdate()}}),this.addAction("wordWrap",function(){var t=c.getView().getState(c.getSelectionCell()),e="wrap";c.stopEditing(),null!=t&&"wrap"==t.style[mxConstants.STYLE_WHITE_SPACE]&&(e=null),c.setCellStyles(mxConstants.STYLE_WHITE_SPACE,e)}),this.addAction("rotation",function(){var t="0",e=c.getView().getState(c.getSelectionCell()),e=(null!=e&&(t=e.style[mxConstants.STYLE_ROTATION]||t),new FilenameDialog(o,t,mxResources.get("apply"),function(t){null!=t&&0<t.length&&c.setCellStyles(mxConstants.STYLE_ROTATION,t)},mxResources.get("enterValue")+" ("+mxResources.get("rotation")+" 0-360)"));o.showDialog(e.container,375,80,!0,!0),e.init()}),this.addAction("resetView",function(){c.zoomTo(1),o.resetScrollbars()},null,null,"Enter/Home"),this.addAction("zoomIn",function(t){c.isFastZoomEnabled()?c.lazyZoom(!0,!0,o.buttonZoomDelay):c.zoomIn()},null,null,Editor.ctrlKey+" + / Alt+Mousewheel"),this.addAction("zoomOut",function(t){c.isFastZoomEnabled()?c.lazyZoom(!1,!0,o.buttonZoomDelay):c.zoomOut()},null,null,Editor.ctrlKey+" - / Alt+Mousewheel"),this.addAction("fitWindow",function(){c.pageVisible&&c.isSelectionEmpty()?c.fitPages():o.fitDiagramToWindow()},null,null,Editor.ctrlKey+"+Shift+H"),this.addAction("fitPage",mxUtils.bind(this,function(){c.pageVisible?c.fitPages(1):this.get("pageView").funct()}),null,null,Editor.ctrlKey+"+J"),this.addAction("fitTwoPages",mxUtils.bind(this,function(){c.pageVisible?c.fitPages(2):this.get("pageView").funct()}),null,null,Editor.ctrlKey+"+Shift+J"),this.addAction("fitPageWidth",mxUtils.bind(this,function(){c.pageVisible?c.fitPages(1,!0):this.get("pageView").funct()})),this.put("customZoom",new Action(mxResources.get("custom")+"...",mxUtils.bind(this,function(){var t=new FilenameDialog(this.editorUi,parseInt(100*c.getView().getScale()),mxResources.get("apply"),mxUtils.bind(this,function(t){t=parseInt(t);!isNaN(t)&&0<t&&c.zoomTo(t/100)}),mxResources.get("zoom")+" (%)");this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()}),null,null,Editor.ctrlKey+"+0")),this.addAction("pageScale...",mxUtils.bind(this,function(){var t=new FilenameDialog(this.editorUi,parseInt(100*c.pageScale),mxResources.get("apply"),mxUtils.bind(this,function(t){var t=parseInt(t);!isNaN(t)&&0<t&&((t=new ChangePageSetup(o,null,null,null,t/100)).ignoreColor=!0,t.ignoreImage=!0,c.model.execute(t))}),mxResources.get("pageScale")+" (%)");this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()}));var e=null,l=((e=this.addAction("grid",function(){c.setGridEnabled(!c.isGridEnabled()),c.defaultGridEnabled=c.isGridEnabled(),o.fireEvent(new mxEventObject("gridEnabledChanged"))},null,null,Editor.ctrlKey+"+Shift+G")).setToggleAction(!0),e.setSelectedCallback(function(){return c.isGridEnabled()}),e.setEnabled(!1),(e=this.addAction("guides",function(){c.graphHandler.guidesEnabled=!c.graphHandler.guidesEnabled,o.fireEvent(new mxEventObject("guidesEnabledChanged"))})).setToggleAction(!0),e.setSelectedCallback(function(){return c.graphHandler.guidesEnabled}),e.setEnabled(!1),(e=this.addAction("animations",function(){Editor.enableAnimations=!Editor.enableAnimations,o.fireEvent(new mxEventObject("enableAnimationsChanged"))})).setToggleAction(!0),e.setSelectedCallback(function(){return Editor.enableAnimations}),(e=this.addAction("tooltips",function(){c.tooltipHandler.setEnabled(!c.tooltipHandler.isEnabled()),o.fireEvent(new mxEventObject("tooltipsEnabledChanged"))})).setToggleAction(!0),e.setSelectedCallback(function(){return c.tooltipHandler.isEnabled()}),(e=this.addAction("collapseExpand",function(){var t=new ChangePageSetup(o);t.ignoreColor=!0,t.ignoreImage=!0,t.foldingEnabled=!c.foldingEnabled,c.model.execute(t)})).setToggleAction(!0),e.setSelectedCallback(function(){return c.foldingEnabled}),e.isEnabled=t,(e=this.addAction("pageView",mxUtils.bind(this,function(){o.setPageVisible(!c.pageVisible)}))).setToggleAction(!0),e.setSelectedCallback(function(){return c.pageVisible}),(e=this.addAction("connectionArrows",function(){c.connectionArrowsEnabled=!c.connectionArrowsEnabled,o.fireEvent(new mxEventObject("connectionArrowsChanged"))},null,null,"Alt+Shift+A")).setToggleAction(!0),e.setSelectedCallback(function(){return c.connectionArrowsEnabled}),(e=this.addAction("connectionPoints",function(){c.setConnectable(!c.connectionHandler.isEnabled()),o.fireEvent(new mxEventObject("connectionPointsChanged"))},null,null,"Alt+Shift+O")).setToggleAction(!0),e.setSelectedCallback(function(){return c.connectionHandler.isEnabled()}),(e=this.addAction("copyConnect",function(){c.connectionHandler.setCreateTarget(!c.connectionHandler.isCreateTarget()),o.fireEvent(new mxEventObject("copyConnectChanged"))})).setToggleAction(!0),e.setSelectedCallback(function(){return c.connectionHandler.isCreateTarget()}),e.isEnabled=t,(e=this.addAction("autosave",function(){o.editor.setAutosave(!o.editor.autosave)})).setToggleAction(!0),e.setSelectedCallback(function(){return o.editor.autosave}),e.isEnabled=t,e.visible=!1,this.addAction("help",function(){var t="";mxResources.isLanguageSupported(mxClient.language)&&(t="_"+mxClient.language),c.openLink(RESOURCES_PATH+"/help"+t+".html")}),!1),s=(this.put("about",new Action(mxResources.get("about")+" Graph Editor...",function(){l||(o.showDialog(new AboutDialog(o).container,320,280,!0,!0,function(){l=!1}),l=!0)})),mxUtils.bind(this,function(t,n,i,e){return this.addAction(t,function(){if(null!=i&&c.cellEditor.isContentEditing())i();else{c.stopEditing(!1),c.getModel().beginUpdate();try{var t=c.getEditableCells(c.getSelectionCells());c.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,n,t),(n&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?c.updateLabelElements(t,function(t){t.style.fontWeight=null,"B"==t.nodeName&&c.replaceElement(t)}):(n&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?c.updateLabelElements(t,function(t){t.style.fontStyle=null,"I"==t.nodeName&&c.replaceElement(t)}):(n&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&c.updateLabelElements(t,function(t){t.style.textDecoration=null,"U"==t.nodeName&&c.replaceElement(t)});for(var e=0;e<t.length;e++)0==c.model.getChildCount(t[e])&&c.autoSizeCell(t[e],!1)}finally{c.getModel().endUpdate()}}},null,null,e)}));function g(t,e,n,i,l){l.getModel().beginUpdate();try{var s,o=l.getCellGeometry(t);null!=o&&n&&i&&(s=n/i,o=o.clone(),1<s?o.height=o.width/s:o.width=o.height*s,l.getModel().setGeometry(t,o)),l.setCellStyles(mxConstants.STYLE_CLIP_PATH,e,[t]),l.setCellStyles(mxConstants.STYLE_ASPECT,"fixed",[t])}finally{l.getModel().endUpdate()}}s("bold",mxConstants.FONT_BOLD,function(){document.execCommand("bold",!1,null)},Editor.ctrlKey+"+B"),s("italic",mxConstants.FONT_ITALIC,function(){document.execCommand("italic",!1,null)},Editor.ctrlKey+"+I"),s("underline",mxConstants.FONT_UNDERLINE,function(){document.execCommand("underline",!1,null)},Editor.ctrlKey+"+U"),this.addAction("fontColor...",function(){o.menus.pickColor(mxConstants.STYLE_FONTCOLOR,"forecolor","000000","default",c.shapeForegroundColor)}),this.addAction("strokeColor...",function(){o.menus.pickColor(mxConstants.STYLE_STROKECOLOR,null,null,"default",c.shapeForegroundColor)}),this.addAction("fillColor...",function(){o.menus.pickColor(mxConstants.STYLE_FILLCOLOR,null,null,"default",c.shapeBackgroundColor)}),this.addAction("gradientColor...",function(){o.menus.pickColor(mxConstants.STYLE_GRADIENTCOLOR,null,null,"default",c.shapeForegroundColor)}),this.addAction("backgroundColor...",function(){o.menus.pickColor(mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,"backcolor",null,"default",c.shapeBackgroundColor)}),this.addAction("borderColor...",function(){o.menus.pickColor(mxConstants.STYLE_LABEL_BORDERCOLOR,null,null,"default",c.shapeForegroundColor)}),this.addAction("removeFormat",function(){if(c.isEnabled()&&!c.isSelectionEmpty()&&!c.isEditing()){c.getModel().beginUpdate();try{for(var t=c.getSelectionCells(),e=0;e<t.length;e++)c.removeTextStyleForCell(t[e],!0)}finally{c.getModel().endUpdate()}}}),this.addAction("vertical",function(){o.menus.toggleStyle(mxConstants.STYLE_HORIZONTAL,!0)}),this.addAction("shadow",function(){o.menus.toggleStyle(mxConstants.STYLE_SHADOW)}),this.addAction("solid",function(){c.getModel().beginUpdate();try{c.setCellStyles(mxConstants.STYLE_DASHED,null),c.setCellStyles(mxConstants.STYLE_DASH_PATTERN,null),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",[null,null],"cells",c.getSelectionCells()))}finally{c.getModel().endUpdate()}}),this.addAction("dashed",function(){c.getModel().beginUpdate();try{c.setCellStyles(mxConstants.STYLE_DASHED,"1"),c.setCellStyles(mxConstants.STYLE_DASH_PATTERN,null),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",["1",null],"cells",c.getSelectionCells()))}finally{c.getModel().endUpdate()}}),this.addAction("dotted",function(){c.getModel().beginUpdate();try{c.setCellStyles(mxConstants.STYLE_DASHED,"1"),c.setCellStyles(mxConstants.STYLE_DASH_PATTERN,"1 4"),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",["1","1 4"],"cells",c.getSelectionCells()))}finally{c.getModel().endUpdate()}}),this.addAction("sharp",function(){c.getModel().beginUpdate();try{c.setCellStyles(mxConstants.STYLE_ROUNDED,"0"),c.setCellStyles(mxConstants.STYLE_CURVED,"0"),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["0","0"],"cells",c.getSelectionCells()))}finally{c.getModel().endUpdate()}}),this.addAction("rounded",function(){c.getModel().beginUpdate();try{c.setCellStyles(mxConstants.STYLE_ROUNDED,"1"),c.setCellStyles(mxConstants.STYLE_CURVED,"0"),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["1","0"],"cells",c.getSelectionCells()))}finally{c.getModel().endUpdate()}}),this.addAction("toggleRounded",function(){if(!c.isSelectionEmpty()&&c.isEnabled()){c.getModel().beginUpdate();try{var t=c.getSelectionCells(),e=c.getCurrentCellStyle(t[0]),n="1"==mxUtils.getValue(e,mxConstants.STYLE_ROUNDED,"0")?"0":"1";c.setCellStyles(mxConstants.STYLE_ROUNDED,n),c.setCellStyles(mxConstants.STYLE_CURVED,null),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",[n,"0"],"cells",c.getSelectionCells()))}finally{c.getModel().endUpdate()}}}),this.addAction("curved",function(){c.getModel().beginUpdate();try{c.setCellStyles(mxConstants.STYLE_ROUNDED,"0"),c.setCellStyles(mxConstants.STYLE_CURVED,"1"),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["0","1"],"cells",c.getSelectionCells()))}finally{c.getModel().endUpdate()}}),this.addAction("collapsible",function(){var t=c.view.getState(c.getSelectionCell()),e="1";null!=t&&null!=c.getFoldingImage(t)&&(e="0"),c.setCellStyles("collapsible",e),o.fireEvent(new mxEventObject("styleChanged","keys",["collapsible"],"values",[e],"cells",c.getSelectionCells()))}),this.addAction("editStyle...",mxUtils.bind(this,function(){var t,e=c.getEditableCells(c.getSelectionCells());null!=e&&0<e.length&&(t=c.getModel(),t=new TextareaDialog(this.editorUi,mxResources.get("editStyle")+":",t.getStyle(e[0])||"",function(t){null!=t&&c.setCellStyle(mxUtils.trim(t),e)},null,null,400,220),this.editorUi.showDialog(t.container,420,300,!0,!0),t.init())}),null,null,Editor.ctrlKey+"+E"),this.addAction("setAsDefaultStyle",function(){c.isEnabled()&&!c.isSelectionEmpty()&&o.setDefaultStyle(c.getSelectionCell())},null,null,Editor.ctrlKey+"+Shift+D"),this.addAction("clearDefaultStyle",function(){c.isEnabled()&&o.clearDefaultStyle()},null,null,Editor.ctrlKey+"+Shift+R"),this.addAction("addWaypoint",function(){var t=c.getSelectionCell();if(null!=t&&c.getModel().isEdge(t)){var e=a.graph.selectionCellsHandler.getHandler(t);if(e instanceof mxEdgeHandler){for(var n=c.view.translate,i=c.view.scale,l=n.x,s=n.y,o=c.getModel().getParent(t),r=c.getCellGeometry(o);c.getModel().isVertex(o)&&null!=r;)l+=r.x,s+=r.y,o=c.getModel().getParent(o),r=c.getCellGeometry(o);n=Math.round(c.snap(c.popupMenuHandler.triggerX/i-l)),t=Math.round(c.snap(c.popupMenuHandler.triggerY/i-s));e.addPointAt(e.state,n,t)}}}),this.addAction("removeWaypoint",function(){var t=o.actions.get("removeWaypoint");null!=t.handler&&t.handler.removePoint(t.handler.state,t.index)}),this.addAction("clearAnchors",function(){var t=c.getSelectionCells();if(null!=t){t=c.getEditableCells(c.addAllEdges(t)),c.getModel().beginUpdate();try{for(var e=0;e<t.length;e++){var n=t[e];c.getModel().isEdge(n)&&(c.setCellStyles(mxConstants.STYLE_EXIT_X,null,[n]),c.setCellStyles(mxConstants.STYLE_EXIT_Y,null,[n]),c.setCellStyles(mxConstants.STYLE_ENTRY_X,null,[n]),c.setCellStyles(mxConstants.STYLE_ENTRY_Y,null,[n]))}}finally{c.getModel().endUpdate()}}}),this.addAction("clearWaypoints",function(){var t=c.getSelectionCells();if(null!=t){t=c.getEditableCells(c.addAllEdges(t)),c.getModel().beginUpdate();try{for(var e=0;e<t.length;e++){var n,i=t[e];c.getModel().isEdge(i)&&null!=(n=c.getCellGeometry(i))&&((n=n.clone()).points=null,n.x=0,n.y=0,n.offset=null,c.getModel().setGeometry(i,n))}}finally{c.getModel().endUpdate()}}},null,null,"Alt+Shift+R"),e=this.addAction("subscript",mxUtils.bind(this,function(){c.cellEditor.isContentEditing()&&document.execCommand("subscript",!1,null)}),null,null,Editor.ctrlKey+"+,"),e=this.addAction("superscript",mxUtils.bind(this,function(){c.cellEditor.isContentEditing()&&document.execCommand("superscript",!1,null)}),null,null,Editor.ctrlKey+"+."),e=this.addAction("decreaseFontSize",mxUtils.bind(this,function(){var t;c.isSelectionEmpty()||(t=c.getCurrentCellStyle(c.getSelectionCell()),t=mxUtils.getValue(t,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),c.setCellStyles(mxConstants.STYLE_FONTSIZE,Math.max(1,t-1),c.getSelectionCells()))}),null,null,Editor.ctrlKey+"+Shift + (Numpad)"),e=this.addAction("increaseFontSize",mxUtils.bind(this,function(){var t;c.isSelectionEmpty()||(t=c.getCurrentCellStyle(c.getSelectionCell()),t=mxUtils.getValue(t,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),c.setCellStyles(mxConstants.STYLE_FONTSIZE,Math.min(100,t+1),c.getSelectionCells()))}),null,null,Editor.ctrlKey+"+Shift - (Numpad)"),this.addAction("image...",function(){var t,e,n,i,m;c.isEnabled()&&!c.isCellLocked(c.getDefaultParent())&&(t=mxResources.get("image")+" ("+mxResources.get("url")+"):",n="",(i=null)!=(e=c.getView().getState(c.getSelectionCell()))&&(n=e.style[mxConstants.STYLE_IMAGE]||n,i=e.style[mxConstants.STYLE_CLIP_PATH]||i),m=c.cellEditor.saveSelection(),o.showImageDialog(t,n,function(t,e,n,i,l,s){if(c.cellEditor.isContentEditing())c.cellEditor.restoreSelection(m),c.insertImage(t,e,n);else{var o=c.getSelectionCells();if(null!=t&&(0<t.length||0<o.length)){var r=null;c.getModel().beginUpdate();try{0==o.length&&(o=[c.insertVertex(c.getDefaultParent(),null,"",0,0,e,n,"shape=image;imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;")],a=c.getCenterInsertPoint(c.getBoundingBoxFromGeometry(o,!0)),o[0].geometry.x=a.x,o[0].geometry.y=a.y,null!=i&&g(o[0],i,l,s,c),r=o,c.fireEvent(new mxEventObject("cellsInserted","cells",r))),c.setCellStyles(mxConstants.STYLE_IMAGE,0<t.length?t:null,o);var a,h=c.getCurrentCellStyle(o[0]);if("image"!=h[mxConstants.STYLE_SHAPE]&&"label"!=h[mxConstants.STYLE_SHAPE]?c.setCellStyles(mxConstants.STYLE_SHAPE,"image",o):0==t.length&&c.setCellStyles(mxConstants.STYLE_SHAPE,null,o),null==i&&c.setCellStyles(mxConstants.STYLE_CLIP_PATH,null,o),null!=e&&null!=n)for(var u=0;u<o.length;u++){var d,p=o[u];"0"!=c.getCurrentCellStyle(p).expand&&null!=(d=c.getModel().getGeometry(p))&&((d=d.clone()).width=e,d.height=n,c.getModel().setGeometry(p,d)),null!=i&&g(p,i,l,s,c)}}finally{c.getModel().endUpdate()}null!=r&&(c.setSelectionCells(r),c.scrollCellToVisible(r[0]))}}},c.cellEditor.isContentEditing(),!c.cellEditor.isContentEditing(),!0,i))}).isEnabled=t,this.addAction("crop...",function(){var t,e,n,i=c.getSelectionCell();c.isEnabled()&&!c.isCellLocked(c.getDefaultParent())&&null!=i&&(e=(t=c.getCurrentCellStyle(i))[mxConstants.STYLE_IMAGE],n=t[mxConstants.STYLE_SHAPE],e)&&"image"==n&&(n=new CropImageDialog(o,e,t[mxConstants.STYLE_CLIP_PATH],function(t,e,n){g(i,t,e,n,c)}),o.showDialog(n.container,300,390,!0,!0))}).isEnabled=t,(e=this.addAction("layers",mxUtils.bind(this,function(){null==this.layersWindow?(this.layersWindow=new LayersWindow(o,document.body.offsetWidth-280,120,212,200),this.layersWindow.window.addListener("show",mxUtils.bind(this,function(){o.fireEvent(new mxEventObject("layers"))})),this.layersWindow.window.addListener("hide",function(){o.fireEvent(new mxEventObject("layers"))}),this.layersWindow.window.setVisible(!0),o.fireEvent(new mxEventObject("layers")),this.layersWindow.init()):this.layersWindow.window.setVisible(!this.layersWindow.window.isVisible())}),null,null,Editor.ctrlKey+"+Shift+L")).setToggleAction(!0),e.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.layersWindow&&this.layersWindow.window.isVisible()})),(e=this.addAction("format",mxUtils.bind(this,function(){o.toggleFormatPanel()}),null,null,Editor.ctrlKey+"+Shift+P")).setToggleAction(!0),e.setSelectedCallback(mxUtils.bind(this,function(){return o.isFormatPanelVisible()})),(e=this.addAction("outline",mxUtils.bind(this,function(){null==this.outlineWindow?(this.outlineWindow=new OutlineWindow(o,document.body.offsetWidth-260,100,180,180),this.outlineWindow.window.addListener("show",mxUtils.bind(this,function(){o.fireEvent(new mxEventObject("outline"))})),this.outlineWindow.window.addListener("hide",function(){o.fireEvent(new mxEventObject("outline"))}),this.outlineWindow.window.setVisible(!0),o.fireEvent(new mxEventObject("outline"))):this.outlineWindow.window.setVisible(!this.outlineWindow.window.isVisible())}),null,null,Editor.ctrlKey+"+Shift+O")).setToggleAction(!0),e.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.outlineWindow&&this.outlineWindow.window.isVisible()})),this.addAction("editConnectionPoints...",function(){var t,e=c.getSelectionCell();c.isEnabled()&&!c.isCellLocked(c.getDefaultParent())&&null!=e&&null!=e.geometry&&(t=new ConnectionPointsDialog(o,e),o.showDialog(t.container,350,450,!0,!1,function(){t.destroy()}),t.init())},null,null,"Alt+Shift+Q").isEnabled=t},Actions.prototype.addAction=function(t,e,n,i,l){var s="..."==t.substring(t.length-3)?(t=t.substring(0,t.length-3),mxResources.get(t)+"..."):mxResources.get(t);return this.put(t,new Action(s,e,n,i,l))},Actions.prototype.put=function(t,e){return this.actions[t]=e},Actions.prototype.get=function(t){return this.actions[t]},mxUtils.extend(Action,mxEventSource),Action.prototype.createFunction=function(t){return t},Action.prototype.setEnabled=function(t){this.enabled!=t&&(this.enabled=t,this.fireEvent(new mxEventObject("stateChanged")))},Action.prototype.isEnabled=function(){return this.enabled},Action.prototype.setToggleAction=function(t){this.toggleAction=t},Action.prototype.setSelectedCallback=function(t){this.selectedCallback=t},Action.prototype.isSelected=function(){return this.selectedCallback()},__mxOutput.Actions=void 0!==Actions?Actions:void 0;let EditorUi=function(t,e,n){mxEventSource.call(this),this.destroyFunctions=[],this.editor=t||new Editor,this.container=e||document.body;var i,s=this,o=this.editor.graph,l=(o.lightbox=n,o.getGraphBounds);if(o.getGraphBounds=function(){var t,e,n=l.apply(this,arguments),i=this.backgroundImage;return null!=i&&null!=i.width&&null!=i.height&&(t=this.view.translate,e=this.view.scale,(n=mxRectangle.fromRectangle(n)).add(new mxRectangle((t.x+i.x)*e,(t.y+i.y)*e,i.width*e,i.height*e))),n},o.useCssTransforms&&(this.lazyZoomDelay=0),mxClient.IS_SVG?mxPopupMenu.prototype.submenuImage="data:image/gif;base64,R0lGODlhCQAJAIAAAP///zMzMyH5BAEAAAAALAAAAAAJAAkAAAIPhI8WebHsHopSOVgb26AAADs=":(new Image).src=mxPopupMenu.prototype.submenuImage,mxClient.IS_SVG||null==mxConnectionHandler.prototype.connectImage||((new Image).src=mxConnectionHandler.prototype.connectImage.src),this.selectionStateListener=mxUtils.bind(this,function(t,e){this.clearSelectionState()}),o.getSelectionModel().addListener(mxEvent.CHANGE,this.selectionStateListener),o.getModel().addListener(mxEvent.CHANGE,this.selectionStateListener),o.addListener(mxEvent.EDITING_STARTED,this.selectionStateListener),o.addListener(mxEvent.EDITING_STOPPED,this.selectionStateListener),o.getView().addListener("unitChanged",this.selectionStateListener),this.editor.chromeless&&!this.editor.editable&&(this.footerHeight=0,o.isEnabled=function(){return!1},o.panningHandler.isForcePanningEvent=function(t){for(var e=t.getSource();null!=e&&e!=o.container;){if("foreignObject"===e.nodeName||"text"===e.nodeName)return!1;e=e.parentNode}return!mxEvent.isPopupTrigger(t.getEvent())},i=o.panningHandler.start,o.panningHandler.start=function(){i.apply(this,arguments),mxUtils.clearSelection()}),this.actions=new Actions(this),this.menus=this.createMenus(),this.sidebar=new Sidebar(this),!o.standalone){var r,a=!1,h=!1,u=(this.setDefaultStyle=function(t){try{o.getModel().isEdge(t)?(o.pasteEdgeStyle=!1,h=!1):a=!1;var e,n=o.getCellStyle(t,!1),i=[],l=[];for(e in n)i.push(n[e]),l.push(e);o.getModel().isEdge(t)?o.currentEdgeStyle={}:o.currentVertexStyle={},this.fireEvent(new mxEventObject("styleChanged","keys",l,"values",i,"cells",[t],"force",!0)),o.getModel().isEdge(t)?(o.pasteEdgeStyle=!0,h=!0):a=!0}catch(t){this.handleError(t)}},this.clearDefaultStyle=function(){o.currentEdgeStyle=mxUtils.clone(o.defaultEdgeStyle),o.currentVertexStyle=mxUtils.clone(o.defaultVertexStyle),o.pasteEdgeStyle=!1,a=h=!1,this.fireEvent(new mxEventObject("styleChanged","keys",[],"values",[],"cells",[]))},o.addListener("cellsInserted",function(t,e){o.pasteCellStyles(o.includeDescendants(e.getProperty("cells")))}),o.addListener("textInserted",function(t,e){o.pasteCellStyles(e.getProperty("cells"))}),this.createDivs(),this.refresh(),mxUtils.bind(this,function(t){return null==t&&(t=window.event),o.isEditing()||null!=t&&this.isSelectionAllowed(t)}));this.container!=document.body||this.editor.chromeless&&!this.editor.editable||(this.menubarContainer.onselectstart=u,this.menubarContainer.onmousedown=u,this.toolbarContainer.onselectstart=u,this.toolbarContainer.onmousedown=u,this.diagramContainer.onselectstart=u,this.diagramContainer.onmousedown=u,this.sidebarContainer.onselectstart=u,this.sidebarContainer.onmousedown=u,this.formatContainer.onselectstart=u,this.formatContainer.onmousedown=u,this.footerContainer.onselectstart=u,this.footerContainer.onmousedown=u,null!=this.tabContainer&&(this.tabContainer.onselectstart=u),mxClient.IS_IOS&&null!=(e=function(){var t=null;if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);try{t=[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}catch(t){}}return t}())&&16<=e[0]&&(mxUtils.setPrefixedStyle(this.menubarContainer.style,"userSelect","none"),mxUtils.setPrefixedStyle(this.diagramContainer.style,"userSelect","none"),mxUtils.setPrefixedStyle(this.sidebarContainer.style,"userSelect","none"),mxUtils.setPrefixedStyle(this.formatContainer.style,"userSelect","none"),mxUtils.setPrefixedStyle(this.footerContainer.style,"userSelect","none"),null!=this.tabContainer)&&mxUtils.setPrefixedStyle(this.tabContainer.style,"userSelect","none")),!this.editor.chromeless||this.editor.editable?(n=function(t){if(null!=t){var e=mxEvent.getSource(t);if("A"==e.nodeName)for(;null!=e;){if("geHint"==e.className)return!0;e=e.parentNode}}return u(t)},mxClient.IS_IE&&(void 0===document.documentMode||document.documentMode<9)?mxEvent.addListener(this.diagramContainer,"contextmenu",n):this.diagramContainer.oncontextmenu=n):o.panningHandler.usePopupTrigger=!1,o.init(this.diagramContainer),mxClient.IS_SVG&&null!=o.view.getDrawPane()&&null!=(e=o.view.getDrawPane().ownerSVGElement)&&(e.style.position="absolute"),this.hoverIcons=this.createHoverIcons(),null!=o.graphHandler&&(r=o.graphHandler.start,o.graphHandler.start=function(){null!=s.hoverIcons&&s.hoverIcons.reset(),r.apply(this,arguments)}),mxEvent.addListener(this.diagramContainer,"mousemove",mxUtils.bind(this,function(t){var e=mxUtils.getOffset(this.diagramContainer);0<mxEvent.getClientX(t)-e.x-this.diagramContainer.clientWidth||0<mxEvent.getClientY(t)-e.y-this.diagramContainer.clientHeight?this.diagramContainer.setAttribute("title",mxResources.get("panTooltip")):this.diagramContainer.removeAttribute("title")}));var d=this.hoverIcons.isResetEvent,p=(this.hoverIcons.isResetEvent=function(t,e){return s.isSpaceDown()||d.apply(this,arguments)},this.keydownHandler=mxUtils.bind(this,function(t){16==t.which?this.shiftDown=!0:32!=t.which||o.isEditing()?mxEvent.isConsumed(t)||27!=t.keyCode||this.hideDialog(null,!0):(this.spaceDown=!0,this.hoverIcons.reset(),o.container.style.cursor="move",o.isEditing()||mxEvent.getSource(t)!=o.container||mxEvent.consume(t))}),mxEvent.addListener(document,"keydown",this.keydownHandler),this.keyupHandler=mxUtils.bind(this,function(t){o.container.style.cursor="",this.spaceDown=!1,this.shiftDown=!1}),mxEvent.addListener(document,"keyup",this.keyupHandler),o.panningHandler.isForcePanningEvent),m=(o.panningHandler.isForcePanningEvent=function(t){return p.apply(this,arguments)||s.isSpaceDown()||mxEvent.isMouseEvent(t.getEvent())&&(this.usePopupTrigger||!mxEvent.isPopupTrigger(t.getEvent()))&&(!mxEvent.isControlDown(t.getEvent())&&mxEvent.isRightMouseButton(t.getEvent())||mxEvent.isMiddleMouseButton(t.getEvent()))},o.cellEditor.isStopEditingEvent),c=(o.cellEditor.isStopEditingEvent=function(t){return m.apply(this,arguments)||13==t.keyCode&&(!mxClient.IS_SF&&mxEvent.isControlDown(t)||mxClient.IS_MAC&&mxEvent.isMetaDown(t)||mxClient.IS_SF&&mxEvent.isShiftDown(t))},o.isZoomWheelEvent),g=!(o.isZoomWheelEvent=function(){return s.isSpaceDown()||c.apply(this,arguments)}),x=null,y=null,C=null,f=mxUtils.bind(this,function(){if(null!=this.toolbar&&g!=o.cellEditor.isContentEditing()){for(var t=this.toolbar.container.firstChild,e=[];null!=t;){var n=t.nextSibling;mxUtils.indexOf(this.toolbar.staticElements,t)<0&&(t.parentNode.removeChild(t),e.push(t)),t=n}var i=this.toolbar.fontMenu,l=this.toolbar.sizeMenu;if(null==C)this.toolbar.createTextToolbar();else{for(var s=0;s<C.length;s++)this.toolbar.container.appendChild(C[s]);this.toolbar.fontMenu=x,this.toolbar.sizeMenu=y}g=o.cellEditor.isContentEditing(),x=i,y=l,C=e}}),v=o.cellEditor.startEditing,E=(o.cellEditor.startEditing=function(){var e,t;v.apply(this,arguments),f(),o.cellEditor.isContentEditing()&&(e=!1,mxEvent.addListener(o.cellEditor.textarea,"input",t=function(){e||(e=!0,window.setTimeout(function(){var t=o.getSelectedEditingElement();null!=t&&null!=(t=mxUtils.getCurrentStyle(t))&&null!=s.toolbar&&(s.toolbar.setFontName(mxUtils.getCssFontFamily(t.fontFamily)),s.toolbar.setFontSize(parseInt(t.fontSize))),e=!1},0))}),mxEvent.addListener(o.cellEditor.textarea,"touchend",t),mxEvent.addListener(o.cellEditor.textarea,"mouseup",t),mxEvent.addListener(o.cellEditor.textarea,"keyup",t),t())},o.cellEditor.stopEditing);if(o.cellEditor.stopEditing=function(t,e){try{E.apply(this,arguments),f()}catch(t){s.handleError(t)}},o.container.setAttribute("tabindex","0"),o.container.style.cursor="default",window.self===window.top&&null!=o.container.parentNode)try{o.container.focus()}catch(t){}var S=o.fireMouseEvent,w=(o.fireMouseEvent=function(t,e,n){try{t==mxEvent.MOUSE_DOWN&&this.container.focus(),S.apply(this,arguments)}catch(t){s.handleError(t)}},o.foldCells),b=(o.foldCells=function(t,e,n,i,l){try{w.apply(this,arguments)}catch(t){s.handleError(t)}},o.popupMenuHandler.autoExpand=!0,null!=this.menus&&(o.popupMenuHandler.factoryMethod=mxUtils.bind(this,function(t,e,n){this.menus.createPopupMenu(t,e,n)})),mxEvent.addGestureListeners(document,mxUtils.bind(this,function(t){o.popupMenuHandler.hideMenu()})),this.keyHandler=this.createKeyHandler(t),this.getKeyHandler=function(){return keyHandler},o.connectionHandler.addListener(mxEvent.CONNECT,function(t,e){var n=[e.getProperty("cell")];e.getProperty("terminalInserted")&&(n.push(e.getProperty("terminal")),window.setTimeout(function(){null!=s.hoverIcons&&s.hoverIcons.update(o.view.getState(n[n.length-1]))},0)),o.pasteCellStyles(n)}),this.addListener("styleChanged",mxUtils.bind(this,function(t,e){var n=e.getProperty("force");(this.updateDefaultStyle||n)&&o.copyCellStyles(e.getProperty("cells"),e.getProperty("keys"),e.getProperty("values"),o.currentVertexStyle,o.currentEdgeStyle,a,h),null!=this.toolbar&&(this.toolbar.setFontName(o.currentVertexStyle.fontFamily||Menus.prototype.defaultFont),this.toolbar.setFontSize(o.currentVertexStyle.fontSize||Menus.prototype.defaultFontSize),null!=this.toolbar.edgeStyleMenu&&(n=this.toolbar.edgeStyleMenu.getElementsByTagName("div")[0],"orthogonalEdgeStyle"==o.currentEdgeStyle.edgeStyle&&"1"==o.currentEdgeStyle.curved?n.className="geSprite geSprite-curved":"straight"==o.currentEdgeStyle.edgeStyle||"none"==o.currentEdgeStyle.edgeStyle||null==o.currentEdgeStyle.edgeStyle?n.className="geSprite geSprite-straight":"entityRelationEdgeStyle"==o.currentEdgeStyle.edgeStyle?n.className="geSprite geSprite-entity":"elbowEdgeStyle"==o.currentEdgeStyle.edgeStyle?n.className="geSprite geSprite-"+("vertical"==o.currentEdgeStyle.elbow?"verticalelbow":"horizontalelbow"):"isometricEdgeStyle"==o.currentEdgeStyle.edgeStyle?n.className="geSprite geSprite-"+("vertical"==o.currentEdgeStyle.elbow?"verticalisometric":"horizontalisometric"):n.className="geSprite geSprite-orthogonal"),null!=this.toolbar.edgeShapeMenu)&&(e=this.toolbar.edgeShapeMenu.getElementsByTagName("div")[0],"link"==o.currentEdgeStyle.shape?e.className="geSprite geSprite-linkedge":"flexArrow"==o.currentEdgeStyle.shape?e.className="geSprite geSprite-arrow":"arrow"==o.currentEdgeStyle.shape?e.className="geSprite geSprite-simplearrow":e.className="geSprite geSprite-connection")})),null!=this.toolbar&&(n=mxUtils.bind(this,function(){var t=o.currentVertexStyle.fontFamily||"Helvetica",e=String(o.currentVertexStyle.fontSize||"12"),n=o.getView().getState(o.getSelectionCell());null!=n&&(t=n.style[mxConstants.STYLE_FONTFAMILY]||t,e=n.style[mxConstants.STYLE_FONTSIZE]||e,10<t.length)&&(t=t.substring(0,8)+"..."),this.toolbar.setFontName(t),this.toolbar.setFontSize(e)}),o.getSelectionModel().addListener(mxEvent.CHANGE,n),o.getModel().addListener(mxEvent.CHANGE,n)),o.addListener(mxEvent.CELLS_ADDED,function(t,e){var n=e.getProperty("cells"),e=e.getProperty("parent");null!=e&&o.getModel().isLayer(e)&&!o.isCellVisible(e)&&null!=n&&0<n.length&&o.getModel().setVisible(e,!0)}),Graph.selectParentLayer&&o.selectionModel.addListener(mxEvent.CHANGE,function(){var t;o.isEnabled()&&!o.isSelectionEmpty()&&null!=(t=o.getLayerForCells(o.getSelectionCells()))&&o.setDefaultParent(t)}),this.gestureHandler=mxUtils.bind(this,function(t){null!=this.currentMenu&&mxEvent.getSource(t)!=this.currentMenu.div&&this.hideCurrentMenu()}),mxEvent.addGestureListeners(document,this.gestureHandler),null);this.resizeHandler=mxUtils.bind(this,function(){null!=b&&window.clearTimeout(b),b=window.setTimeout(mxUtils.bind(this,function(){b=null,this.windowResized()}),100)}),mxEvent.addListener(window,"resize",this.resizeHandler),this.orientationChangeHandler=mxUtils.bind(this,function(){this.refresh()}),mxEvent.addListener(window,"orientationchange",this.orientationChangeHandler),mxClient.IS_IOS&&!window.navigator.standalone&&void 0!==Menus&&(this.scrollHandler=mxUtils.bind(this,function(){window.scrollTo(0,0)}),mxEvent.addListener(window,"scroll",this.scrollHandler)),this.editor.addListener("resetGraphView",mxUtils.bind(this,function(){this.resetScrollbars()})),this.addListener("gridEnabledChanged",mxUtils.bind(this,function(){o.view.validateBackground()})),this.addListener("backgroundColorChanged",mxUtils.bind(this,function(){o.view.validateBackground()})),o.addListener("gridSizeChanged",mxUtils.bind(this,function(){o.isGridEnabled()&&o.view.validateBackground()})),this.editor.resetGraph()}this.init(),o.standalone||this.open()};function ChangeGridColor(t,e){this.ui=t,this.color=e}function ChangePageSetup(t,e,n,i,l){this.ui=t,this.color=e,this.previousColor=e,this.image=n,this.previousImage=n,this.format=i,this.previousFormat=i,this.pageScale=l,this.previousPageScale=l,this.ignoreColor=!1,this.ignoreImage=!1}EditorUi.compactUi=!0,EditorUi.parsePng=function(t,e,n){var i=0;function l(t,e){var n=i;return i+=e,t.substring(n,i)}if(l(t,8)!=String.fromCharCode(137)+"PNG"+String.fromCharCode(13,10,26,10))null!=n&&n();else if(l(t,4),"IHDR"!=l(t,4))null!=n&&n();else{l(t,17);do{var s=(s=l(s=t,4)).charCodeAt(3)+(s.charCodeAt(2)<<8)+(s.charCodeAt(1)<<16)+(s.charCodeAt(0)<<24),o=l(t,4)}while((null==e||!e(i-8,o,s))&&((value=l(t,s),l(t,4),"IEND"!=o)&&s))}},mxUtils.extend(EditorUi,mxEventSource),EditorUi.prototype.splitSize=mxClient.IS_TOUCH||mxClient.IS_POINTER?12:8,EditorUi.prototype.menubarHeight=30,EditorUi.prototype.formatEnabled=!0,EditorUi.prototype.formatWidth=240,EditorUi.prototype.toolbarHeight=38,EditorUi.prototype.footerHeight=28,EditorUi.prototype.defaultSidebarWidth=Math.min(screen.width/2,"large"!=urlParams["sidebar-entries"]?212:240),EditorUi.prototype.hsplitPosition=screen.width<=Editor.smallScreenWidth?0:EditorUi.prototype.defaultSidebarWidth,EditorUi.prototype.allowAnimation=!0,EditorUi.prototype.lightboxMaxFitScale=2,EditorUi.prototype.lightboxVerticalDivider=4,EditorUi.prototype.hsplitClickEnabled=!1,EditorUi.prototype.updateDefaultStyle=!1,EditorUi.prototype.spaceDown=!1,EditorUi.prototype.shiftDown=!1,EditorUi.prototype.init=function(){var t,e,n=this.editor.graph;n.standalone||("0"!=urlParams["shape-picker"]&&this.installShapePicker(),mxEvent.addListener(n.container,"scroll",mxUtils.bind(this,function(){n.tooltipHandler.hide(),null!=n.connectionHandler&&null!=n.connectionHandler.constraintHandler&&n.connectionHandler.constraintHandler.reset()})),n.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){n.tooltipHandler.hide();var t=n.getRubberband();null!=t&&t.cancel()})),mxEvent.addListener(n.container,"keydown",mxUtils.bind(this,function(t){this.onKeyDown(t)})),mxEvent.addListener(n.container,"keypress",mxUtils.bind(this,function(t){this.onKeyPress(t)})),this.addUndoListener(),this.addBeforeUnloadListener(),n.getSelectionModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.updateActionStates()})),n.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.updateActionStates()})),t=n.setDefaultParent,(e=this).editor.graph.setDefaultParent=function(){t.apply(this,arguments),e.updateActionStates()},n.showLinkDialog=mxUtils.bind(e,e.showLinkDialog),n.editLink=e.actions.get("editLink").funct,this.updateActionStates(),this.initClipboard(),this.initCanvas(),null!=this.format&&this.format.init())},EditorUi.prototype.clearSelectionState=function(){this.selectionState=null},EditorUi.prototype.getSelectionState=function(){return null==this.selectionState&&(this.selectionState=this.createSelectionState()),this.selectionState},EditorUi.prototype.createSelectionState=function(){for(var t=this.editor.graph,e=t.getSelectionCells(),n=this.initSelectionState(),i=!0,l=0;l<e.length;l++){var s=t.getCurrentCellStyle(e[l]);"0"!=mxUtils.getValue(s,mxConstants.STYLE_EDITABLE,"1")&&(this.updateSelectionStateForCell(n,e[l],e,i),i=!1)}return this.updateSelectionStateForTableCells(n),n},EditorUi.prototype.initSelectionState=function(){return{vertices:[],edges:[],cells:[],x:null,y:null,width:null,height:null,style:{},containsImage:!1,containsLabel:!1,fill:!0,glass:!0,html:!0,rounded:!0,autoSize:!1,image:!1,shadow:!0,lineJumps:!0,resizable:!0,table:!1,cell:!1,row:!1,movable:!0,rotatable:!0,stroke:!0,swimlane:!1,unlocked:this.editor.graph.isEnabled(),connections:!1}},EditorUi.prototype.updateSelectionStateForTableCells=function(t){if(1<t.cells.length&&t.cell){var e=mxUtils.sortCells(t.cells),n=this.editor.graph.model,i=n.getParent(e[0]),l=n.getParent(i);if(null!=i&&null!=l){for(var s=i.getIndex(e[0]),o=l.getIndex(i),r=null,a=1,h=1,u=0,d=o<l.getChildCount()-1?n.getChildAt(n.getChildAt(l,o+1),s):null;u<e.length-1;){var p=e[++u],m=(null==d||d!=p||null!=r&&a!=r||(r=a,a=0,h++,i=n.getParent(d),d=o+h<l.getChildCount()?n.getChildAt(n.getChildAt(l,o+h),s):null),this.editor.graph.view.getState(p));if(p!=n.getChildAt(i,s+a)||null==m||1!=mxUtils.getValue(m.style,"colspan",1)||1!=mxUtils.getValue(m.style,"rowspan",1))break;a++}u==h*a-1&&(t.mergeCell=e[0],t.colspan=a,t.rowspan=h)}}},EditorUi.prototype.windowResized=function(){window.setTimeout(mxUtils.bind(this,function(){null!=this.editor.graph&&this.refresh()}),0)},EditorUi.prototype.createTimeout=function(e,n,i){var l=!0,s=null,t=mxUtils.bind(this,function(t){s.clear()&&(l=!1,t=null!=t?t:{code:App.ERROR_TIMEOUT,message:mxResources.get("timeout"),retry:mxUtils.bind(this,function(){this.createTimeout(e,n,i)})},null!=i?i(t):this.handleError(t))}),o=window.setTimeout(t,null!=e?e:this.timeout),s={clear:function(){return window.clearTimeout(o),l},isAlive:function(){return l}};return null!=n&&this.tryAndHandle(mxUtils.bind(this,function(){n(s)}),t),s},EditorUi.prototype.tryAndHandle=function(t,e){try{t()}catch(t){null!=e?e(t):this.handleError(t)}},EditorUi.prototype.convertDarkModeColors=function(t,e){var n=this.editor.graph,i=(t=null!=t?t:n.getSelectionCells(),e=null!=e?e:[mxConstants.STYLE_FONTCOLOR,mxConstants.STYLE_FILLCOLOR,mxConstants.STYLE_GRADIENTCOLOR,mxConstants.STYLE_STROKECOLOR,mxConstants.STYLE_IMAGE_BORDER,mxConstants.STYLE_IMAGE_BACKGROUND,mxConstants.STYLE_LABEL_BORDERCOLOR,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR],{}),l=document.createElement("canvas"),s=(l.width=1,l.height=1,l.getContext("2d",{willReadFrequently:!0}));s.filter="invert(100%) hue-rotate(180deg)",n.model.beginUpdate();try{for(var o=0;o<t.length;o++)if(n.model.isEdge(t[o])||n.model.isVertex(t[o])){var r=n.getCurrentCellStyle(t[o]);if(null!=r)for(var a=0;a<e.length;a++)try{var h,u=r[e[a]];null!=u&&"#"==u.charAt(0)&&(null==(h=i[u])&&(h=Graph.invertColor(u,s),i[u]=h),n.setCellStyles(e[a],h,[t[o]]))}catch(t){}}}finally{n.model.endUpdate()}},EditorUi.prototype.updateSelectionStateForCell=function(t,e,n,i){var l,s=this.editor.graph,o=(t.cells.push(e),s.getModel().isVertex(e)?(t.connections=0<s.model.getEdgeCount(e),t.unlocked=t.unlocked&&!s.isCellLocked(e),t.resizable=t.resizable&&s.isCellResizable(e),t.rotatable=t.rotatable&&s.isCellRotatable(e),t.movable=t.movable&&s.isCellMovable(e)&&!s.isTableRow(e)&&!s.isTableCell(e),t.swimlane=t.swimlane||s.isSwimlane(e),t.table=t.table||s.isTable(e),t.cell=t.cell||s.isTableCell(e),t.row=t.row||s.isTableRow(e),t.vertices.push(e),null!=(l=s.getCellGeometry(e))&&(0<l.width?null==t.width?t.width=l.width:t.width!=l.width&&(t.width=""):t.containsLabel=!0,0<l.height?null==t.height?t.height=l.height:t.height!=l.height&&(t.height=""):t.containsLabel=!0,l.relative&&null==l.offset||(o=(l.relative?l.offset:l).x,l=(l.relative?l.offset:l).y,null==t.x?t.x=o:t.x!=o&&(t.x=""),null==t.y?t.y=l:t.y!=l&&(t.y="")))):s.getModel().isEdge(e)&&(t.edges.push(e),t.connections=!0,t.resizable=!1,t.rotatable=!1,t.movable=!1),s.view.getState(e));null!=o&&(t.html=t.html&&s.isHtmlLabel(e),t.autoSize=t.autoSize||s.isAutoSizeState(o),t.glass=t.glass&&s.isGlassState(o),t.rounded=t.rounded&&s.isRoundedState(o),t.lineJumps=t.lineJumps&&s.isLineJumpState(o),t.image=t.image||s.isImageState(o),t.shadow=t.shadow&&s.isShadowState(o),t.fill=t.fill&&s.isFillState(o),t.gradient=t.fill&&s.isGradientState(o),t.stroke=t.stroke&&s.isStrokeState(o),l=mxUtils.getValue(o.style,mxConstants.STYLE_SHAPE,null),t.containsImage=t.containsImage||"image"==l,s.mergeStyle(o.style,t.style,i))},EditorUi.prototype.installShapePicker=function(){var t,n,i,a=this.editor.graph,h=this,e=(a.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(t,e){"mouseDown"==e.getProperty("eventName")&&h.hideShapePicker()})),mxUtils.bind(this,function(){h.hideShapePicker(!0)})),l=(a.addListener("wheel",e),a.addListener(mxEvent.ESCAPE,e),a.view.addListener(mxEvent.SCALE,e),a.view.addListener(mxEvent.SCALE_AND_TRANSLATE,e),a.getSelectionModel().addListener(mxEvent.CHANGE,e),a.popupMenuHandler.isMenuShowing),s=(a.popupMenuHandler.isMenuShowing=function(){return l.apply(this,arguments)||null!=h.shapePicker||null!=h.currentMenu},a.dblClick);a.dblClick=function(t,e){var n;this.isEnabled()&&(null!=e||null==h.sidebar||mxEvent.isShiftDown(t)||a.isCellLocked(a.getDefaultParent())?s.apply(this,arguments):(n=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),mxEvent.consume(t),window.setTimeout(mxUtils.bind(this,function(){h.showShapePicker(n.x,n.y)}),30)))},null!=this.hoverIcons&&(this.hoverIcons.addListener("reset",e),t=this.hoverIcons.drag,this.hoverIcons.drag=function(){h.hideShapePicker(),t.apply(this,arguments)},n=this.hoverIcons.execute,this.hoverIcons.execute=function(s,o,r){var e=r.getEvent();this.graph.isCloneEvent(e)||mxEvent.isShiftDown(e)?n.apply(this,arguments):this.graph.connectVertex(s.cell,o,this.graph.defaultEdgeLength,e,null,null,mxUtils.bind(this,function(t,e,n){var i=a.getCompositeParent(s.cell),l=a.getCellGeometry(i);for(r.consume();null!=i&&a.model.isVertex(i)&&null!=l&&l.relative;)cell=i,i=a.model.getParent(cell),l=a.getCellGeometry(i);window.setTimeout(mxUtils.bind(this,function(){h.showShapePicker(r.getGraphX(),r.getGraphY(),i,mxUtils.bind(this,function(t){n(t),null!=h.hoverIcons&&h.hoverIcons.update(a.view.getState(t))}),o)}),30)}),mxUtils.bind(this,function(t){this.graph.selectCellsForConnectVertex(t,e,this)}))},i=null,this.hoverIcons.addListener("focus",mxUtils.bind(this,function(t,r){null!=i&&window.clearTimeout(i),i=window.setTimeout(mxUtils.bind(this,function(){var t=r.getProperty("arrow"),e=r.getProperty("direction"),n=r.getProperty("event"),t=t.getBoundingClientRect(),i=mxUtils.getOffset(a.container),l=a.container.scrollLeft+t.x-i.x,i=a.container.scrollTop+t.y-i.y,s=a.getCompositeParent(null!=this.hoverIcons.currentState?this.hoverIcons.currentState.cell:null),o=h.showShapePicker(l,i,s,mxUtils.bind(this,function(i){null!=i&&a.connectVertex(s,e,a.defaultEdgeLength,n,!0,!1,function(t,e,n){n(i),null!=h.hoverIcons&&h.hoverIcons.update(a.view.getState(i))},function(t){a.selectCellsForConnectVertex(t)},n,this.hoverIcons)}),e,!0);null!=o&&(this.centerShapePicker(o,t,l,i,e),mxUtils.setOpacity(o,30),mxEvent.addListener(o,"mouseenter",function(){mxUtils.setOpacity(o,100)}),mxEvent.addListener(o,"mouseleave",function(){h.hideShapePicker()}))}),Editor.shapePickerHoverDelay)})),this.hoverIcons.addListener("blur",mxUtils.bind(this,function(t,e){null!=i&&window.clearTimeout(i)})))},EditorUi.prototype.centerShapePicker=function(t,e,n,i,l){l!=mxConstants.DIRECTION_EAST&&l!=mxConstants.DIRECTION_WEST||(t.style.width="40px");var s=t.getBoundingClientRect();l==mxConstants.DIRECTION_NORTH?(n-=s.width/2-10,i-=s.height+6):l==mxConstants.DIRECTION_SOUTH?(n-=s.width/2-10,i+=e.height+6):l==mxConstants.DIRECTION_WEST?(n-=s.width+6,i-=s.height/2-10):l==mxConstants.DIRECTION_EAST&&(n+=e.width+6,i-=s.height/2-10),t.style.left=n+"px",t.style.top=i+"px"},EditorUi.prototype.showShapePicker=function(t,e,n,i,l,s,o,r,a){var h=null;return this.editor.graph.freehand.isDrawing()||(r=r||null==n,null!=(h=this.createShapePicker(t,e,n,i,l,mxUtils.bind(this,function(){this.hideShapePicker()}),this.getCellsForShapePicker(n,s,r),s,o,r,a))&&(null==this.hoverIcons||s||this.hoverIcons.reset(),(t=this.editor.graph).popupMenuHandler.hideMenu(),t.tooltipHandler.hideTooltip(),this.hideCurrentMenu(),this.hideShapePicker(),this.shapePickerCallback=i,this.shapePicker=h)),h},EditorUi.prototype.createShapePicker=function(l,s,o,r,t,a,e,n,h,i,u){u=null==u||u;var d=this.editor.graph,p=null;if(h=null!=h?h:function(t){var t=t[0],e=0,n=0,i=t.geometry;return null!=i&&(e=(i=d.model.isEdge(t)?new mxRectangle(0,0,(t=i.getTerminalPoint(!1)).x,t.y):i).width/2,n=i.height/2),new mxPoint(d.snap(Math.round(l/d.view.scale)-d.view.translate.x-e),d.snap(Math.round(s/d.view.scale)-d.view.translate.y-n))},null!=e&&0<e.length){for(var m=this,d=this.editor.graph,p=document.createElement("div"),c=d.view.getState(o),g=null==o||null!=c&&d.isTransparentState(c)?null:d.copyStyle(o),c=e.length<6?35*e.length:140,x=(p.className="geToolbarContainer geSidebarContainer geShapePicker",p.setAttribute("title",mxResources.get("sidebarTooltip")),p.style.left=l+"px",p.style.top=s+"px",p.style.width=c+"px",mxClient.IS_POINTER&&(p.style.touchAction="none"),n||mxUtils.setPrefixedStyle(p.style,"transform","translate(-22px,-22px)"),null!=d.background&&d.background!=mxConstants.NONE&&(p.style.backgroundColor=d.background),d.container.appendChild(p),mxUtils.bind(this,function(i){var t,e=document.createElement("a"),n=(e.className="geItem",e.style.cssText="position:relative;display:inline-block;position:relative;width:30px;height:30px;cursor:pointer;overflow:hidden;padding:1px",p.appendChild(e),null!=g&&"1"!=urlParams.sketch?this.sidebar.graph.pasteStyle(g,[i]):this.sidebar.graph.pasteCellStyles([i],d.currentVertexStyle,d.currentEdgeStyle),i.geometry);null!=(n=d.model.isEdge(i)?new mxRectangle(0,0,(t=n.getTerminalPoint(!1)).x,t.y):n)&&e.appendChild(this.sidebar.createVertexTemplateFromCells([i],n.width,n.height,"",!0,!1,null,!1,mxUtils.bind(this,function(t){if(!mxEvent.isShiftDown(t)||null==o&&d.isSelectionEmpty()){var e=d.cloneCell(i);if(null!=r)r(e);else{var n=h([e]);d.model.isEdge(e)?e.geometry.translate(n.x,n.y):(e.geometry.x=n.x,e.geometry.y=n.y),d.model.beginUpdate();try{d.addCell(e),d.model.isVertex(e)&&d.isAutoSizeCell(e)&&d.updateCellSize(e)}finally{d.model.endUpdate()}d.setSelectionCell(e),d.scrollCellToVisible(e),u&&d.startEditing(e),null!=m.hoverIcons&&m.hoverIcons.update(d.view.getState(e))}}else{n=d.getEditableCells(null!=o?[o]:d.getSelectionCells());d.updateShapes(i,n)}null!=a&&a(t),mxEvent.consume(t)}),25,25,null,null,o))})),y=0;y<(n?Math.min(e.length,4):e.length);y++)x(e[y]);c=d.container.scrollTop+d.container.offsetHeight,c=p.offsetTop+p.clientHeight-c,c=(0<c&&(p.style.top=Math.max(d.container.scrollTop+22,s-c)+"px"),d.container.scrollLeft+d.container.offsetWidth),c=p.offsetLeft+p.clientWidth-c;0<c&&(p.style.left=Math.max(d.container.scrollLeft+22,l-c)+"px")}return p},EditorUi.prototype.getCellsForShapePicker=function(e,t,n){var l=this.editor.graph,i=mxUtils.bind(this,function(t,e,n,i){return l.createVertex(null,null,i||"",0,0,e||120,n||60,t,!1)}),s=mxUtils.bind(this,function(t,e,n){n=new mxCell(n||"",new mxGeometry(0,0,l.defaultEdgeLength+20,0),t);return n.geometry.setTerminalPoint(new mxPoint(0,0),!0),n.geometry.setTerminalPoint(new mxPoint(n.geometry.width,null!=e?e:0),!1),n.geometry.points=null!=e?[new mxPoint(n.geometry.width/2,e)]:[],n.geometry.relative=!0,n.edge=!0,n});if(null!=e)try{e=l.cloneCell(e),l.model.isVertex(e)&&null!=e.geometry&&(e.geometry.x=0,e.geometry.y=0)}catch(t){e=null}null==e&&(e=i(l.appendFontSize("text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;",l.vertexFontSize),40,20,"Text"),l.model.isVertex(e))&&l.isAutoSizeCell(e)&&Graph.createOffscreenGraph(l.getStylesheet()).updateCellSize(e);e=[e,i("whiteSpace=wrap;html=1;"),i("ellipse;whiteSpace=wrap;html=1;",80,80),i("rhombus;whiteSpace=wrap;html=1;",80,80),i("rounded=1;whiteSpace=wrap;html=1;"),i("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;"),i("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60),i("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80),i("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80),i("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;"),i("triangle;whiteSpace=wrap;html=1;",60,80),i("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80),i("shape=tape;whiteSpace=wrap;html=1;",120,100),i("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80),i("shape=singleArrow;whiteSpace=wrap;html=1;arrowWidth=0.4;arrowSize=0.4;",80,60),i("shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=none;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;",20,20)];return e=n?e.concat([s("edgeStyle=none;orthogonalLoop=1;jettySize=auto;html=1;"),s("edgeStyle=none;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;startArrow=classic;endSize=8;startSize=8;"),s("edgeStyle=none;orthogonalLoop=1;jettySize=auto;html=1;shape=flexArrow;rounded=1;startSize=8;endSize=8;"),s("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;sourcePerimeterSpacing=0;targetPerimeterSpacing=0;",this.editor.graph.defaultEdgeLength/2)]):e},EditorUi.prototype.isShapePickerVisible=function(t){return null!=this.shapePicker},EditorUi.prototype.hideShapePicker=function(t){null!=this.shapePicker&&(this.shapePicker.parentNode.removeChild(this.shapePicker),this.shapePicker=null,t||null==this.shapePickerCallback||this.shapePickerCallback(),this.shapePickerCallback=null)},EditorUi.prototype.isSpaceDown=function(){return this.spaceDown},EditorUi.prototype.isShiftDown=function(){return this.shiftDown},EditorUi.prototype.onKeyDown=function(t){var e=this.editor.graph;if(9==t.which&&e.isEnabled()&&!mxEvent.isControlDown(t)){if(e.isEditing())if(mxEvent.isAltDown(t))e.stopEditing(!1);else try{var n,i,l=e.cellEditor.isContentEditing()&&e.cellEditor.isTextSelected();(l=!window.getSelection||!e.cellEditor.isContentEditing()||l||mxClient.IS_IE||mxClient.IS_IE11?l:null!=(i=0<(n=window.getSelection()).rangeCount?n.getRangeAt(0).commonAncestorContainer:null)&&("LI"==i.nodeName||null!=i.parentNode&&"LI"==i.parentNode.nodeName))?document.execCommand(mxEvent.isShiftDown(t)?"outdent":"indent",!1,null):mxEvent.isShiftDown(t)?e.stopEditing(!1):e.cellEditor.insertTab(e.cellEditor.isContentEditing()?null:4)}catch(t){}else mxEvent.isAltDown(t)?e.selectParentCell():e.selectCell(!mxEvent.isShiftDown(t));mxEvent.consume(t)}},EditorUi.prototype.onKeyPress=function(t){var e=this.editor.graph;!this.isImmediateEditingEvent(t)||e.isEditing()||e.isSelectionEmpty()||0===t.which||27===t.which||mxEvent.isAltDown(t)||mxEvent.isControlDown(t)||mxEvent.isMetaDown(t)||(e.escape(),e.startEditing(null,String.fromCharCode(t.which)))},EditorUi.prototype.isImmediateEditingEvent=function(t){return!0},EditorUi.prototype.updateCssForMarker=function(t,e,n,i,l){t.style.display="inline-flex",t.style.alignItems="center",t.style.justifyContent="center",t.innerText="","flexArrow"==n?t.className=null!=i&&i!=mxConstants.NONE?"geSprite geSprite-"+e+"blocktrans":"geSprite geSprite-noarrow":null!=(n=this.getImageForMarker(i,l))?((i=document.createElement("img")).className="geAdaptiveAsset",i.setAttribute("src",n),t.className="","end"==e&&mxUtils.setPrefixedStyle(i.style,"transform","scaleX(-1)"),t.appendChild(i)):(t.className="geSprite geSprite-noarrow",t.innerHTML=mxUtils.htmlEntities(mxResources.get("none")),t.style.backgroundImage="none",t.style.fontSize="11px",t.style.filter="none")},EditorUi.prototype.getImageForMarker=function(t,e){var n=null;return t==mxConstants.ARROW_CLASSIC?n=("1"!=e?Format.classicMarkerImage:Format.classicFilledMarkerImage).src:t==mxConstants.ARROW_CLASSIC_THIN?n=("1"!=e?Format.classicThinMarkerImage:Format.openThinFilledMarkerImage).src:t==mxConstants.ARROW_OPEN?n=Format.openFilledMarkerImage.src:t==mxConstants.ARROW_OPEN_THIN?n=Format.openThinFilledMarkerImage.src:t==mxConstants.ARROW_BLOCK?n=("1"!=e?Format.blockMarkerImage:Format.blockFilledMarkerImage).src:t==mxConstants.ARROW_BLOCK_THIN?n=("1"!=e?Format.blockThinMarkerImage:Format.blockThinFilledMarkerImage).src:t==mxConstants.ARROW_OVAL?n=("1"!=e?Format.ovalMarkerImage:Format.ovalFilledMarkerImage).src:t==mxConstants.ARROW_DIAMOND?n=("1"!=e?Format.diamondMarkerImage:Format.diamondFilledMarkerImage).src:t==mxConstants.ARROW_DIAMOND_THIN?n=("1"!=e?Format.diamondThinMarkerImage:Format.diamondThinFilledMarkerImage).src:"doubleBlock"==t?n=("1"!=e?Format.doubleBlockMarkerImage:Format.doubleBlockFilledMarkerImage).src:"box"==t?n=Format.boxMarkerImage.src:"halfCircle"==t?n=Format.halfCircleMarkerImage.src:"openAsync"==t?n=Format.openAsyncFilledMarkerImage.src:"async"==t?n=("1"!=e?Format.asyncMarkerImage:Format.asyncFilledMarkerImage).src:"dash"==t?n=Format.dashMarkerImage.src:"baseDash"==t?n=Format.baseDashMarkerImage.src:"cross"==t?n=Format.crossMarkerImage.src:"circle"==t?n=Format.circleMarkerImage.src:"circlePlus"==t?n=Format.circlePlusMarkerImage.src:"ERone"==t?n=Format.EROneMarkerImage.src:"ERmandOne"==t?n=Format.ERmandOneMarkerImage.src:"ERmany"==t?n=Format.ERmanyMarkerImage.src:"ERoneToMany"==t?n=Format.ERoneToManyMarkerImage.src:"ERzeroToOne"==t?n=Format.ERzeroToOneMarkerImage.src:"ERzeroToMany"==t&&(n=Format.ERzeroToManyMarkerImage.src),n},EditorUi.prototype.createMenus=function(){return null},EditorUi.prototype.updatePasteActionStates=function(){var t=this.editor.graph,e=this.actions.get("paste"),n=this.actions.get("pasteHere");e.setEnabled(this.editor.graph.cellEditor.isContentEditing()||(!mxClient.IS_FF&&null!=navigator.clipboard||!mxClipboard.isEmpty())&&t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())),n.setEnabled(e.isEnabled())},EditorUi.prototype.initClipboard=function(){var u=this,e=mxClipboard.cut,n=(mxClipboard.cut=function(t){t.cellEditor.isContentEditing()?document.execCommand("cut",!1,null):e.apply(this,arguments),u.updatePasteActionStates()},mxClipboard.copy,mxClipboard.copy=function(t){var e=null;if(t.cellEditor.isContentEditing())document.execCommand("copy",!1,null);else{e=e||t.getSelectionCells();for(var e=t.getExportableCells(t.model.getTopmostCells(e)),n=new Object,i=t.createCellLookup(e),l=t.cloneCells(e,null,n),s=new mxGraphModel,o=s.getChildAt(s.getRoot(),0),r=0;r<l.length;r++){s.add(o,l[r]);var a,h=t.view.getState(e[r]);null!=h&&null!=(a=t.getCellGeometry(l[r]))&&a.relative&&!s.isEdge(e[r])&&null==i[mxObjectIdentity.get(s.getParent(e[r]))]&&(a.offset=null,a.relative=!1,a.x=h.x/h.view.scale-h.view.translate.x,a.y=h.y/h.view.scale-h.view.translate.y)}t.updateCustomLinks(t.createCellMapping(n,i),l),mxClipboard.insertCount=1,mxClipboard.setCells(l)}return u.updatePasteActionStates(),e},mxClipboard.paste),t=(mxClipboard.paste=function(t){var e=null;return t.cellEditor.isContentEditing()?document.execCommand("paste",!1,null):e=n.apply(this,arguments),u.updatePasteActionStates(),e},this.editor.graph.cellEditor.startEditing),i=(this.editor.graph.cellEditor.startEditing=function(){t.apply(this,arguments),u.updatePasteActionStates()},this.editor.graph.cellEditor.stopEditing);this.editor.graph.cellEditor.stopEditing=function(t,e){i.apply(this,arguments),u.updatePasteActionStates()},this.updatePasteActionStates()},EditorUi.prototype.lazyZoomDelay=20,EditorUi.prototype.wheelZoomDelay=500,EditorUi.prototype.buttonZoomDelay=600,EditorUi.prototype.initCanvas=function(){var i,l,s,o,r,m=this.editor.graph,a=(m.timerAutoScroll=!0,m.getPagePadding=function(){return new mxPoint(Math.max(0,Math.round((m.container.offsetWidth-34)/m.view.scale)),Math.max(0,Math.round((m.container.offsetHeight-34)/m.view.scale)))},m.view.getBackgroundPageBounds=function(){var t=this.graph.getPageLayout(),e=this.graph.getPageSize();return new mxRectangle(this.scale*(this.translate.x+t.x*e.width),this.scale*(this.translate.y+t.y*e.height),this.scale*t.width*e.width,this.scale*t.height*e.height)},m.getPreferredPageSize=function(t,e,n){var i=this.getPageLayout(),l=this.getPageSize();return new mxRectangle(0,0,i.width*l.width,i.height*l.height)},null),h=this;if(this.editor.isChromelessView()){a=mxUtils.bind(this,function(t,e,n,i){var l,s,o,r,a,h,u,d,p;null==m.container||m.isViewer()||(n=null!=n?n:0,i=null!=i?i:0,l=m.pageVisible?m.view.getBackgroundPageBounds():m.getGraphBounds(),p=mxUtils.hasScrollbars(m.container),r=m.view.translate,s=m.view.scale,(o=mxRectangle.fromRectangle(l)).x=o.x/s-r.x,o.y=o.y/s-r.y,o.width/=s,o.height/=s,r=m.container.scrollTop,a=m.container.scrollLeft,u=8<=document.documentMode?20:14,8!=document.documentMode&&9!=document.documentMode||(u+=3),h=m.container.offsetWidth-u,u=m.container.offsetHeight-u,e=(h-(t=t?Math.max(.3,Math.min(e||1,h/o.width)):s)*o.width)/2/t,d=0==this.lightboxVerticalDivider?0:(u-t*o.height)/this.lightboxVerticalDivider/t,p&&(e=Math.max(e,0),d=Math.max(d,0)),p||l.width<h||l.height<u?(m.view.scaleAndTranslate(t,Math.floor(e-o.x),Math.floor(d-o.y)),m.container.scrollTop=r*t/s,m.container.scrollLeft=a*t/s):0==n&&0==i||(p=m.view.translate,m.view.setTranslate(Math.floor(p.x+n/s),Math.floor(p.y+i/s))))}),this.chromelessResize=a,this.chromelessWindowResize=mxUtils.bind(this,function(){this.chromelessResize(!1)});var t=mxUtils.bind(this,function(){this.chromelessWindowResize(!1)});if(mxEvent.addListener(window,"resize",t),this.destroyFunctions.push(function(){mxEvent.removeListener(window,"resize",t)}),this.editor.addListener("resetGraphView",mxUtils.bind(this,function(){this.chromelessResize(!0)})),this.actions.get("zoomIn").funct=mxUtils.bind(this,function(t){m.zoomIn(),this.chromelessResize(!1)}),this.actions.get("zoomOut").funct=mxUtils.bind(this,function(t){m.zoomOut(),this.chromelessResize(!1)}),"0"!=urlParams.toolbar){var e,n,u,d,p,U,c,g,x,y=JSON.parse(decodeURIComponent(urlParams["toolbar-config"]||"{}")),C=(this.chromelessToolbar=document.createElement("div"),this.chromelessToolbar.style.position="fixed",this.chromelessToolbar.style.overflow="hidden",this.chromelessToolbar.style.boxSizing="border-box",this.chromelessToolbar.style.whiteSpace="nowrap",this.chromelessToolbar.style.padding="10px 10px 8px 10px",this.chromelessToolbar.style.left=m.isViewer()?"0":"50%",mxClient.IS_IE||mxClient.IS_IE11?(this.chromelessToolbar.style.backgroundColor="#ffffff",this.chromelessToolbar.style.border="3px solid black"):this.chromelessToolbar.style.backgroundColor="#000000",mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"borderRadius","16px"),mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"transition","opacity 600ms ease-in-out"),mxUtils.bind(this,function(){var t=mxUtils.getCurrentStyle(m.container);m.isViewer()?this.chromelessToolbar.style.top="0":this.chromelessToolbar.style.bottom=(null!=t?parseInt(t["margin-bottom"]||0):0)+(null!=this.tabContainer?20+parseInt(this.tabContainer.style.height):20)+"px"})),f=(this.editor.addListener("resetGraphView",C),C(),mxUtils.bind(this,function(t,e,n){0;var i=document.createElement("span"),t=(i.style.paddingLeft="8px",i.style.paddingRight="8px",i.style.cursor="pointer",mxEvent.addListener(i,"click",t),null!=n&&i.setAttribute("title",n),document.createElement("img"));return t.setAttribute("border","0"),t.setAttribute("src",e),t.style.width="36px",t.style.filter="invert(100%)",i.appendChild(t),this.chromelessToolbar.appendChild(i),i})),v=(null!=y.backBtn&&null!=(e=Graph.sanitizeLink(y.backBtn.url))&&f(mxUtils.bind(this,function(t){window.location.href=e,mxEvent.consume(t)}),Editor.backImage,mxResources.get("back",null,"Back")),this.isPagesEnabled()&&(n=f(mxUtils.bind(this,function(t){this.actions.get("previousPage").funct(),mxEvent.consume(t)}),Editor.previousImage,mxResources.get("previousPage")),(u=document.createElement("div")).style.fontFamily=Editor.defaultHtmlFont,u.style.display="inline-block",u.style.verticalAlign="top",u.style.fontWeight="bold",u.style.marginTop="8px",u.style.fontSize="14px",u.style.cursor="default",mxClient.IS_IE||mxClient.IS_IE11?u.style.color="#000000":u.style.color="#ffffff",this.chromelessToolbar.appendChild(u),d=f(mxUtils.bind(this,function(t){this.actions.get("nextPage").funct(),mxEvent.consume(t)}),Editor.nextImage,mxResources.get("nextPage")),p=mxUtils.bind(this,function(){var t;null!=this.pages&&1<this.pages.length&&null!=this.currentPage&&(u.innerText="",t=mxUtils.indexOf(this.pages,this.currentPage),mxUtils.write(u,t+1+" / "+this.pages.length),u.setAttribute("title",mxResources.get("currentPage")+": "+this.currentPage.getName()),n.setAttribute("title",mxResources.get("previousPage")+": "+this.pages[mxUtils.mod(t-1,this.pages.length)].getName()),d.setAttribute("title",mxResources.get("nextPage")+": "+this.pages[mxUtils.mod(t+1,this.pages.length)].getName()))}),n.style.paddingLeft="0px",n.style.paddingRight="4px",d.style.paddingLeft="4px",d.style.paddingRight="0px",C=mxUtils.bind(this,function(){null!=this.pages&&1<this.pages.length&&null!=this.currentPage?(d.style.display="",n.style.display="",u.style.display="inline-block"):(d.style.display="none",n.style.display="none",u.style.display="none"),p()}),null!=this.menus&&null!=(U=this.menus.get("pages"))&&mxEvent.addListener(u,"click",mxUtils.bind(this,function(t){var e=new mxPopupMenu(U.funct),n=(e.div.className+=" geMenubarMenu",e.smartSeparators=!0,e.showDisabled=!0,e.autoExpand=!0,e.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(e,arguments),e.destroy()}),mxUtils.getOffset(u));e.popup(n.x,n.y+u.offsetHeight,null,t),mxEvent.addListener(e.div,"mouseleave",mxUtils.bind(this,function(){e.hideMenu()}))})),this.editor.addListener("resetGraphView",C),this.editor.addListener("pageSelected",p)),f(mxUtils.bind(this,function(t){this.actions.get("zoomOut").funct(),mxEvent.consume(t)}),Editor.zoomOutImage,mxResources.get("zoomOut")+" (Alt+Mousewheel)"),f(mxUtils.bind(this,function(t){this.actions.get("zoomIn").funct(),mxEvent.consume(t)}),Editor.zoomInImage,mxResources.get("zoomIn")+" (Alt+Mousewheel)"),f(mxUtils.bind(this,function(t){m.isLightboxView()?(1==m.view.scale?this.lightboxFit():m.zoomTo(1),this.chromelessResize(!1)):this.chromelessResize(!0),mxEvent.consume(t)}),Editor.zoomFitImage,mxResources.get("fit")),null),E=null,S=mxUtils.bind(this,function(t){null!=v&&(window.clearTimeout(v),v=null),null!=E&&(window.clearTimeout(E),E=null),v=window.setTimeout(mxUtils.bind(this,function(){mxUtils.setOpacity(this.chromelessToolbar,0),v=null,E=window.setTimeout(mxUtils.bind(this,function(){this.chromelessToolbar.style.display="none",E=null}),600)}),t||200)}),w=mxUtils.bind(this,function(t){null!=v&&(window.clearTimeout(v),v=null),null!=E&&(window.clearTimeout(E),E=null),this.chromelessToolbar.style.display="",mxUtils.setOpacity(this.chromelessToolbar,t||30)});if("1"==urlParams.layers&&(this.layersDialog=null,c=f(mxUtils.bind(this,function(t){var e;null!=this.layersDialog?(this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null):(this.layersDialog=m.createLayersDialog(mxUtils.bind(this,function(){this.chromelessResize&&this.chromelessResize()}),!0),mxEvent.addListener(this.layersDialog,"mouseleave",mxUtils.bind(this,function(){this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null})),e=c.getBoundingClientRect(),mxUtils.setPrefixedStyle(this.layersDialog.style,"borderRadius","5px"),this.layersDialog.style.position="fixed",this.layersDialog.style.fontFamily=Editor.defaultHtmlFont,this.layersDialog.style.width="160px",this.layersDialog.style.padding="4px 2px 4px 2px",this.layersDialog.style.left=e.left+"px",this.layersDialog.style.bottom=parseInt(this.chromelessToolbar.style.bottom)+this.chromelessToolbar.offsetHeight+4+"px",mxClient.IS_IE||mxClient.IS_IE11?(this.layersDialog.style.backgroundColor="#ffffff",this.layersDialog.style.border="2px solid black",this.layersDialog.style.color="#000000"):(this.layersDialog.style.backgroundColor="#000000",this.layersDialog.style.color="#ffffff",mxUtils.setOpacity(this.layersDialog,80)),e=mxUtils.getCurrentStyle(this.editor.graph.container),this.layersDialog.style.zIndex=e.zIndex,document.body.appendChild(this.layersDialog),this.editor.fireEvent(new mxEventObject("layersDialogShown"))),mxEvent.consume(t)}),Editor.layersImage,mxResources.get("layers")),(g=m.getModel()).addListener(mxEvent.CHANGE,function(){c.style.display=1<g.getChildCount(g.root)?"":"none"})),"1"==urlParams.openInSameWin&&!navigator.standalone||this.addChromelessToolbarItems(f),null==this.editor.editButtonLink&&null==this.editor.editButtonFunc||f(mxUtils.bind(this,function(t){null!=this.editor.editButtonFunc?this.editor.editButtonFunc():"_blank"==this.editor.editButtonLink?this.editor.editAsNew(this.getEditBlankXml()):m.openLink(this.editor.editButtonLink,"editWindow"),mxEvent.consume(t)}),Editor.editImage,mxResources.get("edit")),null!=this.lightboxToolbarActions)for(var b=0;b<this.lightboxToolbarActions.length;b++){var T=this.lightboxToolbarActions[b];T.elem=f(T.fn,T.icon,T.tooltip)}null!=y.refreshBtn&&(x=null==y.refreshBtn.url?null:Graph.sanitizeLink(y.refreshBtn.url),f(mxUtils.bind(this,function(t){null!=x?window.location.href=x:window.location.reload(),mxEvent.consume(t)}),Editor.refreshImage,mxResources.get("refresh",null,"Refresh"))),null!=y.fullscreenBtn&&window.self!==window.top&&f(mxUtils.bind(this,function(t){y.fullscreenBtn.url?m.openLink(y.fullscreenBtn.url):m.openLink(window.location.href),mxEvent.consume(t)}),Editor.fullscreenImage,mxResources.get("openInNewWindow",null,"Open in New Window")),!y.noCloseBtn&&(y.closeBtn&&window.self===window.top||m.lightbox&&("1"==urlParams.close||this.container!=document.body))&&f(mxUtils.bind(this,function(t){"1"==urlParams.close||y.closeBtn?window.close():(this.destroy(),mxEvent.consume(t))}),Editor.closeImage,mxResources.get("close")+" (Escape)"),this.chromelessToolbar.style.display="none",m.isViewer()||mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"transform","translate(-50%,0)"),m.container.appendChild(this.chromelessToolbar),mxEvent.addListener(m.container,mxClient.IS_POINTER?"pointermove":"mousemove",mxUtils.bind(this,function(t){mxEvent.isTouchEvent(t)||(mxEvent.isShiftDown(t)||w(30),S())})),mxEvent.addListener(this.chromelessToolbar,mxClient.IS_POINTER?"pointermove":"mousemove",function(t){mxEvent.consume(t)}),mxEvent.addListener(this.chromelessToolbar,"mouseenter",mxUtils.bind(this,function(t){m.tooltipHandler.resetTimer(),m.tooltipHandler.hideTooltip(),mxEvent.isShiftDown(t)?S():w(100)})),mxEvent.addListener(this.chromelessToolbar,"mousemove",mxUtils.bind(this,function(t){mxEvent.isShiftDown(t)?S():w(100),mxEvent.consume(t)})),mxEvent.addListener(this.chromelessToolbar,"mouseleave",mxUtils.bind(this,function(t){mxEvent.isTouchEvent(t)||w(30)}));var M=m.getTolerance();m.addMouseListener({startX:0,startY:0,scrollLeft:0,scrollTop:0,mouseDown:function(t,e){this.startX=e.getGraphX(),this.startY=e.getGraphY(),this.scrollLeft=m.container.scrollLeft,this.scrollTop=m.container.scrollTop},mouseMove:function(t,e){},mouseUp:function(t,e){mxEvent.isTouchEvent(e.getEvent())&&Math.abs(this.scrollLeft-m.container.scrollLeft)<M&&Math.abs(this.scrollTop-m.container.scrollTop)<M&&Math.abs(this.startX-e.getGraphX())<M&&Math.abs(this.startY-e.getGraphY())<M&&(0<parseFloat(h.chromelessToolbar.style.opacity||0)?S():w(30))}})}this.editor.editable||this.addChromelessClickHandler()}else this.editor.extendCanvas&&(i=m.view.validate,l=new mxPoint,s=!1,o=null,m.view.validate=function(){var t,e,n;null!=m.container&&mxUtils.hasScrollbars(m.container)&&(null!=h.currentPage&&o!=h.currentPage&&(o=h.currentPage,s=!0,null==(n=m.getBoundingBoxFromGeometry(m.model.getCells(),!0,null,!0))&&(n=new mxRectangle(m.view.translate.x*m.view.scale,m.view.translate.y*m.view.scale)),n=m.getPageLayout(n,l,1),t=m.getDefaultTranslate(n),this.x0=n.x,this.y0=n.y,t.x==this.translate.x&&t.y==this.translate.y||(this.invalidate(),this.translate.x=t.x,this.translate.y=t.y)),n=m.getPagePadding(),t=m.getPageSize(),e=n.x-(this.x0||0)*t.width,n=n.y-(this.y0||0)*t.height,this.translate.x==e&&this.translate.y==n||(this.invalidate(),this.translate.x=e,this.translate.y=n)),i.apply(this,arguments)},m.isViewer()||(r=m.sizeDidChange,m.sizeDidChange=function(){var t=s;if(s=!1,null!=this.container&&mxUtils.hasScrollbars(this.container)){if(this.updateMinimumSize(),!this.autoTranslate){var e=this.getPageLayout(),n=this.getDefaultTranslate(e),i=this.view.translate.x,l=this.view.translate.y;if(n.x!=i||n.y!=l)return this.view.x0=e.x,this.view.y0=e.y,this.autoTranslate=!0,this.view.setTranslate(n.x,n.y),this.autoTranslate=!1,void(t||(this.container.scrollLeft+=Math.round((n.x-i)*this.view.scale),this.container.scrollTop+=Math.round((n.y-l)*this.view.scale)))}r.apply(this,arguments)}else this.fireEvent(new mxEventObject(mxEvent.SIZE,"bounds",this.getGraphBounds()))}));function L(t){null!=P&&window.clearTimeout(P),0<=t&&window.setTimeout(function(){m.isMouseDown&&!D||(P=window.setTimeout(mxUtils.bind(this,function(){m.isFastZoomEnabled()&&(null!=m.view.backgroundPageShape&&null!=m.view.backgroundPageShape.node&&(mxUtils.setPrefixedStyle(m.view.backgroundPageShape.node.style,"transform-origin",null),mxUtils.setPrefixedStyle(m.view.backgroundPageShape.node.style,"transform",null)),A.style.transformOrigin="",I.style.transformOrigin="",mxClient.IS_SF?(A.style.transform="scale(1)",I.style.transform="scale(1)",window.setTimeout(function(){A.style.transform="",I.style.transform=""},0)):(A.style.transform="",I.style.transform=""),m.view.getDecoratorPane().style.opacity="",m.view.getOverlayPane().style.opacity="");var t=new mxPoint(m.container.scrollLeft,m.container.scrollTop),e=mxUtils.getOffset(m.container),n=m.view.scale,i=0,l=0;null!=N&&(i=m.container.offsetWidth/2-N.x+e.x,l=m.container.offsetHeight/2-N.y+e.y),m.zoom(m.cumulativeZoomFactor,null,m.isFastZoomEnabled()?H:null),m.view.scale!=n&&(null!=R&&(i+=t.x-R.x,l+=t.y-R.y),null!=a&&h.chromelessResize(!1,null,i*(m.cumulativeZoomFactor-1),l*(m.cumulativeZoomFactor-1)),!mxUtils.hasScrollbars(m.container)||0==i&&0==l||(m.container.scrollLeft-=i*(m.cumulativeZoomFactor-1),m.container.scrollTop-=l*(m.cumulativeZoomFactor-1))),null!=O&&A.setAttribute("filter",O),m.cumulativeZoomFactor=1,O=D=N=R=P=null}),null!=t?t:m.isFastZoomEnabled()?h.wheelZoomDelay:h.lazyZoomDelay))},0)}var I=m.view.getBackgroundPane(),A=m.view.getDrawPane(),P=(m.cumulativeZoomFactor=1,null),N=null,R=null,D=null,O=null,H=20;m.lazyZoom=function(t,e,n,i){var l,s;i=null!=i?i:this.zoomFactor,(e=e||!m.scrollbars)&&(N=new mxPoint(m.container.offsetLeft+m.container.clientWidth/2,m.container.offsetTop+m.container.clientHeight/2)),t?this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale+.05)/this.view.scale:(this.cumulativeZoomFactor*=i,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*100)/100/this.view.scale):this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale-.05)/this.view.scale:(this.cumulativeZoomFactor/=i,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*100)/100/this.view.scale),this.cumulativeZoomFactor=Math.max(.05,Math.min(this.view.scale*this.cumulativeZoomFactor,160))/this.view.scale,m.isFastZoomEnabled()&&(null==O&&""!=A.getAttribute("filter")&&(O=A.getAttribute("filter"),A.removeAttribute("filter")),R=new mxPoint(m.container.scrollLeft,m.container.scrollTop),t=Math.round(Math.round(this.view.scale*this.cumulativeZoomFactor*100)/100*H)/(H*this.view.scale),i=e||null==N?m.container.scrollLeft+m.container.clientWidth/2:N.x+m.container.scrollLeft-m.container.offsetLeft,l=e||null==N?m.container.scrollTop+m.container.clientHeight/2:N.y+m.container.scrollTop-m.container.offsetTop,A.style.transformOrigin=i+"px "+l+"px",A.style.transform="scale("+t+")",I.style.transformOrigin=i+"px "+l+"px",I.style.transform="scale("+t+")",null!=m.view.backgroundPageShape&&null!=m.view.backgroundPageShape.node?(s=m.view.backgroundPageShape.node,mxUtils.setPrefixedStyle(s.style,"transform-origin",(e||null==N?m.container.clientWidth/2+m.container.scrollLeft-s.offsetLeft+"px":N.x+m.container.scrollLeft-s.offsetLeft-m.container.offsetLeft+"px")+" "+(e||null==N?m.container.clientHeight/2+m.container.scrollTop-s.offsetTop+"px":N.y+m.container.scrollTop-s.offsetTop-m.container.offsetTop+"px")),mxUtils.setPrefixedStyle(s.style,"transform","scale("+t+")")):m.view.validateBackgroundStyles(t,i,l),m.view.getDecoratorPane().style.opacity="0",m.view.getOverlayPane().style.opacity="0",null!=h.hoverIcons&&h.hoverIcons.reset(),m.fireEvent(new mxEventObject("zoomPreview","factor",t))),L(m.isFastZoomEnabled()?n:0)},mxEvent.addGestureListeners(m.container,function(t){null!=P&&window.clearTimeout(P)},null,function(t){1!=m.cumulativeZoomFactor&&L(0)}),mxEvent.addListener(m.container,"scroll",function(t){null==P||m.isMouseDown||1==m.cumulativeZoomFactor||L(0)}),mxEvent.addMouseWheelListener(mxUtils.bind(this,function(t,e,n,i,l){if(m.fireEvent(new mxEventObject("wheel")),null==this.dialogs||0==this.dialogs.length)if(m.scrollbars||n||!m.isScrollWheelEvent(t)){if(n||m.isZoomWheelEvent(t))for(var s,o,r=mxEvent.getSource(t);null!=r;){if(r==m.container)return m.tooltipHandler.hideTooltip(),N=null!=i&&null!=l?new mxPoint(i,l):new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),D=n,s=m.zoomFactor,o=null,t.ctrlKey&&null!=t.deltaY&&Math.abs(t.deltaY)<40&&Math.round(t.deltaY)!=t.deltaY?s=1+Math.abs(t.deltaY)/20*(s-1):null!=t.movementY&&"pointermove"==t.type&&(s=1+Math.max(1,Math.abs(t.movementY))/20*(s-1),o=-1),m.lazyZoom(e,null,o,s),mxEvent.consume(t),!1;r=r.parentNode}}else{var a=m.view.getTranslate(),h=40/m.view.scale;mxEvent.isShiftDown(t)?m.view.setTranslate(a.x+(e?-h:h),a.y):m.view.setTranslate(a.x,a.y+(e?h:-h))}}),m.container),m.panningHandler.zoomGraph=function(t){m.cumulativeZoomFactor=t.scale,m.lazyZoom(0<t.scale,!0),mxEvent.consume(t)}},EditorUi.prototype.addChromelessToolbarItems=function(t){t(mxUtils.bind(this,function(t){this.actions.get("print").funct(),mxEvent.consume(t)}),Editor.printImage,mxResources.get("print"))},EditorUi.prototype.isPagesEnabled=function(){return this.editor.editable||"1"!=urlParams["hide-pages"]},EditorUi.prototype.createTemporaryGraph=function(t){return Graph.createOffscreenGraph(t)},EditorUi.prototype.addChromelessClickHandler=function(){var t=urlParams.highlight;null!=t&&0<t.length&&(t="#"+t),this.editor.graph.addClickHandler(t)},EditorUi.prototype.toggleFormatPanel=function(t){t=null!=t?t:0==this.formatWidth,null!=this.format&&(this.formatWidth=t?240:0,this.formatContainer.style.width=this.formatWidth+"px",this.refresh(),this.format.refresh(),this.fireEvent(new mxEventObject("formatWidthChanged")))},EditorUi.prototype.isFormatPanelVisible=function(){return 0<this.formatWidth},EditorUi.prototype.lightboxFit=function(t){var e,n;this.isDiagramEmpty()?this.editor.graph.view.setScale(1):(n=60,null!=(e=urlParams.border)&&(n=parseInt(e)),this.editor.graph.maxFitScale=this.lightboxMaxFitScale,this.editor.graph.fit(n,null,null,null,null,null,t),this.editor.graph.maxFitScale=null)},EditorUi.prototype.isDiagramEmpty=function(){var t=this.editor.graph.getModel();return 1==t.getChildCount(t.root)&&0==t.getChildCount(t.getChildAt(t.root,0))},EditorUi.prototype.isSelectionAllowed=function(t){return"SELECT"==mxEvent.getSource(t).nodeName||"INPUT"==mxEvent.getSource(t).nodeName&&mxUtils.isAncestorNode(this.formatContainer,mxEvent.getSource(t))},EditorUi.prototype.addBeforeUnloadListener=function(){window.onbeforeunload=mxUtils.bind(this,function(){if(!this.editor.isChromelessView())return this.onBeforeUnload()})},EditorUi.prototype.onBeforeUnload=function(){if(this.editor.modified)return mxResources.get("allChangesLost")},EditorUi.prototype.open=function(){try{null!=window.opener&&null!=window.opener.openFile&&window.opener.openFile.setConsumer(mxUtils.bind(this,function(t,e){try{var n=mxUtils.parseXml(t);this.editor.setGraphXml(n.documentElement),this.editor.setModified(!1),this.editor.undoManager.clear(),null!=e&&(this.editor.setFilename(e),this.updateDocumentTitle())}catch(t){mxUtils.alert(mxResources.get("invalidOrMissingFile")+": "+t.message)}}))}catch(t){}this.editor.graph.view.validate(),this.editor.graph.sizeDidChange(),this.editor.fireEvent(new mxEventObject("resetGraphView"))},EditorUi.prototype.showPrintDialog=function(t,e){this.showDialog(new PrintDialog(this,t,e).container,300,180,!0,!0)},EditorUi.prototype.showPopupMenu=function(t,e,n,i){this.editor.graph.popupMenuHandler.hideMenu();var l=new mxPopupMenu(t);l.div.className+=" geMenubarMenu",l.smartSeparators=!0,l.showDisabled=!0,l.autoExpand=!0,l.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(l,arguments),l.destroy()}),l.popup(e,n,null,i),this.setCurrentMenu(l)},EditorUi.prototype.setCurrentMenu=function(t,e){this.currentMenuElt=e,this.currentMenu=t,this.hideShapePicker()},EditorUi.prototype.resetCurrentMenu=function(){this.currentMenuElt=null,this.currentMenu=null},EditorUi.prototype.hideCurrentMenu=function(){null!=this.currentMenu&&(this.currentMenu.hideMenu(),this.resetCurrentMenu())},EditorUi.prototype.updateDocumentTitle=function(){var t=this.editor.getOrCreateFilename();null!=this.editor.appName&&(t+=" - "+this.editor.appName),document.title=t},EditorUi.prototype.createHoverIcons=function(){return new HoverIcons(this.editor.graph)},EditorUi.prototype.redo=function(){try{this.editor.graph.isEditing()?document.execCommand("redo",!1,null):this.editor.undoManager.redo()}catch(t){}},EditorUi.prototype.undo=function(){try{var t,e=this.editor.graph;e.isEditing()?(t=e.cellEditor.textarea.innerHTML,document.execCommand("undo",!1,null),t==e.cellEditor.textarea.innerHTML&&(e.stopEditing(!0),this.editor.undoManager.undo())):this.editor.undoManager.undo()}catch(t){}},EditorUi.prototype.canRedo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canRedo()},EditorUi.prototype.canUndo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canUndo()},EditorUi.prototype.getDiagramSnapshot=function(){return{node:this.editor.getGraphXml()}},EditorUi.prototype.updateDiagramData=function(t,e){this.replaceDiagramData(xUtils.getXml(e))},EditorUi.prototype.replaceDiagramData=function(t){this.editor.graph.model.beginUpdate();try{this.editor.setGraphXml(mxUtils.parseXml(t).documentElement)}finally{this.editor.graph.model.endUpdate()}},EditorUi.prototype.getEditBlankXml=function(){return mxUtils.getXml(this.editor.getGraphXml())},EditorUi.prototype.getUrl=function(t){var e,n=null!=t?t:window.location.pathname,i=0<n.indexOf("?")?1:0;for(e in urlParams)n=(n+=0==i?"?":"&")+e+"="+urlParams[e],i++;return n},EditorUi.prototype.setScrollbars=function(t){var e=this.editor.graph,n=e.container.style.overflow;e.scrollbars=t,this.editor.updateGraphComponents(),n!=e.container.style.overflow&&(e.container.scrollTop=0,e.container.scrollLeft=0,e.view.scaleAndTranslate(1,0,0),this.resetScrollbars()),this.fireEvent(new mxEventObject("scrollbarsChanged"))},EditorUi.prototype.fitDiagramToWindow=function(){var t=this.editor.graph,e=t.isSelectionEmpty()?mxRectangle.fromRectangle(t.getGraphBounds()):t.getBoundingBox(t.getSelectionCells()),n=t.view.translate,i=t.view.scale;e.x=e.x/i-n.x,e.y=e.y/i-n.y,e.width/=i,e.height/=i,null!=t.backgroundImage&&e.add(new mxRectangle(0,0,t.backgroundImage.width,t.backgroundImage.height)),0==e.width||0==e.height?(t.zoomTo(1),this.resetScrollbars()):(null!=(n=Editor.fitWindowBorders)&&(e.x-=n.x,e.y-=n.y,e.width+=n.width+n.x,e.height+=n.height+n.y),t.fitWindow(e))},EditorUi.prototype.hasScrollbars=function(){return this.editor.graph.scrollbars},EditorUi.prototype.resetScrollbars=function(){var t,e,n,i=this.editor.graph,l=i.container;this.editor.extendCanvas?this.editor.isChromelessView()||(mxUtils.hasScrollbars(l)?i.pageVisible?(n=i.getPagePadding(),l.scrollTop=Math.floor(n.y-this.editor.initialTopSpacing)-1,l.scrollLeft=Math.floor(Math.min(n.x,(l.scrollWidth-l.clientWidth)/2))-1,0<(n=i.getGraphBounds()).width&&0<n.height&&(n.x>l.scrollLeft+.9*l.clientWidth&&(l.scrollLeft=Math.min(n.x+n.width-l.clientWidth,n.x-10)),n.y>l.scrollTop+.9*l.clientHeight)&&(l.scrollTop=Math.min(n.y+n.height-l.clientHeight,n.y-10))):0==(n=i.getGraphBounds()).width&&0==n.height?(l.scrollLeft=(l.scrollWidth-l.clientWidth)/2,l.scrollTop=(l.scrollHeight-l.clientHeight)/2):(t=Math.max(n.width,i.scrollTileSize.width*i.view.scale),e=Math.max(n.height,i.scrollTileSize.height*i.view.scale),l.scrollLeft=Math.floor(Math.max(0,n.x-Math.max(0,(l.clientWidth-t)/2))),l.scrollTop=Math.floor(Math.max(0,n.y-Math.max(20,(l.clientHeight-e)/4)))):(t=mxRectangle.fromRectangle(i.pageVisible?i.view.getBackgroundPageBounds():i.getGraphBounds()),n=i.view.translate,e=i.view.scale,t.x=t.x/e-n.x,t.y=t.y/e-n.y,t.width/=e,t.height/=e,n=i.pageVisible?0:Math.max(0,(l.clientHeight-t.height)/4),i.view.setTranslate(Math.floor(Math.max(0,(l.clientWidth-t.width)/2)-t.x+2),Math.floor(n-t.y+1)))):(l.scrollTop=0,l.scrollLeft=0,mxUtils.hasScrollbars(l)||i.view.setTranslate(0,0))},EditorUi.prototype.setPageVisible=function(t){var e,n=this.editor.graph,i=mxUtils.hasScrollbars(n.container),l=0,s=0;i&&(l=n.view.translate.x*n.view.scale-n.container.scrollLeft,s=n.view.translate.y*n.view.scale-n.container.scrollTop),n.pageVisible=t,n.pageBreaksVisible=t,n.preferPageSize=t,n.view.validateBackground(),i&&(e=n.getSelectionCells(),n.clearSelection(),n.setSelectionCells(e)),n.sizeDidChange(),i&&(n.container.scrollLeft=n.view.translate.x*n.view.scale-l,n.container.scrollTop=n.view.translate.y*n.view.scale-s),n.defaultPageVisible=t,this.fireEvent(new mxEventObject("pageViewChanged"))},EditorUi.prototype.installResizeHandler=function(n,o,t){o&&(n.window.setSize=function(t,e){var n,i;this.minimized||(n=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,t=Math.min(t,n-this.getX()),e=Math.min(e,i-this.getY())),mxWindow.prototype.setSize.apply(this,arguments)}),n.window.setLocation=function(t,e){var n=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,l=parseInt(this.div.style.width),s=parseInt(this.div.style.height);t=Math.max(0,Math.min(t,n-l)),e=Math.max(0,Math.min(e,i-s)),this.getX()==t&&this.getY()==e||mxWindow.prototype.setLocation.apply(this,arguments),o&&!this.minimized&&this.setSize(l,s)};var e=mxUtils.bind(this,function(){var t=n.window.getX(),e=n.window.getY();n.window.setLocation(t,e)});mxEvent.addListener(window,"resize",e),n.destroy=function(){mxEvent.removeListener(window,"resize",e),n.window.destroy(),null!=t&&t()}},ChangeGridColor.prototype.execute=function(){var t=this.ui.editor.graph.view.gridColor;this.ui.setGridColor(this.color),this.color=t},!function(){var t=new mxObjectCodec(new ChangeGridColor,["ui"]);mxCodecRegistry.register(t)}(),ChangePageSetup.prototype.execute=function(){var t,e,n=this.ui.editor.graph;this.ignoreColor||(this.color=this.previousColor,t=n.background,this.ui.setBackgroundColor(this.previousColor),this.previousColor=t),this.ignoreImage||(this.image=this.previousImage,t=n.backgroundImage,null!=(e=this.previousImage)&&Graph.isPageLink(e.src)&&(e=this.ui.createImageForPageLink(e.src,this.ui.currentPage)),this.ui.setBackgroundImage(e),this.previousImage=t),null!=this.previousFormat&&(this.format=this.previousFormat,t=n.pageFormat,this.previousFormat.width==t.width&&this.previousFormat.height==t.height||(this.ui.setPageFormat(this.previousFormat),this.previousFormat=t)),null!=this.foldingEnabled&&this.foldingEnabled!=this.ui.editor.graph.foldingEnabled&&(this.ui.setFoldingEnabled(this.foldingEnabled),this.foldingEnabled=!this.foldingEnabled),null!=this.previousPageScale&&(e=this.ui.editor.graph.pageScale,this.previousPageScale!=e)&&(this.ui.setPageScale(this.previousPageScale),this.previousPageScale=e)},!function(){var t=new mxObjectCodec(new ChangePageSetup,["ui","previousColor","previousImage","previousFormat","previousPageScale"]);t.afterDecode=function(t,e,n){return n.previousColor=n.color,n.previousImage=n.image,n.previousFormat=n.format,n.previousPageScale=n.pageScale,null!=n.foldingEnabled&&(n.foldingEnabled=!n.foldingEnabled),n},mxCodecRegistry.register(t)}(),EditorUi.prototype.setBackgroundColor=function(t){this.editor.graph.background=t,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject("backgroundColorChanged"))},EditorUi.prototype.setFoldingEnabled=function(t){this.editor.graph.foldingEnabled=t,this.editor.graph.view.revalidate(),this.fireEvent(new mxEventObject("foldingEnabledChanged"))},EditorUi.prototype.setPageFormat=function(t,e){e=null!=e?e:"1"==urlParams.sketch,this.editor.graph.pageFormat=t,e||(this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct()),this.fireEvent(new mxEventObject("pageFormatChanged"))},EditorUi.prototype.setPageScale=function(t){this.editor.graph.pageScale=t,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject("pageScaleChanged"))},EditorUi.prototype.setGridColor=function(t){this.editor.graph.view.gridColor=t,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject("gridColorChanged"))},EditorUi.prototype.addUndoListener=function(){var t=this.editor.undoManager,n=mxUtils.bind(this,function(){this.updateActionStates()}),e=(t.addListener(mxEvent.ADD,n),t.addListener(mxEvent.UNDO,n),t.addListener(mxEvent.REDO,n),t.addListener(mxEvent.CLEAR,n),this.editor.graph.cellEditor.startEditing),i=(this.editor.graph.cellEditor.startEditing=function(){e.apply(this,arguments),n()},this.editor.graph.cellEditor.stopEditing);this.editor.graph.cellEditor.stopEditing=function(t,e){i.apply(this,arguments),n()},n()},EditorUi.prototype.updateActionStates=function(){for(var t=this.editor.graph,e=this.getSelectionState(),n=t.isEnabled()&&!t.isCellLocked(t.getDefaultParent()),i=!this.editor.chromeless||this.editor.editable,l=["cut","copy","bold","italic","underline","delete","duplicate","editStyle","editTooltip","editLink","backgroundColor","borderColor","edit","toFront","toBack","solid","dashed","pasteSize","dotted","fillColor","gradientColor","shadow","fontColor","formattedText","rounded","toggleRounded","strokeColor","sharp","snapToGrid"],s=0;s<l.length;s++)this.actions.get(l[s]).setEnabled(0<e.cells.length);this.actions.get("grid").setEnabled(i),this.actions.get("undo").setEnabled(this.canUndo()&&i),this.actions.get("redo").setEnabled(this.canRedo()&&i),this.actions.get("swap").setEnabled(2==e.cells.length&&2==e.vertices.length),this.actions.get("pasteSize").setEnabled(null!=this.copiedSize&&0<e.vertices.length),this.actions.get("pasteData").setEnabled(null!=this.copiedValue&&0<e.cells.length),this.actions.get("setAsDefaultStyle").setEnabled(1==t.getSelectionCount()),this.actions.get("lockUnlock").setEnabled(!t.isSelectionEmpty()),this.actions.get("bringForward").setEnabled(1==e.cells.length),this.actions.get("sendBackward").setEnabled(1==e.cells.length),this.actions.get("rotation").setEnabled(1==e.vertices.length),this.actions.get("wordWrap").setEnabled(1==e.vertices.length),this.actions.get("autosize").setEnabled(0<e.vertices.length),this.actions.get("copySize").setEnabled(1==e.vertices.length),this.actions.get("clearWaypoints").setEnabled(e.connections),this.actions.get("clearAnchors").setEnabled(e.connections),this.actions.get("curved").setEnabled(0<e.edges.length),this.actions.get("turn").setEnabled(0<e.cells.length),this.actions.get("group").setEnabled(1<e.cells.length||1==e.vertices.length&&0==t.model.getChildCount(e.cells[0])&&!t.isContainer(e.vertices[0])),this.actions.get("ungroup").setEnabled(!e.row&&!e.cell&&!e.table&&0<e.vertices.length&&(t.isContainer(e.vertices[0])||0<t.getModel().getChildCount(e.vertices[0]))),this.actions.get("removeFromGroup").setEnabled(1==e.cells.length&&t.getModel().isVertex(t.getModel().getParent(e.cells[0]))),this.actions.get("collapsible").setEnabled(1==e.vertices.length&&(0<t.model.getChildCount(e.vertices[0])||t.isContainer(e.vertices[0]))),this.actions.get("exitGroup").setEnabled(null!=t.view.currentRoot),this.actions.get("home").setEnabled(null!=t.view.currentRoot),this.actions.get("enterGroup").setEnabled(1==e.cells.length&&t.isValidRoot(e.cells[0])),this.actions.get("copyData").setEnabled(1==e.cells.length),this.actions.get("copyAsText").setEnabled(1==e.cells.length),this.actions.get("editLink").setEnabled(1==e.cells.length),this.actions.get("editStyle").setEnabled(0<e.cells.length),this.actions.get("editTooltip").setEnabled(1==e.cells.length),this.actions.get("openLink").setEnabled(1==e.cells.length&&null!=t.getLinkForCell(e.cells[0])),this.actions.get("guides").setEnabled(t.isEnabled()),this.actions.get("selectVertices").setEnabled(n),this.actions.get("selectEdges").setEnabled(n),this.actions.get("selectAll").setEnabled(n),this.actions.get("selectNone").setEnabled(n);i=1==e.vertices.length&&t.isCellFoldable(e.vertices[0]);this.actions.get("expand").setEnabled(i),this.actions.get("collapse").setEnabled(i),this.updatePasteActionStates()},EditorUi.prototype.zeroOffset=new mxPoint(0,0),EditorUi.prototype.getDiagramContainerOffset=function(){return this.zeroOffset},EditorUi.prototype.refresh=function(t){t=null==t||t;this.container.clientWidth,this.container.clientHeight,this.container==document.body&&(document.body.clientWidth||document.documentElement.clientWidth,document.documentElement.clientHeight);mxClient.IS_IOS&&!window.navigator.standalone&&void 0!==Menus&&window.innerHeight!=document.documentElement.clientHeight&&(document.documentElement.clientHeight,window.innerHeight,window.scrollTo(0,0)),t&&this.editor.graph.sizeDidChange()},EditorUi.prototype.createTabContainer=function(){return null},EditorUi.prototype.createDivs=function(){this.diagramContainer=this.container||this.createDiv(geDiagramContainer)},EditorUi.prototype.createDivs1=function(){this.menubarContainer=this.createDiv("geMenubarContainer"),this.toolbarContainer=this.createDiv("geToolbarContainer"),this.sidebarContainer=this.createDiv("geSidebarContainer"),this.formatContainer=this.createDiv("geSidebarContainer geFormatContainer"),this.diagramContainer=this.createDiv("geDiagramContainer"),this.footerContainer=this.createDiv("geFooterContainer"),this.hsplit=this.createDiv("geHsplit"),this.menubarContainer.style.top="0px",this.menubarContainer.style.left="0px",this.menubarContainer.style.right="0px",this.toolbarContainer.style.left="0px",this.toolbarContainer.style.right="0px",this.sidebarContainer.style.left="0px",this.sidebarContainer.style.zIndex="1",this.formatContainer.style.right="0px",this.formatContainer.style.zIndex="1",this.diagramContainer.style.right=(null!=this.format?this.formatWidth:0)+"px",this.footerContainer.style.left="0px",this.footerContainer.style.right="0px",this.footerContainer.style.bottom="0px",this.footerContainer.style.zIndex=mxPopupMenu.prototype.zIndex-3,this.hsplit.style.width=this.splitSize+"px",this.hsplit.style.zIndex="1",this.editor.chromeless?this.diagramContainer.style.border="none":this.tabContainer=this.createTabContainer()},EditorUi.prototype.createSidebarContainer=function(){var t=document.createElement("div");return t.className="geSidebarContainer",t},EditorUi.prototype.createUi=function(){this.menubar=this.editor.chromeless?null:this.menus.createMenubar(this.createDiv("geMenubar")),null!=this.menubar&&this.menubarContainer.appendChild(this.menubar.container),null!=this.menubar&&(this.statusContainer=this.createStatusContainer(),this.editor.addListener("statusChanged",mxUtils.bind(this,function(){this.setStatusText(this.editor.getStatus())})),this.setStatusText(this.editor.getStatus()),this.menubar.container.appendChild(this.statusContainer),this.container.appendChild(this.menubarContainer)),this.sidebar=this.editor.chromeless?null:this.createSidebar(this.sidebarContainer),null!=this.sidebar&&this.container.appendChild(this.sidebarContainer),this.format=this.editor.chromeless||!this.formatEnabled?null:this.createFormat(this.formatContainer),null!=this.format&&this.container.appendChild(this.formatContainer);var t=this.editor.chromeless?null:this.createFooter();null!=t&&(this.footerContainer.appendChild(t),this.container.appendChild(this.footerContainer)),this.container.appendChild(this.diagramContainer),null!=this.container&&null!=this.tabContainer&&this.container.appendChild(this.tabContainer),this.toolbar=this.editor.chromeless?null:this.createToolbar(this.createDiv("geToolbar")),null!=this.toolbar&&(this.toolbarContainer.appendChild(this.toolbar.container),this.container.appendChild(this.toolbarContainer)),null!=this.sidebar&&(this.container.appendChild(this.hsplit),this.addSplitHandler(this.hsplit,!0,0,mxUtils.bind(this,function(t){this.hsplitPosition=t,this.refresh()})))},EditorUi.prototype.createStatusContainer=function(){var l=document.createElement("a");return l.className="geItem geStatus",mxEvent.addListener(l,"click",mxUtils.bind(this,function(t){var e,n,i=mxEvent.getSource(t);if(i!=l)for(;i.parentNode!=l;)i=i.parentNode;"A"!=i.nodeName&&("statusFunction"==(n=i.getAttribute("data-action"))&&null!=this.editor.statusFunction?this.editor.statusFunction():null!=n?null!=(n=this.actions.get(n))&&n.funct():(n=i.getAttribute("data-title"),e=i.getAttribute("data-message"),null!=n&&null!=e?this.showError(n,e):null!=(n=i.getAttribute("data-link"))&&this.editor.graph.openLink(n)),mxEvent.consume(t))})),l},EditorUi.prototype.setStatusText=function(t){this.statusContainer.innerHTML=Graph.sanitizeHtml(t),0==this.statusContainer.getElementsByTagName("div").length&&null!=t&&0<t.length&&(this.statusContainer.innerText="",t=this.createStatusDiv(t),this.statusContainer.appendChild(t));var e=this.statusContainer.querySelectorAll('[data-effect="fade"]');if(null!=e)for(var n=0;n<e.length;n++)!function(t){mxUtils.setOpacity(t,0),mxUtils.setPrefixedStyle(t.style,"transform","scaleX(0)"),mxUtils.setPrefixedStyle(t.style,"transition","all 0.2s ease"),window.setTimeout(mxUtils.bind(this,function(){mxUtils.setOpacity(t,100),mxUtils.setPrefixedStyle(t.style,"transform","scaleX(1)"),mxUtils.setPrefixedStyle(t.style,"transition","all 1s ease"),window.setTimeout(mxUtils.bind(this,function(){mxUtils.setPrefixedStyle(t.style,"transform","scaleX(0)"),mxUtils.setOpacity(t,0),window.setTimeout(mxUtils.bind(this,function(){null!=t.parentNode&&t.parentNode.removeChild(t)}),1e3)}),Editor.updateStatusInterval/2)}),0)}(e[n])},EditorUi.prototype.createStatusDiv=function(t){var e=document.createElement("div");return e.style.textOverflow="ellipsis",e.style.display="inline-block",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.minWidth="0",e.setAttribute("title",t),e.innerHTML=Graph.sanitizeHtml(t),e},EditorUi.prototype.createToolbar=function(t){return new Toolbar(this,t)},EditorUi.prototype.createSidebar=function(t){return new Sidebar(this,t)},EditorUi.prototype.createFormat=function(t){return new Format(this,t)},EditorUi.prototype.createFooter=function(){return this.createDiv("geFooter")},EditorUi.prototype.createDiv=function(t){var e=document.createElement("div");return e.className=t,e},EditorUi.prototype.addSplitHandler=function(e,n,i,l){var s=null,o=null,r=!0,a=null,h=(mxClient.IS_POINTER&&(e.style.touchAction="none"),mxUtils.bind(this,function(){var t=parseInt(n?e.style.left:e.style.bottom);return t=n?t:t+i-this.footerHeight}));function u(t){var e;null!=s&&(e=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),l(Math.max(0,o+(n?e.x-s.x:s.y-e.y)-i)),mxEvent.consume(t),o!=h())&&(r=!0,a=null)}function t(t){u(t),s=o=null}mxEvent.addGestureListeners(e,function(t){s=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),o=h(),r=!1,mxEvent.consume(t)}),mxEvent.addListener(e,"click",mxUtils.bind(this,function(t){var e;!r&&this.hsplitClickEnabled&&(e=null!=a?a-i:0,a=h(),l(e),mxEvent.consume(t))})),mxEvent.addGestureListeners(document,null,u,t),this.destroyFunctions.push(function(){mxEvent.removeGestureListeners(document,null,u,t)})},EditorUi.prototype.prompt=function(t,e,n){e=new FilenameDialog(this,e,mxResources.get("apply"),function(t){n(parseFloat(t))},t);this.showDialog(e.container,300,80,!0,!0),e.init()},EditorUi.prototype.handleError=function(t,e,n,i,l){var s,o,t=null!=t&&null!=t.error?t.error:t;null!=t||null!=e?(s=mxUtils.htmlEntities(mxResources.get("unknownError")),o=mxResources.get("ok"),e=null!=e?e:mxResources.get("error"),null!=t&&null!=t.message&&(s=mxUtils.htmlEntities(t.message)),this.showError(e,s,o,n,null,null,null,null,null,null,null,null,i?n:null)):null!=n&&n()},EditorUi.prototype.showError=function(t,e,n,i,l,s,o,r,a,h,u,d,p){t=new ErrorDialog(this,t,e,n||mxResources.get("ok"),i,l,s,o,d,r,a),n=Math.ceil(null!=e?e.length/50:1);this.showDialog(t.container,h||340,u||100+20*n,!0,!1,p),t.init()},EditorUi.prototype.showDialog=function(t,e,n,i,l,s,o,r,a,h){this.editor.graph.tooltipHandler.resetTimer(),this.editor.graph.tooltipHandler.hideTooltip(),null==this.dialogs&&(this.dialogs=[]),this.dialog=new Dialog(this,t,e,n,i,l,s,o,r,a,h),this.dialogs.push(this.dialog)},EditorUi.prototype.hideDialog=function(t,e,n){var i=null;if(null!=this.dialogs&&0<this.dialogs.length)for(var l=this.dialogs.length-1;0<=l;l--)if(!this.dialogs[l].closing){i=this.dialogs[l];break}null==i||null!=n&&n!=this.dialog.container.firstChild||(i.closing=!0,0==i.close(t,e)?delete i.closing:(delete i.closing,0<=(n=mxUtils.lastIndexOf(this.dialogs,i))&&this.dialogs.splice(n,1),this.dialog=0<this.dialogs.length?this.dialogs[this.dialogs.length-1]:null,this.editor.fireEvent(new mxEventObject("hideDialog")),null==this.dialog&&null!=this.editor.graph.container&&"hidden"!=this.editor.graph.container.style.visibility&&window.setTimeout(mxUtils.bind(this,function(){null==this.editor||null!=this.dialogs&&0!=this.dialogs.length||(this.editor.graph.isEditing()&&null!=this.editor.graph.cellEditor.textarea?this.editor.graph.cellEditor.textarea:(mxUtils.clearSelection(),this.editor.graph.container)).focus()}),0)))},EditorUi.prototype.ctrlEnter=function(){var t=this.editor.graph;if(t.isEnabled())try{for(var e=t.getSelectionCells(),n=new mxDictionary,i=[],l=0;l<e.length;l++){var s=t.isTableCell(e[l])?t.model.getParent(e[l]):e[l];null==s||n.get(s)||(n.put(s,!0),i.push(s))}t.setSelectionCells(t.duplicateCells(i,!1))}catch(t){this.handleError(t)}},EditorUi.prototype.pickColor=function(t,e,n,i){var l=this.editor.graph,s=l.cellEditor.saveSelection(),o=230+17*(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12)),t=new ColorDialog(this,"default"!=t?mxUtils.rgba2hex(t)||"none":t,function(t){l.cellEditor.restoreSelection(s),e(t)},function(){l.cellEditor.restoreSelection(s)},n,i);this.showDialog(t.container,230,o,!0,!1),t.init()},EditorUi.prototype.openFile=function(){window.openFile=new OpenFile(mxUtils.bind(this,function(t){this.hideDialog(t)})),this.showDialog(new OpenDialog(this).container,Editor.useLocalStorage?640:320,Editor.useLocalStorage?480:220,!0,!0,function(){window.openFile=null})},EditorUi.prototype.base64ToBlob=function(t,e){e=e||"";for(var n=atob(t),i=n.length,l=Math.ceil(i/1024),s=new Array(l),o=0;o<l;++o){for(var r=1024*o,a=Math.min(1024+r,i),h=new Array(a-r),u=r,d=0;u<a;++d,++u)h[d]=n[u].charCodeAt(0);s[o]=new Uint8Array(h)}return new Blob(s,{type:e})},EditorUi.prototype.writeImageToClipboard=function(t,e,n,i){var l=this.base64ToBlob(t.substring(t.indexOf(",")+1),"image/png"),l=new ClipboardItem({"image/png":l,"text/html":new Blob(['<img src="'+t+'" width="'+e+'" height="'+n+'">'],{type:"text/html"})});navigator.clipboard.write([l]).catch(i)},EditorUi.prototype.writeHtmlToClipboard=function(t,e){t=new ClipboardItem({"text/plain":new Blob([Editor.convertHtmlToText(t)],{type:"text/plain"}),"text/html":new Blob([t],{type:"text/html"})});navigator.clipboard.write([t]).catch(e)},EditorUi.prototype.writeTextToClipboard=function(t,e){navigator.clipboard.writeText(t).catch(e)},EditorUi.prototype.extractGraphModelFromHtml=function(t){var e=null;try{var n,i=t.indexOf("&lt;mxGraphModel ");0<=i&&i<(n=t.lastIndexOf("&lt;/mxGraphModel&gt;"))&&(e=t.substring(i,n+21).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\\&quot;/g,'"').replace(/\n/g,""))}catch(t){}return e},EditorUi.prototype.readGraphModelFromClipboard=function(n){this.readGraphModelFromClipboardWithType(mxUtils.bind(this,function(t){null!=t?n(t):this.readGraphModelFromClipboardWithType(mxUtils.bind(this,function(t){var e;null!=t&&(e=decodeURIComponent(t),this.isCompatibleString(e))&&(t=e),n(t)}),"text")}),"html")},EditorUi.prototype.readGraphModelFromClipboardWithType=function(o,e){navigator.clipboard.read().then(mxUtils.bind(this,function(t){null!=t&&0<t.length&&"html"==e&&0<=mxUtils.indexOf(t[0].types,"text/html")?t[0].getType("text/html").then(mxUtils.bind(this,function(t){t.text().then(mxUtils.bind(this,function(t){try{var e=this.parseHtmlData(t),n="text/plain"!=e.getAttribute("data-type")?e.innerHTML:mxUtils.trim(null==e.innerText?mxUtils.getTextContent(e):e.innerText);try{var i=n.lastIndexOf("%3E");0<=i&&i<n.length-3&&(n=n.substring(0,i+3))}catch(t){}try{var l=e.getElementsByTagName("span"),s=null!=l&&0<l.length?mxUtils.trim(decodeURIComponent(l[0].textContent)):decodeURIComponent(n);this.isCompatibleString(s)&&(n=s)}catch(t){}}catch(t){}o(this.isCompatibleString(n)?n:null)})).catch(function(t){o(null)})})).catch(function(t){o(null)}):null!=t&&0<t.length&&"text"==e&&0<=mxUtils.indexOf(t[0].types,"text/plain")?t[0].getType("text/plain").then(function(t){t.text().then(function(t){o(t)}).catch(function(){o(null)})}).catch(function(){o(null)}):o(null)})).catch(function(t){o(null)})},EditorUi.prototype.parseHtmlData=function(t){var e=null;if(null!=t&&0<t.length){var n="<meta "==t.substring(0,6),i=((e=document.createElement("div")).innerHTML=(n?'<meta charset="utf-8">':"")+Graph.sanitizeHtml(t),asHtml=!0,e.getElementsByTagName("style"));if(null!=i)for(;0<i.length;)i[0].parentNode.removeChild(i[0]);null!=e.firstChild&&e.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT&&null!=e.firstChild.nextSibling&&e.firstChild.nextSibling.nodeType==mxConstants.NODETYPE_ELEMENT&&"META"==e.firstChild.nodeName&&"A"==e.firstChild.nextSibling.nodeName&&null==e.firstChild.nextSibling.nextSibling&&(l=null==e.firstChild.nextSibling.innerText?mxUtils.getTextContent(e.firstChild.nextSibling):e.firstChild.nextSibling.innerText)==e.firstChild.nextSibling.getAttribute("href")&&(mxUtils.setTextContent(e,l),asHtml=!1);var l,s,t=n&&null!=e.firstChild?e.firstChild.nextSibling:e.firstChild;null!=t&&null==t.nextSibling&&t.nodeType==mxConstants.NODETYPE_ELEMENT&&"IMG"==t.nodeName?null!=(l=t.getAttribute("src"))&&(Editor.isPngDataUrl(l)&&null!=(s=Editor.extractGraphModelFromPng(l))&&0<s.length&&(l=s),mxUtils.setTextContent(e,l),asHtml=!1):1==(n=e.getElementsByTagName("img")).length&&null!=(l=(t=n[0]).getAttribute("src"))&&t.parentNode==e&&1==e.children.length&&(Editor.isPngDataUrl(l)&&null!=(s=Editor.extractGraphModelFromPng(l))&&0<s.length&&(l=s),mxUtils.setTextContent(e,l),asHtml=!1),asHtml&&Graph.removePasteFormatting(e)}return asHtml||e.setAttribute("data-type","text/plain"),e},EditorUi.prototype.extractGraphModelFromEvent=function(t){var e=null,n=null;return e=null!=(n=null!=t&&null!=(t=null!=t.dataTransfer?t.dataTransfer:t.clipboardData)&&(10==document.documentMode||11==document.documentMode?n=t.getData("Text"):(n=0<=mxUtils.indexOf(t.types,"text/html")?t.getData("text/html"):null,0<=mxUtils.indexOf(t.types,"text/plain")&&(null==n||0==n.length)&&(n=t.getData("text/plain"))),null!=n)&&(n=Graph.zapGremlins(mxUtils.trim(n)),null!=(t=this.extractGraphModelFromHtml(n)))?t:n)&&this.isCompatibleString(n)?n:e},EditorUi.prototype.isCompatibleString=function(t){return!1},EditorUi.prototype.saveFile=function(t){t||null==this.editor.filename?(t=new FilenameDialog(this,this.editor.getOrCreateFilename(),mxResources.get("save"),mxUtils.bind(this,function(t){this.save(t)}),null,mxUtils.bind(this,function(t){return null!=t&&0<t.length||(mxUtils.confirm(mxResources.get("invalidName")),!1)})),this.showDialog(t.container,340,96,!0,!0),t.init()):this.save(this.editor.getOrCreateFilename())},EditorUi.prototype.save=function(t){if(null!=t){this.editor.graph.isEditing()&&this.editor.graph.stopEditing();var e=mxUtils.getXml(this.editor.getGraphXml());try{if(Editor.useLocalStorage){if(null!=localStorage.getItem(t)&&!mxUtils.confirm(mxResources.get("replaceIt",[t])))return;localStorage.setItem(t,e),this.editor.setStatus(mxUtils.htmlEntities(mxResources.get("saved"))+" "+new Date)}else{if(!(e.length<MAX_REQUEST_SIZE))return mxUtils.alert(mxResources.get("drawingTooLarge")),void mxUtils.popup(e);new mxXmlRequest(SAVE_URL,"filename="+encodeURIComponent(t)+"&xml="+encodeURIComponent(e)).simulate(document,"_blank")}this.editor.setModified(!1),this.editor.setFilename(t),this.updateDocumentTitle()}catch(t){this.editor.setStatus(mxUtils.htmlEntities(mxResources.get("errorSavingFile")))}}},EditorUi.prototype.executeLayouts=function(n,t){this.executeLayout(mxUtils.bind(this,function(){var t=new mxCompositeLayout(this.editor.graph,n),e=this.editor.graph.getSelectionCells();t.execute(this.editor.graph.getDefaultParent(),0==e.length?null:e)}),!0,t)},EditorUi.prototype.executeLayout=function(t,e,n){var i=this.editor.graph;i.getModel().beginUpdate();try{t()}catch(t){throw t}finally{this.allowAnimation&&e&&i.isEnabled()?((t=new mxMorphing(i)).addListener(mxEvent.DONE,mxUtils.bind(this,function(){i.getModel().endUpdate(),null!=n&&n()})),t.startAnimation()):(i.getModel().endUpdate(),null!=n&&n())}},EditorUi.prototype.showImageDialog=function(t,e,n,i){var l,s=this.editor.graph.cellEditor,o=s.saveSelection(),r=mxUtils.prompt(t,e);s.restoreSelection(o),null!=r&&0<r.length?((l=new Image).onload=function(){n(r,l.width,l.height)},l.onerror=function(){n(null),mxUtils.alert(mxResources.get("fileNotFound"))},l.src=r):n(null)},EditorUi.prototype.showLinkDialog=function(t,e,n){t=new LinkDialog(this,t,e,n);this.showDialog(t.container,420,90,!0,!0),t.init()},EditorUi.prototype.showDataDialog=function(t){null!=t&&void 0!==window.EditDataDialog&&(t=new EditDataDialog(this,t),this.showDialog(t.container,480,420,!0,!1,null,!1),t.init())},EditorUi.prototype.showBackgroundImageDialog=function(t,e){t=null!=t?t:mxUtils.bind(this,function(t){t=new ChangePageSetup(this,null,t);t.ignoreColor=!0,this.editor.graph.model.execute(t)});var n=mxUtils.prompt(mxResources.get("backgroundImage"),null!=e?e.src:"");null!=n&&0<n.length?((e=new Image).onload=function(){t(new mxImage(n,e.width,e.height),!1)},e.onerror=function(){t(null,!0),mxUtils.alert(mxResources.get("fileNotFound"))},e.src=n):t(null)},EditorUi.prototype.setBackgroundImage=function(t){this.editor.graph.setBackgroundImage(t),this.editor.graph.view.validateBackgroundImage(),this.fireEvent(new mxEventObject("backgroundImageChanged"))},EditorUi.prototype.confirm=function(t,e,n){mxUtils.confirm(t)?null!=e&&e():null!=n&&n()},EditorUi.prototype.createOutline=function(t){var e=new mxOutline(this.editor.graph);return mxEvent.addListener(window,"resize",function(){e.update(!1)}),e},EditorUi.prototype.altShiftActions={65:"connectionArrows",82:"clearWaypoints",76:"editLink",79:"connectionPoints",81:"editConnectionPoints",84:"editTooltip",86:"pasteSize",70:"copySize",66:"copyData",69:"pasteData"},EditorUi.prototype.ctrlAltShiftActions={70:"bringForward",66:"sendBackward"},EditorUi.prototype.ctrlAltActions={88:"copyAsImage"},EditorUi.prototype.createKeyHandler=function(t){var n=this,u=this.editor.graph,s=new mxKeyHandler(u),e=s.isEventIgnored,d=(s.isEventIgnored=function(t){return!(mxEvent.isShiftDown(t)&&9==t.keyCode)&&(!this.isControlDown(t)||mxEvent.isShiftDown(t)||90!=t.keyCode&&89!=t.keyCode&&188!=t.keyCode&&190!=t.keyCode&&85!=t.keyCode)&&(66!=t.keyCode&&73!=t.keyCode||!this.isControlDown(t)||this.graph.cellEditor.isContentEditing()&&!mxClient.IS_FF&&!mxClient.IS_SF)&&(109!=t.keyCode&&107!=t.keyCode||!this.isControlDown(t)&&!mxEvent.isShiftDown(t)||!this.graph.cellEditor.isContentEditing()&&!mxClient.IS_FF&&!mxClient.IS_SF)&&e.apply(this,arguments)},s.isEnabledForEvent=function(t){return!mxEvent.isConsumed(t)&&this.isGraphEvent(t)&&this.isEnabled()&&(null==n.dialogs||0==n.dialogs.length)},s.isControlDown=function(t){return mxEvent.isControlDown(t)||mxClient.IS_MAC&&t.metaKey},null);function i(t,e,n){if(!u.isSelectionEmpty()&&u.isEnabled()){e=null!=e?e:1;var i=u.getCompositeParents(u.getSelectionCells()),l=0<i.length?i[0]:null;if(null!=l)if(n){u.getModel().beginUpdate();try{for(var s,o=0;o<i.length;o++)u.getModel().isVertex(i[o])&&u.isCellResizable(i[o])&&null!=(s=u.getCellGeometry(i[o]))&&(s=s.clone(),37==t?s.width=Math.max(0,s.width-e):38==t?s.height=Math.max(0,s.height-e):39==t?s.width+=e:40==t&&(s.height+=e),u.getModel().setGeometry(i[o],s))}finally{u.getModel().endUpdate()}}else{var r,n=u.model.getParent(l),a=u.getView().scale,h=null;null!=(h=1==u.getSelectionCount()&&u.model.isVertex(l)&&null!=u.layoutManager&&!u.isCellLocked(l)?u.layoutManager.getLayout(n):h)&&h.constructor==mxStackLayout?(h=n.getIndex(l),37==t||38==t?u.model.add(n,l,Math.max(0,h-1)):39!=t&&40!=t||u.model.add(n,l,Math.min(u.model.getChildCount(n),h+1))):null!=(r=u.graphHandler)&&(null==r.first&&r.start(l,0,0,u.getMovableCells(i)),null!=r.first&&(h=n=0,37==t?n=-e:38==t?h=-e:39==t?n=e:40==t&&(h=e),r.currentDx+=n*a,r.currentDy+=h*a,r.checkPreview(),r.updatePreview()),null!=d&&window.clearTimeout(d),d=window.setTimeout(function(){var t,e;null!=r.first&&(t=r.roundLength(r.currentDx/a),e=r.roundLength(r.currentDy/a),r.moveCells(r.cells,t,e),r.reset())},400))}}}var l={37:mxConstants.DIRECTION_WEST,38:mxConstants.DIRECTION_NORTH,39:mxConstants.DIRECTION_EAST,40:mxConstants.DIRECTION_SOUTH},o=s.getFunction,r=(mxKeyHandler.prototype.getFunction=function(e){if(u.isEnabled()){var t=null;if(mxEvent.isShiftDown(e)&&this.isControlDown(e)&&mxEvent.isAltDown(e)?t=n.actions.get(n.ctrlAltShiftActions[e.keyCode]):mxEvent.isShiftDown(e)&&mxEvent.isAltDown(e)?t=n.actions.get(n.altShiftActions[e.keyCode]):this.isControlDown(e)&&mxEvent.isAltDown(e)&&(t=n.actions.get(n.ctrlAltActions[e.keyCode])),null!=t)return t.funct;if(null!=l[e.keyCode]&&!u.isSelectionEmpty()){if(this.isControlDown(e)||!mxEvent.isShiftDown(e)||!mxEvent.isAltDown(e))return this.isControlDown(e)?function(){i(e.keyCode,mxEvent.isShiftDown(e)?u.gridSize:null,!0)}:function(){i(e.keyCode,mxEvent.isShiftDown(e)?u.gridSize:null)};if(u.model.isVertex(u.getSelectionCell()))return function(){var t=u.connectVertex(u.getSelectionCell(),l[e.keyCode],u.defaultEdgeLength,e,!0);null!=t&&0<t.length&&(1==t.length&&u.model.isEdge(t[0])?u.setSelectionCell(u.model.getTerminal(t[0],!1)):u.setSelectionCell(t[t.length-1]),u.scrollCellToVisible(u.getSelectionCell()),null!=n.hoverIcons)&&n.hoverIcons.update(u.view.getState(u.getSelectionCell()))}}}return o.apply(this,arguments)},s.bindAction=mxUtils.bind(this,function(t,e,n,i){var l=this.actions.get(n);null!=l&&(n=function(){l.isEnabled()&&l.funct.apply(this,arguments)},e?i?s.bindControlShiftKey(t,n):s.bindControlKey(t,n):i?s.bindShiftKey(t,n):s.bindKey(t,n))}),this),a=s.escape;return s.escape=function(t){a.apply(this,arguments)},s.enter=function(){},s.bindControlShiftKey(36,function(){u.exitGroup()}),s.bindControlShiftKey(35,function(){u.enterGroup()}),s.bindShiftKey(36,function(){u.home()}),s.bindKey(35,function(){u.refresh()}),s.bindAction(80,!0,"print"),s.bindAction(107,!0,"zoomIn"),s.bindAction(109,!0,"zoomOut"),s.bindAction(61,!0,"zoomIn"),s.bindAction(187,!0,"zoomIn"),s.bindAction(222,!0,"zoomIn"),s.bindAction(173,!0,"zoomOut"),s.bindAction(189,!0,"zoomOut"),this.editor.chromeless&&!this.editor.editable||(s.bindAction(79,!0,"outline",!0),s.bindControlKey(36,function(){u.isEnabled()&&u.foldCells(!0)}),s.bindControlKey(35,function(){u.isEnabled()&&u.foldCells(!1)}),s.bindControlKey(13,function(){r.ctrlEnter()}),s.bindAction(8,!1,"delete"),s.bindAction(8,!0,"deleteAll"),s.bindAction(8,!1,"deleteLabels",!0),s.bindAction(46,!1,"delete"),s.bindAction(46,!0,"deleteAll"),s.bindAction(46,!1,"deleteLabels",!0),s.bindAction(36,!1,"resetView"),s.bindAction(72,!0,"fitWindow",!0),s.bindAction(74,!0,"fitPage"),s.bindAction(74,!0,"fitTwoPages",!0),s.bindAction(48,!0,"customZoom"),s.bindAction(82,!0,"turn"),s.bindAction(82,!0,"clearDefaultStyle",!0),s.bindAction(83,!0,"save"),s.bindAction(83,!0,"saveAs",!0),s.bindAction(65,!0,"selectAll"),s.bindAction(65,!0,"selectNone",!0),s.bindAction(73,!0,"selectVertices",!0),s.bindAction(69,!0,"selectEdges",!0),s.bindAction(69,!0,"editStyle"),s.bindAction(66,!0,"bold"),s.bindAction(66,!0,"toBack",!0),s.bindAction(70,!0,"toFront",!0),s.bindAction(68,!0,"duplicate"),s.bindAction(68,!0,"setAsDefaultStyle",!0),s.bindAction(90,!0,"undo"),s.bindAction(90,!0,"redo",!0),s.bindAction(89,!0,"redo"),s.bindAction(89,!0,"autosize",!0),s.bindAction(88,!0,"cut"),s.bindAction(67,!0,"copy"),s.bindAction(86,!0,"paste"),s.bindAction(71,!0,"group"),s.bindAction(77,!0,"editData"),s.bindAction(71,!0,"grid",!0),s.bindAction(73,!0,"italic"),s.bindAction(76,!0,"lockUnlock"),s.bindAction(76,!0,"layers",!0),s.bindAction(80,!0,"format",!0),s.bindAction(85,!0,"underline"),s.bindAction(85,!0,"ungroup",!0),s.bindAction(109,!0,"decreaseFontSize",!0),s.bindAction(107,!0,"increaseFontSize",!0),s.bindAction(219,!0,"decreaseFontSize",!0),s.bindAction(221,!0,"increaseFontSize",!0),s.bindAction(190,!0,"superscript"),s.bindAction(188,!0,"subscript"),s.bindAction(13,!1,"keyPressEnter"),s.bindKey(113,function(){u.isEnabled()&&u.startEditingAtCell()})),s},EditorUi.prototype.createHelpIcon=function(e){var t=document.createElement("div"),n=(t.setAttribute("title",mxResources.get("help")),t.style.display="inline",t.style.marginLeft="8px",t.style.marginRight="4px",t.style.cursor="help",document.createElement("img"));return n.setAttribute("src",Editor.helpImage),n.setAttribute("valign","middle"),n.setAttribute("border","0"),n.className="geAdaptiveAsset",mxUtils.setOpacity(n,60),n.style.marginTop="-4px",n.style.height="16px",n.style.width="16px",t.appendChild(n),mxEvent.addListener(t,"click",mxUtils.bind(this,function(t){this.hideCurrentMenu(),this.openLink(e),mxEvent.consume(t)})),t},EditorUi.prototype.destroy=function(){var t=this.editor.graph;if(null!=t&&null!=this.selectionStateListener&&(t.getSelectionModel().removeListener(this.selectionStateListener),t.getModel().removeListener(this.selectionStateListener),t.getView().removeListener(this.selectionStateListener),t.removeListener(this.selectionStateListener),this.selectionStateListener=null),null!=this.editor&&(this.editor.destroy(),this.editor=null),null!=this.menubar&&(this.menubar.destroy(),this.menubar=null),null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null),null!=this.sidebar&&(this.sidebar.destroy(),this.sidebar=null),null!=this.keyHandler&&(this.keyHandler.destroy(),this.keyHandler=null),null!=this.keydownHandler&&(mxEvent.removeListener(document,"keydown",this.keydownHandler),this.keydownHandler=null),null!=this.keyupHandler&&(mxEvent.removeListener(document,"keyup",this.keyupHandler),this.keyupHandler=null),null!=this.resizeHandler&&(mxEvent.removeListener(window,"resize",this.resizeHandler),this.resizeHandler=null),null!=this.gestureHandler&&(mxEvent.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null),null!=this.orientationChangeHandler&&(mxEvent.removeListener(window,"orientationchange",this.orientationChangeHandler),this.orientationChangeHandler=null),null!=this.scrollHandler&&(mxEvent.removeListener(window,"scroll",this.scrollHandler),this.scrollHandler=null),null!=this.destroyFunctions){for(var e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions=null}for(var n=[this.menubarContainer,this.toolbarContainer,this.sidebarContainer,this.formatContainer,this.diagramContainer,this.footerContainer,this.chromelessToolbar,this.hsplit,this.layersDialog],e=0;e<n.length;e++)null!=n[e]&&null!=n[e].parentNode&&n[e].parentNode.removeChild(n[e])},__mxOutput.EditorUi=void 0!==EditorUi?EditorUi:void 0;let Menus=function(t){this.editorUi=t,this.menus=new Object,this.init(),mxClient.IS_SVG||((new Image).src=this.checkmarkImage)};function Menubar(t,e){this.editorUi=t,this.container=e}function Menu(t,e){mxEventSource.call(this),this.funct=t,this.enabled=null==e||e}function Sidebar(t,e){this.editorUi=t,this.container=e,this.palettes=new Object,this.taglist=new Object,this.lastCreated=0,this.showTooltips=!0,this.graph=t.createTemporaryGraph(this.editorUi.editor.graph.getStylesheet()),this.graph.cellRenderer.minSvgStrokeWidth=this.minThumbStrokeWidth,this.graph.cellRenderer.antiAlias=this.thumbAntiAlias,this.graph.container.style.visibility="hidden",this.graph.shapeBackgroundColor="transparent",this.graph.foldingEnabled=!1,this.initialDefaultVertexStyle=mxUtils.clone(t.editor.graph.defaultVertexStyle),this.initialDefaultEdgeStyle=mxUtils.clone(t.editor.graph.defaultEdgeStyle),this.ignoredStyles=["html","whiteSpace","aspect","points","verticalLabelPosition","labelPosition","outlineConnect"].concat(Graph.cellStyles)}Menus.prototype.defaultFont="Helvetica",Menus.prototype.defaultFontSize="12",Menus.prototype.defaultMenuItems=["file","edit","view","arrange","extras","help"],Menus.prototype.defaultFonts=["Helvetica","Verdana","Times New Roman","Garamond","Comic Sans MS","Courier New","Georgia","Lucida Console","Tahoma"],Menus.prototype.autoPopup=!0,Menus.prototype.init=function(){var a=this.editorUi,h=a.editor.graph,t=mxUtils.bind(h,h.isEnabled);this.customFonts=[],this.customFontSizes=[],this.put("fontFamily",new Menu(mxUtils.bind(this,function(e,n){for(var t=mxUtils.bind(this,function(t){this.styleChange(e,t,[mxConstants.STYLE_FONTFAMILY],[t],null,n,function(){document.execCommand("fontname",!1,t),a.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_FONTFAMILY],"values",[t],"cells",[h.cellEditor.getEditingCell()]))},function(){h.updateLabelElements(h.getSelectionCells(),function(t){t.removeAttribute("face"),t.style.fontFamily=null,"PRE"==t.nodeName&&h.replaceElement(t,"div")})}).firstChild.nextSibling.style.fontFamily=t}),i=0;i<this.defaultFonts.length;i++)t(this.defaultFonts[i]);if(e.addSeparator(n),0<this.customFonts.length){for(i=0;i<this.customFonts.length;i++)t(this.customFonts[i]);e.addSeparator(n),e.addItem(mxResources.get("reset"),null,mxUtils.bind(this,function(){this.customFonts=[],this.editorUi.fireEvent(new mxEventObject("customFontsChanged"))}),n),e.addSeparator(n)}this.promptChange(e,mxResources.get("custom")+"...","",mxConstants.DEFAULT_FONTFAMILY,mxConstants.STYLE_FONTFAMILY,n,!0,mxUtils.bind(this,function(t){mxUtils.indexOf(this.customFonts,t)<0&&(this.customFonts.push(t),this.editorUi.fireEvent(new mxEventObject("customFontsChanged")))}))}))),this.put("formatBlock",new Menu(mxUtils.bind(this,function(n,i){function t(t,e){return n.addItem(t,null,mxUtils.bind(this,function(){null!=h.cellEditor.textarea&&(h.cellEditor.textarea.focus(),document.execCommand("formatBlock",!1,"<"+e+">"))}),i)}t(mxResources.get("normal"),"p"),t("","h1").firstChild.nextSibling.innerHTML='<h1 style="margin:0px;">'+mxResources.get("heading")+" 1</h1>",t("","h2").firstChild.nextSibling.innerHTML='<h2 style="margin:0px;">'+mxResources.get("heading")+" 2</h2>",t("","h3").firstChild.nextSibling.innerHTML='<h3 style="margin:0px;">'+mxResources.get("heading")+" 3</h3>",t("","h4").firstChild.nextSibling.innerHTML='<h4 style="margin:0px;">'+mxResources.get("heading")+" 4</h4>",t("","h5").firstChild.nextSibling.innerHTML='<h5 style="margin:0px;">'+mxResources.get("heading")+" 5</h5>",t("","h6").firstChild.nextSibling.innerHTML='<h6 style="margin:0px;">'+mxResources.get("heading")+" 6</h6>",t("","pre").firstChild.nextSibling.innerHTML='<pre style="margin:0px;">'+mxResources.get("formatted")+"</pre>",t("","blockquote").firstChild.nextSibling.innerHTML='<blockquote style="margin-top:0px;margin-bottom:0px;">'+mxResources.get("blockquote")+"</blockquote>"}))),this.put("fontSize",new Menu(mxUtils.bind(this,function(e,n){for(var t=[6,8,9,10,11,12,14,18,24,36,48,72],i=(mxUtils.indexOf(t,this.defaultFontSize)<0&&(t.push(this.defaultFontSize),t.sort(function(t,e){return t-e})),mxUtils.bind(this,function(t){if(null!=h.cellEditor.textarea){document.execCommand("fontSize",!1,"3");for(var e=h.cellEditor.textarea.getElementsByTagName("font"),n=0;n<e.length;n++)if("3"==e[n].getAttribute("size")){e[n].removeAttribute("size"),e[n].style.fontSize=t+"px";break}a.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_FONTSIZE],"values",[t],"cells",[h.cellEditor.getEditingCell()]))}})),l=mxUtils.bind(this,function(t){this.styleChange(e,t,[mxConstants.STYLE_FONTSIZE],[t],null,n,function(){i(t)})}),s=0;s<t.length;s++)l(t[s]);if(e.addSeparator(n),0<this.customFontSizes.length){for(var o=0,s=0;s<this.customFontSizes.length;s++)mxUtils.indexOf(t,this.customFontSizes[s])<0&&(l(this.customFontSizes[s]),o++);0<o&&e.addSeparator(n),e.addItem(mxResources.get("reset"),null,mxUtils.bind(this,function(){this.customFontSizes=[]}),n),e.addSeparator(n)}var r=null;this.promptChange(e,mxResources.get("custom")+"...","("+mxResources.get("points")+")",this.defaultFontSize,mxConstants.STYLE_FONTSIZE,n,!0,mxUtils.bind(this,function(t){null!=r&&null!=h.cellEditor.textarea&&(h.cellEditor.textarea.focus(),h.cellEditor.restoreSelection(r)),null!=t&&0<t.length&&(this.customFontSizes.push(t),i(t))}),null,function(){return r=h.cellEditor.saveSelection(),!1})}))),this.put("direction",new Menu(mxUtils.bind(this,function(t,e){t.addItem(mxResources.get("flipH"),null,function(){h.toggleCellStyles(mxConstants.STYLE_FLIPH,!1)},e),t.addItem(mxResources.get("flipV"),null,function(){h.toggleCellStyles(mxConstants.STYLE_FLIPV,!1)},e),this.addMenuItems(t,["-","rotation"],e)}))),this.put("align",new Menu(mxUtils.bind(this,function(t,e){var n=1<this.editorUi.getSelectionState().vertices.length;t.addItem(mxResources.get("leftAlign"),null,function(){h.alignCells(mxConstants.ALIGN_LEFT)},e,null,n),t.addItem(mxResources.get("center"),null,function(){h.alignCells(mxConstants.ALIGN_CENTER)},e,null,n),t.addItem(mxResources.get("rightAlign"),null,function(){h.alignCells(mxConstants.ALIGN_RIGHT)},e,null,n),t.addSeparator(e),t.addItem(mxResources.get("topAlign"),null,function(){h.alignCells(mxConstants.ALIGN_TOP)},e,null,n),t.addItem(mxResources.get("middle"),null,function(){h.alignCells(mxConstants.ALIGN_MIDDLE)},e,null,n),t.addItem(mxResources.get("bottomAlign"),null,function(){h.alignCells(mxConstants.ALIGN_BOTTOM)},e,null,n),this.addMenuItems(t,["-","snapToGrid"],e)}))),this.put("distribute",new Menu(mxUtils.bind(this,function(t,e){t.addItem(mxResources.get("horizontal"),null,function(){h.distributeCells(!0)},e),t.addItem(mxResources.get("vertical"),null,function(){h.distributeCells(!1)},e),t.addSeparator(e),this.addSubmenu("distributeSpacing",t,e,mxResources.get("spacing"))}))),this.put("distributeSpacing",new Menu(mxUtils.bind(this,function(t,e){t.addItem(mxResources.get("horizontal"),null,function(){h.distributeCells(!0,null,!0)},e),t.addItem(mxResources.get("vertical"),null,function(){h.distributeCells(!1,null,!0)},e)}))),this.put("line",new Menu(mxUtils.bind(this,function(t,e){var n=h.view.getState(h.getSelectionCell());null!=n&&("arrow"!=(n=mxUtils.getValue(n.style,mxConstants.STYLE_SHAPE))&&(this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",e,!0).setAttribute("title",mxResources.get("straight")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",e,!0).setAttribute("title",mxResources.get("orthogonal")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",e,!0).setAttribute("title",mxResources.get("simple")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",e,!0).setAttribute("title",mxResources.get("simple")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",e,!0).setAttribute("title",mxResources.get("isometric")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",e,!0).setAttribute("title",mxResources.get("isometric")),"connector"==n&&this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",e,!0).setAttribute("title",mxResources.get("curved")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",e,!0).setAttribute("title",mxResources.get("entityRelation"))),t.addSeparator(e),this.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],[null,null,null,null],"geIcon geSprite geSprite-connection",e,null,null,!0).setAttribute("title",mxResources.get("line")),this.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["link",null,null,null],"geIcon geSprite geSprite-linkedge",e,null,null,!0).setAttribute("title",mxResources.get("link")),this.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["flexArrow",null,null,null],"geIcon geSprite geSprite-arrow",e,null,null,!0).setAttribute("title",mxResources.get("arrow")),this.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["arrow",null,null,null],"geIcon geSprite geSprite-simplearrow",e,null,null,!0).setAttribute("title",mxResources.get("simpleArrow")))}))),this.put("layout",new Menu(mxUtils.bind(this,function(t,e){var n=mxUtils.bind(this,function(t,e){this.editorUi.prompt(mxResources.get("spacing"),t,e)}),i=mxUtils.bind(this,function(n){this.editorUi.tryAndHandle(mxUtils.bind(this,function(){var t=h.getSelectionCell(),e=null;null==t||0==h.getModel().getChildCount(t)?0==h.getModel().getEdgeCount(t)&&(e=h.findTreeRoots(h.getDefaultParent())):e=h.findTreeRoots(t),null!=(t=null!=e&&0<e.length?e[0]:t)&&this.editorUi.executeLayout(function(){n.execute(h.getDefaultParent(),t),h.isSelectionEmpty()||(t=h.getModel().getParent(t),h.getModel().isVertex(t)&&h.updateGroupBounds([t],2*h.gridSize,!0))},!0)}))});t.addItem(mxResources.get("horizontalFlow"),null,mxUtils.bind(this,function(){this.editorUi.tryAndHandle(mxUtils.bind(this,function(){var e=new mxHierarchicalLayout(h,mxConstants.DIRECTION_WEST);this.editorUi.executeLayout(function(){var t=h.getSelectionCells();e.execute(h.getDefaultParent(),0==t.length?null:t)},!0)}))}),e),t.addItem(mxResources.get("verticalFlow"),null,mxUtils.bind(this,function(){this.editorUi.tryAndHandle(mxUtils.bind(this,function(){var e=new mxHierarchicalLayout(h,mxConstants.DIRECTION_NORTH);this.editorUi.executeLayout(function(){var t=h.getSelectionCells();e.execute(h.getDefaultParent(),0==t.length?null:t)},!0)}))}),e),t.addSeparator(e),t.addItem(mxResources.get("horizontalTree"),null,mxUtils.bind(this,function(){var e=new mxCompactTreeLayout(h,!0);e.edgeRouting=!1,e.levelDistance=30,e.sortEdges=!0,n(e.levelDistance,mxUtils.bind(this,function(t){isNaN(t)||(e.levelDistance=t,i(e))}))}),e),t.addItem(mxResources.get("verticalTree"),null,mxUtils.bind(this,function(){var e=new mxCompactTreeLayout(h,!1);e.edgeRouting=!1,e.levelDistance=30,e.sortEdges=!0,n(e.levelDistance,mxUtils.bind(this,function(t){isNaN(t)||(e.levelDistance=t,i(e))}))}),e),t.addItem(mxResources.get("radialTree"),null,mxUtils.bind(this,function(){var e=new mxRadialTreeLayout(h);e.levelDistance=80,e.autoRadius=!0,n(e.levelDistance,mxUtils.bind(this,function(t){isNaN(t)||(e.levelDistance=t,i(e))}))}),e),t.addSeparator(e),t.addItem(mxResources.get("organic"),null,mxUtils.bind(this,function(){var e=new mxFastOrganicLayout(h);n(e.forceConstant,mxUtils.bind(this,function(t){this.editorUi.tryAndHandle(mxUtils.bind(this,function(){e.forceConstant=t,this.editorUi.executeLayout(function(){var t=h.getSelectionCell();null!=t&&0!=h.getModel().getChildCount(t)||(t=h.getDefaultParent()),e.execute(t),h.getModel().isVertex(t)&&h.updateGroupBounds([t],2*h.gridSize,!0)},!0)}))}))}),e),t.addItem(mxResources.get("circle"),null,mxUtils.bind(this,function(){this.editorUi.tryAndHandle(mxUtils.bind(this,function(){var e=new mxCircleLayout(h);this.editorUi.executeLayout(function(){var t=h.getSelectionCell();null!=t&&0!=h.getModel().getChildCount(t)||(t=h.getDefaultParent()),e.execute(t),h.getModel().isVertex(t)&&h.updateGroupBounds([t],2*h.gridSize,!0)},!0)}))}),e)}))),this.put("navigation",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["home","-","exitGroup","enterGroup","-","expand","collapse","-","collapsible"],e)}))),this.put("arrange",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["toFront","toBack","bringForward","sendBackward","-"],e),this.addSubmenu("direction",t,e),this.addMenuItems(t,["turn","-"],e),this.addSubmenu("align",t,e),this.addSubmenu("distribute",t,e),t.addSeparator(e),this.addSubmenu("navigation",t,e),this.addSubmenu("insert",t,e),this.addSubmenu("layout",t,e),this.addMenuItems(t,["-","group","ungroup","removeFromGroup","-","clearWaypoints","autosize"],e)}))).isEnabled=t,this.put("insert",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["insertLink","insertImage"],e)}))),this.put("view",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,(null!=this.editorUi.format?["format"]:[]).concat(["outline","layers","-","pageView","pageScale","-","tooltips","grid","guides","-","connectionArrows","connectionPoints","-","resetView","zoomIn","zoomOut"],e))}))),this.put("viewPanels",new Menu(mxUtils.bind(this,function(t,e){null!=this.editorUi.format&&this.addMenuItems(t,["format"],e),this.addMenuItems(t,["outline","layers"],e)}))),this.put("viewZoom",new Menu(mxUtils.bind(this,function(e,n){this.addMenuItems(e,["smartFit","-"],n);for(var t=[.25,.5,.75,1,1.25,1.5,2,3,4],i=0;i<t.length;i++)!function(t){e.addItem(100*t+"%",null,function(){h.zoomTo(t)},n)}(t[i]);this.addMenuItems(e,["-","fitWindow","fitPageWidth","fitPage","fitTwoPages","-","customZoom"],n)}))),this.put("file",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["new","open","-","save","saveAs","-","import","export","-","pageSetup","print"],e)}))),this.put("edit",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["undo","redo","-","cut","copy","paste","delete","-","duplicate","-","editData","editTooltip","-","editStyle","-","edit","-","editLink","openLink","-","selectVertices","selectEdges","selectAll","selectNone","-","lockUnlock"])}))),this.put("extras",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["copyConnect","collapseExpand","-","editDiagram"])}))),this.put("help",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["help","-","about"])})))},Menus.prototype.put=function(t,e){return this.menus[t]=e},Menus.prototype.get=function(t){return this.menus[t]},Menus.prototype.addSubmenu=function(t,e,n,i){var l=this.get(t),s=null;return null!=l&&(l=l.isEnabled(),e.showDisabled||l)&&(s=e.addItem(i||mxResources.get(t),null,null,n,null,l),this.addMenu(t,e,s)),s},Menus.prototype.addMenu=function(t,e,n){t=this.get(t);null!=t&&(e.showDisabled||t.isEnabled())&&t.execute(e,n)},Menus.prototype.addInsertTableCellItem=function(t,e){var s=this.editorUi.editor.graph,n=s.getSelectionCell(),i=s.getCurrentCellStyle(n),l=(1<s.getSelectionCount()&&(s.isTableCell(n)&&(n=s.model.getParent(n)),s.isTableRow(n))&&(n=s.model.getParent(n)),s.isTable(n)||s.isTableRow(n)||s.isTableCell(n)),o=s.isStack(n)||s.isStackChild(n),r=l,a=l;o&&(r=!(a="0"==(s.isStack(n)?i:s.getCellStyle(s.model.getParent(n))).horizontalStack)),null!=e||!l&&!o?this.addInsertTableItem(t,mxUtils.bind(this,function(t,e,n,i,l){l=l||mxEvent.isControlDown(t)||mxEvent.isMetaDown(t)?s.createCrossFunctionalSwimlane(e,n,null,null,i||mxEvent.isShiftDown(t)?"Cross-Functional Flowchart":null):s.createTable(e,n,null,null,i||mxEvent.isShiftDown(t)?"Table":null),e=mxEvent.isAltDown(t)?s.getFreeInsertPoint():s.getCenterInsertPoint(s.getBoundingBoxFromGeometry([l],!0)),n=null;s.getModel().beginUpdate();try{n=s.importCells([l],e.x,e.y),s.fireEvent(new mxEventObject("cellsInserted","cells",s.model.getDescendants(n[0])))}finally{s.getModel().endUpdate()}null!=n&&0<n.length&&(s.scrollCellToVisible(n[0]),s.setSelectionCells(n))}),e):(r&&(t.addItem(mxResources.get("insertColumnBefore"),null,mxUtils.bind(this,function(){try{o?s.insertLane(n,!0):s.insertTableColumn(n,!0)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertcolumnbefore").setAttribute("title",mxResources.get("insertColumnBefore")),t.addItem(mxResources.get("insertColumnAfter"),null,mxUtils.bind(this,function(){try{o?s.insertLane(n,!1):s.insertTableColumn(n,!1)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertcolumnafter").setAttribute("title",mxResources.get("insertColumnAfter")),t.addItem(mxResources.get("deleteColumn"),null,mxUtils.bind(this,function(){if(null!=n)try{o?s.deleteLane(n):s.deleteTableColumn(n)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-deletecolumn").setAttribute("title",mxResources.get("deleteColumn"))),a&&(t.addItem(mxResources.get("insertRowBefore"),null,mxUtils.bind(this,function(){try{o?s.insertLane(n,!0):s.insertTableRow(n,!0)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertrowbefore").setAttribute("title",mxResources.get("insertRowBefore")),t.addItem(mxResources.get("insertRowAfter"),null,mxUtils.bind(this,function(){try{o?s.insertLane(n,!1):s.insertTableRow(n,!1)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertrowafter").setAttribute("title",mxResources.get("insertRowAfter")),t.addItem(mxResources.get("deleteRow"),null,mxUtils.bind(this,function(){try{o?s.deleteLane(n):s.deleteTableRow(n)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-deleterow").setAttribute("title",mxResources.get("deleteRow")),null!=(i=this.editorUi.getSelectionState()).mergeCell?this.addMenuItem(t,"mergeCells"):(1<i.style.colspan||1<i.style.rowspan)&&this.addMenuItem(t,"unmergeCells")))},Menus.prototype.addInsertTableItem=function(t,n,e,i){i=null==i||i,n=null!=n?n:mxUtils.bind(this,function(t,e,n){var i=this.editorUi.editor.graph;if(null!=i.getParentByName(mxEvent.getSource(t),"TD")&&null!=i.cellEditor.textarea){for(var l=i.cellEditor.textarea.getElementsByTagName("table"),s=[],o=0;o<l.length;o++)s.push(l[o]);i.container.focus(),i.pasteHtmlAtCaret(function(t,e){for(var n=["<table>"],i=0;i<t;i++){n.push("<tr>");for(var l=0;l<e;l++)n.push("<td><br></td>");n.push("</tr>")}return n.push("</table>"),n.join("")}(e,n));var r=i.cellEditor.textarea.getElementsByTagName("table");if(r.length==s.length+1)for(o=r.length-1;0<=o;o--)if(0==o||r[o]!=s[o-1]){i.selectNode(r[o].rows[0].cells[0]);break}}});var m=this.editorUi.editor.graph,c=null,g=null;null==e&&(t.div.className+=" geToolbarMenu",t.labels=!1);t=t.addItem("",null,null,e,null,null,null,!0),t.firstChild.style.fontSize=Menus.prototype.defaultFontSize+"px",e=t.getElementsByTagName("td");1<e.length&&(e[1].style.display="none",e[2].style.display="none"),t.firstChild.innerText="";var l=document.createElement("input"),e=(l.setAttribute("id","geTitleOption"),l.setAttribute("type","checkbox"),l.style.verticalAlign="middle",document.createElement("label")),s=(mxUtils.write(e,mxResources.get("title")),e.setAttribute("for","geTitleOption"),e.style.verticalAlign="middle",mxEvent.addGestureListeners(e,null,null,mxUtils.bind(this,function(t){mxEvent.consume(t)})),mxEvent.addGestureListeners(l,null,null,mxUtils.bind(this,function(t){mxEvent.consume(t)})),document.createElement("input")),o=(s.setAttribute("id","geContainerOption"),s.setAttribute("type","checkbox"),s.style.verticalAlign="middle",document.createElement("label")),x=(mxUtils.write(o,mxResources.get("container")),o.setAttribute("for","geContainerOption"),o.style.verticalAlign="middle",mxEvent.addGestureListeners(o,null,null,mxUtils.bind(this,function(t){mxEvent.consume(t)})),mxEvent.addGestureListeners(s,null,null,mxUtils.bind(this,function(t){mxEvent.consume(t)})),i&&(t.firstChild.appendChild(l),t.firstChild.appendChild(e),mxUtils.br(t.firstChild),t.firstChild.appendChild(s),t.firstChild.appendChild(o),mxUtils.br(t.firstChild)),function(t,e){var n=document.createElement("table");n.className="geInsertTablePicker",n.setAttribute("border","1"),n.style.borderCollapse="collapse",n.style.borderStyle="solid",n.style.marginBottom="4px",n.style.marginTop="8px",n.setAttribute("cellPadding","8");for(var i=0;i<t;i++)for(var l=n.insertRow(i),s=0;s<e;s++)l.insertCell(-1);return n}(5,5)),y=(t.firstChild.appendChild(x),document.createElement("div"));function r(t){var e=!1;if(null!=(g=m.getParentByName(mxEvent.getSource(t),"TD"))){c=m.getParentByName(g,"TR");for(var n=mxEvent.isMouseEvent(t)?2:4,i=x,l=Math.min(20,c.sectionRowIndex+n),s=Math.min(20,g.cellIndex+n),o=i.rows.length;o<l;o++)for(var r=i.insertRow(o),a=0;a<i.rows[0].cells.length;a++)r.insertCell(-1);for(o=0;o<i.rows.length;o++)for(a=(r=i.rows[o]).cells.length;a<s;a++)r.insertCell(-1);y.innerHTML=g.cellIndex+1+"x"+(c.sectionRowIndex+1);for(var h=0;h<x.rows.length;h++)for(var u=x.rows[h],d=0;d<u.cells.length;d++){var p=u.cells[d];h==c.sectionRowIndex&&d==g.cellIndex&&(e="blue"==p.style.backgroundColor),h<=c.sectionRowIndex&&d<=g.cellIndex?p.style.backgroundColor="blue":p.style.backgroundColor="transparent"}}return mxEvent.consume(t),e}y.style.textAlign="center",y.style.padding="4px",y.style.width="100%",y.innerHTML="1x1",t.firstChild.appendChild(y),mxEvent.addGestureListeners(x,null,null,mxUtils.bind(this,function(t){var e=r(t);null!=g&&null!=c&&e&&(n(t,c.sectionRowIndex+1,g.cellIndex+1,l.checked,s.checked),window.setTimeout(mxUtils.bind(this,function(){this.editorUi.hideCurrentMenu()}),0))})),mxEvent.addListener(x,"mouseover",r)},Menus.prototype.edgeStyleChange=function(t,e,r,a,n,i,h,l){return this.showIconOnly(t.addItem(e,l,mxUtils.bind(this,function(){var t=this.editorUi.editor.graph;t.stopEditing(!1),t.getModel().beginUpdate();try{for(var e=t.getSelectionCells(),n=[],i=0;i<e.length;i++){var l,s=e[i];if(t.getModel().isEdge(s)){h&&null!=(l=t.getCellGeometry(s))&&((l=l.clone()).points=null,t.getModel().setGeometry(s,l));for(var o=0;o<r.length;o++)t.setCellStyles(r[o],a[o],[s]);n.push(s)}}this.editorUi.fireEvent(new mxEventObject("styleChanged","cells",n,"keys",r,"values",a,"force",0==e.length))}finally{t.getModel().endUpdate()}}),i,n))},Menus.prototype.showIconOnly=function(t){var e=t.getElementsByTagName("td");for(i=0;i<e.length;i++)"mxPopupMenuItem"==e[i].getAttribute("class")&&(e[i].style.display="none");return t},Menus.prototype.styleChange=function(t,e,n,i,l,s,o,r,a){var h=this.createStyleChangeFunction(n,i),n=t.addItem(e,null,mxUtils.bind(this,function(){var t=this.editorUi.editor.graph;null!=o&&t.cellEditor.isContentEditing()?o():h(r)}),s,l);return a&&this.showIconOnly(n),n},Menus.prototype.createStyleChangeFunction=function(o,r){return mxUtils.bind(this,function(t){var e=this.editorUi.editor.graph;e.stopEditing(!1),e.getModel().beginUpdate();try{for(var n=e.getEditableCells(e.getSelectionCells()),i=!1,l=0;l<o.length;l++)e.setCellStyles(o[l],r[l],n),o[l]==mxConstants.STYLE_ALIGN&&e.updateLabelElements(n,function(t){t.removeAttribute("align"),t.style.textAlign=null}),o[l]!=mxConstants.STYLE_FONTFAMILY&&"fontSource"!=o[l]||(i=!0);if(i)for(var s=0;s<n.length;s++)0==e.model.getChildCount(n[s])&&e.autoSizeCell(n[s],!1);null!=t&&t(),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",o,"values",r,"cells",n))}finally{e.getModel().endUpdate()}})},Menus.prototype.promptChange=function(t,e,l,s,o,n,i,r,a,h){return t.addItem(e,null,mxUtils.bind(this,function(){var e=this.editorUi.editor.graph,t=s,n=e.getView().getState(e.getSelectionCell()),i=(null!=n&&(t=n.style[o]||t),null==h||h()),n=new FilenameDialog(this.editorUi,t,mxResources.get("apply"),mxUtils.bind(this,function(t){if(null!=t&&0<t.length){if(i){e.getModel().beginUpdate();try{e.stopEditing(!1),e.setCellStyles(o,t)}finally{e.getModel().endUpdate()}}null!=r&&r(t)}}),mxResources.get("enterValue")+(0<l.length?" "+l:""),null,null,null,null,function(){null!=r&&null!=h&&r(null)});this.editorUi.showDialog(n.container,300,80,!0,!0),n.init()}),n,a,i)},Menus.prototype.pickColor=function(s,o,r,a,h){var u=this.editorUi;u.tryAndHandle(mxUtils.bind(this,function(){var n,t,e,i=u.editor.graph,l=226+17*(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12));null!=o&&i.cellEditor.isContentEditing()?(n=i.cellEditor.saveSelection(),t=new ColorDialog(this.editorUi,r||i.shapeForegroundColor,mxUtils.bind(this,function(t){i.cellEditor.restoreSelection(n),document.execCommand(o,!1,t!=mxConstants.NONE?t:"transparent");var e={forecolor:mxConstants.STYLE_FONTCOLOR,backcolor:mxConstants.STYLE_LABEL_BACKGROUNDCOLOR}[o];null!=e&&u.fireEvent(new mxEventObject("styleChanged","keys",[e],"values",[t],"cells",[i.cellEditor.getEditingCell()]))}),function(){i.cellEditor.restoreSelection(n)}),this.editorUi.showDialog(t.container,230,l,!0,!0),t.init()):(t=i.getView().getState(i.getSelectionCell()),e=mxConstants.NONE,null!=t&&(e=t.style[s]||e),null!=a?(e=/(^#?[a-zA-Z0-9]*$)/.test(e)?e:a,this.editorUi.pickColor(e,ColorDialog.createApplyFunction(this.editorUi,s),a,h)):(null==this.colorDialog&&(this.colorDialog=new ColorDialog(this.editorUi)),this.colorDialog.currentColorKey=s,e==mxConstants.NONE?(e=i.shapeBackgroundColor.substring(1),this.colorDialog.picker.fromString(e),this.colorDialog.colorInput.value=mxConstants.NONE):this.colorDialog.picker.fromString(mxUtils.rgba2hex(e)),this.editorUi.showDialog(this.colorDialog.container,230,l,!0,!0),this.colorDialog.init()))}))},Menus.prototype.toggleStyle=function(t,e){var n=this.editorUi.editor.graph,e=n.toggleCellStyles(t,e);this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[t],"values",[e],"cells",n.getSelectionCells()))},Menus.prototype.addMenuItem=function(t,e,n,i,l,s){var o=this.editorUi.actions.get(e);return null!=o&&(t.showDisabled||o.isEnabled())&&o.visible?(e=t.addItem(s||o.label,null,mxUtils.bind(this,function(t){try{o.funct(i,t)}catch(t){this.editorUi.handleError(t)}}),n,l,o.isEnabled()),o.toggleAction&&o.isSelected()&&t.addCheckmark(e,Editor.checkmarkImage),this.addShortcut(e,o,t.hideShortcuts),e):null},Menus.prototype.addShortcut=function(t,e,n){null!=e.shortcut&&(n?t.setAttribute("title",e.shortcut):(n=t.firstChild.nextSibling.nextSibling,(t=document.createElement("span")).style.color="gray",mxUtils.write(t,e.shortcut),n.appendChild(t)))},Menus.prototype.addMenuItems=function(t,e,n,i,l){for(var s=0;s<e.length;s++)"-"==e[s]?t.addSeparator(n):this.addMenuItem(t,e[s],n,i,null!=l?l[s]:null)},Menus.prototype.createPopupMenu=function(t,e,n){t.smartSeparators=!0,t.hideShortcuts=!0,this.addPopupMenuItems(t,e,n)},Menus.prototype.addPopupMenuItems=function(t,e,n){this.isShowHistoryItems()&&this.addPopupMenuHistoryItems(t,e,n),this.addPopupMenuEditItems(t,e,n),this.isShowStyleItems()&&this.addPopupMenuStyleItems(t,e,n),this.isShowArrangeItems()&&this.addPopupMenuArrangeItems(t,e,n),this.addPopupMenuCellItems(t,e,n),this.addPopupMenuSelectionItems(t,e,n)},Menus.prototype.isShowHistoryItems=function(){return!0},Menus.prototype.addPopupMenuHistoryItems=function(t,e,n){this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(t,["undo","redo"],null,n)},Menus.prototype.addPopupDeleteItem=function(t,e,n){var i,t=this.addMenuItem(t,"delete");null!=t&&null!=t.firstChild&&null!=t.firstChild.nextSibling&&(t.firstChild.nextSibling.style.color="red",1<(i=this.editorUi.editor.graph).getSelectionCount())&&(t.firstChild.nextSibling.innerHTML=mxUtils.htmlEntities(mxResources.get("delete")+" ("+i.getSelectionCount()+")"))},Menus.prototype.addPopupMenuEditItems=function(t,e,n){this.editorUi.editor.graph.isSelectionEmpty()?this.addMenuItems(t,["pasteHere"],null,n):this.addMenuItems(t,["cut","copy","duplicate","-","delete","lockUnlock"],null,n)},Menus.prototype.isShowStyleItems=function(){return!0},Menus.prototype.addPopupMenuStyleItems=function(t,e,n){1==this.editorUi.editor.graph.getSelectionCount()?this.addMenuItems(t,["-","setAsDefaultStyle"],null,n):this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(t,["-","clearDefaultStyle"],null,n)},Menus.prototype.isShowArrangeItems=function(){return!0},Menus.prototype.addPopupMenuArrangeItems=function(t,e,n){var i=this.editorUi.editor.graph,e=((1<i.getSelectionCount()||0<i.getSelectionCount()&&!i.getModel().isEdge(e)&&!i.isSwimlane(e)&&0<i.getModel().getChildCount(e)&&i.isCellEditable(e))&&this.addMenuItems(t,["group","ungroup"],null,n),i.getEditableCells(i.getSelectionCells()).length);1<e&&(t.addSeparator(),this.addSubmenu("align",t),this.addSubmenu("distribute",t)),1<=e&&(this.addMenuItems(t,["-","toFront","toBack"],null,n),this.isShowCellEditItems())&&1==i.getSelectionCount()&&this.addMenuItems(t,["bringForward","sendBackward"],null,n)},Menus.prototype.addPopupMenuCellItems=function(t,e,n){var i,l,s,o,r=this.editorUi.editor.graph,a=r.view.getState(e);null!=a&&(i=null!=(i=r.getModel().getGeometry(e))&&null!=i.points&&0<i.points.length,this.isShowStyleItems()&&1==r.getSelectionCount()&&r.getModel().isEdge(e)&&(t.addSeparator(),this.addSubmenu("line",t)),r.getModel().isEdge(e)&&"entityRelationEdgeStyle"!=mxUtils.getValue(a.style,mxConstants.STYLE_EDGE,null)&&"arrow"!=mxUtils.getValue(a.style,mxConstants.STYLE_SHAPE,null)&&(a=r.selectionCellsHandler.getHandler(e),l=!1,i&&a instanceof mxEdgeHandler&&null!=a.bends&&2<a.bends.length&&0<(s=a.getHandleForEvent(r.updateMouseEvent(new mxMouseEvent(n))))&&s<a.bends.length-1&&(null==a.bends[s]||null==a.bends[s].node||""==a.bends[s].node.style.opacity)&&((o=this.editorUi.actions.get("removeWaypoint")).handler=a,o.index=s,l=!0),this.isShowCellEditItems()&&this.addMenuItem(t,"turn",null,n,null,mxResources.get("reverse")),this.addMenuItems(t,[l?"removeWaypoint":"addWaypoint"],null,n)),1==r.getSelectionCount()&&this.isShowCellEditItems()&&(i||r.getModel().isVertex(e)&&0<r.getModel().getEdgeCount(e))&&this.addMenuItems(t,["clearWaypoints"],null,n),this.isShowCellEditItems())&&1==r.getSelectionCount()&&r.isCellEditable(e)&&this.addPopupMenuCellEditItems(t,e,n)},Menus.prototype.isShowCellEditItems=function(){return!0},Menus.prototype.addPopupMenuCellEditItems=function(t,e,n,i){var l=this.editorUi.editor.graph,s=l.view.getState(e);this.addMenuItems(t,["-","editStyle","editData","editLink"],i,n),l.getModel().isVertex(e)&&null!=mxUtils.getValue(s.style,mxConstants.STYLE_IMAGE,null)&&(t.addSeparator(),this.addMenuItem(t,"image",i,n).firstChild.nextSibling.innerHTML=mxResources.get("editImage")+"...",this.addMenuItem(t,"crop",i,n)),l.getModel().isVertex(e)&&l.isCellConnectable(e)&&this.addMenuItem(t,"editConnectionPoints",i,n)},Menus.prototype.addPopupMenuSelectionItems=function(t,e,n){this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(t,["-","selectAll","selectVertices","selectEdges"],null,n)},Menus.prototype.createMenubar=function(t){for(var n=new Menubar(this.editorUi,t),i=this.defaultMenuItems,l=0;l<i.length;l++)mxUtils.bind(this,function(t){var e=n.addMenu(mxResources.get(i[l]),mxUtils.bind(this,function(){t.funct.apply(this,arguments)}));this.menuCreated(t,e)})(this.get(i[l]));return n},Menus.prototype.menuCreated=function(t,e,n){null!=e&&(n=null!=n?n:"geItem",e.className=n,t.addListener("stateChanged",function(){e.enabled=t.enabled,t.enabled?(e.className=n,8==document.documentMode&&(e.style.color="")):(e.className=n+" mxDisabled",8==document.documentMode&&(e.style.color="#c3c3c3"))}))},Menubar.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()},Menubar.prototype.addMenu=function(t,e,n,i){var l=document.createElement("a");return l.className="geItem",mxUtils.write(l,t),this.addMenuHandler(l,e,i),null!=n?this.container.insertBefore(l,n):this.container.appendChild(l),l},Menubar.prototype.addMenuHandler=function(i,l,s){var o,e;null!=l&&(o=!0,e=mxUtils.bind(this,function(t){var e,n;null!=s&&s(t),mxEvent.isConsumed(t)||!o||null!=i.enabled&&!i.enabled||(this.editorUi.editor.graph.popupMenuHandler.hideMenu(),(e=new mxPopupMenu(l)).div.className+=" geMenubarMenu",e.smartSeparators=!0,e.showDisabled=!0,e.autoExpand=!0,e.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(e,arguments),this.editorUi.resetCurrentMenu(),e.destroy()}),n=mxUtils.getOffset(i),e.popup(n.x,n.y+i.offsetHeight,null,t),this.editorUi.setCurrentMenu(e,i)),mxEvent.consume(t)}),mxEvent.addListener(i,"mousemove",mxUtils.bind(this,function(t){this.editorUi.menus.autoPopup&&null!=this.editorUi.currentMenu&&this.editorUi.currentMenuElt!=i&&(this.editorUi.hideCurrentMenu(),e(t))})),mxEvent.addListener(i,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){!this.editorUi.menus.autoPopup&&null!=this.editorUi.currentMenu&&this.editorUi.currentMenuElt!=i&&mxEvent.isMouseEvent(t)&&this.editorUi.hideCurrentMenu(),o=null==this.editorUi.currentMenu,t.preventDefault()})),mxEvent.addListener(i,"click",mxUtils.bind(this,function(t){e(t),o=!0})))},Menubar.prototype.destroy=function(){},mxUtils.extend(Menu,mxEventSource),Menu.prototype.isEnabled=function(){return this.enabled},Menu.prototype.setEnabled=function(t){this.enabled!=t&&(this.enabled=t,this.fireEvent(new mxEventObject("stateChanged")))},Menu.prototype.execute=function(t,e){this.funct(t,e)},EditorUi.prototype.createMenus=function(){return new Menus(this)},__mxOutput.Menus=void 0!==Menus?Menus:void 0,Sidebar.prototype.init=function(){var t=STENCIL_PATH;this.addSearchPalette(!0),this.addGeneralPalette(!0),this.addMiscPalette(!1),this.addAdvancedPalette(!1),this.addBasicPalette(t),this.setCurrentSearchEntryLibrary("arrows"),this.addStencilPalette("arrows",mxResources.get("arrows"),t+"/arrows.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.addUmlPalette(!1),this.addBpmnPalette(t,!1),this.setCurrentSearchEntryLibrary("flowchart"),this.addStencilPalette("flowchart","Flowchart",t+"/flowchart.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.setCurrentSearchEntryLibrary("clipart"),this.addImagePalette("clipart",mxResources.get("clipart"),t+"/clipart/","_128x128.png",["Earth_globe","Empty_Folder","Full_Folder","Gear","Lock","Software","Virus","Email","Database","Router_Icon","iPad","iMac","Laptop","MacBook","Monitor_Tower","Printer","Server_Tower","Workstation","Firewall_02","Wireless_Router_N","Credit_Card","Piggy_Bank","Graph","Safe","Shopping_Cart","Suit1","Suit2","Suit3","Pilot1","Worker1","Soldier1","Doctor1","Tech1","Security1","Telesales1"],null,{Wireless_Router_N:"wireless router switch wap wifi access point wlan",Router_Icon:"router switch"}),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.collapsedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNUQyRTJFNjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNUQyRTJFNzZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MEUxNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MEUyNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhSMj6lrwAjcC1GyahV+dcZJgeIIFgA7":IMAGE_PATH+"/collapsed.gif",Sidebar.prototype.expandedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxREY3NzBERjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxREY3NzBFMDZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MERENkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MERFNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7":IMAGE_PATH+"/expanded.gif",Sidebar.prototype.enableTooltips=!0,Sidebar.prototype.tooltipBorder=16,Sidebar.prototype.tooltipDelay=300,Sidebar.prototype.dropTargetDelay=200,Sidebar.prototype.gearImage=STENCIL_PATH+"/clipart/Gear_128x128.png",Sidebar.prototype.thumbWidth=42,Sidebar.prototype.thumbHeight=42,Sidebar.prototype.minThumbStrokeWidth=1,Sidebar.prototype.thumbAntiAlias=!1,Sidebar.prototype.thumbPadding=5<=document.documentMode?2:3,Sidebar.prototype.thumbBorder=2,Sidebar.prototype.moreShapesHeight=52,Sidebar.prototype.livePreview=!0,Sidebar.prototype.searchClosedLibraries=!0,Sidebar.prototype.closedLibraryOpacity=null,"large"!=urlParams["sidebar-entries"]&&(Sidebar.prototype.thumbPadding=5<=document.documentMode?0:1,Sidebar.prototype.thumbBorder=1,Sidebar.prototype.thumbWidth=32,Sidebar.prototype.thumbHeight=30,Sidebar.prototype.minThumbStrokeWidth=1.3,Sidebar.prototype.thumbAntiAlias=!0),Sidebar.prototype.sidebarTitleSize=8,Sidebar.prototype.sidebarTitles=!1,Sidebar.prototype.tooltipTitles=!0,Sidebar.prototype.maxTooltipWidth=400,Sidebar.prototype.maxTooltipHeight=400,Sidebar.prototype.addStencilsToIndex=!0,Sidebar.prototype.defaultImageWidth=80,Sidebar.prototype.defaultImageHeight=80,Sidebar.prototype.tooltipMouseDown=null,Sidebar.prototype.expandLibraries=!0,Sidebar.prototype.refresh=function(){var t=this.editorUi.editor.graph,e=(this.graph.stylesheet.styles=mxUtils.clone(t.getDefaultStylesheet().styles),this.wrapper.scrollTop),l=(this.wrapper.innerText="",this.palettes),s=(this.palettes=new Object,this.addPalette);this.addPalette=function(t,e,n,i){return n=this.wasPaletteExpanded(l,t,n),s.apply(this,arguments)},this.init(l),this.addPalette=s,window.setTimeout(mxUtils.bind(this,function(){this.wrapper.scrollTop=e}),0)},Sidebar.prototype.wasPaletteExpanded=function(t,e,n){t=null!=t&&null!=e?t[e]:null,e=n;return e=null!=t&&2==t.length&&null!=t[1].firstChild?"none"!=t[1].firstChild.style.display:e},Sidebar.prototype.getEntryContainer=function(){return this.wrapper},Sidebar.prototype.appendChild=function(t){this.wrapper.appendChild(t)},Sidebar.prototype.getTooltipOffset=function(t,e){var n,i;return mxUtils.isAncestorNode(this.container,t)?(i=document.body,n=document.documentElement,i=Math.max(i.clientHeight||0,n.clientHeight),n=e.height+2*this.tooltipBorder,new mxPoint(this.container.offsetWidth+2+this.editorUi.container.offsetLeft,Math.min(i-n-20,Math.max(0,this.editorUi.container.offsetTop+this.container.offsetTop+t.offsetTop-this.wrapper.scrollTop-n/2+16)))):new mxPoint((i=t.getBoundingClientRect()).x+i.width+this.tooltipBorder,i.y+i.height/2-e.height/2-6)},Sidebar.prototype.createMoreShapes=function(){var t=this.editorUi.createDiv("geSidebarFooter"),e=(t.style.position="absolute",t.style.overflow="hidden",t.style.display="inline-flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.width="100%",t.style.marginTop="-1px",t.style.height=this.moreShapesHeight+"px",document.createElement("button")),n=(e.className="geBtn gePrimaryBtn",e.style.display="inline-flex",e.style.alignItems="center",e.style.whiteSpace="nowrap",e.style.padding="8px",e.style.margin="0px",e.innerHTML="<span>+</span>",e.getElementsByTagName("span")[0]);return n.style.fontSize="18px",n.style.marginRight="5px",mxUtils.write(e,mxResources.get("moreShapes")),mxEvent.addListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()})),mxEvent.addListener(e,"click",mxUtils.bind(this,function(t){this.editorUi.actions.get("shapes").funct(),mxEvent.consume(t)})),t.appendChild(e),t},Sidebar.prototype.createTooltip=function(t,e,n,i,l,s,o,r,a,h,u){u=null==u||u,this.tooltipMouseDown=a;var a=this.editorUi.editor.graph,d=(null==this.tooltip&&(this.tooltip=document.createElement("div"),this.tooltip.className="geSidebarTooltip",this.tooltip.style.userSelect="none",this.tooltip.style.zIndex=mxPopupMenu.prototype.zIndex-1,document.body.appendChild(this.tooltip),mxEvent.addMouseWheelListener(mxUtils.bind(this,function(t){this.hideTooltip()}),this.tooltip),this.graph2=new Graph(this.tooltip,null,null,this.editorUi.editor.graph.getStylesheet()),this.graph2.shapeBackgroundColor="transparent",this.graph2.resetViewOnRootChange=!1,this.graph2.foldingEnabled=!1,this.graph2.gridEnabled=!1,this.graph2.autoScroll=!1,this.graph2.setTooltips(!1),this.graph2.setConnectable(!1),this.graph2.setPanning(!1),this.graph2.setEnabled(!1),this.graph2.dialect==mxConstants.DIALECT_SVG?null!=(d=this.graph2.view.getDrawPane().ownerSVGElement)&&(d.style.overflow="visible"):this.graph2.view.canvas.style.overflow="visible",this.graph2.openLink=mxUtils.bind(this,function(){this.hideTooltip()}),mxEvent.addGestureListeners(this.tooltip,mxUtils.bind(this,function(t){null!=this.tooltipMouseDown&&this.tooltipMouseDown(t),window.setTimeout(mxUtils.bind(this,function(){null!=this.tooltipCloseImage&&"none"!=this.tooltipCloseImage.style.display||this.hideTooltip()}),0)}),null,mxUtils.bind(this,function(t){this.hideTooltip()})),mxClient.IS_SVG||(this.graph2.view.canvas.style.position="relative"),(d=document.createElement("img")).setAttribute("src",Dialog.prototype.closeImage),d.setAttribute("title",mxResources.get("close")),d.style.position="absolute",d.style.cursor="default",d.style.padding="8px",d.style.right="2px",d.style.top="2px",this.tooltip.appendChild(d),this.tooltipCloseImage=d,mxEvent.addListener(d,"click",mxUtils.bind(this,function(t){this.hideTooltip(),mxEvent.consume(t)}))),this.tooltipCloseImage.style.display=h?"":"none",this.graph2.model.clear(),this.graph2.view.setTranslate(this.tooltipBorder,this.tooltipBorder),!r&&(n>this.maxTooltipWidth||i>this.maxTooltipHeight)?this.graph2.view.scale=Math.round(100*Math.min(this.maxTooltipWidth/n,this.maxTooltipHeight/i))/100:this.graph2.view.scale=1,this.tooltip.style.display="block",this.graph2.labelsVisible=null==s||s,mxClient.NO_FO),h=(mxClient.NO_FO=Editor.prototype.originalNoForeignObject,mxUtils.getCurrentStyle(this.tooltip)),h=(this.graph2.shapeBackgroundColor=h.backgroundColor,null!=e&&(s=this.graph2.cloneCells(e),this.graph2.pasteCellStyles(a.includeDescendants(s),u?a.currentVertexStyle:a.defaultVertexStyle,u?a.currentEdgeStyle:a.defaultEdgeStyle,null,a.pasteEdgeStyle),this.graph2.addCells(s)),mxClient.NO_FO=d,this.graph2.getGraphBounds()),u=(r&&0<n&&0<i&&(h.width>n||h.height>i)?(e=Math.round(100*Math.min(n/h.width,i/h.height))/100,mxClient.NO_FO?(this.graph2.view.setScale(Math.round(100*Math.min(this.maxTooltipWidth/h.width,this.maxTooltipHeight/h.height))/100),h=this.graph2.getGraphBounds()):(this.graph2.view.getDrawPane().ownerSVGElement.style.transform="scale("+e+")",this.graph2.view.getDrawPane().ownerSVGElement.style.transformOrigin="0 0",h.width*=e,h.height*=e)):mxClient.NO_FO||(this.graph2.view.getDrawPane().ownerSVGElement.style.transform=""),h.width+2*this.tooltipBorder+4),a=h.height+2*this.tooltipBorder,s=(this.tooltip.style.overflow="visible",this.tooltip.style.width=u+"px",u),r=(this.tooltipTitles&&null!=l&&0<l.length?(null==this.tooltipTitle?(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.style.borderTop="1px solid gray",this.tooltipTitle.style.textAlign="center",this.tooltipTitle.style.width="100%",this.tooltipTitle.style.overflow="hidden",this.tooltipTitle.style.position="absolute",this.tooltipTitle.style.paddingTop="6px",this.tooltipTitle.style.bottom="6px",this.tooltip.appendChild(this.tooltipTitle)):this.tooltipTitle.innerText="",this.tooltipTitle.style.display="",mxUtils.write(this.tooltipTitle,l),this.tooltipTitle.setAttribute("title",l),s=Math.min(this.maxTooltipWidth,Math.max(u,this.tooltipTitle.scrollWidth+4)),a+=d=this.tooltipTitle.offsetHeight+10,mxClient.IS_SVG?this.tooltipTitle.style.marginTop=2-d+"px":this.tooltipTitle.style.top=(a-=6)-d+"px"):null!=this.tooltipTitle&&null!=this.tooltipTitle.parentNode&&(this.tooltipTitle.style.display="none"),u<s&&(this.tooltip.style.width=s+"px"),this.tooltip.style.height=a+"px",-Math.round(h.x-this.tooltipBorder)+(u<s?(s-u)/2:0)),n=-Math.round(h.y-this.tooltipBorder),i=(o=null!=o?o:this.getTooltipOffset(t,h)).x,e=o.y;mxClient.IS_SVG?0!=r||0!=n?this.graph2.view.canvas.setAttribute("transform","translate("+r+","+n+")"):this.graph2.view.canvas.removeAttribute("transform"):(this.graph2.view.drawPane.style.left=r+"px",this.graph2.view.drawPane.style.top=n+"px"),this.tooltip.style.position="absolute",this.tooltip.style.left=i+"px",this.tooltip.style.top=e+"px",mxUtils.fit(this.tooltip,this.tooltipBorder),this.lastCreated=Date.now()},Sidebar.prototype.showTooltip=function(t,e,n,i,l,s){var o;this.enableTooltips&&this.showTooltips&&this.currentElt!=t&&(null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null),o=mxUtils.bind(this,function(){this.createTooltip(t,e,n,i,l,s)}),null!=this.tooltip&&"none"!=this.tooltip.style.display?o():this.thread=window.setTimeout(o,this.tooltipDelay),this.currentElt=t)},Sidebar.prototype.hideTooltip=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null),null!=this.tooltip&&(this.tooltip.style.display="none",this.currentElt=null),this.tooltipMouseDown=null},Sidebar.prototype.addDataEntry=function(t,e,n,i,l){return null==t&&(t=""),null!=i&&(t+=" "+i),this.addEntry(t,mxUtils.bind(this,function(){return this.createVertexTemplateFromData(l,e,n,i)}))},Sidebar.prototype.addEntries=function(t){for(var e=0;e<t.length;e++)mxUtils.bind(this,function(e){var n=e.data,t=null!=e.title?e.title:"";null!=e.tags&&(t+=" "+e.tags),null!=n&&0<t.length?this.addEntry(t,mxUtils.bind(this,function(){n=this.editorUi.convertDataUri(n);var t="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";return"fixed"==e.aspect&&(t+="aspect=fixed;"),this.createVertexTemplate(t+"image="+n,e.w,e.h,"",e.title||"",!1,!1,!0)})):null!=e.xml&&0<t.length&&this.addEntry(t,mxUtils.bind(this,function(){var t=this.editorUi.stringToCells("<"==e.xml.charAt(0)?e.xml:Graph.decompress(e.xml));return this.createVertexTemplateFromCells(t,e.w,e.h,e.title||"",!0,!1,!0)}))})(t[e])},Sidebar.prototype.setCurrentSearchEntryLibrary=function(t,e){this.currentSearchEntryLibrary=null!=t?{id:t,lib:e}:null},Sidebar.prototype.getKeyStyle=function(t){var e=[];if(null!=t)for(var n=t.split(";"),i=0;i<n.length;i++){var l=n[i].split("=");1<l.length&&mxUtils.indexOf(this.ignoredStyles,l[0])<0&&e.push(l[0]+"="+l[1])}return e.join(";")},Sidebar.prototype.addLibForStyle=function(t,e){""!=t&&(null==this.styleToLibs&&(this.styleToLibs={}),null==this.styleToLibs[t]&&(this.styleToLibs[t]=[]),this.styleToLibs[t].push(e))},Sidebar.prototype.getLibsForStyle=function(t){return null!=this.styleToLibs?this.styleToLibs[t]:null},Sidebar.prototype.addEntry=function(t,e){var o,n;if(null!=this.currentSearchEntryLibrary&&(n=(o=this).createVertexTemplateFromCells,this.createVertexTemplateFromCells=function(t,e,n,i,l){if(null!=t)for(var s=0;s<t.length;s++)o.addLibForStyle(o.getKeyStyle(t[s].style),this.currentSearchEntryLibrary)},e(),this.createVertexTemplateFromCells=n),null!=this.taglist&&null!=t&&0<t.length){null!=this.currentSearchEntryLibrary&&(e.parentLibraries=[this.currentSearchEntryLibrary]);for(var i=t.toLowerCase().replace(/[\/\,\(\)]/g," ").split(" "),l=[],s={},r=0;r<i.length;r++){null==s[i[r]]&&(s[i[r]]=!0,l.push(i[r]));var a=Editor.soundex(i[r].replace(/\.*\d*$/,""));a!=i[r]&&null==s[a]&&(s[a]=!0,l.push(a))}for(r=0;r<l.length;r++)this.addEntryForTag(l[r],e)}return e},Sidebar.prototype.addEntryForTag=function(t,e){var n;null!=t&&1<t.length&&("object"!=typeof(n=this.taglist[t])&&(this.taglist[t]=n={entries:[]}),n.entries.push(e))},Sidebar.prototype.isEntryIgnored=function(t,e){var n=!e;if(null!=t.parentLibraries&&n)for(var i=0;i<t.parentLibraries.length;i++)if(this.isEntryVisible(t.parentLibraries[i].id)){n=!1;break}return n},Sidebar.prototype.searchEntries=function(t,e,n,i,l,s){if(null!=this.taglist&&null!=t){for(var o=t.toLowerCase().split(" "),r=new mxDictionary,a=(n+1)*e,h=[],u=0,d=0;d<o.length;d++){var p=Editor.soundex(o[d].replace(/\.*\d*$/,""));if(0<p.length){var m=this.taglist[o[d]],c=null!=m?m.entries.slice():[],c=null!=(m=this.taglist[p])?c.concat(m.entries):c,g=new mxDictionary;if(0<c.length)for(var h=[],x=0;x<c.length;x++){var y=c[x];if(0==u==(null==r.get(y))&&null==g.get(y)&&(g.put(y,y),!this.isEntryIgnored(y,s))&&(h.push(y),d==o.length-1)&&h.length==a)return void i(h.slice(n*e,a),a,!0,o)}else h=[];r=g,u++}}t=h.length;i(h.slice(n*e,(n+1)*e),t,!1,o)}else i([],null,null,o)},Sidebar.prototype.filterTags=function(t){if(null==t)return null;for(var e=t.split(" "),n=[],i={},l=0;l<e.length;l++)null==i[e[l]]&&(i[e[l]]="1",n.push(e[l]));return n.join(" ")},Sidebar.prototype.cloneCell=function(t,e){t=t.clone();return null!=e&&(t.value=e),t},Sidebar.prototype.showPopupMenuForEntry=function(t,e,n){},Sidebar.prototype.addSearchPalette=function(t){var e,o,n=document.createElement("div"),r=(n.style.visibility="hidden",this.appendChild(n),document.createElement("div")),i=(r.className="geSidebar geSearchSidebar",t||(r.style.display="none"),document.createElement("div")),l=(i.style.whiteSpace="nowrap",i.style.textOverflow="clip",i.style.paddingBottom="8px",i.style.cursor="default",document.createElement("input")),s=(l.setAttribute("placeholder",mxResources.get("searchShapes")),l.setAttribute("type","text"),i.appendChild(l),document.createElement("img")),a=(s.setAttribute("src",Editor.magnifyImage),s.setAttribute("title",mxResources.get("search")),s.className="geAdaptiveAsset",s.style.position="relative",s.style.cursor="pointer",s.style.opacity="0.5",s.style.height="16px",s.style.left="-20px",s.style.top="4px",s.style.background="url('"+this.editorUi.editor.transparentImage+"')",i.appendChild(s),r.appendChild(i),document.createElement("center")),h=mxUtils.button(mxResources.get("moreResults"),function(){e()}),u=(h.style.display="none",h.style.lineHeight="normal",h.style.fontSize="12px",h.style.padding="6px 12px 6px 12px",h.style.marginTop="4px",h.style.marginBottom="8px",a.style.paddingTop="4px",a.style.paddingBottom="4px",a.appendChild(h),r.appendChild(a),""),d=!1,p=!1,m=0,c=new Object,g=mxUtils.bind(this,function(){d=!1,this.currentSearch=null;for(var t=r.firstChild;null!=t;){var e=t.nextSibling;t!=i&&t!=a&&t.parentNode.removeChild(t),t=e}});function x(){s.setAttribute("src",Editor.magnifyImage),s.setAttribute("title",mxResources.get("search")),h.style.display="none",l.value="",u="",g()}mxEvent.addListener(s,"click",function(){s.getAttribute("src")!=Editor.magnifyImage&&x(),l.focus()}),e=mxUtils.bind(this,function(){if(o=4*Math.max(1,Math.floor(this.container.clientWidth/(this.thumbWidth+10))),this.hideTooltip(),""!=l.value){if(null!=a.parentNode&&(u!=l.value&&(g(),u=l.value,c=new Object,p=!1,m=0),!d)&&!p){h.setAttribute("disabled","true"),h.style.display="",h.style.cursor="wait",h.innerHTML=mxResources.get("loading")+"...",d=!0;var s=new Object;this.currentSearch=s;try{this.searchEntries(u,o,m,mxUtils.bind(this,function(t,e,n,i){if(this.currentSearch==s){d=!1,m++,this.insertSearchHint(r,u,o,m,t=null!=t?t:[],e,n,i),0==t.length&&1==m&&(u=""),null!=a.parentNode&&a.parentNode.removeChild(a);for(var l=0;l<t.length;l++)mxUtils.bind(this,function(t){try{var n=t();null!=this.closedLibraryOpacity&&this.searchClosedLibraries&&this.isEntryIgnored(t,!1)&&(n.style.opacity=this.closedLibraryOpacity),null==c[n.innerHTML]?(c[n.innerHTML]=null!=t.parentLibraries?t.parentLibraries.slice():[],r.appendChild(n)):null!=t.parentLibraries&&(c[n.innerHTML]=c[n.innerHTML].concat(t.parentLibraries)),mxEvent.addGestureListeners(n,null,null,mxUtils.bind(this,function(t){var e=c[n.innerHTML];mxEvent.isPopupTrigger(t)&&this.showPopupMenuForEntry(n,e,t)})),mxEvent.disableContextMenu(n)}catch(t){"1"==urlParams.test&&(null==window.console||EditorUi.isElectronApp?(mxLog.show(),mxLog.debug(t.stack)):console.error(t))}})(t[l]);n?(h.removeAttribute("disabled"),h.innerHTML=mxResources.get("moreResults")):(h.innerHTML=mxResources.get("reset"),h.style.display="none",p=!0),h.style.cursor="",r.appendChild(a)}}),mxUtils.bind(this,function(){h.style.cursor=""}),this.searchClosedLibraries)}catch(t){this.editorUi.handleError(t)}}}else g(),l.value="",u="",c=new Object,h.style.display="none",p=!1,l.focus()}),this.searchShapes=function(t){l.value=t,e()},mxEvent.addListener(l,"keydown",mxUtils.bind(this,function(t){13==t.keyCode?(e(),mxEvent.consume(t)):27==t.keyCode&&x()}));t=mxUtils.bind(this,function(){window.setTimeout(mxUtils.bind(this,function(){""==l.value?(s.setAttribute("src",Editor.magnifyImage),s.setAttribute("title",mxResources.get("search"))):(s.setAttribute("src",Editor.crossImage),s.setAttribute("title",mxResources.get("reset"))),""==l.value?(p=!0,h.style.display="none"):l.value!=u?(h.style.display="none",p=!1):d||(h.style.display=p?"none":"")}),0)}),mxEvent.addListener(l,"keyup",t),mxEvent.addListener(l,"paste",t),mxEvent.addListener(l,"cut",t),mxEvent.addListener(l,"mousedown",function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0}),mxEvent.addListener(l,"selectstart",function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0}),t=document.createElement("div");t.appendChild(r),this.appendChild(t),this.palettes.search=[n,t]},Sidebar.prototype.insertSearchHint=function(t,e,n,i,l,s,o,r){0==l.length&&1==i&&((l=document.createElement("div")).className="geTitle",l.style.cssText="background-color:transparent;border-color:transparent;padding:6px 0px 0px 0px !important;margin:4px 8px 4px 8px;text-align:center;cursor:default !important;font-size:11px;font-weight:normal;",mxUtils.write(l,mxResources.get("noResultsFor",[e])),t.appendChild(l))},Sidebar.prototype.addGeneralPalette=function(t){var e="line lines connector connectors connection connections arrow arrows ",n=(this.setCurrentSearchEntryLibrary("general","general"),this.editorUi.editor.graph),i=this,l=parseInt(this.initialDefaultVertexStyle.fontSize),l=isNaN(l)?"":"fontSize="+Math.min(16,l)+";",s=n.appendFontSize("edgeLabel;resizable=0;html=1;",n.edgeFontSize),o=new mxCell("List Item",new mxGeometry(0,0,80,30),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;"+l),l=(o.vertex=!0,[this.createVertexTemplateEntry("rounded=0;whiteSpace=wrap;html=1;",120,60,"","Rectangle",null,null,"rect rectangle box"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;",120,60,"","Rounded Rectangle",null,null,"rounded rect rectangle box"),this.createVertexTemplateEntry(n.appendFontSize("text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;",n.vertexFontSize),60,30,"Text","Text",null,null,"text textbox textarea label"),this.createVertexTemplateEntry("text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;",180,120,'<h1 style="margin-top: 0px;">Heading</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>',"Textbox",null,null,"text textbox textarea"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",120,80,"","Ellipse",null,null,"oval ellipse state"),this.createVertexTemplateEntry("whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Square",null,null,"square"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Circle",null,null,"circle"),this.createVertexTemplateEntry("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;",120,60,"","Process",null,null,"process task"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;",80,80,"","Diamond",null,null,"diamond rhombus if condition decision conditional question test"),this.createVertexTemplateEntry("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Parallelogram"),this.createVertexTemplateEntry("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Hexagon",null,null,"hexagon preparation"),this.createVertexTemplateEntry("triangle;whiteSpace=wrap;html=1;",60,80,"","Triangle",null,null,"triangle logic inverter buffer"),this.createVertexTemplateEntry("shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;",60,80,"","Cylinder",null,null,"cylinder data database"),this.createVertexTemplateEntry("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80,"","Cloud",null,null,"cloud network"),this.createVertexTemplateEntry("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80,"","Document"),this.createVertexTemplateEntry("shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Internal Storage"),this.createVertexTemplateEntry("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80,"","Cube"),this.createVertexTemplateEntry("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Step"),this.createVertexTemplateEntry("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Trapezoid"),this.createVertexTemplateEntry("shape=tape;whiteSpace=wrap;html=1;",120,100,"","Tape"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100,"","Note"),this.createVertexTemplateEntry("shape=card;whiteSpace=wrap;html=1;",80,100,"","Card"),this.createVertexTemplateEntry("shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80,"","Callout",null,null,"bubble chat thought speech message"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;",30,60,"Actor","Actor",!1,null,"user person human stickman"),this.createVertexTemplateEntry("shape=xor;whiteSpace=wrap;html=1;",60,80,"","Or",null,null,"logic or"),this.createVertexTemplateEntry("shape=or;whiteSpace=wrap;html=1;",60,80,"","And",null,null,"logic and"),this.createVertexTemplateEntry("shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;",100,80,"","Data Storage"),this.createVertexTemplateEntry("swimlane;startSize=0;",200,200,"","Container",null,null,"container swimlane lane pool group"),this.createVertexTemplateEntry("swimlane;whiteSpace=wrap;html=1;",200,200,"Vertical Container","Container",null,null,"container swimlane lane pool group"),this.createVertexTemplateEntry("swimlane;horizontal=0;whiteSpace=wrap;html=1;",200,200,"Horizontal Container","Horizontal Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",function(){var t=new mxCell("List",new mxGeometry(0,0,140,120),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;");return t.vertex=!0,t.insert(i.cloneCell(o,"Item 1")),t.insert(i.cloneCell(o,"Item 2")),t.insert(i.cloneCell(o,"Item 3")),i.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"List")}),this.addEntry("list item entry value group erd table",function(){return i.createVertexTemplateFromCells([i.cloneCell(o,"List Item")],o.geometry.width,o.geometry.height,"List Item")}),this.addEntry("curve",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,50,50),"curved=1;endArrow=classic;html=1;");return t.geometry.setTerminalPoint(new mxPoint(0,50),!0),t.geometry.setTerminalPoint(new mxPoint(50,0),!1),t.geometry.points=[new mxPoint(50,50),new mxPoint(0,0)],t.geometry.relative=!0,t.edge=!0,this.createEdgeTemplateFromCells([t],t.geometry.width,t.geometry.height,"Curve")})),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;startArrow=classic;html=1;",100,100,"","Bidirectional Arrow",null,e+"bidirectional"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;html=1;",50,50,"","Arrow",null,e+"directional directed"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;",50,50,"","Dashed Line",null,e+"dashed undirected no"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;",50,50,"","Dotted Line",null,e+"dotted undirected no"),this.createEdgeTemplateEntry("endArrow=none;html=1;",50,50,"","Line",null,e+"simple undirected plain blank no"),this.createEdgeTemplateEntry("endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Connector",null,e+"bidirectional"),this.createEdgeTemplateEntry("endArrow=classic;html=1;",50,50,"","Directional Connector",null,e+"directional directed"),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,e+"link"),this.addEntry(e+"edge title",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(100,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("Label",new mxGeometry(0,0,0,0),s+";align=center;verticalAlign=middle;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),this.createEdgeTemplateFromCells([t],100,0,"Connector with Label")})),this.addEntry(e+"edge title multiplicity",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("Label",new mxGeometry(0,0,0,0),s+";align=center;verticalAlign=middle;")),e=(e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),new mxCell("Source",new mxGeometry(-1,0,0,0),s+";align=left;verticalAlign=bottom;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),this.createEdgeTemplateFromCells([t],160,0,"Connector with 2 Labels")})),this.addEntry(e+"edge title multiplicity",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("Label",new mxGeometry(0,0,0,0),s+";align=center;verticalAlign=middle;")),e=(e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),new mxCell("Source",new mxGeometry(-1,0,0,0),s+";align=left;verticalAlign=bottom;")),e=(e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),new mxCell("Target",new mxGeometry(1,0,0,0),s+";align=right;verticalAlign=bottom;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),this.createEdgeTemplateFromCells([t],160,0,"Connector with 3 Labels")})),this.addEntry(e+"edge shape symbol message mail email",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(100,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("",new mxGeometry(0,0,20,14),"shape=message;html=1;outlineConnect=0;"));return e.geometry.relative=!0,e.vertex=!0,e.geometry.offset=new mxPoint(-10,-7),t.insert(e),this.createEdgeTemplateFromCells([t],100,0,"Connector with Symbol")}))]);this.addPaletteFunctions("general",mxResources.get("general"),null==t||t,l),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addMiscPalette=function(t){var n=this,e="line lines connector connectors connection connections arrow arrows ",e=(this.setCurrentSearchEntryLibrary("general","misc"),[this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;",100,40,"Title","Title",null,null,"text heading title"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ul><li>Value 1</li><li>Value 2</li><li>Value 3</li></ul>","Unordered List"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ol><li>Value 1</li><li>Value 2</li><li>Value 3</li></ol>","Ordered List"),this.createVertexTemplateEntry("shape=table;startSize=0;container=1;collapsible=0;childLayout=tableLayout;fontSize=11;fillColor=none;strokeColor=none;",60,60,"","Vertical List"),this.addDataEntry("vertical list",60,60,"Vertical List","7VjbbqMwEP0aXldcQrp9hfSyUvel3R9wwwRba2xkJiX063eMnaRNgxR2V1EUIYHkGWYGzznjI0SQ5NXmwbCa/9QFyCC5C5LcaI1uVW1ykDKIQ1EEySKI45DuIL4feBr1T8OaGVB4SkLsEt6YXIPzOEeDnfSOhrPaLpG9WlfWIDP4It6tLyR7qRUyocCQHfW2lKxuRB/tIriQxRPr9Bq3dbZWtqJsXyyy2SshZa6lttWUVu6FRv+GA6ffNxiEzWDvvcs3/gC6AjQdhbSiQO4i5g6ekIMoOX72scbZ5S5zDyQtPJbHcU1G4vqsW2qKayPeLZzSI3eIddOKSjIFj8CKA1emi26X9REwoTgYYbFGXfsICSv0y1eNqCtvGI9CeJTHwuj6FzMlbEOOkFVrobAHLs3oIijz8FsapNRxTna0t+my4QZzrWjHNEK2LLAGW2gOR2N+KuXxX1Eepf9O+ewL5T8QKvJEg9TTxlEw+QxLZKrsTxfHSvqD1HKB8FKzpQ1tSSLcYVM2ek/KENmagFpJO1YLLooC1HG+xs1Ezy6YuzdwJEcHNBH0GZOipJctXL2soQaEKp9c9fRUHpP/zqMvtgd7dDUmqXfFkM7aWhXNl+HY7fOkeUknibgoieg+k34GxZgPKcbwJEyKMUhrevWKcTMpxiUqRhKeTTG+DylGMinGeMW4uXrFuJ0E4gIEYna+T4ooHFKI2aQQ4xXi9toUgsz9zyUX/vHf0x8="),this.addEntry("vertical list",mxUtils.bind(this,function(){var t=new mxCell("Link",new mxGeometry(0,0,60,40),"text;html=1;strokeColor=none;fillColor=none;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");return t.vertex=!0,this.graph.setLinkForCell(t,"https://www.draw.io"),this.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Vertical List")})),this.addDataEntry("table",180,120,"Table 1","7VnbcpswEP0aXjtcYsd9NUnTh/Yl6Q8o1trSVEiMWAeTr+8KhGlSe2xwJpMSZvCMdtmVteccwY4IkjTb3VmWi5+GgwqS2yBJrTHYjLJdCkoFcSh5kNwEcRzSL4i/Hbkb1XfDnFnQeE5C3CQ8MbWFxtM4CqyUdxSC5W6I7NG5lgUyiw/y2flCsldGI5MaLNlRbSvF8kLW0U2EkIr/YJXZYjtPay3XlO0ni+Zk+/WARdgdral2+YLuwGSAtqKQUnIUPmLR1B0KkBvRpnkwQlY0js0+t4OIBh6lw4glPRG7NyWVJYyVzw4o5TF5jWJRykwxDd+B8VeupeHVPsua35AaZRzaUguw0qGIJvcRCtboh48G0WTesB6G8CBD3Jr8F7MbaEPWUqn2b7TRjvfcSI01cLMlXQRlGn6ZBTOqOCU76my6XLjF1GhaMYnDTQuswBKKwaTHw0i/egPOr87nnFaMkql7WCHTm3rDCMyU3xulkAgPOVu50JJ2fbN/tIvu2DjGsiGE1srp6UZIzkEfJqqfGGpawd4+QcNuNJSf5CQ/8570+Mk6LHvPxhSVphnSHtpqXvzD+X6dZ8lgNslgsAx2L0kbkSrmkyouVcX+xTwiWVxPfcKH6hOql6S/R9uwmJ4Mp+m6Hn3b8HWSwWAZjLdtiMJJFpfKYox9QxRNjcNHbBwW79g4RD2O5T7vsyE6fQz43z8Mepw2TkL4RM3DdCJ5uS5G0D2Q2X0rasL//pT0Bw=="),this.addDataEntry("table",180,120,"Table 2","7ZlLc9owEMc/ja8dP3jlimnSQ3pJOr0reMGayFqPvNSQT9+VLUMCOEDbyaTYM2ZGWq9e/99K7MheFGfrOyPy9DsmoLzoqxfFBpHqUraOQSkv9GXiRTMvDH3+eeFty9ugeuvnwoCmcxqEdYNfQq2gttSGgjbKGYpU5LZI4smapillPM1ZwMUylQSPuZjb9yUvgm0FCUOP8sWafK7PUZOQGoxrM0elRF7IqrPaI5UquRcbXFEzTFOz3qtM33P7wnkbLF9XF9y9Gy0YVcMbfIYYFdoBE1iIlbIduXWCIVi3alWZnFB3gBmQ2bBLKRNKncek1tNPQS7TppkT2RdFbVhu2+6k54JT/ziJ6EISD1haGGjki1VYOT325S9KmSmh4RuIZM80xWTjTIS5KylYkCs+IRFmjexuuf5RhInB/IcwS2hcFlKpBoJGbeMmR6mpEmg45Ycli/0vQ2/IK4u5Huzq/Fh3QzFq5snRY7sFUVAJBZ2ELnUKRp4NPfwz6IN/wHxwwPxnVQz9oBU+T52kUA8wJ6GX5+xI3oHaeu9wHaFzWQQga7pQNgJnqUwS0HtQwr+FEp2EMrqQietsp9vFvQlFYLQg3jgrnRQHoLfzPIv9sJV9+8bvNPv1W1JXFAqj1lCI+lB4JxS2/7tXFAvjPg34VGnA5i30j8gKJq3HwaDjx8H46rOCm1b2w559t7KCwG+NhVEfCx1LC4Kgzws+Y14w+cC8IDi8rGsOhHHHD4Tg9M3df38CHF4QNvQnPf2u5QbtN4c3fTBceXLA1d0Hotr99fej3w=="),this.addDataEntry("table title",180,150,"Table with Title 1","7VnbbtswDP0avw6WXSfda5yue9he2v6AGjGRMFkyZKZO+vWjbOWyJVluQ9G6BmxApChaOudIIOQozYvFveOl/GkF6Ci9i9LcWYttq1jkoHWUxEpE6ThKkpjeKPl2oJc1vXHJHRg8ZUDSDnjheg6t54k/a2i9FS518FaSl76JTW86qpA7fFSv3pfG5JhYg1wZcORgja01LyvVhI+bCKm0+MGXdo6rRCuL0jn7C3KrrR8vYMrn2vunlDV8hQ3IDrMFh7A4uOLGFZZ7D7YAdEsKqZVAGSJuW1RiCWomV8Oy4ORV65itx24ApEbAcD+e6Q6e/4bywda0LGmdevUA6oDVNryNXatCcwPfgYu/XCMrlutR2ygqI8EpjyLaMkRomGJoPltEWwTDBRjivcwJZ8sn7mawCpkqrVefMdZ4QZRWGWyAy0b0EJR5/CWLMlpxTjbb2PT4cIe5NTRjEo1PC7zCGqqLSU/2k74MtARqj2ng5j9I4OZ0CdACUHH9ABPkZtZsLImFDluolgrhseQTH1rTEdFuM+OjN+QcIt0SYFPt5TWWSggw+3k7TxsNy+DuXqAlm11KV3p0jw7OpCck22B5djauaWmGI22puRHVDufreZ4kg6yXwcUyWPxJWodUMehVca0qWNI9WQz7suE9lg3DNywbbvuT4Thdw86XDV97GVwsg+6WDSzuZXGtLLpYNzDWFw7vsXBg7A0rB7Z7idcfDru3gsevBT/8aXDG7WMvhE9UPfRXktfrogPlA5mbP0tt+PaPp98="),this.addDataEntry("table title",180,120,"Table with Title 2","7VhNb6MwEP01XFd8NNnmGtLtHrKXptq7Gw9grbGRmZSkv34HbEJ3CdtklaYoqgSSZxgP+L1nPwkvivPtvWFF9kNzkF5050Wx0RrtKN/GIKUX+oJ70cILQ59uL/w28DRonvoFM6DwmAmhnfDM5AZs5pE9SbDZEnfSZcuMFfUQm6fRvERmcCVe6lzkU2KtFTKhwFAiaGIpWVGKpnzRVGRC8iXb6Q22jdponogt8AddlW620dWSmpVuakLNV+5j/ObtRv+CWEtdv45DwjYS2zr7UcGUYrc4MAjbQYCalEPnHnQOaHZUUgmOmau4tSD6GYg0a6c5ZH1W2kS6n9vhTQMH+WH4ox78/0aeIKJlZdqIlxpvucejY6OJK5FLpuA7MP5Xaq75zqVQF24kIUE3fNKIOneBccv1DxLKjS4emUmhLUmElC0pSqtaJ4UWChuAJnO6CLLY/zLxJrSymOKgi+mqyw3GWhG/pKW6LbASKyixR7pQGRjx36SHh0nfOVoctW9pIDqDBG56EggGNUArQMHkA6yRqbTZiBnm0m2aKhMIq4Kt69KKjhS7LVVd3bF2gKTThKAJ2kTWQlxkgnNQLc1g7p7Bsh2cm6/ozU16cyI/rlmH5cndmKQlK4a0pzaKlz3S9995lA4mPR38bIahP3I9MClS0sDC1s5LeqFQ6dLOnA4I5hLi2P5J5evNfF6xHNXuvGqZfhrHGI1jekHj+NqTwLAGRnFQvPs5ML16k7gdNImRc//xJjEgjms2idmnSYzRJGYXNInA72kgGvdJ8e4HwezqXSIIBm1i5OR/vE0MqOOKbILC7v+iLX/9+/E3"),this.addDataEntry("crossfunctional cross-functional cross functional flowchart swimlane table",400,400,"Cross-Functional Flowchart","7ZnfbpswFMafhstN/EnS7nIhS3fRSlO2F3DhNFhzfJB90iR9+tlgkirgFUXtqjIkItmHY2O+84v1yQRJutnfKFYWd5iDCJJvQZIqRKpbm30KQgRxyPMgWQRxHJpfEC89d6PqblgyBZL6DIjrAY9MbKGOmIdr/Wm5lRlxlMwmLwXusoIpqpM1HYRL1gUrbZPYvQ3Ns4KL/JYdcEtNtOnNNZkZfvInmz8JbTIKwUrNq6ELG1GQbZXmj7ACXSfaKOxLJnPXeUDZTBLNTN+tHxTB3qtBFXIC3ABugNTBpOx4TkWdMQlrncIC+LqgsyDTdWB9HHuS1DScqt0KJy2Fv2aEyoSiv8u5wp15vwIVfzLvbApRC6B3fCOYhO/A8rPQHPODCxGWriXggZo8UvgbUhTm8cmCywIUt5W5RyLcNDVw72/bucLyF1NroOfqu/VWfS5EM59EaREokUuq9JrOzWUUTMPP02Bq3i81/ejUN5dNV5SiNEtjvCoXME070O9MTNxNzKEBox7xEkBR/AoATVoA/SiYhm6AHAm9OTkvqA+RDKWEzP3NfaV/x3ol3fXae+t1LE3vernZV1YGuRZwyXxMECjJyJRgK3PdwuC49F5kTL1kxCMZ/ciIZsNEY+ZFIxnR6IdGfD1MNK68hqRj1xgNyYcwJF3b2Ns5kusWQa+/p7T3Dh8sL+wp/7ZMV/+jD/ky8nAZD0N1H1E4EnEZEUM1HVHkdR0dhnR0HR/CdXTB+nauI2qfVY6bSiOw54Rz2L4jap+tjkT0I2KwzqN9Wjoi0Q+JgVgP0z19PqvTn39d+wM="),this.addDataEntry("table",280,160,"Table","7Zpdc6IwFIZ/DfcksSqX1X7sxe6NdvY+ylEyjYQJsWp//QZIrDXSIkUdcZ3pTDiSNHmfHF5yRo8MF+tnSZPojwiBe+TRI0MphCpai/UQOPewz0KPPHgY+/rPw08l36L8Wz+hEmJVpQMuOrxRvoQicp+moNIinKoNN+FpxHj4m27EMhtX0QkHezWQMF3KlL3BCFL2nnXwdTRVUrzCUHAh8yFI0J/M9AzJYMY434nf94ZBB2c9IhqKlQ5mN5mJgVSwLl1cHjIrewaxACU3+pYVC1VkFtgvBPAjYPPIduuaIE2LwHzb90Mr3TByHZaOOBrp+Sdg1RllKxlEQrJ3ESvKt6pQqcY7Kq3YgtMYfgEN90IDEW5MSInEtDjMlGlOhFJiYS6kWV3WDqVIXqicgw1MBec0SdmE2397GBmsExrbacz0tMdmcS5PFkcgmXJpzvJPVYC4HkBCfs6v42z9F6b0arGP3N0v4himOdcvBayo0XbHU87msY5NtSAg90RH5nqn41P+yfaVWvBjEoV8q3NAjpPZDDbKZInnuW5Hjka5XnNMld7oyzhMHXbbeVbCeVeKE98MzvVn8Xd5dBqlW2G0Zul2S+m6j+GW00X9nov3ypO35+D9b64nM9fNZ6Lfei3+udf2Hb5/8+apvfYj6iTvKmIKxgmdZuOt9At4jUTt1XPVLwStkZh7ozWbmEEpuNO66mXAHemf9TlWGK1ZjsgvBXlaA70oyMpWeUUZidAteyWq7pWP90/4gTTjld27il6Jfu6VyK3J2FTtnClVm8hM9H1t5mDyfKFgjVTcG63hVCSlpO5aQOpIN6wPrsJoDYNzaz8WXLc94Cq73zWlnFvmuSH3u9BJMehWdL8GqrLIrfTY1OydKTX3FT/Ji2uxkVtdkUVuVcei7N8CyvZWY1F5PSe4IbJtrMQit+JzQwZ7oeMlsnW2c5wvcXkpyFaJruPtN6jnoFf0tovdWs8W1bkK56dE1d4Tpn1qHiLnPlCvllwLjpj68uPnVsXtu7/G+gc="),this.addDataEntry("table",180,140,"Table","7ZhNc5swEIZ/DXc+HH9cTdv00F7sTu8yWoOmi8QIOUB+fSUjJXEwMbZzgcl4PKNdIVn7PlovkhfFef0oSZH9FhTQi757USyFUG0rr2NA9EKfUS/65oWhr79e+KOnNzj2+gWRwNWQAWE74IngAVpP6yhVg9aRZAzpL9KIg5lRkR2Cs9YSkoMs2RNsoGTPZoCvvWVGqKissWeIsUAhtc0FB9OvpPgHzumFUeybj+6xqwGpoO6N6Oiy4TyCyEHJRj9SMaoy+8SyjdrPgKWZGzazTlK2jvRl7KtAumE1Oq9XdFkvHX0BTqmN0WGdCcmeBVcEnUKKSLV9o1jFciQcfgKh71xrQRvrUqKwLYS9ss2dUErk1pA2XNOmUhR/iEzBORKBSIqS7dD97Hl8UBeEu2Xs9bK3NrgenIOghbdBmy3uZzbrMPt7bIZ+0N3sgnNIjug+1Oh0C1shzmhDkKVcm4kWArR/XWVMwbYgiZmp0nlvtofKzcYIhmoZXdRyfqWUdrKNCZ2nCNfPRlDHx4nS+/XAadnh87LOQcgeepGd+X8aMbL6VOAJEZz3EoymSDAIp4dw8VXa7iltzSmji5Vufn+lW/Ym3WycSbe4rdJ9IOUNSfZuts9NslUvsodJIbuy0o2IYOD3IpxPEeHgUjcmht2TwFetu77WraKBte4TTnVB9+rCpV33xWUUaRdcvtgY+ytl0L0/cdCW04I23ZNd0H+fspokwwmc7bT5eqfcPv72yvk/"),this.addDataEntry("table",180,140,"Table","7ZhLc5swEMc/DXcejh9X3CY9tBe707uM1qCpkBixDpBPX2GkvLBi7LgHmBw8s1okof3/tF4kL1rn9YMiRfZLUuBe9N2L1kpK7Ky8XgPnXugz6kXfvDD09c8L7x1Pg+NTvyAKBA4ZEHYDHgk/QOfpHCU23DiSjHH6kzTy0M6IZMfBtmIFyUGV7BE2ULKndoCvvWVGqKxMY884X0sulW4LKXSf2LwTFELtXPfRZRb9ADIHVI3uUjGKmemx7GLzM2BpZofNjJOUnSN9HvsigzaMEqdVic6romMswOqxaaONM6nYkxRIuNUBicLtK10qlnMi4AcQ+s4VS9oYF8rCWBz2aMydRJS5aSgTbmtTJYvfRKVgHYnknBQl23H72tOQoC6IsMvY62VvTXAOaCUq+Resk4kMFMOhMMPrYM4Wn2c567H8czRDP+hvdSkEJEekH2rn0uKEbISzVOhmorUA7Y+rjCFsC5K0k1U68dudg3m7Z4KhckZn5ZxfqKaZbNNGL1IOl89GuI5PENRb+SBo2UP0vM5B1O6c1E78QY2bWv1W4wlBnDshRhOFGITTo7j4qn3/o/Y1b9mdLYXzz5fCpTMfZ6PNx8V1pfADNa/Iv3ez3Tb/Vk5qd1OjdmEpHBHEwHdSnE+U4uBaOCaM/TPDVzG8XTFcRQOL4Q3OhUH/6sNmZP+LZywZGZy/NRn752jQv5yx3JaT4zbds2HgvpdZTRXjBE6HuvlyOd11f313/Q8="),this.createVertexTemplateEntry("text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;overflow=fill;",180,180,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr><th align="center"><b>Title</b></th></tr><tr><td align="center">Section 1.1\nSection 1.2\nSection 1.3</td></tr><tr><td align="center">Section 2.1\nSection 2.2\nSection 2.3</td></tr></table>',"HTML Table 4"),this.addEntry("link hyperlink",mxUtils.bind(this,function(){var t=new mxCell("Link",new mxGeometry(0,0,60,40),"text;html=1;strokeColor=none;fillColor=none;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");return t.vertex=!0,this.graph.setLinkForCell(t,"https://www.draw.io"),this.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Link")})),this.addEntry("timestamp date time text label",mxUtils.bind(this,function(){var t=new mxCell("%date{ddd mmm dd yyyy HH:MM:ss}%",new mxGeometry(0,0,160,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return t.vertex=!0,this.graph.setAttributeForCell(t,"placeholders","1"),this.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Timestamp")})),this.addEntry("variable placeholder metadata hello world text label",mxUtils.bind(this,function(){var t=new mxCell("%name% Text",new mxGeometry(0,0,80,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return t.vertex=!0,this.graph.setAttributeForCell(t,"placeholders","1"),this.graph.setAttributeForCell(t,"name","Variable"),this.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Variable")})),this.createVertexTemplateEntry("shape=ext;double=1;rounded=0;whiteSpace=wrap;html=1;",120,80,"","Double Rectangle",null,null,"rect rectangle box double"),this.createVertexTemplateEntry("shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;",120,80,"","Double Rounded Rectangle",null,null,"rounded rect rectangle box double"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;",100,60,"","Double Ellipse",null,null,"oval ellipse start end state double"),this.createVertexTemplateEntry("shape=ext;double=1;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Square",null,null,"double square"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Circle",null,null,"double circle"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;fillColor=#1ba1e2;sketch=1;",120,60,"","Rectangle Sketch",!0,null,"rectangle rect box text sketch comic retro"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=2;hachureGap=8;fillColor=#990000;fillStyle=dots;sketch=1;",120,60,"","Ellipse Sketch",!0,null,"ellipse oval sketch comic retro"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=-1;hachureGap=8;fillStyle=cross-hatch;fillColor=#006600;sketch=1;",120,60,"","Diamond Sketch",!0,null,"diamond sketch comic retro"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;shape=isoCube2;backgroundOutline=1;isoAngle=15;",90,100,"","Isometric Cube",!0,null,"cube box iso isometric"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoRectangle;",150,90,"","Isometric Square",!0,null,"rectangle rect box iso isometric"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;",50,100,"","Isometric Edge 1"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;elbow=vertical;",50,100,"","Isometric Edge 2"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;",20,120,"","Left Curly Bracket"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;",20,120,"","Right Curly Bracket"),this.createVertexTemplateEntry("line;strokeWidth=2;html=1;",160,10,"","Horizontal Line"),this.createVertexTemplateEntry("line;strokeWidth=2;direction=south;html=1;",10,160,"","Vertical Line"),this.createVertexTemplateEntry("line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",160,10,"","Horizontal Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("line;strokeWidth=4;direction=south;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",10,160,"","Vertical Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;",120,20,"","Horizontal Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;direction=south;",20,120,"","Vertical Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=1;aspect=fixed;image="+this.gearImage,52,61,"","Image (Fixed Aspect)",!1,null,"fixed image icon symbol"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;image="+this.gearImage,50,60,"","Image (Variable Aspect)",!1,null,"strechted image icon symbol"),this.createVertexTemplateEntry("icon;html=1;image="+this.gearImage,60,60,"Icon","Icon",!1,null,"icon image symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;image="+this.gearImage,140,60,"Label","Label 1",null,null,"label image icon symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;align=center;verticalAlign=bottom;spacingLeft=0;spacingBottom=4;imageAlign=center;imageVerticalAlign=top;image="+this.gearImage,120,80,"Label","Label 2",null,null,"label image icon symbol"),this.addEntry("shape group container",function(){var t=new mxCell("Label",new mxGeometry(0,0,160,70),"html=1;whiteSpace=wrap;container=1;recursiveResize=0;collapsible=0;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(20,20,20,30),"triangle;html=1;whiteSpace=wrap;"));return e.vertex=!0,t.insert(e),n.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Shape Group")}),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;left=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;top=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=waypoint;sketch=0;fillStyle=solid;size=6;pointerEvents=1;points=[];fillColor=none;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;",20,20,"","Waypoint"),this.createEdgeTemplateEntry("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;",50,50,"","Manual Line",null,e+"manual"),this.createEdgeTemplateEntry("shape=filledEdge;curved=0;rounded=0;fixDash=1;endArrow=none;strokeWidth=10;fillColor=#ffffff;edgeStyle=orthogonalEdgeStyle;html=1;",60,40,"","Filled Edge"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=horizontal;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;",50,50,"","Horizontal Elbow",null,e+"elbow horizontal"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=vertical;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;",50,50,"","Vertical Elbow",null,e+"elbow vertical")]);this.addPaletteFunctions("misc",mxResources.get("misc"),null==t||t,e),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addAdvancedPalette=function(t){this.setCurrentSearchEntryLibrary("general","advanced"),this.addPaletteFunctions("advanced",mxResources.get("advanced"),null!=t&&t,this.createAdvancedShapes()),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addBasicPalette=function(t){this.setCurrentSearchEntryLibrary("basic"),this.addStencilPalette("basic",mxResources.get("basic"),t+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")]),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.createAdvancedShapes=function(){var e=this,n=new mxCell("List Item",new mxGeometry(0,0,60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;");return n.vertex=!0,[this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.addEntry("process bar",function(){return e.createVertexTemplateFromData("1ZVNboMwEIVP42UlfkqabCFtNokUiRO4MAWrBiPbKZDTd2xMSJMgVaraKgskzxs/e+YbS5AwqbqNpE25EzlwEj6TMJFC6GFVdQlwTgKP5SRckyDw8CPBy0zWt1mvoRJq/R1DMBg+KD/AoOylyEApFGMqh6zSPXdZ1bKK0xqjOCsZz7e0Fwdzk9I0ex+juBSSHUWtKTa09lF4Y5wngguJcS2sf9qTGq/bKEGxI+zHBi6lHe1Q9U7qlirthExwThvFXm2tRlFaine4uNYWGguZgxF9b5TShmasLlB78IPxfDocZqqgnBU1rjOswljjRrBaK4Mlikm0RqUtmQZzjvG0OFPTpa5GBg41SA3d7Lis5Ga1AVGBlj1uaVmuSzey1WKwlcCKcrR5w5w9qgahOHmn6ePCPYDbjyG8egyphgYV//odlLQBO3YwXTYgGV5nkRppP8U4+g7yFGflMPwOt+A2t9Hg6PSuUdfpGdUTwHOq0dPPoT7OQQ3uHepq+W9Qozmo4b1D9ZeLv6KK4fSjsbkv/6FP",296,100,"Process Bar")}),this.createVertexTemplateEntry("swimlane;",200,200,"Container","Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",function(){var t=new mxCell("List",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;html=1;");return t.vertex=!0,t.insert(e.cloneCell(n,"Item 1")),t.insert(e.cloneCell(n,"Item 2")),t.insert(e.cloneCell(n,"Item 3")),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"List")}),this.addEntry("list item entry value group erd table",function(){return e.createVertexTemplateFromCells([e.cloneCell(n,"List Item")],n.geometry.width,n.geometry.height,"List Item")})]},Sidebar.prototype.addBasicPalette=function(t){this.setCurrentSearchEntryLibrary("basic"),this.addStencilPalette("basic",mxResources.get("basic"),t+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")]),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addUmlPalette=function(t){var i=this,e=new mxCell("+ field: type",new mxGeometry(0,0,100,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;"),n=(e.vertex=!0,new mxCell("",new mxGeometry(0,0,40,8),"line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;")),l=(n.vertex=!0,'newEdgeStyle={"curved":0,"rounded":0};'),s="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;"+l,o="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;"+l,r='<hr size="1" style="border-style:solid;"/>',l="uml static class ",l=(this.setCurrentSearchEntryLibrary("uml"),[this.createVertexTemplateEntry("html=1;whiteSpace=wrap;",110,50,"Object","Object",null,null,l+"object instance"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;",110,50,"&laquo;interface&raquo;<br><b>Name</b>","Interface",null,null,l+"interface object instance annotated annotation"),this.addEntry(l+"object instance",function(){var t=new mxCell("Classname",new mxGeometry(0,0,160,90),"swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;");return t.vertex=!0,t.insert(e.clone()),t.insert(n.clone()),t.insert(i.cloneCell(e,"+ method(type): type")),i.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Class")}),this.addEntry(l+"section subsection",function(){var t=new mxCell("Classname",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;");return t.vertex=!0,t.insert(e.clone()),t.insert(e.clone()),t.insert(e.clone()),i.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Class 2")}),this.addEntry(l+"item member method function variable field attribute label",function(){return i.createVertexTemplateFromCells([i.cloneCell(e,"+ item: attribute")],e.geometry.width,e.geometry.height,"Item 1")}),this.addEntry(l+"item member method function variable field attribute label",function(){var t=new mxCell("item: attribute",new mxGeometry(0,0,120,e.geometry.height),"label;fontStyle=0;strokeColor=none;fillColor=none;align=left;verticalAlign=top;overflow=hidden;spacingLeft=28;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;imageWidth=16;imageHeight=16;whiteSpace=wrap;html=1;image="+i.gearImage);return t.vertex=!0,i.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Item 2")}),this.addEntry(l+"divider hline line separator",function(){return i.createVertexTemplateFromCells([n.clone()],n.geometry.width,n.geometry.height,"Divider")}),this.addEntry(l+"spacer space gap separator",function(){var t=new mxCell("",new mxGeometry(0,0,20,14),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=4;spacingRight=4;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");return t.vertex=!0,i.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Spacer")}),this.createVertexTemplateEntry("text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;",80,26,"Title","Title",null,null,l+"title label"),this.addEntry(l+"component",function(){var t=new mxCell("&laquo;Annotation&raquo;<br/><b>Component</b>",new mxGeometry(0,0,180,90),"html=1;dropTarget=0;whiteSpace=wrap;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(1,0,20,20),"shape=module;jettyWidth=8;jettyHeight=4;"));return e.vertex=!0,e.geometry.relative=!0,e.geometry.offset=new mxPoint(-27,7),t.insert(e),i.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Component")}),this.addEntry(l+"component",function(){var t=new mxCell('<p style="margin:0px;margin-top:6px;text-align:center;"><b>Component</b></p>'+r+'<p style="margin:0px;margin-left:8px;">+ Attribute1: Type<br/>+ Attribute2: Type</p>',new mxGeometry(0,0,180,90),"align=left;overflow=fill;html=1;dropTarget=0;whiteSpace=wrap;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;"));return e.vertex=!0,e.geometry.relative=!0,e.geometry.offset=new mxPoint(-24,4),t.insert(e),i.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Component with Attributes")}),this.createVertexTemplateEntry("verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;",180,120,"Block","Block",null,null,l+"block"),this.createVertexTemplateEntry("shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;",100,50,"Module","Module",null,null,l+"module component"),this.createVertexTemplateEntry("shape=folder;fontStyle=1;spacingTop=10;tabWidth=40;tabHeight=14;tabPosition=left;html=1;whiteSpace=wrap;",70,50,"package","Package",null,null,l+"package"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;",160,90,'<p style="margin:0px;margin-top:4px;text-align:center;text-decoration:underline;"><b>Object:Type</b></p>'+r+'<p style="margin:0px;margin-left:8px;">field1 = value1<br/>field2 = value2<br>field3 = value3</p>',"Object",null,null,l+"object instance"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;",180,90,'<div style="box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;">Tablename</div><table style="width:100%;font-size:1em;" cellpadding="2" cellspacing="0"><tr><td>PK</td><td>uniqueId</td></tr><tr><td>FK1</td><td>foreignKey</td></tr><tr><td></td><td>fieldname</td></tr></table>',"Entity",null,null,"er entity table"),this.addEntry(l+"object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p>'+r+'<div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;");return t.vertex=!0,i.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Class 3")}),this.addEntry(l+"object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p>'+r+'<div style="height:2px;"></div>'+r+'<div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;");return t.vertex=!0,i.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Class 4")}),this.addEntry(l+"object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p>'+r+'<p style="margin:0px;margin-left:4px;">+ field: Type</p>'+r+'<p style="margin:0px;margin-left:4px;">+ method(): Type</p>',new mxGeometry(0,0,160,90),"verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;");return t.vertex=!0,i.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Class 5")}),this.addEntry(l+"object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Interface</b></p>'+r+'<p style="margin:0px;margin-left:4px;">+ field1: Type<br/>+ field2: Type</p>'+r+'<p style="margin:0px;margin-left:4px;">+ method1(Type): Type<br/>+ method2(Type, Type): Type</p>',new mxGeometry(0,0,190,140),"verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;");return t.vertex=!0,i.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Interface 2")}),this.createVertexTemplateEntry("shape=providedRequiredInterface;html=1;verticalLabelPosition=bottom;sketch=0;",20,20,"","Provided/Required Interface",null,null,"uml provided required interface lollipop notation"),this.createVertexTemplateEntry("shape=requiredInterface;html=1;verticalLabelPosition=bottom;sketch=0;",10,20,"","Required Interface",null,null,"uml required interface lollipop notation"),this.addDataEntry("uml lollipop notation provided required interface",20,20,"Required Interface","jVNBbuMwDHyN7o6N9L5x2l66QIEe9qy1GUutIhoUHTt9/VKWNo7bBu0hgDicYeQZSlX1cXok3Zvf2IJT1b2qakLkdDpONTinysK2qtqrsizkp8qHG93N3C16TeD5J4IyCU7aDZCQBAQ+uwwQDr6FyC9UtUNigx167Z4QewE3Ar4C8/nFvkeFHhgFMnx0uQu+/UWEo5RGu0NtqYmzI/5gncuDpcoT7qQKTPgGf2zLJk8Jb8CNyeQDes7sTSl1M9BpvmJkpi+AtoOVKaypg2xK9dmnmZVNegQ8AtNZKAROsz2tR+mQyu7Cu0if0crEspiyv9ukOKdyu9YHHKiBLFlSksPVHRZozu7rHKvvcxSB7UM0fjSW4aXXTeyMsnvrvLSznZdzI94ARSD00ESbDnaKLu8OEluNDqW59+jhEtgHkCDYd/13vkGMrQey8lFxaJ7+vCA7QtZ8xdbO4ThvTvivj07N3m13aruP6ziws17+1/t0xWUBTkAM0813cSPvMa9cZKSnUxiwneE19tUGrOJbspJyec8p2uvn/g8="),this.addEntry("uml lollipop notation provided required interface",function(){return i.createVertexTemplateFromData("zZRNb9swDIZ/je6O3ey+OGsvG1Cgh55Vm7G0KqJB07HTXz/KUux4bbBdNvRgQHz5IYmPTFWUx/GBdGt+YA1OFd9UURIix9VxLME5lWe2VsVe5Xkmn8rvb3g3kzdrNYHnv0koYsJJux6iEoWOzy4JhL2vIcRnqtghscEGvXbfEVsRNyL+BObzk30LGbpnFMnw0SUv+PorEQ5iGu0OpaUq1A76vXUuFRYrVfgiVseEr/BsazapSvcKXJkUHA8JdQOre7OmBtK97963YopKfXgAPALTWUIInGZ7WpfSXTSbOW5OfUQrFfNsTBvFDmfnaG7X+R32VEFKWUDI4uoMizTh+RhV/n9RoWz0DtIKQroakJVbAD21urK+Sc6I4oZzYb35NDT/Nb67P+OTBNt24dcYjGUIPQueQabDGpN2tvGyrqQZQEHoWqhCXw52DPx3B2FWokNx7j16mH+p30SCzr7pl+kEAUV7ATZXf1yUHSFrvorWzuEwPZjukh86NfVuu1PbfXiFPTvrZV/v4xE3M/ETEMN4c3LdAHxJSKSGNCOClP5EA7YxvNY+egErmgs6MZcBHElfz+df",40,10,"Lollipop Notation")}),this.createVertexTemplateEntry("shape=umlBoundary;whiteSpace=wrap;html=1;",100,80,"Boundary Object","Boundary Object",null,null,"uml boundary object"),this.createVertexTemplateEntry("ellipse;shape=umlEntity;whiteSpace=wrap;html=1;",80,80,"Entity Object","Entity Object",null,null,"uml entity object"),this.createVertexTemplateEntry("ellipse;shape=umlControl;whiteSpace=wrap;html=1;",70,80,"Control Object","Control Object",null,null,"uml control object"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;",30,60,"Actor","Actor",!1,null,"uml actor"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",140,70,"Use Case","Use Case",null,null,"uml use case usecase"),this.addEntry("uml activity state start",function(){var t=new mxCell("",new mxGeometry(0,0,30,30),"ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;"));return e.geometry.setTerminalPoint(new mxPoint(15,90),!1),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!0),i.createVertexTemplateFromCells([t,e],30,90,"Start")}),this.addEntry("uml activity state",function(){var t=new mxCell("Activity",new mxGeometry(0,0,120,40),"rounded=1;whiteSpace=wrap;html=1;arcSize=40;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;"));return e.geometry.setTerminalPoint(new mxPoint(60,100),!1),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!0),i.createVertexTemplateFromCells([t,e],120,100,"Activity")}),this.addEntry("uml activity composite state",function(){var t=new mxCell("Composite State",new mxGeometry(0,0,160,60),"swimlane;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=0;resizeLast=1;container=0;fontColor=#000000;collapsible=0;rounded=1;arcSize=30;strokeColor=#ff0000;fillColor=#ffffc0;swimlaneFillColor=#ffffc0;dropTarget=0;"),e=(t.vertex=!0,new mxCell("Subtitle",new mxGeometry(0,0,200,26),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;fontColor=#000000;")),e=(e.vertex=!0,t.insert(e),new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;"));return e.geometry.setTerminalPoint(new mxPoint(80,120),!1),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!0),i.createVertexTemplateFromCells([t,e],160,120,"Composite State")}),this.addEntry("uml activity condition",function(){var t=new mxCell("Condition",new mxGeometry(0,0,80,40),"rhombus;whiteSpace=wrap;html=1;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;"),e=(t.vertex=!0,new mxCell("no",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;")),n=(e.geometry.setTerminalPoint(new mxPoint(180,20),!1),e.geometry.relative=!0,e.geometry.x=-1,e.edge=!0,t.insertEdge(e,!0),new mxCell("yes",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;"));return n.geometry.setTerminalPoint(new mxPoint(40,100),!1),n.geometry.relative=!0,n.geometry.x=-1,n.edge=!0,t.insertEdge(n,!0),i.createVertexTemplateFromCells([t,e,n],180,100,"Condition")}),this.addEntry("uml activity fork join",function(){var t=new mxCell("",new mxGeometry(0,0,200,10),"shape=line;html=1;strokeWidth=6;strokeColor=#ff0000;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;"));return e.geometry.setTerminalPoint(new mxPoint(100,80),!1),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!0),i.createVertexTemplateFromCells([t,e],200,80,"Fork/Join")}),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;",30,30,"","End",null,null,"uml activity state end"),this.createVertexTemplateEntry(s,100,300,":Object","Lifeline",null,null,"uml sequence participant lifeline"),this.createVertexTemplateEntry(s+"participant=umlActor;",20,300,"","Actor Lifeline",null,null,"uml sequence participant lifeline actor"),this.createVertexTemplateEntry(s+"participant=umlBoundary;",50,300,"","Boundary Lifeline",null,null,"uml sequence participant lifeline boundary"),this.createVertexTemplateEntry(s+"participant=umlEntity;",40,300,"","Entity Lifeline",null,null,"uml sequence participant lifeline entity"),this.createVertexTemplateEntry(s+"participant=umlControl;",40,300,"","Control Lifeline",null,null,"uml sequence participant lifeline control"),this.createVertexTemplateEntry("shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;",300,200,"frame","Frame",null,null,"uml sequence frame"),this.createVertexTemplateEntry("shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;targetShapes=umlLifeline;",30,30,"","Destruction",null,null,"uml sequence destruction destroy"),this.addEntry("uml sequence invoke invocation call activation bar",function(){var t=new mxCell("",new mxGeometry(0,0,10,80),o),e=(t.vertex=!0,new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;startArrow=oval;endArrow=block;startSize=8;curved=0;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=5;"));return e.geometry.setTerminalPoint(new mxPoint(-70,5),!0),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!1),i.createVertexTemplateFromCells([t,e],10,80,"Found Message")}),this.addEntry("uml sequence invoke call delegation synchronous invocation activation bar",function(){var t=new mxCell("",new mxGeometry(0,0,10,80),o),e=(t.vertex=!0,new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=5;")),n=(e.geometry.setTerminalPoint(new mxPoint(-70,5),!0),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!1),new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=-5;"));return n.geometry.setTerminalPoint(new mxPoint(-70,75),!1),n.geometry.relative=!0,n.edge=!0,t.insertEdge(n,!0),i.createVertexTemplateFromCells([t,e,n],10,80,"Synchronous Invocation")}),this.addEntry("uml sequence self call recursion delegation activation bar",function(){var t=new mxCell("",new mxGeometry(-5,20,10,40),o),e=(t.vertex=!0,new mxCell("self call",new mxGeometry(0,0,0,0),"html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;"));return e.geometry.setTerminalPoint(new mxPoint(0,0),!0),e.geometry.points=[new mxPoint(30,30)],e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!1),i.createVertexTemplateFromCells([t,e],10,60,"Self Call")}),this.addEntry("uml sequence invoke call delegation callback activation bar",function(){var t=new mxCell("",new mxGeometry(0,0,10,80),o),e=(t.vertex=!0,new mxCell("callback",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;entryX=1;entryY=0;entryDx=0;entryDy=5;")),n=(e.geometry.setTerminalPoint(new mxPoint(80,5),!0),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!1),new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=-5;"));return n.geometry.setTerminalPoint(new mxPoint(80,75),!1),n.geometry.relative=!0,n.edge=!0,t.insertEdge(n,!0),i.createVertexTemplateFromCells([t,e,n],10,80,"Callback")}),this.createVertexTemplateEntry(o,10,80,"","Activation Bar",null,null,"uml sequence activation bar"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;curved=0;rounded=0;",60,0,"dispatch","Found Message 1",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;curved=0;rounded=0;",80,0,"dispatch","Found Message 2",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;",80,0,"dispatch","Message",null,"uml sequence message call invoke dispatch"),this.addEntry("uml sequence return message",function(){var t=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;");return t.geometry.setTerminalPoint(new mxPoint(80,0),!0),t.geometry.setTerminalPoint(new mxPoint(0,0),!1),t.geometry.relative=!0,t.edge=!0,i.createEdgeTemplateFromCells([t],80,0,"Return")}),this.addEntry("uml relation",function(){var t=new mxCell("name",new mxGeometry(0,0,0,0),"endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.geometry.x=-1,t.edge=!0,new mxCell("1",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),i.createEdgeTemplateFromCells([t],160,0,"Relation 1")}),this.addEntry("uml association",function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("parent",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;")),e=(e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),new mxCell("child",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),i.createEdgeTemplateFromCells([t],160,0,"Association 1")}),this.addEntry("uml aggregation",function(){var t=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.geometry.x=-1,t.geometry.y=3,t.edge=!0,i.createEdgeTemplateFromCells([t],160,0,"Aggregation 1")}),this.addEntry("uml composition",function(){var t=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.geometry.x=-1,t.geometry.y=3,t.edge=!0,i.createEdgeTemplateFromCells([t],160,0,"Composition 1")}),this.addEntry("uml relation",function(){var t=new mxCell("Relation",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("0..n",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=top;")),e=(e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),new mxCell("1",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=top;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),i.createEdgeTemplateFromCells([t],160,0,"Relation 2")}),this.createEdgeTemplateEntry("endArrow=open;endSize=12;dashed=1;html=1;",160,0,"Use","Dependency",null,"uml dependency use"),this.createEdgeTemplateEntry("endArrow=block;endSize=16;endFill=0;html=1;",160,0,"Extends","Generalization",null,"uml generalization extend"),this.createEdgeTemplateEntry("endArrow=block;startArrow=block;endFill=1;startFill=1;html=1;",160,0,"","Association 2",null,"uml association"),this.createEdgeTemplateEntry("endArrow=open;startArrow=circlePlus;endFill=0;startFill=0;endSize=8;html=1;",160,0,"","Inner Class",null,"uml inner class"),this.createEdgeTemplateEntry("endArrow=open;startArrow=cross;endFill=0;startFill=0;endSize=8;startSize=10;html=1;",160,0,"","Terminate",null,"uml terminate"),this.createEdgeTemplateEntry("endArrow=block;dashed=1;endFill=0;endSize=12;html=1;",160,0,"","Implementation",null,"uml realization implementation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=0;endSize=24;html=1;",160,0,"","Aggregation 2",null,"uml aggregation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=1;endSize=24;html=1;",160,0,"","Composition 2",null,"uml composition"),this.createEdgeTemplateEntry("endArrow=open;endFill=1;endSize=12;html=1;",160,0,"","Association 3",null,"uml association")]);this.addPaletteFunctions("uml",mxResources.get("uml"),t||!1,l),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.createTitle=function(t){var e=document.createElement("a"),n=(e.setAttribute("title",mxResources.get("sidebarTooltip")),e.className="geTitle",document.createElement("span"));return mxUtils.write(n,t),e.appendChild(n),e},Sidebar.prototype.createThumb=function(t,e,n,i,l,s,o,r,a,h,u,d){this.graph.labelsVisible=null==s||s;var s=mxClient.NO_FO,h=(mxClient.NO_FO=Editor.prototype.originalNoForeignObject,this.graph.shapeBackgroundColor=null!=h?h:Editor.isDarkMode()?"#2a252f":"#f1f3f4",this.graph.view.scaleAndTranslate(null!=d?d:1,0,0),this.graph.addCells(t),this.graph.getGraphBounds()),t=(null==d&&(t=Math.floor(100*Math.min((e-2*this.thumbBorder)/h.width,(n-2*this.thumbBorder)/h.height))/100,this.graph.view.scaleAndTranslate(t,(e-h.width*t)/2/t-h.x,(n-h.height*t)/2/t-h.y)),null);return this.graph.dialect!=mxConstants.DIALECT_SVG||mxClient.NO_FO||null==this.graph.view.getCanvas().ownerSVGElement?(t=this.graph.container.cloneNode(!1)).innerHTML=this.graph.container.innerHTML:t=this.graph.view.getCanvas().ownerSVGElement.cloneNode(!0),this.graph.getModel().clear(),this.graph.view.scaleAndTranslate(1,0,0),this.graph.shapeBackgroundColor=Editor.isDarkMode()?"#2a252f":"#f1f3f4",mxClient.NO_FO=s,t.style.position="relative",t.style.overflow=null!=d?"visible":"hidden",t.style.left=(null!=u?u:this.thumbBorder)+"px",t.style.top=t.style.left,t.style.width=e+"px",t.style.height=n+"px",t.style.visibility="",t.style.minWidth="",t.style.minHeight="",this.disablePointerEvents(t),i.appendChild(t),this.sidebarTitles&&null!=l&&0!=o&&(i.style.height=this.thumbHeight+(u=0)+this.sidebarTitleSize+8+"px",(s=document.createElement("div")).style.color=Editor.isDarkMode()?"#A0A0A0":"#303030",s.style.fontSize=this.sidebarTitleSize+"px",s.style.textAlign="center",s.style.whiteSpace="nowrap",s.style.overflow="hidden",s.style.textOverflow="ellipsis",mxClient.IS_IE&&(s.style.height=this.sidebarTitleSize+12+"px"),s.style.paddingTop="4px",mxUtils.write(s,l),i.appendChild(s)),h},Sidebar.prototype.createSection=function(e){return mxUtils.bind(this,function(){var t=document.createElement("div");return t.setAttribute("title",e),t.style.textOverflow="ellipsis",t.style.whiteSpace="nowrap",t.style.textAlign="center",t.style.overflow="hidden",t.style.width="100%",t.style.padding="14px 0",mxUtils.write(t,e),t})},Sidebar.prototype.createItem=function(e,n,i,t,l,s,o,r,a,h,u,d,p,m){r=null==r||r,h=null!=h?h:this.thumbWidth,u=null!=u?u:this.thumbHeight;var c,g=document.createElement("a"),x=(g.className="geItem",g.style.overflow="hidden",2*this.thumbBorder),y=(g.style.width=h+x+"px",g.style.height=u+x+"px",g.style.padding=this.thumbPadding+"px",mxEvent.addListener(g,"click",function(t){mxEvent.consume(t)}),new mxRectangle(0,0,l,s));return null!=e&&0<e.length?(x=e,e=this.graph.cloneCells(e),this.graph.pasteCellStyles(this.graph.includeDescendants(x),this.initialDefaultVertexStyle,this.initialDefaultEdgeStyle),null!=d?(g.style.backgroundImage="url("+d+")",g.style.backgroundRepeat="no-repeat",g.style.backgroundPosition="center",g.style.backgroundSize="24px 24px"):this.createThumb(x,h,u,g,n,i,t,l,s),1<e.length||e[0].vertex?(c=this.createDragSource(g,this.createDropHandler(e,!0,o,y,p,m),this.createDragPreview(l,s),e,y,p),this.addClickHandler(g,c,e,a,p),c.isGuidesEnabled=mxUtils.bind(this,function(){return this.editorUi.editor.graph.graphHandler.guidesEnabled})):null!=e[0]&&e[0].edge&&(c=this.createDragSource(g,this.createDropHandler(e,!1,o,y,p,m),this.createDragPreview(l,s),e,y,p),this.addClickHandler(g,c,e,a)),!mxClient.IS_IOS&&r&&mxEvent.addGestureListeners(g,null,mxUtils.bind(this,function(t){mxEvent.isMouseEvent(t)&&this.showTooltip(g,e,y.width,y.height,n,i)}))):(g.style.backgroundImage="url("+Editor.svgBrokenImage.src+")",g.setAttribute("title",n)),g},Sidebar.prototype.createDropHandler=function(x,y,C,f,v,E){return C=null==C||C,mxUtils.bind(this,function(t,e,n,i,l,s){for(var o=s?null:mxEvent.isTouchEvent(e)||mxEvent.isPenEvent(e)?document.elementFromPoint(mxEvent.getClientX(e),mxEvent.getClientY(e)):mxEvent.getSource(e);null!=o&&o!=this.container;)o=o.parentNode;if(null==o&&t.isEnabled()){if(0<(x=t.getImportableCells(x)).length){t.stopEditing();var r,a,s=null!=n&&!mxEvent.isAltDown(e)&&t.isValidDropTarget(n,x,e),h=null;if(!t.isCellLocked((n=null==n||s?n:null)||t.getDefaultParent())){t.model.beginUpdate();try{if(i=Math.round(i),l=Math.round(l),y&&t.isSplitTarget(n,x,e)?(p=t.view.scale,m=(i+(d=t.view.translate).x)*p,c=(l+d.y)*p,r=t.cloneCells(x),t.splitEdge(n,r,null,i-f.width/2,l-f.height/2,m,c),h=r):0<x.length&&(h=t.importCells(x,i,l,n),t.model.isVertex(E))&&1==h.length&&t.model.isVertex(h[0])&&(a=t.insertEdge(t.model.getParent(E),null,"",E,h[0],t.createCurrentEdgeStyle()),t.applyNewEdgeStyle(E,[a]),h.push(a),t.connectionHandler.insertBeforeSource)&&t.insertEdgeBeforeCell(a,E),null!=t.layoutManager){var u=t.layoutManager.getLayout(n);if(null!=u)for(var d,p=t.view.scale,m=(i+(d=t.view.translate).x)*p,c=(l+d.y)*p,g=0;g<h.length;g++)u.moveCell(h[g],m,c)}!C||null!=e&&mxEvent.isShiftDown(e)||t.fireEvent(new mxEventObject("cellsInserted","cells",h));for(g=0;g<h.length;g++)t.model.isVertex(h[g])&&t.isAutoSizeCell(h[g])&&t.updateCellSize(h[g])}catch(t){this.editorUi.handleError(t)}finally{t.model.endUpdate()}null!=h&&0<h.length&&(t.scrollCellToVisible(h[0]),t.setSelectionCells(h)),(v||t.editAfterInsert&&null!=e&&mxEvent.isMouseEvent(e)&&null!=h&&1==h.length)&&window.setTimeout(function(){t.startEditing(h[0])},0)}}mxEvent.consume(e)}})},Sidebar.prototype.createDragPreview=function(t,e){var n=document.createElement("div");return n.className="geDragPreview",n.style.width=t+"px",n.style.height=e+"px",n},Sidebar.prototype.dropAndConnect=function(t,e,n,i,l,s,o){var r=this.editorUi.editor.graph,a=r.model.isEdge(t)||null!=s?s:o,a=this.getDropAndConnectGeometry(t,e[a],n,e),h=[];if(null!=a){var u=null;r.model.beginUpdate();try{var d,p=r.getCellGeometry(t),m=r.getCellGeometry(e[i]),c=r.model.getParent(t),g=!0,h=(null!=r.layoutManager&&null!=(d=r.layoutManager.getLayout(c))&&d.constructor==mxStackLayout&&(g=!1),r.model.isEdge(t)?null:r.view.getState(c)),x=0,y=0,C=(null!=h&&(x=(E=h.origin).x,y=E.y),!r.isTableRow(t)&&!r.isTableCell(t)&&(r.model.isEdge(t)||null!=p&&!p.relative&&g)),f=r.getCellAt((a.x+x+r.view.translate.x)*r.view.scale,(a.y+y+r.view.translate.y)*r.view.scale,null,null,null,function(t,e,n){return!r.isContainer(t.cell)});if(null!=f&&f!=c?null!=(h=r.view.getState(f))&&(E=h.origin,c=f,C=!0,r.model.isEdge(t)||(a.x-=E.x-x,a.y-=E.y-y)):g&&!r.isTableRow(t)&&!r.isTableCell(t)||(a.x+=x,a.y+=y),x=m.x,y=m.y,r.model.isEdge(e[i])&&(y=x=0),h=e=r.importCells(e,a.x-(C?x:0),a.y-(C?y:0),C?c:null),r.model.isEdge(t))r.model.setTerminal(t,e[i],n==mxConstants.DIRECTION_NORTH),null!=o&&null!=s&&(r.model.remove(e[o]),r.updateShapes(e[o],[t]));else if(r.model.isEdge(e[i])&&null==s){r.model.setTerminal(e[i],t,!0);var v,E,S=r.getCellGeometry(e[i]),w=null!=S?S.getTerminalPoint(!0):null;if((S.points=null)!=w)for(var b,T,M=0;M<e.length;M++)r.model.isEdge(e[M])&&M!=i&&null!=(T=null!=(b=r.getCellGeometry(e[M]))?b.getTerminalPoint(!0):null)&&T.x==w.x&&T.y==w.y&&r.model.setTerminal(e[M],t,!0);null!=S.getTerminalPoint(!1)?S.setTerminalPoint(a.getTerminalPoint(!1),!1):C&&r.model.isVertex(c)&&(E=(v=r.view.getState(c)).cell!=r.view.currentRoot?v.origin:new mxPoint(0,0),r.cellsMoved(e,E.x,E.y,null,null,!0))}else null!=s&&(m=r.getCellGeometry(e[s]),x=a.x-Math.round(m.x),y=a.y-Math.round(m.y),a.x=Math.round(m.x),a.y=Math.round(m.y),r.model.setGeometry(e[i],a),r.cellsMoved(e,x,y,null,null,!0),h=e.slice(),u=1==h.length?h[0]:null,null!=o?r.model.setTerminal(e[o],t,!0):e.push(r.insertEdge(null,null,"",t,e[i],r.createCurrentEdgeStyle())));null!=l&&mxEvent.isShiftDown(l)||r.fireEvent(new mxEventObject("cellsInserted","cells",e))}catch(t){this.editorUi.handleError(t)}finally{r.model.endUpdate()}r.editAfterInsert&&null!=l&&mxEvent.isMouseEvent(l)&&null!=u&&window.setTimeout(function(){r.startEditing(u)},0)}return null!=o&&1<h.length&&h.splice(o,1),h},Sidebar.prototype.getDropAndConnectGeometry=function(t,e,n,i){var l,s,o=this.editorUi.editor.graph,r=o.view,i=1<i.length,a=o.view.getState(t),h=o.getCellGeometry(t),u=o.getCellGeometry(e);return null!=a&&null!=h&&null!=u&&(u=u.clone(),o.model.isEdge(t)?(l=(t=a.absolutePoints)[0],s=t[t.length-1],n==mxConstants.DIRECTION_NORTH?(u.x=l.x/r.scale-r.translate.x-u.width/2,u.y=l.y/r.scale-r.translate.y-u.height/2):(u.x=s.x/r.scale-r.translate.x-u.width/2,u.y=s.y/r.scale-r.translate.y-u.height/2)):(h.relative&&((h=h.clone()).x=(a.x-r.translate.x)/r.scale,h.y=(a.y-r.translate.y)/r.scale),t=o.defaultEdgeLength,o.model.isEdge(e)&&null!=u.getTerminalPoint(!0)&&null!=u.getTerminalPoint(!1)?(l=u.getTerminalPoint(!0),a=(s=u.getTerminalPoint(!1)).x-l.x,r=s.y-l.y,t=Math.sqrt(a*a+r*r),u.x=h.getCenterX(),u.y=h.getCenterY(),u.width=1,u.height=1,n==mxConstants.DIRECTION_NORTH?(u.height=t,u.y=h.y-t,u.setTerminalPoint(new mxPoint(u.x,u.y),!1)):n==mxConstants.DIRECTION_EAST?(u.width=t,u.x=h.x+h.width,u.setTerminalPoint(new mxPoint(u.x+u.width,u.y),!1)):n==mxConstants.DIRECTION_SOUTH?(u.height=t,u.y=h.y+h.height,u.setTerminalPoint(new mxPoint(u.x,u.y+u.height),!1)):n==mxConstants.DIRECTION_WEST&&(u.width=t,u.x=h.x-t,u.setTerminalPoint(new mxPoint(u.x,u.y),!1))):(!i&&45<u.width&&45<u.height&&45<h.width&&45<h.height&&(u.width=u.width*(h.height/u.height),u.height=h.height),u.x=h.x+h.width/2-u.width/2,u.y=h.y+h.height/2-u.height/2,n==mxConstants.DIRECTION_NORTH?u.y=u.y-h.height/2-u.height/2-t:n==mxConstants.DIRECTION_EAST?u.x=u.x+h.width/2+u.width/2+t:n==mxConstants.DIRECTION_SOUTH?u.y=u.y+h.height/2+u.height/2+t:n==mxConstants.DIRECTION_WEST&&(u.x=u.x-h.width/2-u.width/2-t),o.model.isEdge(e)&&null!=u.getTerminalPoint(!0)&&null!=e.getTerminal(!1)&&null!=(s=o.getCellGeometry(e.getTerminal(!1)))&&(n==mxConstants.DIRECTION_NORTH?(u.x-=s.getCenterX(),u.y-=s.getCenterY()+s.height/2):n==mxConstants.DIRECTION_EAST?(u.x-=s.getCenterX()-s.width/2,u.y-=s.getCenterY()):n==mxConstants.DIRECTION_SOUTH?(u.x-=s.getCenterX(),u.y-=s.getCenterY()-s.height/2):n==mxConstants.DIRECTION_WEST&&(u.x-=s.getCenterX()+s.width/2,u.y-=s.getCenterY()))))),u},Sidebar.prototype.isDropStyleEnabled=function(t,e){var n=!0;return n=null!=e&&1==t.length&&null!=(t=this.graph.getCellStyle(t[e]))?mxUtils.getValue(t,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE)!=mxConstants.NONE||mxUtils.getValue(t,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE)!=mxConstants.NONE:n},Sidebar.prototype.isDropStyleTargetIgnored=function(t){return this.graph.isSwimlane(t.cell)||this.graph.isTableCell(t.cell)||this.graph.isTableRow(t.cell)||this.graph.isTable(t.cell)},Sidebar.prototype.disablePointerEvents=function(t){mxUtils.visitNodes(t,mxUtils.bind(this,function(t){t.nodeType==mxConstants.NODETYPE_ELEMENT&&(t.style.pointerEvents="none",t.removeAttribute("pointer-events"))}))},Sidebar.prototype.createDragSource=function(t,o,e,g,u,h){for(var i=this,d=this.editorUi,l=d.editor.graph,p=null,x=null,m=this,n=0,s=this.livePreview,r=0;r<g.length&&s;r++)s=(n+=l.model.getDescendants(g[r]).length)<l.graphHandler.maxLivePreview;for(r=0;r<g.length&&(null==x&&l.model.isVertex(g[r])?x=r:null==p&&l.model.isEdge(g[r])&&null==l.model.getTerminal(g[r],!0)&&(p=r),null==x||null==p);r++);var y=this.isDropStyleEnabled(g,x),C=mxUtils.makeDraggable(t,l,mxUtils.bind(this,function(t,e,n,i,l){var s;null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=g&&null!=E&&R==L?(s=t.isCellSelected(E.cell)?t.getSelectionCells():[E.cell],t.updateShapes(t.model.isEdge(E.cell)?g[0]:g[x],s,!0),t.setSelectionCells(s)):null!=g&&null!=R&&null!=f&&R!=L?(s=t.model.isEdge(f.cell)||null==p?x:p,t.setSelectionCells(this.dropAndConnect(f.cell,g,N,s,e,x,p))):o.apply(this,arguments),null!=this.editorUi.hoverIcons&&this.editorUi.hoverIcons.update(t.view.getState(t.getSelectionCell()))}),e,0,0,l.autoscroll,!0,!0),c=(s&&(C.createDragElement=mxUtils.bind(this,function(){return C.createPreviewElement(this.graph)}),C.createPreviewElement=mxUtils.bind(this,function(t){var e=document.createElement("a"),t=(e.className="geItem",e.style.overflow="visible",t.view.scale),n=(e.style.width=t*Math.max(1,u.width)+"px",e.style.height=t*Math.max(1,u.height)+"px",mxUtils.setOpacity(e,50),l.cloneCells(g));return this.graph.pasteCellStyles(l.includeDescendants(n),l.currentVertexStyle,l.currentEdgeStyle,null,l.pasteEdgeStyle),m.createThumb(n,t*Math.max(1,u.width),t*Math.max(1,u.height),e,null,null,null,null,null,l.shapeBackgroundColor,0,t),e})),C.mouseDown);function a(t,e){var n=null;return(n=mxUtils.createImage(t.src)).style.width=t.width+"px",n.style.height=t.height+"px",null!=e&&n.setAttribute("title",e),mxUtils.setOpacity(n,t==i.refreshTarget?30:20),n.style.position="absolute",n.style.cursor="crosshair",n}C.mouseDown=function(t){mxEvent.isPopupTrigger(t)||mxEvent.isMultiTouchEvent(t)||l.isCellLocked(l.getDefaultParent())||(l.stopEditing(),c.apply(this,arguments))};var f=null,v=null,E=null,S=!1,w=a(this.triangleUp,mxResources.get("connect")),b=a(this.triangleRight,mxResources.get("connect")),T=a(this.triangleDown,mxResources.get("connect")),M=a(this.triangleLeft,mxResources.get("connect")),L=a(this.refreshTarget,mxResources.get("replace")),I=null,A=a(this.roundDrop),P=a(this.roundDrop),N=mxConstants.DIRECTION_NORTH,R=null;function D(t,e,n,i){return null!=i.parentNode&&(mxUtils.contains(n,t,e)?(mxUtils.setOpacity(i,100),R=i):mxUtils.setOpacity(i,i==L?30:20)),n}var _=C.createPreviewElement,k=(C.createPreviewElement=function(t){var e=_.apply(this,arguments);return mxClient.IS_SVG&&(e.style.pointerEvents="none"),this.previewElementWidth=e.style.width,this.previewElementHeight=e.style.height,e},C.dragEnter),V=(C.dragEnter=function(t,e){null!=d.hoverIcons&&d.hoverIcons.setDisplay("none"),k.apply(this,arguments)},C.dragExit),O=(C.dragExit=function(t,e){null!=d.hoverIcons&&d.hoverIcons.setDisplay(""),V.apply(this,arguments)},C.dragOver=function(t,e){var n,i,l,s,o,r,a,h;mxDragSource.prototype.dragOver.apply(this,arguments),null!=this.currentGuide&&null!=R&&this.currentGuide.hide(),null!=this.previewElement&&(d.hideShapePicker(),n=t.view,null!=E&&R==L?this.previewElement.style.display="none":null!=f&&null!=R?(null!=C.currentHighlight&&null!=C.currentHighlight.state&&C.currentHighlight.hide(),i=t.model.isEdge(f.cell)||null!=x?x:p,l=m.getDropAndConnectGeometry(f.cell,g[i],N,g),h=t.model.isEdge(f.cell)?null:t.getCellGeometry(f.cell),s=t.getCellGeometry(g[i]),a=t.model.getParent(f.cell),o=n.translate.x*n.scale,r=n.translate.y*n.scale,null!=h&&!h.relative&&t.model.isVertex(a)&&a!=n.currentRoot&&(o=(h=n.getState(a)).x,r=h.y),a=s.x,h=s.y,t.model.isEdge(g[i])&&(h=a=0),this.previewElement.style.left=(l.x-a)*n.scale+o+"px",this.previewElement.style.top=(l.y-h)*n.scale+r+"px",1==g.length&&(this.previewElement.style.width=l.width*n.scale+"px",this.previewElement.style.height=l.height*n.scale+"px",null!=this.previewElement.firstChild)&&(this.previewElement.firstChild.style.display="none",this.previewElement.className="geDragPreview",mxUtils.setOpacity(this.previewElement,100)),this.previewElement.style.display=""):null!=C.currentHighlight&&null!=C.currentHighlight.state&&t.model.isEdge(C.currentHighlight.state.cell)?(this.previewElement.style.left=Math.round(parseInt(this.previewElement.style.left)-u.width*n.scale/2)+"px",this.previewElement.style.top=Math.round(parseInt(this.previewElement.style.top)-u.height*n.scale/2)+"px"):(this.previewElement.style.width=this.previewElementWidth,this.previewElement.style.height=this.previewElementHeight,this.previewElement.style.display="",null!=this.previewElement.firstChild&&(this.previewElement.firstChild.style.display="",mxUtils.setOpacity(this.previewElement,50),this.previewElement.className="")))},(new Date).getTime()),H=0,U=null,G=this.editorUi.editor.graph.getCellStyle(g[0]),F=(C.getDropTarget=mxUtils.bind(this,function(i,t,e,n){var l=mxEvent.isAltDown(n)||null==g?null:i.getCellAt(t,e,null,null,null,function(t,e,n){return i.isContainer(t.cell)&&"0"!=mxUtils.getValue(t.style,"dropTarget","1")}),s=(null==l||this.graph.isCellConnectable(l)||this.graph.model.isEdge(l)||(o=this.graph.getModel().getParent(l),this.graph.getModel().isVertex(o)&&this.graph.isCellConnectable(o)&&(l=o)),i.isCellLocked(l)&&(l=null),i.view.getState(l)),o=R=null,r=(U!=s?(O=(new Date).getTime(),H=0,U=s,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=s&&(this.updateThread=window.setTimeout(function(){null==R&&(U=s,C.getDropTarget(i,t,e,n))},this.dropTargetDelay+10))):H=(new Date).getTime()-O,y&&H<2500&&null!=s&&!mxEvent.isShiftDown(n)&&(mxUtils.getValue(s.style,mxConstants.STYLE_SHAPE)!=mxUtils.getValue(G,mxConstants.STYLE_SHAPE)&&(mxUtils.getValue(s.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE)!=mxConstants.NONE||mxUtils.getValue(s.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE)!=mxConstants.NONE||mxUtils.getValue(s.style,mxConstants.STYLE_GRADIENTCOLOR,mxConstants.NONE)!=mxConstants.NONE)||"image"==mxUtils.getValue(G,mxConstants.STYLE_SHAPE)||1500<H||i.model.isEdge(s.cell))&&H>this.dropTargetDelay&&!this.isDropStyleTargetIgnored(s)&&(i.model.isVertex(s.cell)&&null!=x||i.model.isEdge(s.cell)&&i.model.isEdge(g[0]))?i.isCellEditable(s.cell)&&(E=s,r=new mxRectangle((r=i.model.isEdge(s.cell)?i.view.getPoint(s):new mxPoint(s.getCenterX(),s.getCenterY())).x-this.refreshTarget.width/2,r.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),L.style.left=Math.floor(r.x)+"px",L.style.top=Math.floor(r.y)+"px",null==I&&(i.container.appendChild(L),I=L.parentNode),D(t,e,r,L)):null==E||!mxUtils.contains(E,t,e)||1500<H&&!mxEvent.isShiftDown(n)?(E=null)!=I&&(L.parentNode.removeChild(L),I=null):null!=E&&null!=I&&(r=new mxRectangle((r=i.model.isEdge(E.cell)?i.view.getPoint(E):new mxPoint(E.getCenterX(),E.getCenterY())).x-this.refreshTarget.width/2,r.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),D(t,e,r,L)),S&&null!=f&&!mxEvent.isAltDown(n)&&null==R&&(o=mxRectangle.fromRectangle(f),i.model.isEdge(f.cell)?(a=f.absolutePoints,null!=A.parentNode&&(h=a[0],o.add(D(t,e,new mxRectangle(h.x-this.roundDrop.width/2,h.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),A))),null!=P.parentNode&&(u=a[a.length-1],o.add(D(t,e,new mxRectangle(u.x-this.roundDrop.width/2,u.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),P)))):(d=mxRectangle.fromRectangle(f),(d=null!=f.shape&&null!=f.shape.boundingBox?mxRectangle.fromRectangle(f.shape.boundingBox):d).grow(this.graph.tolerance),d.grow(HoverIcons.prototype.arrowSpacing),null!=(p=this.graph.selectionCellsHandler.getHandler(f.cell))&&(d.x-=p.horizontalOffset/2,d.y-=p.verticalOffset/2,d.width+=p.horizontalOffset,d.height+=p.verticalOffset,null!=p.rotationShape)&&null!=p.rotationShape.node&&"hidden"!=p.rotationShape.node.style.visibility&&"none"!=p.rotationShape.node.style.display&&null!=p.rotationShape.boundingBox&&d.add(p.rotationShape.boundingBox),o.add(D(t,e,new mxRectangle(f.getCenterX()-this.triangleUp.width/2,d.y-this.triangleUp.height,this.triangleUp.width,this.triangleUp.height),w)),o.add(D(t,e,new mxRectangle(d.x+d.width,f.getCenterY()-this.triangleRight.height/2,this.triangleRight.width,this.triangleRight.height),b)),o.add(D(t,e,new mxRectangle(f.getCenterX()-this.triangleDown.width/2,d.y+d.height,this.triangleDown.width,this.triangleDown.height),T)),o.add(D(t,e,new mxRectangle(d.x-this.triangleLeft.width,f.getCenterY()-this.triangleLeft.height/2,this.triangleLeft.width,this.triangleLeft.height),M))),null!=o)&&o.grow(10),N=mxConstants.DIRECTION_NORTH,R==b?N=mxConstants.DIRECTION_EAST:R==T||R==P?N=mxConstants.DIRECTION_SOUTH:R==M&&(N=mxConstants.DIRECTION_WEST),null!=E&&R==L&&(s=E),(null==x||i.isCellConnectable(g[x]))&&(i.model.isEdge(l)&&null!=x||i.model.isVertex(l)&&i.isCellConnectable(l)));if(null!=f&&5e3<=H||f!=s&&(null==o||!mxUtils.contains(o,t,e)||500<H&&null==R&&r))if(S=!1,null!=(f=H<5e3&&H>this.dropTargetDelay||i.model.isEdge(l)?s:null)&&r){for(var a,h,u,d,p,m=[A,P,w,b,T,M],c=0;c<m.length;c++)null!=m[c].parentNode&&m[c].parentNode.removeChild(m[c]);i.model.isEdge(l)?null!=(a=s.absolutePoints)&&(h=a[0],u=a[a.length-1],A.style.left=Math.floor(h.x-this.roundDrop.width/2)+"px",A.style.top=Math.floor(h.y-this.roundDrop.height/2)+"px",P.style.left=Math.floor(u.x-this.roundDrop.width/2)+"px",P.style.top=Math.floor(u.y-this.roundDrop.height/2)+"px",null==i.model.getTerminal(l,!0)&&i.container.appendChild(A),null==i.model.getTerminal(l,!1))&&i.container.appendChild(P):(d=mxRectangle.fromRectangle(s),(d=null!=s.shape&&null!=s.shape.boundingBox?mxRectangle.fromRectangle(s.shape.boundingBox):d).grow(this.graph.tolerance),d.grow(HoverIcons.prototype.arrowSpacing),null!=(p=this.graph.selectionCellsHandler.getHandler(s.cell))&&(d.x-=p.horizontalOffset/2,d.y-=p.verticalOffset/2,d.width+=p.horizontalOffset,d.height+=p.verticalOffset,null!=p.rotationShape)&&null!=p.rotationShape.node&&"hidden"!=p.rotationShape.node.style.visibility&&"none"!=p.rotationShape.node.style.display&&null!=p.rotationShape.boundingBox&&d.add(p.rotationShape.boundingBox),w.style.left=Math.floor(s.getCenterX()-this.triangleUp.width/2)+"px",w.style.top=Math.floor(d.y-this.triangleUp.height)+"px",b.style.left=Math.floor(d.x+d.width)+"px",b.style.top=Math.floor(s.getCenterY()-this.triangleRight.height/2)+"px",T.style.left=w.style.left,T.style.top=Math.floor(d.y+d.height)+"px",M.style.left=Math.floor(d.x-this.triangleLeft.width)+"px",M.style.top=b.style.top,"eastwest"!=s.style.portConstraint&&(i.container.appendChild(w),i.container.appendChild(T)),i.container.appendChild(b),i.container.appendChild(M)),null!=s&&null!=(v=i.selectionCellsHandler.getHandler(s.cell))&&null!=v.setHandlesVisible&&v.setHandlesVisible(!1),S=!0}else for(m=[A,P,w,b,T,M],c=0;c<m.length;c++)null!=m[c].parentNode&&m[c].parentNode.removeChild(m[c]);S||null==v||v.setHandlesVisible(!0);o=mxEvent.isAltDown(n)&&!mxEvent.isShiftDown(n)||null!=E&&R==L?null:mxDragSource.prototype.getDropTarget.apply(this,arguments);return o=null==o||null==R&&i.isSplitTarget(o,g,n)?o:i.getDropTarget(g,n,o,!0)}),C.startDrag),z=(C.startDrag=function(t){m.activeDragSource=this,F.apply(this,arguments)},C.stopDrag);return C.stopDrag=function(){z.apply(this,arguments);for(var t=[A,P,L,w,b,T,M],e=0;e<t.length;e++)null!=t[e].parentNode&&t[e].parentNode.removeChild(t[e]);null!=f&&null!=v&&v.reset(),m.activeDragSource=null,R=I=E=f=v=null},C},Sidebar.prototype.itemClicked=function(t,e,n,i){var l,s=this.editorUi.editor.graph;if(s.container.focus(),mxEvent.isAltDown(n)&&1==s.getSelectionCount()&&s.model.isVertex(s.getSelectionCell())){for(var o=null,r=0;r<t.length&&null==o;r++)s.model.isVertex(t[r])&&(o=r);null!=o&&(s.setSelectionCells(this.dropAndConnect(s.getSelectionCell(),t,mxEvent.isMetaDown(n)||mxEvent.isControlDown(n)?mxEvent.isShiftDown(n)?mxConstants.DIRECTION_WEST:mxConstants.DIRECTION_NORTH:mxEvent.isShiftDown(n)?mxConstants.DIRECTION_EAST:mxConstants.DIRECTION_SOUTH,o,n)),s.scrollCellToVisible(s.getSelectionCell()))}else mxEvent.isShiftDown(n)&&!s.isSelectionEmpty()?(l=s.getEditableCells(s.getSelectionCells()),s.updateShapes(t[0],l,!0),s.scrollCellToVisible(l)):(l=mxEvent.isAltDown(n)?s.getFreeInsertPoint():s.getCenterInsertPoint(s.getBoundingBoxFromGeometry(t,!0)),e.drop(s,n,null,l.x,l.y,!0))},Sidebar.prototype.addClickHandler=function(e,n,i,l){var t=this.editorUi.editor.graph,s=n.getGraphForEvent,o=n.mouseDown,r=n.mouseMove,a=n.mouseUp,h=t.tolerance,u=!1,d=null,p=this,m=null;n.getGraphForEvent=function(t){return u?s.apply(this,arguments):null},n.mouseDown=function(t){o.apply(this,arguments),d=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),m=e.style.opacity,u=!1,""==m&&(m="1"),null!=this.dragElement&&(this.dragElement.style.display="none",mxUtils.setOpacity(e,50))},n.mouseMove=function(t){(u=null!=d&&(Math.abs(d.x-mxEvent.getClientX(t))>h||Math.abs(d.y-mxEvent.getClientY(t))>h))&&null!=this.dragElement&&"none"==this.dragElement.style.display&&(this.dragElement.style.display="",mxUtils.setOpacity(e,100*m)),r.apply(this,arguments)},n.mouseUp=function(t){try{mxEvent.isPopupTrigger(t)||null!=this.currentGraph||null==this.dragElement||"none"!=this.dragElement.style.display||(null!=l&&l(t),mxEvent.isConsumed(t))||p.itemClicked(i,n,t,e),a.apply(n,arguments),mxUtils.setOpacity(e,100*m),d=null,p.currentElt=e}catch(t){n.reset(),p.editorUi.handleError(t)}}},Sidebar.prototype.createVertexTemplateEntry=function(t,e,n,i,l,s,o,r){return null!=r&&null!=l&&(r+=" "+l),r=null!=r&&0<r.length?r:null!=l?l.toLowerCase():"",this.addEntry(r,mxUtils.bind(this,function(){return this.createVertexTemplate(t,e,n,i,l,s,o)}))},Sidebar.prototype.createVertexTemplate=function(t,e,n,i,l,s,o,r,a,h,u,d,p,m){i=[new mxCell(null!=i?i:"",new mxGeometry(0,0,e,n),t)];return i[0].vertex=!0,this.createVertexTemplateFromCells(i,e,n,l,s,o,r,a,h,u,d,p,m)},Sidebar.prototype.createVertexTemplateFromData=function(t,e,n,i,l,s,o,r){var a=null;try{var h=mxUtils.parseXml(Graph.decompress(t)),u=new mxCodec(h),d=new mxGraphModel;u.decode(h.documentElement,d),a=this.graph.cloneCells(d.root.getChildAt(0).children)}catch(t){i=mxResources.get("error")+": "+t.message}return this.createVertexTemplateFromCells(a,e,n,i,l,s,o,r)},Sidebar.prototype.createVertexTemplateFromCells=function(t,e,n,i,l,s,o,r,a,h,u,d,p,m){return this.createItem(t,i,l,s,e,n,o,r,a,h,u,d,p,m)},Sidebar.prototype.createEdgeTemplateEntry=function(t,e,n,i,l,s,o,r,a){return o=null!=o&&0<o.length?o:l.toLowerCase(),this.addEntry(o,mxUtils.bind(this,function(){return this.createEdgeTemplate(t,e,n,i,l,s,r,a)}))},Sidebar.prototype.createEdgeTemplate=function(t,e,n,i,l,s,o,r){i=new mxCell(null!=i?i:"",new mxGeometry(0,0,e,n),t);return i.geometry.setTerminalPoint(new mxPoint(0,n),!0),i.geometry.setTerminalPoint(new mxPoint(e,0),!1),i.geometry.relative=!0,i.edge=!0,this.createEdgeTemplateFromCells([i],e,n,l,s,o,r)},Sidebar.prototype.createEdgeTemplateFromCells=function(t,e,n,i,l,s,o,r,a,h,u,d){return this.createItem(t,i,l,null==r||r,e,n,s,o,a,h,u,d)},Sidebar.prototype.addPaletteFunctions=function(t,e,n,i){this.addPalette(t,e,n,mxUtils.bind(this,function(t){for(var e=0;e<i.length;e++)t.appendChild(i[e](t))}))},Sidebar.prototype.addPalette=function(t,e,n,i){var e=this.createTitle(e),l=(this.appendChild(e),document.createElement("div")),n=(l.className="geSidebar",mxClient.IS_POINTER&&(l.style.touchAction="none"),n&&this.expandLibraries?(i(l),i=null):l.style.display="none",this.addFoldingHandler(e,l,i),document.createElement("div"));return n.appendChild(l),this.appendChild(n),null!=t&&(this.palettes[t]=[e,n]),l},Sidebar.prototype.addFoldingHandler=function(i,l,s){var o=!1;(!mxClient.IS_IE||8<=document.documentMode)&&(i.style.backgroundImage="none"==l.style.display?"url('"+this.collapsedImage+"')":"url('"+this.expandedImage+"')"),i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition="4px 50%",mxEvent.addListener(i,"click",mxUtils.bind(this,function(t){if(i.contains(mxEvent.getSource(t))){if("none"==l.style.display){if(o)this.setContentVisible(l,!0);else if(o=!0,null!=s){i.style.cursor="wait";for(var n=[],e=0;e<i.children.length;e++)n.push(i.children[e]);i.innerHTML=mxResources.get("loading")+"...",window.setTimeout(mxUtils.bind(this,function(){this.setContentVisible(l,!0),i.style.cursor="",i.innerHTML="";for(var t=0;t<n.length;t++)i.appendChild(n[t]);var e=mxClient.NO_FO;mxClient.NO_FO=Editor.prototype.originalNoForeignObject,s(l,i),mxClient.NO_FO=e}),mxClient.IS_FF?20:0)}else this.setContentVisible(l,!0);i.style.backgroundImage="url('"+this.expandedImage+"')"}else i.style.backgroundImage="url('"+this.collapsedImage+"')",this.setContentVisible(l,!1);mxEvent.consume(t)}})),mxEvent.addListener(i,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()}))},Sidebar.prototype.setContentVisible=function(t,e){mxUtils.setPrefixedStyle(t.style,"transition","all 0.2s linear"),mxUtils.setPrefixedStyle(t.style,"transform-origin","top left"),e?(mxUtils.setPrefixedStyle(t.style,"transform","scaleY(0)"),t.style.display="block",window.setTimeout(mxUtils.bind(this,function(){mxUtils.setPrefixedStyle(t.style,"transform","scaleY(1)"),window.setTimeout(mxUtils.bind(this,function(){mxUtils.setPrefixedStyle(t.style,"transform",null),mxUtils.setPrefixedStyle(t.style,"transition",null)}),200)}),0)):(mxUtils.setPrefixedStyle(t.style,"transform","scaleY(0)"),window.setTimeout(mxUtils.bind(this,function(){mxUtils.setPrefixedStyle(t.style,"transform",null),mxUtils.setPrefixedStyle(t.style,"transition",null),t.style.display="none"}),200))},Sidebar.prototype.removePalette=function(t){var e=this.palettes[t];if(null==e)return!1;this.palettes[t]=null;for(var n=0;n<e.length;n++)this.container.removeChild(e[n]);return!0},Sidebar.prototype.addImagePalette=function(t,e,s,o,n,i,l){for(var r=[],a=0;a<n.length;a++)mxUtils.bind(this,function(t,e,n){var i,l;null!=n||null!=s&&"img/lib/clip_art/"==s.substring(0,17)||(i=t.lastIndexOf("/"),l=t.lastIndexOf("."),n=t.substring(0<=i?i+1:0,0<=l?l:t.length).replace(/[-_]/g," ")),r.push(this.createVertexTemplateEntry("image;html=1;image="+s+t+o,this.defaultImageWidth,this.defaultImageHeight,"",e,null!=e,null,this.filterTags(n)))})(n[a],null!=i?i[a]:null,null!=l?l[n[a]]:null);this.addPaletteFunctions(t,e,!1,r)},Sidebar.prototype.getTagsForStencil=function(t,e,n){for(var i=t.split("."),l=1;l<i.length;l++)i[l]=i[l].replace(/_/g," ");return i.push(e.replace(/_/g," ")),null!=n&&i.push(n),i.slice(1,i.length)},Sidebar.prototype.addStencilPalette=function(t,e,n,r,a,i,h,u,l,s){if(h=null!=h?h:1,this.addStencilsToIndex){var d=[];if(null!=l)for(var o=0;o<l.length;o++)d.push(l[o]);mxStencilRegistry.loadStencilSet(n,mxUtils.bind(this,function(t,e,n,i,l){var s,o;(null==a||mxUtils.indexOf(a,e)<0)&&(s=this.getTagsForStencil(t,e),null!=(o=null!=u?u[e]:null)&&s.push(o),d.push(this.createVertexTemplateEntry("shape="+t+e.toLowerCase()+r,Math.round(i*h),Math.round(l*h),"",e.replace(/_/g," "),null,null,this.filterTags(s.join(" ")))))}),!0,!0),this.addPaletteFunctions(t,e,!1,d)}else this.addPalette(t,e,!1,mxUtils.bind(this,function(s){if(null==r&&(r=""),null!=i&&i.call(this,s),null!=l)for(var t=0;t<l.length;t++)l[t](s);mxStencilRegistry.loadStencilSet(n,mxUtils.bind(this,function(t,e,n,i,l){(null==a||mxUtils.indexOf(a,e)<0)&&s.appendChild(this.createVertexTemplate("shape="+t+e.toLowerCase()+r,Math.round(i*h),Math.round(l*h),"",e.replace(/_/g," "),!0))}),!0)}))},Sidebar.prototype.destroy=function(){null!=this.graph&&(null!=this.graph.container&&null!=this.graph.container.parentNode&&this.graph.container.parentNode.removeChild(this.graph.container),this.graph.destroy(),this.graph=null),null!=this.escapeListener&&(this.editorUi.editor.graph.removeListener(this.escapeListener),this.escapeListener=null),null!=this.pointerUpHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerUpHandler=null),null!=this.pointerDownHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerDownHandler=null),null!=this.pointerMoveHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerMoveHandler=null),null!=this.pointerOutHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),this.pointerOutHandler=null)},__mxOutput.Sidebar=void 0!==Sidebar?Sidebar:void 0,!function(){var n=[["nbsp","160"],["shy","173"]],i=mxUtils.parseXml,l=(mxUtils.parseXml=function(t){for(var e=0;e<n.length;e++)t=t.replace(new RegExp("&"+n[e][0]+";","g"),"&#"+n[e][1]+";");return i(t)},mxUtils.getSizeForString);mxUtils.getSizeForString=function(t,e,n,i){return l(Graph.sanitizeHtml(t),e,n,i)}}(),Date.prototype.toISOString||!function(){function t(t){t=String(t);return t=1===t.length?"0"+t:t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),Date.now||(Date.now=function(){return(new Date).getTime()}),Uint8Array.from||(Uint8Array.from=function(){function a(t){return"function"==typeof t||"[object Function]"===e.call(t)}var e=Object.prototype.toString,h=function(t){t=Number(t);return isNaN(t)?0:0!==t&&isFinite(t)?(0<t?1:-1)*Math.floor(Math.abs(t)):t},u=Math.pow(2,53)-1;return function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,i=1<arguments.length?arguments[1]:void 0;if(void 0!==i){if(!a(i))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=arguments[2])}for(var l,s=function(t){t=h(t);return Math.min(Math.max(t,0),u)}(e.length),o=a(this)?Object(new this(s)):new Array(s),r=0;r<s;)l=e[r],o[r]=i?void 0===n?i(l,r):i.call(n,l,r):l,r+=1;return o.length=s,o}}()),mxConstants.SHADOW_OPACITY=.25,mxConstants.SHADOWCOLOR="#000000",mxConstants.VML_SHADOWCOLOR="#d0d0d0",mxCodec.allowlist=["mxStylesheet","Array","mxGraphModel","mxCell","mxGeometry","mxRectangle","mxPoint","mxChildChange","mxRootChange","mxTerminalChange","mxValueChange","mxStyleChange","mxGeometryChange","mxCollapseChange","mxVisibleChange","mxCellAttributeChange"],mxGraph.prototype.pageBreakColor="#c0c0c0",mxGraph.prototype.pageScale=1,!function(){try{var t;null!=navigator&&null!=navigator.language&&(t=navigator.language.toLowerCase(),mxGraph.prototype.pageFormat="en-us"===t||"en-ca"===t||"es-mx"===t?mxConstants.PAGE_FORMAT_LETTER_PORTRAIT:mxConstants.PAGE_FORMAT_A4_PORTRAIT)}catch(t){}}(),mxText.prototype.baseSpacingTop=5,mxText.prototype.baseSpacingBottom=1,mxGraphModel.prototype.ignoreRelativeEdgeParent=!1,mxGraphView.prototype.gridImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=":IMAGE_PATH+"/grid.gif",mxGraphView.prototype.gridSteps=4,mxGraphView.prototype.minGridSize=4,mxGraphView.prototype.defaultGridColor="#d0d0d0",mxGraphView.prototype.defaultDarkGridColor="#424242",mxGraphView.prototype.gridColor=mxGraphView.prototype.defaultGridColor,mxGraphView.prototype.unit=mxConstants.POINTS,mxGraphView.prototype.setUnit=function(t){this.unit!=t&&(this.unit=t,this.fireEvent(new mxEventObject("unitChanged","unit",t)))},mxSvgCanvas2D.prototype.foAltText="[Not supported by viewer]",mxShape.prototype.getConstraints=function(t,e,n){return null},mxImageShape.prototype.getImageDataUri=function(){var t=String(this.image);return"data:image/svg+xml;base64,"==t.substring(0,26)&&null!=this.style&&"1"==mxUtils.getValue(this.style,"clipSvg","0")&&(null!=this.clippedSvg&&this.clippedImage==t||(this.clippedSvg=Graph.clipSvgDataUri(t,!0),this.clippedImage=t),t=this.clippedSvg),t},!function(){var i=mxResources.get;mxResources.get=function(t,e,n){return i.apply(this,[t,e,n=null==n?t:n])}}();let Graph=function(t,e,n,i,l,s){mxGraph.call(this,t,e,n,i),this.themes=l||this.defaultThemes,this.currentEdgeStyle=mxUtils.clone(this.defaultEdgeStyle),this.currentVertexStyle=mxUtils.clone(this.defaultVertexStyle),this.standalone=null!=s&&s;var y,m,d,o,r,a,h,u,p,c,g,x,C,f,v,E,S,w,b,T,t=this.baseUrl,e=t.indexOf("//");this.domainUrl="",this.domainPathUrl="",0<e&&(0<(n=t.indexOf("/",e+2))&&(this.domainUrl=t.substring(0,n)),0<(n=t.lastIndexOf("/")))&&(this.domainPathUrl=t.substring(0,n+1)),this.isHtmlLabel=function(t){t=this.getCurrentCellStyle(t);return null!=t&&("1"==t.html||"wrap"==t[mxConstants.STYLE_WHITE_SPACE])},this.immediateHandling&&(m=!(y={point:null,event:null,state:null,handle:null,selected:!1}),this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(t,e){if("mouseDown"==e.getProperty("eventName")&&this.isEnabled()){var n=e.getProperty("event"),e=n.getState(),i=this.view.scale;if(!mxEvent.isAltDown(n.getEvent())&&null!=e&&(m=this.isCellSelected(e.cell),!this.panningHandler.isActive())&&!mxEvent.isControlDown(n.getEvent())){var l=this.selectionCellsHandler.getHandler(e.cell);if(null==l||null==l.getHandleForEvent(n))for(var s,o,r,a,h=new mxRectangle(n.getGraphX()-1,n.getGraphY()-1),u=mxEvent.isTouchEvent(n.getEvent())?mxShape.prototype.svgStrokeTolerance-1:(mxShape.prototype.svgStrokeTolerance+2)/2,d=2+u,p=(h.grow(u),!this.isTableCell(e.cell)||!this.isCellMovable(e.cell)||this.isCellSelected(e.cell)||mxUtils.contains(e,n.getGraphX()-d,n.getGraphY()-d)&&mxUtils.contains(e,n.getGraphX()-d,n.getGraphY()+d)&&mxUtils.contains(e,n.getGraphX()+d,n.getGraphY()+d)&&mxUtils.contains(e,n.getGraphX()+d,n.getGraphY()-d)||(d=this.model.getParent(e.cell),s=this.model.getParent(d),this.isCellSelected(s))||(o=2*(u=u*i),(this.model.getChildAt(s,0)!=d&&mxUtils.intersects(h,new mxRectangle(e.x,e.y-u,e.width,o))||this.model.getChildAt(d,0)!=e.cell&&mxUtils.intersects(h,new mxRectangle(e.x-u,e.y,o,e.height))||mxUtils.intersects(h,new mxRectangle(e.x,e.y+e.height-u,e.width,o))||mxUtils.intersects(h,new mxRectangle(e.x+e.width-u,e.y,o,e.height)))&&(d=this.selectionCellsHandler.isHandled(s),this.selectCellForEvent(s,n.getEvent()),null!=(l=this.selectionCellsHandler.getHandler(s)))&&null!=(a=l.getHandleForEvent(n))&&(l.start(n.getGraphX(),n.getGraphY(),a),l.blockDelayedSelection=!d,n.consume())),e);!n.isConsumed()&&null!=p&&(this.isTableCell(p.cell)||this.isTableRow(p.cell)||this.isTable(p.cell));)this.isSwimlane(p.cell)&&this.isCellMovable(p.cell)&&((0<(r=this.getActualStartSize(p.cell)).x||0<r.width)&&mxUtils.intersects(h,new mxRectangle(p.x+(r.x-r.width-1)*i+(0==r.x?p.width:0),p.y,1,p.height))||(0<r.y||0<r.height)&&mxUtils.intersects(h,new mxRectangle(p.x,p.y+(r.y-r.height-1)*i+(0==r.y?p.height:0),p.width,1)))&&(this.selectCellForEvent(p.cell,n.getEvent()),null!=(l=this.selectionCellsHandler.getHandler(p.cell)))&&null!=l.customHandles&&(a=mxEvent.CUSTOM_HANDLE-l.customHandles.length+1,l.start(n.getGraphX(),n.getGraphY(),a),n.consume()),p=this.view.getState(this.model.getParent(p.cell))}}})),this.addListener(mxEvent.CONSUME_MOUSE_EVENT,mxUtils.bind(this,function(t,e){var n,i;"mouseDown"==e.getProperty("eventName")&&this.isEnabled()&&(i=(n=e.getProperty("event")).getState(),mxEvent.isAltDown(n.getEvent())||mxEvent.isControlDown(e)||mxEvent.isShiftDown(e)||m||null==i||!this.model.isEdge(i.cell)||(y.point=new mxPoint(n.getGraphX(),n.getGraphY()),y.selected=this.isCellSelected(i.cell),y.state=i,y.event=n,null!=i.text&&null!=i.text.boundingBox&&mxUtils.contains(i.text.boundingBox,n.getGraphX(),n.getGraphY())?y.handle=mxEvent.LABEL_HANDLE:null!=(e=this.selectionCellsHandler.getHandler(i.cell))&&null!=e.bends&&0<e.bends.length&&(y.handle=e.getHandleForEvent(n))))})),this.addMouseListener({mouseDown:function(t,e){},mouseMove:mxUtils.bind(this,function(t,e){var n,i=this.selectionCellsHandler.handlers.map;for(n in i)if(null!=i[n].index)return;if(this.isEnabled()&&!this.panningHandler.isActive()&&!mxEvent.isAltDown(e.getEvent())){var l=this.tolerance;if(null!=y.point&&null!=y.state&&null!=y.event){var s=y.state;(null!=y.handle||Math.abs(y.point.x-e.getGraphX())>l||Math.abs(y.point.y-e.getGraphY())>l)&&((a=null)!=(a=mxEvent.isShiftDown(e.getEvent())?a:this.selectionCellsHandler.getHandler(s.cell))&&null!=a.bends&&0<a.bends.length&&(a.redrawHandles(),m=null!=y.handle?y.handle:a.getHandleForEvent(y.event),h=(r=this.view.getEdgeStyle(s))==mxEdgeStyle.EntityRelation,o=s.absolutePoints,(m=y.selected?m:y.handle)!=mxEvent.LABEL_HANDLE&&null!=o&&(null==(m=y.handle)&&((d=new mxRectangle(y.point.x,y.point.y)).grow(mxEdgeHandler.prototype.handleImage.width/2),mxUtils.contains(d,o[0].x,o[0].y)?m=0:mxUtils.contains(d,o[o.length-1].x,o[o.length-1].y)?m=a.bends.length-1:null!=o&&(null==r&&null==m||r==mxEdgeStyle.SegmentConnector||r==mxEdgeStyle.OrthConnector)&&(null!=r&&(2==o.length||3==o.length&&(0==Math.round(o[0].x-o[1].x)&&0==Math.round(o[1].x-o[2].x)||0==Math.round(o[0].y-o[1].y)&&0==Math.round(o[1].y-o[2].y)))?m=2:(m=mxUtils.findNearestSegment(s,y.point.x,y.point.y),null==r?m=mxEvent.VIRTUAL_HANDLE-m:m+=1))),null==m)&&(m=mxEvent.VIRTUAL_HANDLE),h=!h&&(null!=s.visibleSourceState||null!=s.visibleTargetState),p=m==mxEvent.LABEL_HANDLE||0==m||m==a.bends.length-1,h||p)&&(a.start(e.getGraphX(),e.getGraphX(),m),e.consume(),this.graphHandler.reset()),null!=a&&(this.selectionCellsHandler.isHandlerActive(a)?this.isCellSelected(s.cell)||(this.selectionCellsHandler.handlers.put(s.cell,a),this.selectCellForEvent(s.cell,e.getEvent())):this.isCellSelected(s.cell)||a.destroy()),y.selected=!1,y.handle=null,y.state=null,y.event=null,y.point=null)}else if(null!=(s=e.getState())&&this.isCellEditable(s.cell)){var o,r,a,h=this.model.getParent(s.cell),u=null;if(!this.model.isEdge(s.cell)||this.isCellSelected(s.cell)||mxEvent.isAltDown(e.getEvent())||mxEvent.isShiftDown(e.getEvent())||this.isAncestorSelected(s.cell)||!this.isSwimlane(h)&&!this.model.isLayer(h)&&this.getCurrentRoot()!=h){if(!mxEvent.isControlDown(e.getEvent()))for(var d,p,m,c,g,l=mxShape.prototype.svgStrokeTolerance/2,x=((d=new mxRectangle(e.getGraphX(),e.getGraphY())).grow(l),this.isTableCell(s.cell)&&this.isCellMovable(s.cell)&&(p=this.model.getParent(s.cell),m=this.model.getParent(p),this.isCellSelected(m)||(mxUtils.intersects(d,new mxRectangle(s.x,s.y-2,s.width,4))&&this.model.getChildAt(m,0)!=p||mxUtils.intersects(d,new mxRectangle(s.x,s.y+s.height-2,s.width,4))?u="row-resize":(mxUtils.intersects(d,new mxRectangle(s.x-2,s.y,4,s.height))&&this.model.getChildAt(p,0)!=s.cell||mxUtils.intersects(d,new mxRectangle(s.x+s.width-2,s.y,4,s.height)))&&(u="col-resize"))),s);null==u&&null!=x&&(this.isTableCell(x.cell)||this.isTableRow(x.cell)||this.isTable(x.cell));)this.isSwimlane(x.cell)&&this.isCellMovable(x.cell)&&(c=this.getActualStartSize(x.cell),g=this.view.scale,(0<c.x||0<c.width)&&mxUtils.intersects(d,new mxRectangle(x.x+(c.x-c.width-1)*g+(0==c.x?x.width*g:0),x.y,1,x.height))?u="col-resize":(0<c.y||0<c.height)&&mxUtils.intersects(d,new mxRectangle(x.x,x.y+(c.y-c.height-1)*g+(0==c.y?x.height:0),x.width,1))&&(u="row-resize")),x=this.view.getState(this.model.getParent(x.cell))}else(d=new mxRectangle(e.getGraphX(),e.getGraphY())).grow(mxEdgeHandler.prototype.handleImage.width/2),null!=(o=s.absolutePoints)&&(null!=s.text&&null!=s.text.boundingBox&&mxUtils.contains(s.text.boundingBox,e.getGraphX(),e.getGraphY())?u="move":mxUtils.contains(d,o[0].x,o[0].y)||mxUtils.contains(d,o[o.length-1].x,o[o.length-1].y)?u="pointer":(r=this.view.getEdgeStyle(s))==mxEdgeStyle.EntityRelation||null==s.visibleSourceState&&null==s.visibleTargetState||(u="crosshair",r!=mxEdgeStyle.SegmentConnector&&r!=mxEdgeStyle.OrthConnector)||(a=mxUtils.findNearestSegment(s,e.getGraphX(),e.getGraphY()))<o.length-1&&0<=a&&(u=0==Math.round(o[a].x-o[a+1].x)?"col-resize":"row-resize"));null!=u&&s.setCursor(u)}}}),mouseUp:mxUtils.bind(this,function(t,e){y.state=null,y.event=null,y.point=null,y.handle=null})})),this.cellRenderer.minSvgStrokeWidth=.1,this.cellRenderer.getLabelValue=function(t){var e=mxCellRenderer.prototype.getLabelValue.apply(this,arguments);return e=t.view.graph.isHtmlLabel(t.cell)?1!=t.style.html?mxUtils.htmlEntities(e,!1):(t.lastLabelValue!=e&&(t.lastLabelValue=e,t.lastSanitizedLabelValue=Graph.sanitizeHtml(e)),t.lastSanitizedLabelValue):e},void 0!==mxVertexHandler&&(this.setConnectable(!0),this.setDropEnabled(!0),this.setPanning(!0),this.setTooltips(!0),this.setAllowLoops(!0),this.allowAutoPanning=!0,this.resetEdgesOnConnect=!1,this.constrainChildren=!1,this.constrainRelativeChildren=!0,this.graphHandler.scrollOnMove=!1,this.graphHandler.scaleGrid=!0,this.connectionHandler.setCreateTarget(!1),this.connectionHandler.insertBeforeSource=!0,this.connectionHandler.isValidSource=function(t,e){return!1},this.alternateEdgeStyle="vertical",null==i&&this.loadStylesheet(),d=this.graphHandler.getGuideStates,this.graphHandler.getGuideStates=function(){var t=d.apply(this,arguments);if(this.graph.pageVisible){for(var e=[],n=this.graph.pageFormat,i=this.graph.pageScale,l=n.width*i,s=n.height*i,o=this.graph.view.translate,r=this.graph.view.scale,a=this.graph.getPageLayout(),h=0;h<a.width;h++)e.push(new mxRectangle(((a.x+h)*l+o.x)*r,(a.y*s+o.y)*r,l*r,s*r));for(var u=1;u<a.height;u++)e.push(new mxRectangle((a.x*l+o.x)*r,((a.y+u)*s+o.y)*r,l*r,s*r));t=e.concat(t)}return t},mxDragSource.prototype.dragElementZIndex=mxPopupMenu.prototype.zIndex,mxGuide.prototype.getGuideColor=function(t,e){return null==t.cell?"#ffa500":mxConstants.GUIDE_COLOR},this.graphHandler.createPreviewShape=function(t){return this.previewColor="#000000"==this.graph.background?"#ffffff":mxGraphHandler.prototype.previewColor,mxGraphHandler.prototype.createPreviewShape.apply(this,arguments)},o=this.graphHandler.getCells,this.graphHandler.getCells=function(t){for(var e=o.apply(this,arguments),n=new mxDictionary,i=[],l=0;l<e.length;l++){var s=this.graph.isTableCell(t)&&this.graph.isTableCell(e[l])&&this.graph.isCellSelected(e[l])?this.graph.model.getParent(e[l]):this.graph.isTableRow(t)&&this.graph.isTableRow(e[l])&&this.graph.isCellSelected(e[l])?e[l]:this.graph.getCompositeParent(e[l]);null==s||n.get(s)||(n.put(s,!0),i.push(s))}return i},r=this.graphHandler.start,this.graphHandler.start=function(t,e,n,i){var l=!1;this.graph.isTableCell(t)&&(this.graph.isCellSelected(t)?l=!0:t=this.graph.model.getParent(t)),l||this.graph.isTableRow(t)&&this.graph.isCellSelected(t)||(t=this.graph.getCompositeParent(t)),r.apply(this,arguments)},this.connectionHandler.createTargetVertex=function(t,e){return e=this.graph.getCompositeParent(e),mxConnectionHandler.prototype.createTargetVertex.apply(this,arguments)},this.connectionHandler.insertEdge=function(t,e,n,i,l,s){var o=mxConnectionHandler.prototype.insertEdge.apply(this,arguments);return null!=i&&this.graph.applyNewEdgeStyle(i,[o]),o},a=new mxRubberband(this),this.getRubberband=function(){return a},h=(new Date).getTime(),u=0,p=this.connectionHandler.mouseMove,this.connectionHandler.mouseMove=function(){var t=this.currentState;p.apply(this,arguments),u=t!=this.currentState?(h=(new Date).getTime(),0):(new Date).getTime()-h},c=this.connectionHandler.isOutlineConnectEvent,this.connectionHandler.isOutlineConnectEvent=function(t){return(!mxEvent.isShiftDown(t.getEvent())||!mxEvent.isAltDown(t.getEvent()))&&(null!=this.currentState&&t.getState()==this.currentState&&2e3<u||(null==this.currentState||"0"!=mxUtils.getValue(this.currentState.style,"outlineConnect","1"))&&c.apply(this,arguments))},g=this.isToggleEvent,this.isToggleEvent=function(t){return g.apply(this,arguments)||!mxClient.IS_CHROMEOS&&mxEvent.isShiftDown(t)},x=a.isForceRubberbandEvent,a.isForceRubberbandEvent=function(t){return x.apply(this,arguments)||mxClient.IS_CHROMEOS&&mxEvent.isShiftDown(t.getEvent())||mxUtils.hasScrollbars(this.graph.container)&&mxClient.IS_FF&&mxClient.IS_WIN&&null==t.getState()&&mxEvent.isTouchEvent(t.getEvent())},C=null,this.panningHandler.addListener(mxEvent.PAN_START,mxUtils.bind(this,function(){this.isEnabled()&&(C=this.container.style.cursor,this.container.style.cursor="move")})),this.panningHandler.addListener(mxEvent.PAN_END,mxUtils.bind(this,function(){this.isEnabled()&&(this.container.style.cursor=C)})),this.popupMenuHandler.autoExpand=!0,this.popupMenuHandler.isSelectOnPopup=function(t){return mxEvent.isMouseEvent(t.getEvent())},f=this.click,this.click=function(t){var e=null==t.state&&null!=t.sourceState&&this.isCellLocked(this.getLayerForCell(t.sourceState.cell));if(this.isEnabled()&&!e||t.isConsumed())return f.apply(this,arguments);var n,t=e?t.sourceState.cell:t.getCell();null!=t&&(null!=(n=this.getClickableLinkForCell(t))?this.isCustomLink(n)?this.customLinkClicked(n,t):this.openLink(n):e&&this.clearSelection())},this.tooltipHandler.getStateForEvent=function(t){return t.sourceState},v=this.tooltipHandler.show,this.tooltipHandler.show=function(){if(v.apply(this,arguments),null!=this.div)for(var t=this.div.getElementsByTagName("a"),e=0;e<t.length;e++)null!=t[e].getAttribute("href")&&null==t[e].getAttribute("target")&&t[e].setAttribute("target","_blank")},this.tooltipHandler.getStateForEvent=function(t){return t.sourceState},this.getCursorForMouseEvent=function(t){var e=null==t.state&&null!=t.sourceState&&this.isCellLocked(t.sourceState.cell);return this.getCursorForCell(e?t.sourceState.cell:t.getCell())},E=this.getCursorForCell,this.getCursorForCell=function(t){if(!this.isEnabled()||this.isCellLocked(t)){if(null!=this.getClickableLinkForCell(t))return"pointer";if(this.isCellLocked(t))return"default"}return E.apply(this,arguments)},this.selectRegion=function(t,e){var n=mxEvent.isAltDown(e)?t:null,i=this.getCells(t.x,t.y,t.width,t.height,null,null,n,null,!0);if(this.isToggleEvent(e))for(var l=0;l<i.length;l++)this.selectCellForEvent(i[l],e);else this.selectCellsForEvent(i,e);return i},S=this.graphHandler.shouldRemoveCellsFromParent,this.graphHandler.shouldRemoveCellsFromParent=function(t,e,n){return!this.graph.isCellSelected(t)&&S.apply(this,arguments)},w=this.updateMouseEvent,this.updateMouseEvent=function(i){return null!=(i=w.apply(this,arguments)).state&&this.isCellLocked(this.getLayerForCell(i.getCell()))&&(null==this.getLinkForCell(i.getCell())?i.state=this.view.getState(this.getCellAt(i.getGraphX(),i.getGraphY(),null,null,null,mxUtils.bind(this,function(t,e,n){return i.state==t||this.isCellLocked(this.getLayerForCell(t.cell))&&null==this.getLinkForCell(t.cell)}))):i.state=null),i},b=this.isCellSelectable,this.isCellSelectable=function(t){return b.apply(this,arguments)&&!this.isCellLocked(this.getLayerForCell(t))},this.isCellLocked=function(t){for(;null!=t;){if("1"==mxUtils.getValue(this.getCurrentCellStyle(t),"locked","0"))return!0;t=this.model.getParent(t)}return!1},T=null,this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(t,e){"mouseDown"==e.getProperty("eventName")&&(e=e.getProperty("event").getState(),T=null==e||this.isSelectionEmpty()||this.isCellSelected(e.cell)?null:this.getSelectionCells())})),this.addListener(mxEvent.TAP_AND_HOLD,mxUtils.bind(this,function(t,e){var n,i;mxEvent.isMultiTouchEvent(e)||(i=e.getProperty("event"),null==(n=e.getProperty("cell"))?(i=mxUtils.convertPoint(this.container,mxEvent.getClientX(i),mxEvent.getClientY(i)),a.start(i.x,i.y)):null!=T?this.addSelectionCells(T):1<this.getSelectionCount()&&this.isCellSelected(n)&&this.removeSelectionCell(n),T=null,e.consume())})),this.connectionHandler.selectCells=function(t,e){this.graph.setSelectionCell(e||t)},this.connectionHandler.constraintHandler.isStateIgnored=function(t,e){var n=t.view.graph;return e&&(n.isCellSelected(t.cell)||n.isTableRow(t.cell)&&n.selectionCellsHandler.isHandled(n.model.getParent(t.cell)))},this.selectionModel.addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){var t=this.connectionHandler.constraintHandler;null!=t.currentFocus&&t.isStateIgnored(t.currentFocus,!0)&&(t.currentFocus=null,t.constraints=null,t.destroyIcons()),t.destroyFocusHighlight()})),Graph.touchStyle)&&this.initTouch(),this.currentTranslate=new mxPoint(0,0)},HoverIcons=(Graph.touchStyle=mxClient.IS_TOUCH||mxClient.IS_FF&&mxClient.IS_WIN||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints||null==window.urlParams||"1"==urlParams.touch,Graph.fileSupport=null!=window.File&&null!=window.FileReader&&null!=window.FileList&&(null==window.urlParams||"0"!=urlParams.filesupport),Graph.translateDiagram="1"==urlParams["translate-diagram"],Graph.diagramLanguage=null!=urlParams["diagram-language"]?urlParams["diagram-language"]:mxClient.language,Graph.lineJumpsEnabled=!0,Graph.defaultJumpSize=6,Graph.zoomWheel=!1,Graph.selectParentLayer=!1,Graph.minTableColumnWidth=20,Graph.minTableRowHeight=20,Graph.foreignObjectWarningText="Text is not SVG - cannot display",Graph.foreignObjectWarningLink="https://www.drawio.com/doc/faq/svg-export-text-problems",Graph.xmlDeclaration='<?xml version="1.0" encoding="UTF-8"?>',Graph.svgDoctype='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',Graph.svgFileComment="\x3c!-- Do not edit this file with editors other than draw.io --\x3e",Graph.textStyles=["fontFamily","fontSource","fontSize","fontColor","fontStyle","textOpacity","labelBorderColor","labelBackgroundColor","autosize","resizable"],Graph.edgeStyles=["edgeStyle","elbow","jumpStyle","jumpSize","startArrow","startFill","startSize","endArrow","endFill","endSize","flowAnimation","flowAnimationDirection","flowAnimationTimingFunction","flowAnimationDuration","sourcePerimeterSpacing","targetPerimeterSpacing","curved"],Graph.cellStyleGroups=[["startArrow","startFill","endArrow","endFill"],["startSize","endSize"],["sourcePerimeterSpacing","targetPerimeterSpacing"],["fillColor","gradientColor","gradientDirection"]],Graph.cellStyles=mxUtils.addItems(mxUtils.addItems(mxUtils.addItems(["rounded","shadow","glass","dashed","dashPattern","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","sketchStyle","pointerEvents","opacity","strokeColor","strokeWidth","align","verticalAlign","spacingLeft","spacingRight","spacingTop","spacingBottom","spacing","arcSize","comicStyle","swimlaneFillColor","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity"],Graph.textStyles),Graph.edgeStyles),Graph.cellStyleGroups),Graph.layoutNames=["mxHierarchicalLayout","mxCircleLayout","mxCompactTreeLayout","mxEdgeLabelLayout","mxFastOrganicLayout","mxParallelEdgeLayout","mxPartitionLayout","mxRadialTreeLayout","mxStackLayout"],Graph.createOffscreenGraph=function(t){var e=new Graph(document.createElement("div"));return e.stylesheet.styles=mxUtils.clone(t.styles),e.resetViewOnRootChange=!1,e.setConnectable(!1),e.gridEnabled=!1,e.autoScroll=!1,e.setTooltips(!1),e.setEnabled(!1),e.container.style.visibility="hidden",e.container.style.position="absolute",e.container.style.overflow="hidden",e.container.style.height="1px",e.container.style.width="1px",e},Graph.createSvgImage=function(t,e,n,i,l){i=unescape(encodeURIComponent(Graph.svgDoctype+'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+t+'px" height="'+e+'px" '+(null!=i&&null!=l?'viewBox="0 0 '+i+" "+l+'" ':"")+'version="1.1">'+n+"</svg>"));return new mxImage("data:image/svg+xml;base64,"+(window.btoa?btoa(i):Base64.encode(i,!0)),t,e)},Graph.createSvgDarkModeCss=function(t){return"svg"+(t=null!=t?"."+t:"")+":not(mjx-container > svg) { filter: invert(100%) hue-rotate(180deg); }\nsvg"+t+" foreignObject img,\nsvg"+t+" image:not(svg"+t+" switch image),\nsvg"+t+" svg:not(mjx-container > svg)\n{ filter: invert(100%) hue-rotate(180deg) }"},Graph.createSvgDarkModeStyle=function(t,e,n,i){var l=mxUtils.createElementNs(t,mxConstants.NS_SVG,"style"),s=(null!=t.setAttributeNS?l.setAttributeNS("type","text/css"):l.setAttribute("type","text/css"),Graph.createSvgDarkModeCss(n));return"auto"==e&&(n=null!=n?"."+n:"",s="@media (prefers-color-scheme: dark) {\n"+s+"\n",null!=i&&(s+="svg"+n+" { background-color: "+Graph.invertColor(i)+" !important; }\n"),s+="}"),l.appendChild(t.createTextNode(s)),l},Graph.invertColor=function(t,e){null==e&&((n=document.createElement("canvas")).width=1,n.height=1,(e=n.getContext("2d")).filter="invert(100%) hue-rotate(180deg)"),e.fillStyle=t,e.fillRect(0,0,1,1);var n=e.getImageData(0,0,1,1),t=n.data[0],e=n.data[1];return"#"+(16777216|(n.data[2]|e<<8|t<<16)).toString(16).substring(1)},Graph.getSvgFromDataUri=function(t){return null!=t&&"data:image/svg"==t.substring(0,14)?Graph.xmlDeclaration+"\n"+Graph.svgDoctype+"\n"+decodeURIComponent(escape(atob(t.substring(t.indexOf(",")+1)))):null},Graph.createSvgNode=function(t,e,n,i,l){var s=mxUtils.createXmlDocument(),o=null!=s.createElementNS?s.createElementNS(mxConstants.NS_SVG,"svg"):s.createElement("svg");return null!=l&&(null!=o.style?o.style.backgroundColor=l:o.setAttribute("style","background-color:"+l)),null==s.createElementNS?(o.setAttribute("xmlns",mxConstants.NS_SVG),o.setAttribute("xmlns:xlink",mxConstants.NS_XLINK)):o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",mxConstants.NS_XLINK),o.setAttribute("version","1.1"),o.setAttribute("width",n+"px"),o.setAttribute("height",i+"px"),o.setAttribute("viewBox",t+" "+e+" "+n+" "+i),s.appendChild(o),o},Graph.htmlToPng=function(t,e,n,i,l,s){l=null!=l?l:"",s=null!=s?s:Editor.htmlRasterScale;var o=document.createElement("canvas"),r=(o.width=e*s,o.height=n*s,document.createElement("img")),a=(r.onload=mxUtils.bind(this,function(){try{var t=o.getContext("2d");t.scale(s,s),t.drawImage(r,0,0),i(o.toDataURL())}catch(t){i(null)}}),mxUtils.createXmlDocument()),e='<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+n+'">'+(""!=l?'<defs xmlns="http://www.w3.org/2000/svg"><style type="text/css">'+l+"</style></defs>":"")+'<foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml">'+(t=new mxSvgCanvas2D(null!=a.createElementNS?a.createElementNS(mxConstants.NS_SVG,"svg"):a.createElement("svg")).convertHtml(t))+"</div></foreignObject></svg>";r.onerror=function(t){i(null)},r.src="data:image/svg+xml,"+encodeURIComponent(e)},Graph.zapGremlins=function(t){return mxUtils.zapGremlins(t)},Graph.stringToBytes=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e},Graph.bytesToString=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(t[n]);return e.join("")},Graph.base64EncodeUnicode=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))},Graph.base64DecodeUnicode=function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))},Graph.compressNode=function(t,e){t=mxUtils.getXml(t);return Graph.compress(e?t:Graph.zapGremlins(t))},Graph.arrayBufferToString=function(t){for(var e="",n=new Uint8Array(t),i=n.byteLength,l=0;l<i;l++)e+=String.fromCharCode(n[l]);return e},Graph.stringToArrayBuffer=function(t){return Uint8Array.from(t,function(t){return t.charCodeAt(0)})},Graph.arrayBufferIndexOfString=function(t,e,n){for(var i=e.charCodeAt(0),l=1,s=-1,o=n||0;o<t.byteLength;o++)if(t[o]==i){s=o;break}for(o=s+1;-1<s&&o<t.byteLength&&o<s+e.length-1;o++){if(t[o]!=e.charCodeAt(l))return Graph.arrayBufferIndexOfString(t,e,s+1);l++}return l==e.length-1?s:-1},Graph.compress=function(t,e){return null==t||0==t.length||void 0===pako?t:(e=e?pako.deflate(encodeURIComponent(t)):pako.deflateRaw(encodeURIComponent(t)),btoa(Graph.arrayBufferToString(new Uint8Array(e))))},Graph.decompress=function(t,e,n){return null==t||0==t.length||void 0===pako?t:(t=Graph.stringToArrayBuffer(atob(t)),e=decodeURIComponent(e?pako.inflate(t,{to:"string"}):pako.inflateRaw(t,{to:"string"})),n?e:Graph.zapGremlins(e))},Graph.fadeNodes=function(t,e,n,i,l){l=null!=l?l:1e3,Graph.setTransitionForNodes(t,null),Graph.setOpacityForNodes(t,e),window.setTimeout(function(){Graph.setTransitionForNodes(t,"all "+l+"ms ease-in-out"),Graph.setOpacityForNodes(t,n),window.setTimeout(function(){Graph.setTransitionForNodes(t,null),null!=i&&i()},l)},0)},Graph.exploreFromCell=function(t,e,n){function i(t){27==t.keyCode&&u.click()}function l(t,e){if(t.getModel().isVertex(e)){var n=t.container.scrollWidth/2,i=t.container.scrollHeight/2;t.rootCell=e.referenceCell||e,t.getModel().beginUpdate();try{var l=function(t,e){for(var n=e.referenceCell||e,i=m.model.getCell(n.sourceCellId),l=m.getEdges(i,null,!0,!0,!1,!0),s=[],o=0;o<l.length;o++)null!=l[o].getTerminal(!0)&&null!=l[o].getTerminal(!1)&&m.isCellVisible(l[o])&&!m.isEdgeIgnored(l[o])&&m.isCellVisible(l[o].getTerminal(!0))&&m.isCellVisible(l[o].getTerminal(!1))&&m.isCellVisible(m.getLayerForCell(l[o]))&&s.push(l[o]);var r=l=s;(null!=e.startIndex||0<pageSize&&l.length>pageSize)&&(h=e.startIndex||0,r=l.slice(Math.max(0,h),Math.min(l.length,h+pageSize)));r=m.getOpposites(r,i).concat(r);for(var a=t.cloneCells(r),h="fillColor=green;fontColor=white;strokeColor=green;rounded=1;",o=0;o<r.length;o++)if(a[o].sourceCellId=r[o].id,t.model.isEdge(a[o])){a[o].geometry.x=0,a[o].geometry.y=0,a[o].geometry.points=null,a[o].setStyle(a[o].getStyle()+";curved=1;noEdgeStyle=1;entryX=none;entryY=none;exitX=none;exitY=none;labelBackgroundColor=#ffffffc0;textOpacity=100;"),a[o].setTerminal(n,null==a[o].getTerminal(!0));for(var u=0;u<a[o].getChildCount();u++){var d=a[o].getChildAt(u);null!=d.geometry&&d.geometry.relative&&(d.setStyle(d.getStyle()+";labelBackgroundColor=#ffffffc0;textOpacity=100;"),d.geometry.offset=new mxPoint(0,0),d.geometry.y=0,d.geometry.x<.5?d.geometry.x=-.8:.5<d.geometry.x?d.geometry.x=.8:d.geometry.x=0)}}0<e.startIndex&&((i=t.createVertex(null,null,mxResources.get("previousPage")+" ("+Math.ceil((e.startIndex||0)/pageSize)+"/"+Math.ceil(l.length/pageSize)+")",0,0,120,30,h)).referenceCell=n,i.startIndex=Math.max(0,(e.startIndex||0)-pageSize),a.splice(0,0,i));l.length>(e.startIndex||0)+pageSize&&((i=t.createVertex(null,null,mxResources.get("nextPage")+" ("+(Math.ceil((e.startIndex||0)/pageSize)+2)+"/"+Math.ceil(l.length/pageSize)+")",0,0,120,30,h)).referenceCell=n,i.startIndex=(e.startIndex||0)+pageSize,a.splice(0,0,i));return a}(t,e);for(s in t.getModel().cells)(o=t.getModel().getCell(s))!=t.rootCell&&!t.getModel().isAncestor(t.rootCell,o)&&t.getModel().isVertex(o)&&t.removeCells([o]);t.addCells(l);var s,o,r=t.getModel().getGeometry(t.rootCell),a=(null!=r&&((r=r.clone()).x=n-r.width/2,r.y=i-r.height/3,t.getModel().setGeometry(t.rootCell,r)),[]);for(s in t.getModel().cells)(o=t.getModel().getCell(s))!=t.rootCell&&t.getModel().isVertex(o)&&t.getModel().getParent(o)==t.getDefaultParent()&&(a.push(o),null!=(r=t.getModel().getGeometry(o)))&&(r.x=n-r.width/2,r.y=i-r.height/2);for(var h=a.length,u=2*Math.PI/h,d=Math.max(minSize,Math.min(t.container.scrollWidth/2.5-80,t.container.scrollHeight/2.5-80)),p=0;p<h;p++)null!=(r=t.getModel().getGeometry(a[p]))&&((r=r.clone()).x+=d*Math.sin(p*u),r.y+=d*Math.cos(p*u),t.getModel().setGeometry(a[p],r))}finally{t.getModel().endUpdate()}}}var m,s,o,r,a,h,u;pageSize=null!=n&&null!=n.pageSize?n.pageSize:8,minSize=null!=n&&null!=n.minSize?n.minSize:180,m=t,s=e,(n=document.createElement("div")).style.position="absolute",n.style.display="block",n.style.background=Editor.isDarkMode()?Editor.darkColor:"#ffffff",n.style.width="100%",n.style.height="100%",n.style.left="0px",n.style.top="0px",n.style.zIndex=2,(u=document.createElement("img")).setAttribute("src",Editor.closeBlackImage),u.style.position="absolute",u.style.cursor="pointer",u.style.right="10px",u.style.top="10px",n.appendChild(u),(t=document.createElement("div")).style.position="absolute",t.style.cursor="pointer",t.style.right="38px",t.style.top="14px",t.style.textAlign="right",t.style.verticalAlign="top",mxUtils.write(t,mxResources.get("close")),n.appendChild(t),document.body.appendChild(n),mxEvent.addListener(document,"keydown",i),o=n,mxClient.isBrowserSupported()?((r=new Graph(o)).keepEdgesInBackground=!0,r.isCellResizable=function(){return!1},r.isCellRotatable=function(){return!1},r.getCursorForCell=function(t){return this.model.isVertex(t)?"pointer":null},r.getFoldingImage=function(){return null},mxEvent.addListener(u,"click",n=function(){mxEvent.removeListener(document,"keydown",i),o.parentNode.removeChild(o),m.scrollCellToVisible(s)}),mxEvent.addListener(t,"click",n),r.setEnabled(!1),a=r.click,r.click=function(t){var t=t.getCell(),e=null!=t?null!=t.referenceCell?t.referenceCell:t:null;null!=t&&r.rootCell!=t&&0<r.getEdges(e).length?l(r,t):a.apply(this,arguments)},n=r.container.scrollWidth/2,t=r.container.scrollHeight/3,r.model.beginUpdate(),(e=r.importCells([s])[0]).sourceCellId=s.id,e.geometry.x=n-e.geometry.width/2,e.geometry.y=t-e.geometry.height/2,r.model.endUpdate(),h=!1,r.getModel().addListener(mxEvent.CHANGE,function(t,e){h||(e=e.getProperty("edit").changes,mxText.prototype.enableBoundingBox=!1,r.labelsVisible=!1,h=!0,mxEffects.animateChanges(r,e,function(){var e=new mxParallelEdgeLayout(r),n=(e.spacing=60,e.layout);e.layout=function(t){e.spacing=Math.min(60,Math.max(30,60-5*t.length)),n.apply(this,arguments)},e.execute(r.getDefaultParent()),mxText.prototype.enableBoundingBox=!0,r.labelsVisible=!0,r.tooltipHandler.hide(),r.refresh(),h=!1}))}),l(r,e)):mxUtils.error("Browser is not supported!",200,!1)},Graph.removeKeys=function(t,e){for(var n in t)e(n)&&delete t[n]},Graph.setTransitionForNodes=function(t,e){for(var n=0;n<t.length;n++)mxUtils.setPrefixedStyle(t[n].style,"transition",e)},Graph.setOpacityForNodes=function(t,e){for(var n=0;n<t.length;n++)t[n].style.opacity=e},Graph.removePasteFormatting=function(t,e){for(;null!=t;){null!=t.firstChild&&Graph.removePasteFormatting(t.firstChild,!0);var n,i=t.nextSibling;if(t.nodeType==mxConstants.NODETYPE_ELEMENT&&null!=t.style){if("#000000"==t.style.color&&(t.style.color=""),"SPAN"==t.nodeName&&"Apple-tab-span"==t.className&&(n=Graph.createTabNode(4),t.parentNode.replaceChild(n,t),t=n),"P"==t.nodeName&&"p1"==t.className){for(;null!=t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);null!=i&&"P"==i.nodeName&&"p1"==i.className&&t.parentNode.insertBefore(t.ownerDocument.createElement("br"),t),t.parentNode.removeChild(t)}!e&&null!=t.innerHTML&&0<=t.innerHTML.indexOf("\t")&&(n=Graph.createTabNode(4),t.innerHTML=t.innerHTML.replace(/\t/g,n.outerHTML))}t=i}},Graph.createTabNode=function(t){var e="\t";if(null!=t)for(e="";0<t;)e+="",t--;var n=document.createElement("span");return n.style.whiteSpace="pre",n.appendChild(document.createTextNode(e)),n},Graph.sanitizeHtml=function(t,e){return Graph.domPurify(t,!1)},Graph.sanitizeLink=function(t){var e;return null==t?null:((e=document.createElement("a")).setAttribute("href",t),Graph.sanitizeNode(e),e.getAttribute("href"))},Graph.sanitizeNode=function(t){return Graph.domPurify(t,!0)},DOMPurify.addHook("afterSanitizeAttributes",function(t){"use"==t.nodeName&&(null!=t.getAttribute("xlink:href")&&!t.getAttribute("xlink:href").startsWith("#")||null!=t.getAttribute("href")&&!t.getAttribute("href").startsWith("#"))&&t.remove()}),Graph.domPurify=function(t,e){return DOM_PURIFY_CONFIG.IN_PLACE=e,DOMPurify.sanitize(t,DOM_PURIFY_CONFIG)},Graph.clipSvgDataUri=function(t,e){if(!mxClient.IS_IE&&!mxClient.IS_IE11&&null!=t&&"data:image/svg+xml;base64,"==t.substring(0,26))try{var n=document.createElement("div"),i=(n.style.position="absolute",n.style.visibility="hidden",decodeURIComponent(escape(atob(t.substring(26))))),l=i.indexOf("<svg");if(0<=l){n.innerHTML=Graph.sanitizeHtml(i.substring(l));var s=n.getElementsByTagName("svg");if(0<s.length){if(e||null!=s[0].getAttribute("preserveAspectRatio")){document.body.appendChild(n);try{var o,r=1,a=1,h=s[0].getAttribute("width"),u=s[0].getAttribute("height"),h=null!=h&&"%"!=h.charAt(h.length-1)?parseFloat(h):NaN,u=null!=u&&"%"!=u.charAt(u.length-1)?parseFloat(u):NaN,d=s[0].getAttribute("viewBox"),p=null,m=(null==d||isNaN(h)||isNaN(u)||(o=d.split(" "),4<=d.length&&(r=parseFloat(o[2])/h,a=parseFloat(o[3])/u,p=new mxRectangle(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3])))),s[0].getBBox());0<m.width&&0<m.height&&(null==p||m.width*m.height<p.width*p.height*.7)&&(n.getElementsByTagName("svg")[0].setAttribute("viewBox",m.x+" "+m.y+" "+m.width+" "+m.height),n.getElementsByTagName("svg")[0].setAttribute("width",m.width/r),n.getElementsByTagName("svg")[0].setAttribute("height",m.height/a))}catch(t){}finally{document.body.removeChild(n)}}t=Editor.createSvgDataUri(mxUtils.getXml(s[0]))}}}catch(t){}return t},Graph.createRemoveIcon=function(t,e){var n=document.createElement("img");return n.setAttribute("src",Dialog.prototype.clearImage),n.setAttribute("title",t),n.setAttribute("width","13"),n.setAttribute("height","10"),n.style.marginLeft="4px",n.style.marginBottom="-1px",n.style.cursor="pointer",mxEvent.addListener(n,"click",e),n},Graph.isPageLink=function(t){return null!=t&&"data:page/id,"==t.substring(0,13)},Graph.rewritePageLinks=function(t,l){var e=t.getElementsByTagName("a");function n(t,e){var n,i=t.getAttribute(e);null!=i&&(Graph.isPageLink(i)&&(i="#"+i.substring(i.indexOf(":")+1)),n=e,l&&"xlink:href"==e&&(t.removeAttribute(e),n="href"),t.setAttribute(n,i))}if(null!=e)for(var i=0;i<e.length;i++)n(e[i],"href"),n(e[i],"xlink:href")},Graph.isLink=function(t){return null!=t&&t.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)},mxUtils.extend(Graph,mxGraph),Graph.prototype.minFitScale=null,Graph.prototype.maxFitScale=null,Graph.prototype.linkPolicy="frame"==urlParams.target?"blank":urlParams.target||"auto",Graph.prototype.linkTarget="frame"==urlParams.target?"_self":"_blank",Graph.prototype.linkRelation="nofollow noopener noreferrer",Graph.prototype.defaultScrollbars=!0,Graph.prototype.defaultPageVisible=!0,Graph.prototype.defaultGridEnabled="0"!=urlParams.grid,Graph.prototype.lightbox=!1,Graph.prototype.defaultPageBackgroundColor="#ffffff",Graph.prototype.diagramBackgroundColor="#f0f0f0",Graph.prototype.enableDiagramBackground=!1,Graph.prototype.defaultPageBorderColor="#ffffff",Graph.prototype.shapeForegroundColor="#000000",Graph.prototype.shapeBackgroundColor="#ffffff",Graph.prototype.scrollTileSize=new mxRectangle(0,0,400,400),Graph.prototype.transparentBackground=!0,Graph.prototype.selectParentAfterDelete=!1,Graph.prototype.defaultEdgeLength=80,Graph.prototype.immediateHandling=!0,Graph.prototype.connectionArrowsEnabled=!0,Graph.prototype.placeholderPattern=new RegExp("%(date{.*}|[^%^{^}^ ^\"^ '^=^;]+)%","g"),Graph.prototype.absoluteUrlPattern=new RegExp("^(?:[a-z]+:)?//","i"),Graph.prototype.defaultThemeName="default",Graph.prototype.defaultThemes={},Graph.prototype.baseUrl=null!=urlParams.base?mxUtils.removeJavascriptProtocol(decodeURIComponent(urlParams.base)):(window!=window.top?document.referrer:document.location.toString()).split("#")[0],Graph.prototype.editAfterInsert=!1,Graph.prototype.builtInProperties=["label","tooltip","placeholders","placeholder"],Graph.prototype.standalone=!1,Graph.prototype.enableFlowAnimation=!1,Graph.prototype.roundableShapes=["label","rectangle","internalStorage","corner","parallelogram","swimlane","triangle","trapezoid","ext","step","tee","process","link","rhombus","offPageConnector","loopLimit","hexagon","manualInput","card","curlyBracket","singleArrow","callout","doubleArrow","flexArrow","umlLifeline"],Graph.prototype.vertexFontSize=null,Graph.prototype.edgeFontSize=null,Graph.prototype.init=function(t){var e;mxGraph.prototype.init.apply(this,arguments),this.cellRenderer.initializeLabel=function(n,i){mxCellRenderer.prototype.initializeLabel.apply(this,arguments);var e=n.view.graph.tolerance,l=!0,s=null,t=mxUtils.bind(this,function(t){l=!0,s=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t))}),o=mxUtils.bind(this,function(t){l=l&&null!=s&&Math.abs(s.x-mxEvent.getClientX(t))<e&&Math.abs(s.y-mxEvent.getClientY(t))<e}),r=mxUtils.bind(this,function(t){if(l)for(var e=mxEvent.getSource(t);null!=e&&e!=i.node;){if("a"==e.nodeName.toLowerCase()){n.view.graph.labelLinkClicked(n,e,t);break}e=e.parentNode}});mxEvent.addGestureListeners(i.node,t,o,r),mxEvent.addListener(i.node,"click",function(t){mxEvent.consume(t)})},null!=this.tooltipHandler&&(e=this.tooltipHandler.init,this.tooltipHandler.init=function(){e.apply(this,arguments),null!=this.div&&mxEvent.addListener(this.div,"click",mxUtils.bind(this,function(t){var e=mxEvent.getSource(t);"A"==e.nodeName&&null!=(e=e.getAttribute("href"))&&this.graph.isCustomLink(e)&&(mxEvent.isTouchEvent(t)||!mxEvent.isPopupTrigger(t))&&this.graph.customLinkClicked(e)&&mxEvent.consume(t)}))}),this.initLayoutManager()},!function(){Graph.prototype.useCssTransforms=!1,Graph.prototype.currentScale=1,Graph.prototype.currentTranslate=new mxPoint(0,0),Graph.prototype.pasteEdgeStyle=!1,Graph.prototype.isFillState=function(t){return!this.isSpecialColor(t.style[mxConstants.STYLE_FILLCOLOR])&&"1"!=mxUtils.getValue(t.style,"lineShape",null)&&(this.model.isVertex(t.cell)||"arrow"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"wire"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"filledEdge"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"flexArrow"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"mxgraph.arrows2.wedgeArrow"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null))},Graph.prototype.isGradientState=function(t){return this.isFillState(t)&&"wire"!=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)},Graph.prototype.isStrokeState=function(t){return!0},Graph.prototype.isSpecialColor=function(t){return 0<=mxUtils.indexOf([mxConstants.STYLE_STROKECOLOR,mxConstants.STYLE_FILLCOLOR,"inherit","swimlane","indicated"],t)},Graph.prototype.isGlassState=function(t){t=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null);return"label"==t||"rectangle"==t||"internalStorage"==t||"ext"==t||"umlLifeline"==t||"swimlane"==t||"process"==t},Graph.prototype.isRoundedState=function(t){return null!=t.shape?t.shape.isRoundable():0<=mxUtils.indexOf(this.roundableShapes,mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null))},Graph.prototype.isLineJumpState=function(t){var e=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null);return!mxUtils.getValue(t.style,mxConstants.STYLE_CURVED,!1)&&("connector"==e||"filledEdge"==e||"wire"==e)},Graph.prototype.isAutoSizeState=function(t){return"1"==mxUtils.getValue(t.style,mxConstants.STYLE_AUTOSIZE,null)},Graph.prototype.isImageState=function(t){return null!=mxUtils.getValue(t.style,mxConstants.STYLE_IMAGE,null)},Graph.prototype.isShadowState=function(t){return!0},Graph.prototype.getVerticesAndEdges=function(e,n){e=null==e||e,n=null==n||n;var i=this.model;return i.filterDescendants(function(t){return e&&i.isVertex(t)||n&&i.isEdge(t)},i.getRoot())},Graph.prototype.applyNewEdgeStyle=function(t,e,n){t=this.getCellStyle(t).newEdgeStyle;if(null!=t){this.model.beginUpdate();try{var i,l=JSON.parse(t);for(i in l)this.setCellStyles(i,l[i],e),"edgeStyle"==i&&"elbowEdgeStyle"==l[i]&&null!=n&&this.setCellStyles("elbow",n==mxConstants.DIRECTION_SOUTH||n==mxConstants.DIRECTION_NOTH?"vertical":"horizontal",e)}finally{this.model.endUpdate()}}},Graph.prototype.getCommonStyle=function(t){for(var e={},n=0;n<t.length;n++){var i=this.view.getState(t[n]);null!=i&&this.mergeStyle(i.style,e,0==n)}return e},Graph.prototype.mergeStyle=function(t,e,n){if(null!=t){var i,l={};for(i in t){var s=t[i];null!=s&&(l[i]=!0,null==e[i]&&n?e[i]=s:e[i]!=s&&delete e[i])}for(i in e)l[i]||delete e[i]}},Graph.prototype.getStartEditingCell=function(t,e){var n=this.getCellStyle(t),i=parseInt(mxUtils.getValue(n,mxConstants.STYLE_STARTSIZE,0));if(this.isTable(t)&&(!this.isSwimlane(t)||0==i)&&""==this.getLabel(t)&&0<this.model.getChildCount(t)&&(t=this.model.getChildAt(t,0),n=this.getCellStyle(t),i=parseInt(mxUtils.getValue(n,mxConstants.STYLE_STARTSIZE,0))),this.isTableRow(t)&&(!this.isSwimlane(t)||0==i)&&""==this.getLabel(t)&&0<this.model.getChildCount(t))for(var l=0;l<this.model.getChildCount(t);l++){var s=this.model.getChildAt(t,l);if(this.isCellEditable(s)){t=s;break}}return t},Graph.prototype.copyStyle=function(t){return this.getCellStyle(t,!1)},Graph.prototype.pasteStyle=function(t,e,n,i){null!=t&&(i||(n=null!=n?n:Graph.cellStyles,Graph.removeKeys(t,function(t){return mxUtils.indexOf(n,t)<0})),this.updateCellStyles(t,e))},Graph.prototype.copyCellStyles=function(t,e,n,i,l,s,o){var r=!1,a=!1;if(0<t.length)for(var h=0;h<t.length&&(r=this.getModel().isVertex(t[h])||r,!(a=this.getModel().isEdge(t[h])||a)||!r);h++);else a=r=!0;for(r=r&&!s,a=a&&!o,h=0;h<e.length;h++){var u=0<=mxUtils.indexOf(Graph.textStyles,e[h]);("strokeColor"!=e[h]||null!=n[h]&&"none"!=n[h])&&(0<=mxUtils.indexOf(Graph.cellStyles,e[h])||"shape"==e[h])&&("shape"!=e[h]&&(r||u)&&(null==n[h]?delete i[e[h]]:i[e[h]]=n[h]),a||u)&&(null==n[h]?delete l[e[h]]:l[e[h]]=n[h])}},Graph.prototype.includeDescendants=function(t){for(var e=[],n=0;n<t.length;n++)e=e.concat(this.model.getDescendants(t[n]));return e},Graph.prototype.pasteCellStyles=function(t,e,n,i,l){e=null!=e?e:this.currentVertexStyle,n=null!=n?n:this.currentEdgeStyle,l=null!=l?l:this.pasteEdgeStyle,this.model.beginUpdate();try{for(var s=0;s<t.length;s++){var o,r,a=t[s],h=this.model.getStyle(a),u=!1;if(null!=a.style&&(r=a.style.split(";"),u=u||0<=mxUtils.indexOf(r,"text")),u)o=Graph.textStyles;else if(o=Graph.cellStyles.slice(),!i)for(var d=null!=h?h.split(";"):[],p=0;p<d.length;p++){var m=d[p],c=m.indexOf("=");if(0<=c){var g=m.substring(0,c),x=mxUtils.indexOf(o,g);0<=x&&o.splice(x,1);for(var y=0;y<Graph.cellStyleGroups.length;y++){var C=Graph.cellStyleGroups[y];if(0<=mxUtils.indexOf(C,g))for(var f=0;f<C.length;f++){var v=mxUtils.indexOf(o,C[f]);0<=v&&o.splice(v,1)}}}}for(var E=this.model.isEdge(a),S=E?n:e,p=0;p<o.length;p++){var w=S[g=o[p]];null==w||"edgeStyle"==g&&!l||(E||!E&&mxUtils.indexOf(Graph.edgeStyles,g)<0)&&(h=mxUtils.setStyle(h,g,w),"fontFamily"==g&&null==S.fontSource&&(h=mxUtils.setStyle(h,"fontSource",null)),E)&&"rounded"==g&&"1"==w&&null==S.curved&&(h=mxUtils.setStyle(h,"curved",null))}Editor.simpleLabels&&(h=mxUtils.setStyle(mxUtils.setStyle(h,"html",null),"whiteSpace",null)),this.model.setStyle(a,h)}}finally{this.model.endUpdate()}return t},Graph.prototype.updateCellStyles=function(t,e){this.model.beginUpdate();try{for(var n=0;n<e.length;n++)if(this.model.isVertex(e[n])||this.model.isEdge(e[n])){var i,l=this.getCellStyle(e[n],!1),s=l[mxConstants.STYLE_PERIMETER],o=!1;for(i in t){var r=t[i];l[i]!=r&&(i==mxConstants.STYLE_SHAPE&&"umlLifeline"==l[i]&&"umlLifeline"!=r&&(o=!0,i="participant"),this.setCellStyles(i,r,[e[n]]))}o&&this.setCellStyles(mxConstants.STYLE_PERIMETER,s,[e[n]])}}finally{this.model.endUpdate()}},Graph.prototype.isFastZoomEnabled=function(){return"nocss"!=urlParams.zoom&&!mxClient.NO_FO&&!mxClient.IS_EDGE&&!this.useCssTransforms&&(this.isCssTransformsSupported()||mxClient.IS_IOS)},Graph.prototype.isCssTransformsSupported=function(){return!(this.dialect!=mxConstants.DIALECT_SVG||mxClient.NO_FO||this.lightbox&&mxClient.IS_SF)},Graph.prototype.getCellAt=function(t,e,n,i,l,s){return this.useCssTransforms&&(t=t/this.currentScale-this.currentTranslate.x,e=e/this.currentScale-this.currentTranslate.y),this.getScaledCellAt.apply(this,arguments)},Graph.prototype.getScaledCellAt=function(t,e,n,i,l,s){if(i=null==i||i,l=null==l||l,null!=(n=null==n&&null==(n=this.getCurrentRoot())?this.getModel().getRoot():n))for(var o=this.model.getChildCount(n)-1;0<=o;o--){var r=this.model.getChildAt(n,o),a=this.getScaledCellAt(t,e,r,i,l,s);if(null!=a)return a;if(this.isCellVisible(r)&&(l&&this.model.isEdge(r)||i&&this.model.isVertex(r))){a=this.view.getState(r);if(null!=a&&(null==s||!s(a,t,e))&&this.intersects(a,t,e))return r}}return null},Graph.prototype.isRecursiveVertexResize=function(t){return!this.isSwimlane(t.cell)&&0<this.model.getChildCount(t.cell)&&!this.isCellCollapsed(t.cell)&&"1"==mxUtils.getValue(t.style,"recursiveResize","1")&&null==mxUtils.getValue(t.style,"childLayout",null)},Graph.prototype.getAbsoluteParent=function(t){for(var e=t,n=this.getCellGeometry(e);null!=n&&n.relative;)e=this.getModel().getParent(e),n=this.getCellGeometry(e);return e},Graph.prototype.isPart=function(t){return"1"==mxUtils.getValue(this.getCurrentCellStyle(t),"part","0")||this.isTableCell(t)||this.isTableRow(t)},Graph.prototype.getCompositeParents=function(t){for(var e=new mxDictionary,n=[],i=0;i<t.length;i++){var l=this.getCompositeParent(t[i]);this.isTableCell(l)&&(l=this.graph.model.getParent(l)),null==(l=this.isTableRow(l)?this.graph.model.getParent(l):l)||e.get(l)||(e.put(l,!0),n.push(l))}return n},Graph.prototype.getReferenceTerminal=function(t){var e;return t=null!=(t=null!=(t=null!=t&&null!=(e=this.getCellGeometry(t))&&e.relative?this.model.getParent(t):t)&&this.model.isEdge(t)?this.model.getParent(t):t)?this.getCompositeParent(t):t},Graph.prototype.getCompositeParent=function(t){for(;this.isPart(t);){var e=this.model.getParent(t);if(!this.model.isVertex(e))break;t=e}return t},Graph.prototype.filterSelectionCells=function(t){var e=this.getSelectionCells();if(null!=t){for(var n=[],i=0;i<e.length;i++)t(e[i])||n.push(e[i]);e=n}return e};var i=mxGraph.prototype.scrollRectToVisible,e=(Graph.prototype.scrollRectToVisible=function(t){var e,n;this.useCssTransforms&&(e=this.currentScale,n=this.currentTranslate,t=new mxRectangle((t.x+2*n.x)*e-n.x,(t.y+2*n.y)*e-n.y,t.width*e,t.height*e)),i.apply(this,arguments)},mxCellHighlight.prototype.getStrokeWidth=function(t){var e=this.strokeWidth;return this.graph.useCssTransforms&&(e/=this.graph.currentScale),e},mxGraphView.prototype.getGraphBounds=function(){var t,e,n=this.graphBounds;return this.graph.useCssTransforms&&(t=this.graph.currentTranslate,e=this.graph.currentScale,n=new mxRectangle((n.x+t.x)*e,(n.y+t.y)*e,n.width*e,n.height*e)),n},mxGraphView.prototype.viewStateChanged=function(){this.graph.useCssTransforms?this.validate():this.revalidate(),this.graph.sizeDidChange()},mxGraphView.prototype.validate),l=(mxGraphView.prototype.validate=function(t){this.graph.useCssTransforms&&(this.graph.currentScale=this.scale,this.graph.currentTranslate.x=this.translate.x,this.graph.currentTranslate.y=this.translate.y,this.scale=1,this.translate.x=0,this.translate.y=0),e.apply(this,arguments),this.graph.useCssTransforms&&(this.graph.updateCssTransform(),this.scale=this.graph.currentScale,this.translate.x=this.graph.currentTranslate.x,this.translate.y=this.graph.currentTranslate.y)},mxGraph.prototype.getCellsForGroup),s=(Graph.prototype.getCellsForGroup=function(t){t=l.apply(this,arguments);for(var e=[],n=0;n<t.length;n++)this.isTableRow(t[n])||this.isTableCell(t[n])||e.push(t[n]);return e},mxGraph.prototype.getCellsForUngroup),o=(Graph.prototype.getCellsForUngroup=function(t){t=s.apply(this,arguments);for(var e=[],n=0;n<t.length;n++)this.isTable(t[n])||this.isTableRow(t[n])||this.isTableCell(t[n])||e.push(t[n]);return e},Graph.prototype.updateCssTransform=function(){var t,e,n,i,l=this.view.getDrawPane();null!=l&&(l=l.parentNode,this.useCssTransforms?(t=l.getAttribute("transform"),l.setAttribute("transformOrigin","0 0"),e=Math.round(100*this.currentScale)/100,n=Math.round(100*this.currentTranslate.x)/100,i=Math.round(100*this.currentTranslate.y)/100,l.setAttribute("transform","scale("+e+","+e+")translate("+n+","+i+")"),t!=l.getAttribute("transform")&&this.fireEvent(new mxEventObject("cssTransformChanged"),"transform",l.getAttribute("transform"))):(l.removeAttribute("transformOrigin"),l.removeAttribute("transform")))},mxGraphView.prototype.validateBackgroundPage),r=(mxGraphView.prototype.validateBackgroundPage=function(){var t=this.graph.useCssTransforms,e=this.scale,n=this.translate;t&&(this.scale=this.graph.currentScale,this.translate=this.graph.currentTranslate),o.apply(this,arguments),t&&(this.scale=e,this.translate=n)},mxGraph.prototype.updatePageBreaks);mxGraph.prototype.updatePageBreaks=function(t,e,n){var i=this.useCssTransforms,l=this.view.scale,s=this.view.translate;i&&(this.view.scale=1,this.view.translate=new mxPoint(0,0),this.useCssTransforms=!1),r.apply(this,arguments),i&&(this.view.scale=l,this.view.translate=s,this.useCssTransforms=!0)}}(),Graph.prototype.isLightboxView=function(){return this.lightbox},Graph.prototype.isViewer=function(){return!1},Graph.prototype.labelLinkClicked=function(t,e,n){var i=e.getAttribute("href");i!=Graph.sanitizeLink(i)&&Graph.sanitizeNode(e),null!=i&&!this.isCustomLink(i)&&(mxEvent.isLeftMouseButton(n)&&!mxEvent.isPopupTrigger(n)||mxEvent.isTouchEvent(n))&&(this.isEnabled()&&!this.isCellLocked(t.cell)||(e=this.isBlankLink(i)?this.linkTarget:"_top",this.openLink(this.getAbsoluteUrl(i),e)),mxEvent.consume(n))},Graph.prototype.openLink=function(t,e,n){var i,l=window;try{null!=(t=Graph.sanitizeLink(t))&&("_self"==e&&window!=window.top?window.location.href=t:t.substring(0,this.baseUrl.length)==this.baseUrl&&"#"==t.charAt(this.baseUrl.length)&&"_top"==e&&window==window.top?(i=t.split("#")[1],window.location.hash=="#"+i&&(window.location.hash=""),window.location.hash=i):null==(l=window.open(t,null!=e?e:"_blank",n?null:"noopener,noreferrer"))||n||(l.opener=null))}catch(t){}return l},Graph.prototype.getLinkTitle=function(t){return t.substring(t.lastIndexOf("/")+1)},Graph.prototype.isCustomLink=function(t){return"data:"==t.substring(0,5)},Graph.prototype.customLinkClicked=function(t,e){return!1},Graph.prototype.isExternalProtocol=function(t){return"mailto:"===t.substring(0,7)},Graph.prototype.isBlankLink=function(t){return!this.isExternalProtocol(t)&&("blank"===this.linkPolicy||"self"!==this.linkPolicy&&!this.isRelativeUrl(t)&&t.substring(0,this.domainUrl.length)!==this.domainUrl)},Graph.prototype.isRelativeUrl=function(t){return null!=t&&!this.absoluteUrlPattern.test(t)&&"data:"!==t.substring(0,5)&&!this.isExternalProtocol(t)},Graph.prototype.getAbsoluteUrl=function(t){return t=null!=t&&this.isRelativeUrl(t)?"#"==t.charAt(0)?this.baseUrl+t:"/"==t.charAt(0)?this.domainUrl+t:this.domainPathUrl+t:t},Graph.prototype.initLayoutManager=function(){this.layoutManager=new mxLayoutManager(this),this.layoutManager.hasLayout=function(t){return null!=this.graph.getCellStyle(t).childLayout},this.layoutManager.getLayout=function(t,e){var n=this.graph.model.getParent(t);if(!this.graph.isCellCollapsed(t)&&(e!=mxEvent.BEGIN_UPDATE||this.hasLayout(n,e))){n=this.graph.getCellStyle(t);if("stackLayout"==n.childLayout)return(e=new mxStackLayout(this.graph,!0)).resizeParentMax="1"==mxUtils.getValue(n,"resizeParentMax","1"),e.horizontal="1"==mxUtils.getValue(n,"horizontalStack","1"),e.resizeParent="1"==mxUtils.getValue(n,"resizeParent","1"),e.resizeLast="1"==mxUtils.getValue(n,"resizeLast","0"),e.spacing=n.stackSpacing||e.spacing,e.border=n.stackBorder||e.border,e.marginLeft=n.marginLeft||0,e.marginRight=n.marginRight||0,e.marginTop=n.marginTop||0,e.marginBottom=n.marginBottom||0,e.allowGaps=n.allowGaps||0,e.fill=!0,e.allowGaps&&(e.gridSize=parseFloat(mxUtils.getValue(n,"stackUnitSize",20))),e;if("treeLayout"==n.childLayout)return(t=new mxCompactTreeLayout(this.graph)).horizontal="1"==mxUtils.getValue(n,"horizontalTree","1"),t.resizeParent="1"==mxUtils.getValue(n,"resizeParent","1"),t.sortEdges="1"==mxUtils.getValue(n,"sortEdges","0"),t.groupPadding=mxUtils.getValue(n,"parentPadding",20),t.levelDistance=mxUtils.getValue(n,"treeLevelDistance",30),t.maintainParentLocation=!0,t.edgeRouting=!1,t.resetEdges=!1,t;if("flowLayout"==n.childLayout)return(e=new mxHierarchicalLayout(this.graph,mxUtils.getValue(n,"flowOrientation",mxConstants.DIRECTION_EAST))).resizeParent="1"==mxUtils.getValue(n,"resizeParent","1"),e.parentBorder=mxUtils.getValue(n,"parentPadding",20),e.maintainParentLocation=!0,e.intraCellSpacing=mxUtils.getValue(n,"intraCellSpacing",mxHierarchicalLayout.prototype.intraCellSpacing),e.interRankCellSpacing=mxUtils.getValue(n,"interRankCellSpacing",mxHierarchicalLayout.prototype.interRankCellSpacing),e.interHierarchySpacing=mxUtils.getValue(n,"interHierarchySpacing",mxHierarchicalLayout.prototype.interHierarchySpacing),e.parallelEdgeSpacing=mxUtils.getValue(n,"parallelEdgeSpacing",mxHierarchicalLayout.prototype.parallelEdgeSpacing),e;if("circleLayout"==n.childLayout)return new mxCircleLayout(this.graph);if("organicLayout"==n.childLayout)return new mxFastOrganicLayout(this.graph);if("tableLayout"==n.childLayout)return new TableLayout(this.graph);if(null!=n.childLayout&&"["==String(n.childLayout).charAt(0))try{return new mxCompositeLayout(this.graph,this.graph.createLayouts(JSON.parse(n.childLayout)))}catch(t){null!=window.console&&console.error(t)}}return null}},Graph.prototype.createLayouts=function(t){for(var e=[],n=0;n<t.length;n++){if(!(0<=mxUtils.indexOf(Graph.layoutNames,t[n].layout)))throw Error(mxResources.get("invalidCallFnNotFound",[t[n].layout]));var i="mxOrgChartLayout"==t[n].layout&&null!=t[n].config?new __mxOutput[t[n].layout](this,t[n].config.branchOptimizer):new __mxOutput[t[n].layout](this);if(null!=t[n].config)for(var l in t[n].config)"mxOrgChartLayout"==t[n].layout&&"branchOptimizer"==l||(i[l]=t[n].config[l]);e.push(i)}return e},Graph.prototype.getDataForCells=function(t,e){for(var n=[],i=0;i<t.length;i++){var l={},s=(l.id=t[i].id,null!=t[i].value?t[i].value.attributes:null);if(this.isReplacePlaceholders(t[i])&&e&&(l.value=this.getLabel(t[i])),null!=s)for(var o=0;o<s.length;o++)l[s[o].nodeName]=s[o].nodeValue;else l.label=this.convertValueToString(t[i]);n.push(l)}return n},Graph.prototype.getNodesForCells=function(t){for(var e=[],n=0;n<t.length;n++){var i=this.view.getState(t[n]);if(null!=i){for(var l=this.cellRenderer.getShapesForState(i),s=0;s<l.length;s++)null!=l[s]&&null!=l[s].node&&e.push(l[s].node);null!=i.control&&null!=i.control.node&&e.push(i.control.node)}}return e},Graph.prototype.createWipeAnimations=function(t,e){for(var n=[],i=0;i<t.length;i++){var l=this.view.getState(t[i]);null!=l&&null!=l.shape&&(this.model.isEdge(l.cell)&&null!=l.absolutePoints&&1<l.absolutePoints.length?n.push(this.createEdgeWipeAnimation(l,e)):this.model.isVertex(l.cell)&&null!=l.shape.bounds&&n.push(this.createVertexWipeAnimation(l,e)))}return n},Graph.prototype.createEdgeWipeAnimation=function(s,o){var r=s.absolutePoints.slice(),a=s.segments,h=s.length,u=r.length;return{execute:mxUtils.bind(this,function(t,e){if(null!=s.shape){for(var n=[r[0]],e=t/e,i=h*(e=o?e:1-e),l=1;l<u;l++){if(i<=a[l-1]){n.push(new mxPoint(r[l-1].x+(r[l].x-r[l-1].x)*i/a[l-1],r[l-1].y+(r[l].y-r[l-1].y)*i/a[l-1]));break}i-=a[l-1],n.push(r[l])}s.shape.points=n,s.shape.redraw(),0==t&&Graph.setOpacityForNodes(this.getNodesForCells([s.cell]),1),null!=s.text&&null!=s.text.node&&(s.text.node.style.opacity=e)}}),stop:mxUtils.bind(this,function(){null!=s.shape&&(s.shape.points=r,s.shape.redraw(),null!=s.text&&null!=s.text.node&&(s.text.node.style.opacity=""),Graph.setOpacityForNodes(this.getNodesForCells([s.cell]),o?1:0))})}},Graph.prototype.createVertexWipeAnimation=function(n,i){var l=new mxRectangle.fromRectangle(n.shape.bounds);return{execute:mxUtils.bind(this,function(t,e){null!=n.shape&&(e=t/e,n.shape.bounds=new mxRectangle(l.x,l.y,l.width*(e=i?e:1-e),l.height),n.shape.redraw(),0==t&&Graph.setOpacityForNodes(this.getNodesForCells([n.cell]),1),null!=n.text)&&null!=n.text.node&&(n.text.node.style.opacity=e)}),stop:mxUtils.bind(this,function(){null!=n.shape&&(n.shape.bounds=l,n.shape.redraw(),null!=n.text&&null!=n.text.node&&(n.text.node.style.opacity=""),Graph.setOpacityForNodes(this.getNodesForCells([n.cell]),i?1:0))})}},Graph.prototype.executeAnimations=function(e,n,i,t){i=null!=i?i:30,t=null!=t?t:30;var l=null,s=0,o=mxUtils.bind(this,function(){if(s==i||this.stoppingCustomActions){window.clearInterval(l);for(var t=0;t<e.length;t++)e[t].stop();null!=n&&n()}else for(t=0;t<e.length;t++)e[t].execute(s,i);s++}),l=window.setInterval(o,t);o()},Graph.prototype.getPageSize=function(){return this.pageVisible&&null!=this.pageFormat?new mxRectangle(0,0,this.pageFormat.width*this.pageScale,this.pageFormat.height*this.pageScale):this.scrollTileSize},Graph.prototype.getPageLayout=function(t,e,n){t=null!=t?t:this.getGraphBounds(),e=null!=e?e:this.view.translate,n=null!=n?n:this.view.scale;var i,l,s=this.getPageSize();return 0==t.width||0==t.height?new mxRectangle(0,0,1,1):new mxRectangle(i=Math.floor(Math.ceil(t.x/n-e.x)/s.width),l=Math.floor(Math.ceil(t.y/n-e.y)/s.height),Math.ceil((Math.floor((t.x+t.width)/n)-e.x)/s.width)-i,Math.ceil((Math.floor((t.y+t.height)/n)-e.y)/s.height)-l)},Graph.prototype.getDefaultTranslate=function(t){var e=this.getPagePadding(),n=this.getPageSize();return new mxPoint(e.x-t.x*n.width,e.y-t.y*n.height)},Graph.prototype.updateMinimumSize=function(){var t=this.getPageLayout(),e=this.getPagePadding(),n=this.getPageSize(),i=Math.ceil(2*e.x+t.width*n.width),e=Math.ceil(2*e.y+t.height*n.height);null!=this.minimumGraphSize&&this.minimumGraphSize.width==i&&this.minimumGraphSize.height==e||(this.minimumGraphSize=new mxRectangle(0,0,i,e))},Graph.prototype.sanitizeHtml=function(t,e){return Graph.sanitizeHtml(t,e)},Graph.prototype.updatePlaceholders=function(){var t,e=!1;for(t in this.model.cells){var n=this.model.cells[t];this.isReplacePlaceholders(n)&&(this.view.invalidate(n,!1,!1),e=!0)}e&&this.view.validate()},Graph.prototype.isReplacePlaceholders=function(t){return null!=t.value&&"object"==typeof t.value&&"1"==t.value.getAttribute("placeholders")},Graph.prototype.isZoomWheelEvent=function(t){return Graph.zoomWheel&&!mxEvent.isShiftDown(t)&&!mxEvent.isMetaDown(t)&&!mxEvent.isAltDown(t)&&(!mxEvent.isControlDown(t)||mxClient.IS_MAC)||!Graph.zoomWheel&&(mxEvent.isAltDown(t)||mxEvent.isControlDown(t))},Graph.prototype.isScrollWheelEvent=function(t){return!this.isZoomWheelEvent(t)},Graph.prototype.isTransparentClickEvent=function(t){return mxEvent.isAltDown(t)||mxClient.IS_CHROMEOS&&mxEvent.isShiftDown(t)},Graph.prototype.isIgnoreTerminalEvent=function(t){return mxEvent.isAltDown(t)&&!mxEvent.isShiftDown(t)&&!mxEvent.isControlDown(t)&&!mxEvent.isMetaDown(t)},Graph.prototype.isEdgeIgnored=function(t){var e=!1;return null!=t&&(t=this.getCurrentCellStyle(t),e="1"==mxUtils.getValue(t,"ignoreEdge","0")),e},Graph.prototype.isSplitTarget=function(t,e,n){return!this.model.isEdge(e[0])&&!mxEvent.isAltDown(n)&&!mxEvent.isShiftDown(n)&&!this.isCellLocked(this.getLayerForCell(t))&&mxGraph.prototype.isSplitTarget.apply(this,arguments)},Graph.prototype.getLabel=function(t){var e=mxGraph.prototype.getLabel.apply(this,arguments);return e=null!=e&&this.isReplacePlaceholders(t)&&null==t.getAttribute("placeholder")?this.replacePlaceholders(t,e):e},Graph.prototype.isLabelMovable=function(t){var e=this.getCurrentCellStyle(t);return!this.isCellLocked(t)&&(this.model.isEdge(t)&&this.edgeLabelsMovable||this.model.isVertex(t)&&(this.vertexLabelsMovable||"1"==mxUtils.getValue(e,"labelMovable","0")))},Graph.prototype.setGridSize=function(t){this.gridSize=t,this.fireEvent(new mxEventObject("gridSizeChanged"))},Graph.prototype.setDefaultParent=function(t){this.defaultParent=t,this.fireEvent(new mxEventObject("defaultParentChanged"))},Graph.prototype.getClickableLinkForCell=function(t){do{var e=this.getLinkForCell(t);if(null!=e)return e}while(null!=(t=this.model.getParent(t)));return null},Graph.prototype.getGlobalVariable=function(t){var e=null;return"date"==t?e=(new Date).toLocaleDateString():"time"==t?e=(new Date).toLocaleTimeString():"timestamp"==t?e=(new Date).toLocaleString():"date{"==t.substring(0,5)&&(t=t.substring(5,t.length-1),e=this.formatDate(new Date,t)),e},Graph.prototype.formatDate=function(t,e,n){null==this.dateFormatCache&&(this.dateFormatCache={i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},masks:{default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"}});function i(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}var l=this.dateFormatCache;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(t)||/\d/.test(t)||(e=t,t=void 0),t=t?new Date(t):new Date,isNaN(t))throw SyntaxError("invalid date");"UTC:"==(e=String(l.masks[e]||e||l.masks.default)).slice(0,4)&&(e=e.slice(4),n=!0);var s=n?"getUTC":"get",o=t[s+"Date"](),r=t[s+"Day"](),a=t[s+"Month"](),h=t[s+"FullYear"](),u=t[s+"Hours"](),d=t[s+"Minutes"](),p=t[s+"Seconds"](),s=t[s+"Milliseconds"](),m=n?0:t.getTimezoneOffset(),c={d:o,dd:i(o),ddd:l.i18n.dayNames[r],dddd:l.i18n.dayNames[r+7],m:a+1,mm:i(a+1),mmm:l.i18n.monthNames[a],mmmm:l.i18n.monthNames[a+12],yy:String(h).slice(2),yyyy:h,h:u%12||12,hh:i(u%12||12),H:u,HH:i(u),M:d,MM:i(d),s:p,ss:i(p),l:i(s,3),L:i(99<s?Math.round(s/10):s),t:u<12?"a":"p",tt:u<12?"am":"pm",T:u<12?"A":"P",TT:u<12?"AM":"PM",Z:n?"UTC":(String(t).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),o:(0<m?"-":"+")+i(100*Math.floor(Math.abs(m)/60)+Math.abs(m)%60,4),S:["th","st","nd","rd"][3<o%10?0:(o%100-o%10!=10)*o%10]};return e.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,function(t){return t in c?c[t]:t.slice(1,t.length-1)})},Graph.prototype.getLayerForCell=function(t){for(;null!=t&&!this.model.isLayer(t);)t=this.model.getParent(t);return t},Graph.prototype.getLayerForCells=function(t){var e=null;if(0<t.length)for(var e=this.getLayerForCell(t[0]),n=1;n<t.length;n++)if(!this.model.isAncestor(e,t[n])){e=null;break}return e},Graph.prototype.createLayersDialog=function(s,o){for(var r=document.createElement("div"),a=(r.style.position="absolute",this.getModel()),t=a.getChildCount(a.root),e=0;e<t;e++)mxUtils.bind(this,function(t){var e=this.convertValueToString(t)||mxResources.get("background")||"Background",n=document.createElement("div"),i=(n.style.overflow="hidden",n.style.textOverflow="ellipsis",n.style.padding="2px",n.style.whiteSpace="nowrap",n.style.cursor="pointer",n.setAttribute("title",mxResources.get(a.isVisible(t)?"hideIt":"show",[e])),document.createElement("img"));function l(){a.isVisible(t)?(i.setAttribute("src",Editor.visibleImage),mxUtils.setOpacity(n,75)):(i.setAttribute("src",Editor.hiddenImage),mxUtils.setOpacity(n,25))}i.setAttribute("draggable","false"),i.setAttribute("align","absmiddle"),i.setAttribute("border","0"),i.style.position="relative",i.style.width="16px",i.style.padding="0px 6px 0 4px",o&&(i.style.filter="invert(100%)",i.style.top="-2px"),n.appendChild(i),mxUtils.write(n,e),r.appendChild(n),mxEvent.addListener(n,"click",function(){a.setVisible(t,!a.isVisible(t)),l(),null!=s&&s(t)}),l()})(a.getChildAt(a.root,e));return r},Graph.prototype.replacePlaceholders=function(t,e,n,i){var l=[];if(null!=e){for(var s=0;match=this.placeholderPattern.exec(e);){var o=match[0];if(2<o.length&&"%label%"!=o&&"%tooltip%"!=o){var r=null;if(match.index>s&&"%"==e.charAt(match.index-1))r=o.substring(1);else{var a,h=o.substring(1,o.length-1);if("id"==h)r=t.id;else if("width"==h&&this.model.isVertex(t))null!=(a=this.getCellGeometry(t))&&(r=a.width);else if("height"==h&&this.model.isVertex(t))null!=(a=this.getCellGeometry(t))&&(r=a.height);else if("length"==h){for(var u=t;null!=u&&!this.model.isEdge(u);)u=this.model.getParent(u);var d=this.view.getState(u);null!=d&&(r=Math.round(d.length/this.view.scale))}else if(h.indexOf("{")<0)for(var p=t;null==r&&null!=p;)null!=p.value&&"object"==typeof p.value&&null==(r=Graph.translateDiagram&&null!=Graph.diagramLanguage?p.getAttribute(h+"_"+Graph.diagramLanguage):r)&&(r=p.hasAttribute(h)?null!=p.getAttribute(h)?p.getAttribute(h):"":null),p=this.model.getParent(p);null==(r=null==r?this.getGlobalVariable(h):r)&&null!=n&&(r=n[h])}l.push(e.substring(s,match.index)+(null!=r?r:o)),s=match.index+o.length}}l.push(e.substring(s))}return l.join("")},Graph.prototype.restoreSelection=function(t){if(null!=t&&0<t.length){for(var e=[],n=0;n<t.length;n++){var i=this.model.getCell(t[n].id);null!=i&&e.push(i)}this.setSelectionCells(e)}else this.clearSelection()},Graph.prototype.selectCellForEvent=function(t,e){mxEvent.isShiftDown(e)&&!this.isSelectionEmpty()&&this.selectTableRange(this.getSelectionCell(),t)||mxGraph.prototype.selectCellForEvent.apply(this,arguments)},Graph.prototype.selectTableRange=function(t,e){var n=!1;if(this.isTableCell(t)&&this.isTableCell(e)){var i=this.model.getParent(t),l=this.model.getParent(i),s=this.model.getParent(e);if(l==this.model.getParent(s)){for(var t=i.getIndex(t),i=l.getIndex(i),e=s.getIndex(e),s=l.getIndex(s),o=Math.min(i,s),r=Math.max(i,s),a=Math.min(t,e),h=Math.max(t,e),u=[],d=o;d<=r;d++)for(var p=this.model.getChildAt(l,d),m=a;m<=h;m++)u.push(this.model.getChildAt(p,m));0<u.length&&(1<u.length||1<this.getSelectionCount()||!this.isCellSelected(u[0]))&&(this.setSelectionCells(u),n=!0)}}return n},Graph.prototype.snapCellsToGrid=function(t,e){this.getModel().beginUpdate();try{for(var n=0;n<t.length;n++){var i=t[n],l=this.getCellGeometry(i);if(null!=l){if(l=l.clone(),this.getModel().isVertex(i))l.x=Math.round(l.x/e)*e,l.y=Math.round(l.y/e)*e,l.width=Math.round(l.width/e)*e,l.height=Math.round(l.height/e)*e;else if(this.getModel().isEdge(i)&&null!=l.points)for(var s=0;s<l.points.length;s++)l.points[s].x=Math.round(l.points[s].x/e)*e,l.points[s].y=Math.round(l.points[s].y/e)*e;this.getModel().setGeometry(i,l)}}}finally{this.getModel().endUpdate()}},Graph.prototype.removeChildCells=function(t){this.model.beginUpdate();try{for(var e=this.model.getChildCount(t);0<=e;e--)this.model.remove(this.model.getChildAt(t,e))}finally{this.model.endUpdate()}},Graph.prototype.updateShapes=function(t,e,n){this.model.beginUpdate();try{var i=this.model.getStyle(t),l=n?this.stylesheet.getCellStyle(i,{},!1):null;null!=l&&null==l[mxConstants.STYLE_SHAPE]&&(this.model.isVertex(t)?l[mxConstants.STYLE_SHAPE]=this.stylesheet.getDefaultVertexStyle()[mxConstants.STYLE_SHAPE]:this.model.isEdge(t)&&(l[mxConstants.STYLE_SHAPE]=this.stylesheet.getDefaultEdgeStyle()[mxConstants.STYLE_SHAPE]));for(var s,o,r=0;r<e.length;r++)(this.model.isVertex(t)&&this.model.isVertex(e[r])||this.model.isEdge(t)&&this.model.isEdge(e[r]))&&(n?(null!=(s=this.model.getStyle(e[r]))&&(0<(o=s.split(";")).length&&o[0].indexOf("=")<0&&(o=o.slice(1)),this.model.setStyle(e[r],o.join(";"))),this.setCellStyles(mxConstants.STYLE_PERIMETER,null,[e[r]]),this.setCellStyles("points",null,[e[r]]),this.pasteStyle(l,[e[r]],null,!0)):(l=this.copyStyle(e[r]),this.model.setStyle(e[r],i),this.pasteStyle(l,[e[r]]))),"1"==mxUtils.getValue(this.getCellStyle(e[r],!1),"composite","0")&&this.removeChildCells(e[r])}finally{this.model.endUpdate()}},Graph.prototype.selectCellsForConnectVertex=function(t,e,n){2==t.length&&this.model.isVertex(t[1])?(this.setSelectionCell(t[1]),this.scrollCellToVisible(t[1]),null!=n&&(mxEvent.isTouchEvent(e)?n.update(n.getState(this.view.getState(t[1]))):n.reset())):this.setSelectionCells(t)},Graph.prototype.isCloneConnectSource=function(t){var e=null;return null!=this.layoutManager&&(e=this.layoutManager.getLayout(this.model.getParent(t))),this.isTableRow(t)||this.isTableCell(t)||null!=e&&e.constructor==mxStackLayout},Graph.prototype.insertEdgeBeforeCell=function(t,e){for(var n=null,i=e;null!=i.parent&&null!=i.geometry&&i.geometry.relative&&i.parent!=t.parent;)i=this.model.getParent(i);null!=i&&null!=i.parent&&i.parent==t.parent&&(n=i.parent.getIndex(i),this.model.add(i.parent,t,n))},Graph.prototype.connectVertex=function(s,o,t,r,e,n,a,h){if(n=n||!1,s.geometry.relative&&this.model.isEdge(s.parent))return[];for(;s.geometry.relative&&this.model.isVertex(s.parent);)s=s.parent;var u=this.isCloneConnectSource(s),i=u?s:this.getCompositeParent(s),d=s.geometry.relative&&null!=s.parent.geometry?new mxPoint(s.parent.geometry.width*s.geometry.x,s.parent.geometry.height*s.geometry.y):new mxPoint(i.geometry.x,i.geometry.y),t=(o==mxConstants.DIRECTION_NORTH?(d.x+=i.geometry.width/2,d.y-=t):o==mxConstants.DIRECTION_SOUTH?(d.x+=i.geometry.width/2,d.y+=i.geometry.height+t):(o==mxConstants.DIRECTION_WEST?d.x-=t:d.x+=i.geometry.width+t,d.y+=i.geometry.height/2),this.view.getState(this.model.getParent(s))),i=this.view.scale,l=this.view.translate,p=l.x*i,l=l.y*i,t=(null!=t&&this.model.isVertex(t.cell)&&(p=t.x,l=t.y),this.model.isVertex(s.parent)&&s.geometry.relative&&(d.x+=s.parent.geometry.x,d.y+=s.parent.geometry.y),n?null:new mxRectangle(p+d.x*i,l+d.y*i).grow(40*i)),m=null!=t?this.getCells(0,0,0,0,null,null,t,null,!0):null,c=this.view.getState(s),g=null,x=null;if(null!=m)for(var y,m=m.reverse(),C=0;C<m.length;C++)this.isCellLocked(m[C])||this.model.isEdge(m[C])||m[C]==s||(this.model.isAncestor(s,m[C])||!this.isContainer(m[C])||null!=g&&m[C]!=this.model.getParent(s)?null!=x||!this.isCellConnectable(m[C])||this.model.isAncestor(m[C],s)||this.isSwimlane(m[C])||(y=this.view.getState(m[C]),null==c)||null==y||mxUtils.intersects(c,y)||(x=m[C]):g=m[C]);var f=!mxEvent.isShiftDown(r)||mxEvent.isControlDown(r)||e,v=(f&&("1"!=urlParams.sketch||e)&&(o==mxConstants.DIRECTION_NORTH?d.y-=s.geometry.height/2:o==mxConstants.DIRECTION_SOUTH?d.y+=s.geometry.height/2:o==mxConstants.DIRECTION_WEST?d.x-=s.geometry.width/2:d.x+=s.geometry.width/2),[]),E=x,x=g,n=mxUtils.bind(this,function(t){if(null==a||null!=t||null==x&&u){this.model.beginUpdate();try{null==E&&f&&(e=this.getAbsoluteParent(null!=t?t:s),e=u?s:this.getCompositeParent(e),E=null!=t?t:this.duplicateCells([e],!1)[0],null!=t&&this.addCells([E],this.model.getParent(s),null,null,null,!0),null!=(n=this.getCellGeometry(E))&&(null!=t&&"1"==urlParams.sketch&&(o==mxConstants.DIRECTION_NORTH?d.y-=n.height/2:o==mxConstants.DIRECTION_SOUTH?d.y+=n.height/2:o==mxConstants.DIRECTION_WEST?d.x-=n.width/2:d.x+=n.width/2),n.x=d.x-n.width/2,n.y=d.y-n.height/2),null!=g?(this.addCells([E],g,null,null,null,!0),x=null):f&&!u&&this.addCells([E],this.getDefaultParent(),null,null,null,!0));var e,n,i,l=mxEvent.isControlDown(r)&&mxEvent.isShiftDown(r)&&f||null==x&&u?null:this.insertEdge(this.model.getParent(s),null,"",s,E,this.createCurrentEdgeStyle());null!=l&&(v.push(l),this.applyNewEdgeStyle(s,[l],o),this.connectionHandler.insertBeforeSource)&&this.insertEdgeBeforeCell(l,s),null==x&&null!=E&&null!=s.parent&&u&&o==mxConstants.DIRECTION_WEST&&(i=s.parent.getIndex(s),this.model.add(s.parent,E,i)),null==x&&null!=E&&v.push(E),null==E&&null!=l&&l.geometry.setTerminalPoint(d,!1),null!=l&&this.fireEvent(new mxEventObject("cellsInserted","cells",[l]))}finally{this.model.endUpdate()}}if(null==h)return v;h(v)});if(null==a||null!=E||!f||null==x&&u)return n(E);a(p+d.x*i,l+d.y*i,n)},Graph.prototype.getIndexableText=function(t){t=null!=t?t:this.model.getDescendants(this.model.root);for(var e=document.createElement("div"),n=[],i="",l=0;l<t.length;l++){var s=t[l];(this.model.isVertex(s)||this.model.isEdge(s))&&(i=this.isHtmlLabel(s)?(e.innerHTML=Graph.sanitizeHtml(this.getLabel(s)),mxUtils.extractTextWithWhitespace([e])):this.getLabel(s),0<(i=mxUtils.trim(i.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," "))).length)&&n.push(i)}return n.join(" ")},Graph.prototype.convertValueToString=function(t){var e=this.model.getValue(t);if(null==e||"object"!=typeof e)return mxGraph.prototype.convertValueToString.apply(this,arguments);var n=null;if(this.isReplacePlaceholders(t)&&null!=t.getAttribute("placeholder"))for(var i=t.getAttribute("placeholder"),l=t;null==n&&null!=l;)null!=l.value&&"object"==typeof l.value&&(n=l.hasAttribute(i)?null!=l.getAttribute(i)?l.getAttribute(i):"":null),l=this.model.getParent(l);else{n=null;null==(n=Graph.translateDiagram&&null!=Graph.diagramLanguage?e.getAttribute("label_"+Graph.diagramLanguage):n)&&(n=e.getAttribute("label")||"")}return n||""},Graph.prototype.getLinksForState=function(t){return null!=t&&null!=t.text&&null!=t.text.node?t.text.node.getElementsByTagName("a"):null},Graph.prototype.getLinkForCell=function(t,e){return null!=t.value&&"object"==typeof t.value?(t=t.value.getAttribute("link"),e?t:mxUtils.removeJavascriptProtocol(t)):null},Graph.prototype.getLinkTargetForCell=function(t){return null!=t.value&&"object"==typeof t.value?t.value.getAttribute("linkTarget"):null},Graph.prototype.postProcessCellStyle=function(t,e){return this.updateHorizontalStyle(t,this.replaceDefaultColors(t,mxGraph.prototype.postProcessCellStyle.apply(this,arguments)))},Graph.prototype.updateHorizontalStyle=function(t,e){var n;return null!=t&&null!=e&&null!=this.layoutManager&&(n=this.model.getParent(t),this.model.isVertex(n))&&this.isCellCollapsed(t)&&null!=(t=this.layoutManager.getLayout(n))&&t.constructor==mxStackLayout&&(e[mxConstants.STYLE_HORIZONTAL]=!t.horizontal),e},Graph.prototype.replaceDefaultColors=function(t,e){var n,i;return null!=e&&(n=mxUtils.hex2rgb(this.shapeBackgroundColor),i=mxUtils.hex2rgb(this.shapeForegroundColor),this.replaceDefaultColor(e,mxConstants.STYLE_FONTCOLOR,i,n),this.replaceDefaultColor(e,mxConstants.STYLE_FILLCOLOR,n,i),this.replaceDefaultColor(e,mxConstants.STYLE_GRADIENTCOLOR,i,n),this.replaceDefaultColor(e,mxConstants.STYLE_STROKECOLOR,i,n),this.replaceDefaultColor(e,mxConstants.STYLE_IMAGE_BORDER,i,n),this.replaceDefaultColor(e,mxConstants.STYLE_IMAGE_BACKGROUND,n,i),this.replaceDefaultColor(e,mxConstants.STYLE_LABEL_BORDERCOLOR,i,n),this.replaceDefaultColor(e,mxConstants.STYLE_SWIMLANE_FILLCOLOR,n,i),this.replaceDefaultColor(e,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,n,i)),e},Graph.prototype.replaceDefaultColor=function(t,e,n,i){null!=t&&"default"==t[e]&&null!=n&&(t[e]=this.getDefaultColor(t,e,n,i))},Graph.prototype.getDefaultColor=function(t,e,n,i){return n="invert"==t["default"+e.charAt(0).toUpperCase()+e.substring(1)]?i:n},Graph.prototype.updateAlternateBounds=function(t,e,n){null!=t&&null!=e&&null!=this.layoutManager&&null!=e.alternateBounds&&null!=(t=this.layoutManager.getLayout(this.model.getParent(t)))&&t.constructor==mxStackLayout&&(t.horizontal?e.alternateBounds.height=0:e.alternateBounds.width=0),mxGraph.prototype.updateAlternateBounds.apply(this,arguments)},Graph.prototype.isMoveCellsEvent=function(t,e){return mxEvent.isShiftDown(t)||"1"==mxUtils.getValue(e.style,"moveCells","0")},Graph.prototype.foldCells=function(t,e,n,i,l){if(null!=(n=null==n?this.getFoldableCells(this.getSelectionCells(),t):n)){this.model.beginUpdate();try{if(mxGraph.prototype.foldCells.apply(this,arguments),null!=this.layoutManager)for(var s=0;s<n.length;s++){var o,r,a,h,u,d=this.view.getState(n[s]),p=this.getCellGeometry(n[s]);null==d||null==p||(a=r=0)==(a=p.alternateBounds?(r=p.width-p.alternateBounds.width,p.height-p.alternateBounds.height):(o=this.useCssTransforms?1:this.view.scale,r=Math.round(p.width-d.width/o),Math.round(p.height-d.height/o)))&&0==r||(h=this.model.getParent(n[s]),null==(u=this.layoutManager.getLayout(h))?null!=l&&this.isMoveCellsEvent(l,d)&&this.moveSiblings(d,h,r,a):null!=l&&mxEvent.isAltDown(l)||u.constructor!=mxStackLayout||u.resizeLast||this.resizeParentStacks(h,u,r,a))}}finally{this.model.endUpdate()}this.isEnabled()&&this.setSelectionCells(n)}},Graph.prototype.moveSiblings=function(t,e,n,i){this.model.beginUpdate();try{for(var l,s,o=this.getCellsBeyond(t.x,t.y,e,!0,!0),r=0;r<o.length;r++)o[r]!=t.cell&&(l=this.view.getState(o[r]),s=this.getCellGeometry(o[r]),null!=l)&&null!=s&&((s=s.clone()).translate(Math.round(n*Math.max(0,Math.min(1,(l.x-t.x)/t.width))),Math.round(i*Math.max(0,Math.min(1,(l.y-t.y)/t.height)))),this.model.setGeometry(o[r],s))}finally{this.model.endUpdate()}},Graph.prototype.resizeParentStacks=function(t,e,n,i){if(null!=this.layoutManager&&null!=e&&e.constructor==mxStackLayout&&!e.resizeLast){this.model.beginUpdate();try{for(var l=e.horizontal;null!=t&&null!=e&&e.constructor==mxStackLayout&&e.horizontal==l&&!e.resizeLast;){var s=this.getCellGeometry(t),o=this.view.getState(t);null!=o&&null!=s&&(s=s.clone(),e.horizontal?s.width+=n+Math.min(0,o.width/this.view.scale-s.width):s.height+=i+Math.min(0,o.height/this.view.scale-s.height),this.model.setGeometry(t,s)),t=this.model.getParent(t),e=this.layoutManager.getLayout(t)}}finally{this.model.endUpdate()}}},Graph.prototype.isContainer=function(t){var e=this.getCurrentCellStyle(t);return this.isSwimlane(t)?"0"!=e.container:"1"==e.container},Graph.prototype.isCellConnectable=function(t){var e=this.getCurrentCellStyle(t);return!this.isCellLocked(this.getLayerForCell(t))&&(null!=e.connectable?"0"!=e.connectable:mxGraph.prototype.isCellConnectable.apply(this,arguments))},Graph.prototype.isLabelMovable=function(t){t=this.getCurrentCellStyle(t);return null!=t.movableLabel?"0"!=t.movableLabel:mxGraph.prototype.isLabelMovable.apply(this,arguments)},Graph.prototype.selectAll=function(t){t=t||this.getDefaultParent(),this.isCellLocked(t)||mxGraph.prototype.selectAll.apply(this,arguments)},Graph.prototype.selectCells=function(t,e,n){n=n||this.getDefaultParent(),this.isCellLocked(n)||mxGraph.prototype.selectCells.apply(this,arguments)},Graph.prototype.getSwimlaneAt=function(t,e,n){var i=mxGraph.prototype.getSwimlaneAt.apply(this,arguments);return i=this.isCellLocked(i)?null:i},Graph.prototype.isCellFoldable=function(t){var e=this.getCurrentCellStyle(t);return this.foldingEnabled&&"0"!=mxUtils.getValue(e,mxConstants.STYLE_RESIZABLE,"1")&&("1"==e.treeFolding||!this.isCellLocked(t)&&(this.isContainer(t)&&"0"!=e.collapsible||!this.isContainer(t)&&"1"==e.collapsible))},Graph.prototype.reset=function(){this.isEditing()&&this.stopEditing(!0),this.escape(),this.isSelectionEmpty()||this.clearSelection()},Graph.prototype.zoom=function(t,e){t=Math.max(.01,Math.min(this.view.scale*t,160))/this.view.scale,mxGraph.prototype.zoom.apply(this,arguments)},Graph.prototype.zoomIn=function(){this.view.scale<.15?this.zoom((this.view.scale+.01)/this.view.scale):this.zoom(Math.round(this.view.scale*this.zoomFactor*20)/20/this.view.scale)},Graph.prototype.zoomOut=function(){this.view.scale<=.15?this.zoom((this.view.scale-.01)/this.view.scale):this.zoom(Math.round(this.view.scale*(1/this.zoomFactor)*20)/20/this.view.scale)},Graph.prototype.fitPages=function(t,e){var n=1,i=(null==t&&(t=(i=this.getPageLayout()).width,n=i.height),this.pageScale),l=this.pageFormat,s=this.container.clientWidth-10,o=this.container.clientHeight-10,s=s/(t*l.width)/i,s=Math.floor(20*(e?s:Math.min(s,o/(n*l.height)/i)))/20;this.zoomTo(s),mxUtils.hasScrollbars(this.container)&&(o=this.getPagePadding(),this.container.scrollLeft=Math.min(o.x*this.view.scale,(this.container.scrollWidth-this.container.clientWidth)/2)-1,e||(this.container.scrollTop=2<=t?Math.min(o.y,(this.container.scrollHeight-this.container.clientHeight)/2):o.y*this.view.scale-1))},Graph.prototype.fitWindow=function(e,n){n=null!=n?n:10;var i=this.container.clientWidth-n,l=this.container.clientHeight-n,t=Math.floor(20*Math.min(i/e.width,l/e.height))/20;this.zoomTo(t),mxUtils.hasScrollbars(this.container)&&window.setTimeout(mxUtils.bind(this,function(){var t=this.view.translate;this.container.scrollLeft=(e.x+t.x)*this.view.scale-Math.max((i-e.width*this.view.scale)/2+n/2,0),this.container.scrollTop=(e.y+t.y)*this.view.scale-Math.max((l-e.height*this.view.scale)/2+n/2,0)}),0)},Graph.prototype.convertValueToTooltip=function(t){var e=null;return mxUtils.isNode(t.value)&&null!=(e=null==(e=Graph.translateDiagram&&null!=Graph.diagramLanguage?t.value.getAttribute("tooltip_"+Graph.diagramLanguage):e)?t.value.getAttribute("tooltip"):e)&&(this.isReplacePlaceholders(t)&&(e=this.replacePlaceholders(t,e)),e=Graph.sanitizeHtml(e)),e},Graph.prototype.getTooltipForCell=function(t){var e="";if(mxUtils.isNode(t.value)&&null==(e=this.convertValueToTooltip(t))){var n=this.builtInProperties,i=t.value.attributes,l=[],e="";this.isEnabled()&&(n.push("linkTarget"),n.push("link"));for(var s=0;s<i.length;s++)(Graph.translateDiagram&&"label"==i[s].nodeName||mxUtils.indexOf(n,i[s].nodeName)<0)&&0<i[s].nodeValue.length&&l.push({name:i[s].nodeName,value:i[s].nodeValue});l.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0});for(s=0;s<l.length;s++)"link"==l[s].name&&this.isCustomLink(l[s].value)||(e+=("link"!=l[s].name?"<b>"+mxUtils.htmlEntities(l[s].name)+":</b> ":"")+mxUtils.htmlEntities(l[s].value)+"\n");0<e.length&&(e=e.substring(0,e.length-1),mxClient.IS_SVG)&&(e='<div style="max-width:360px;text-overflow:ellipsis;overflow:hidden;">'+e+"</div>")}return e},Graph.prototype.addFlowAnimationToNode=function(t,e,n,i){if(null!=t&&null!=i){var l=t.getAttribute("stroke-dasharray"),s=[];if(""==l||null==l){var s=String(mxUtils.getValue(e,mxConstants.STYLE_DASH_PATTERN,"8")).split(" "),o=1==mxUtils.getValue(e,mxConstants.STYLE_FIX_DASH,!1)||null==e.dashPattern?1:mxUtils.getNumber(e,mxConstants.STYLE_STROKEWIDTH,1);if(0<s.length)for(var r=0;r<s.length;r++)s[r]=Math.round(Number(s[r])*n*o*100)/100;t.setAttribute("stroke-dasharray",s.join(" "))}else s=l.split(" ");if(0<s.length){for(var a=0,r=0;r<s.length;r++){var h=parseFloat(s[r]);isNaN(h)||(a+=parseFloat(s[r]))}s.length%2!=0&&(a*=2);var l=Math.round(a/n/16*parseInt(mxUtils.getValue(e,"flowAnimationDuration",500))),u=mxUtils.getValue(e,"flowAnimationTimingFunction","linear"),e=mxUtils.getValue(e,"flowAnimationDirection","normal");t.style.animation=i+" "+l+"ms "+mxUtils.htmlEntities(u)+" infinite "+mxUtils.htmlEntities(e),t.style.strokeDashoffset=a}}},Graph.prototype.addFlowAnimationStyle=function(){var t,e=document.getElementsByTagName("head")[0];return null!=e&&null==this.flowAnimationId&&(this.flowAnimationId="ge-flow-animation-"+Editor.guid(),(t=document.createElement("style")).innerHTML=this.createFlowAnimationCss(this.flowAnimationId),e.appendChild(t)),this.flowAnimationId},Graph.prototype.createFlowAnimationCss=function(t){return"@keyframes "+t+" {\n  to {\n    stroke-dashoffset: 0;\n  }\n}"},Graph.prototype.stringToBytes=function(t){return Graph.stringToBytes(t)},Graph.prototype.bytesToString=function(t){return Graph.bytesToString(t)},Graph.prototype.compressNode=function(t){return Graph.compressNode(t)},Graph.prototype.compress=function(t,e){return Graph.compress(t,e)},Graph.prototype.decompress=function(t,e){return Graph.decompress(t,e)},Graph.prototype.zapGremlins=function(t){return Graph.zapGremlins(t)},function(t){mxEventSource.call(this),this.graph=t,this.init()});function TableLayout(t){mxGraphLayout.call(this,t)}function mxBpmnShape(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeBpmn2SendMarker(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.dy=.5,this.dx=.5,this.notch=0}function mxShapeBpmnEvent(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeBpmnGateway(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxShapeBpmn2Task(t,e,n,i){mxCellRenderer.prototype.getShape("mxgraph.basic.rect").call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.dy=.5,this.dx=.5,this.notch=0}function mxShapeBpmn2Data(t,e,n,i){mxCellRenderer.prototype.getShape("note").call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.dy=.5,this.dx=.5,this.notch=0}function mxShapeBpmn2Swimlane(t,e,n,i){mxCellRenderer.prototype.getShape("note").call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.dy=.5,this.dx=.5,this.notch=0}function mxShapeBpmn2Conversation(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}return mxUtils.extend(HoverIcons,mxEventSource),HoverIcons.prototype.arrowSpacing=2,HoverIcons.prototype.updateDelay=500,HoverIcons.prototype.activationDelay=140,HoverIcons.prototype.currentState=null,HoverIcons.prototype.activeArrow=null,HoverIcons.prototype.inactiveOpacity=15,HoverIcons.prototype.cssCursor="copy",HoverIcons.prototype.checkCollisions=!0,HoverIcons.prototype.arrowFill="#29b6f2",HoverIcons.prototype.triangleUp=mxClient.IS_SVG?Graph.createSvgImage(18,28,'<path d="m 6 26 L 12 26 L 12 12 L 18 12 L 9 1 L 1 12 L 6 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-up.png",26,14),HoverIcons.prototype.triangleRight=mxClient.IS_SVG?Graph.createSvgImage(26,18,'<path d="m 1 6 L 14 6 L 14 1 L 26 9 L 14 18 L 14 12 L 1 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-right.png",14,26),HoverIcons.prototype.triangleDown=mxClient.IS_SVG?Graph.createSvgImage(18,26,'<path d="m 6 1 L 6 14 L 1 14 L 9 26 L 18 14 L 12 14 L 12 1 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-down.png",26,14),HoverIcons.prototype.triangleLeft=mxClient.IS_SVG?Graph.createSvgImage(28,18,'<path d="m 1 9 L 12 1 L 12 6 L 26 6 L 26 12 L 12 12 L 12 18 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-left.png",14,26),HoverIcons.prototype.roundDrop=mxClient.IS_SVG?Graph.createSvgImage(26,26,'<circle cx="13" cy="13" r="12" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/round-drop.png",26,26),HoverIcons.prototype.refreshTarget=new mxImage(mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjM2cHgiIGhlaWdodD0iMzZweCI+PGVsbGlwc2UgZmlsbD0iIzI5YjZmMiIgY3g9IjEyIiBjeT0iMTIiIHJ4PSIxMiIgcnk9IjEyIi8+PHBhdGggdHJhbnNmb3JtPSJzY2FsZSgwLjgpIHRyYW5zbGF0ZSgyLjQsIDIuNCkiIHN0cm9rZT0iI2ZmZiIgZmlsbD0iI2ZmZiIgZD0iTTEyIDZ2M2w0LTQtNC00djNjLTQuNDIgMC04IDMuNTgtOCA4IDAgMS41Ny40NiAzLjAzIDEuMjQgNC4yNkw2LjcgMTQuOGMtLjQ1LS44My0uNy0xLjc5LS43LTIuOCAwLTMuMzEgMi42OS02IDYtNnptNi43NiAxLjc0TDE3LjMgOS4yYy40NC44NC43IDEuNzkuNyAyLjggMCAzLjMxLTIuNjkgNi02IDZ2LTNsLTQgNCA0IDR2LTNjNC40MiAwIDgtMy41OCA4LTggMC0xLjU3LS40Ni0zLjAzLTEuMjQtNC4yNnoiLz48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+Cg==":IMAGE_PATH+"/refresh.png",38,38),HoverIcons.prototype.tolerance=mxClient.IS_TOUCH?6:0,HoverIcons.prototype.init=function(){this.arrowUp=this.createArrow(this.triangleUp,mxResources.get("plusTooltip"),mxConstants.DIRECTION_NORTH),this.arrowRight=this.createArrow(this.triangleRight,mxResources.get("plusTooltip"),mxConstants.DIRECTION_EAST),this.arrowDown=this.createArrow(this.triangleDown,mxResources.get("plusTooltip"),mxConstants.DIRECTION_SOUTH),this.arrowLeft=this.createArrow(this.triangleLeft,mxResources.get("plusTooltip"),mxConstants.DIRECTION_WEST),this.elts=[this.arrowUp,this.arrowRight,this.arrowDown,this.arrowLeft],this.resetHandler=mxUtils.bind(this,function(){this.reset()}),this.repaintHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.selectionModel.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.model.addListener(mxEvent.CHANGE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE,this.repaintHandler),this.graph.view.addListener(mxEvent.DOWN,this.repaintHandler),this.graph.view.addListener(mxEvent.UP,this.repaintHandler),this.graph.addListener(mxEvent.ROOT,this.repaintHandler),this.graph.addListener(mxEvent.ESCAPE,this.resetHandler),mxEvent.addListener(this.graph.container,"scroll",this.resetHandler),this.graph.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){this.mouseDownPoint=null})),mxEvent.addListener(this.graph.container,"mouseleave",mxUtils.bind(this,function(t){null!=t.relatedTarget&&mxEvent.getSource(t)==this.graph.container&&this.setDisplay("none")})),this.graph.addListener(mxEvent.START_EDITING,mxUtils.bind(this,function(t){this.reset()}));var e=this.graph.click,i=(this.graph.click=mxUtils.bind(this,function(t){e.apply(this.graph,arguments),null==this.currentState||this.graph.isCellSelected(this.currentState.cell)||!mxEvent.isTouchEvent(t.getEvent())||this.graph.model.isVertex(t.getCell())||this.reset()}),!1);this.graph.addMouseListener({mouseDown:mxUtils.bind(this,function(t,e){i=!1;var n=e.getEvent();this.isResetEvent(n)?this.reset():this.isActive()||null==(e=this.getState(e.getState()))&&mxEvent.isTouchEvent(n)||this.update(e),this.setDisplay("none")}),mouseMove:mxUtils.bind(this,function(t,e){var n=e.getEvent();this.isResetEvent(n)?this.reset():this.graph.isMouseDown||mxEvent.isTouchEvent(n)||this.update(this.getState(e.getState()),e.getGraphX(),e.getGraphY()),null!=this.graph.connectionHandler&&null!=this.graph.connectionHandler.shape&&(i=!0)}),mouseUp:mxUtils.bind(this,function(t,e){var n=e.getEvent();mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(n),mxEvent.getClientY(n));this.isResetEvent(n)?this.reset():this.isActive()&&!i&&null!=this.mouseDownPoint?this.click(this.currentState,this.getDirection(),e):this.isActive()?1==this.graph.getSelectionCount()&&this.graph.model.isEdge(this.graph.getSelectionCell())?this.reset():this.update(this.getState(this.graph.view.getState(this.graph.getCellAt(e.getGraphX(),e.getGraphY())))):mxEvent.isTouchEvent(n)||null!=this.bbox&&mxUtils.contains(this.bbox,e.getGraphX(),e.getGraphY())?(this.setDisplay(""),this.repaint()):mxEvent.isTouchEvent(n)||this.reset(),i=!1,this.resetActiveArrow()})})},HoverIcons.prototype.isResetEvent=function(t,e){return mxEvent.isAltDown(t)||null==this.activeArrow&&mxEvent.isShiftDown(t)||mxEvent.isPopupTrigger(t)&&!this.graph.isCloneEvent(t)},HoverIcons.prototype.createArrow=function(t,e,n){var i=null;return(i=mxUtils.createImage(t.src)).style.width=t.width+"px",i.style.height=t.height+"px",i.style.padding=this.tolerance+"px",null!=e&&i.setAttribute("title",e),i.style.position="absolute",i.style.cursor=this.cssCursor,mxEvent.addGestureListeners(i,mxUtils.bind(this,function(t){null==this.currentState||this.isResetEvent(t)||(this.mouseDownPoint=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),this.drag(t,this.mouseDownPoint.x,this.mouseDownPoint.y),this.activeArrow=i,this.setDisplay("none"),mxEvent.consume(t))})),mxEvent.redirectMouseEvents(i,this.graph,this.currentState),mxEvent.addListener(i,"mouseenter",mxUtils.bind(this,function(t){mxEvent.isMouseEvent(t)&&(null!=this.activeArrow&&this.activeArrow!=i&&mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.graph.connectionHandler.constraintHandler.reset(),mxUtils.setOpacity(i,100),this.activeArrow=i,this.fireEvent(new mxEventObject("focus","arrow",i,"direction",n,"event",t)))})),mxEvent.addListener(i,"mouseleave",mxUtils.bind(this,function(t){mxEvent.isMouseEvent(t)&&this.fireEvent(new mxEventObject("blur","arrow",i,"direction",n,"event",t)),this.graph.isMouseDown||this.resetActiveArrow()})),i},HoverIcons.prototype.resetActiveArrow=function(){null!=this.activeArrow&&(mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.activeArrow=null)},HoverIcons.prototype.getDirection=function(){var t=mxConstants.DIRECTION_EAST;return this.activeArrow==this.arrowUp?t=mxConstants.DIRECTION_NORTH:this.activeArrow==this.arrowDown?t=mxConstants.DIRECTION_SOUTH:this.activeArrow==this.arrowLeft&&(t=mxConstants.DIRECTION_WEST),t},HoverIcons.prototype.visitNodes=function(t){for(var e=0;e<this.elts.length;e++)null!=this.elts[e]&&t(this.elts[e])},HoverIcons.prototype.removeNodes=function(){this.visitNodes(function(t){null!=t.parentNode&&t.parentNode.removeChild(t)})},HoverIcons.prototype.setDisplay=function(e){this.visitNodes(function(t){t.style.display=e})},HoverIcons.prototype.isActive=function(){return null!=this.activeArrow&&null!=this.currentState},HoverIcons.prototype.drag=function(t,e,n){this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),null!=this.currentState&&(this.graph.connectionHandler.start(this.currentState,e,n),this.graph.isMouseTrigger=mxEvent.isMouseEvent(t),this.graph.isMouseDown=!0,null!=(e=this.graph.selectionCellsHandler.getHandler(this.currentState.cell))&&e.setHandlesVisible(!1),n=this.graph.connectionHandler.edgeState,null!=t)&&mxEvent.isShiftDown(t)&&mxEvent.isControlDown(t)&&null!=n&&"orthogonalEdgeStyle"===mxUtils.getValue(n.style,mxConstants.STYLE_EDGE,null)&&(e=this.getDirection(),n.cell.style=mxUtils.setStyle(n.cell.style,"sourcePortConstraint",e),n.style.sourcePortConstraint=e)},HoverIcons.prototype.getStateAt=function(t,e,n){return this.graph.view.getState(this.graph.getCellAt(e,n))},HoverIcons.prototype.click=function(t,e,n){var i=n.getEvent(),l=n.getGraphX(),s=n.getGraphY(),l=this.getStateAt(t,l,s);null==l||!this.graph.model.isEdge(l.cell)||this.graph.isCloneEvent(i)||l.getVisibleTerminalState(!0)!=t&&l.getVisibleTerminalState(!1)!=t?null!=t&&this.execute(t,e,n):(this.graph.setSelectionCell(l.cell),this.reset()),n.consume()},HoverIcons.prototype.execute=function(t,e,n){n=n.getEvent();this.graph.selectCellsForConnectVertex(this.graph.connectVertex(t.cell,e,this.graph.defaultEdgeLength,n,this.graph.isCloneEvent(n),this.graph.isCloneEvent(n)),n,this)},HoverIcons.prototype.reset=function(t){(t=null==t||t)&&null!=this.updateThread&&window.clearTimeout(this.updateThread),this.mouseDownPoint=null,this.currentState=null,this.activeArrow=null,this.removeNodes(),this.bbox=null,this.fireEvent(new mxEventObject("reset"))},HoverIcons.prototype.repaint=function(){var l,t,e,n,i,s,o;(this.bbox=null)!=this.currentState&&(this.currentState=this.getState(this.currentState),null!=this.currentState&&this.graph.model.isVertex(this.currentState.cell)&&this.graph.isCellConnectable(this.currentState.cell)?(i=mxRectangle.fromRectangle(this.currentState),(i=null!=this.currentState.shape&&null!=this.currentState.shape.boundingBox?mxRectangle.fromRectangle(this.currentState.shape.boundingBox):i).grow(this.graph.tolerance),i.grow(this.arrowSpacing),t=this.graph.selectionCellsHandler.getHandler(this.currentState.cell),(l=null)!=(t=this.graph.isTableRow(this.currentState.cell)?this.graph.selectionCellsHandler.getHandler(this.graph.model.getParent(this.currentState.cell)):t)&&(i.x-=t.horizontalOffset/2,i.y-=t.verticalOffset/2,i.width+=t.horizontalOffset,i.height+=t.verticalOffset,null!=t.rotationShape)&&null!=t.rotationShape.node&&"hidden"!=t.rotationShape.node.style.visibility&&"none"!=t.rotationShape.node.style.display&&null!=t.rotationShape.boundingBox&&(l=t.rotationShape.boundingBox),(t=mxUtils.bind(this,function(t,e,n){var i;null!=l&&(i=new mxRectangle(e,n,t.clientWidth,t.clientHeight),mxUtils.intersects(i,l))&&(t==this.arrowUp?n-=i.y+i.height-l.y:t==this.arrowRight?e+=l.x+l.width-i.x:t==this.arrowDown?n+=l.y+l.height-i.y:t==this.arrowLeft&&(e-=i.x+i.width-l.x)),t.style.left=e+"px",t.style.top=n+"px",mxUtils.setOpacity(t,this.inactiveOpacity)}))(this.arrowUp,Math.round(this.currentState.getCenterX()-this.triangleUp.width/2-this.tolerance),Math.round(i.y-this.triangleUp.height-this.tolerance)),t(this.arrowRight,Math.round(i.x+i.width-this.tolerance),Math.round(this.currentState.getCenterY()-this.triangleRight.height/2-this.tolerance)),t(this.arrowDown,parseInt(this.arrowUp.style.left),Math.round(i.y+i.height-this.tolerance)),t(this.arrowLeft,Math.round(i.x-this.triangleLeft.width-this.tolerance),parseInt(this.arrowRight.style.top)),this.checkCollisions?(t=this.graph.getCellAt(i.x+i.width+this.triangleRight.width/2,this.currentState.getCenterY()),e=this.graph.getCellAt(i.x-this.triangleLeft.width/2,this.currentState.getCenterY()),n=this.graph.getCellAt(this.currentState.getCenterX(),i.y-this.triangleUp.height/2),i=this.graph.getCellAt(this.currentState.getCenterX(),i.y+i.height+this.triangleDown.height/2),null!=t&&t==e&&e==n&&n==i&&(i=n=e=t=null),s=this.graph.getCellGeometry(this.currentState.cell),(o=mxUtils.bind(this,function(t,e){var n=this.graph.model.isVertex(t)&&this.graph.getCellGeometry(t);null==t||this.graph.model.isAncestor(t,this.currentState.cell)||this.graph.isSwimlane(t)||!(null==n||null==s||n.height<3*s.height&&n.width<3*s.width)?e.style.visibility="visible":e.style.visibility="hidden"}))(t,this.arrowRight),o(e,this.arrowLeft),o(n,this.arrowUp),o(i,this.arrowDown)):(this.arrowLeft.style.visibility="visible",this.arrowRight.style.visibility="visible",this.arrowUp.style.visibility="visible",this.arrowDown.style.visibility="visible"),this.graph.tooltipHandler.isEnabled()?(this.arrowLeft.setAttribute("title",mxResources.get("plusTooltip")),this.arrowRight.setAttribute("title",mxResources.get("plusTooltip")),this.arrowUp.setAttribute("title",mxResources.get("plusTooltip")),this.arrowDown.setAttribute("title",mxResources.get("plusTooltip"))):(this.arrowLeft.removeAttribute("title"),this.arrowRight.removeAttribute("title"),this.arrowUp.removeAttribute("title"),this.arrowDown.removeAttribute("title"))):this.reset(),null!=this.currentState)&&(this.bbox=this.computeBoundingBox(),null!=this.bbox)&&this.bbox.grow(10)},HoverIcons.prototype.computeBoundingBox=function(){var e=this.graph.model.isEdge(this.currentState.cell)?null:mxRectangle.fromRectangle(this.currentState);return this.visitNodes(function(t){null!=t.parentNode&&(t=new mxRectangle(t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight),null==e?e=t:e.add(t))}),e},HoverIcons.prototype.getState=function(t){var e,n;return null!=t&&(e=t.cell,this.graph.getModel().contains(e)&&(this.graph.getModel().isVertex(e)&&!this.graph.isCellConnectable(e)&&(n=this.graph.getModel().getParent(e),this.graph.getModel().isVertex(n))&&this.graph.isCellConnectable(n)&&(e=n),(this.graph.isCellLocked(e)||this.graph.model.isEdge(e))&&(e=null),null==(t=this.graph.view.getState(e))||null!=t.style)||(t=null)),t},HoverIcons.prototype.update=function(t,e,n){var i;!this.graph.connectionArrowsEnabled||null!=this.graph.freehand&&this.graph.freehand.isDrawing()||null!=t&&"0"==mxUtils.getValue(t.style,"allowArrows","1")?this.reset():(null!=t&&null!=t.cell.geometry&&t.cell.geometry.relative&&this.graph.model.isEdge(t.cell.parent)&&(t=null),i=null,this.prev!=t||this.isActive()?(this.startTime=(new Date).getTime(),this.prev=t,i=0,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=t&&(this.updateThread=window.setTimeout(mxUtils.bind(this,function(){this.isActive()||this.graph.isMouseDown||this.graph.panningHandler.isActive()||(this.prev=t,this.update(t,e,n))}),this.updateDelay+10))):null!=this.startTime&&(i=(new Date).getTime()-this.startTime),this.setDisplay(""),null!=this.currentState&&this.currentState!=t&&i<this.activationDelay&&null!=this.bbox&&!mxUtils.contains(this.bbox,e,n)?this.reset(!1):(null!=this.currentState||i>this.activationDelay)&&this.currentState!=t&&(i>this.updateDelay&&null!=t||null==this.bbox||null==e||null==n||!mxUtils.contains(this.bbox,e,n))&&(null!=t&&this.graph.isEnabled()?(this.removeNodes(),this.setCurrentState(t),this.repaint(),this.graph.connectionHandler.constraintHandler.currentFocus!=t&&this.graph.connectionHandler.constraintHandler.reset()):this.reset()))},HoverIcons.prototype.setCurrentState=function(t){"eastwest"!=t.style.portConstraint&&(this.graph.container.appendChild(this.arrowUp),this.graph.container.appendChild(this.arrowDown)),this.graph.container.appendChild(this.arrowRight),this.graph.container.appendChild(this.arrowLeft),this.currentState=t},Graph.prototype.removeTextStyleForCell=function(t,e){var n,i=this.getCurrentCellStyle(t),l=!1;this.getModel().beginUpdate();try{"1"==mxUtils.getValue(i,"html","0")&&(n=this.convertValueToString(t),"0"!=mxUtils.getValue(i,"nl2Br","1")&&(n=n.replace(/\n/g,"").replace(/<br\s*.?>/g,"\n")),n=Editor.convertHtmlToText(n),this.cellLabelChanged(t,n),l=!0),e&&(this.setCellStyles("fontSource",null,[t]),this.setCellStyles(mxConstants.STYLE_FONTFAMILY,null,[t]),this.setCellStyles(mxConstants.STYLE_FONTSIZE,null,[t]),this.setCellStyles(mxConstants.STYLE_FONTSTYLE,null,[t]),this.setCellStyles(mxConstants.STYLE_FONTCOLOR,null,[t]),this.setCellStyles(mxConstants.STYLE_LABEL_BORDERCOLOR,null,[t]),this.setCellStyles(mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,null,[t]))}finally{this.getModel().endUpdate()}return l},Graph.prototype.createParent=function(t,e,n,i,l){t=this.cloneCell(t);for(var s=0;s<n;s++){var o=this.cloneCell(e),r=this.getCellGeometry(o);null!=r&&(r.x+=s*i,r.y+=s*l),t.insert(o)}return t},Graph.prototype.createTable=function(t,e,n,i,l,s,o,r,a){return s=null!=s?s:30,r=null!=r?r:"shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",a=null!=a?a:"shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;",this.createParent(this.createVertex(null,null,null!=l?l:"",0,0,e*(n=null!=n?n:60),t*(i=null!=i?i:40)+(null!=l?s:0),o=null!=o?o:"shape=table;startSize="+(null!=l?s:"0")+";container=1;collapsible=0;childLayout=tableLayout;"),this.createParent(this.createVertex(null,null,"",0,0,e*n,i,r),this.createVertex(null,null,"",0,0,n,i,a),e,n,0),t,0,i)},Graph.prototype.setTableValues=function(t,e,n){for(var i=this.model.getChildCells(t,!0),l=0;l<i.length;l++)if(null!=n&&(i[l].value=n[l]),null!=e)for(var s=this.model.getChildCells(i[l],!0),o=0;o<s.length;o++)null!=e[l][o]&&(s[o].value=e[l][o]);return t},Graph.prototype.createCrossFunctionalSwimlane=function(t,e,n,i,l,s,o,r,a){var h="collapsible=0;recursiveResize=0;expand=0;",l=(o=null!=o?o:"shape=tableRow;horizontal=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;strokeColor=inherit;bottom=0;right=0;dropTarget=0;fontStyle=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;startSize=40;"+h,r=null!=r?r:"swimlane;swimlaneHead=0;swimlaneBody=0;fontStyle=0;strokeColor=inherit;connectable=0;fillColor=none;startSize=40;"+h,a=null!=a?a:"swimlane;swimlaneHead=0;swimlaneBody=0;fontStyle=0;connectable=0;strokeColor=inherit;fillColor=none;startSize=0;"+h,this.createVertex(null,null,null!=l?l:"",0,0,e*(n=null!=n?n:120),t*(i=null!=i?i:120),s=null!=s?s:"shape=table;childLayout=tableLayout;"+(null==l?"startSize=0;fillColor=none;":"startSize=40;")+h)),h=mxUtils.getValue(this.getCellStyle(l),mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE),s=(l.geometry.width+=h,l.geometry.height+=h,this.createVertex(null,null,"",0,h,e*n+h,i,o));return l.insert(this.createParent(s,this.createVertex(null,null,"",h,0,n,i,r),e,n,0)),1<t?(s.geometry.y=i+h,this.createParent(l,this.createParent(s,this.createVertex(null,null,"",h,0,n,i,a),e,n,0),t-1,0,i)):l},Graph.prototype.visitTableCells=function(t,e){for(var n=null,i=this.model.getChildCells(t,!0),l=this.getActualStartSize(t,!0),s=0;s<i.length;s++){for(var o=this.getActualStartSize(i[s],!0),r=this.model.getChildCells(i[s],!0),a=this.getCellStyle(i[s],!0),h=null,u=[],d=0;d<r.length;d++){var p=this.getCellGeometry(r[d]),m={cell:r[d],rospan:1,colspan:1,row:s,col:d,geo:p},p=null!=p.alternateBounds?p.alternateBounds:p,p=(m.point=new mxPoint(p.width+(null!=h?h.point.x:l.x+o.x),p.height+(null!=n&&null!=n[0]?n[0].point.y:l.y+o.y)),m.actual=m,null!=n&&null!=n[d]&&1<n[d].rowspan?(m.rowspan=n[d].rowspan-1,m.colspan=n[d].colspan,m.actual=n[d].actual):null!=h&&1<h.colspan?(m.rowspan=h.rowspan,m.colspan=h.colspan-1,m.actual=h.actual):null!=(p=this.getCurrentCellStyle(r[d],!0))&&(m.rowspan=parseInt(p.rowspan||1),m.colspan=parseInt(p.colspan||1)),1==mxUtils.getValue(a,mxConstants.STYLE_SWIMLANE_HEAD,1)&&mxUtils.getValue(a,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE)!=mxConstants.NONE);e(m,r.length,i.length,l.x+(p?o.x:0),l.y+(p?o.y:0)),u.push(m),h=m}n=u}},Graph.prototype.getTableLines=function(t,s,o){var r=[],a=[];return(s||o)&&this.visitTableCells(t,mxUtils.bind(this,function(t,e,n,i,l){s&&t.row<n-1&&(null==r[t.row]&&(r[t.row]=[new mxPoint(i,t.point.y)]),1<t.rowspan&&r[t.row].push(null),r[t.row].push(t.point)),o&&t.col<e-1&&(null==a[t.col]&&(a[t.col]=[new mxPoint(t.point.x,l)]),1<t.colspan&&a[t.col].push(null),a[t.col].push(t.point))})),r.concat(a)},Graph.prototype.isTableCell=function(t){return this.model.isVertex(t)&&this.isTableRow(this.model.getParent(t))},Graph.prototype.isTableRow=function(t){return this.model.isVertex(t)&&this.isTable(this.model.getParent(t))},Graph.prototype.isTable=function(t){t=this.getCellStyle(t);return null!=t&&"tableLayout"==t.childLayout},Graph.prototype.isStack=function(t){t=this.getCellStyle(t);return null!=t&&"stackLayout"==t.childLayout},Graph.prototype.isStackChild=function(t){return this.model.isVertex(t)&&this.isStack(this.model.getParent(t))},Graph.prototype.setTableRowHeight=function(t,e,n){n=null==n||n;var i=this.getModel();i.beginUpdate();try{var l,s,o,r,a,h,u=this.getCellGeometry(t);null!=u&&((u=u.clone()).height+=e,i.setGeometry(t,u),l=i.getParent(t),s=i.getChildCells(l,!0),n||(o=mxUtils.indexOf(s,t))<s.length-1&&(r=s[o+1],null!=(a=this.getCellGeometry(r)))&&((a=a.clone()).y+=e,a.height-=e,i.setGeometry(r,a)),null!=(h=this.getCellGeometry(l)))&&(n=n||t==s[s.length-1])&&((h=h.clone()).height+=e,i.setGeometry(l,h))}finally{i.endUpdate()}},Graph.prototype.setTableColumnWidth=function(t,e,n){n=null!=n&&n;var i=this.getModel(),l=i.getParent(t),s=i.getParent(l),o=i.getChildCells(l,!0),r=mxUtils.indexOf(o,t),t=r==o.length-1;i.beginUpdate();try{for(var a,h=i.getChildCells(s,!0),u=0;u<h.length;u++){var l=h[u],d=(o=i.getChildCells(l,!0))[r],p=this.getCellGeometry(d);null!=p&&((p=p.clone()).width+=e,null!=p.alternateBounds&&(p.alternateBounds.width+=e),i.setGeometry(d,p)),r<o.length-1&&(d=o[r+1],null!=(p=this.getCellGeometry(d)))&&((p=p.clone()).x+=e,n||(p.width-=e,null!=p.alternateBounds&&(p.alternateBounds.width-=e)),i.setGeometry(d,p))}(t||n)&&null!=(a=this.getCellGeometry(s))&&((a=a.clone()).width+=e,i.setGeometry(s,a)),null!=this.layoutManager&&this.layoutManager.executeLayout(s)}finally{i.endUpdate()}},TableLayout.prototype=new mxStackLayout,TableLayout.prototype.constructor=TableLayout,TableLayout.prototype.isHorizontal=function(){return!1},TableLayout.prototype.isVertexIgnored=function(t){return!this.graph.getModel().isVertex(t)||!this.graph.isCellVisible(t)},TableLayout.prototype.getSize=function(t,e){for(var n,i=0,l=0;l<t.length;l++)this.isVertexIgnored(t[l])||null!=(n=this.graph.getCellGeometry(t[l]))&&(i+=e?n.width:n.height);return i},TableLayout.prototype.getRowLayout=function(t,e){for(var n=this.graph.model.getChildCells(t,!0),t=this.graph.getActualStartSize(t,!0),i=this.getSize(n,!0),l=e-t.x-t.width,s=[],o=t.x,r=0;r<n.length;r++){var a=this.graph.getCellGeometry(n[r]);null!=a&&(o+=(null!=a.alternateBounds?a.alternateBounds:a).width*l/i,s.push(Math.round(o)))}return s},TableLayout.prototype.layoutRow=function(t,e,n,i){var l=this.graph.getModel(),s=l.getChildCells(t,!0),o=this.graph.getActualStartSize(t,!0),r=o.x,a=0;null!=e&&(e=e.slice()).splice(0,0,o.x);for(var h=0;h<s.length;h++){var u=this.graph.getCellGeometry(s[h]);null!=u&&((u=u.clone()).y=o.y,u.height=n-o.y-o.height,null!=e?(u.x=e[h],u.width=e[h+1]-u.x,h==s.length-1&&h<e.length-2&&(u.width=i-u.x-o.x-o.width)):(u.x=r,r+=u.width,h==s.length-1?u.width=i-o.x-o.width-a:a+=u.width),u.alternateBounds=new mxRectangle(0,0,u.width,u.height),l.setGeometry(s[h],u))}return a},TableLayout.prototype.execute=function(t){if(null!=t){var e=this.graph.getActualStartSize(t,!0),n=this.graph.getCellGeometry(t),i=this.graph.getCellStyle(t),l="1"==mxUtils.getValue(i,"resizeLastRow","0"),s="1"==mxUtils.getValue(i,"resizeLast","0"),o="1"==mxUtils.getValue(i,"fixedRows","0"),r=this.graph.getModel(),a=0;r.beginUpdate();try{for(var h=n.height-e.y-e.height,u=n.width-e.x-e.width,d=r.getChildCells(t,!0),p=0;p<d.length;p++)r.setVisible(d[p],!0);var m=this.getSize(d,!1);if(0<h&&0<u&&0<d.length&&0<m){l&&null!=(c=this.graph.getCellGeometry(d[d.length-1]))&&((c=c.clone()).height=h-m+c.height,r.setGeometry(d[d.length-1],c));for(var c,g=s?null:this.getRowLayout(d[0],u),x=[],y=e.y,p=0;p<d.length;p++)null!=(c=this.graph.getCellGeometry(d[p]))&&((c=c.clone()).x=e.x,c.width=u,c.y=Math.round(y),y+=l||o?c.height:c.height/m*h,c.height=Math.round(y)-c.y,r.setGeometry(d[p],c)),a=Math.max(a,this.layoutRow(d[p],g,c.height,u,x));o&&h<m&&((n=n.clone()).height=y+e.height,r.setGeometry(t,n)),s&&u<a+Graph.minTableColumnWidth&&((n=n.clone()).width=a+e.width+e.x+Graph.minTableColumnWidth,r.setGeometry(t,n)),this.graph.visitTableCells(t,mxUtils.bind(this,function(t){var e;r.setVisible(t.cell,t.actual.cell==t.cell),t.actual.cell!=t.cell&&(t.actual.row==t.row&&(e=null!=t.geo.alternateBounds?t.geo.alternateBounds:t.geo,t.actual.geo.width+=e.width),t.actual.col==t.col)&&(e=null!=t.geo.alternateBounds?t.geo.alternateBounds:t.geo,t.actual.geo.height+=e.height)}))}else for(p=0;p<d.length;p++)r.setVisible(d[p],!1)}finally{r.endUpdate()}}},function(){var t=mxGraphView.prototype.resetValidationState,n=(mxGraphView.prototype.resetValidationState=function(){t.apply(this,arguments),this.validEdges=[]},mxGraphView.prototype.validateCellState),e=(mxGraphView.prototype.validateCellState=function(t,e){e=null==e||e;t=this.getState(t);return null!=t&&e&&this.graph.model.isEdge(t.cell)&&null!=t.style&&1!=t.style[mxConstants.STYLE_CURVED]&&!t.invalid&&this.updateLineJumps(t)&&this.graph.cellRenderer.redraw(t,!1,this.isRendering()),null!=(t=n.apply(this,arguments))&&e&&this.graph.model.isEdge(t.cell)&&null!=t.style&&1!=t.style[mxConstants.STYLE_CURVED]&&this.validEdges.push(t),t},mxShape.prototype.paint),i=(mxShape.prototype.isFlowAnimationEnabled=function(){return null!=this.state&&this.state.view.graph.enableFlowAnimation&&this.state.view.graph.model.isEdge(this.state.cell)&&"1"==mxUtils.getValue(this.state.style,"flowAnimation","0")},mxShape.prototype.getFlowAnimationPath=function(){var t=null!=this.node?this.node.getElementsByTagName("path"):null;if(null!=t)for(var e=0;e<t.length;e++)if("hidden"!=t[e].getAttribute("visibility"))return t[e];return null},mxShape.prototype.addFlowAnimationToShape=function(){null!=this.state&&this.state.view.graph.addFlowAnimationToNode(this.getFlowAnimationPath(),this.state.style,this.state.view.scale,this.state.view.graph.addFlowAnimationStyle())},mxShape.prototype.paint=function(t){e.apply(this,arguments),this.isFlowAnimationEnabled()&&this.addFlowAnimationToShape()},mxCellRenderer.prototype.isShapeInvalid),l=(mxCellRenderer.prototype.isShapeInvalid=function(t,e){return i.apply(this,arguments)||null!=t.routedPoints&&null!=e.routedPoints&&!mxUtils.equalPoints(e.routedPoints,t.routedPoints)},mxGraphView.prototype.updateCellState),y=(mxGraphView.prototype.updateCellState=function(t){l.apply(this,arguments),this.graph.model.isEdge(t.cell)&&1!=t.style[mxConstants.STYLE_CURVED]&&this.updateLineJumps(t)},mxGraphView.prototype.updateLineJumps=function(l){var t=l.absolutePoints;if(Graph.lineJumpsEnabled){var e=null!=l.routedPoints,s=null;if(null!=t&&null!=this.validEdges&&"none"!==mxUtils.getValue(l.style,"jumpStyle","none")){var n=.5*this.scale;function i(t,e,n){var i=new mxPoint(e,n),i=(i.type=t,s.push(i),null!=l.routedPoints?l.routedPoints[s.length-1]:null);return null==i||i.type!=t||i.x!=e||i.y!=n}e=!1;for(var s=[],o=0;o<t.length-1;o++){for(var r=t[o+1],a=t[o],h=[],u=t[o+2];o<t.length-2&&mxUtils.ptSegDistSq(a.x,a.y,u.x,u.y,r.x,r.y)<+this.scale*this.scale;)r=u,u=t[++o+2];for(var e=i(0,a.x,a.y)||e,d=0;d<this.validEdges.length;d++){var p=this.validEdges[d],m=p.absolutePoints;if(null!=m&&mxUtils.intersects(l,p)&&"1"!=p.style.noJump)for(var c=null,g=0;g<m.length-1;g++){for(var x,y=m[g+1],C=m[g],u=m[g+2];g<m.length-2&&mxUtils.ptSegDistSq(C.x,C.y,u.x,u.y,y.x,y.y)<+this.scale*this.scale;)y=u,u=m[++g+2];if(null!=(x=mxUtils.intersection(a.x,a.y,r.x,r.y,C.x,C.y,y.x,y.y))&&(Math.abs(x.x-a.x)>n||Math.abs(x.y-a.y)>n)&&(Math.abs(x.x-r.x)>n||Math.abs(x.y-r.y)>n)&&(null==c||mxUtils.ptLineDist(a.x,a.y,r.x,r.y,c.x,c.y)>n||mxUtils.ptLineDist(a.x,a.y,r.x,r.y,C.x,C.y)>n)&&(null==u||mxUtils.ptLineDist(a.x,a.y,r.x,r.y,u.x,u.y)>n||mxUtils.ptLineDist(a.x,a.y,r.x,r.y,y.x,y.y)>n)){for(var f=x.x-a.x,v=x.y-a.y,E={distSq:f*f+v*v,x:x.x,y:x.y},S=0;S<h.length;S++)if(h[S].distSq>E.distSq){h.splice(S,0,E),E=null;break}null==E||0!=h.length&&h[h.length-1].x===E.x&&h[h.length-1].y===E.y||h.push(E)}c=C}}for(g=0;g<h.length;g++)e=i(1,h[g].x,h[g].y)||e}e=i(0,(x=t[t.length-1]).x,x.y)||e}return l.routedPoints=s,e}return!1},mxConnector.prototype.paintLine),s=(mxConnector.prototype.paintLine=function(t,e,n){if(this.routedPoints=null!=this.state?this.state.routedPoints:null,this.outline||null==this.state||null==this.style||null==this.state.routedPoints||0==this.state.routedPoints.length)y.apply(this,arguments);else{var i=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,l=(parseInt(mxUtils.getValue(this.style,"jumpSize",Graph.defaultJumpSize))-2)/2+this.strokewidth,s=mxUtils.getValue(this.style,"jumpStyle","none"),o=!0,r=null,a=null,h=[],u=null;t.begin();for(var d=0;d<this.state.routedPoints.length;d++){var p,m,c=this.state.routedPoints[d],g=new mxPoint(c.x/this.scale,c.y/this.scale),x=(0==d?g=e[0]:d==this.state.routedPoints.length-1&&(g=e[e.length-1]),!1);null!=r&&1==c.type?(m=(p=(c=this.state.routedPoints[d+1]).x/this.scale-g.x)*p+(c=c.y/this.scale-g.y)*c,null==u&&(u=new mxPoint(g.x-r.x,g.y-r.y),0<(a=Math.sqrt(u.x*u.x+u.y*u.y))?(u.x=u.x*l/a,u.y=u.y*l/a):u=null),l*l<m&&0<a&&l*l<(m=(p=r.x-g.x)*p+(c=r.y-g.y)*c)&&(p=new mxPoint(g.x-u.x,g.y-u.y),c=new mxPoint(g.x+u.x,g.y+u.y),h.push(p),this.addPoints(t,h,n,i,!1,null,o),m=Math.round(u.x)<0||0==Math.round(u.x)&&Math.round(u.y)<=0?1:-1,o=!1,"sharp"==s?(t.lineTo(p.x-u.y*m,p.y+u.x*m),t.lineTo(c.x-u.y*m,c.y+u.x*m),t.lineTo(c.x,c.y)):"line"==s?(t.moveTo(p.x+u.y*m,p.y-u.x*m),t.lineTo(p.x-u.y*m,p.y+u.x*m),t.moveTo(c.x-u.y*m,c.y+u.x*m),t.lineTo(c.x+u.y*m,c.y-u.x*m),t.moveTo(c.x,c.y)):"arc"==s?(m*=1.3,t.curveTo(p.x-u.y*m,p.y+u.x*m,c.x-u.y*m,c.y+u.x*m,c.x,c.y)):(t.moveTo(c.x,c.y),o=!0),h=[c],x=!0)):u=null,x||(h.push(g),r=g)}this.addPoints(t,h,n,i,!1,null,o),t.stroke()}},mxGraphView.prototype.getFixedTerminalPoint),d=(mxGraphView.prototype.getFixedTerminalPoint=function(t,e,n,i){return null!=e&&"centerPerimeter"==e.style[mxConstants.STYLE_PERIMETER]?new mxPoint(e.getCenterX(),e.getCenterY()):s.apply(this,arguments)},mxGraphView.prototype.updateFloatingTerminalPoint),o=(mxGraphView.prototype.updateFloatingTerminalPoint=function(t,e,n,i){var l,s,o,r,a,h,u;null==e||null==t||"1"!=e.style.snapToPoint&&"1"!=t.style.snapToPoint?d.apply(this,arguments):(e=this.getTerminalPort(t,e,i),u=this.getNextPoint(t,n,i),l=this.graph.isOrthogonal(t),s=mxUtils.toRadians(Number(e.style[mxConstants.STYLE_ROTATION]||"0")),o=new mxPoint(e.getCenterX(),e.getCenterY()),0!=s&&(a=Math.cos(-s),h=Math.sin(-s),u=mxUtils.getRotatedPoint(u,a,h,o)),r=parseFloat(t.style[mxConstants.STYLE_PERIMETER_SPACING]||0),r+=parseFloat(t.style[i?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0),u=this.getPerimeterPoint(e,u,0==s&&l,r),0!=s&&(a=Math.cos(s),h=Math.sin(s),u=mxUtils.getRotatedPoint(u,a,h,o)),t.setAbsoluteTerminalPoint(this.snapToAnchorPoint(t,e,n,i,u),i))},mxGraphView.prototype.snapToAnchorPoint=function(t,e,n,i,l){if(null!=e&&null!=t){var s=this.graph.getAllConnectionConstraints(e),o=null,r=null;if(null!=s)for(var a=0;a<s.length;a++){var h,u=this.graph.getConnectionPoint(e,s[a]);null!=u&&(h=(u.x-l.x)*(u.x-l.x)+(u.y-l.y)*(u.y-l.y),null==r||h<r)&&(o=u,r=h)}null!=o&&(l=o)}return l},mxStencil.prototype.evaluateTextAttribute),r=(mxStencil.prototype.evaluateTextAttribute=function(t,e,n){var i=o.apply(this,arguments);return i="1"==t.getAttribute("placeholders")&&null!=n.state?n.state.view.graph.replacePlaceholders(n.state.cell,i):i},mxCellRenderer.prototype.createShape);mxCellRenderer.prototype.createShape=function(t){if(null!=t.style&&void 0!==pako){t=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null);if(null!=t&&"string"==typeof t&&"stencil("==t.substring(0,8))try{var e=t.substring(8,t.length-1);return new mxShape(new mxStencil(mxUtils.parseXml(Graph.decompress(e)).documentElement))}catch(t){null!=window.console&&console.log("Error in shape: "+t)}}return r.apply(this,arguments)}}(),mxStencilRegistry.libraries={},mxStencilRegistry.dynamicLoading=!0,mxStencilRegistry.allowEval=!0,mxStencilRegistry.packages=[],mxStencilRegistry.filesLoaded={},mxStencilRegistry.isFileLoaded=function(t){return!mxClient.IS_FF&&mxStencilRegistry.filesLoaded[t]},mxStencilRegistry.setFileLoaded=function(t){mxStencilRegistry.filesLoaded[t]=!0},mxStencilRegistry.getStencil=function(e){var t=mxStencilRegistry.stencils[e];if(null==t&&null==mxCellRenderer.defaultShapes[e]&&mxStencilRegistry.dynamicLoading){var n=mxStencilRegistry.getBasenameForStencil(e);if(null!=n){var i=mxStencilRegistry.libraries[n];if(null!=i){if(null==mxStencilRegistry.packages[n]){for(var l=0;l<i.length;l++){var s,o=i[l];if(!mxStencilRegistry.isFileLoaded(o))if(mxStencilRegistry.setFileLoaded(o),".xml"==o.toLowerCase().substring(o.length-4,o.length))mxStencilRegistry.loadStencilSet(o,null);else if(".js"==o.toLowerCase().substring(o.length-3,o.length))try{mxStencilRegistry.allowEval&&null!=(s=mxUtils.load(o))&&200<=s.getStatus()&&s.getStatus()<=299&&eval.call(window,s.getText())}catch(t){null!=window.console&&console.log("error in getStencil:",e,n,i,o,t)}}mxStencilRegistry.packages[n]=1}}else n=n.replace("_-_","_"),mxStencilRegistry.loadStencilSet(STENCIL_PATH+"/"+n+".xml",null);t=mxStencilRegistry.stencils[e]}}return t},mxStencilRegistry.getBasenameForStencil=function(t){var e=null;if(null!=t&&"string"==typeof t){var n=t.split(".");if(0<n.length&&"mxgraph"==n[0])for(var e=n[1],i=2;i<n.length-1;i++)e+="/"+n[i]}return e},mxStencilRegistry.loadStencilSet=function(e,n,t,i){var l=mxStencilRegistry.packages[e];if((t=null!=t&&t)||null==l){var s=!1;if(null==l)try{if(i)return void mxStencilRegistry.loadStencil(e,mxUtils.bind(this,function(t){null!=t&&null!=t.documentElement&&(mxStencilRegistry.packages[e]=t,s=!0,mxStencilRegistry.parseStencilSet(t.documentElement,n,s))}));l=mxStencilRegistry.loadStencil(e),mxStencilRegistry.packages[e]=l,s=!0}catch(t){null!=window.console&&console.log("error in loadStencilSet:",e,t)}null!=l&&null!=l.documentElement&&mxStencilRegistry.parseStencilSet(l.documentElement,n,s)}},mxStencilRegistry.loadStencil=function(t,e){if(null==e)return mxUtils.load(t).getXml();mxUtils.get(t,mxUtils.bind(this,function(t){e(200<=t.getStatus()&&t.getStatus()<=299?t.getXml():null)}),mxUtils.bind(this,function(t){e(null)}))},mxStencilRegistry.parseStencilSets=function(t){for(var e=0;e<t.length;e++)mxStencilRegistry.parseStencilSet(mxUtils.parseXml(t[e]).documentElement)},mxStencilRegistry.parseStencilSet=function(t,e,n){if("stencils"==t.nodeName)for(var i=t.firstChild;null!=i;)"shapes"==i.nodeName&&mxStencilRegistry.parseStencilSet(i,e,n),i=i.nextSibling;else{n=null==n||n;var l,s,o,r=t.firstChild,a="",h=t.getAttribute("name");for(null!=h&&(a=h+".");null!=r;)r.nodeType==mxConstants.NODETYPE_ELEMENT&&null!=(h=r.getAttribute("name"))&&(a=a.toLowerCase(),l=h.replace(/ /g,"_"),n&&mxStencilRegistry.addStencil(a+l.toLowerCase(),new mxStencil(r)),null!=e)&&(s=r.getAttribute("w"),o=r.getAttribute("h"),e(a,l,h,s=null==s?80:parseInt(s,10),o=null==o?80:parseInt(o,10))),r=r.nextSibling}},void 0!==mxVertexHandler&&function(){mxConstants.HANDLE_FILLCOLOR="#29b6f2",mxConstants.HANDLE_STROKECOLOR="#0088cf",mxConstants.VERTEX_SELECTION_COLOR="#00a8ff",mxConstants.OUTLINE_COLOR="#00a8ff",mxConstants.OUTLINE_HANDLE_FILLCOLOR="#99ccff",mxConstants.OUTLINE_HANDLE_STROKECOLOR="#00a8ff",mxConstants.CONNECT_HANDLE_FILLCOLOR="#cee7ff",mxConstants.EDGE_SELECTION_COLOR="#00a8ff",mxConstants.DEFAULT_VALID_COLOR="#00a8ff",mxConstants.LABEL_HANDLE_FILLCOLOR="#cee7ff",mxConstants.GUIDE_COLOR="#0088cf",mxConstants.HIGHLIGHT_STROKEWIDTH=5,mxConstants.HIGHLIGHT_OPACITY=50,mxConstants.HIGHLIGHT_SIZE=5,mxWindow.prototype.closeImage=Graph.createSvgImage(18,10,'<path d="M 5 1 L 13 9 M 13 1 L 5 9" stroke="#707070" stroke-width="2"/>').src,mxWindow.prototype.minimizeImage=Graph.createSvgImage(14,10,'<path d="M 3 7 L 7 3 L 11 7" stroke="#707070" stroke-width="2" fill="none"/>').src,mxWindow.prototype.normalizeImage=Graph.createSvgImage(14,10,'<path d="M 3 3 L 7 7 L 11 3" stroke="#707070" stroke-width="2" fill="none"/>').src,mxWindow.prototype.resizeImage=Graph.createSvgImage(10,10,'<path d="Z" stroke="#C0C0C0" stroke-width="1" fill="none"/>').src,mxEdgeHandler.prototype.snapToTerminals=!0,mxGraphHandler.prototype.guidesEnabled=!0,mxGraphHandler.prototype.removeEmptyParents=!0,mxRubberband.prototype.fadeOut=!0,mxGuide.prototype.isEnabledForEvent=function(t){return!mxEvent.isAltDown(t)||mxEvent.isShiftDown(t)};var e=mxGraphLayout.prototype.isVertexIgnored,n=(mxGraphLayout.prototype.isVertexIgnored=function(t){return e.apply(this,arguments)||this.graph.isTableRow(t)||this.graph.isTableCell(t)},mxGraphLayout.prototype.isEdgeIgnored),i=(mxGraphLayout.prototype.isEdgeIgnored=function(t){return n.apply(this,arguments)||this.graph.isEdgeIgnored(t)},mxConnectionHandler.prototype.isCreateTarget),l=(mxConnectionHandler.prototype.isCreateTarget=function(t){return this.graph.isCloneEvent(t)!=i.apply(this,arguments)},mxConstraintHandler.prototype.createHighlightShape=function(){var t=new mxEllipse(null,this.highlightColor,this.highlightColor,0);return t.opacity=mxConstants.HIGHLIGHT_OPACITY,t},mxConnectionHandler.prototype.livePreview=!0,mxConnectionHandler.prototype.cursor="crosshair",mxConnectionHandler.prototype.createEdgeState=function(t){var e=this.graph.createCurrentEdgeStyle(),e=this.graph.createEdge(null,null,null,null,null,e),n=new mxCellState(this.graph.view,e,this.graph.getCellStyle(e));for(i in this.graph.currentEdgeStyle)n.style[i]=this.graph.currentEdgeStyle[i];if(null!=this.previous){e=this.previous.style.newEdgeStyle;if(null!=e)try{var i,l=JSON.parse(e);for(i in l)n.style[i]=l[i]}catch(t){}}return n.style=this.graph.postProcessCellStyle(n.cell,n.style),n},mxConnectionHandler.prototype.createShape),s=(mxConnectionHandler.prototype.createShape=function(){var t=l.apply(this,arguments);return t.isDashed="1"==this.graph.currentEdgeStyle[mxConstants.STYLE_DASHED],t},mxConnectionHandler.prototype.updatePreview=function(t){},mxConnectionHandler.prototype.createMarker),o=(mxConnectionHandler.prototype.createMarker=function(){var t=s.apply(this,arguments),n=t.getCell;return t.getCell=mxUtils.bind(this,function(t){var e=n.apply(this,arguments);return this.error=null,e}),t},Graph.prototype.defaultVertexStyle={},Graph.prototype.defaultEdgeStyle={edgeStyle:"orthogonalEdgeStyle",rounded:"0",jettySize:"auto",orthogonalLoop:"1"},Graph.prototype.createCurrentEdgeStyle=function(){for(var t="edgeStyle="+(this.currentEdgeStyle.edgeStyle||"none")+";",e=["shape","curved","rounded","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","comicStyle","jumpStyle","jumpSize"],n=0;n<e.length;n++)null!=this.currentEdgeStyle[e[n]]&&(t+=e[n]+"="+this.currentEdgeStyle[e[n]]+";");return null!=this.currentEdgeStyle.orthogonalLoop?t+="orthogonalLoop="+this.currentEdgeStyle.orthogonalLoop+";":null!=Graph.prototype.defaultEdgeStyle.orthogonalLoop&&(t+="orthogonalLoop="+Graph.prototype.defaultEdgeStyle.orthogonalLoop+";"),null!=this.currentEdgeStyle.jettySize?t+="jettySize="+this.currentEdgeStyle.jettySize+";":null!=Graph.prototype.defaultEdgeStyle.jettySize&&(t+="jettySize="+Graph.prototype.defaultEdgeStyle.jettySize+";"),"elbowEdgeStyle"==this.currentEdgeStyle.edgeStyle&&null!=this.currentEdgeStyle.elbow&&(t+="elbow="+this.currentEdgeStyle.elbow+";"),null!=this.currentEdgeStyle.html?t+="html="+this.currentEdgeStyle.html+";":t+="html=1;",t},Graph.prototype.getPagePadding=function(){return new mxPoint(0,0)},Graph.prototype.loadStylesheet=function(){var t=null!=this.themes?this.themes[this.defaultThemeName]:mxStyleRegistry.dynamicLoading?mxUtils.load(STYLE_PATH+"/default.xml").getDocumentElement():null;null!=t&&new mxCodec(t.ownerDocument).decode(t,this.getStylesheet())},Graph.prototype.createCellLookup=function(t,e){e=null!=e?e:new Object;for(var n=0;n<t.length;n++)for(var i=t[n],l=(e[mxObjectIdentity.get(i)]=i.getId(),this.model.getChildCount(i)),s=0;s<l;s++)this.createCellLookup([this.model.getChildAt(i,s)],e);return e},Graph.prototype.createCellMapping=function(t,e,n){for(var i in n=null!=n?n:new Object,t){var l=e[i];null==n[l]&&(n[l]=t[i].getId()||"")}return n},Graph.prototype.importGraphModel=function(t,e,n,i){e=null!=e?e:0,n=null!=n?n:0;var l=new mxCodec(t.ownerDocument),s=new mxGraphModel,o=(l.decode(t,s),[]),l=new Object,t=new Object;if(null!=(h=s.getChildren(this.cloneCell(s.root,this.isCloneInvalidEdges(),l)))){var r,a=this.createCellLookup([s.root]),h=h.slice();this.model.beginUpdate();try{if(1!=h.length||this.isCellLocked(this.getDefaultParent()))for(var u,d=0;d<h.length;d++)null!=(u=this.model.getChildren(this.moveCells([h[d]],e,n,!1,this.model.getRoot())[0]))&&(o=o.concat(u));else null!=(u=s.getChildren(h[0]))&&(o=this.moveCells(u,e,n,!1,this.getDefaultParent()),t[s.getChildAt(s.root,0).getId()]=this.getDefaultParent().getId());null!=o&&(this.createCellMapping(l,a,t),this.updateCustomLinks(t,o),i)&&(this.isGridEnabled()&&(e=this.snap(e),n=this.snap(n)),null!=(r=this.getBoundingBoxFromGeometry(o,!0)))&&this.moveCells(o,e-r.x,n-r.y)}finally{this.model.endUpdate()}}return o},Graph.prototype.encodeCells=function(t){for(var e=new Object,n=this.cloneCells(t,null,e),i=new mxDictionary,l=0;l<t.length;l++)i.put(t[l],!0);for(var s=new mxCodec,o=new mxGraphModel,r=o.getChildAt(o.getRoot(),0),l=0;l<n.length;l++){o.add(r,n[l]);var a,h=this.view.getState(t[l]);null!=h&&null!=(a=this.getCellGeometry(n[l]))&&a.relative&&!this.model.isEdge(t[l])&&null==i.get(this.model.getParent(t[l]))&&(a.offset=null,a.relative=!1,a.x=h.x/h.view.scale-h.view.translate.x,a.y=h.y/h.view.scale-h.view.translate.y)}return this.updateCustomLinks(this.createCellMapping(e,this.createCellLookup(t)),n),s.encode(o)},Graph.prototype.isSwimlane=function(t,e){var n=null;return(n=null==t||this.model.isEdge(t)||this.model.getParent(t)==this.model.getRoot()?n:this.getCurrentCellStyle(t,e)[mxConstants.STYLE_SHAPE])==mxConstants.SHAPE_SWIMLANE||"table"==n||"tableRow"==n},Graph.prototype.isCellEditable),r=(Graph.prototype.isCellEditable=function(t){return!(null==t||!o.apply(this,arguments))&&(!this.isTableCell(t)&&!this.isTableRow(t)||this.isCellEditable(this.model.getParent(t)))},Graph.prototype.isCellMovable),a=(Graph.prototype.isCellMovable=function(t){return!(null==t||!r.apply(this,arguments))&&(!this.isTableCell(t)&&!this.isTableRow(t)||this.isCellMovable(this.model.getParent(t)))},Graph.prototype.isExtendParent),c=(Graph.prototype.isExtendParent=function(t){t=this.model.getParent(t);if(null!=t){var e=this.getCurrentCellStyle(t);if(null!=e.expand)return"0"!=e.expand}return a.apply(this,arguments)&&(null==t||!this.isTable(t))},Graph.prototype.splitEdge),h=(Graph.prototype.splitEdge=function(t,e,n,i,l,s,o,r){null==r&&(r=this.model.getParent(t),this.isTable(r)||this.isTableRow(r))&&(r=this.getCellAt(s,o,null,!0,!1));n=null;this.model.beginUpdate();try{for(var n=c.apply(this,[t,e,n,i,l,s,o,r]),a=(this.model.setValue(n,""),this.getChildCells(n,!0)),h=0;h<a.length;h++)null!=(u=this.getCellGeometry(a[h]))&&u.relative&&0<u.x&&this.model.remove(a[h]);for(var u,d=this.getChildCells(t,!0),h=0;h<d.length;h++)null!=(u=this.getCellGeometry(d[h]))&&u.relative&&u.x<=0&&this.model.remove(d[h]);var p,m=this.model.getTerminal(n,!1);null!=m&&null!=(p=this.getCurrentCellStyle(m))&&"1"==p.snapToPoint&&(this.setCellStyles(mxConstants.STYLE_EXIT_X,null,[t]),this.setCellStyles(mxConstants.STYLE_EXIT_Y,null,[t]),this.setCellStyles(mxConstants.STYLE_ENTRY_X,null,[n]),this.setCellStyles(mxConstants.STYLE_ENTRY_Y,null,[n]))}finally{this.model.endUpdate()}return n},Graph.prototype.selectCell),S=(Graph.prototype.selectCell=function(n,t,e){var i,l,s,o;t||e?h.apply(this,arguments):(i=this.getSelectionCell(),l=null,s=[],(o=mxUtils.bind(this,function(t){if(null!=this.view.getState(t)&&(this.model.isVertex(t)||this.model.isEdge(t)))if(s.push(t),t==i)l=s.length-1;else if(n&&null==i&&0<s.length||null!=l&&n&&l<s.length||!n&&0<l)return;for(var e=0;e<this.model.getChildCount(t);e++)o(this.model.getChildAt(t,e))}))(this.model.root),0<s.length&&(l=null!=l?mxUtils.mod(l+(n?1:-1),s.length):0,this.setSelectionCell(s[l])))},Graph.prototype.swapShapes=function(t,e){if(this.model.isVertex(t)&&this.model.isVertex(e)&&2==this.getMovableCells([t,e]).length){var n=this.getCellGeometry(t),i=this.getCellGeometry(e);if(null!=n&&null!=i){var l=n.clone(),s=i.clone();this.model.beginUpdate();try{l.x=i.getCenterX()-n.width/2,l.y=i.getCenterY()-n.height/2,s.x=n.getCenterX()-i.width/2,s.y=n.getCenterY()-i.height/2,this.model.setGeometry(t,l),this.model.setGeometry(e,s)}finally{this.model.endUpdate()}}}},Graph.prototype.moveCells),u=(Graph.prototype.moveCells=function(t,e,n,i,l,s,o){if(o=null!=o?o:new Object,this.isTable(l)){for(var r=[],a=0;a<t.length;a++)this.isTable(t[a])?r=r.concat(this.model.getChildCells(t[a],!0).reverse()):r.push(t[a]);t=r}this.model.beginUpdate();try{for(var h=[],a=0;a<t.length;a++)if(null!=l&&this.isTableRow(t[a])){var u=this.model.getParent(t[a]),d=this.getCellGeometry(t[a]);if(this.isTable(u)&&h.push(u),null!=u&&null!=d&&this.isTable(u)&&this.isTable(l)&&(i||u!=l)){i||null!=(p=this.getCellGeometry(u))&&((p=p.clone()).height-=d.height,this.model.setGeometry(u,p));var p=this.getCellGeometry(l),m=(null!=p&&((p=p.clone()).height+=d.height,this.model.setGeometry(l,p)),this.model.getChildCells(l,!0));if(0<m.length){t[a]=i?this.cloneCell(t[a]):t[a];var c=this.model.getChildCells(t[a],!0),g=this.model.getChildCells(m[0],!0),x=g.length-c.length;if(0<x)for(var y=0;y<x;y++){var C=this.cloneCell(c[c.length-1]);null!=C&&(C.value="",this.model.add(t[a],C))}else if(x<0)for(y=0;x<y;y--)this.model.remove(c[c.length+y-1]);for(c=this.model.getChildCells(t[a],!0),y=0;y<g.length;y++){var f=this.getCellGeometry(g[y]),v=this.getCellGeometry(c[y]);null!=f&&null!=v&&((v=v.clone()).width=f.width,this.model.setGeometry(c[y],v))}}}}for(var E=S.apply(this,arguments),a=0;a<h.length;a++)!i&&this.model.contains(h[a])&&0==this.model.getChildCount(h[a])&&this.model.remove(h[a]);i&&this.updateCustomLinks(this.createCellMapping(o,this.createCellLookup(t)),E)}finally{this.model.endUpdate()}return E},Graph.prototype.removeCells),d=(Graph.prototype.removeCells=function(t,e){var n=[];this.model.beginUpdate();try{for(var i=0;i<t.length;i++)if(this.isTableCell(t[i])){var l=this.model.getParent(t[i]),s=this.model.getParent(l);1==this.model.getChildCount(l)&&1==this.model.getChildCount(s)?mxUtils.indexOf(t,s)<0&&mxUtils.indexOf(n,s)<0&&n.push(s):this.labelChanged(t[i],"")}else{if(this.isTableRow(t[i])){s=this.model.getParent(t[i]);if(mxUtils.indexOf(t,s)<0&&mxUtils.indexOf(n,s)<0){for(var o=this.model.getChildCells(s,!0),r=0,a=0;a<o.length;a++)0<=mxUtils.indexOf(t,o[a])&&r++;r==o.length&&n.push(s)}}n.push(t[i])}n=u.apply(this,[n,e])}finally{this.model.endUpdate()}return n},Graph.prototype.updateCustomLinks=function(t,e,n){n=null!=n?n:new Graph;for(var i=0;i<e.length;i++)null!=e[i]&&n.updateCustomLinksForCell(t,e[i],n)},Graph.prototype.updateCustomLinksForCell=function(t,e){this.doUpdateCustomLinksForCell(t,e);for(var n=this.model.getChildCount(e),i=0;i<n;i++)this.updateCustomLinksForCell(t,this.model.getChildAt(e,i))},Graph.prototype.doUpdateCustomLinksForCell=function(t,e){},Graph.prototype.getAllConnectionConstraints=function(t,e){if(null!=t){var n=mxUtils.getValue(t.style,"points",null);if(null!=n){var i=[];try{for(var l=JSON.parse(n),s=0;s<l.length;s++){var o=l[s];i.push(new mxConnectionConstraint(new mxPoint(o[0],o[1]),!(2<o.length)||"0"!=o[2],null,3<o.length?o[3]:0,4<o.length?o[4]:0))}}catch(t){}return i}if(null!=t.shape&&null!=t.shape.bounds){var r=t.shape.direction,a=t.shape.bounds,h=t.shape.scale,u=a.width/h,a=a.height/h;if(r!=mxConstants.DIRECTION_NORTH&&r!=mxConstants.DIRECTION_SOUTH||(o=u,u=a,a=o),null!=(n=t.shape.getConstraints(t.style,u,a)))return n;if(null!=t.shape.stencil&&null!=t.shape.stencil.constraints)return t.shape.stencil.constraints;if(null!=t.shape.constraints)return t.shape.constraints}}return null},Graph.prototype.flipEdge=function(t){var e;null!=t&&(e=this.getCurrentCellStyle(t),e=mxUtils.getValue(e,mxConstants.STYLE_ELBOW,mxConstants.ELBOW_HORIZONTAL)==mxConstants.ELBOW_HORIZONTAL?mxConstants.ELBOW_VERTICAL:mxConstants.ELBOW_HORIZONTAL,this.setCellStyles(mxConstants.STYLE_ELBOW,e,[t]))},Graph.prototype.isValidRoot=function(t){for(var e=this.model.getChildCount(t),n=0,i=0;i<e;i++){var l=this.model.getChildAt(t,i);!this.model.isVertex(l)||null==(l=this.getCellGeometry(l))||l.relative||n++}return 0<n||this.isContainer(t)},Graph.prototype.isValidDropTarget=function(t,e,n){for(var i=this.getCurrentCellStyle(t),l=!0,s=!0,o=0;o<e.length&&s;o++)l=l&&this.isTable(e[o]),s=s&&this.isTableRow(e[o]);return!this.isCellLocked(t)&&(this.isTargetShape(t,e,n)||("1"!=mxUtils.getValue(i,"part","0")||this.isContainer(t))&&"0"!=mxUtils.getValue(i,"dropTarget","1")&&(mxGraph.prototype.isValidDropTarget.apply(this,arguments)||this.isContainer(t))&&!this.isTableRow(t)&&(!this.isTable(t)||s||l))},Graph.prototype.createGroupCell=function(){var t=mxGraph.prototype.createGroupCell.apply(this,arguments);return t.setStyle("group"),t},Graph.prototype.isExtendParentsOnAdd=function(t){var e=mxGraph.prototype.isExtendParentsOnAdd.apply(this,arguments);return e=e&&null!=t&&null!=this.layoutManager&&null!=(t=this.model.getParent(t))&&null!=(t=this.layoutManager.getLayout(t))&&t.constructor==mxStackLayout?!1:e},Graph.prototype.getPreferredSizeForCell=function(t,e,n){n=null!=n?n:this.gridEnabled;var i=mxGraph.prototype.getPreferredSizeForCell.apply(this,arguments);return null!=i&&(i.width+=10,i.height+=4,n)&&(i.width=this.snap(i.width),i.height=this.snap(i.height)),i},Graph.prototype.turnShapes=function(t,e){var n=this.getModel(),i=[];n.beginUpdate();try{for(var l=0;l<t.length;l++){var s,o,r,a,h,u,d,p,m,c,g,x,y,C,f,v=t[l];n.isEdge(v)?(s=n.getTerminal(v,!0),o=n.getTerminal(v,!1),n.setTerminal(v,o,!0),n.setTerminal(v,s,!1),null!=(g=n.getGeometry(v))&&(null!=(g=g.clone()).points&&g.points.reverse(),r=g.getTerminalPoint(!0),a=g.getTerminalPoint(!1),g.setTerminalPoint(r,!1),g.setTerminalPoint(a,!0),n.setGeometry(v,g),h=this.view.getState(v),u=this.view.getState(s),d=this.view.getState(o),null!=h&&(p=null!=u?this.getConnectionConstraint(h,u,!0):null,m=null!=d?this.getConnectionConstraint(h,d,!1):null,this.setConnectionConstraint(v,s,!0,m),this.setConnectionConstraint(v,o,!1,p),c=mxUtils.getValue(h.style,mxConstants.STYLE_SOURCE_PERIMETER_SPACING),this.setCellStyles(mxConstants.STYLE_SOURCE_PERIMETER_SPACING,mxUtils.getValue(h.style,mxConstants.STYLE_TARGET_PERIMETER_SPACING),[v]),this.setCellStyles(mxConstants.STYLE_TARGET_PERIMETER_SPACING,c,[v])),i.push(v))):n.isVertex(v)&&null!=(g=this.getCellGeometry(v))&&(this.isTable(v)||this.isTableRow(v)||this.isTableCell(v)||this.isSwimlane(v)||((g=g.clone()).x+=g.width/2-g.height/2,g.y+=g.height/2-g.width/2,x=g.width,g.width=g.height,g.height=x,n.setGeometry(v,g)),null!=(y=this.view.getState(v))&&(C=[mxConstants.DIRECTION_EAST,mxConstants.DIRECTION_SOUTH,mxConstants.DIRECTION_WEST,mxConstants.DIRECTION_NORTH],f=mxUtils.getValue(y.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),this.setCellStyles(mxConstants.STYLE_DIRECTION,C[mxUtils.mod(mxUtils.indexOf(C,f)+(e?-1:1),C.length)],[v])),i.push(v))}}finally{n.endUpdate()}return i},Graph.prototype.stencilHasPlaceholders=function(t){if(null!=t&&null!=t.fgNode)for(var e=t.fgNode.firstChild;null!=e;){if("text"==e.nodeName&&"1"==e.getAttribute("placeholders"))return!0;e=e.nextSibling}return!1},Graph.prototype.processChange),p=(Graph.prototype.processChange=function(t){var e,n;t instanceof mxGeometryChange&&(this.isTableCell(t.cell)||this.isTableRow(t.cell))&&(null==t.previous&&null!=t.geometry||null!=t.previous&&!t.previous.equals(t.geometry))&&(e=t.cell,this.isTableCell(e)&&(e=this.model.getParent(e)),this.isTableRow(e)&&(e=this.model.getParent(e)),null!=(n=this.view.getState(e)))&&null!=n.shape&&(this.view.invalidate(e),n.shape.bounds=null),d.apply(this,arguments),t instanceof mxValueChange&&null!=t.cell&&null!=t.cell.value&&"object"==typeof t.cell.value&&this.invalidateDescendantsWithPlaceholders(t.cell)},Graph.prototype.invalidateDescendantsWithPlaceholders=function(t){var e=this.model.getDescendants(t);if(0<e.length)for(var n=0;n<e.length;n++){var i=this.view.getState(e[n]);null!=i&&null!=i.shape&&null!=i.shape.stencil&&this.stencilHasPlaceholders(i.shape.stencil)?this.removeStateForCell(e[n]):this.isReplacePlaceholders(e[n])&&this.view.invalidate(e[n],!1,!1)}},Graph.prototype.replaceElement=function(t,e){for(var n=t.ownerDocument.createElement(null!=e?e:"span"),i=Array.prototype.slice.call(t.attributes);attr=i.pop();)n.setAttribute(attr.nodeName,attr.nodeValue);n.innerHTML=t.innerHTML,t.parentNode.replaceChild(n,t)},Graph.prototype.processElements=function(t,e){if(null!=t)for(var n=t.getElementsByTagName("*"),i=0;i<n.length;i++)null!=n[i]&&e(n[i])},Graph.prototype.updateLabelElements=function(t,e,n){t=null!=t?t:this.getSelectionCells();for(var i=document.createElement("div"),l=0;l<t.length;l++){var s=this.getCurrentCellStyle(t[l]);if(null!=s&&"1"==s.html){s=this.convertValueToString(t[l]);if(null!=s&&0<s.length){i.innerHTML=Graph.sanitizeHtml(s);for(var o=i.getElementsByTagName(null!=n?n:"*"),r=0;r<o.length;r++)e(o[r]);i.innerHTML!=s&&this.cellLabelChanged(t[l],i.innerHTML)}}}},Graph.prototype.cellLabelChanged=function(t,e,n){e=Graph.zapGremlins(e),this.model.beginUpdate();try{if(null!=t.value&&"object"==typeof t.value){if(this.isReplacePlaceholders(t)&&null!=t.getAttribute("placeholder"))for(var i=t.getAttribute("placeholder"),l=t;null!=l;){if(l==this.model.getRoot()||null!=l.value&&"object"==typeof l.value&&l.hasAttribute(i)){this.setAttributeForCell(l,i,e);break}l=this.model.getParent(l)}var s=t.value.cloneNode(!0);Graph.translateDiagram&&null!=Graph.diagramLanguage&&s.hasAttribute("label_"+Graph.diagramLanguage)?s.setAttribute("label_"+Graph.diagramLanguage,e):s.setAttribute("label",e),e=s}mxGraph.prototype.cellLabelChanged.apply(this,arguments)}finally{this.model.endUpdate()}},Graph.prototype.cellsRemoved=function(t){if(null!=t){for(var e=new mxDictionary,n=0;n<t.length;n++)e.put(t[n],!0);for(var i=[],n=0;n<t.length;n++){var l=this.model.getParent(t[n]);null==l||e.get(l)||(e.put(l,!0),i.push(l))}for(n=0;n<i.length;n++){var s=this.view.getState(i[n]);if(null!=s&&(this.model.isEdge(s.cell)||this.model.isVertex(s.cell))&&this.isCellDeletable(s.cell)&&this.isTransparentState(s)){for(var o=!0,r=0;r<this.model.getChildCount(s.cell)&&o;r++)e.get(this.model.getChildAt(s.cell,r))||(o=!1);o&&t.push(s.cell)}}}mxGraph.prototype.cellsRemoved.apply(this,arguments)},Graph.prototype.removeCellsAfterUngroup=function(t){for(var e=[],n=0;n<t.length;n++)this.isCellDeletable(t[n])&&this.isTransparentState(this.view.getState(t[n]))&&e.push(t[n]);t=e,mxGraph.prototype.removeCellsAfterUngroup.apply(this,arguments)},Graph.prototype.setLinkForCell=function(t,e){this.setAttributeForCell(t,"link",e)},Graph.prototype.setTooltipForCell=function(t,e){var n="tooltip";Graph.translateDiagram&&null!=Graph.diagramLanguage&&mxUtils.isNode(t.value)&&t.value.hasAttribute("tooltip_"+Graph.diagramLanguage)&&(n="tooltip_"+Graph.diagramLanguage),this.setAttributeForCell(t,n,e)},Graph.prototype.getAttributeForCell=function(t,e,n){t=null!=t.value&&"object"==typeof t.value?t.value.getAttribute(e):null;return null!=t?t:n},Graph.prototype.setAttributeForCell=function(t,e,n){var i=null;null!=t.value&&"object"==typeof t.value?i=t.value.cloneNode(!0):(i=mxUtils.createXmlDocument().createElement("UserObject")).setAttribute("label",t.value||""),null!=n?i.setAttribute(e,n):i.removeAttribute(e),this.model.setValue(t,i)},Graph.prototype.isTargetShape=function(t,e,n){for(var i=mxUtils.getValue(this.getCurrentCellStyle(t),mxConstants.STYLE_SHAPE,""),l=0;l<e.length;l++){var s=mxUtils.getValue(this.getCurrentCellStyle(e[l]),"targetShapes","").split(",");if(0<=mxUtils.indexOf(s,i))return!0}return!1},Graph.prototype.getDropTarget),m=(Graph.prototype.getDropTarget=function(t,e,n,i){if(mxEvent.isAltDown(e))return null;for(var l=0;l<t.length;l++){var s=this.model.getParent(t[l]);if(this.model.isEdge(s)&&mxUtils.indexOf(t,s)<0)return null}for(var e=p.apply(this,arguments),o=!0,l=0;l<t.length&&o;l++)o=o&&this.isTableRow(t[l]);return o&&(this.isTableCell(e)&&(e=this.model.getParent(e)),this.isTableRow(e)&&(e=this.model.getParent(e)),this.isTable(e)||(e=null)),e},Graph.prototype.click=function(t){mxGraph.prototype.click.call(this,t),this.firstClickState=t.getState(),this.firstClickSource=t.getSource()},Graph.prototype.dblClick=function(t,e){this.isEnabled()&&(e=this.insertTextForEvent(t,e),mxGraph.prototype.dblClick.call(this,t,e))},Graph.prototype.insertTextForEvent=function(t,e){var n,i,l=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t));return null==t||this.model.isVertex(e)||(n=this.model.isEdge(e)?this.view.getState(e):null,i=mxEvent.getSource(t),this.firstClickState!=n)||this.firstClickSource!=i||null!=n&&null!=n.text&&null!=n.text.node&&null!=n.text.boundingBox&&(mxUtils.contains(n.text.boundingBox,l.x,l.y)||mxUtils.isAncestorNode(n.text.node,mxEvent.getSource(t)))||(null!=n||this.isCellLocked(this.getDefaultParent()))&&(null==n||this.isCellLocked(n.cell))||!(null!=n||mxClient.IS_SVG&&i==this.view.getCanvas().ownerSVGElement)||(null==n&&(n=this.view.getState(this.getCellAt(l.x,l.y))),e=this.addText(l.x,l.y,n)),e},Graph.prototype.getInsertPoint=function(){var t,e,n=this.getGridSize(),i=this.container.scrollLeft/this.view.scale-this.view.translate.x,l=this.container.scrollTop/this.view.scale-this.view.translate.y;return this.pageVisible&&(t=this.getPageLayout(),e=this.getPageSize(),i=Math.max(i,t.x*e.width),l=Math.max(l,t.y*e.height)),new mxPoint(this.snap(i+n),this.snap(l+n))},Graph.prototype.getFreeInsertPoint=function(){var t=this.view,e=this.getGraphBounds(),n=this.getInsertPoint();return new mxPoint(this.snap(Math.round(Math.max(n.x,e.x/t.scale-t.translate.x+(0==e.width?2*this.gridSize:0)))),this.snap(Math.round(Math.max(n.y,(e.y+e.height)/t.scale-t.translate.y+2*this.gridSize))))},Graph.prototype.getCenterInsertPoint=function(t){return t=null!=t?t:new mxRectangle,mxUtils.hasScrollbars(this.container)?new mxPoint(this.snap(Math.round((this.container.scrollLeft+this.container.clientWidth/2)/this.view.scale-this.view.translate.x-t.width/2)),this.snap(Math.round((this.container.scrollTop+this.container.clientHeight/2)/this.view.scale-this.view.translate.y-t.height/2))):new mxPoint(this.snap(Math.round(this.container.clientWidth/2/this.view.scale-this.view.translate.x-t.width/2)),this.snap(Math.round(this.container.clientHeight/2/this.view.scale-this.view.translate.y-t.height/2)))},Graph.prototype.isMouseInsertPoint=function(){return!1},Graph.prototype.appendFontSize=function(t,e){return t=null!=t?t:"",null!=e&&(0<t.length&&";"!=t.charAt(t.length-1)&&(t+=";"),t+="fontSize="+e+";"),t},Graph.prototype.addText=function(t,e,n){var i,l,s=new mxCell,o=(s.value="Text",s.geometry=new mxGeometry(0,0,0,0),s.vertex=!0,"html=1;align=center;verticalAlign=middle;resizable=0;points=[];");null!=n&&this.model.isEdge(n.cell)?(s.style="edgeLabel;"+this.appendFontSize(o,this.edgeFontSize),s.geometry.relative=!0,s.connectable=!1,l=this.view.getRelativePoint(n,t,e),s.geometry.x=Math.round(1e4*l.x)/1e4,s.geometry.y=Math.round(l.y),s.geometry.offset=new mxPoint(0,0),l=this.view.getPoint(n,s.geometry),i=this.view.scale,s.geometry.offset=new mxPoint(Math.round((t-l.x)/i),Math.round((e-l.y)/i))):(l=this.view.translate,s.style="text;"+this.appendFontSize(o,this.vertexFontSize),s.geometry.width=40,s.geometry.height=20,s.geometry.x=Math.round(t/this.view.scale)-l.x-(null!=n?n.origin.x:0),s.geometry.y=Math.round(e/this.view.scale)-l.y-(null!=n?n.origin.y:0),s.style+="autosize=1;"),this.getModel().beginUpdate();try{this.addCells([s],null!=n?n.cell:null),this.fireEvent(new mxEventObject("textInserted","cells",[s])),this.autoSizeCell(s)}finally{this.getModel().endUpdate()}return s},Graph.prototype.addClickHandler=function(t,s,o){var e=mxUtils.bind(this,function(){var t=this.container.getElementsByTagName("a");if(null!=t)for(var e=0;e<t.length;e++){var n=this.getAbsoluteUrl(t[e].getAttribute("href"));null!=n&&(t[e].setAttribute("rel",this.linkRelation),t[e].setAttribute("href",n),null!=s)&&mxEvent.addGestureListeners(t[e],null,null,s)}}),n=(this.model.addListener(mxEvent.CHANGE,e),e(),this.container.style.cursor),r=this.getTolerance(),a=this,i={currentState:null,currentLink:null,currentTarget:null,highlight:null!=t&&""!=t&&t!=mxConstants.NONE?new mxCellHighlight(a,t,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(t){var e=t.sourceState;null!=e&&null!=a.getLinkForCell(e.cell)||(t=a.getCellAt(t.getGraphX(),t.getGraphY(),null,null,null,function(t,e,n){return null==a.getLinkForCell(t.cell)}),e=null==e||a.model.isAncestor(t,e.cell)?a.view.getState(t):null),e!=this.currentState&&(null!=this.currentState&&this.clear(),this.currentState=e,null!=this.currentState)&&this.activate(this.currentState)},mouseDown:function(t,e){this.startX=e.getGraphX(),this.startY=e.getGraphY(),this.scrollLeft=a.container.scrollLeft,this.scrollTop=a.container.scrollTop,null==this.currentLink&&"auto"==a.container.style.overflow&&(a.container.style.cursor="move"),this.updateCurrentState(e)},mouseMove:function(t,e){if(a.isMouseDown){var n,i;null!=this.currentLink&&(n=Math.abs(this.startX-e.getGraphX()),i=Math.abs(this.startY-e.getGraphY()),r<n||r<i)&&this.clear()}else{for(var l=e.getSource();null!=l&&"a"!=l.nodeName.toLowerCase();)l=l.parentNode;null!=l?this.clear():(null!=a.tooltipHandler&&null!=this.currentLink&&null!=this.currentState&&a.tooltipHandler.reset(e,!0,this.currentState),null!=this.currentState&&(e.getState()==this.currentState||null==e.sourceState)&&a.intersects(this.currentState,e.getGraphX(),e.getGraphY())||this.updateCurrentState(e))}},mouseUp:function(t,e){for(var n=e.getSource(),i=e.getEvent(),l=n;null!=l&&"a"!=l.nodeName.toLowerCase();)l=l.parentNode;null==l&&Math.abs(this.scrollLeft-a.container.scrollLeft)<r&&Math.abs(this.scrollTop-a.container.scrollTop)<r&&(null==e.sourceState||!e.isSource(e.sourceState.control))&&((mxEvent.isLeftMouseButton(i)||mxEvent.isMiddleMouseButton(i))&&!mxEvent.isPopupTrigger(i)||mxEvent.isTouchEvent(i))&&(null!=this.currentLink?(n=a.isBlankLink(this.currentLink),"data:"!==this.currentLink.substring(0,5)&&n||null==s||s(i,this.currentLink,null!=this.currentState?this.currentState.cell:null),mxEvent.isConsumed(i)||(i=null!=this.currentTarget?this.currentTarget:mxEvent.isMiddleMouseButton(i)?"_blank":n?a.linkTarget:"_top",a.openLink(this.currentLink,i),e.consume())):null!=o&&!e.isConsumed()&&Math.abs(this.scrollLeft-a.container.scrollLeft)<r&&Math.abs(this.scrollTop-a.container.scrollTop)<r&&Math.abs(this.startX-e.getGraphX())<r&&Math.abs(this.startY-e.getGraphY())<r&&o(e.getEvent())),this.clear()},activate:function(t){this.currentLink=a.getAbsoluteUrl(a.getLinkForCell(t.cell)),null!=this.currentLink&&(this.currentTarget=a.getLinkTargetForCell(t.cell),a.container.style.cursor="pointer",null!=this.highlight)&&this.highlight.highlight(t)},clear:function(){null!=a.container&&(a.container.style.cursor=n),this.currentTarget=null,this.currentState=null,(this.currentLink=null)!=this.highlight&&this.highlight.hide(),null!=a.tooltipHandler&&a.tooltipHandler.hide()}};a.click=function(t){},a.addMouseListener(i),mxEvent.addListener(document,"mouseleave",function(t){i.clear()})},Graph.prototype.duplicateCells=function(t,e){t=null!=t?t:this.getSelectionCells(),e=null==e||e;for(var n=0;n<t.length;n++)this.isTableCell(t[n])&&(t[n]=this.model.getParent(t[n]));t=this.model.getTopmostCells(t);var i=this.getModel(),l=this.gridSize,s=[];i.beginUpdate();try{for(var o=new Object,r=this.createCellLookup(t),a=this.cloneCells(t,!1,o,!0),n=0;n<t.length;n++){var h,u,d,p,m=i.getParent(t[n]);null!=m?(h=this.moveCells([a[n]],l,l,!1)[0],s.push(h),e?i.add(m,a[n]):(u=m.getIndex(t[n]),i.add(m,a[n],u+1)),this.isTable(m)&&(d=this.getCellGeometry(a[n]),p=this.getCellGeometry(m),null!=d)&&null!=p&&((p=p.clone()).height+=d.height,i.setGeometry(m,p))):s.push(a[n])}this.updateCustomLinks(this.createCellMapping(o,r),a,this),this.fireEvent(new mxEventObject(mxEvent.CELLS_ADDED,"cells",a))}finally{i.endUpdate()}return s},Graph.prototype.insertImage=function(t,e,n){if(null!=t&&null!=this.cellEditor.textarea){for(var i=this.cellEditor.textarea.getElementsByTagName("img"),l=[],s=0;s<i.length;s++)l.push(i[s]);document.execCommand("insertimage",!1,t);var o=this.cellEditor.textarea.getElementsByTagName("img");if(o.length==l.length+1)for(s=o.length-1;0<=s;s--)if(0==s||o[s]!=l[s-1]){o[s].setAttribute("width",e),o[s].setAttribute("height",n);break}}},Graph.prototype.insertLink=function(t){if(null!=this.cellEditor.textarea)if(0==t.length)document.execCommand("unlink",!1);else if(mxClient.IS_FF){for(var e=this.cellEditor.textarea.getElementsByTagName("a"),n=[],i=0;i<e.length;i++)n.push(e[i]);document.execCommand("createlink",!1,mxUtils.trim(t));var l=this.cellEditor.textarea.getElementsByTagName("a");if(l.length==n.length+1)for(i=l.length-1;0<=i;i--)if(l[i]!=n[i-1]){for(e=l[i].getElementsByTagName("a");0<e.length;){for(var s=e[0].parentNode;null!=e[0].firstChild;)s.insertBefore(e[0].firstChild,e[0]);s.removeChild(e[0])}break}}else document.execCommand("createlink",!1,mxUtils.trim(t))},Graph.prototype.isCellResizable=function(t){var e=mxGraph.prototype.isCellResizable.apply(this,arguments),n=this.getCurrentCellStyle(t);return!this.isTableCell(t)&&!this.isTableRow(t)&&(e||"0"!=mxUtils.getValue(n,mxConstants.STYLE_RESIZABLE,"1")&&"wrap"==n[mxConstants.STYLE_WHITE_SPACE])},Graph.prototype.distributeCells=function(n,t,e){if(null!=(t=null==t?this.getSelectionCells():t)&&1<t.length){for(var i,l,s=[],o=null,r=null,a=0,h=0;h<t.length;h++)this.getModel().isVertex(t[h])&&null!=(i=this.view.getState(t[h]))&&(l=n?i.getCenterX():i.getCenterY(),o=null!=o?Math.max(o,l):l,r=null!=r?Math.min(r,l):l,e&&(a+=n?i.width:i.height),s.push(i));if(2<s.length){s.sort(function(t,e){return n?t.x-e.x:t.y-e.y}),e&&(a-=n?s[0].width/2+s[s.length-1].width/2:s[0].height/2+s[s.length-1].height/2);var u=this.view.translate,d=this.view.scale;r=r/d-(n?u.x:u.y),o=o/d-(n?u.x:u.y),this.getModel().beginUpdate();try{for(var p=(o-r-a)/(s.length-1),m=r+(e?n?s[0].width/2:s[0].height/2:0),h=1;h<s.length-1;h++){var c=this.view.getState(this.model.getParent(s[h].cell)),g=this.getCellGeometry(s[h].cell);m+=p,null!=g&&null!=c&&(g=g.clone(),n?g.x=Math.round(m-(e?0:g.width/2))-c.origin.x:g.y=Math.round(m-(e?0:g.height/2))-c.origin.y,this.getModel().setGeometry(s[h].cell,g)),e&&(m+=n?s[h].width:s[h].height)}}finally{this.getModel().endUpdate()}}}return t},Graph.prototype.isCloneEvent=function(t){return mxClient.IS_MAC&&mxEvent.isMetaDown(t)||mxEvent.isControlDown(t)},Graph.prototype.createSvgImageExport=function(){var t=new mxImageExport,s=(t.addCellData=function(t,e,n){if(e.setAttribute("data-cell-id",t.id),n)if(mxUtils.isNode(t.value))for(var i=0;i<t.value.attributes.length;i++){var l=t.value.attributes[i];e.setAttribute("data-cell-"+l.name,l.value)}else if("object"==typeof t.value)for(var s in t.value)e.setAttribute("data-cell-"+s,t.value[s]);else null!=t.value&&e.setAttribute("data-cell-value",t.value);return e},t.visitStatesRecursive);return t.visitStatesRecursive=function(t,e,n){var i,l;null!=t&&(i=e.root,l=e.root.ownerDocument,e.root=this.addCellData(t.cell,null!=l.createElementNS?l.createElementNS(mxConstants.NS_SVG,"g"):l.createElement("g"),Editor.addSvgMetadata),i.appendChild(e.root),s.apply(this,arguments),e.root=i)},t.getLinkForCellState=mxUtils.bind(this,function(t,e){return this.getLinkForCell(t.cell)}),t.getTitleForCellState=mxUtils.bind(this,function(t,e){return Editor.convertHtmlToText(this.convertValueToTooltip(t.cell))}),t},Graph.prototype.parseBackgroundImage=function(t){var e=null;return e=null!=t&&0<t.length?new mxImage((t=JSON.parse(t)).src,t.width,t.height):e},Graph.prototype.getBackgroundImageObject=function(t){return t},Graph.prototype.getSvg=function(t,r,e,n,i,a,l,s,o,h,U,u,d,p,G,m){var c=null;if(null!=p)for(var c=new mxDictionary,g=0;g<p.length;g++)c.put(p[g],!0);var x=this.useCssTransforms,y=this.enableFlowAnimation;this.enableFlowAnimation=!1,x&&(this.useCssTransforms=!1,this.view.revalidate(),this.sizeDidChange());try{r=null!=r?r:1,e=null!=e?e:0,i=null==i||i,a=null==a||a,l=null==l||l,h=null!=h&&h;var C="page"==d?this.view.getBackgroundPageBounds():a&&null==c||n||"diagram"==d?this.getGraphBounds():this.getBoundingBox(this.getSelectionCells()),f=this.backgroundImage,v=this.view.translate,E=this.view.scale;if("diagram"==d&&null!=f&&null!=f.width&&null!=f.height&&(C=mxRectangle.fromRectangle(C)).add(new mxRectangle((v.x+f.x)*E,(v.y+f.y)*E,f.width*E,f.height*E)),null==C)throw Error(mxResources.get("drawingEmpty"));var S,w,b=t,T=(null!=b&&"dark"==u&&Editor.enableCssDarkMode&&(b=Graph.invertColor(t)),r/E),M=Math.max(1,Math.ceil(C.width*T)+2*e)+(h&&0==e?5:0),L=Math.max(1,Math.ceil(C.height*T)+2*e)+(h&&0==e?5:0),I=i?-.5:0,A=Graph.createSvgNode(I,I,M,L,b),P=A.ownerDocument,N=(null!=t&&((S=mxUtils.createElementNs(P,mxConstants.NS_SVG,"rect")).setAttribute("fill",t),S.setAttribute("width","100%"),S.setAttribute("height","100%"),S.setAttribute("x","0"),S.setAttribute("y","0"),A.appendChild(S)),mxUtils.createElementNs(P,mxConstants.NS_SVG,"g")),R=(A.appendChild(N),this.createSvgCanvas(N)),D=(R.foOffset=i?-.5:0,R.textOffset=i?-.5:0,R.imageOffset=i?-.5:0,R.translate(Math.floor(e/r-C.x/E),Math.floor(e/r-C.y/E)),document.createElement("div")),O=R.getAlternateText,_=(R.getAlternateText=function(t,e,n,i,l,s,o,r,a,h,u,d,p){if(!(null!=s&&0<this.state.fontSize))return O.apply(this,arguments);try{s=mxUtils.isNode(s)?s.innerText:(D.innerHTML=s,mxUtils.extractTextWithWhitespace(D.childNodes));for(var m=Math.ceil(2*i/this.state.fontSize),c=[],g=0,x=0;(0==m||g<m)&&x<s.length;){var y=s.charCodeAt(x);if(10==y||13==y){if(0<g)break}else c.push(s.charAt(x)),y<255&&g++;x++}return s=c.length<s.length&&1<s.length-c.length?mxUtils.trim(c.join(""))+"...":s}catch(t){return O.apply(this,arguments)}},null!=f&&null!=f.width&&null!=f.height&&(w=E/r,I=new mxRectangle((f.x+v.x)*w,(f.y+v.y)*w,f.width*w,f.height*w),mxUtils.intersects(C,I))&&R.image(f.x+v.x,f.y+v.y,f.width,f.height,f.src,!0),R.scale(T),R.textEnabled=l,(s=null!=s?s:this.createSvgImageExport()).getLinkForCellState),k=(s.getLinkForCellState=function(t,e){var n=t.view.graph.getAbsoluteUrl(_.apply(this,arguments));return null==n||t.view.graph.isCustomLink(n)?null:n},s.getLinkTargetForCellState=function(t,e){return t.view.graph.getLinkTargetForCell(t.cell)},s.drawCellState),H=null,V=mxUtils.bind(this,function(){var t;return null==H&&(H="ge-flow-animation-"+Editor.guid(),(t=null!=P.createElementNS?P.createElementNS(mxConstants.NS_SVG,"style"):P.createElement("style")).innerHTML=this.createFlowAnimationCss(H),P.getElementsByTagName("defs")[0].appendChild(t)),H}),F=(s.drawCellState=function(t,e){for(var n=t.view.graph,i=null!=c?c.get(t.cell):n.isCellSelected(t.cell),l=n.model.getParent(t.cell);!(a&&null==c||i||null==l);)i=null!=c?c.get(l):n.isCellSelected(l),l=n.model.getParent(l);if(null!=t.shape)try{var s=t.shape.isFlowAnimationEnabled,o=t.shape.addFlowAnimationToShape;t.shape.isFlowAnimationEnabled=function(){return y&&n.model.isEdge(t.cell)&&"1"==mxUtils.getValue(t.style,"flowAnimation","0")},t.shape.addFlowAnimationToShape=function(){n.addFlowAnimationToNode(this.getFlowAnimationPath(),t.style,r,V())},(a&&null==c||i)&&(n.view.redrawEnumerationState(t),k.apply(this,arguments),this.doDrawShape(t.secondLabel,e))}finally{t.shape.isFlowAnimationEnabled=s,t.shape.addFlowAnimationToShape=o}},null!=this.view.currentRoot?this.view.currentRoot:this.model.root);return s.drawState(this.getView().getState(F),R),this.addForeignObjectWarning(R,A),m?this.disableSvgLinks(A):this.updateSvgLinks(A,o,!0),A}finally{this.enableFlowAnimation=y,x&&(this.useCssTransforms=!0,this.view.revalidate(),this.sizeDidChange())}},Graph.prototype.addForeignObjectWarning=function(t,e){var n,i,l;"0"!=urlParams["svg-warning"]&&0<e.getElementsByTagName("foreignObject").length&&(n=t.createElement("switch"),(i=t.createElement("g")).setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility"),(l=t.createElement("a")).setAttribute("transform","translate(0,-5)"),null==l.setAttributeNS||e.ownerDocument!=document&&null==document.documentMode?(l.setAttribute("xlink:href",Graph.foreignObjectWarningLink),l.setAttribute("target","_blank")):(l.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",Graph.foreignObjectWarningLink),l.setAttributeNS(mxConstants.NS_XLINK,"target","_blank")),(t=t.createElement("text")).setAttribute("text-anchor","middle"),t.setAttribute("font-size","10px"),t.setAttribute("x","50%"),t.setAttribute("y","100%"),mxUtils.write(t,Graph.foreignObjectWarningText),n.appendChild(i),l.appendChild(t),n.appendChild(l),e.appendChild(n))},Graph.prototype.disableSvgLinks=function(t,e){for(var n=t.getElementsByTagName("a"),i=0;i<n.length;i++){var l=n[i].getAttribute("href");null!=(l=null==l?n[i].getAttribute("xlink:href"):l)&&(n[i].style.pointerEvents="none",n[i].setAttribute("href","")),e&&e(n[i])}},Graph.prototype.updateSvgLinks=function(t,e,n){for(var i,l=t.getElementsByTagName("a"),s=0;s<l.length;s++)null==l[s].getAttribute("target")&&null!=(i=null==(i=l[s].getAttribute("href"))?l[s].getAttribute("xlink:href"):i)&&(null!=e&&/^https?:\/\//.test(i)?l[s].setAttribute("target",e):n&&this.isCustomLink(i)&&l[s].setAttribute("href","javascript:void(0);"))},Graph.prototype.createSvgCanvas=function(t){t=new mxSvgCanvas2D(t);return t.minStrokeWidth=this.cellRenderer.minSvgStrokeWidth,t.pointerEvents=!0,t},Graph.prototype.getSelectedTextBlocks=function(){function t(t){for(var e=t.startContainer,n=t.endContainer,i=t.commonAncestorContainer,l=[],s=e.parentNode;s&&(l.push(s),s!=i);s=s.parentNode);for(l.reverse(),s=e;s&&(l.push(s),s!=n);s=function(t){if(t.firstChild)return t.firstChild;for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}(s));return l}for(var e,n=[this.getSelectedElement()],i=(window.getSelection&&(e=window.getSelection()).getRangeAt&&e.rangeCount&&(n=t(e.getRangeAt(0))),[]),l=0;l<n.length;l++)for(var s=n[l];null!=this.cellEditor.textarea&&this.cellEditor.textarea.contains(s)&&s!=this.cellEditor.textarea&&null!=s.parentNode;){if(s.nodeType==mxConstants.NODETYPE_ELEMENT&&"block"==mxUtils.getCurrentStyle(s).display){mxUtils.indexOf(i,s)<0&&i.push(s);break}s=s.parentNode}return i},Graph.prototype.getSelectedElement=function(){var t,e=null;return window.getSelection?(t=window.getSelection()).getRangeAt&&t.rangeCount&&(e=t.getRangeAt(0).commonAncestorContainer):document.selection&&(e=document.selection.createRange().parentElement()),e},Graph.prototype.getSelectedEditingElement=function(){for(var t=this.getSelectedElement();null!=t&&t.nodeType!=mxConstants.NODETYPE_ELEMENT;)t=t.parentNode;return t=null!=t&&t==this.cellEditor.textarea&&1==this.cellEditor.textarea.children.length&&this.cellEditor.textarea.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT?this.cellEditor.textarea.firstChild:t},Graph.prototype.getParentByName=function(t,e,n){for(;null!=t;){if(t.nodeName==e)return t;if(t==n)return null;t=t.parentNode}return t},Graph.prototype.getParentByNames=function(t,e,n){for(;null!=t;){if(0<=mxUtils.indexOf(e,t.nodeName))return t;if(t==n)return null;t=t.parentNode}return t},Graph.prototype.selectNode=function(t){var e,n=null;window.getSelection?(n=window.getSelection()).getRangeAt&&n.rangeCount&&((e=document.createRange()).selectNode(t),n.removeAllRanges(),n.addRange(e)):(n=document.selection)&&"Control"!=n.type&&((t=n.createRange()).collapse(!0),(e=n.createRange()).setEndPoint("StartToStart",t),e.select())},Graph.prototype.flipEdgePoints=function(t,e,n){var i=this.getCellGeometry(t);if(null!=i){if(null!=(i=i.clone()).points)for(var l=0;l<i.points.length;l++)e?i.points[l].x=n+(n-i.points[l].x):i.points[l].y=n+(n-i.points[l].y);var s=function(t){null!=t&&(e?t.x=n+(n-t.x):t.y=n+(n-t.y))};s(i.getTerminalPoint(!0)),s(i.getTerminalPoint(!1)),this.model.setGeometry(t,i)}},Graph.prototype.flipChildren=function(t,e,n){this.model.beginUpdate();try{for(var i=this.model.getChildCount(t),l=0;l<i;l++){var s,o=this.model.getChildAt(t,l);this.model.isEdge(o)?this.flipEdgePoints(o,e,n):null!=(s=this.getCellGeometry(o))&&(s=s.clone(),e?s.x=n+(n-s.x-s.width):s.y=n+(n-s.y-s.height),this.model.setGeometry(o,s))}}finally{this.model.endUpdate()}},Graph.prototype.flipCells=function(t,e){this.model.beginUpdate();try{t=this.model.getTopmostCells(t);for(var n,i,l=[],s=0;s<t.length;s++)this.model.isEdge(t[s])?null!=(n=this.view.getState(t[s]))&&this.flipEdgePoints(t[s],e,(e?n.getCenterX():n.getCenterY())/this.view.scale-(e?n.origin.x:n.origin.y)-(e?this.view.translate.x:this.view.translate.y)):(null!=(i=this.getCellGeometry(t[s]))&&this.flipChildren(t[s],e,e?i.getCenterX()-i.x:i.getCenterY()-i.y),l.push(t[s]));this.toggleCellStyles(e?mxConstants.STYLE_FLIPH:mxConstants.STYLE_FLIPV,!1,l)}finally{this.model.endUpdate()}},Graph.prototype.deleteCells=function(t,e){var n=null;if(null!=t&&0<t.length){this.model.beginUpdate();try{for(var i=0;i<t.length;i++){var l,s,o=this.model.getParent(t[i]);this.isTable(o)&&(l=this.getCellGeometry(t[i]),s=this.getCellGeometry(o),null!=l)&&null!=s&&((s=s.clone()).height-=l.height,this.model.setGeometry(o,s))}var r=this.selectParentAfterDelete?this.model.getParents(t):null;this.removeCells(t,e)}finally{this.model.endUpdate()}if(null!=r)for(n=[],i=0;i<r.length;i++)this.model.contains(r[i])&&(this.model.isVertex(r[i])||this.model.isEdge(r[i]))&&n.push(r[i])}return n},Graph.prototype.insertTableColumn=function(t,e){var n=this.getModel();n.beginUpdate();try{for(var i,l=t,s=0,o=(this.isTableCell(t)?(i=n.getParent(t),l=n.getParent(i),s=mxUtils.indexOf(n.getChildCells(i,!0),t)):(this.isTableRow(t)?l=n.getParent(t):t=n.getChildCells(l,!0)[0],e||(s=n.getChildCells(t,!0).length-1)),n.getChildCells(l,!0)),r=Graph.minTableColumnWidth,a=0;a<o.length;a++){var h,u=n.getChildCells(o[a],!0)[s],d=n.cloneCell(u,!1),p=(null==d&&(d=this.createVertex()),this.getCellGeometry(d));d.value=null,d.style=mxUtils.setStyle(mxUtils.setStyle(d.style,"rowspan",null),"colspan",null),null!=p&&(null!=p.alternateBounds&&(p.width=p.alternateBounds.width,p.height=p.alternateBounds.height,p.alternateBounds=null),r=p.width,null!=(h=this.getCellGeometry(o[a])))&&(p.height=h.height),n.add(o[a],d,s+(e?0:1))}var m=this.getCellGeometry(l);null!=m&&((m=m.clone()).width+=r,n.setGeometry(l,m))}finally{n.endUpdate()}},Graph.prototype.deleteLane=function(t){var e=this.getModel();e.beginUpdate();try{var n=null,i=t,n="stackLayout"==this.getCurrentCellStyle(i).childLayout?i:e.getParent(i),l=e.getChildCells(n,!0);0==l.length?e.remove(n):(n==i&&(i=l[l.length-1]),e.remove(i))}finally{e.endUpdate()}},Graph.prototype.insertLane=function(t,e){var n=this.getModel();n.beginUpdate();try{var i,l=null,s=t,o=("stackLayout"==this.getCurrentCellStyle(s).childLayout?(l=s,s=(i=n.getChildCells(l,!0))[e?0:i.length-1]):l=n.getParent(s),l.getIndex(s));(s=n.cloneCell(s,!1)).value=null,n.add(l,s,o+(e?0:1))}finally{n.endUpdate()}},Graph.prototype.insertTableRow=function(t,e){var n=this.getModel();n.beginUpdate();try{var i,l=t,s=t,o=(this.isTableCell(t)?(s=n.getParent(t),l=n.getParent(s)):this.isTableRow(t)?l=n.getParent(t):s=(i=n.getChildCells(l,!0))[e?0:i.length-1],n.getChildCells(s,!0)),r=l.getIndex(s),a=((s=n.cloneCell(s,!1)).value=null,this.getCellGeometry(s));if(null!=a){for(var h=0;h<o.length;h++){(t=n.cloneCell(o[h],!1)).value=null,t.style=mxUtils.setStyle(mxUtils.setStyle(t.style,"rowspan",null),"colspan",null);var u=this.getCellGeometry(t);null!=u&&(null!=u.alternateBounds&&(u.width=u.alternateBounds.width,u.height=u.alternateBounds.height,u.alternateBounds=null),u.height=a.height),s.insert(t)}n.add(l,s,r+(e?0:1));var d=this.getCellGeometry(l);null!=d&&((d=d.clone()).height+=a.height,n.setGeometry(l,d))}}finally{n.endUpdate()}},Graph.prototype.deleteTableColumn=function(t){var e=this.getModel();e.beginUpdate();try{var n=t,i=t,l=(this.isTableCell(t)&&(i=e.getParent(t)),this.isTableRow(i)&&(n=e.getParent(i)),e.getChildCells(n,!0));if(0==l.length)e.remove(n);else{this.isTableRow(i)||(i=l[0]);var s=e.getChildCells(i,!0);if(s.length<=1)e.remove(n);else{for(var o=s.length-1,r=(this.isTableCell(t)&&(o=mxUtils.indexOf(s,t)),0),a=0;a<l.length;a++){var h=e.getChildCells(l[a],!0)[o],u=(e.remove(h),this.getCellGeometry(h));null!=u&&(r=Math.max(r,u.width))}var d=this.getCellGeometry(n);null!=d&&((d=d.clone()).width-=r,e.setGeometry(n,d))}}}finally{e.endUpdate()}},Graph.prototype.deleteTableRow=function(t){var e=this.getModel();e.beginUpdate();try{var n,i,l,s=t,o=t,r=(this.isTableCell(t)&&(t=o=e.getParent(t)),this.isTableRow(t)&&(s=e.getParent(o)),e.getChildCells(s,!0));r.length<=1?e.remove(s):(this.isTableRow(o)||(o=r[r.length-1]),e.remove(o),n=0,null!=(i=this.getCellGeometry(o))&&(n=i.height),null!=(l=this.getCellGeometry(s))&&((l=l.clone()).height-=n,e.setGeometry(s,l)))}finally{e.endUpdate()}},Graph.prototype.insertRow=function(t,e){for(var t=t.tBodies[0],n=t.rows[0].cells,i=0,l=0;l<n.length;l++){var s=n[l].getAttribute("colspan");i+=null!=s?parseInt(s):1}for(var o=t.insertRow(e),l=0;l<i;l++)mxUtils.br(o.insertCell(-1));return o.cells[0]},Graph.prototype.deleteRow=function(t,e){t.tBodies[0].deleteRow(e)},Graph.prototype.insertColumn=function(t,e){var n=t.tHead;if(null!=n)for(var i=0;i<n.rows.length;i++){var l=document.createElement("th");n.rows[i].appendChild(l),mxUtils.br(l)}for(var s=t.tBodies[0],o=0;o<s.rows.length;o++){var r=s.rows[o].insertCell(e);mxUtils.br(r)}return s.rows[0].cells[0<=e?e:s.rows[0].cells.length-1]},Graph.prototype.deleteColumn=function(t,e){if(0<=e)for(var n=t.tBodies[0].rows,i=0;i<n.length;i++)n[i].cells.length>e&&n[i].deleteCell(e)},Graph.prototype.pasteHtmlAtCaret=function(t){var e,n;if(window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount){(n=e.getRangeAt(0)).deleteContents();for(var i,l=document.createElement("div"),s=(l.innerHTML=t,document.createDocumentFragment());i=l.firstChild;)lastNode=s.appendChild(i);n.insertNode(s)}}else(e=document.selection)&&"Control"!=e.type&&e.createRange().pasteHTML(t)},Graph.prototype.createLinkForHint=function(e,t,n){function i(t,e){return t=t.length>e?t.substring(0,Math.round(e/2))+"..."+t.substring(t.length-Math.round(e/4)):t}e=null!=e?e:"javascript:void(0);",null!=t&&0!=t.length||(t=this.isCustomLink(e)?this.getLinkTitle(e):e);var l=document.createElement("a");return l.setAttribute("rel",this.linkRelation),l.setAttribute("href",this.getAbsoluteUrl(e)),l.setAttribute("title",i(this.isCustomLink(e)?this.getLinkTitle(e):e,80)),null!=this.linkTarget&&l.setAttribute("target",this.linkTarget),mxUtils.write(l,i(t,40)),this.isCustomLink(e)&&mxEvent.addListener(l,"click",mxUtils.bind(this,function(t){this.customLinkClicked(e,n),mxEvent.consume(t)})),l},Graph.prototype.initTouch=function(){this.connectionHandler.marker.isEnabled=function(){return null!=this.graph.connectionHandler.first},this.addListener(mxEvent.START_EDITING,function(t,e){this.popupMenuHandler.hideMenu()});var n=this.updateMouseEvent,i=!(this.updateMouseEvent=function(t){var e;return t=n.apply(this,arguments),mxEvent.isTouchEvent(t.getEvent())&&null==t.getState()&&(null!=(e=this.getCellAt(t.graphX,t.graphY))&&this.isSwimlane(e)&&this.hitsSwimlaneContent(e,t.graphX,t.graphY)?e=null:(t.state=this.view.getState(e),null!=t.state&&null!=t.state.shape&&(this.container.style.cursor=t.state.shape.node.style.cursor))),null==t.getState()&&this.isEnabled()&&(this.container.style.cursor="default"),t}),l=!1,s=!1,o=this.fireMouseEvent;this.fireMouseEvent=function(t,e,n){t==mxEvent.MOUSE_DOWN&&(e=this.updateMouseEvent(e),i=this.isCellSelected(e.getCell()),l=this.isSelectionEmpty(),s=this.popupMenuHandler.isMenuShowing()),o.apply(this,arguments)},this.popupMenuHandler.mouseUp=mxUtils.bind(this,function(t,n){var e;null==this.freehand||this.freehand.isDrawing()||(e=mxEvent.isMouseEvent(n.getEvent()),this.popupMenuHandler.popupTrigger=!this.isEditing()&&this.isEnabled()&&(null==n.getState()||!n.isSource(n.getState().control))&&(this.popupMenuHandler.popupTrigger||!s&&!e&&(l&&null==n.getCell()&&this.isSelectionEmpty()||i&&this.isCellSelected(n.getCell()))),e=!i||e?null:mxUtils.bind(this,function(e){window.setTimeout(mxUtils.bind(this,function(){var t;this.isEditing()||(t=mxUtils.getScrollOrigin(),this.popupMenuHandler.popup(n.getX()+t.x+1,n.getY()+t.y+1,e,n.getEvent()))}),300)}),mxPopupMenuHandler.prototype.mouseUp.apply(this.popupMenuHandler,[t,n,e]))})},mxCellEditor.prototype.isContentEditing=function(){var t=this.graph.view.getState(this.editingCell);return null!=t&&1==t.style.html},mxCellEditor.prototype.isTableSelected=function(){return null!=this.graph.getParentByName(this.graph.getSelectedElement(),"TABLE",this.textarea)},mxCellEditor.prototype.isTextSelected=function(){var t="";return window.getSelection?t=window.getSelection():document.getSelection?t=document.getSelection():document.selection&&(t=document.selection.createRange().text),""!=t},mxCellEditor.prototype.insertTab=function(t){var e=this.textarea.ownerDocument.defaultView.getSelection(),n=e.getRangeAt(0),t=Graph.createTabNode(t);n.insertNode(t),n.setStartAfter(t),n.setEndAfter(t),e.removeAllRanges(),e.addRange(n)},mxCellEditor.prototype.alignText=function(t,e){var n,i,l,s=this.graph.getView().getState(this.editingCell);null!=s&&(s=mxUtils.getValue(s.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION),n=null!=s&&"vertical-"==s.substring(0,9),((i=null!=e&&mxEvent.isShiftDown(e))||null!=window.getSelection&&null!=window.getSelection().containsNode)&&(l=!0,this.graph.processElements(this.textarea,function(t){i||n||window.getSelection().containsNode(t,!0)?(t.removeAttribute("align"),t.style.textAlign=null):l=!1}),l||n)&&this.graph.cellEditor.setAlign(t),n||document.execCommand("justify"+t.toLowerCase(),!1,null))},mxCellEditor.prototype.saveSelection=function(){if(window.getSelection){var t=window.getSelection();if(t.getRangeAt&&t.rangeCount){for(var e=[],n=0,i=t.rangeCount;n<i;++n)e.push(t.getRangeAt(n));return e}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},mxCellEditor.prototype.restoreSelection=function(t){try{if(t)if(window.getSelection){(sel=window.getSelection()).removeAllRanges();for(var e=0,n=t.length;e<n;++e)sel.addRange(t[e])}else document.selection&&t.select&&t.select()}catch(t){}},mxCellRenderer.prototype.initializeLabel),g=(mxCellRenderer.prototype.initializeLabel=function(t){null!=t.text&&(t.text.replaceLinefeeds="0"!=mxUtils.getValue(t.style,"nl2Br","1")),m.apply(this,arguments)},mxConstraintHandler.prototype.update),x=(mxConstraintHandler.prototype.update=function(t,e){this.isKeepFocusEvent(t)||!mxEvent.isAltDown(t.getEvent())?g.apply(this,arguments):this.reset()},mxGuide.prototype.createGuideShape=function(t){return new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH)},mxCellEditor.prototype.escapeCancelsEditing=!1,mxCellEditor.prototype.startEditing),y=(mxCellEditor.prototype.startEditing=function(t,e){t=this.graph.getStartEditingCell(t,e),x.apply(this,arguments);e=this.graph.view.getState(t);null!=e&&1==e.style.html?this.textarea.className="mxCellEditor geContentEditable":this.textarea.className="mxCellEditor mxPlainTextEditor",this.codeViewMode=!1,this.switchSelectionState=null,this.graph.setSelectionCell(t)},mxCellEditor.prototype.toggleViewMode=function(){var t,e,n,i,l,s,o,r,a,h=this.graph.view.getState(this.editingCell);null!=h&&(t=null!=h&&"0"!=mxUtils.getValue(h.style,"nl2Br","1"),e=this.saveSelection(),this.codeViewMode?(0<(r=mxUtils.extractTextWithWhitespace(this.textarea.childNodes)).length&&"\n"==r.charAt(r.length-1)&&(r=r.substring(0,r.length-1)),r=Graph.sanitizeHtml(t?r.replace(/\n/g,"<br/>"):r,!0),this.textarea.className="mxCellEditor geContentEditable",a=mxUtils.getValue(h.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),n=mxUtils.getValue(h.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),i=mxUtils.getValue(h.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),l=(mxUtils.getValue(h.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,s=(mxUtils.getValue(h.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,o=[],(mxUtils.getValue(h.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&o.push("underline"),(mxUtils.getValue(h.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&o.push("line-through"),this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(a*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(a)+"px",this.textarea.style.textDecoration=o.join(" "),this.textarea.style.fontWeight=l?"bold":"normal",this.textarea.style.fontStyle=s?"italic":"",this.textarea.style.fontFamily=n,this.textarea.style.textAlign=i,this.textarea.style.padding="0px",this.textarea.innerHTML!=r&&(this.textarea.innerHTML=r,0==this.textarea.innerHTML.length)&&(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=0<this.textarea.innerHTML.length),this.codeViewMode=!1):(this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.clearOnChange=!1,this.textarea.innerText=""),r=mxUtils.htmlEntities(this.textarea.innerHTML),8!=document.documentMode&&(r=mxUtils.replaceTrailingNewlines(r,"<div><br></div>")),r=Graph.sanitizeHtml(t?r.replace(/\n/g,"").replace(/&lt;br\s*.?&gt;/g,"<br>"):r,!0),this.textarea.className="mxCellEditor mxPlainTextEditor",a=mxConstants.DEFAULT_FONTSIZE,this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(a*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(a)+"px",this.textarea.style.textDecoration="",this.textarea.style.fontWeight="normal",this.textarea.style.fontStyle="",this.textarea.style.fontFamily=mxConstants.DEFAULT_FONTFAMILY,this.textarea.style.textAlign="left",this.textarea.style.width="",this.textarea.style.padding="2px",this.textarea.innerHTML!=r&&(this.textarea.innerHTML=r),this.codeViewMode=!0),this.textarea.focus(),null!=this.switchSelectionState&&this.restoreSelection(this.switchSelectionState),this.switchSelectionState=e,this.resize())},mxCellEditor.prototype.resize);mxCellEditor.prototype.resize=function(t,e){var n,i;null!=this.textarea&&(t=this.graph.getView().getState(this.editingCell),this.codeViewMode&&null!=t?(n=t.view.scale,this.bounds=mxRectangle.fromRectangle(t),0==this.bounds.width&&0==this.bounds.height&&(this.bounds.width=160*n,this.bounds.height=60*n,null==(i=null!=t.text?t.text.margin:null)&&(i=mxUtils.getAlignmentAsPoint(mxUtils.getValue(t.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),this.bounds.x+=i.x*this.bounds.width,this.bounds.y+=i.y*this.bounds.height),this.textarea.style.width=Math.round((this.bounds.width-4)/n)+"px",this.textarea.style.height=Math.round((this.bounds.height-4)/n)+"px",this.textarea.style.overflow="auto",this.textarea.clientHeight<this.textarea.offsetHeight&&(this.textarea.style.height=Math.round(this.bounds.height/n)+(this.textarea.offsetHeight-this.textarea.clientHeight)+"px",this.bounds.height=parseInt(this.textarea.style.height)*n),this.textarea.clientWidth<this.textarea.offsetWidth&&(this.textarea.style.width=Math.round(this.bounds.width/n)+(this.textarea.offsetWidth-this.textarea.clientWidth)+"px",this.bounds.width=parseInt(this.textarea.style.width)*n),this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px",mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+n+","+n+")")):(this.textarea.style.height="",this.textarea.style.overflow="",y.apply(this,arguments)))};let C=mxCellEditor.prototype.getInitialValue,f=(mxCellEditor.prototype.getInitialValue=function(t,e){return"0"==mxUtils.getValue(t.style,"html","0")?C.apply(this,arguments):(e=this.graph.getEditingValue(t.cell,e),"1"==mxUtils.getValue(t.style,"nl2Br","1")&&(e=e.replace(/\n/g,"<br/>")),Graph.sanitizeHtml(e,!0))},mxCellEditor.prototype.getCurrentValue);mxCellEditor.prototype.getCurrentValue=function(t){var e;return"0"==mxUtils.getValue(t.style,"html","0")?f.apply(this,arguments):(e=Graph.sanitizeHtml(this.textarea.innerHTML,!0),"1"==mxUtils.getValue(t.style,"nl2Br","1")?0<(e=e.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>")).length&&("<br/>"==e.substring(e.length-5)||"<br>"==e.substring(e.length-4))&&(e=e.substring(0,e.lastIndexOf("<br"))+"<div><br/></div>"):e=e.replace(/\r\n/g,"").replace(/\n/g,""),e)};var v=mxCellEditor.prototype.stopEditing,E=(mxCellEditor.prototype.stopEditing=function(t){this.codeViewMode&&this.toggleViewMode(),v.apply(this,arguments),this.focusContainer()},mxCellEditor.prototype.focusContainer=function(){try{this.graph.container.focus()}catch(t){}},mxCellEditor.prototype.applyValue);mxCellEditor.prototype.applyValue=function(t,e){this.graph.getModel().beginUpdate();try{E.apply(this,arguments),""==e&&this.graph.isCellDeletable(t.cell)&&0==this.graph.model.getChildCount(t.cell)&&this.graph.isTransparentState(t)&&this.graph.removeCells([t.cell],!1)}finally{this.graph.getModel().endUpdate()}},mxCellEditor.prototype.getBackgroundColor=function(t){t=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,null);return t=t==mxConstants.NONE?null:t},mxCellEditor.prototype.getBorderColor=function(t){t=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_BORDERCOLOR,null);return t=t==mxConstants.NONE?null:t},mxCellEditor.prototype.getMinimumSize=function(t){var e=this.graph.getView().scale;return new mxRectangle(0,0,null==t.text?30:t.text.size*e+20,30)};let w=mxGraphHandler.prototype.isValidDropTarget;function b(){var t=document.createElement("div");return t.className="geHint",t.style.whiteSpace="nowrap",t.style.position="absolute",t}function T(t,e){switch(e){case mxConstants.POINTS:return t;case mxConstants.MILLIMETERS:return(t/mxConstants.PIXELS_PER_MM).toFixed(1);case mxConstants.METERS:return(t/(1e3*mxConstants.PIXELS_PER_MM)).toFixed(4);case mxConstants.INCHES:return(t/mxConstants.PIXELS_PER_INCH).toFixed(3)}}mxGraphHandler.prototype.isValidDropTarget=function(t,e){return w.apply(this,arguments)&&!mxEvent.isAltDown(e.getEvent)},mxGraphView.prototype.formatUnitText=function(t){return t&&T(t,this.unit)},mxGraphHandler.prototype.updateHint=function(t){var e,n,i;null==this.pBounds||null==this.shape&&!this.livePreviewActive||(null==this.hint&&(this.hint=b(),this.graph.container.appendChild(this.hint)),i=this.graph.view.translate,n=this.graph.view.scale,e=this.roundLength((this.bounds.x+this.currentDx)/n-i.x),n=this.roundLength((this.bounds.y+this.currentDy)/n-i.y),i=this.graph.view.unit,this.hint.innerHTML=T(e,i)+", "+T(n,i),this.hint.style.left=this.pBounds.x+this.currentDx+Math.round((this.pBounds.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=this.pBounds.y+this.currentDy+this.pBounds.height+Editor.hintOffset+"px")},mxGraphHandler.prototype.removeHint=function(){null!=this.hint&&(null!=this.hint.parentNode&&this.hint.parentNode.removeChild(this.hint),this.hint=null)};var M=mxStackLayout.prototype.resizeCell,L=(mxStackLayout.prototype.resizeCell=function(t,e){var n,i,l,s;M.apply(this,arguments),null==this.graph.getCellStyle(t).childLayout&&null!=(l=null!=(t=this.graph.model.getParent(t))?this.graph.getCellGeometry(t):null)&&"stackLayout"==(s=this.graph.getCellStyle(t)).childLayout&&(n=parseFloat(mxUtils.getValue(s,"stackBorder",mxStackLayout.prototype.border)),s="1"==mxUtils.getValue(s,"horizontalStack","1"),i=this.graph.getActualStartSize(t),l=l.clone(),s?l.height=e.height+i.y+i.height+2*n:l.width=e.width+i.x+i.width+2*n,this.graph.model.setGeometry(t,l))},mxSelectionCellsHandler.prototype.getHandledSelectionCells),I=(mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){var t=L.apply(this,arguments),e=new mxDictionary,n=this.graph.model,i=[];function l(t){e.get(t)||(e.put(t,!0),i.push(t))}for(var s=0;s<t.length;s++){var o=t[s];this.graph.isTableCell(o)?l(n.getParent(n.getParent(o))):this.graph.isTableRow(o)&&l(n.getParent(o)),l(o)}return i},mxConnectionHandler.prototype.isStartEvent),t=(mxConnectionHandler.prototype.isStartEvent=function(t){return I.apply(this,arguments)&&!mxEvent.isControlDown(t.getEvent())&&!mxEvent.isShiftDown(t.getEvent())},mxVertexHandler.prototype.isGhostPreview),A=(mxVertexHandler.prototype.isGhostPreview=function(){return t.apply(this,arguments)&&!this.graph.isTable(this.state.cell)&&!this.graph.isTableRow(this.state.cell)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isSwimlane(this.state.cell)},mxVertexHandler.prototype.createParentHighlightShape),P=(mxVertexHandler.prototype.createParentHighlightShape=function(t){var e=A.apply(this,arguments);return e.stroke="#C0C0C0",e.strokewidth=1,e},mxEdgeHandler.prototype.createParentHighlightShape),N=(mxEdgeHandler.prototype.createParentHighlightShape=function(t){var e=P.apply(this,arguments);return e.stroke="#C0C0C0",e.strokewidth=1,e},mxVertexHandler.prototype.rotationHandleVSpacing=-12,mxVertexHandler.prototype.getRotationHandlePosition=function(){var t=this.getHandlePadding();return new mxPoint(this.bounds.x+this.bounds.width-this.rotationHandleVSpacing+t.x/2,this.bounds.y+this.rotationHandleVSpacing-t.y/2)},mxVertexHandler.prototype.isRecursiveResize=function(t,e){return this.graph.isRecursiveVertexResize(t)&&!mxEvent.isAltDown(e.getEvent())},mxVertexHandler.prototype.isCenteredEvent=function(t,e){return mxEvent.isControlDown(e.getEvent())||mxEvent.isMetaDown(e.getEvent())},mxVertexHandler.prototype.isRotationHandleVisible),R=(mxVertexHandler.prototype.isRotationHandleVisible=function(){return N.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)&&!this.graph.isTable(this.state.cell)},mxVertexHandler.prototype.getSizerBounds=function(){return this.graph.isTableCell(this.state.cell)?this.graph.view.getState(this.graph.model.getParent(this.graph.model.getParent(this.state.cell))):this.bounds},mxVertexHandler.prototype.isParentHighlightVisible),U=(mxVertexHandler.prototype.isParentHighlightVisible=function(){return R.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)},mxVertexHandler.prototype.isCustomHandleVisible),G=(mxVertexHandler.prototype.isCustomHandleVisible=function(t){return t.tableHandle||U.apply(this,arguments)&&(!this.graph.isTable(this.state.cell)||this.graph.isCellSelected(this.state.cell))},mxVertexHandler.prototype.getSelectionBorderInset=function(){var t=0;return this.graph.isTableRow(this.state.cell)?t=1:this.graph.isTableCell(this.state.cell)&&(t=2),t},mxVertexHandler.prototype.getSelectionBorderBounds),D=(mxVertexHandler.prototype.getSelectionBorderBounds=function(){return G.apply(this,arguments).grow(-this.getSelectionBorderInset())},null),_=mxVertexHandler.prototype.createCustomHandles,k=(mxVertexHandler.prototype.createCustomHandles=function(){null==D&&(D=mxCellRenderer.defaultShapes.tableLine);var r=_.apply(this,arguments);if(this.graph.isTable(this.state.cell)&&this.graph.isCellMovable(this.state.cell)){var a=this,h=this.graph,t=h.model,u=h.view.scale,d=this.state,p=this.selectionBorder,o=this.state.origin.x+h.view.translate.x,m=this.state.origin.y+h.view.translate.y;function c(t,e,n){for(var i=[],l=0;l<t.length;l++){var s=t[l];i.push(null==s?null:new mxPoint((o+s.x+e)*u,(m+s.y+n)*u))}return i}null==r&&(r=[]);var g=h.view.getCellStates(t.getChildCells(this.state.cell,!0));if(0<g.length){for(var x=t.getChildCells(g[0].cell,!0),y=h.getTableLines(this.state.cell,!1,!0),C=h.getTableLines(this.state.cell,!0,!1),e=0;e<g.length;e++)mxUtils.bind(this,function(e){var i,t,l,s,n=g[e],o=null;h.isCellMovable(n.cell)&&(t=null!=(t=e<g.length-1?g[e+1]:null)?h.getCellGeometry(t.cell):null,i=null!=t&&null!=t.alternateBounds?t.alternateBounds:t,(t=null!=C[e]?new D(C[e],mxConstants.NONE,1):new mxLine(new mxRectangle,mxConstants.NONE,1,!1)).isDashed=p.isDashed,t.svgStrokeTolerance++,(o=new mxHandle(n,"row-resize",null,t)).tableHandle=!0,l=0,o.shape.node.parentNode.insertBefore(o.shape.node,o.shape.node.parentNode.firstChild),s=!(o.redraw=function(){var t;null!=this.shape&&(this.shape.stroke=0==l?mxConstants.NONE:p.stroke,this.shape.constructor==D?(this.shape.line=c(C[e],0,l),this.shape.updateBoundsFromLine()):(t=h.getActualStartSize(d.cell,!0),this.shape.bounds.height=1,this.shape.bounds.y=this.state.y+this.state.height+l*u,this.shape.bounds.x=d.x+(e==g.length-1?0:t.x*u),this.shape.bounds.width=d.width-(e==g.length-1?0:t.width+t.x+u)),this.shape.redraw())}),o.setPosition=function(t,e,n){l=Math.max(Graph.minTableRowHeight-t.height,e.y-t.y-t.height),s=mxEvent.isShiftDown(n.getEvent()),null!=i&&s&&(l=Math.min(l,i.height-Graph.minTableRowHeight))},o.execute=function(t){var e;0!=l?h.setTableRowHeight(this.state.cell,l,!s):a.blockDelayedSelection||(e=h.getCellAt(t.getGraphX(),t.getGraphY())||d.cell,h.graphHandler.selectCellForEvent(e,t)),l=0},o.reset=function(){l=0}),r.push(o)})(e);for(e=0;e<x.length;e++)mxUtils.bind(this,function(e){var t=h.view.getState(x[e]),n=h.getCellGeometry(x[e]),i=null!=n.alternateBounds?n.alternateBounds:n,n=(null==t&&((t=new mxCellState(h.view,x[e],h.getCellStyle(x[e]))).x=d.x+n.x*u,t.y=d.y+n.y*u,t.width=i.width*u,t.height=i.height*u,t.updateCachedBounds()),e<x.length-1?x[e+1]:null),n=null!=n?h.getCellGeometry(n):null,l=null!=n&&null!=n.alternateBounds?n.alternateBounds:n,n=null!=y[e]?new D(y[e],mxConstants.NONE,1):new mxLine(new mxRectangle,mxConstants.NONE,1,!0),t=(n.isDashed=p.isDashed,n.svgStrokeTolerance++,new mxHandle(t,"col-resize",null,n)),s=(t.tableHandle=!0,0),o=(t.shape.node.parentNode.insertBefore(t.shape.node,t.shape.node.parentNode.firstChild),!(t.redraw=function(){var t;null!=this.shape&&(this.shape.stroke=0==s?mxConstants.NONE:p.stroke,this.shape.constructor==D?(this.shape.line=c(y[e],s,0),this.shape.updateBoundsFromLine()):(t=h.getActualStartSize(d.cell,!0),this.shape.bounds.width=1,this.shape.bounds.x=this.state.x+(i.width+s)*u,this.shape.bounds.y=d.y+(e==x.length-1?0:t.y*u),this.shape.bounds.height=d.height-(e==x.length-1?0:(t.height+t.y)*u)),this.shape.redraw())}));t.setPosition=function(t,e,n){s=Math.max(Graph.minTableColumnWidth-i.width,e.x-t.x-i.width),o=mxEvent.isShiftDown(n.getEvent()),null==l||o||(s=Math.min(s,l.width-Graph.minTableColumnWidth))},t.execute=function(t){var e;0!=s?h.setTableColumnWidth(this.state.cell,s,o):a.blockDelayedSelection||(e=h.getCellAt(t.getGraphX(),t.getGraphY())||d.cell,h.graphHandler.selectCellForEvent(e,t)),s=0},t.positionChanged=function(){},t.reset=function(){s=0},r.push(t)})(e)}}return null!=r?r.reverse():null},mxVertexHandler.prototype.setHandlesVisible),V=(mxVertexHandler.prototype.setHandlesVisible=function(t){if(k.apply(this,arguments),null!=this.moveHandles)for(var e=0;e<this.moveHandles.length;e++)null!=this.moveHandles[e]&&(this.moveHandles[e].node.style.visibility=t?"":"hidden");if(null!=this.cornerHandles)for(e=0;e<this.cornerHandles.length;e++)this.cornerHandles[e].node.style.visibility=t?"":"hidden"},mxVertexHandler.prototype.isMoveHandlesVisible=function(){return this.graph.isTable(this.state.cell)&&this.graph.isCellMovable(this.state.cell)},mxVertexHandler.prototype.refreshMoveHandles=function(){var t=this.isMoveHandlesVisible();if(t&&null==this.moveHandles?this.moveHandles=this.createMoveHandles():t||null==this.moveHandles||this.destroyMoveHandles(),t&&null==this.moveHandles){for(var e=0;e<this.moveHandles.length;e++)null!=this.moveHandles[e]&&this.moveHandles[e].parentNode.removeChild(this.moveHandles[e]);this.moveHandles=null}},mxVertexHandler.prototype.createMoveHandles=function(){for(var n=this.graph,i=n.model,l=[],t=0;t<i.getChildCount(this.state.cell);t++)mxUtils.bind(this,function(e){var t;null!=e&&i.isVertex(e.cell)&&n.isCellMovable(e.cell)?((t=new mxImageShape(new mxRectangle(0,0,this.rowHandleImage.width,this.rowHandleImage.height),this.rowHandleImage.src)).rowState=e,t.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),t.node.style.cursor="move",mxEvent.addGestureListeners(t.node,mxUtils.bind(this,function(t){this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),!this.graph.isToggleEvent(t)&&this.graph.isCellSelected(e.cell)||this.graph.selectCellForEvent(e.cell,t),mxEvent.isPopupTrigger(t)||(this.graph.graphHandler.start(this.state.cell,mxEvent.getClientX(t),mxEvent.getClientY(t),this.graph.getSelectionCells()),this.graph.graphHandler.cellWasClicked=!0,this.graph.isMouseTrigger=mxEvent.isMouseEvent(t),this.graph.isMouseDown=!0),mxEvent.consume(t)}),null,mxUtils.bind(this,function(t){mxEvent.isPopupTrigger(t)&&(this.graph.popupMenuHandler.popup(mxEvent.getClientX(t),mxEvent.getClientY(t),e.cell,t),mxEvent.consume(t))})),l.push(t)):l.push(null)})(this.graph.view.getState(i.getChildAt(this.state.cell,t)));return l},mxVertexHandler.prototype.destroyMoveHandles=function(){if(null!=this.moveHandles){for(var t=0;t<this.moveHandles.length;t++)null!=this.moveHandles[t]&&this.moveHandles[t].destroy();this.moveHandles=null}},mxVertexHandler.prototype.destroyCornerHandles=function(){if(null!=this.cornerHandles){for(var t=0;t<this.cornerHandles.length;t++)null!=this.cornerHandles[t]&&null!=this.cornerHandles[t].node&&null!=this.cornerHandles[t].node.parentNode&&this.cornerHandles[t].node.parentNode.removeChild(this.cornerHandles[t].node);this.cornerHandles=null}},mxVertexHandler.prototype.refresh),F=(mxVertexHandler.prototype.refresh=function(){if(V.apply(this,arguments),this.destroyMoveHandles(),this.destroyCornerHandles(),this.graph.isTable(this.state.cell)&&this.graph.isCellMovable(this.state.cell))this.refreshMoveHandles();else if(1==this.graph.getSelectionCount()&&this.graph.isCellMovable(this.state.cell)&&(this.graph.isTableCell(this.state.cell)||this.graph.isTableRow(this.state.cell))){this.cornerHandles=[];for(var t=0;t<4;t++){var e=new mxRectangleShape(new mxRectangle(0,0,6,6),"#ffffff",mxConstants.HANDLE_STROKECOLOR);e.dialect=mxConstants.DIALECT_SVG,e.init(this.graph.view.getOverlayPane()),this.cornerHandles.push(e)}}this.graph.isTable(this.state.cell)&&this.graph.isCellMovable(this.state.cell)&&this.refreshMoveHandles();var n=this.graph.getLinkForCell(this.state.cell),i=this.graph.getLinksForState(this.state);this.updateLinkHint(n,i)},mxVertexHandler.prototype.getHandlePadding),z=(mxVertexHandler.prototype.getHandlePadding=function(){var t=new mxPoint(0,0),e=this.tolerance,n=this.state.style.shape,i=(null==mxCellRenderer.defaultShapes[n]&&null==mxStencilRegistry.getStencil(n)&&mxConstants.SHAPE_RECTANGLE,this.graph.isTable(this.state.cell)||this.graph.cellEditor.getEditingCell()==this.state.cell);if(!i&&null!=this.customHandles)for(var l=0;l<this.customHandles.length;l++)if(null!=this.customHandles[l]&&null!=this.customHandles[l].shape&&null!=this.customHandles[l].shape.bounds){var s=this.customHandles[l].shape.bounds,o=s.getCenterX(),r=s.getCenterY();if(Math.abs(this.state.x-o)<s.width/2||Math.abs(this.state.y-r)<s.height/2||Math.abs(this.state.x+this.state.width-o)<s.width/2||Math.abs(this.state.y+this.state.height-r)<s.height/2){i=!0;break}}return i&&null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]?(e/=2,this.graph.isTable(this.state.cell)&&(e+=7),t.x=this.sizers[0].bounds.width+e,t.y=this.sizers[0].bounds.height+e):t=F.apply(this,arguments),t},mxVertexHandler.prototype.updateHint=function(t){var e,n;this.index!=mxEvent.LABEL_HANDLE&&(null==this.hint&&(this.hint=b(),this.state.view.graph.container.appendChild(this.hint)),this.index==mxEvent.ROTATION_HANDLE?this.hint.innerHTML=this.currentAlpha+"&deg;":(e=this.state.view.scale,n=this.state.view.unit,this.hint.innerHTML=T(this.roundLength(this.bounds.width/e),n)+" x "+T(this.roundLength(this.bounds.height/e),n)),e=null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0",null==(n=mxUtils.getBoundingBox(this.bounds,e))&&(n=this.bounds),this.hint.style.left=n.x+Math.round((n.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=n.y+n.height+Editor.hintOffset+"px",null!=this.linkHint)&&(this.linkHint.style.display="none")},mxVertexHandler.prototype.removeHint=function(){mxGraphHandler.prototype.removeHint.apply(this,arguments),null!=this.linkHint&&(this.linkHint.style.display="")},mxEdgeHandler.prototype.refresh),B=(mxEdgeHandler.prototype.refresh=function(){z.apply(this,arguments);var t=this.graph.getLinkForCell(this.state.cell),e=this.graph.getLinksForState(this.state);this.updateLinkHint(t,e)},mxEdgeHandler.prototype.mouseMove),Y=(mxEdgeHandler.prototype.mouseMove=function(t,e){B.apply(this,arguments),null!=this.linkHint&&"none"!=this.linkHint.style.display&&null!=this.graph.graphHandler&&null!=this.graph.graphHandler.first&&(this.linkHint.style.display="none")},mxEdgeHandler.prototype.mouseUp),j=(mxEdgeHandler.prototype.mouseUp=function(t,e){Y.apply(this,arguments),null!=this.linkHint&&"none"==this.linkHint.style.display&&1==this.graph.getSelectionCount()&&(this.linkHint.style.display="")},mxEdgeHandler.prototype.updateHint=function(t,e,n){null==this.hint&&(this.hint=b(),this.state.view.graph.container.appendChild(this.hint));var i=this.graph.view.translate,l=this.graph.view.scale,s=this.roundLength(e.x/l-i.x),i=this.roundLength(e.y/l-i.y),o=this.graph.view.unit;this.hint.innerHTML=T(s,o)+", "+T(i,o),this.hint.style.visibility="visible",null!=n&&(n.view.updateEdgeBounds(n),this.hint.innerHTML+=" ("+(o==mxConstants.POINTS?Math.round(n.length/l):T(n.length/l,o))+")"),(this.isSource||this.isTarget)&&(null!=this.constraintHandler&&null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(s=this.constraintHandler.currentConstraint.point,this.hint.innerHTML="["+Math.round(100*s.x)+"%, "+Math.round(100*s.y)+"%]"):this.marker.hasValidState()&&(this.hint.style.visibility="hidden")),this.hint.style.left=Math.round(t.getGraphX()-this.hint.clientWidth/2)+"px",this.hint.style.top=Math.max(t.getGraphY(),e.y)+Editor.hintOffset+"px",null!=this.linkHint&&(this.linkHint.style.display="none")},Graph.prototype.expandedImage=Graph.createSvgImage(9,9,'<defs><linearGradient id="grad1" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="30%" style="stop-color:#f0f0f0;" /><stop offset="100%" style="stop-color:#AFB0B6;" /></linearGradient></defs><rect x="0" y="0" width="9" height="9" stroke="#8A94A5" fill="url(#grad1)" stroke-width="2"/><path d="M 2 4.5 L 7 4.5 z" stroke="#000"/>'),Graph.prototype.collapsedImage=Graph.createSvgImage(9,9,'<defs><linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="30%" style="stop-color:#f0f0f0;" /><stop offset="100%" style="stop-color:#AFB0B6;" /></linearGradient></defs><rect x="0" y="0" width="9" height="9" stroke="#8A94A5" fill="url(#grad1)" stroke-width="2"/><path d="M 4.5 2 L 4.5 7 M 2 4.5 L 7 4.5 z" stroke="#000"/>'),mxEdgeHandler.prototype.removeHint=mxVertexHandler.prototype.removeHint,HoverIcons.prototype.mainHandle=Graph.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'),HoverIcons.prototype.endMainHandle=Graph.createSvgImage(18,18,'<circle cx="9" cy="9" r="6" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'),HoverIcons.prototype.secondaryHandle=Graph.createSvgImage(16,16,'<path d="m 8 3 L 13 8 L 8 13 L 3 8 z" stroke="#fff" fill="#fca000"/>'),HoverIcons.prototype.fixedHandle=Graph.createSvgImage(22,22,'<circle cx="11" cy="11" r="6" stroke="#fff" fill="#01bd22"/><path d="m 8 8 L 14 14M 8 14 L 14 8" stroke="#fff"/>'),HoverIcons.prototype.endFixedHandle=Graph.createSvgImage(22,22,'<circle cx="11" cy="11" r="7" stroke="#fff" fill="#01bd22"/><path d="m 8 8 L 14 14M 8 14 L 14 8" stroke="#fff"/>'),HoverIcons.prototype.terminalHandle=Graph.createSvgImage(22,22,'<circle cx="11" cy="11" r="6" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/><circle cx="11" cy="11" r="3" stroke="#fff" fill="transparent"/>'),HoverIcons.prototype.endTerminalHandle=Graph.createSvgImage(22,22,'<circle cx="11" cy="11" r="7" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/><circle cx="11" cy="11" r="3" stroke="#fff" fill="transparent"/>'),HoverIcons.prototype.rotationHandle=Graph.createSvgImage(16,16,'<path stroke="'+HoverIcons.prototype.arrowFill+'" fill="'+HoverIcons.prototype.arrowFill+'" d="M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"/>',24,24),mxConstraintHandler.prototype.pointImage=Graph.createSvgImage(5,5,'<path d="m 0 0 L 5 5 M 0 5 L 5 0" stroke-width="2" style="stroke-opacity:0.4" stroke="#ffffff"/><path d="m 0 0 L 5 5 M 0 5 L 5 0" stroke="'+HoverIcons.prototype.arrowFill+'"/>'),mxVertexHandler.TABLE_HANDLE_COLOR="#fca000",mxVertexHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxVertexHandler.prototype.secondaryHandleImage=HoverIcons.prototype.secondaryHandle,mxVertexHandler.prototype.rowHandleImage=Graph.createSvgImage(14,12,'<rect x="2" y="2" width="10" height="3" stroke-width="1" stroke="#ffffff" fill="'+HoverIcons.prototype.arrowFill+'"/><rect x="2" y="7" width="10" height="3" stroke-width="1" stroke="#ffffff" fill="'+HoverIcons.prototype.arrowFill+'"/>'),mxEdgeHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxEdgeHandler.prototype.endHandleImage=HoverIcons.prototype.endMainHandle,mxEdgeHandler.prototype.terminalHandleImage=HoverIcons.prototype.terminalHandle,mxEdgeHandler.prototype.endTerminalHandleImage=HoverIcons.prototype.endTerminalHandle,mxEdgeHandler.prototype.fixedHandleImage=HoverIcons.prototype.fixedHandle,mxEdgeHandler.prototype.endFixedHandleImage=HoverIcons.prototype.endFixedHandle,mxEdgeHandler.prototype.labelHandleImage=HoverIcons.prototype.secondaryHandle,mxOutline.prototype.sizerImage=HoverIcons.prototype.mainHandle,null!=__mxOutput.Sidebar&&(Sidebar.prototype.triangleUp=HoverIcons.prototype.triangleUp,Sidebar.prototype.triangleRight=HoverIcons.prototype.triangleRight,Sidebar.prototype.triangleDown=HoverIcons.prototype.triangleDown,Sidebar.prototype.triangleLeft=HoverIcons.prototype.triangleLeft,Sidebar.prototype.refreshTarget=HoverIcons.prototype.refreshTarget,Sidebar.prototype.roundDrop=HoverIcons.prototype.roundDrop),mxVertexHandler.prototype.rotationEnabled=!0,mxVertexHandler.prototype.manageSizers=!0,mxVertexHandler.prototype.livePreview=!0,mxGraphHandler.prototype.maxLivePreview=16,mxRubberband.prototype.defaultOpacity=30,mxConnectionHandler.prototype.outlineConnect=!0,mxCellHighlight.prototype.keepOnTop=!0,mxVertexHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.dblClickRemoveEnabled=!0,mxEdgeHandler.prototype.straightRemoveEnabled=!0,mxEdgeHandler.prototype.virtualBendsEnabled=!0,mxEdgeHandler.prototype.mergeRemoveEnabled=!0,mxEdgeHandler.prototype.manageLabelHandle=!0,mxEdgeHandler.prototype.outlineConnect=!0,mxEdgeHandler.prototype.isAddVirtualBendEvent=function(t){return!mxEvent.isShiftDown(t.getEvent())},mxEdgeHandler.prototype.isCustomHandleEvent=function(t){return!mxEvent.isShiftDown(t.getEvent())},Graph.touchStyle?((mxClient.IS_TOUCH||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&(mxShape.prototype.svgStrokeTolerance=18,mxVertexHandler.prototype.tolerance=12,mxEdgeHandler.prototype.tolerance=12,Graph.prototype.tolerance=12,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxConstraintHandler.prototype.getTolerance=function(t){return mxEvent.isMouseEvent(t.getEvent())?4:this.graph.getTolerance()}),mxPanningHandler.prototype.isPanningTrigger=function(t){var e=t.getEvent();return null==t.getState()&&!mxEvent.isMouseEvent(e)||mxEvent.isPopupTrigger(e)&&(null==t.getState()||mxEvent.isControlDown(e)||mxEvent.isShiftDown(e))}):mxPanningHandler.prototype.isPanningTrigger=function(t){var e=t.getEvent();return mxEvent.isLeftMouseButton(e)&&(this.useLeftButtonForPanning&&null==t.getState()||mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e))||this.usePopupTrigger&&mxEvent.isPopupTrigger(e)},mxRubberband.prototype.isSpaceEvent=function(t){return this.graph.isEnabled()&&!this.graph.isCellLocked(this.graph.getDefaultParent())&&(mxEvent.isControlDown(t.getEvent())||mxEvent.isMetaDown(t.getEvent()))&&mxEvent.isShiftDown(t.getEvent())&&mxEvent.isAltDown(t.getEvent())},mxRubberband.prototype.cancelled=!1,mxRubberband.prototype.cancel=function(){this.isActive()&&(this.cancelled=!0,this.reset())},mxRubberband.prototype.mouseUp=function(t,e){if(this.cancelled)this.cancelled=!1,e.consume();else{var n=null!=this.div&&"none"!=this.div.style.display,i=null,l=null,s=null,o=null;if(null!=this.first&&null!=this.currentX&&null!=this.currentY&&(i=this.first.x,l=this.first.y,s=(this.currentX-i)/this.graph.view.scale,o=(this.currentY-l)/this.graph.view.scale,mxEvent.isAltDown(e.getEvent())||(s=this.graph.snap(s),o=this.graph.snap(o),this.graph.isGridEnabled())||(Math.abs(s)<this.graph.tolerance&&(s=0),Math.abs(o)<this.graph.tolerance&&(o=0))),this.reset(),n){if(this.isSpaceEvent(e)){this.graph.model.beginUpdate();try{for(var r,a,h=this.graph.getCellsBeyond(i,l,this.graph.getDefaultParent(),!0,!0),u=0;u<h.length;u++)this.graph.isCellMovable(h[u])&&(r=this.graph.view.getState(h[u]),a=this.graph.getCellGeometry(h[u]),null!=r)&&null!=a&&((a=a.clone()).translate(s,o),this.graph.model.setGeometry(h[u],a))}finally{this.graph.model.endUpdate()}}else{n=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(n,e.getEvent())}e.consume()}}},mxRubberband.prototype.mouseMove=function(t,e){var n,i,l,s,o;!e.isConsumed()&&null!=this.first&&(i=mxUtils.getScrollOrigin(this.graph.container),n=mxUtils.getOffset(this.graph.container),i.x-=n.x,i.y-=n.y,n=e.getX()+i.x,i=e.getY()+i.y,l=this.first.x-n,s=this.first.y-i,o=this.graph.tolerance,null!=this.div||Math.abs(l)>o||Math.abs(s)>o)&&(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(n,i),this.isSpaceEvent(e)?(l=this.x+this.width,s=this.y+this.height,o=this.graph.view.scale,mxEvent.isAltDown(e.getEvent())||(this.width=this.graph.snap(this.width/o)*o,this.height=this.graph.snap(this.height/o)*o,this.graph.isGridEnabled()||(this.width<this.graph.tolerance&&(this.width=0),this.height<this.graph.tolerance&&(this.height=0)),this.x<this.first.x&&(this.x=l-this.width),this.y<this.first.y&&(this.y=s-this.height)),this.div.style.borderStyle="dashed",this.div.style.backgroundColor="white",this.div.style.left=this.x+"px",this.div.style.top=this.y+"px",this.div.style.width=Math.max(0,this.width)+"px",this.div.style.height=this.graph.container.clientHeight+"px",this.div.style.borderWidth=this.width<=0?"0px 1px 0px 0px":"0px 1px 0px 1px",null==this.secondDiv&&(this.secondDiv=this.div.cloneNode(!0),this.div.parentNode.appendChild(this.secondDiv)),this.secondDiv.style.left=this.x+"px",this.secondDiv.style.top=this.y+"px",this.secondDiv.style.width=this.graph.container.clientWidth+"px",this.secondDiv.style.height=Math.max(0,this.height)+"px",this.secondDiv.style.borderWidth=this.height<=0?"1px 0px 0px 0px":"1px 0px 1px 0px"):(this.div.style.backgroundColor="",this.div.style.borderWidth="",this.div.style.borderStyle="",null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null)),e.consume())},mxRubberband.prototype.reset),O=(mxRubberband.prototype.reset=function(){null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null),j.apply(this,arguments)},(new Date).getTime()),H=0,W=mxEdgeHandler.prototype.updatePreviewState,X=(mxEdgeHandler.prototype.updatePreviewState=function(t,e,n,i){W.apply(this,arguments),H=n!=this.currentTerminalState?(O=(new Date).getTime(),0):(new Date).getTime()-O,this.currentTerminalState=n},mxEdgeHandler.prototype.isOutlineConnectEvent),Z=(mxEdgeHandler.prototype.isOutlineConnectEvent=function(t){return(!mxEvent.isShiftDown(t.getEvent())||!mxEvent.isAltDown(t.getEvent()))&&(null!=this.currentTerminalState&&t.getState()==this.currentTerminalState&&2e3<H||(null==this.currentTerminalState||"0"!=mxUtils.getValue(this.currentTerminalState.style,"outlineConnect","1"))&&X.apply(this,arguments))},mxEdgeHandler.prototype.createHandleShape=function(t,e,n){var i=null!=t&&0==t,l=this.state.getVisibleTerminalState(i),t=null!=t&&(0==t||t>=this.state.absolutePoints.length-1||this.constructor==mxElbowEdgeHandler&&2==t)?this.graph.getConnectionConstraint(this.state,l,i):null,i=null!=(null!=t?this.graph.getConnectionPoint(this.state.getVisibleTerminalState(i),t):null)?n?this.endFixedHandleImage:this.fixedHandleImage:null!=t&&null!=l?n?this.endTerminalHandleImage:this.terminalHandleImage:n?this.endHandleImage:this.handleImage;return null!=i?((t=new mxImageShape(new mxRectangle(0,0,i.width,i.height),i.src)).preserveImageAspect=!1,t):(l=mxConstants.HANDLE_SIZE,this.preferHtml&&--l,new mxRectangleShape(new mxRectangle(0,0,l,l),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR))},mxVertexHandler.prototype.createSizerShape),K=(mxVertexHandler.prototype.createSizerShape=function(t,e,n,i){return i=e==mxEvent.ROTATION_HANDLE?HoverIcons.prototype.rotationHandle:e==mxEvent.LABEL_HANDLE?this.secondaryHandleImage:i,Z.apply(this,arguments)},mxGraphHandler.prototype.getBoundingBox),q=(mxGraphHandler.prototype.getBoundingBox=function(t){if(null!=t&&1==t.length){var e=this.graph.getModel(),n=e.getParent(t[0]),i=this.graph.getCellGeometry(t[0]);if(e.isEdge(n)&&null!=i&&i.relative){e=this.graph.view.getState(t[0]);if(null!=e&&e.width<2&&e.height<2&&null!=e.text&&null!=e.text.boundingBox)return mxRectangle.fromRectangle(e.text.boundingBox)}}return K.apply(this,arguments)},mxGraphHandler.prototype.getGuideStates),J=(mxGraphHandler.prototype.getGuideStates=function(){for(var t=q.apply(this,arguments),e=[],n=0;n<t.length;n++)"1"!=mxUtils.getValue(t[n].style,"part","0")&&e.push(t[n]);return e},mxVertexHandler.prototype.getSelectionBounds),Q=(mxVertexHandler.prototype.getSelectionBounds=function(t){var e=this.graph.getModel(),n=e.getParent(t.cell),i=this.graph.getCellGeometry(t.cell);return e.isEdge(n)&&null!=i&&i.relative&&t.width<2&&t.height<2&&null!=t.text&&null!=t.text.boundingBox?(e=t.text.unrotatedBoundingBox||t.text.boundingBox,new mxRectangle(Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height))):J.apply(this,arguments)},mxVertexHandler.prototype.mouseDown),$=(mxVertexHandler.prototype.mouseDown=function(t,e){var n=this.graph.getModel(),i=n.getParent(this.state.cell),l=this.graph.getCellGeometry(this.state.cell);(this.getHandleForEvent(e)==mxEvent.ROTATION_HANDLE||!n.isEdge(i)||null==l||!l.relative||null==this.state||2<=this.state.width||2<=this.state.height)&&Q.apply(this,arguments)},mxVertexHandler.prototype.rotateClick=function(){var t=mxUtils.getValue(this.state.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),e=mxUtils.getValue(this.state.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);this.state.view.graph.model.isVertex(this.state.cell)&&t==mxConstants.NONE&&e==mxConstants.NONE?(t=mxUtils.mod(mxUtils.getValue(this.state.style,mxConstants.STYLE_ROTATION,0)+90,360),this.state.view.graph.setCellStyles(mxConstants.STYLE_ROTATION,t,[this.state.cell])):this.state.view.graph.turnShapes([this.state.cell])},mxVertexHandler.prototype.mouseMove),tt=(mxVertexHandler.prototype.mouseMove=function(t,e){$.apply(this,arguments),null!=this.graph.graphHandler.first&&(null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display="none"),null!=this.linkHint)&&"none"!=this.linkHint.style.display&&(this.linkHint.style.display="none")},mxVertexHandler.prototype.mouseUp),et=(mxVertexHandler.prototype.mouseUp=function(t,e){tt.apply(this,arguments),null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none"),null!=this.linkHint&&"none"==this.linkHint.style.display&&1==this.graph.getSelectionCount()&&(this.linkHint.style.display=""),this.blockDelayedSelection=null},mxVertexHandler.prototype.updateLinkHint=function(s,t){try{if(null!=s||null!=t&&0!=t.length){if(null!=s||null!=t&&0<t.length){var e,n,i,o=document.createElement("img"),r=(o.className="geAdaptiveAsset",o.setAttribute("src",Editor.editImage),o.setAttribute("title",mxResources.get("editLink")),o.setAttribute("width","14"),o.setAttribute("height","14"),o.style.paddingLeft="8px",o.style.marginLeft="auto",o.style.marginBottom="-1px",o.style.cursor="pointer",o.cloneNode(!0));if(r.setAttribute("src",Editor.trashImage),r.setAttribute("title",mxResources.get("removeIt",[mxResources.get("link")])),r.style.paddingLeft="4px",r.style.marginLeft="0",null==this.linkHint&&(this.linkHint=b(),mxUtils.setPrefixedStyle(this.linkHint.style,"transform","translate(-50%,0)"),this.linkHint.style.padding="6px 8px 6px 8px",this.linkHint.style.opacity="1",this.linkHint.style.filter="",this.graph.container.appendChild(this.linkHint),mxEvent.addListener(this.linkHint,"mouseenter",mxUtils.bind(this,function(){this.graph.tooltipHandler.hide()}))),this.linkHint.innerText="",null!=s&&((e=document.createElement("div")).style.display="flex",e.style.alignItems="center",e.appendChild(this.graph.createLinkForHint(s,null,this.state.cell)),this.linkHint.appendChild(e),this.graph.isEnabled())&&"function"==typeof this.graph.editLink&&!this.graph.isCellLocked(this.state.cell)&&(n=o.cloneNode(!0),e.appendChild(n),mxEvent.addListener(n,"click",mxUtils.bind(this,function(t){this.graph.setSelectionCell(this.state.cell),this.graph.editLink(),mxEvent.consume(t)})),i=r.cloneNode(!0),e.appendChild(i),mxEvent.addListener(i,"click",mxUtils.bind(this,function(t){this.graph.setLinkForCell(this.state.cell,null),mxEvent.consume(t)}))),null!=t)for(var l=0;l<t.length;l++)mxUtils.bind(this,function(e,l){var t=document.createElement("div"),n=(t.style.display="flex",t.style.alignItems="center",t.style.marginTop=null!=s||0<l?"6px":"0px",t.appendChild(this.graph.createLinkForHint(e.getAttribute("href"),mxUtils.getTextContent(e),this.state.cell)),o.cloneNode(!0)),i=(t.appendChild(n),mxUtils.bind(this,function(t){var e=document.createElement("div"),n=(e.innerHTML=Graph.sanitizeHtml(this.graph.getLabel(this.state.cell)),e.getElementsByTagName("a")[l]);if(null!=n){if(null==t||""==t){for(var i=n.cloneNode(!0).firstChild;null!=i;)n.parentNode.insertBefore(i.cloneNode(!0),n),i=i.nextSibling;n.parentNode.removeChild(n)}else n.setAttribute("href",t);this.graph.labelChanged(this.state.cell,e.innerHTML)}})),n=(mxEvent.addListener(n,"click",mxUtils.bind(this,function(t){this.graph.showLinkDialog(e.getAttribute("href")||"",mxResources.get("ok"),i),mxEvent.consume(t)})),r.cloneNode(!0));t.appendChild(n),mxEvent.addListener(n,"click",mxUtils.bind(this,function(t){i(),mxEvent.consume(t)})),this.linkHint.appendChild(t)})(t[l],l)}}else null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null);null!=this.linkHint&&Graph.sanitizeNode(this.linkHint)}catch(t){}},mxEdgeHandler.prototype.updateLinkHint=mxVertexHandler.prototype.updateLinkHint,mxEdgeHandler.prototype.createConstraintHandler),nt=(mxEdgeHandler.prototype.createConstraintHandler=function(){var t=et.apply(this,arguments);return t.isEnabled=mxUtils.bind(this,function(){return this.state.view.graph.connectionHandler.isEnabled()}),t},mxConnectionHandler.prototype.init),it=(mxConnectionHandler.prototype.init=function(){nt.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.graph.connectionHandler.isEnabled()})},mxVertexHandler.prototype.redrawHandles),lt=(mxVertexHandler.prototype.redrawHandles=function(){if(null!=this.moveHandles)for(var t=0;t<this.moveHandles.length;t++)null!=this.moveHandles[t]&&(this.moveHandles[t].bounds.x=Math.round(this.moveHandles[t].rowState.x+this.moveHandles[t].rowState.width-this.moveHandles[t].bounds.width/2),this.moveHandles[t].bounds.y=Math.round(this.moveHandles[t].rowState.y+(this.moveHandles[t].rowState.height-this.moveHandles[t].bounds.height)/2),this.moveHandles[t].redraw());if(null!=this.cornerHandles){var e=this.getSelectionBorderInset(),n=this.cornerHandles,i=n[0].bounds.width/2,l=n[0].bounds.height/2;n[0].bounds.x=this.state.x-i+e,n[0].bounds.y=this.state.y-l+e,n[0].redraw(),n[1].bounds.x=n[0].bounds.x+this.state.width-2*e,n[1].bounds.y=n[0].bounds.y,n[1].redraw(),n[2].bounds.x=n[0].bounds.x,n[2].bounds.y=this.state.y+this.state.height-2*e,n[2].redraw(),n[3].bounds.x=n[1].bounds.x,n[3].bounds.y=n[2].bounds.y,n[3].redraw();for(t=0;t<this.cornerHandles.length;t++)this.cornerHandles[t].node.style.display=1==this.graph.getSelectionCount()?"":"none"}null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.setAttribute("title",mxResources.get("rotateTooltip")),this.rotationShape.node.style.display=null!=this.moveHandles||1!=this.graph.getSelectionCount()||null!=this.index&&this.index!=mxEvent.ROTATION_HANDLE?"none":""),it.apply(this),null!=this.state&&null!=this.linkHint&&(i=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),l=new mxRectangle(this.state.x,this.state.y-22,this.state.width+24,this.state.height+22),n=null!=(e=mxUtils.getBoundingBox(l,this.state.style[mxConstants.STYLE_ROTATION]||"0",i))?mxUtils.getBoundingBox(this.state,this.state.style[mxConstants.STYLE_ROTATION]||"0"):this.state,l=null!=this.state.text?this.state.text.boundingBox:null,i=(e=null==e?this.state:e).y+e.height,null!=l&&(i=Math.max(i,l.y+l.height)),this.linkHint.style.left=n.x+n.width/2+"px",this.linkHint.style.top=Math.round(i+this.verticalOffset/2+Editor.hintOffset)+"px",this.linkHint.style.display=1<this.graph.getSelectionCount()?"none":"")},mxVertexHandler.prototype.destroy),st=(mxVertexHandler.prototype.destroy=function(){lt.apply(this,arguments),this.destroyMoveHandles(),this.destroyCornerHandles(),null!=this.linkHint&&(null!=this.linkHint.parentNode&&this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.changeHandler&&(this.graph.getSelectionModel().removeListener(this.changeHandler),this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),null!=this.editingHandler&&(this.graph.removeListener(this.editingHandler),this.editingHandler=null)},mxEdgeHandler.prototype.redrawHandles),ot=(mxEdgeHandler.prototype.redrawHandles=function(){var t;null!=this.marker&&(st.apply(this),null!=this.state)&&null!=this.linkHint&&(t=this.state,null!=this.state.text&&null!=this.state.text.bounds&&(t=new mxRectangle(t.x,t.y,t.width,t.height)).add(this.state.text.bounds),this.linkHint.style.left=t.x+t.width/2+"px",this.linkHint.style.top=Math.round(t.y+t.height+Editor.hintOffset)+"px",this.linkHint.style.display=1<this.graph.getSelectionCount()?"none":"")},mxEdgeHandler.prototype.reset),rt=(mxEdgeHandler.prototype.reset=function(){ot.apply(this,arguments),null!=this.linkHint&&(this.linkHint.style.visibility="")},mxEdgeHandler.prototype.destroy);mxEdgeHandler.prototype.destroy=function(){rt.apply(this,arguments),null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getSelectionModel().removeListener(this.changeHandler),this.changeHandler=null)}}(),__mxOutput.Graph=void 0!==Graph?Graph:void 0,function(){function r(t,e,n){mxShape.call(this),this.line=t,this.stroke=e,this.strokewidth=null!=n?n:1,this.updateBoundsFromLine()}function t(){mxSwimlane.call(this)}function U(){t.call(this)}function e(){mxCylinder.call(this)}mxUtils.extend(r,mxShape),r.prototype.updateBoundsFromLine=function(){var t=null;if(null!=this.line)for(var e=0;e<this.line.length;e++){var n=this.line[e];null!=n&&(n=new mxRectangle(n.x,n.y,this.strokewidth,this.strokewidth),null==t?t=n:t.add(n))}this.bounds=null!=t?t:new mxRectangle},r.prototype.paintVertexShape=function(t,e,n,i,l){this.paintTableLine(t,this.line,0,0)},r.prototype.paintTableLine=function(t,e,n,i){if(null!=e){var l=null;t.begin();for(var s=0;s<e.length;s++){var o=e[s];null!=o&&(null==l?t.moveTo(o.x+n,o.y+i):null!=l&&t.lineTo(o.x+n,o.y+i)),l=o}t.end(),t.stroke()}},r.prototype.intersectsRectangle=function(t){var e=!1;if(mxShape.prototype.intersectsRectangle.apply(this,arguments)&&null!=this.line)for(var n=null,i=0;i<this.line.length&&!e;i++){var l=this.line[i];null!=l&&null!=n&&(e=mxUtils.rectangleIntersectsSegment(t,n,l)),n=l}return e},mxCellRenderer.registerShape("tableLine",r),mxUtils.extend(t,mxSwimlane),t.prototype.getLabelBounds=function(t){return(0==this.getTitleSize()?mxShape:mxSwimlane).prototype.getLabelBounds.apply(this,arguments)},t.prototype.paintVertexShape=function(t,e,n,i,l){var s=null!=this.state&&this.state.view.graph.isCellCollapsed(this.state.cell),o=this.isHorizontal(),r=this.getTitleSize();0==r||this.outline?Nt.prototype.paintVertexShape.apply(this,arguments):(mxSwimlane.prototype.paintVertexShape.apply(this,arguments),t.translate(-e,-n)),s||this.outline||!(o&&r<l||!o&&r<i)||this.paintForeground(t,e,n,i,l)},t.prototype.paintForeground=function(t,e,n,i,l){var s,o,r;null!=this.state&&(s=this.flipH,o=this.flipV,this.direction!=mxConstants.DIRECTION_NORTH&&this.direction!=mxConstants.DIRECTION_SOUTH||(r=s,s=o,o=r),t.rotate(-this.getShapeRotation(),s,o,e+i/2,n+l/2),r=this.scale,e=this.bounds.x/r,n=this.bounds.y/r,i=this.bounds.width/r,l=this.bounds.height/r,this.paintTableForeground(t,e,n,i,l))},t.prototype.paintTableForeground=function(t,e,n,i,l){for(var s=this.state.view.graph.getTableLines(this.state.cell,"0"!=mxUtils.getValue(this.state.style,"rowLines","1"),"0"!=mxUtils.getValue(this.state.style,"columnLines","1")),o=0;o<s.length;o++)r.prototype.paintTableLine(t,s[o],e,n)},t.prototype.configurePointerEvents=function(t){0==this.getTitleSize()?t.pointerEvents=!1:mxSwimlane.prototype.configurePointerEvents.apply(this,arguments)},mxCellRenderer.registerShape("table",t),mxUtils.extend(U,t),U.prototype.paintForeground=function(){},mxCellRenderer.registerShape("tableRow",U),mxUtils.extend(e,mxCylinder),e.prototype.size=20,e.prototype.darkOpacity=0,e.prototype.darkOpacity2=0,e.prototype.paintVertexShape=function(t,e,n,i,l){var s=Math.max(0,Math.min(i,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),o=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity",this.darkOpacity)))),r=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity2",this.darkOpacity2))));t.translate(e,n),t.begin(),t.moveTo(0,0),t.lineTo(i-s,0),t.lineTo(i,s),t.lineTo(i,l),t.lineTo(s,l),t.lineTo(0,l-s),t.lineTo(0,0),t.close(),t.end(),t.fillAndStroke(),this.outline||(t.setShadow(!1),0!=o&&(t.setFillAlpha(Math.abs(o)),t.setFillColor(o<0?"#FFFFFF":"#000000"),t.begin(),t.moveTo(0,0),t.lineTo(i-s,0),t.lineTo(i,s),t.lineTo(s,s),t.close(),t.fill()),0!=r&&(t.setFillAlpha(Math.abs(r)),t.setFillColor(r<0?"#FFFFFF":"#000000"),t.begin(),t.moveTo(0,0),t.lineTo(s,s),t.lineTo(s,l),t.lineTo(0,l-s),t.close(),t.fill()),t.begin(),t.moveTo(s,l),t.lineTo(s,s),t.lineTo(0,0),t.moveTo(s,s),t.lineTo(i,s),t.end(),t.stroke())},e.prototype.getLabelMargins=function(t){var e;return mxUtils.getValue(this.style,"boundedLbl",!1)?new mxRectangle(e=parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale,e,0,0):null},mxCellRenderer.registerShape("cube",e);var G=Math.tan(mxUtils.toRadians(30)),a=(.5-G)/2;function _(){mxConnector.call(this)}function k(){mxCylinder.call(this)}function n(){mxActor.call(this)}function V(){mxCylinder.call(this)}function F(){mxCylinder.call(this)}function i(){mxCylinder.call(this)}function z(){i.call(this)}function l(){mxShape.call(this)}function B(){mxShape.call(this)}function s(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function Y(){mxActor.call(this)}function o(){mxCylinder.call(this)}function j(){mxCylinder.call(this)}function h(){mxActor.call(this)}function u(){mxActor.call(this)}function d(){mxActor.call(this)}mxCellRenderer.registerShape("isoRectangle",n),mxUtils.extend(_,mxConnector),_.prototype.paintEdgeShape=function(t,e){var n=this.createMarker(t,e,!0),e=this.createMarker(t,e,!1);t.setDashed(!1),mxPolyline.prototype.paintEdgeShape.apply(this,arguments),null!=this.isDashed&&t.setDashed(this.isDashed,null!=this.style&&1==mxUtils.getValue(this.style,mxConstants.STYLE_FIX_DASH,!1)),t.setShadow(!1),t.setStrokeColor(this.fill),mxPolyline.prototype.paintEdgeShape.apply(this,arguments),t.setStrokeColor(this.stroke),t.setFillColor(this.stroke),t.setDashed(!1),null!=n&&n(),null!=e&&e()},mxCellRenderer.registerShape("wire",_),mxUtils.extend(k,mxCylinder),k.prototype.size=6,k.prototype.paintVertexShape=function(t,e,n,i,l){t.setFillColor(this.stroke);var s=Math.max(0,parseFloat(mxUtils.getValue(this.style,"size",this.size))-2)+2*this.strokewidth;t.ellipse(e+.5*(i-s),n+.5*(l-s),s,s),t.fill(),t.setFillColor(mxConstants.NONE),t.rect(e,n,i,l),t.fill()},mxCellRenderer.registerShape("waypoint",k),mxUtils.extend(n,mxActor),n.prototype.size=20,n.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(i,l/G);t.translate((i-s)/2,(l-s)/2+s/4),t.moveTo(0,.25*s),t.lineTo(.5*s,s*a),t.lineTo(s,.25*s),t.lineTo(.5*s,(.5-a)*s),t.lineTo(0,.25*s),t.close(),t.end()},mxCellRenderer.registerShape("isoRectangle",n),mxUtils.extend(V,mxCylinder),V.prototype.size=20,V.prototype.redrawPath=function(t,e,n,i,l,s){var o=Math.min(i,l/(.5+G));s?(t.moveTo(0,.25*o),t.lineTo(.5*o,(.5-a)*o),t.lineTo(o,.25*o),t.moveTo(.5*o,(.5-a)*o),t.lineTo(.5*o,(1-a)*o)):(t.translate((i-o)/2,(l-o)/2),t.moveTo(0,.25*o),t.lineTo(.5*o,o*a),t.lineTo(o,.25*o),t.lineTo(o,.75*o),t.lineTo(.5*o,(1-a)*o),t.lineTo(0,.75*o),t.close()),t.end()},mxCellRenderer.registerShape("isoCube",V),mxUtils.extend(F,mxCylinder),F.prototype.redrawPath=function(t,e,n,i,l,s){var o=Math.min(l/2,Math.round(l/8)+this.strokewidth-1);(s&&null!=this.fill||!s&&null==this.fill)&&(t.moveTo(0,o),t.curveTo(0,2*o,i,2*o,i,o),s||(t.stroke(),t.begin()),t.translate(0,o/2),t.moveTo(0,o),t.curveTo(0,2*o,i,2*o,i,o),s||(t.stroke(),t.begin()),t.translate(0,o/2),t.moveTo(0,o),t.curveTo(0,2*o,i,2*o,i,o),s||(t.stroke(),t.begin()),t.translate(0,-o)),s||(t.moveTo(0,o),t.curveTo(0,-o/3,i,-o/3,i,o),t.lineTo(i,l-o),t.curveTo(i,l+o/3,0,l+o/3,0,l-o),t.close())},F.prototype.getLabelMargins=function(t){return new mxRectangle(0,2.5*Math.min(t.height/2,Math.round(t.height/8)+this.strokewidth-1),0,0)},mxCellRenderer.registerShape("datastore",F),mxUtils.extend(i,mxCylinder),i.prototype.size=30,i.prototype.darkOpacity=0,i.prototype.paintVertexShape=function(t,e,n,i,l){var s=Math.max(0,Math.min(i,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),o=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity",this.darkOpacity))));t.translate(e,n),t.begin(),t.moveTo(0,0),t.lineTo(i-s,0),t.lineTo(i,s),t.lineTo(i,l),t.lineTo(0,l),t.lineTo(0,0),t.close(),t.end(),t.fillAndStroke(),this.outline||(t.setShadow(!1),0!=o&&(t.setFillAlpha(Math.abs(o)),t.setFillColor(o<0?"#FFFFFF":"#000000"),t.begin(),t.moveTo(i-s,0),t.lineTo(i-s,s),t.lineTo(i,s),t.close(),t.fill()),t.begin(),t.moveTo(i-s,0),t.lineTo(i-s,s),t.lineTo(i,s),t.end(),t.stroke())},mxCellRenderer.registerShape("note",i),mxUtils.extend(z,i),mxCellRenderer.registerShape("note2",z),z.prototype.getLabelMargins=function(t){var e;return mxUtils.getValue(this.style,"boundedLbl",!1)?(e=mxUtils.getValue(this.style,"size",15),new mxRectangle(0,Math.min(t.height*this.scale,e*this.scale),0,0)):null},mxUtils.extend(l,mxShape),l.prototype.isoAngle=15,l.prototype.paintVertexShape=function(t,e,n,i,l){var s=Math.max(.01,Math.min(94,parseFloat(mxUtils.getValue(this.style,"isoAngle",this.isoAngle))))*Math.PI/200,s=Math.min(i*Math.tan(s),.5*l);t.translate(e,n),t.begin(),t.moveTo(.5*i,0),t.lineTo(i,s),t.lineTo(i,l-s),t.lineTo(.5*i,l),t.lineTo(0,l-s),t.lineTo(0,s),t.close(),t.fillAndStroke(),t.setShadow(!1),t.begin(),t.moveTo(0,s),t.lineTo(.5*i,2*s),t.lineTo(i,s),t.moveTo(.5*i,2*s),t.lineTo(.5*i,l),t.stroke()},mxCellRenderer.registerShape("isoCube2",l),mxUtils.extend(B,mxShape),B.prototype.size=15,B.prototype.paintVertexShape=function(t,e,n,i,l){var s=Math.max(0,Math.min(.5*l,parseFloat(mxUtils.getValue(this.style,"size",this.size))));t.translate(e,n),0==s?(t.rect(0,0,i,l),t.fillAndStroke()):(t.begin(),t.moveTo(0,s),t.arcTo(.5*i,s,0,0,1,.5*i,0),t.arcTo(.5*i,s,0,0,1,i,s),t.lineTo(i,l-s),t.arcTo(.5*i,s,0,0,1,.5*i,l),t.arcTo(.5*i,s,0,0,1,0,l-s),t.close(),t.fillAndStroke(),t.setShadow(!1),t.begin(),t.moveTo(i,s),t.arcTo(.5*i,s,0,0,1,.5*i,2*s),t.arcTo(.5*i,s,0,0,1,0,s),t.stroke())},mxCellRenderer.registerShape("cylinder2",B),mxUtils.extend(s,mxCylinder),s.prototype.size=15,s.prototype.paintVertexShape=function(t,e,n,i,l){var s=Math.max(0,Math.min(.5*l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,"lid",!0);t.translate(e,n),0==s?(t.rect(0,0,i,l),t.fillAndStroke()):(t.begin(),o?(t.moveTo(0,s),t.arcTo(.5*i,s,0,0,1,.5*i,0),t.arcTo(.5*i,s,0,0,1,i,s)):(t.moveTo(0,0),t.arcTo(.5*i,s,0,0,0,.5*i,s),t.arcTo(.5*i,s,0,0,0,i,0)),t.lineTo(i,l-s),t.arcTo(.5*i,s,0,0,1,.5*i,l),t.arcTo(.5*i,s,0,0,1,0,l-s),t.close(),t.fillAndStroke(),t.setShadow(!1),o&&(t.begin(),t.moveTo(i,s),t.arcTo(.5*i,s,0,0,1,.5*i,2*s),t.arcTo(.5*i,s,0,0,1,0,s),t.stroke()))},mxCellRenderer.registerShape("cylinder3",s),mxUtils.extend(Y,mxActor),Y.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.quadTo(i/2,.5*l,i,0),t.quadTo(.5*i,l/2,i,l),t.quadTo(i/2,.5*l,0,l),t.quadTo(.5*i,l/2,0,0),t.end()},mxCellRenderer.registerShape("switch",Y),mxUtils.extend(o,mxCylinder),o.prototype.tabWidth=60,o.prototype.tabHeight=20,o.prototype.tabPosition="right",o.prototype.arcSize=.1,o.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n);var e=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"tabWidth",this.tabWidth)))),n=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"tabHeight",this.tabHeight)))),s=mxUtils.getValue(this.style,"tabPosition",this.tabPosition),o=mxUtils.getValue(this.style,"rounded",!1),r=mxUtils.getValue(this.style,"absoluteArcSize",!1),a=parseFloat(mxUtils.getValue(this.style,"arcSize",this.arcSize));r||(a=Math.min(i,l)*a),a=Math.min(a,.5*i,.5*(l-n)),e=Math.max(e,a),e=Math.min(i-a,e),o||(a=0),t.begin(),"left"==s?(t.moveTo(Math.max(a,0),n),t.lineTo(Math.max(a,0),0),t.lineTo(e,0),t.lineTo(e,n)):(t.moveTo(i-e,n),t.lineTo(i-e,0),t.lineTo(i-Math.max(a,0),0),t.lineTo(i-Math.max(a,0),n)),o?(t.moveTo(0,a+n),t.arcTo(a,a,0,0,1,a,n),t.lineTo(i-a,n),t.arcTo(a,a,0,0,1,i,a+n),t.lineTo(i,l-a),t.arcTo(a,a,0,0,1,i-a,l),t.lineTo(a,l),t.arcTo(a,a,0,0,1,0,l-a)):(t.moveTo(0,n),t.lineTo(i,n),t.lineTo(i,l),t.lineTo(0,l)),t.close(),t.fillAndStroke(),t.setShadow(!1),"triangle"==mxUtils.getValue(this.style,"folderSymbol",null)&&(t.begin(),t.moveTo(i-30,n+20),t.lineTo(i-20,n+10),t.lineTo(i-10,n+20),t.close(),t.stroke())},mxCellRenderer.registerShape("folder",o),o.prototype.getLabelMargins=function(t){var e,n,i,l,s;return mxUtils.getValue(this.style,"boundedLbl",!1)?(n=mxUtils.getValue(this.style,"tabHeight",15)*this.scale,mxUtils.getValue(this.style,"labelInHeader",!1)?(e=mxUtils.getValue(this.style,"tabWidth",15)*this.scale,n=mxUtils.getValue(this.style,"tabHeight",15)*this.scale,i=mxUtils.getValue(this.style,"rounded",!1),l=mxUtils.getValue(this.style,"absoluteArcSize",!1),s=parseFloat(mxUtils.getValue(this.style,"arcSize",this.arcSize)),l||(s=Math.min(t.width,t.height)*s),s=Math.min(s,.5*t.width,.5*(t.height-n)),i||(s=0),"left"==mxUtils.getValue(this.style,"tabPosition",this.tabPosition)?new mxRectangle(s,0,Math.min(t.width,t.width-e),Math.min(t.height,t.height-n)):new mxRectangle(Math.min(t.width,t.width-e),0,s,Math.min(t.height,t.height-n))):new mxRectangle(0,Math.min(t.height,n),0,0)):null},mxUtils.extend(j,mxCylinder),j.prototype.arcSize=.1,j.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n);var e=mxUtils.getValue(this.style,"rounded",!1),n=mxUtils.getValue(this.style,"absoluteArcSize",!1),s=parseFloat(mxUtils.getValue(this.style,"arcSize",this.arcSize)),o=mxUtils.getValue(this.style,"umlStateConnection",null),n=(n||(s=Math.min(i,l)*s),s=Math.min(s,.5*i,.5*l),e||(s=0),0);null!=o&&(n=10),t.begin(),t.moveTo(n,s),t.arcTo(s,s,0,0,1,n+s,0),t.lineTo(i-s,0),t.arcTo(s,s,0,0,1,i,s),t.lineTo(i,l-s),t.arcTo(s,s,0,0,1,i-s,l),t.lineTo(n+s,l),t.arcTo(s,s,0,0,1,n,l-s),t.close(),t.fillAndStroke(),t.setShadow(!1),"collapseState"==mxUtils.getValue(this.style,"umlStateSymbol",null)&&(t.roundrect(i-40,l-20,10,10,3,3),t.stroke(),t.roundrect(i-20,l-20,10,10,3,3),t.stroke(),t.begin(),t.moveTo(i-30,l-15),t.lineTo(i-20,l-15),t.stroke()),"connPointRefEntry"==o?(t.ellipse(0,.5*l-10,20,20),t.fillAndStroke()):"connPointRefExit"==o&&(t.ellipse(0,.5*l-10,20,20),t.fillAndStroke(),t.begin(),t.moveTo(5,.5*l-5),t.lineTo(15,.5*l+5),t.moveTo(15,.5*l-5),t.lineTo(5,.5*l+5),t.stroke())},j.prototype.getLabelMargins=function(t){if(mxUtils.getValue(this.style,"boundedLbl",!1)&&null!=mxUtils.getValue(this.style,"umlStateConnection",null))return new mxRectangle(10*this.scale,0,0,0);return null},mxCellRenderer.registerShape("umlState",j),mxUtils.extend(h,mxActor),h.prototype.size=30,h.prototype.isRoundable=function(){return!0},h.prototype.redrawPath=function(t,e,n,i,l){var s=Math.max(0,Math.min(i,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(s,0),new mxPoint(i,0),new mxPoint(i,l),new mxPoint(0,l),new mxPoint(0,s)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("card",h),mxUtils.extend(u,mxActor),u.prototype.size=.4,u.prototype.redrawPath=function(t,e,n,i,l){var s=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));t.moveTo(0,s/2),t.quadTo(i/4,1.4*s,i/2,s/2),t.quadTo(3*i/4,s*(1-1.4),i,s/2),t.lineTo(i,l-s/2),t.quadTo(3*i/4,l-1.4*s,i/2,l-s/2),t.quadTo(i/4,l-s*(1-1.4),0,l-s/2),t.lineTo(0,s/2),t.close(),t.end()},u.prototype.getLabelBounds=function(t){var e,n,i,l;return mxUtils.getValue(this.style,"boundedLbl",!1)?(e=mxUtils.getValue(this.style,"size",this.size),n=t.width,i=t.height,null==this.direction||this.direction==mxConstants.DIRECTION_EAST||this.direction==mxConstants.DIRECTION_WEST?new mxRectangle(t.x,t.y+(l=i*e),n,i-2*l):new mxRectangle(t.x+(l=n*e),t.y,n-2*l,i)):t},mxCellRenderer.registerShape("tape",u),mxUtils.extend(d,mxActor),d.prototype.size=.3,d.prototype.getLabelMargins=function(t){return mxUtils.getValue(this.style,"boundedLbl",!1)?new mxRectangle(0,0,0,parseFloat(mxUtils.getValue(this.style,"size",this.size))*t.height):null},d.prototype.redrawPath=function(t,e,n,i,l){var s=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));t.moveTo(0,0),t.lineTo(i,0),t.lineTo(i,l-s/2),t.quadTo(3*i/4,l-1.4*s,i/2,l-s/2),t.quadTo(i/4,l-s*(1-1.4),0,l-s/2),t.lineTo(0,s/2),t.close(),t.end()},mxCellRenderer.registerShape("document",d);var W=mxCylinder.prototype.getCylinderSize;function p(){mxActor.call(this)}function m(){mxActor.call(this)}function X(){mxActor.call(this)}function Z(){mxActor.call(this)}function c(t,e){this.canvas=t,this.canvas.setLineJoin("round"),this.canvas.setLineCap("round"),this.defaultVariation=e,this.originalLineTo=this.canvas.lineTo,this.canvas.lineTo=mxUtils.bind(this,c.prototype.lineTo),this.originalMoveTo=this.canvas.moveTo,this.canvas.moveTo=mxUtils.bind(this,c.prototype.moveTo),this.originalClose=this.canvas.close,this.canvas.close=mxUtils.bind(this,c.prototype.close),this.originalQuadTo=this.canvas.quadTo,this.canvas.quadTo=mxUtils.bind(this,c.prototype.quadTo),this.originalCurveTo=this.canvas.curveTo,this.canvas.curveTo=mxUtils.bind(this,c.prototype.curveTo),this.originalArcTo=this.canvas.arcTo,this.canvas.arcTo=mxUtils.bind(this,c.prototype.arcTo)}mxCylinder.prototype.getCylinderSize=function(t,e,n,i){var l=mxUtils.getValue(this.style,"size");return null!=l?i*Math.max(0,Math.min(1,l)):W.apply(this,arguments)},mxCylinder.prototype.getLabelMargins=function(t){var e;return mxUtils.getValue(this.style,"boundedLbl",!1)?(e=2*mxUtils.getValue(this.style,"size",.15),new mxRectangle(0,Math.min(this.maxHeight*this.scale,t.height*e),0,0)):null},s.prototype.getLabelMargins=function(t){var e;return mxUtils.getValue(this.style,"boundedLbl",!1)?(e=mxUtils.getValue(this.style,"size",15),mxUtils.getValue(this.style,"lid",!0)||(e/=2),new mxRectangle(0,Math.min(t.height*this.scale,2*e*this.scale),0,Math.max(0,.3*e*this.scale))):null},o.prototype.getLabelMargins=function(t){var e,n,i,l,s;return mxUtils.getValue(this.style,"boundedLbl",!1)?(n=mxUtils.getValue(this.style,"tabHeight",15)*this.scale,mxUtils.getValue(this.style,"labelInHeader",!1)?(e=mxUtils.getValue(this.style,"tabWidth",15)*this.scale,n=mxUtils.getValue(this.style,"tabHeight",15)*this.scale,i=mxUtils.getValue(this.style,"rounded",!1),l=mxUtils.getValue(this.style,"absoluteArcSize",!1),s=parseFloat(mxUtils.getValue(this.style,"arcSize",this.arcSize)),l||(s=Math.min(t.width,t.height)*s),s=Math.min(s,.5*t.width,.5*(t.height-n)),i||(s=0),"left"==mxUtils.getValue(this.style,"tabPosition",this.tabPosition)?new mxRectangle(s,0,Math.min(t.width,t.width-e),Math.min(t.height,t.height-n)):new mxRectangle(Math.min(t.width,t.width-e),0,s,Math.min(t.height,t.height-n))):new mxRectangle(0,Math.min(t.height,n),0,0)):null},j.prototype.getLabelMargins=function(t){if(mxUtils.getValue(this.style,"boundedLbl",!1)&&null!=mxUtils.getValue(this.style,"umlStateConnection",null))return new mxRectangle(10*this.scale,0,0,0);return null},z.prototype.getLabelMargins=function(t){var e;return mxUtils.getValue(this.style,"boundedLbl",!1)?(e=mxUtils.getValue(this.style,"size",15),new mxRectangle(0,Math.min(t.height*this.scale,e*this.scale),0,Math.max(0,e*this.scale))):null},mxUtils.extend(p,mxActor),p.prototype.size=.2,p.prototype.fixedSize=20,p.prototype.isRoundable=function(){return!0},p.prototype.redrawPath=function(t,e,n,i,l){var s="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,l),new mxPoint(s,0),new mxPoint(i,0),new mxPoint(i-s,l)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("parallelogram",p),mxUtils.extend(m,mxActor),m.prototype.size=.2,m.prototype.fixedSize=20,m.prototype.isRoundable=function(){return!0},m.prototype.redrawPath=function(t,e,n,i,l){var s="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(.5*i,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):i*Math.max(0,Math.min(.5,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,l),new mxPoint(s,0),new mxPoint(i-s,0),new mxPoint(i,l)],this.isRounded,o,!0)},mxCellRenderer.registerShape("trapezoid",m),mxUtils.extend(X,mxActor),X.prototype.size=.5,X.prototype.redrawPath=function(t,e,n,i,l){t.setFillColor(null);var s=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(i,0),new mxPoint(s,0),new mxPoint(s,l/2),new mxPoint(0,l/2),new mxPoint(s,l/2),new mxPoint(s,l),new mxPoint(i,l)],this.isRounded,o,!1),t.end()},mxCellRenderer.registerShape("curlyBracket",X),mxUtils.extend(Z,mxActor),Z.prototype.redrawPath=function(t,e,n,i,l){t.setStrokeWidth(1),t.setFillColor(this.stroke);i/=5;t.rect(0,0,i,l),t.fillAndStroke(),t.rect(2*i,0,i,l),t.fillAndStroke(),t.rect(4*i,0,i,l),t.fillAndStroke()},mxCellRenderer.registerShape("parallelMarker",Z),c.prototype.moveTo=function(t,e){this.originalMoveTo.apply(this.canvas,arguments),this.lastX=t,this.lastY=e,this.firstX=t,this.firstY=e},c.prototype.close=function(){null!=this.firstX&&null!=this.firstY&&(this.lineTo(this.firstX,this.firstY),this.originalClose.apply(this.canvas,arguments)),this.originalClose.apply(this.canvas,arguments)},c.prototype.quadTo=function(t,e,n,i){this.originalQuadTo.apply(this.canvas,arguments),this.lastX=n,this.lastY=i},c.prototype.curveTo=function(t,e,n,i,l,s){this.originalCurveTo.apply(this.canvas,arguments),this.lastX=l,this.lastY=s},c.prototype.arcTo=function(t,e,n,i,l,s,o){this.originalArcTo.apply(this.canvas,arguments),this.lastX=s,this.lastY=o},c.prototype.lineTo=function(t,e){if(null!=this.lastX&&null!=this.lastY){var n=Math.abs(t-this.lastX),i=Math.abs(e-this.lastY),l=Math.sqrt(n*n+i*i);if(l<2)this.originalLineTo.apply(this.canvas,arguments);else{for(var s=Math.round(l/10),o=this.defaultVariation,r=(s<5&&(s=5,o/=3),g(t-this.lastX)*n/s),a=g(e-this.lastY)*i/s,h=n/l,u=i/l,d=0;d<s;d++){var p=r*d+this.lastX,m=a*d+this.lastY,c=(Math.random()-.5)*o;this.originalLineTo.call(this.canvas,p-c*u,m-c*h)}this.originalLineTo.call(this.canvas,t,e)}function g(t){return"number"==typeof t?t?t<0?-1:1:t==t?0:NaN:NaN}}else this.originalLineTo.apply(this.canvas,arguments);this.lastX=t,this.lastY=e},c.prototype.destroy=function(){this.canvas.lineTo=this.originalLineTo,this.canvas.moveTo=this.originalMoveTo,this.canvas.close=this.originalClose,this.canvas.quadTo=this.originalQuadTo,this.canvas.curveTo=this.originalCurveTo,this.canvas.arcTo=this.originalArcTo};var K=mxShape.prototype.beforePaint,q=(mxShape.prototype.beforePaint=function(t){K.apply(this,arguments),null==t.handJiggle&&(t.handJiggle=this.createHandJiggle(t))},mxShape.prototype.afterPaint),J=(mxShape.prototype.afterPaint=function(t){q.apply(this,arguments),null!=t.handJiggle&&(t.handJiggle.destroy(),delete t.handJiggle)},mxShape.prototype.createComicCanvas=function(t){return new c(t,mxUtils.getValue(this.style,"jiggle",Editor.sketchDefaultJiggle))},mxShape.prototype.createHandJiggle=function(t){return this.outline||null==this.style||"0"==mxUtils.getValue(this.style,"comic","0")?null:this.createComicCanvas(t)},mxRectangleShape.prototype.isHtmlAllowed),Q=(mxRectangleShape.prototype.isHtmlAllowed=function(){return!this.outline&&(null==this.style||"0"==mxUtils.getValue(this.style,"comic","0")&&"0"==mxUtils.getValue(this.style,"sketch","1"==urlParams.rough?"1":"0"))&&J.apply(this,arguments)},mxRectangleShape.prototype.paintBackground);function g(){mxRectangleShape.call(this)}function $(){mxRectangleShape.call(this)}function x(){mxActor.call(this)}function y(){mxActor.call(this)}function C(){mxActor.call(this)}function tt(){mxRectangleShape.call(this)}mxRectangleShape.prototype.paintBackground=function(t,e,n,i,l){var s,o;null==t.handJiggle||t.handJiggle.constructor!=c?Q.apply(this,arguments):(o=!0,((o=null!=this.style?"1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1"):o)||null!=this.fill&&this.fill!=mxConstants.NONE||null!=this.stroke&&this.stroke!=mxConstants.NONE)&&(o||null!=this.fill&&this.fill!=mxConstants.NONE||(t.pointerEvents=!1),t.begin(),this.isRounded?(o="1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,o=0)?Math.min(i/2,Math.min(l/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,Math.min(i*s,l*s)),t.moveTo(e+o,n),t.lineTo(e+i-o,n),t.quadTo(e+i,n,e+i,n+o),t.lineTo(e+i,n+l-o),t.quadTo(e+i,n+l,e+i-o,n+l),t.lineTo(e+o,n+l),t.quadTo(e,n+l,e,n+l-o),t.lineTo(e,n+o),t.quadTo(e,n,e+o,n)):(t.moveTo(e,n),t.lineTo(e+i,n),t.lineTo(e+i,n+l),t.lineTo(e,n+l),t.lineTo(e,n)),t.close(),t.end(),t.fillAndStroke()))},mxUtils.extend(g,mxRectangleShape),g.prototype.size=.1,g.prototype.fixedSize=!1,g.prototype.isHtmlAllowed=function(){return!1},g.prototype.getLabelBounds=function(t){var e,n,i,l,s;return mxUtils.getValue(this.state.style,mxConstants.STYLE_HORIZONTAL,!0)==(null==this.direction||this.direction==mxConstants.DIRECTION_EAST||this.direction==mxConstants.DIRECTION_WEST)?(e=t.width,n=t.height,i=new mxRectangle(t.x,t.y,e,n),s=e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),this.isRounded&&(l=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,s=Math.max(s,Math.min(e*l,n*l))),i.x+=Math.round(s),i.width-=Math.round(2*s),i):t},g.prototype.paintForeground=function(t,e,n,i,l){var s=mxUtils.getValue(this.style,"fixedSize",this.fixedSize),o=parseFloat(mxUtils.getValue(this.style,"size",this.size));o=s?Math.max(0,Math.min(i,o)):i*Math.max(0,Math.min(1,o)),this.isRounded&&(s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,o=Math.max(o,Math.min(i*s,l*s))),o=Math.round(o),t.begin(),t.moveTo(e+o,n),t.lineTo(e+o,n+l),t.moveTo(e+i-o,n),t.lineTo(e+i-o,n+l),t.end(),t.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("process",g),mxCellRenderer.registerShape("process2",g),mxUtils.extend($,mxRectangleShape),$.prototype.paintBackground=function(t,e,n,i,l){t.setFillColor(mxConstants.NONE),t.rect(e,n,i,l),t.fill()},$.prototype.paintForeground=function(t,e,n,i,l){},mxCellRenderer.registerShape("transparent",$),mxUtils.extend(x,mxHexagon),x.prototype.size=30,x.prototype.position=.5,x.prototype.position2=.5,x.prototype.base=20,x.prototype.getLabelMargins=function(){return new mxRectangle(0,0,0,parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale)},x.prototype.isRoundable=function(){return!0},x.prototype.redrawPath=function(t,e,n,i,l){var s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,o=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),r=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position",this.position)))),a=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position2",this.position2)))),h=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"base",this.base))));this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,l-o),new mxPoint(Math.min(i,r+h),l-o),new mxPoint(a,l),new mxPoint(Math.max(0,r),l-o),new mxPoint(0,l-o)],this.isRounded,s,!0,[4])},mxCellRenderer.registerShape("callout",x),mxUtils.extend(y,mxActor),y.prototype.size=.2,y.prototype.fixedSize=20,y.prototype.isRoundable=function(){return!0},y.prototype.redrawPath=function(t,e,n,i,l){var s="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,0),new mxPoint(i-s,0),new mxPoint(i,l/2),new mxPoint(i-s,l),new mxPoint(0,l),new mxPoint(s,l/2)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("step",y),mxUtils.extend(C,mxHexagon),C.prototype.size=.25,C.prototype.fixedSize=20,C.prototype.isRoundable=function(){return!0},C.prototype.redrawPath=function(t,e,n,i,l){var s="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(.5*i,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(s,0),new mxPoint(i-s,0),new mxPoint(i,.5*l),new mxPoint(i-s,l),new mxPoint(s,l),new mxPoint(0,.5*l)],this.isRounded,o,!0)},mxCellRenderer.registerShape("hexagon",C),mxUtils.extend(tt,mxRectangleShape),tt.prototype.isHtmlAllowed=function(){return!1},tt.prototype.paintForeground=function(t,e,n,i,l){var s=Math.min(i/5,l/5)+1;t.begin(),t.moveTo(e+i/2,n+s),t.lineTo(e+i/2,n+l-s),t.moveTo(e+s,n+l/2),t.lineTo(e+i-s,n+l/2),t.end(),t.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("plus",tt);var et,f,nt,it,lt=mxRhombus.prototype.paintVertexShape;function st(){mxRectangleShape.call(this)}function ot(){mxCylinder.call(this)}function rt(){mxShape.call(this)}function at(){mxShape.call(this)}function ht(){mxEllipse.call(this)}function ut(){mxShape.call(this)}function dt(){mxShape.call(this)}function v(){mxRectangleShape.call(this)}function E(){mxShape.call(this)}function pt(){mxShape.call(this)}function mt(){mxShape.call(this)}function ct(){mxShape.call(this)}function gt(){mxShape.call(this)}function S(){mxCylinder.call(this)}function xt(){mxCylinder.call(this)}function yt(){mxRectangleShape.call(this)}function Ct(){mxDoubleEllipse.call(this)}function ft(){Ct.call(this)}function vt(){mxArrowConnector.call(this),this.spacing=0}function w(){mxArrowConnector.call(this),this.spacing=0}function b(){mxActor.call(this)}function T(){mxRectangleShape.call(this)}function M(){mxActor.call(this)}function Et(){mxActor.call(this)}function L(){mxActor.call(this)}function I(){mxActor.call(this)}function St(){mxActor.call(this)}function A(){mxActor.call(this)}function wt(){mxActor.call(this)}function bt(){mxActor.call(this)}function P(){mxActor.call(this)}function N(){mxActor.call(this)}function Tt(){mxEllipse.call(this)}function Mt(){mxEllipse.call(this)}function Lt(){mxEllipse.call(this)}function It(){mxRhombus.call(this)}function At(){mxEllipse.call(this)}function Pt(){mxEllipse.call(this)}function Nt(){mxEllipse.call(this)}function Rt(){mxEllipse.call(this)}function Dt(){mxActor.call(this)}function Ot(){mxActor.call(this)}function Ht(){mxActor.call(this)}function R(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.rectStyle="square",this.size=10,this.absoluteCornerSize=!0,this.indent=2,this.rectOutline="single"}function D(){mxConnector.call(this)}function Ut(t,e,n,i,l,s,o,r,a,h){var o=o+a,u=i.clone();return i.x-=l*(2*o+a),i.y-=s*(2*o+a),l*=o+a,s*=o+a,function(){t.ellipse(u.x-l-o,u.y-s-o,2*o,2*o),h?t.fillAndStroke():t.stroke()}}function O(t,n,e,i,l,s,o){var r,a=new mxHandle(t,null,mxVertexHandler.prototype.secondaryHandleImage);return a.execute=function(t){for(var e=0;e<n.length;e++)this.copyStyle(n[e]);o&&o(t)},a.getPosition=e,a.setPosition=i,a.ignoreGrid=null==l||l,s&&(r=a.positionChanged,a.positionChanged=function(){r.apply(this,arguments),t.view.invalidate(this.state.cell),t.view.validate()}),a}function H(i,l){return O(i,[mxConstants.STYLE_ARCSIZE],function(t){var e,n=null!=l?l:t.height/8;return"1"==mxUtils.getValue(i.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?(e=mxUtils.getValue(i.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,new mxPoint(t.x+t.width-Math.min(t.width/2,e),t.y+n)):(e=Math.max(0,parseFloat(mxUtils.getValue(i.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)))/100,new mxPoint(t.x+t.width-Math.min(Math.max(t.width/2,t.height/2),Math.min(t.width,t.height)*e),t.y+n))},function(t,e,n){"1"==mxUtils.getValue(i.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?this.state.style[mxConstants.STYLE_ARCSIZE]=Math.round(Math.max(0,Math.min(t.width,2*(t.x+t.width-e.x)))):(e=Math.min(50,Math.max(0,100*(t.width-e.x+t.x)/Math.min(t.width,t.height))),this.state.style[mxConstants.STYLE_ARCSIZE]=Math.round(e))})}function Gt(){return function(t){var e=[];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(H(t)),e}}function _t(i,l,s){return i=null!=i?i:.5,function(t){var e=[O(t,["size"],function(t){var e=null!=s?"0"!=mxUtils.getValue(this.state.style,"fixedSize","0"):null,n=Math.max(0,parseFloat(mxUtils.getValue(this.state.style,"size",e?s:l)));return new mxPoint(t.x+Math.min(.75*t.width*i,n*(e?.75:.75*t.width)),t.y+t.height/4)},function(t,e){e=(null!=s?"0"!=mxUtils.getValue(this.state.style,"fixedSize","0"):null)?e.x-t.x:Math.max(0,Math.min(i,(e.x-t.x)/t.width*.75));this.state.style.size=e},!1,!0)];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(H(t)),e}}function kt(i,n,l,s,o){return l=null!=l?l:.5,function(t){var e=[O(t,["size"],function(t){var e=null!=o?"0"!=mxUtils.getValue(this.state.style,"fixedSize","0"):null,n=parseFloat(mxUtils.getValue(this.state.style,"size",e?o:i));return new mxPoint(t.x+Math.max(0,Math.min(.5*t.width,n*(e?1:t.width))),t.getCenterY())},function(t,e,n){e=(null!=o?"0"!=mxUtils.getValue(this.state.style,"fixedSize","0"):null)?e.x-t.x:Math.max(0,Math.min(l,(e.x-t.x)/t.width));this.state.style.size=e},!1,s)];return n&&mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(H(t)),e}}function Vt(n,i,l){return function(t){var e=[O(t,["size"],function(t){var e=Math.max(0,Math.min(t.width,Math.min(t.height,parseFloat(mxUtils.getValue(this.state.style,"size",i)))))*n;return new mxPoint(t.x+e,t.y+e)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(t.width,e.x-t.x),Math.min(t.height,e.y-t.y)))/n)},!1)];return l&&mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(H(t)),e}}function Ft(n){return function(t){return[O(t,["size"],function(t){var e=Math.max(0,Math.min(.5*t.height,parseFloat(mxUtils.getValue(this.state.style,"size",n))));return new mxPoint(t.x,t.y+e)},function(t,e){this.state.style.size=Math.max(0,e.y-t.y)},!0)]}}function zt(i){return function(t){return[O(t,["arrowWidth","arrowSize"],function(t){var e=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"arrowWidth",I.prototype.arrowWidth))),n=Math.max(0,Math.min(i,mxUtils.getValue(this.state.style,"arrowSize",I.prototype.arrowSize)));return new mxPoint(t.x+(1-n)*t.width,t.y+(1-e)*t.height/2)},function(t,e){this.state.style.arrowWidth=Math.max(0,Math.min(1,Math.abs(t.y+t.height/2-e.y)/t.height*2)),this.state.style.arrowSize=Math.max(0,Math.min(i,(t.x+t.width-e.x)/t.width))})]}}function Bt(r,a){return function(o){return[Yt(o,["startWidth"],!0,function(t,e,n,i,l){var s=mxUtils.getNumber(o.style,"startWidth",r)*o.view.scale+a;return new mxPoint(i.x+e*t/4+n*s/2,i.y+n*t/4-e*s/2)},function(t,e,n,i,l,s){i=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,s.x,s.y));o.style.startWidth=Math.round(2*i)/o.view.scale-a})]}}function Yt(u,t,d,a,p){return O(u,t,function(t){var e,n,i,l,s,o,r=u.absolutePoints;return null!=r&&0<r.length?(o=r.length-1,e=u.view.translate,n=u.view.scale,i=d?r[0]:r[o],o=(r=d?r[1]:r[o-1]).x-i.x,l=r.y-i.y,s=Math.sqrt(o*o+l*l),new mxPoint((o=a.call(this,s,o/s,l/s,i,r)).x/n-e.x,o.y/n-e.y)):null},function(t,e,n){var i=u.absolutePoints,l=i.length-1,s=u.view.translate,o=u.view.scale,r=d?i[0]:i[l],i=d?i[1]:i[l-1],l=i.x-r.x,a=i.y-r.y,h=Math.sqrt(l*l+a*a);e.x=(e.x+s.x)*o,e.y=(e.y+s.y)*o,p.call(this,h,l/h,a/h,r,i,e,n)})}function jt(o,t,r){return Yt(o,["width"],t,function(t,e,n,i,l){var s=o.shape.getEdgeWidth()*o.view.scale+r;return new mxPoint(i.x+e*t/4+n*s/2,i.y+n*t/4-e*s/2)},function(t,e,n,i,l,s){i=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,s.x,s.y));o.style.width=Math.round(2*i)/o.view.scale-r})}mxRhombus.prototype.getLabelBounds=function(t){var e;return 1==this.style.double?(e=(2*Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0))*this.scale,new mxRectangle(t.x+e,t.y+e,t.width-2*e,t.height-2*e)):t},mxRhombus.prototype.paintVertexShape=function(t,e,n,i,l){var s;lt.apply(this,arguments),this.outline||1!=this.style.double||(e+=s=2*Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0),n+=s,l-=2*s,0<(i-=2*s)&&0<l&&(t.setShadow(!1),lt.apply(this,[t,e,n,i,l])))},mxUtils.extend(st,mxRectangleShape),st.prototype.isHtmlAllowed=function(){return!1},st.prototype.getLabelBounds=function(t){var e;return 1==this.style.double?(e=(Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0))*this.scale,new mxRectangle(t.x+e,t.y+e,t.width-2*e,t.height-2*e)):t},st.prototype.paintForeground=function(t,e,n,i,l){if(null!=this.style){this.outline||1!=this.style.double||(e+=s=Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0),n+=s,l-=2*s,0<(i-=2*s)&&0<l&&mxRectangleShape.prototype.paintBackground.apply(this,arguments)),t.setDashed(!1);var s,o,r,a,h,u,d,p,m,c=0,g=null;do{}while(null!=(g=mxCellRenderer.defaultShapes[this.style["symbol"+c]])&&(m=this.style["symbol"+c+"Align"],o=this.style["symbol"+c+"VerticalAlign"],r=this.style["symbol"+c+"Width"],a=this.style["symbol"+c+"Height"],h=this.style["symbol"+c+"Spacing"]||0,u=this.style["symbol"+c+"VSpacing"]||h,null!=(d=this.style["symbol"+c+"ArcSpacing"])&&(h+=d=this.getArcSize(i+this.strokewidth,l+this.strokewidth)*d,u+=d),d=e,p=n,m==mxConstants.ALIGN_CENTER?d+=(i-r)/2:m==mxConstants.ALIGN_RIGHT?d+=i-r-h:d+=h,o==mxConstants.ALIGN_MIDDLE?p+=(l-a)/2:o==mxConstants.ALIGN_BOTTOM?p+=l-a-u:p+=u,t.save(),(m=new g).style=this.style,g.prototype.paintVertexShape.call(m,t,d,p,r,a),t.restore()),c++,null!=g)}mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("ext",st),mxUtils.extend(ot,mxCylinder),ot.prototype.redrawPath=function(t,e,n,i,l,s){s?(t.moveTo(0,0),t.lineTo(i/2,l/2),t.lineTo(i,0),t.end()):(t.moveTo(0,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(0,l),t.close())},mxCellRenderer.registerShape("message",ot),mxUtils.extend(rt,mxShape),rt.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.ellipse(i/4,0,i/2,l/4),t.fillAndStroke(),t.begin(),t.moveTo(i/2,l/4),t.lineTo(i/2,2*l/3),t.moveTo(i/2,l/3),t.lineTo(0,l/3),t.moveTo(i/2,l/3),t.lineTo(i,l/3),t.moveTo(i/2,2*l/3),t.lineTo(0,l),t.moveTo(i/2,2*l/3),t.lineTo(i,l),t.end(),t.stroke()},mxCellRenderer.registerShape("umlActor",rt),mxUtils.extend(at,mxShape),at.prototype.getLabelMargins=function(t){return new mxRectangle(t.width/6,0,0,0)},at.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(0,l/4),t.lineTo(0,3*l/4),t.end(),t.stroke(),t.begin(),t.moveTo(0,l/2),t.lineTo(i/6,l/2),t.end(),t.stroke(),t.ellipse(i/6,0,5*i/6,l),t.fillAndStroke()},mxCellRenderer.registerShape("umlBoundary",at),mxUtils.extend(ht,mxEllipse),ht.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.begin(),t.moveTo(e+i/8,n+l),t.lineTo(e+7*i/8,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("umlEntity",ht),mxUtils.extend(ut,mxShape),ut.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(i,0),t.lineTo(0,l),t.moveTo(0,0),t.lineTo(i,l),t.end(),t.stroke()},mxCellRenderer.registerShape("umlDestroy",ut),mxUtils.extend(dt,mxShape),dt.prototype.getLabelBounds=function(t){return new mxRectangle(t.x,t.y+t.height/8,t.width,7*t.height/8)},dt.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(3*i/8,l/8*1.1),t.lineTo(5*i/8,0),t.end(),t.stroke(),t.ellipse(0,l/8,i,7*l/8),t.fillAndStroke()},dt.prototype.paintForeground=function(t,e,n,i,l){t.begin(),t.moveTo(3*i/8,l/8*1.1),t.lineTo(5*i/8,l/4),t.end(),t.stroke()},mxCellRenderer.registerShape("umlControl",dt),mxUtils.extend(v,mxRectangleShape),v.prototype.size=40,v.prototype.isHtmlAllowed=function(){return!1},v.prototype.getLabelBounds=function(t){var e=Math.max(0,Math.min(t.height,parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale));return new mxRectangle(t.x,t.y,t.width,e)},v.prototype.paintBackground=function(t,e,n,i,l){var s=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,"participant");null==o||null==this.state?mxRectangleShape.prototype.paintBackground.call(this,t,e,n,i,s):null!=(o=this.state.view.graph.cellRenderer.getShape(o))&&o!=v&&((o=new o).apply(this.state),t.save(),o.paintVertexShape(t,e,n,i,s),t.restore()),s<l&&(t.setDashed("1"==mxUtils.getValue(this.style,"lifelineDashed","1")),t.begin(),t.moveTo(e+i/2,n+s),t.lineTo(e+i/2,n+l),t.end(),t.stroke())},v.prototype.paintForeground=function(t,e,n,i,l){var s=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))));mxRectangleShape.prototype.paintForeground.call(this,t,e,n,i,Math.min(l,s))},mxCellRenderer.registerShape("umlLifeline",v),mxUtils.extend(E,mxShape),E.prototype.width=60,E.prototype.height=30,E.prototype.corner=10,E.prototype.configurePointerEvents=function(t){var e=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE);null==this.style||null!=e&&e!=mxConstants.NONE&&0!=this.opacity&&0!=this.fillOpacity||"0"!=mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")||(t.pointerEvents=!1)},E.prototype.getLabelMargins=function(t){return new mxRectangle(0,0,t.width-parseFloat(mxUtils.getValue(this.style,"width",this.width)*this.scale),t.height-parseFloat(mxUtils.getValue(this.style,"height",this.height)*this.scale))},E.prototype.paintBackground=function(t,e,n,i,l){var s=this.corner,o=Math.min(i,Math.max(s,parseFloat(mxUtils.getValue(this.style,"width",this.width)))),r=Math.min(l,Math.max(1.5*s,parseFloat(mxUtils.getValue(this.style,"height",this.height)))),a=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE);a!=mxConstants.NONE&&(t.setFillColor(a),t.rect(e,n,i,l),t.fill()),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE?(this.getGradientBounds(t,e,n,i,l),t.setGradient(this.fill,this.gradient,e,n,i,l,this.gradientDirection)):t.setFillColor(this.fill),t.pointerEvents=!0,t.begin(),t.moveTo(e,n),t.lineTo(e+o,n),t.lineTo(e+o,n+Math.max(0,r-1.5*s)),t.lineTo(e+Math.max(0,o-s),n+r),t.lineTo(e,n+r),t.close(),t.fillAndStroke(),this.configurePointerEvents(t),t.begin(),t.moveTo(e+o,n),t.lineTo(e+i,n),t.lineTo(e+i,n+l),t.lineTo(e,n+l),t.lineTo(e,n+r),t.stroke()},mxCellRenderer.registerShape("umlFrame",E),mxPerimeter.CenterPerimeter=function(t,e,n,i){return new mxPoint(t.getCenterX(),t.getCenterY())},mxStyleRegistry.putValue("centerPerimeter",mxPerimeter.CenterPerimeter),mxPerimeter.LifelinePerimeter=function(t,e,n,i){var l=v.prototype.size,e=(null!=e&&(l=mxUtils.getValue(e.style,"size",l)*e.view.scale),parseFloat(e.style[mxConstants.STYLE_STROKEWIDTH]||1)*e.view.scale/2-1);return n.x<t.getCenterX()&&(e=-1*(e+1)),new mxPoint(t.getCenterX()+e,Math.min(t.y+t.height,Math.max(t.y+l,n.y)))},mxStyleRegistry.putValue("lifelinePerimeter",mxPerimeter.LifelinePerimeter),mxPerimeter.OrthogonalPerimeter=function(t,e,n,i){return mxPerimeter.RectanglePerimeter.apply(this,arguments)},mxStyleRegistry.putValue("orthogonalPerimeter",mxPerimeter.OrthogonalPerimeter),mxPerimeter.BackbonePerimeter=function(t,e,n,i){var l=parseFloat(e.style[mxConstants.STYLE_STROKEWIDTH]||1)*e.view.scale/2-1;return null!=e.style.backboneSize&&(l+=parseFloat(e.style.backboneSize)*e.view.scale/2-1),"south"==e.style[mxConstants.STYLE_DIRECTION]||"north"==e.style[mxConstants.STYLE_DIRECTION]?(n.x<t.getCenterX()&&(l=-1*(l+1)),new mxPoint(t.getCenterX()+l,Math.min(t.y+t.height,Math.max(t.y,n.y)))):(n.y<t.getCenterY()&&(l=-1*(l+1)),new mxPoint(Math.min(t.x+t.width,Math.max(t.x,n.x)),t.getCenterY()+l))},mxStyleRegistry.putValue("backbonePerimeter",mxPerimeter.BackbonePerimeter),mxPerimeter.CalloutPerimeter=function(t,e,n,i){return mxPerimeter.RectanglePerimeter(mxUtils.getDirectedBounds(t,new mxRectangle(0,0,0,Math.max(0,Math.min(t.height,parseFloat(mxUtils.getValue(e.style,"size",x.prototype.size))*e.view.scale))),e.style),e,n,i)},mxStyleRegistry.putValue("calloutPerimeter",mxPerimeter.CalloutPerimeter),mxPerimeter.ParallelogramPerimeter=function(t,e,n,i){var l="0"!=mxUtils.getValue(e.style,"fixedSize","0"),s=l?p.prototype.fixedSize:p.prototype.size,o=(null!=e&&(s=mxUtils.getValue(e.style,"size",s)),l&&(s*=e.view.scale),t.x),r=t.y,a=t.width,h=t.height,e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,s=(l=e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH?(e=l?Math.max(0,Math.min(h,s)):h*Math.max(0,Math.min(1,s)),[new mxPoint(o,r),new mxPoint(o+a,r+e),new mxPoint(o+a,r+h),new mxPoint(o,r+h-e),new mxPoint(o,r)]):[new mxPoint(o+(e=l?Math.max(0,Math.min(.5*a,s)):a*Math.max(0,Math.min(1,s))),r),new mxPoint(o+a,r),new mxPoint(o+a-e,r+h),new mxPoint(o,r+h),new mxPoint(o+e,r)],t.getCenterX()),h=new mxPoint(s,t.getCenterY());return i&&(n.x<o||n.x>o+a?h.y=n.y:h.x=n.x),mxUtils.getPerimeterPoint(l,h,n)},mxStyleRegistry.putValue("parallelogramPerimeter",mxPerimeter.ParallelogramPerimeter),mxPerimeter.TrapezoidPerimeter=function(t,e,n,i){var l,s="0"!=mxUtils.getValue(e.style,"fixedSize","0"),o=s?m.prototype.fixedSize:m.prototype.size,r=(null!=e&&(o=mxUtils.getValue(e.style,"size",o)),s&&(o*=e.view.scale),t.x),a=t.y,h=t.width,u=t.height,e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,d=[],p=(d=e==mxConstants.DIRECTION_EAST?[new mxPoint(r+(p=s?Math.max(0,Math.min(.5*h,o)):h*Math.max(0,Math.min(1,o))),a),new mxPoint(r+h-p,a),new mxPoint(r+h,a+u),new mxPoint(r,a+u),new mxPoint(r+p,a)]:e==mxConstants.DIRECTION_WEST?(p=s?Math.max(0,Math.min(h,o)):h*Math.max(0,Math.min(1,o)),[new mxPoint(r,a),new mxPoint(r+h,a),new mxPoint(r+h-p,a+u),new mxPoint(r+p,a+u),new mxPoint(r,a)]):e==mxConstants.DIRECTION_NORTH?[new mxPoint(r,a+(l=s?Math.max(0,Math.min(u,o)):u*Math.max(0,Math.min(1,o)))),new mxPoint(r+h,a),new mxPoint(r+h,a+u),new mxPoint(r,a+u-l),new mxPoint(r,a+l)]:(l=s?Math.max(0,Math.min(u,o)):u*Math.max(0,Math.min(1,o)),[new mxPoint(r,a),new mxPoint(r+h,a+l),new mxPoint(r+h,a+u-l),new mxPoint(r,a+u),new mxPoint(r,a)]),t.getCenterX()),e=new mxPoint(p,t.getCenterY());return i&&(n.x<r||n.x>r+h?e.y=n.y:e.x=n.x),mxUtils.getPerimeterPoint(d,e,n)},mxStyleRegistry.putValue("trapezoidPerimeter",mxPerimeter.TrapezoidPerimeter),mxPerimeter.StepPerimeter=function(t,e,n,i){var l,s,o="0"!=mxUtils.getValue(e.style,"fixedSize","0"),r=o?y.prototype.fixedSize:y.prototype.size,a=(null!=e&&(r=mxUtils.getValue(e.style,"size",r)),o&&(r*=e.view.scale),t.x),h=t.y,u=t.width,d=t.height,p=t.getCenterX(),t=t.getCenterY(),e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,e=(l=e==mxConstants.DIRECTION_EAST?(l=o?Math.max(0,Math.min(u,r)):u*Math.max(0,Math.min(1,r)),[new mxPoint(a,h),new mxPoint(a+u-l,h),new mxPoint(a+u,t),new mxPoint(a+u-l,h+d),new mxPoint(a,h+d),new mxPoint(a+l,t),new mxPoint(a,h)]):e==mxConstants.DIRECTION_WEST?[new mxPoint(a+(l=o?Math.max(0,Math.min(u,r)):u*Math.max(0,Math.min(1,r))),h),new mxPoint(a+u,h),new mxPoint(a+u-l,t),new mxPoint(a+u,h+d),new mxPoint(a+l,h+d),new mxPoint(a,t),new mxPoint(a+l,h)]:e==mxConstants.DIRECTION_NORTH?[new mxPoint(a,h+(s=o?Math.max(0,Math.min(d,r)):d*Math.max(0,Math.min(1,r)))),new mxPoint(p,h),new mxPoint(a+u,h+s),new mxPoint(a+u,h+d),new mxPoint(p,h+d-s),new mxPoint(a,h+d),new mxPoint(a,h+s)]:(s=o?Math.max(0,Math.min(d,r)):d*Math.max(0,Math.min(1,r)),[new mxPoint(a,h),new mxPoint(p,h+s),new mxPoint(a+u,h),new mxPoint(a+u,h+d-s),new mxPoint(p,h+d),new mxPoint(a,h+d-s),new mxPoint(a,h)]),new mxPoint(p,t));return i&&(n.x<a||n.x>a+u?e.y=n.y:e.x=n.x),mxUtils.getPerimeterPoint(l,e,n)},mxStyleRegistry.putValue("stepPerimeter",mxPerimeter.StepPerimeter),mxPerimeter.HexagonPerimeter2=function(t,e,n,i){var l="0"!=mxUtils.getValue(e.style,"fixedSize","0"),s=l?C.prototype.fixedSize:C.prototype.size,o=(null!=e&&(s=mxUtils.getValue(e.style,"size",s)),l&&(s*=e.view.scale),t.x),r=t.y,a=t.width,h=t.height,u=t.getCenterX(),t=t.getCenterY(),e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,s=(l=e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH?(e=l?Math.max(0,Math.min(h,s)):h*Math.max(0,Math.min(1,s)),[new mxPoint(u,r),new mxPoint(o+a,r+e),new mxPoint(o+a,r+h-e),new mxPoint(u,r+h),new mxPoint(o,r+h-e),new mxPoint(o,r+e),new mxPoint(u,r)]):[new mxPoint(o+(e=l?Math.max(0,Math.min(a,s)):a*Math.max(0,Math.min(1,s))),r),new mxPoint(o+a-e,r),new mxPoint(o+a,t),new mxPoint(o+a-e,r+h),new mxPoint(o+e,r+h),new mxPoint(o,t),new mxPoint(o+e,r)],new mxPoint(u,t));return i&&(n.x<o||n.x>o+a?s.y=n.y:s.x=n.x),mxUtils.getPerimeterPoint(l,s,n)},mxStyleRegistry.putValue("hexagonPerimeter2",mxPerimeter.HexagonPerimeter2),mxUtils.extend(pt,mxShape),pt.prototype.size=10,pt.prototype.paintBackground=function(t,e,n,i,l){var s=parseFloat(mxUtils.getValue(this.style,"size",this.size));t.translate(e,n),t.ellipse((i-s)/2,0,s,s),t.fillAndStroke(),t.begin(),t.moveTo(i/2,s),t.lineTo(i/2,l),t.end(),t.stroke()},mxCellRenderer.registerShape("lollipop",pt),mxUtils.extend(mt,mxShape),mt.prototype.size=10,mt.prototype.inset=2,mt.prototype.paintBackground=function(t,e,n,i,l){var s=parseFloat(mxUtils.getValue(this.style,"size",this.size)),o=parseFloat(mxUtils.getValue(this.style,"inset",this.inset))+this.strokewidth;t.translate(e,n),t.begin(),t.moveTo(i/2,s+o),t.lineTo(i/2,l),t.end(),t.stroke(),t.begin(),t.moveTo((i-s)/2-o,s/2),t.quadTo((i-s)/2-o,s+o,i/2,s+o),t.quadTo((i+s)/2+o,s+o,(i+s)/2+o,s/2),t.end(),t.stroke()},mxCellRenderer.registerShape("requires",mt),mxUtils.extend(ct,mxShape),ct.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(0,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,0,l),t.end(),t.stroke()},mxCellRenderer.registerShape("requiredInterface",ct),mxUtils.extend(gt,mxShape),gt.prototype.inset=2,gt.prototype.paintBackground=function(t,e,n,i,l){var s=parseFloat(mxUtils.getValue(this.style,"inset",this.inset))+this.strokewidth;t.translate(e,n),t.ellipse(0,s,i-2*s,l-2*s),t.fillAndStroke(),t.begin(),t.moveTo(i/2,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,i/2,l),t.end(),t.stroke()},mxCellRenderer.registerShape("providedRequiredInterface",gt),mxUtils.extend(S,mxCylinder),S.prototype.jettyWidth=20,S.prototype.jettyHeight=10,S.prototype.redrawPath=function(t,e,n,i,l,s){var o=parseFloat(mxUtils.getValue(this.style,"jettyWidth",this.jettyWidth)),r=parseFloat(mxUtils.getValue(this.style,"jettyHeight",this.jettyHeight)),a=o/2,o=a+o/2,h=Math.min(r,l-r),u=Math.min(h+2*r,l-r);s?(t.moveTo(a,h),t.lineTo(o,h),t.lineTo(o,h+r),t.lineTo(a,h+r),t.moveTo(a,u),t.lineTo(o,u),t.lineTo(o,u+r),t.lineTo(a,u+r)):(t.moveTo(a,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(a,l),t.lineTo(a,u+r),t.lineTo(0,u+r),t.lineTo(0,u),t.lineTo(a,u),t.lineTo(a,h+r),t.lineTo(0,h+r),t.lineTo(0,h),t.lineTo(a,h),t.close()),t.end()},mxCellRenderer.registerShape("module",S),mxUtils.extend(xt,mxCylinder),xt.prototype.jettyWidth=32,xt.prototype.jettyHeight=12,xt.prototype.redrawPath=function(t,e,n,i,l,s){var o=parseFloat(mxUtils.getValue(this.style,"jettyWidth",this.jettyWidth)),r=parseFloat(mxUtils.getValue(this.style,"jettyHeight",this.jettyHeight)),a=o/2,o=a+o/2,h=.3*l-r/2,u=.7*l-r/2;s?(t.moveTo(a,h),t.lineTo(o,h),t.lineTo(o,h+r),t.lineTo(a,h+r),t.moveTo(a,u),t.lineTo(o,u),t.lineTo(o,u+r),t.lineTo(a,u+r)):(t.moveTo(a,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(a,l),t.lineTo(a,u+r),t.lineTo(0,u+r),t.lineTo(0,u),t.lineTo(a,u),t.lineTo(a,h+r),t.lineTo(0,h+r),t.lineTo(0,h),t.lineTo(a,h),t.close()),t.end()},mxCellRenderer.registerShape("component",xt),mxUtils.extend(yt,mxRectangleShape),yt.prototype.paintForeground=function(t,e,n,i,l){var s=i/2,o=l/2,r=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;t.begin(),this.addPoints(t,[new mxPoint(e+s,n),new mxPoint(e+i,n+o),new mxPoint(e+s,n+l),new mxPoint(e,n+o)],this.isRounded,r,!0),t.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("associativeEntity",yt),mxUtils.extend(Ct,mxDoubleEllipse),Ct.prototype.outerStroke=!0,Ct.prototype.paintVertexShape=function(t,e,n,i,l){var s=Math.min(4,Math.min(i/5,l/5));0<i&&0<l&&(t.ellipse(e+s,n+s,i-2*s,l-2*s),t.fillAndStroke()),t.setShadow(!1),this.outerStroke&&(t.ellipse(e,n,i,l),t.stroke())},mxCellRenderer.registerShape("endState",Ct),mxUtils.extend(ft,Ct),ft.prototype.outerStroke=!1,mxCellRenderer.registerShape("startState",ft),mxUtils.extend(vt,mxArrowConnector),vt.prototype.defaultWidth=4,vt.prototype.isOpenEnded=function(){return!0},vt.prototype.getEdgeWidth=function(){return mxUtils.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},vt.prototype.isArrowRounded=function(){return this.isRounded},mxCellRenderer.registerShape("link",vt),mxUtils.extend(w,mxArrowConnector),w.prototype.defaultWidth=10,w.prototype.defaultArrowWidth=20,w.prototype.getStartArrowWidth=function(){return this.getEdgeWidth()+mxUtils.getNumber(this.style,"startWidth",this.defaultArrowWidth)},w.prototype.getEndArrowWidth=function(){return this.getEdgeWidth()+mxUtils.getNumber(this.style,"endWidth",this.defaultArrowWidth)},w.prototype.getEdgeWidth=function(){return mxUtils.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},mxCellRenderer.registerShape("flexArrow",w),mxUtils.extend(b,mxActor),b.prototype.size=30,b.prototype.isRoundable=function(){return!0},b.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,l),new mxPoint(0,s),new mxPoint(i,0),new mxPoint(i,l)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("manualInput",b),mxUtils.extend(T,mxRectangleShape),T.prototype.dx=20,T.prototype.dy=20,T.prototype.isHtmlAllowed=function(){return!1},T.prototype.paintForeground=function(t,e,n,i,l){mxRectangleShape.prototype.paintForeground.apply(this,arguments);var s=0,o=(this.isRounded&&(o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,s=Math.max(s,Math.min(i*o,l*o))),Math.max(s,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dx",this.dx))))),s=Math.max(s,Math.min(l,parseFloat(mxUtils.getValue(this.style,"dy",this.dy))));t.begin(),t.moveTo(e,n+s),t.lineTo(e+i,n+s),t.end(),t.stroke(),t.begin(),t.moveTo(e+o,n),t.lineTo(e+o,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("internalStorage",T),mxUtils.extend(M,mxActor),M.prototype.dx=20,M.prototype.dy=20,M.prototype.redrawPath=function(t,e,n,i,l){var s=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),o=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"dy",this.dy)))),r=(Math.min(i/2,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2);this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,o),new mxPoint(s,o),new mxPoint(s,l),new mxPoint(0,l)],this.isRounded,r,!0),t.end()},mxCellRenderer.registerShape("corner",M),mxUtils.extend(Et,mxActor),Et.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.lineTo(0,l),t.end(),t.moveTo(i,0),t.lineTo(i,l),t.end(),t.moveTo(0,l/2),t.lineTo(i,l/2),t.end()},mxCellRenderer.registerShape("crossbar",Et),mxUtils.extend(L,mxActor),L.prototype.dx=20,L.prototype.dy=20,L.prototype.redrawPath=function(t,e,n,i,l){var s=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),o=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"dy",this.dy)))),r=(Math.abs(i-s),Math.min(i/2,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2);this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,o),new mxPoint((i+s)/2,o),new mxPoint((i+s)/2,l),new mxPoint((i-s)/2,l),new mxPoint((i-s)/2,o),new mxPoint(0,o)],this.isRounded,r,!0),t.end()},mxCellRenderer.registerShape("tee",L),mxUtils.extend(I,mxActor),I.prototype.arrowWidth=.3,I.prototype.arrowSize=.2,I.prototype.redrawPath=function(t,e,n,i,l){var s=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",this.arrowWidth)))),o=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",this.arrowSize)))),r=(l-s)/2,s=r+s,a=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,r),new mxPoint(i-o,r),new mxPoint(i-o,0),new mxPoint(i,l/2),new mxPoint(i-o,l),new mxPoint(i-o,s),new mxPoint(0,s)],this.isRounded,a,!0),t.end()},mxCellRenderer.registerShape("singleArrow",I),mxUtils.extend(St,mxActor),St.prototype.redrawPath=function(t,e,n,i,l){var s=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",I.prototype.arrowWidth)))),o=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",I.prototype.arrowSize)))),r=(l-s)/2,s=r+s,a=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,l/2),new mxPoint(o,0),new mxPoint(o,r),new mxPoint(i-o,r),new mxPoint(i-o,0),new mxPoint(i,l/2),new mxPoint(i-o,l),new mxPoint(i-o,s),new mxPoint(o,s),new mxPoint(o,l)],this.isRounded,a,!0),t.end()},mxCellRenderer.registerShape("doubleArrow",St),mxUtils.extend(A,mxActor),A.prototype.size=.1,A.prototype.fixedSize=20,A.prototype.redrawPath=function(t,e,n,i,l){var s="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));t.moveTo(s,0),t.lineTo(i,0),t.quadTo(i-2*s,l/2,i,l),t.lineTo(s,l),t.quadTo(s-2*s,l/2,s,0),t.close(),t.end()},mxCellRenderer.registerShape("dataStorage",A),mxUtils.extend(wt,mxActor),wt.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,0,l),t.close(),t.end()},mxCellRenderer.registerShape("or",wt),mxUtils.extend(bt,mxActor),bt.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,0,l),t.quadTo(i/2,l/2,0,0),t.close(),t.end()},mxCellRenderer.registerShape("xor",bt),mxUtils.extend(P,mxActor),P.prototype.size=20,P.prototype.isRoundable=function(){return!0},P.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(i/2,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(s,0),new mxPoint(i-s,0),new mxPoint(i,.8*s),new mxPoint(i,l),new mxPoint(0,l),new mxPoint(0,.8*s)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("loopLimit",P),mxUtils.extend(N,mxActor),N.prototype.size=3/8,N.prototype.isRoundable=function(){return!0},N.prototype.redrawPath=function(t,e,n,i,l){var s=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,l-s),new mxPoint(i/2,l),new mxPoint(0,l-s)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("offPageConnector",N),mxUtils.extend(Tt,mxEllipse),Tt.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.begin(),t.moveTo(e+i/2,n+l),t.lineTo(e+i,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("tapeData",Tt),mxUtils.extend(Mt,mxEllipse),Mt.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.setShadow(!1),t.begin(),t.moveTo(e,n+l/2),t.lineTo(e+i,n+l/2),t.end(),t.stroke(),t.begin(),t.moveTo(e+i/2,n),t.lineTo(e+i/2,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("orEllipse",Mt),mxUtils.extend(Lt,mxEllipse),Lt.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments);t.setShadow(!1),t.begin(),t.moveTo(e+.145*i,n+.145*l),t.lineTo(e+.855*i,n+.855*l),t.end(),t.stroke(),t.begin(),t.moveTo(e+.855*i,n+.145*l),t.lineTo(e+.145*i,n+.855*l),t.end(),t.stroke()},mxCellRenderer.registerShape("sumEllipse",Lt),mxUtils.extend(It,mxRhombus),It.prototype.paintVertexShape=function(t,e,n,i,l){mxRhombus.prototype.paintVertexShape.apply(this,arguments),t.setShadow(!1),t.begin(),t.moveTo(e,n+l/2),t.lineTo(e+i,n+l/2),t.end(),t.stroke()},mxCellRenderer.registerShape("sortShape",It),mxUtils.extend(At,mxEllipse),At.prototype.paintVertexShape=function(t,e,n,i,l){t.begin(),t.moveTo(e,n),t.lineTo(e+i,n),t.lineTo(e+i/2,n+l/2),t.close(),t.fillAndStroke(),t.begin(),t.moveTo(e,n+l),t.lineTo(e+i,n+l),t.lineTo(e+i/2,n+l/2),t.close(),t.fillAndStroke()},mxCellRenderer.registerShape("collate",At),mxUtils.extend(Pt,mxEllipse),Pt.prototype.paintVertexShape=function(t,e,n,i,l){var s=t.state.strokeWidth/2,o=10+2*s,r=n+l-o/2;t.begin(),t.moveTo(e,n),t.lineTo(e,n+l),t.moveTo(e+s,r),t.lineTo(e+s+o,r-o/2),t.moveTo(e+s,r),t.lineTo(e+s+o,r+o/2),t.moveTo(e+s,r),t.lineTo(e+i-s,r),t.moveTo(e+i,n),t.lineTo(e+i,n+l),t.moveTo(e+i-s,r),t.lineTo(e+i-o-s,r-o/2),t.moveTo(e+i-s,r),t.lineTo(e+i-o-s,r+o/2),t.end(),t.stroke()},mxCellRenderer.registerShape("dimension",Pt),mxUtils.extend(Nt,mxEllipse),Nt.prototype.drawHidden=!0,Nt.prototype.paintVertexShape=function(t,e,n,i,l){var s,o,r,a,h,u;this.outline||t.setStrokeColor(null),null!=this.style&&(s=t.pointerEvents,o=null!=this.fill&&this.fill!=mxConstants.NONE,"1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")||o||(t.pointerEvents=!1),r="1"==mxUtils.getValue(this.style,"top","1"),a="1"==mxUtils.getValue(this.style,"left","1"),h="1"==mxUtils.getValue(this.style,"right","1"),u="1"==mxUtils.getValue(this.style,"bottom","1"),this.drawHidden||o||this.outline||r||h||u||a?(t.rect(e,n,i,l),t.fill(),t.pointerEvents=s,t.setStrokeColor(this.stroke),t.setLineCap("square"),t.begin(),t.moveTo(e,n),this.outline||r?t.lineTo(e+i,n):t.moveTo(e+i,n),this.outline||h?t.lineTo(e+i,n+l):t.moveTo(e+i,n+l),this.outline||u?t.lineTo(e,n+l):t.moveTo(e,n+l),(this.outline||a)&&t.lineTo(e,n),t.end(),t.stroke(),t.setLineCap("flat")):t.setStrokeColor(this.stroke))},mxCellRenderer.registerShape("partialRectangle",Nt),mxUtils.extend(Rt,mxEllipse),Rt.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.setShadow(!1),t.begin(),"vertical"==mxUtils.getValue(this.style,"line")?(t.moveTo(e+i/2,n),t.lineTo(e+i/2,n+l)):(t.moveTo(e,n+l/2),t.lineTo(e+i,n+l/2)),t.end(),t.stroke()},mxCellRenderer.registerShape("lineEllipse",Rt),mxUtils.extend(Dt,mxActor),Dt.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(i,l/2);t.moveTo(0,0),t.lineTo(i-s,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,i-s,l),t.lineTo(0,l),t.close(),t.end()},mxCellRenderer.registerShape("delay",Dt),mxUtils.extend(Ot,mxActor),Ot.prototype.size=.2,Ot.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(l,i),s=Math.max(0,Math.min(s,s*parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=(l-s)/2,r=o+s,a=(i-s)/2,s=a+s;t.moveTo(0,o),t.lineTo(a,o),t.lineTo(a,0),t.lineTo(s,0),t.lineTo(s,o),t.lineTo(i,o),t.lineTo(i,r),t.lineTo(s,r),t.lineTo(s,l),t.lineTo(a,l),t.lineTo(a,r),t.lineTo(0,r),t.close(),t.end()},mxCellRenderer.registerShape("cross",Ot),mxUtils.extend(Ht,mxActor),Ht.prototype.size=.25,Ht.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(i,l/2),o=Math.min(i-s,Math.max(0,parseFloat(mxUtils.getValue(this.style,"size",this.size)))*i);t.moveTo(0,l/2),t.lineTo(o,0),t.lineTo(i-s,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,i-s,l),t.lineTo(o,l),t.close(),t.end()},mxCellRenderer.registerShape("display",Ht),mxUtils.extend(R,mxActor),R.prototype.cst={RECT2:"mxgraph.basic.rect"},R.prototype.customProperties=[{name:"rectStyle",dispName:"Style",type:"enum",defVal:"square",enumList:[{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"size",dispName:"Corner Size",type:"float",defVal:10},{name:"absoluteCornerSize",dispName:"Abs. Corner Size",type:"bool",defVal:!0},{name:"indent",dispName:"Indent",type:"float",defVal:2},{name:"rectOutline",dispName:"Outline",type:"enum",defVal:"single",enumList:[{val:"single",dispName:"Single"},{val:"double",dispName:"Double"},{val:"frame",dispName:"Frame"}]},{name:"fillColor2",dispName:"Inside Fill Color",type:"color",defVal:"none"},{name:"gradientColor2",dispName:"Inside Gradient Color",type:"color",defVal:"none"},{name:"gradientDirection2",dispName:"Inside Gradient Direction",type:"enum",defVal:"south",enumList:[{val:"south",dispName:"South"},{val:"west",dispName:"West"},{val:"north",dispName:"North"},{val:"east",dispName:"East"}]},{name:"top",dispName:"Top Line",type:"bool",defVal:!0},{name:"right",dispName:"Right",type:"bool",defVal:!0},{name:"bottom",dispName:"Bottom Line",type:"bool",defVal:!0},{name:"left",dispName:"Left ",type:"bool",defVal:!0},{name:"topLeftStyle",dispName:"Top Left Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"topRightStyle",dispName:"Top Right Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"bottomRightStyle",dispName:"Bottom Right Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"bottomLeftStyle",dispName:"Bottom Left Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]}],R.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),this.strictDrawShape(t,0,0,i,l)},R.prototype.strictDrawShape=function(t,e,n,i,l,s){var o=s&&s.rectStyle?s.rectStyle:mxUtils.getValue(this.style,"rectStyle",this.rectStyle),r=s&&s.absoluteCornerSize?s.absoluteCornerSize:mxUtils.getValue(this.style,"absoluteCornerSize",this.absoluteCornerSize),a=s&&s.size?s.size:Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),h=s&&s.rectOutline?s.rectOutline:mxUtils.getValue(this.style,"rectOutline",this.rectOutline),u=s&&s.indent?s.indent:Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"indent",this.indent)))),d=s&&s.dashed?s.dashed:mxUtils.getValue(this.style,"dashed",!1),p=s&&s.dashPattern?s.dashPattern:mxUtils.getValue(this.style,"dashPattern",null),m=s&&s.relIndent?s.relIndent:Math.max(0,Math.min(50,u)),c=s&&s.top?s.top:mxUtils.getValue(this.style,"top",!0),g=s&&s.right?s.right:mxUtils.getValue(this.style,"right",!0),x=s&&s.bottom?s.bottom:mxUtils.getValue(this.style,"bottom",!0),y=s&&s.left?s.left:mxUtils.getValue(this.style,"left",!0),C=s&&s.topLeftStyle?s.topLeftStyle:mxUtils.getValue(this.style,"topLeftStyle","default"),f=s&&s.topRightStyle?s.topRightStyle:mxUtils.getValue(this.style,"topRightStyle","default"),v=s&&s.bottomRightStyle?s.bottomRightStyle:mxUtils.getValue(this.style,"bottomRightStyle","default"),E=s&&s.bottomLeftStyle?s.bottomLeftStyle:mxUtils.getValue(this.style,"bottomLeftStyle","default"),S=s&&s.fillColor?s.fillColor:mxUtils.getValue(this.style,"fillColor","#ffffff"),w=(s&&s.strokeColor?s.strokeColor:mxUtils.getValue(this.style,"strokeColor","#000000"),s&&s.strokeWidth?s.strokeWidth:mxUtils.getValue(this.style,"strokeWidth","1")),b=s&&s.fillColor2?s.fillColor2:mxUtils.getValue(this.style,"fillColor2","none"),T=s&&s.gradientColor2?s.gradientColor2:mxUtils.getValue(this.style,"gradientColor2","none"),M=s&&s.gradientDirection2?s.gradientDirection2:mxUtils.getValue(this.style,"gradientDirection2","south"),s=s&&s.opacity?s.opacity:mxUtils.getValue(this.style,"opacity","100"),L=Math.max(0,Math.min(50,a)),I=R.prototype;t.setDashed(d),p&&""!=p&&t.setDashPattern(p),t.setStrokeWidth(w),a=Math.min(.5*l,.5*i,a),r||(a=L*Math.min(i,l)/100),a=Math.min(a,.5*Math.min(i,l)),r||(u=Math.min(m*Math.min(i,l)/100)),u=Math.min(u,.5*Math.min(i,l)-a),(c||g||x||y)&&"frame"!=h&&(t.begin(),c?I.moveNW(t,e,n,i,l,o,C,a,y):t.moveTo(0,0),c&&I.paintNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),g&&I.paintNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),x&&I.paintSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),y&&I.paintSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),t.close(),t.fill(),t.setShadow(!1),t.setFillColor(b),0,t.setGradient(b,T,0,0,i,l,M,"none"==b?0:s,"none"==T?0:s),t.begin(),c?I.moveNWInner(t,e,n,i,l,o,C,a,u,c,y):t.moveTo(u,0),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),y&&x&&I.paintSWInner(t,e,n,i,l,o,E,a,u,x),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),x&&g&&I.paintSEInner(t,e,n,i,l,o,v,a,u),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),g&&c&&I.paintNEInner(t,e,n,i,l,o,f,a,u),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),c&&y&&I.paintNWInner(t,e,n,i,l,o,C,a,u),t.fill(),"none"==S)&&(t.begin(),I.paintFolds(t,e,n,i,l,o,C,f,v,E,a,c,g,x,y),t.stroke()),c||g||x||!y?c||g||!x||y?!c&&!g&&x&&y?"frame"!=h?(t.begin(),I.moveSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.paintSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),"double"==h&&(I.moveNWInner(t,e,n,i,l,o,C,a,u,c,y),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),I.paintSWInner(t,e,n,i,l,o,E,a,u,x),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x)),t.stroke()):(t.begin(),I.moveSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.paintSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),I.lineNWInner(t,e,n,i,l,o,C,a,u,c,y),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),I.paintSWInner(t,e,n,i,l,o,E,a,u,x),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),t.close(),t.fillAndStroke()):c||!g||x||y?!c&&g&&!x&&y?"frame"!=h?(t.begin(),I.moveSW(t,e,n,i,l,o,C,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),"double"==h&&(I.moveNWInner(t,e,n,i,l,o,C,a,u,c,y),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y)),t.stroke(),t.begin(),I.moveNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),"double"==h&&(I.moveSEInner(t,e,n,i,l,o,v,a,u,x),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g)),t.stroke()):(t.begin(),I.moveSW(t,e,n,i,l,o,C,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),I.lineNWInner(t,e,n,i,l,o,C,a,u,c,y),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),t.close(),t.fillAndStroke(),t.begin(),I.moveNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.lineSEInner(t,e,n,i,l,o,v,a,u,x),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),t.close(),t.fillAndStroke()):!c&&g&&x&&!y?"frame"!=h?(t.begin(),I.moveNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.paintSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),"double"==h&&(I.moveSWInner(t,e,n,i,l,o,E,a,u,y),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),I.paintSEInner(t,e,n,i,l,o,v,a,u),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g)),t.stroke()):(t.begin(),I.moveNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.paintSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.lineSWInner(t,e,n,i,l,o,E,a,u,y),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),I.paintSEInner(t,e,n,i,l,o,v,a,u),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),t.close(),t.fillAndStroke()):!c&&g&&x&&y?"frame"!=h?(t.begin(),I.moveNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.paintSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.paintSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),"double"==h&&(I.moveNWInner(t,e,n,i,l,o,C,a,u,c,y),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),I.paintSWInner(t,e,n,i,l,o,E,a,u,x),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),I.paintSEInner(t,e,n,i,l,o,v,a,u),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g)),t.stroke()):(t.begin(),I.moveNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.paintSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.paintSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),I.lineNWInner(t,e,n,i,l,o,C,a,u,c,y),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),I.paintSWInner(t,e,n,i,l,o,E,a,u,x),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),I.paintSEInner(t,e,n,i,l,o,v,a,u),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),t.close(),t.fillAndStroke()):!c||g||x||y?c&&!g&&!x&&y?"frame"!=h?(t.begin(),I.moveSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),I.paintNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),"double"==h&&(I.moveNEInner(t,e,n,i,l,o,f,a,u,g),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),I.paintNWInner(t,e,n,i,l,o,C,a,u),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y)),t.stroke()):(t.begin(),I.moveSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),I.paintNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.lineNEInner(t,e,n,i,l,o,f,a,u,g),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),I.paintNWInner(t,e,n,i,l,o,C,a,u),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),t.close(),t.fillAndStroke()):c&&!g&&x&&!y?"frame"!=h?(t.begin(),I.moveNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),"double"==h&&(I.moveNEInner(t,e,n,i,l,o,f,a,u,g),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c)),t.stroke(),t.begin(),I.moveSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),"double"==h&&(I.moveSWInner(t,e,n,i,l,o,E,a,u,y),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x)),t.stroke()):(t.begin(),I.moveNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.lineNEInner(t,e,n,i,l,o,f,a,u,g),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),t.close(),t.fillAndStroke(),t.begin(),I.moveSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.lineSWInner(t,e,n,i,l,o,E,a,u,y),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),t.close(),t.fillAndStroke()):c&&!g&&x&&y?"frame"!=h?(t.begin(),I.moveSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.paintSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),I.paintNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),"double"==h&&(I.moveNEInner(t,e,n,i,l,o,f,a,u,g),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),I.paintNWInner(t,e,n,i,l,o,C,a,u),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),I.paintSWInner(t,e,n,i,l,o,E,a,u,x),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x)),t.stroke()):(t.begin(),I.moveSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.paintSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),I.paintNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.lineNEInner(t,e,n,i,l,o,f,a,u,g),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),I.paintNWInner(t,e,n,i,l,o,C,a,u),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),I.paintSWInner(t,e,n,i,l,o,E,a,u,x),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),t.close(),t.fillAndStroke()):c&&g&&!x&&!y?"frame"!=h?(t.begin(),I.moveNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.paintNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),"double"==h&&(I.moveSEInner(t,e,n,i,l,o,v,a,u,x),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),I.paintNEInner(t,e,n,i,l,o,f,a,u),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c)),t.stroke()):(t.begin(),I.moveNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.paintNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.lineSEInner(t,e,n,i,l,o,v,a,u,x),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),I.paintNEInner(t,e,n,i,l,o,f,a,u),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),t.close(),t.fillAndStroke()):c&&g&&!x&&y?"frame"!=h?(t.begin(),I.moveSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),I.paintNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.paintNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),"double"==h&&(I.moveSEInner(t,e,n,i,l,o,v,a,u,x),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),I.paintNEInner(t,e,n,i,l,o,f,a,u),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),I.paintNWInner(t,e,n,i,l,o,C,a,u),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y)),t.stroke()):(t.begin(),I.moveSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),I.paintNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.paintNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.lineSEInner(t,e,n,i,l,o,v,a,u,x),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),I.paintNEInner(t,e,n,i,l,o,f,a,u),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),I.paintNWInner(t,e,n,i,l,o,C,a,u),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),t.close(),t.fillAndStroke()):c&&g&&x&&!y?"frame"!=h?(t.begin(),I.moveNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.paintNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.paintSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),"double"==h&&(I.moveSWInner(t,e,n,i,l,o,E,a,u,y),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),I.paintSEInner(t,e,n,i,l,o,v,a,u),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),I.paintNEInner(t,e,n,i,l,o,f,a,u),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c)),t.stroke()):(t.begin(),I.moveNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.paintNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.paintSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.lineSWInner(t,e,n,i,l,o,E,a,u,y),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),I.paintSEInner(t,e,n,i,l,o,v,a,u),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),I.paintNEInner(t,e,n,i,l,o,f,a,u),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),t.close(),t.fillAndStroke()):c&&g&&x&&y&&("frame"!=h?(t.begin(),I.moveNW(t,e,n,i,l,o,C,a,y),I.paintNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.paintNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.paintSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.paintSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),t.close(),"double"==h&&(I.moveSWInner(t,e,n,i,l,o,E,a,u,y),I.paintSWInner(t,e,n,i,l,o,E,a,u,x),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),I.paintSEInner(t,e,n,i,l,o,v,a,u),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),I.paintNEInner(t,e,n,i,l,o,f,a,u),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),I.paintNWInner(t,e,n,i,l,o,C,a,u),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),t.close()),t.stroke()):(t.begin(),I.moveNW(t,e,n,i,l,o,C,a,y),I.paintNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.paintNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.paintSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.paintSW(t,e,n,i,l,o,E,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),t.close(),I.moveSWInner(t,e,n,i,l,o,E,a,u,y),I.paintSWInner(t,e,n,i,l,o,E,a,u,x),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),I.paintSEInner(t,e,n,i,l,o,v,a,u),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),I.paintNEInner(t,e,n,i,l,o,f,a,u),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),I.paintNWInner(t,e,n,i,l,o,C,a,u),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),t.close(),t.fillAndStroke())):"frame"!=h?(t.begin(),I.moveNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),"double"==h&&(I.moveNEInner(t,e,n,i,l,o,f,a,u,g),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c)),t.stroke()):(t.begin(),I.moveNW(t,e,n,i,l,o,C,a,y),I.paintTop(t,e,n,i,l,o,f,a,g),I.lineNEInner(t,e,n,i,l,o,f,a,u,g),I.paintTopInner(t,e,n,i,l,o,C,a,u,y,c),t.close(),t.fillAndStroke()):"frame"!=h?(t.begin(),I.moveNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),"double"==h&&(I.moveSEInner(t,e,n,i,l,o,v,a,u,x),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g)),t.stroke()):(t.begin(),I.moveNE(t,e,n,i,l,o,f,a,c),I.paintRight(t,e,n,i,l,o,v,a,x),I.lineSEInner(t,e,n,i,l,o,v,a,u,x),I.paintRightInner(t,e,n,i,l,o,f,a,u,c,g),t.close(),t.fillAndStroke()):"frame"!=h?(t.begin(),I.moveSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),"double"==h&&(I.moveSWInner(t,e,n,i,l,o,E,a,u,y),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x)),t.stroke()):(t.begin(),I.moveSE(t,e,n,i,l,o,v,a,g),I.paintBottom(t,e,n,i,l,o,E,a,y),I.lineSWInner(t,e,n,i,l,o,E,a,u,y),I.paintBottomInner(t,e,n,i,l,o,v,a,u,g,x),t.close(),t.fillAndStroke()):"frame"!=h?(t.begin(),I.moveSW(t,e,n,i,l,o,C,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),"double"==h&&(I.moveNWInner(t,e,n,i,l,o,C,a,u,c,y),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y)),t.stroke()):(t.begin(),I.moveSW(t,e,n,i,l,o,C,a,x),I.paintLeft(t,e,n,i,l,o,C,a,c),I.lineNWInner(t,e,n,i,l,o,C,a,u,c,y),I.paintLeftInner(t,e,n,i,l,o,E,a,u,x,y),t.close(),t.fillAndStroke()),t.begin(),I.paintFolds(t,e,n,i,l,o,C,f,v,E,a,c,g,x,y),t.stroke()},R.prototype.moveNW=function(t,e,n,i,l,s,o,r,a){"square"==o||"default"==o&&"square"==s||!a?t.moveTo(0,0):t.moveTo(0,r)},R.prototype.moveNE=function(t,e,n,i,l,s,o,r,a){"square"==o||"default"==o&&"square"==s||!a?t.moveTo(i,0):t.moveTo(i-r,0)},R.prototype.moveSE=function(t,e,n,i,l,s,o,r,a){"square"==o||"default"==o&&"square"==s||!a?t.moveTo(i,l):t.moveTo(i,l-r)},R.prototype.moveSW=function(t,e,n,i,l,s,o,r,a){"square"==o||"default"==o&&"square"==s||!a?t.moveTo(0,l):t.moveTo(r,l)},R.prototype.paintNW=function(t,e,n,i,l,s,o,r,a){a?"rounded"==o||"default"==o&&"rounded"==s||"invRound"==o||"default"==o&&"invRound"==s?t.arcTo(r,r,0,0,"rounded"==o||"default"==o&&"rounded"==s?1:0,r,0):("snip"==o||"default"==o&&"snip"==s||"fold"==o||"default"==o&&"fold"==s)&&t.lineTo(r,0):t.lineTo(0,0)},R.prototype.paintTop=function(t,e,n,i,l,s,o,r,a){"square"==o||"default"==o&&"square"==s||!a?t.lineTo(i,0):t.lineTo(i-r,0)},R.prototype.paintNE=function(t,e,n,i,l,s,o,r,a){a?"rounded"==o||"default"==o&&"rounded"==s||"invRound"==o||"default"==o&&"invRound"==s?t.arcTo(r,r,0,0,"rounded"==o||"default"==o&&"rounded"==s?1:0,i,r):("snip"==o||"default"==o&&"snip"==s||"fold"==o||"default"==o&&"fold"==s)&&t.lineTo(i,r):t.lineTo(i,0)},R.prototype.paintRight=function(t,e,n,i,l,s,o,r,a){"square"==o||"default"==o&&"square"==s||!a?t.lineTo(i,l):t.lineTo(i,l-r)},R.prototype.paintLeft=function(t,e,n,i,l,s,o,r,a){"square"==o||"default"==o&&"square"==s||!a?t.lineTo(0,0):t.lineTo(0,r)},R.prototype.paintSE=function(t,e,n,i,l,s,o,r,a){a?"rounded"==o||"default"==o&&"rounded"==s||"invRound"==o||"default"==o&&"invRound"==s?t.arcTo(r,r,0,0,"rounded"==o||"default"==o&&"rounded"==s?1:0,i-r,l):("snip"==o||"default"==o&&"snip"==s||"fold"==o||"default"==o&&"fold"==s)&&t.lineTo(i-r,l):t.lineTo(i,l)},R.prototype.paintBottom=function(t,e,n,i,l,s,o,r,a){"square"==o||"default"==o&&"square"==s||!a?t.lineTo(0,l):t.lineTo(r,l)},R.prototype.paintSW=function(t,e,n,i,l,s,o,r,a){a?"rounded"==o||"default"==o&&"rounded"==s||"invRound"==o||"default"==o&&"invRound"==s?t.arcTo(r,r,0,0,"rounded"==o||"default"==o&&"rounded"==s?1:0,0,l-r):("snip"==o||"default"==o&&"snip"==s||"fold"==o||"default"==o&&"fold"==s)&&t.lineTo(0,l-r):t.lineTo(0,l)},R.prototype.paintNWInner=function(t,e,n,i,l,s,o,r,a){"rounded"==o||"default"==o&&"rounded"==s?t.arcTo(r-.5*a,r-.5*a,0,0,0,a,.5*a+r):"invRound"==o||"default"==o&&"invRound"==s?t.arcTo(r+a,r+a,0,0,1,a,a+r):"snip"==o||"default"==o&&"snip"==s?t.lineTo(a,.5*a+r):("fold"==o||"default"==o&&"fold"==s)&&(t.lineTo(a+r,a+r),t.lineTo(a,a+r))},R.prototype.paintTopInner=function(t,e,n,i,l,s,o,r,a,h,u){h||u?!h&&u?t.lineTo(0,a):h&&!u?t.lineTo(a,0):h?"square"==o||"default"==o&&"square"==s?t.lineTo(a,a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.lineTo(r+.5*a,a):t.lineTo(r+a,a):t.lineTo(0,a):t.lineTo(0,0)},R.prototype.paintNEInner=function(t,e,n,i,l,s,o,r,a){"rounded"==o||"default"==o&&"rounded"==s?t.arcTo(r-.5*a,r-.5*a,0,0,0,i-r-.5*a,a):"invRound"==o||"default"==o&&"invRound"==s?t.arcTo(r+a,r+a,0,0,1,i-r-a,a):"snip"==o||"default"==o&&"snip"==s?t.lineTo(i-r-.5*a,a):("fold"==o||"default"==o&&"fold"==s)&&(t.lineTo(i-r-a,r+a),t.lineTo(i-r-a,a))},R.prototype.paintRightInner=function(t,e,n,i,l,s,o,r,a,h,u){h||u?!h&&u?t.lineTo(i-a,0):h&&!u?t.lineTo(i,a):h?"square"==o||"default"==o&&"square"==s?t.lineTo(i-a,a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.lineTo(i-a,r+.5*a):t.lineTo(i-a,r+a):t.lineTo(i-a,0):t.lineTo(i,0)},R.prototype.paintLeftInner=function(t,e,n,i,l,s,o,r,a,h,u){h||u?!h&&u?t.lineTo(a,l):h&&!u?t.lineTo(0,l-a):h?"square"==o||"default"==o&&"square"==s?t.lineTo(a,l-a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.lineTo(a,l-r-.5*a):t.lineTo(a,l-r-a):t.lineTo(a,l):t.lineTo(0,l)},R.prototype.paintSEInner=function(t,e,n,i,l,s,o,r,a){"rounded"==o||"default"==o&&"rounded"==s?t.arcTo(r-.5*a,r-.5*a,0,0,0,i-a,l-r-.5*a):"invRound"==o||"default"==o&&"invRound"==s?t.arcTo(r+a,r+a,0,0,1,i-a,l-r-a):"snip"==o||"default"==o&&"snip"==s?t.lineTo(i-a,l-r-.5*a):("fold"==o||"default"==o&&"fold"==s)&&(t.lineTo(i-r-a,l-r-a),t.lineTo(i-a,l-r-a))},R.prototype.paintBottomInner=function(t,e,n,i,l,s,o,r,a,h,u){h||u?!h&&u?t.lineTo(i,l-a):h&&!u?t.lineTo(i-a,l):"square"==o||"default"==o&&"square"==s||!h?t.lineTo(i-a,l-a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.lineTo(i-r-.5*a,l-a):t.lineTo(i-r-a,l-a):t.lineTo(i,l)},R.prototype.paintSWInner=function(t,e,n,i,l,s,o,r,a,h){h?"square"==o||"default"==o&&"square"==s?t.lineTo(a,l-a):"rounded"==o||"default"==o&&"rounded"==s?t.arcTo(r-.5*a,r-.5*a,0,0,0,r+.5*a,l-a):"invRound"==o||"default"==o&&"invRound"==s?t.arcTo(r+a,r+a,0,0,1,r+a,l-a):"snip"==o||"default"==o&&"snip"==s?t.lineTo(r+.5*a,l-a):("fold"==o||"default"==o&&"fold"==s)&&(t.lineTo(a+r,l-r-a),t.lineTo(a+r,l-a)):t.lineTo(a,l)},R.prototype.moveSWInner=function(t,e,n,i,l,s,o,r,a,h){h?"square"==o||"default"==o&&"square"==s?t.moveTo(a,l-a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.moveTo(a,l-r-.5*a):("invRound"==o||"default"==o&&"invRound"==s||"fold"==o||"default"==o&&"fold"==s)&&t.moveTo(a,l-r-a):t.moveTo(0,l-a)},R.prototype.lineSWInner=function(t,e,n,i,l,s,o,r,a,h){h?"square"==o||"default"==o&&"square"==s?t.lineTo(a,l-a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.lineTo(a,l-r-.5*a):("invRound"==o||"default"==o&&"invRound"==s||"fold"==o||"default"==o&&"fold"==s)&&t.lineTo(a,l-r-a):t.lineTo(0,l-a)},R.prototype.moveSEInner=function(t,e,n,i,l,s,o,r,a,h){h?"square"==o||"default"==o&&"square"==s?t.moveTo(i-a,l-a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.moveTo(i-a,l-r-.5*a):("invRound"==o||"default"==o&&"invRound"==s||"fold"==o||"default"==o&&"fold"==s)&&t.moveTo(i-a,l-r-a):t.moveTo(i-a,l)},R.prototype.lineSEInner=function(t,e,n,i,l,s,o,r,a,h){h?"square"==o||"default"==o&&"square"==s?t.lineTo(i-a,l-a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.lineTo(i-a,l-r-.5*a):("invRound"==o||"default"==o&&"invRound"==s||"fold"==o||"default"==o&&"fold"==s)&&t.lineTo(i-a,l-r-a):t.lineTo(i-a,l)},R.prototype.moveNEInner=function(t,e,n,i,l,s,o,r,a,h){h?"square"==o||"default"==o&&"square"==s||h?t.moveTo(i-a,a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.moveTo(i-a,r+.5*a):("invRound"==o||"default"==o&&"invRound"==s||"fold"==o||"default"==o&&"fold"==s)&&t.moveTo(i-a,r+a):t.moveTo(i,a)},R.prototype.lineNEInner=function(t,e,n,i,l,s,o,r,a,h){h?"square"==o||"default"==o&&"square"==s||h?t.lineTo(i-a,a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.lineTo(i-a,r+.5*a):("invRound"==o||"default"==o&&"invRound"==s||"fold"==o||"default"==o&&"fold"==s)&&t.lineTo(i-a,r+a):t.lineTo(i,a)},R.prototype.moveNWInner=function(t,e,n,i,l,s,o,r,a,h,u){h||u?!h&&u?t.moveTo(a,0):h&&!u?t.moveTo(0,a):"square"==o||"default"==o&&"square"==s?t.moveTo(a,a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.moveTo(a,r+.5*a):("invRound"==o||"default"==o&&"invRound"==s||"fold"==o||"default"==o&&"fold"==s)&&t.moveTo(a,r+a):t.moveTo(0,0)},R.prototype.lineNWInner=function(t,e,n,i,l,s,o,r,a,h,u){h||u?!h&&u?t.lineTo(a,0):h&&!u?t.lineTo(0,a):"square"==o||"default"==o&&"square"==s?t.lineTo(a,a):"rounded"==o||"default"==o&&"rounded"==s||"snip"==o||"default"==o&&"snip"==s?t.lineTo(a,r+.5*a):("invRound"==o||"default"==o&&"invRound"==s||"fold"==o||"default"==o&&"fold"==s)&&t.lineTo(a,r+a):t.lineTo(0,0)},R.prototype.paintFolds=function(t,e,n,i,l,s,o,r,a,h,u,d,p,m,c){"fold"!=s&&"fold"!=o&&"fold"!=r&&"fold"!=a&&"fold"!=h||(("fold"==o||"default"==o&&"fold"==s)&&d&&c&&(t.moveTo(0,u),t.lineTo(u,u),t.lineTo(u,0)),("fold"==r||"default"==r&&"fold"==s)&&d&&p&&(t.moveTo(i-u,0),t.lineTo(i-u,u),t.lineTo(i,u)),("fold"==a||"default"==a&&"fold"==s)&&m&&p&&(t.moveTo(i-u,l),t.lineTo(i-u,l-u),t.lineTo(i,l-u)),("fold"==h||"default"==h&&"fold"==s)&&m&&c&&(t.moveTo(0,l-u),t.lineTo(u,l-u),t.lineTo(u,l)))},mxCellRenderer.registerShape(R.prototype.cst.RECT2,R),R.prototype.constraints=null,mxUtils.extend(D,mxConnector),D.prototype.origPaintEdgeShape=D.prototype.paintEdgeShape,D.prototype.paintEdgeShape=function(t,e,n){for(var i=[],l=0;l<e.length;l++)i.push(mxUtils.clone(e[l]));var s,o=t.state.dashed,r=t.state.fixDash;D.prototype.origPaintEdgeShape.apply(this,[t,i,n]),3<=t.state.strokeWidth&&null!=(s=mxUtils.getValue(this.style,"fillColor",null))&&(t.setStrokeColor(s),t.setStrokeWidth(t.state.strokeWidth-2),t.setDashed(o,r),D.prototype.origPaintEdgeShape.apply(this,[t,e,n]))},mxCellRenderer.registerShape("filledEdge",D),"undefined"!=typeof StyleFormatPanel&&(et=StyleFormatPanel.prototype.getCustomColors,StyleFormatPanel.prototype.getCustomColors=function(){var t=this.editorUi.getSelectionState(),e=et.apply(this,arguments);return"umlFrame"==t.style.shape&&e.push({title:mxResources.get("laneColor"),key:"swimlaneFillColor",defaultValue:"default"}),e}),mxMarker.addMarker("dash",function(t,e,n,i,l,s,o,r,a,h){var u=l*(o+a+1),d=s*(o+a+1);return function(){t.begin(),t.moveTo(i.x-u/2-d/2,i.y-d/2+u/2),t.lineTo(i.x+d/2-3*u/2,i.y-3*d/2-u/2),t.stroke()}}),mxMarker.addMarker("box",function(t,e,n,i,l,s,o,r,a,h){var u=l*(o+a+1),d=s*(o+a+1),p=i.x+u/2,m=i.y+d/2;return i.x-=u,i.y-=d,function(){t.begin(),t.moveTo(p-u/2-d/2,m-d/2+u/2),t.lineTo(p-u/2+d/2,m-d/2-u/2),t.lineTo(p+d/2-3*u/2,m-3*d/2-u/2),t.lineTo(p-d/2-3*u/2,m-3*d/2+u/2),t.close(),h?t.fillAndStroke():t.stroke()}}),mxMarker.addMarker("cross",function(t,e,n,i,l,s,o,r,a,h){var u=l*(o+a+1),d=s*(o+a+1);return function(){t.begin(),t.moveTo(i.x-u/2-d/2,i.y-d/2+u/2),t.lineTo(i.x+d/2-3*u/2,i.y-3*d/2-u/2),t.moveTo(i.x-u/2+d/2,i.y-d/2-u/2),t.lineTo(i.x-d/2-3*u/2,i.y-3*d/2+u/2),t.stroke()}}),mxMarker.addMarker("circle",Ut),mxMarker.addMarker("circlePlus",function(t,e,n,i,l,s,o,r,a,h){var u=i.clone(),d=Ut.apply(this,arguments),p=l*(o+2*a),m=s*(o+2*a);return function(){d.apply(this,arguments),t.begin(),t.moveTo(u.x-l*a,u.y-s*a),t.lineTo(u.x-2*p+l*a,u.y-2*m+s*a),t.moveTo(u.x-p-m+s*a,u.y-m+p-l*a),t.lineTo(u.x+m-p-s*a,u.y-m-p+l*a),t.stroke()}}),mxMarker.addMarker("halfCircle",function(t,e,n,i,l,s,o,r,a,h){var u=l*(o+a+1),d=s*(o+a+1),p=i.clone();return i.x-=u,i.y-=d,function(){t.begin(),t.moveTo(p.x-d,p.y+u),t.quadTo(i.x-d,i.y+u,i.x,i.y),t.quadTo(i.x+d,i.y-u,p.x+d,p.y-u),t.stroke()}}),mxMarker.addMarker("async",function(t,e,n,i,l,s,o,r,a,h){var u=l*a*1.118,d=s*a*1.118,p=(l*=o+a,s*=o+a,i.clone());p.x-=u,p.y-=d;return i.x+=-l-u,i.y+=-s-d,function(){t.begin(),t.moveTo(p.x,p.y),r?t.lineTo(p.x-l-s/2,p.y-s+l/2):t.lineTo(p.x+s/2-l,p.y-s-l/2),t.lineTo(p.x-l,p.y-s),t.close(),h?t.fillAndStroke():t.stroke()}}),mxMarker.addMarker("openAsync",(f=null!=(f=2)?f:2,function(t,e,n,i,l,s,o,r,a,h){l*=o+a,s*=o+a;var u=i.clone();return function(){t.begin(),t.moveTo(u.x,u.y),r?t.lineTo(u.x-l-s/f,u.y-s+l/f):t.lineTo(u.x+s/f-l,u.y-s-l/f),t.stroke()}})),void 0!==mxVertexHandler?(nt={link:function(t){return[jt(t,!0,10),jt(t,!1,10)]},flexArrow:function(r){var a=r.view.graph.gridSize/r.view.scale,t=[];return mxUtils.getValue(r.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(t.push(Yt(r,["width",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!0,function(t,e,n,i,l){var s=(r.shape.getEdgeWidth()-r.shape.strokewidth)*r.view.scale,o=3*mxUtils.getNumber(r.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5)*r.view.scale;return new mxPoint(i.x+e*(o+r.shape.strokewidth*r.view.scale)+n*s/2,i.y+n*(o+r.shape.strokewidth*r.view.scale)-e*s/2)},function(t,e,n,i,l,s,o){l=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,s.x,s.y)),n=mxUtils.ptLineDist(i.x,i.y,i.x+n,i.y-e,s.x,s.y);r.style[mxConstants.STYLE_STARTSIZE]=Math.round(100*(n-r.shape.strokewidth)/3)/100/r.view.scale,r.style.width=Math.round(2*l)/r.view.scale,(mxEvent.isShiftDown(o.getEvent())||mxEvent.isControlDown(o.getEvent()))&&(r.style[mxConstants.STYLE_ENDSIZE]=r.style[mxConstants.STYLE_STARTSIZE]),mxEvent.isAltDown(o.getEvent())||Math.abs(parseFloat(r.style[mxConstants.STYLE_STARTSIZE])-parseFloat(r.style[mxConstants.STYLE_ENDSIZE]))<a/6&&(r.style[mxConstants.STYLE_STARTSIZE]=r.style[mxConstants.STYLE_ENDSIZE])})),t.push(Yt(r,["startWidth","endWidth",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!0,function(t,e,n,i,l){var s=(r.shape.getStartArrowWidth()-r.shape.strokewidth)*r.view.scale,o=3*mxUtils.getNumber(r.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5)*r.view.scale;return new mxPoint(i.x+e*(o+r.shape.strokewidth*r.view.scale)+n*s/2,i.y+n*(o+r.shape.strokewidth*r.view.scale)-e*s/2)},function(t,e,n,i,l,s,o){l=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,s.x,s.y)),n=mxUtils.ptLineDist(i.x,i.y,i.x+n,i.y-e,s.x,s.y);r.style[mxConstants.STYLE_STARTSIZE]=Math.round(100*(n-r.shape.strokewidth)/3)/100/r.view.scale,r.style.startWidth=Math.max(0,Math.round(2*l)-r.shape.getEdgeWidth())/r.view.scale,(mxEvent.isShiftDown(o.getEvent())||mxEvent.isControlDown(o.getEvent()))&&(r.style[mxConstants.STYLE_ENDSIZE]=r.style[mxConstants.STYLE_STARTSIZE],r.style.endWidth=r.style.startWidth),mxEvent.isAltDown(o.getEvent())||(Math.abs(parseFloat(r.style[mxConstants.STYLE_STARTSIZE])-parseFloat(r.style[mxConstants.STYLE_ENDSIZE]))<a/6&&(r.style[mxConstants.STYLE_STARTSIZE]=r.style[mxConstants.STYLE_ENDSIZE]),Math.abs(parseFloat(r.style.startWidth)-parseFloat(r.style.endWidth))<a&&(r.style.startWidth=r.style.endWidth))}))),mxUtils.getValue(r.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(t.push(Yt(r,["width",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!1,function(t,e,n,i,l){var s=(r.shape.getEdgeWidth()-r.shape.strokewidth)*r.view.scale,o=3*mxUtils.getNumber(r.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5)*r.view.scale;return new mxPoint(i.x+e*(o+r.shape.strokewidth*r.view.scale)-n*s/2,i.y+n*(o+r.shape.strokewidth*r.view.scale)+e*s/2)},function(t,e,n,i,l,s,o){l=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,s.x,s.y)),n=mxUtils.ptLineDist(i.x,i.y,i.x+n,i.y-e,s.x,s.y);r.style[mxConstants.STYLE_ENDSIZE]=Math.round(100*(n-r.shape.strokewidth)/3)/100/r.view.scale,r.style.width=Math.round(2*l)/r.view.scale,(mxEvent.isShiftDown(o.getEvent())||mxEvent.isControlDown(o.getEvent()))&&(r.style[mxConstants.STYLE_STARTSIZE]=r.style[mxConstants.STYLE_ENDSIZE]),mxEvent.isAltDown(o.getEvent())||Math.abs(parseFloat(r.style[mxConstants.STYLE_ENDSIZE])-parseFloat(r.style[mxConstants.STYLE_STARTSIZE]))<a/6&&(r.style[mxConstants.STYLE_ENDSIZE]=r.style[mxConstants.STYLE_STARTSIZE])})),t.push(Yt(r,["startWidth","endWidth",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!1,function(t,e,n,i,l){var s=(r.shape.getEndArrowWidth()-r.shape.strokewidth)*r.view.scale,o=3*mxUtils.getNumber(r.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5)*r.view.scale;return new mxPoint(i.x+e*(o+r.shape.strokewidth*r.view.scale)-n*s/2,i.y+n*(o+r.shape.strokewidth*r.view.scale)+e*s/2)},function(t,e,n,i,l,s,o){l=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,s.x,s.y)),n=mxUtils.ptLineDist(i.x,i.y,i.x+n,i.y-e,s.x,s.y);r.style[mxConstants.STYLE_ENDSIZE]=Math.round(100*(n-r.shape.strokewidth)/3)/100/r.view.scale,r.style.endWidth=Math.max(0,Math.round(2*l)-r.shape.getEdgeWidth())/r.view.scale,(mxEvent.isShiftDown(o.getEvent())||mxEvent.isControlDown(o.getEvent()))&&(r.style[mxConstants.STYLE_STARTSIZE]=r.style[mxConstants.STYLE_ENDSIZE],r.style.startWidth=r.style.endWidth),mxEvent.isAltDown(o.getEvent())||(Math.abs(parseFloat(r.style[mxConstants.STYLE_ENDSIZE])-parseFloat(r.style[mxConstants.STYLE_STARTSIZE]))<a/6&&(r.style[mxConstants.STYLE_ENDSIZE]=r.style[mxConstants.STYLE_STARTSIZE]),Math.abs(parseFloat(r.style.endWidth)-parseFloat(r.style.startWidth))<a&&(r.style.endWidth=r.style.startWidth))}))),t},swimlane:function(o){var t,e=[];return mxUtils.getValue(o.style,mxConstants.STYLE_ROUNDED)&&(t=parseFloat(mxUtils.getValue(o.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE)),e.push(H(o,t/2))),e.push(O(o,[mxConstants.STYLE_STARTSIZE],function(t){var e=parseFloat(mxUtils.getValue(o.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE));return 1==mxUtils.getValue(o.style,mxConstants.STYLE_HORIZONTAL,1)?new mxPoint(t.getCenterX(),t.y+Math.max(0,Math.min(t.height,e))):new mxPoint(t.x+Math.max(0,Math.min(t.width,e)),t.getCenterY())},function(t,e){o.style[mxConstants.STYLE_STARTSIZE]=1==mxUtils.getValue(this.state.style,mxConstants.STYLE_HORIZONTAL,1)?Math.round(Math.max(0,Math.min(t.height,e.y-t.y))):Math.round(Math.max(0,Math.min(t.width,e.x-t.x)))},!1,null,function(t){var e=o.view.graph;if(!mxEvent.isShiftDown(t.getEvent())&&!mxEvent.isControlDown(t.getEvent())&&(e.isTableRow(o.cell)||e.isTableCell(o.cell))){for(var n=e.getSwimlaneDirection(o.style),t=e.model.getParent(o.cell),i=e.model.getChildCells(t,!0),l=[],s=0;s<i.length;s++)i[s]!=o.cell&&e.isSwimlane(i[s])&&e.getSwimlaneDirection(e.getCurrentCellStyle(i[s]))==n&&l.push(i[s]);e.setCellStyles(mxConstants.STYLE_STARTSIZE,o.style[mxConstants.STYLE_STARTSIZE],l)}})),e},label:Gt(),ext:Gt(),rectangle:Gt(),triangle:Gt(),rhombus:Gt(),umlLifeline:function(t){return[O(t,["size"],function(t){var e=Math.max(0,Math.min(t.height,parseFloat(mxUtils.getValue(this.state.style,"size",v.prototype.size))));return new mxPoint(t.getCenterX(),t.y+e)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))},!1)]},umlFrame:function(t){return[O(t,["width","height"],function(t){var e=Math.max(E.prototype.corner,Math.min(t.width,mxUtils.getValue(this.state.style,"width",E.prototype.width))),n=Math.max(1.5*E.prototype.corner,Math.min(t.height,mxUtils.getValue(this.state.style,"height",E.prototype.height)));return new mxPoint(t.x+e,t.y+n)},function(t,e){this.state.style.width=Math.round(Math.max(E.prototype.corner,Math.min(t.width,e.x-t.x))),this.state.style.height=Math.round(Math.max(1.5*E.prototype.corner,Math.min(t.height,e.y-t.y)))},!1)]},process:function(t){var e=[O(t,["size"],function(t){var e="0"!=mxUtils.getValue(this.state.style,"fixedSize","0"),n=parseFloat(mxUtils.getValue(this.state.style,"size",g.prototype.size));return new mxPoint(e?t.x+n:t.x+t.width*n,t.y+t.height/4)},function(t,e){e="0"!=mxUtils.getValue(this.state.style,"fixedSize","0")?Math.max(0,Math.min(.5*t.width,e.x-t.x)):Math.max(0,Math.min(.5,(e.x-t.x)/t.width));this.state.style.size=e},!1)];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(H(t)),e},cross:function(t){return[O(t,["size"],function(t){var e=Math.min(t.width,t.height),e=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"size",Ot.prototype.size)))*e/2;return new mxPoint(t.getCenterX()-e,t.getCenterY()-e)},function(t,e){var n=Math.min(t.width,t.height);this.state.style.size=Math.max(0,Math.min(1,Math.min(Math.max(0,t.getCenterY()-e.y)/n*2,Math.max(0,t.getCenterX()-e.x)/n*2)))})]},note:function(t){return[O(t,["size"],function(t){var e=Math.max(0,Math.min(t.width,Math.min(t.height,parseFloat(mxUtils.getValue(this.state.style,"size",i.prototype.size)))));return new mxPoint(t.x+t.width-e,t.y+e)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(t.width,t.x+t.width-e.x),Math.min(t.height,e.y-t.y))))})]},note2:function(t){return[O(t,["size"],function(t){var e=Math.max(0,Math.min(t.width,Math.min(t.height,parseFloat(mxUtils.getValue(this.state.style,"size",z.prototype.size)))));return new mxPoint(t.x+t.width-e,t.y+e)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(t.width,t.x+t.width-e.x),Math.min(t.height,e.y-t.y))))})]},manualInput:function(t){var e=[O(t,["size"],function(t){var e=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"size",b.prototype.size)));return new mxPoint(t.x+t.width/4,t.y+3*e/4)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(t.height,4*(e.y-t.y)/3)))},!1)];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(H(t)),e},dataStorage:function(t){return[O(t,["size"],function(t){var e="0"!=mxUtils.getValue(this.state.style,"fixedSize","0"),n=parseFloat(mxUtils.getValue(this.state.style,"size",e?A.prototype.fixedSize:A.prototype.size));return new mxPoint(t.x+t.width-n*(e?1:t.width),t.getCenterY())},function(t,e){e="0"!=mxUtils.getValue(this.state.style,"fixedSize","0")?Math.max(0,Math.min(t.width,t.x+t.width-e.x)):Math.max(0,Math.min(1,(t.x+t.width-e.x)/t.width));this.state.style.size=e},!1)]},callout:function(t){var e=[O(t,["size","position"],function(t){var e=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"size",x.prototype.size))),n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",x.prototype.position)));Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"base",x.prototype.base)));return new mxPoint(t.x+n*t.width,t.y+t.height-e)},function(t,e){Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"base",x.prototype.base)));this.state.style.size=Math.round(Math.max(0,Math.min(t.height,t.y+t.height-e.y))),this.state.style.position=Math.round(100*Math.max(0,Math.min(1,(e.x-t.x)/t.width)))/100},!1),O(t,["position2"],function(t){var e=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position2",x.prototype.position2)));return new mxPoint(t.x+e*t.width,t.y+t.height)},function(t,e){this.state.style.position2=Math.round(100*Math.max(0,Math.min(1,(e.x-t.x)/t.width)))/100},!1),O(t,["base"],function(t){var e=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"size",x.prototype.size))),n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",x.prototype.position))),i=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"base",x.prototype.base)));return new mxPoint(t.x+Math.min(t.width,n*t.width+i),t.y+t.height-e)},function(t,e){var n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",x.prototype.position)));this.state.style.base=Math.round(Math.max(0,Math.min(t.width,e.x-t.x-n*t.width)))},!1)];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(H(t)),e},internalStorage:function(t){var e=[O(t,["dx","dy"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"dx",T.prototype.dx))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"dy",T.prototype.dy)));return new mxPoint(t.x+e,t.y+n)},function(t,e){this.state.style.dx=Math.round(Math.max(0,Math.min(t.width,e.x-t.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))},!1)];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(H(t)),e},module:function(t){return[O(t,["jettyWidth","jettyHeight"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"jettyWidth",S.prototype.jettyWidth))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"jettyHeight",S.prototype.jettyHeight)));return new mxPoint(t.x+e/2,t.y+2*n)},function(t,e){this.state.style.jettyWidth=Math.round(2*Math.max(0,Math.min(t.width,e.x-t.x))),this.state.style.jettyHeight=Math.round(Math.max(0,Math.min(t.height,e.y-t.y))/2)})]},corner:function(t){return[O(t,["dx","dy"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"dx",M.prototype.dx))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"dy",M.prototype.dy)));return new mxPoint(t.x+e,t.y+n)},function(t,e){this.state.style.dx=Math.round(Math.max(0,Math.min(t.width,e.x-t.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))},!1)]},tee:function(t){return[O(t,["dx","dy"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"dx",L.prototype.dx))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"dy",L.prototype.dy)));return new mxPoint(t.x+(t.width+e)/2,t.y+n)},function(t,e){this.state.style.dx=Math.round(Math.max(0,2*Math.min(t.width/2,e.x-t.x-t.width/2))),this.state.style.dy=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))},!1)]},singleArrow:zt(1),doubleArrow:zt(.5),"mxgraph.arrows2.wedgeArrow":Bt(20,20),"mxgraph.arrows2.wedgeArrowDashed":Bt(20,20),"mxgraph.arrows2.wedgeArrowDashed2":Bt(20,20),folder:function(t){return[O(t,["tabWidth","tabHeight"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"tabWidth",o.prototype.tabWidth))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"tabHeight",o.prototype.tabHeight)));return mxUtils.getValue(this.state.style,"tabPosition",o.prototype.tabPosition)==mxConstants.ALIGN_RIGHT&&(e=t.width-e),new mxPoint(t.x+e,t.y+n)},function(t,e){var n=Math.max(0,Math.min(t.width,e.x-t.x));mxUtils.getValue(this.state.style,"tabPosition",o.prototype.tabPosition)==mxConstants.ALIGN_RIGHT&&(n=t.width-n),this.state.style.tabWidth=Math.round(n),this.state.style.tabHeight=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))},!1)]},document:function(t){return[O(t,["size"],function(t){var e=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",d.prototype.size))));return new mxPoint(t.x+3*t.width/4,t.y+(1-e)*t.height)},function(t,e){this.state.style.size=Math.max(0,Math.min(1,(t.y+t.height-e.y)/t.height))},!1)]},tape:function(t){return[O(t,["size"],function(t){var e=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",u.prototype.size))));return new mxPoint(t.getCenterX(),t.y+e*t.height/2)},function(t,e){this.state.style.size=Math.max(0,Math.min(1,(e.y-t.y)/t.height*2))},!1)]},isoCube2:function(t){return[O(t,["isoAngle"],function(t){var e=Math.max(.01,Math.min(94,parseFloat(mxUtils.getValue(this.state.style,"isoAngle",l.isoAngle))))*Math.PI/200,e=Math.min(t.width*Math.tan(e),.5*t.height);return new mxPoint(t.x,t.y+e)},function(t,e){this.state.style.isoAngle=Math.max(0,50*(e.y-t.y)/t.height)},!0)]},cylinder2:Ft(B.prototype.size),cylinder3:Ft(s.prototype.size),offPageConnector:function(t){return[O(t,["size"],function(t){var e=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",N.prototype.size))));return new mxPoint(t.getCenterX(),t.y+(1-e)*t.height)},function(t,e){this.state.style.size=Math.max(0,Math.min(1,(t.y+t.height-e.y)/t.height))},!1)]},"mxgraph.basic.rect":function(t){var e=[Graph.createHandle(t,["size"],function(t){var e=Math.max(0,Math.min(t.width/2,t.height/2,parseFloat(mxUtils.getValue(this.state.style,"size",this.size))));return new mxPoint(t.x+e,t.y+e)},function(t,e){this.state.style.size=Math.round(100*Math.max(0,Math.min(t.height/2,t.width/2,e.x-t.x)))/100})],t=Graph.createHandle(t,["indent"],function(t){var e=Math.max(0,Math.min(100,parseFloat(mxUtils.getValue(this.state.style,"indent",this.dx2))));return new mxPoint(t.x+.75*t.width,t.y+e*t.height/200)},function(t,e){this.state.style.indent=Math.round(100*Math.max(0,Math.min(100,200*(e.y-t.y)/t.height)))/100});return e.push(t),e},step:kt(y.prototype.size,!0,null,!0,y.prototype.fixedSize),hexagon:kt(C.prototype.size,!0,.5,!0,C.prototype.fixedSize),curlyBracket:kt(X.prototype.size,!1),display:kt(Ht.prototype.size,!1),cube:Vt(1,e.prototype.size,!1),card:Vt(.5,h.prototype.size,!0),loopLimit:Vt(.5,P.prototype.size,!0),trapezoid:_t(.5,m.prototype.size,m.prototype.fixedSize),parallelogram:_t(1,p.prototype.size,p.prototype.fixedSize)},Graph.createHandle=O,Graph.handleFactory=nt,it=mxVertexHandler.prototype.createCustomHandles,mxVertexHandler.prototype.createCustomHandles=function(){var t,e=it.apply(this,arguments);return e=this.graph.isCellRotatable(this.state.cell)&&(t=this.state.style.shape,null==mxCellRenderer.defaultShapes[t]&&null==mxStencilRegistry.getStencil(t)?t=mxConstants.SHAPE_RECTANGLE:this.state.view.graph.isSwimlane(this.state.cell)&&(t=mxConstants.SHAPE_SWIMLANE),null!=(t=null==(t=nt[t])&&null!=this.state.shape&&this.state.shape.isRoundable()?nt[mxConstants.SHAPE_RECTANGLE]:t))&&null!=(t=t(this.state))?null==e?t:e.concat(t):e},mxEdgeHandler.prototype.createCustomHandles=function(){var t=this.state.style.shape,t=(null==mxCellRenderer.defaultShapes[t]&&null==mxStencilRegistry.getStencil(t)&&(t=mxConstants.SHAPE_CONNECTOR),nt[t]);return null!=t?t(this.state):null}):(Graph.createHandle=function(){},Graph.handleFactory={});var Wt=new mxPoint(1,0),Xt=new mxPoint(1,0),Zt=mxUtils.toRadians(-30),Kt=Math.cos(Zt),Zt=Math.sin(Zt),Wt=mxUtils.getRotatedPoint(Wt,Kt,Zt),Kt=mxUtils.toRadians(-150),Zt=Math.cos(Kt),Kt=Math.sin(Kt),Xt=mxUtils.getRotatedPoint(Xt,Zt,Kt),qt=(mxEdgeStyle.IsometricConnector=function(t,e,n,i,l){var s,o=t.view,i=null!=i&&0<i.length?i[0]:null,r=t.absolutePoints,a=r[0],r=r[r.length-1],h=(null!=i&&(i=o.transformControlPoint(t,i)),null==a&&null!=e&&(a=new mxPoint(e.getCenterX(),e.getCenterY())),null==r&&null!=n&&(r=new mxPoint(n.getCenterX(),n.getCenterY())),Wt.x),u=Wt.y,d=Xt.x,p=Xt.y,m="horizontal"==mxUtils.getValue(t.style,"elbow","horizontal");function c(t,e,n){var t=t-s.x,e=e-s.y,i=(p*t-d*e)/(h*p-u*d),t=(u*t-h*e)/(u*d-h*p);s=m?(n&&(s=new mxPoint(s.x+h*i,s.y+u*i),l.push(s)),new mxPoint(s.x+d*t,s.y+p*t)):(n&&(s=new mxPoint(s.x+d*t,s.y+p*t),l.push(s)),new mxPoint(s.x+h*i,s.y+u*i)),l.push(s)}null!=r&&null!=a&&(s=a,c((i=null==i?new mxPoint(a.x+(r.x-a.x)/2,a.y+(r.y-a.y)/2):i).x,i.y,!0),c(r.x,r.y,!1))},mxStyleRegistry.putValue("isometricEdgeStyle",mxEdgeStyle.IsometricConnector),Graph.prototype.createEdgeHandler);Graph.prototype.createEdgeHandler=function(t,e){return e==mxEdgeStyle.IsometricConnector?((e=new mxElbowEdgeHandler(t)).snapToTerminals=!1,e):qt.apply(this,arguments)},n.prototype.constraints=[],V.prototype.getConstraints=function(t,e,n){var i=[],l=Math.tan(mxUtils.toRadians(30)),s=(.5-l)/2,l=Math.min(e,n/(.5+l)),e=(e-l)/2,n=(n-l)/2;return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n+.25*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+.5*l,n+l*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+l,n+.25*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+l,n+.75*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+.5*l,n+(1-s)*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n+.75*l)),i},l.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(.01,Math.min(94,parseFloat(mxUtils.getValue(this.style,"isoAngle",this.isoAngle))))*Math.PI/200,l=Math.min(e*Math.tan(l),.5*n);return i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,l)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n-l)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l)),i},x.prototype.getConstraints=function(t,e,n){var i=[],l=(mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE),Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),s=(Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position",this.position)))),e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position2",this.position2)))));Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"base",this.base))));return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.25,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.75,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n-l))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,s,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n-l))),2*l<=e&&i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i},mxRectangleShape.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!0),new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(0,1),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0)],mxEllipse.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(0,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(1,.5))],Nt.prototype.constraints=mxRectangleShape.prototype.constraints,mxImageShape.prototype.constraints=mxRectangleShape.prototype.constraints,mxSwimlane.prototype.constraints=mxRectangleShape.prototype.constraints,tt.prototype.constraints=mxRectangleShape.prototype.constraints,mxLabel.prototype.constraints=mxRectangleShape.prototype.constraints,i.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size)))));return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-.5*l,.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n+l))),i.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),2*l<=e&&i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i},h.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size)))));return i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n+l))),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),2*l<=e&&i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i},e.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size)))));return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-.5*l,.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n+l))),i.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,n-.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n-l))),i},s.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size))));return i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,l)),i.push(new mxConnectionConstraint(new mxPoint(1,1),!1,null,0,-l)),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1,null,0,-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l+.5*(.5*n-l))),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,l+.5*(.5*n-l))),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,n-l-.5*(.5*n-l))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l-.5*(.5*n-l))),i.push(new mxConnectionConstraint(new mxPoint(.145,0),!1,null,0,.29*l)),i.push(new mxConnectionConstraint(new mxPoint(.855,0),!1,null,0,.29*l)),i.push(new mxConnectionConstraint(new mxPoint(.855,1),!1,null,0,.29*-l)),i.push(new mxConnectionConstraint(new mxPoint(.145,1),!1,null,0,.29*-l)),i},o.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"tabWidth",this.tabWidth)))),s=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"tabHeight",this.tabHeight))));return"left"==mxUtils.getValue(this.style,"tabPosition",this.tabPosition)?(i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),s))):(i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-.5*l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),s))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.25*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.75*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.25*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.75*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n)),i.push(new mxConnectionConstraint(new mxPoint(.25,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.75,1),!1)),i},T.prototype.constraints=mxRectangleShape.prototype.constraints,A.prototype.constraints=mxRectangleShape.prototype.constraints,Tt.prototype.constraints=mxEllipse.prototype.constraints,Mt.prototype.constraints=mxEllipse.prototype.constraints,Lt.prototype.constraints=mxEllipse.prototype.constraints,Rt.prototype.constraints=mxEllipse.prototype.constraints,b.prototype.constraints=mxRectangleShape.prototype.constraints,Dt.prototype.constraints=mxRectangleShape.prototype.constraints,Ht.prototype.getConstraints=function(t,e,n){var i=[],l=Math.min(e,n/2),s=Math.min(e-l,Math.max(0,parseFloat(mxUtils.getValue(this.style,"size",this.size)))*e);return i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1,null)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,s,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(s+e-l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1,null)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(s+e-l),n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,s,n)),i},S.prototype.getConstraints=function(t,e,n){var i=parseFloat(mxUtils.getValue(t,"jettyWidth",S.prototype.jettyWidth))/2,t=parseFloat(mxUtils.getValue(t,"jettyHeight",S.prototype.jettyHeight)),l=[new mxConnectionConstraint(new mxPoint(0,0),!1,null,i),new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(0,1),!1,null,i),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0),new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,Math.min(n-.5*t,1.5*t)),new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,Math.min(n-.5*t,3.5*t))];return 5*t<n&&l.push(new mxConnectionConstraint(new mxPoint(0,.75),!1,null,i)),8*t<n&&l.push(new mxConnectionConstraint(new mxPoint(0,.5),!1,null,i)),15*t<n&&l.push(new mxConnectionConstraint(new mxPoint(0,.25),!1,null,i)),l},P.prototype.constraints=mxRectangleShape.prototype.constraints,N.prototype.constraints=mxRectangleShape.prototype.constraints,mxCylinder.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.15,.05),!1),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.85,.05),!1),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.3),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.7),!0),new mxConnectionConstraint(new mxPoint(.15,.95),!1),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.85,.95),!1)],rt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.1),!1),new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.75,.1),!1),new mxConnectionConstraint(new mxPoint(0,1/3),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(1,1/3),!1),new mxConnectionConstraint(new mxPoint(1,1),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1)],xt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],mxActor.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.25,.2),!1),new mxConnectionConstraint(new mxPoint(.1,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.75,.25),!1),new mxConnectionConstraint(new mxPoint(.9,.5),!1),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],Y.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(.5,.25),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.5,.75),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],u.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.35),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.65),!1),new mxConnectionConstraint(new mxPoint(1,.35),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,.65),!1),new mxConnectionConstraint(new mxPoint(.25,1),!1),new mxConnectionConstraint(new mxPoint(.75,0),!1)],y.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxLine.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],pt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.5,1),!1)],mxDoubleEllipse.prototype.constraints=mxEllipse.prototype.constraints,mxRhombus.prototype.constraints=mxEllipse.prototype.constraints,mxTriangle.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0)],mxHexagon.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.375,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.625,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.375,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.625,1),!0)],mxCloud.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.25),!1),new mxConnectionConstraint(new mxPoint(.4,.1),!1),new mxConnectionConstraint(new mxPoint(.16,.55),!1),new mxConnectionConstraint(new mxPoint(.07,.4),!1),new mxConnectionConstraint(new mxPoint(.31,.8),!1),new mxConnectionConstraint(new mxPoint(.13,.77),!1),new mxConnectionConstraint(new mxPoint(.8,.8),!1),new mxConnectionConstraint(new mxPoint(.55,.95),!1),new mxConnectionConstraint(new mxPoint(.875,.5),!1),new mxConnectionConstraint(new mxPoint(.96,.7),!1),new mxConnectionConstraint(new mxPoint(.625,.2),!1),new mxConnectionConstraint(new mxPoint(.88,.25),!1)],p.prototype.constraints=mxRectangleShape.prototype.constraints,m.prototype.constraints=mxRectangleShape.prototype.constraints,d.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxArrow.prototype.constraints=null,L.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),s=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"dy",this.dy))));Math.abs(e-l);return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.75*e+.25*l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),.5*(n+s))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),n)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),.5*(n+s))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.25*e-.25*l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*s)),i},M.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),s=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"dy",this.dy))));return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,.5*(n+s))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),i},Et.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],I.prototype.getConstraints=function(t,e,n){var i=[],l=n*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",this.arrowWidth)))),s=e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",this.arrowSize)))),l=(n-l)/2;return i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-s),l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-s,0)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-s,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-s),n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l)),i},St.prototype.getConstraints=function(t,e,n){var i=[],l=n*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",I.prototype.arrowWidth)))),s=e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",I.prototype.arrowSize)))),l=(n-l)/2;return i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,s,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*e,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-s,0)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-s,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*e,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,s,n)),i},Ot.prototype.getConstraints=function(t,e,n){var i=[],l=Math.min(n,e),l=Math.max(0,Math.min(l,l*parseFloat(mxUtils.getValue(this.style,"size",this.size)))),s=(n-l)/2,o=s+l,r=(e-l)/2,l=r+l;return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,0)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,n-.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,n)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n-.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,s)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*r,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,s)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*r,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,s)),i},v.prototype.constraints=null,wt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],bt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.175,.25),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.175,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],ct.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],gt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)]}(),__mxOutput.Shapes="undefined"!=typeof Shapes?Shapes:void 0,mxUtils.extend(mxBpmnShape,mxShape),mxBpmnShape.prototype.customProperties=[{name:"symbol",dispName:"Event",type:"enum",defVal:"general",enumList:[{val:"general",dispName:"General"},{val:"message",dispName:"Message"},{val:"timer",dispName:"Timer"},{val:"escalation",dispName:"Escalation"},{val:"conditional",dispName:"Conditional"},{val:"link",dispName:"Link"},{val:"error",dispName:"Error"},{val:"cancel",dispName:"Cancel"},{val:"compensation",dispName:"Compensation"},{val:"signal",dispName:"Signal"},{val:"multiple",dispName:"Multiple"},{val:"parallelMultiple",dispName:"Parallel Multiple"},{val:"terminate",dispName:"Terminate"},{val:"exclusiveGw",dispName:"Exclusive Gw"},{val:"parallelGw",dispName:"Parallel Gw"},{val:"complexGw",dispName:"Complex Gw"}]},{name:"outline",dispName:"Event Type",type:"enum",defVal:"standard",enumList:[{val:"standard",dispName:"Standard"},{val:"eventInt",dispName:"Interrupting"},{val:"eventNonint",dispName:"Non-Interrupting"},{val:"catching",dispName:"Catching"},{val:"boundInt",dispName:"Bound Interrupting"},{val:"boundNonint",dispName:"Bound Non-Interrupting"},{val:"throwing",dispName:"Throwing"},{val:"end",dispName:"End"},{val:"none",dispName:"None"}]},{name:"background",dispName:"Background",type:"enum",defVal:"none",enumList:[{val:"gateway",dispName:"Gateway"},{val:"none",dispName:"None"}]}],mxBpmnShape.prototype.eventTypeEnum={START_STANDARD:"standard",EVENT_SP_INT:"eventInt",EVENT_SP_NONINT:"eventNonint",CATCHING:"catching",BOUND_INT:"boundInt",BOUND_NONINT:"boundNonint",THROWING:"throwing",END:"end",NONE:"none",GATEWAY:"gateway"},mxBpmnShape.prototype.eventEnum={GENERAL:"general",MESSAGE:"message",TIMER:"timer",ESCALATION:"escalation",CONDITIONAL:"conditional",LINK:"link",ERROR:"error",CANCEL:"cancel",COMPENSATION:"compensation",SIGNAL:"signal",MULTIPLE:"multiple",PAR_MULTI:"parallelMultiple",TERMINATE:"terminate",GW_EXCLUSIVE:"exclusiveGw",GW_PARALLEL:"parallelGw",GW_COMPLEX:"complexGw"},mxBpmnShape.prototype.miscEnum={OUTLINE:"outline",BACKGROUND:"background",SYMBOL:"symbol",GATEWAY:"gateway"},mxBpmnShape.prototype.paintVertexShape=function(t,e,n,i,l){this.redrawPath(t,e,n,i,l,mxBpmnShape.prototype.miscEnum.BACKGROUND),mxUtils.getValue(this.style,mxBpmnShape.prototype.miscEnum.BACKGROUND,mxBpmnShape.prototype.eventTypeEnum.NONE)===mxBpmnShape.prototype.eventTypeEnum.GATEWAY&&t.setShadow(!1),this.redrawPath(t,e,n,i,l,mxBpmnShape.prototype.miscEnum.OUTLINE),this.redrawPath(t,e,n,i,l,mxBpmnShape.prototype.miscEnum.SYMBOL)},mxBpmnShape.prototype.redrawPath=function(t,e,n,i,l,s){var o,r,a,h,u,d=mxUtils.getValue(this.style,mxBpmnShape.prototype.miscEnum.BACKGROUND,mxBpmnShape.prototype.eventTypeEnum.NONE);s==mxBpmnShape.prototype.miscEnum.BACKGROUND?null!=d&&null!=(o=this.backgrounds[d])&&(t.translate(e,n),o.call(this,t,e,n,i,l,s)):s==mxBpmnShape.prototype.miscEnum.OUTLINE?(d===mxBpmnShape.prototype.eventTypeEnum.GATEWAY?(t.translate(i/4,l/4),l/=2,i/=2,this.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(.25,.25),!1),new mxConnectionConstraint(new mxPoint(.25,.75),!1),new mxConnectionConstraint(new mxPoint(.75,.25),!1),new mxConnectionConstraint(new mxPoint(.75,.75),!1)]):this.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(.145,.145),!1),new mxConnectionConstraint(new mxPoint(.145,.855),!1),new mxConnectionConstraint(new mxPoint(.855,.145),!1),new mxConnectionConstraint(new mxPoint(.855,.855),!1)],null!=(h=mxUtils.getValue(this.style,mxBpmnShape.prototype.miscEnum.OUTLINE,mxBpmnShape.prototype.eventTypeEnum.NONE))&&null!=(o=this.outlines[h])&&o.call(this,t,e,n,i,l,d===mxBpmnShape.prototype.eventTypeEnum.GATEWAY)):s==mxBpmnShape.prototype.miscEnum.SYMBOL&&(d===mxBpmnShape.prototype.eventTypeEnum.GATEWAY&&(l/=2,i/=2),null!=(d=mxUtils.getValue(this.style,mxBpmnShape.prototype.miscEnum.SYMBOL,null)))&&null!=(o=this.symbols[d])&&(r=t.state.strokeColor,a=t.state.fillColor,h=mxUtils.getValue(this.style,mxBpmnShape.prototype.miscEnum.OUTLINE,mxBpmnShape.prototype.eventTypeEnum.NONE),d===mxBpmnShape.prototype.eventEnum.MESSAGE?(t.translate(.15*i,.3*l),i*=.7,l*=.4):d===mxBpmnShape.prototype.eventEnum.TIMER?(t.translate(.11*i,.11*l),i*=.78,l*=.78):d===mxBpmnShape.prototype.eventEnum.ESCALATION?(t.translate(.19*i,.15*l),i*=.62,l*=.57):d===mxBpmnShape.prototype.eventEnum.CONDITIONAL?(t.translate(.3*i,.16*l),i*=.4,l*=.68):d===mxBpmnShape.prototype.eventEnum.LINK?(t.translate(.27*i,.33*l),i*=.46,l*=.34):d===mxBpmnShape.prototype.eventEnum.ERROR?(t.translate(.212*i,.243*l),i*=.58,l*=.507):d===mxBpmnShape.prototype.eventEnum.CANCEL?(t.translate(.22*i,.22*l),i*=.56,l*=.56):d===mxBpmnShape.prototype.eventEnum.COMPENSATION?(t.translate(.28*i,.35*l),i*=.44,l*=.3):d===mxBpmnShape.prototype.eventEnum.SIGNAL?(t.translate(.19*i,.15*l),i*=.62,l*=.57):d===mxBpmnShape.prototype.eventEnum.MULTIPLE?(t.translate(.2*i,.19*l),i*=.6,l*=.565):d===mxBpmnShape.prototype.eventEnum.PAR_MULTI?(t.translate(.2*i,.2*l),i*=.6,l*=.6):d===mxBpmnShape.prototype.eventEnum.TERMINATE?(t.translate(.05*i,.05*l),i*=.9,l*=.9):d===mxBpmnShape.prototype.eventEnum.GW_EXCLUSIVE&&(t.translate(.12*i,0),i*=.76),u=!1,"star"===d?t.setFillColor(r):h!==mxBpmnShape.prototype.eventTypeEnum.THROWING&&h!==mxBpmnShape.prototype.eventTypeEnum.END||(t.setStrokeColor(a),t.setFillColor(r),u=!0),o.call(this,t,e,n,i,l,s,u),"star"===d?t.setFillColor(a):h!==mxBpmnShape.prototype.eventTypeEnum.THROWING&&h!==mxBpmnShape.prototype.eventTypeEnum.END||(t.setStrokeColor(r),t.setFillColor(a)))},mxBpmnShape.prototype.backgrounds={none:function(t,e,n,i,l){},gateway:function(t,e,n,i,l){t.begin(),t.moveTo(i/2,0),t.lineTo(i,l/2),t.lineTo(i/2,l),t.lineTo(0,l/2),t.close(),t.fillAndStroke()}},mxBpmnShape.prototype.outlines={none:function(t,e,n,i,l,s){s||t.setShadow(!1)},standard:function(t,e,n,i,l,s){t.ellipse(0,0,i,l),t.fillAndStroke(),s||t.setShadow(!1)},eventInt:function(t,e,n,i,l,s){t.ellipse(0,0,i,l),t.fillAndStroke(),s||t.setShadow(!1)},eventNonint:function(t,e,n,i,l,s){var o=t.state.dashed;t.setDashed(!0),t.ellipse(0,0,i,l),t.fillAndStroke(),t.setDashed(o),s||t.setShadow(!1)},catching:function(t,e,n,i,l,s){t.ellipse(0,0,i,l),t.fillAndStroke(),s||t.setShadow(!1);t.ellipse(2,2,i-4,l-4),t.stroke()},boundInt:function(t,e,n,i,l,s){t.ellipse(0,0,i,l),t.fillAndStroke(),s||t.setShadow(!1);t.ellipse(2,2,i-4,l-4),t.stroke()},boundNonint:function(t,e,n,i,l,s){var o=t.state.dashed;t.setDashed(!0),t.ellipse(0,0,i,l),t.fillAndStroke(),s||t.setShadow(!1);t.ellipse(2,2,i-4,l-4),t.stroke(),t.setDashed(o)},throwing:function(t,e,n,i,l,s){t.ellipse(0,0,i,l),t.fillAndStroke(),s||t.setShadow(!1);t.ellipse(.02*i+2,.02*l+2,.96*i-4,.96*l-4),t.stroke()},end:function(t,e,n,i,l,s){var o=t.state.strokeWidth;t.setStrokeWidth(3*o),t.ellipse(0,0,i,l),t.fillAndStroke(),t.setStrokeWidth(o),s||t.setShadow(!1)}},mxBpmnShape.prototype.symbols={general:function(t,e,n,i,l){},message:function(t,e,n,i,l,s,o){t.rect(0,0,i,l),t.fillAndStroke(),"none"===mxUtils.getValue(this.style,"fillColor","none")&&o&&t.setStrokeColor("#ffffff"),t.begin(),t.moveTo(0,0),t.lineTo(.5*i,.5*l),t.lineTo(i,0),t.stroke()},timer:function(t,e,n,i,l){t.ellipse(0,0,i,l),t.fillAndStroke(),t.begin(),t.moveTo(.5*i,0),t.lineTo(.5*i,.0642*l),t.moveTo(.7484*i,.0654*l),t.lineTo(.7126*i,.1281*l),t.moveTo(.93*i,.2471*l),t.lineTo(.8673*i,.2854*l),t.moveTo(i,.5*l),t.lineTo(.9338*i,.5*l),t.moveTo(.93*i,.7509*l),t.lineTo(.8673*i,.7126*l),t.moveTo(.7484*i,.9326*l),t.lineTo(.7126*i,.8699*l),t.moveTo(.5*i,.9338*l),t.lineTo(.5*i,l),t.moveTo(.2496*i,.9325*l),t.lineTo(.2854*i,.8699*l),t.moveTo(.068*i,.7509*l),t.lineTo(.1307*i,.7126*l),t.moveTo(0,.5*l),t.lineTo(.0642*i,.5*l),t.moveTo(.068*i,.2471*l),t.lineTo(.1307*i,.2854*l),t.moveTo(.2496*i,.0654*l),t.lineTo(.2854*i,.1281*l),t.moveTo(.5246*i,.0706*l),t.lineTo(.5*i,.5*l),t.lineTo(.7804*i,.5118*l),t.stroke()},escalation:function(t,e,n,i,l){t.begin(),t.moveTo(0,l),t.lineTo(.5*i,0),t.lineTo(i,l),t.lineTo(.5*i,.5*l),t.close(),t.fillAndStroke()},conditional:function(t,e,n,i,l){t.rect(0,0,i,l),t.fillAndStroke(),t.begin(),t.moveTo(0,.1027*l),t.lineTo(.798*i,.1027*l),t.moveTo(0,.3669*l),t.lineTo(.798*i,.3669*l),t.moveTo(0,.6311*l),t.lineTo(.798*i,.6311*l),t.moveTo(0,.8953*l),t.lineTo(.798*i,.8953*l),t.stroke()},link:function(t,e,n,i,l){t.begin(),t.moveTo(0,.76*l),t.lineTo(0,.24*l),t.lineTo(.63*i,.24*l),t.lineTo(.63*i,0),t.lineTo(i,.5*l),t.lineTo(.63*i,l),t.lineTo(.63*i,.76*l),t.close(),t.fillAndStroke()},error:function(t,e,n,i,l,s,o){t.begin(),t.moveTo(0,l),t.lineTo(.3287*i,.123*l),t.lineTo(.6194*i,.6342*l),t.lineTo(i,0),t.lineTo(.6625*i,.939*l),t.lineTo(.3717*i,.5064*l),t.close(),o?t.fill():t.fillAndStroke()},cancel:function(t,e,n,i,l){t.begin(),t.moveTo(.1051*i,0),t.lineTo(.5*i,.3738*l),t.lineTo(.8909*i,0),t.lineTo(i,.1054*l),t.lineTo(.623*i,.5*l),t.lineTo(i,.8926*l),t.lineTo(.8909*i,l),t.lineTo(.5*i,.6242*l),t.lineTo(.1051*i,l),t.lineTo(0,.8926*l),t.lineTo(.373*i,.5*l),t.lineTo(0,.1054*l),t.close(),t.fillAndStroke()},compensation:function(t,e,n,i,l){t.begin(),t.moveTo(0,.5*l),t.lineTo(.5*i,0),t.lineTo(.5*i,l),t.close(),t.moveTo(.5*i,.5*l),t.lineTo(i,0),t.lineTo(i,l),t.close(),t.fillAndStroke()},signal:function(t,e,n,i,l){t.begin(),t.moveTo(0,l),t.lineTo(.5*i,0),t.lineTo(i,l),t.close(),t.fillAndStroke()},multiple:function(t,e,n,i,l){t.begin(),t.moveTo(0,.39*l),t.lineTo(.5*i,0),t.lineTo(i,.39*l),t.lineTo(.815*i,l),t.lineTo(.185*i,l),t.close(),t.fillAndStroke()},parallelMultiple:function(t,e,n,i,l){t.begin(),t.moveTo(.38*i,0),t.lineTo(.62*i,0),t.lineTo(.62*i,.38*l),t.lineTo(i,.38*l),t.lineTo(i,.62*l),t.lineTo(.62*i,.62*l),t.lineTo(.62*i,l),t.lineTo(.38*i,l),t.lineTo(.38*i,.62*l),t.lineTo(0,.62*l),t.lineTo(0,.38*l),t.lineTo(.38*i,.38*l),t.close(),t.fillAndStroke()},terminate:function(t,e,n,i,l){t.ellipse(0,0,i,l),t.fillAndStroke()},exclusiveGw:function(t,e,n,i,l){var s=t.state.strokeColor,o=t.state.fillColor;t.setStrokeColor(o),t.setFillColor(s),t.begin(),t.moveTo(.105*i,0),t.lineTo(.5*i,.38*l),t.lineTo(.895*i,0*l),t.lineTo(i,.11*l),t.lineTo(.6172*i,.5*l),t.lineTo(i,.89*l),t.lineTo(.895*i,l),t.lineTo(.5*i,.62*l),t.lineTo(.105*i,l),t.lineTo(0,.89*l),t.lineTo(.3808*i,.5*l),t.lineTo(0,.11*l),t.close(),t.fillAndStroke(),t.setStrokeColor(s),t.setFillColor(o)},parallelGw:function(t,e,n,i,l){var s=t.state.strokeColor,o=t.state.fillColor;t.setStrokeColor(o),t.setFillColor(s),t.begin(),t.moveTo(.38*i,0),t.lineTo(.62*i,0),t.lineTo(.62*i,.38*l),t.lineTo(i,.38*l),t.lineTo(i,.62*l),t.lineTo(.62*i,.62*l),t.lineTo(.62*i,l),t.lineTo(.38*i,l),t.lineTo(.38*i,.62*l),t.lineTo(0,.62*l),t.lineTo(0,.38*l),t.lineTo(.38*i,.38*l),t.close(),t.fillAndStroke(),t.setStrokeColor(s),t.setFillColor(o)},complexGw:function(t,e,n,i,l){var s=t.state.strokeColor,o=t.state.fillColor;t.setStrokeColor(o),t.setFillColor(s),t.begin(),t.moveTo(0,.44*l),t.lineTo(.36*i,.44*l),t.lineTo(.1*i,.18*l),t.lineTo(.18*i,.1*l),t.lineTo(.44*i,.36*l),t.lineTo(.44*i,0),t.lineTo(.56*i,0),t.lineTo(.56*i,.36*l),t.lineTo(.82*i,.1*l),t.lineTo(.9*i,.18*l),t.lineTo(.64*i,.44*l),t.lineTo(i,.44*l),t.lineTo(i,.56*l),t.lineTo(.64*i,.56*l),t.lineTo(.9*i,.82*l),t.lineTo(.82*i,.9*l),t.lineTo(.56*i,.64*l),t.lineTo(.56*i,l),t.lineTo(.44*i,l),t.lineTo(.44*i,.64*l),t.lineTo(.18*i,.9*l),t.lineTo(.1*i,.82*l),t.lineTo(.36*i,.56*l),t.lineTo(0,.56*l),t.close(),t.fillAndStroke(),t.setStrokeColor(s),t.setFillColor(o)},star:function(t,e,n,i,l){t.translate(i/5,l/6),l*=2/3,i*=.6,t.begin(),t.moveTo(0,l/4),t.lineTo(i/3,l/4),t.lineTo(i/2,0),t.lineTo(2*i/3,l/4),t.lineTo(i,l/4),t.lineTo(5*i/6,l/2),t.lineTo(i,3*l/4),t.lineTo(2*i/3,3*l/4),t.lineTo(i/2,l),t.lineTo(i/3,3*l/4),t.lineTo(0,3*l/4),t.lineTo(i/6,l/2),t.close(),t.fillAndStroke()}},mxCellRenderer.registerShape("mxgraph.bpmn.shape",mxBpmnShape),mxUtils.extend(mxShapeBpmn2SendMarker,mxActor),mxShapeBpmn2SendMarker.prototype.cst={SEND:"mxgraph.bpmn.sendMarker"},mxShapeBpmn2SendMarker.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),t.rect(0,0,i,l),t.fillAndStroke(),t.setShadow(!1),t.begin(),t.moveTo(0,0),t.lineTo(.5*i,.5*l),t.lineTo(i,0),t.stroke()},mxCellRenderer.registerShape(mxShapeBpmn2SendMarker.prototype.cst.SEND,mxShapeBpmn2SendMarker),mxUtils.extend(mxShapeBpmnEvent,mxShape),mxShapeBpmnEvent.prototype.eventTypeEnum={START_STANDARD:"standard",EVENT_SP_INT:"eventInt",EVENT_SP_NONINT:"eventNonint",CATCHING:"catching",BOUND_INT:"boundInt",BOUND_NONINT:"boundNonint",THROWING:"throwing",END:"end",NONE:"none"},mxShapeBpmnEvent.prototype.eventEnum={GENERAL:"general",MESSAGE:"message",TIMER:"timer",ESCALATION:"escalation",CONDITIONAL:"conditional",LINK:"link",ERROR:"error",CANCEL:"cancel",COMPENSATION:"compensation",SIGNAL:"signal",MULTIPLE:"multiple",PAR_MULTI:"parallelMultiple",TERMINATE:"terminate"},mxShapeBpmnEvent.prototype.miscEnum={OUTLINE:"outline",SYMBOL:"symbol"},mxShapeBpmnEvent.prototype.customProperties=[{name:mxShapeBpmnEvent.prototype.miscEnum.SYMBOL,dispName:"Event",type:"enum",defVal:mxShapeBpmnEvent.prototype.eventEnum.GENERAL,enumList:[{val:mxShapeBpmnEvent.prototype.eventEnum.GENERAL,dispName:"General"},{val:mxShapeBpmnEvent.prototype.eventEnum.MESSAGE,dispName:"Message"},{val:mxShapeBpmnEvent.prototype.eventEnum.TIMER,dispName:"Timer"},{val:mxShapeBpmnEvent.prototype.eventEnum.ESCALATION,dispName:"Escalation"},{val:mxShapeBpmnEvent.prototype.eventEnum.CONDITIONAL,dispName:"Conditional"},{val:mxShapeBpmnEvent.prototype.eventEnum.LINK,dispName:"Link"},{val:mxShapeBpmnEvent.prototype.eventEnum.ERROR,dispName:"Error"},{val:mxShapeBpmnEvent.prototype.eventEnum.CANCEL,dispName:"Cancel"},{val:mxShapeBpmnEvent.prototype.eventEnum.COMPENSATION,dispName:"Compensation"},{val:mxShapeBpmnEvent.prototype.eventEnum.SIGNAL,dispName:"Signal"},{val:mxShapeBpmnEvent.prototype.eventEnum.MULTIPLE,dispName:"Multiple"},{val:mxShapeBpmnEvent.prototype.eventEnum.PAR_MULTI,dispName:"Parallel Multiple"},{val:mxShapeBpmnEvent.prototype.eventEnum.TERMINATE,dispName:"Terminate"}]},{name:mxShapeBpmnEvent.prototype.miscEnum.OUTLINE,dispName:"Event Type",type:"enum",defVal:mxShapeBpmnEvent.prototype.eventTypeEnum.START_STANDARD,enumList:[{val:mxShapeBpmnEvent.prototype.eventTypeEnum.START_STANDARD,dispName:"Standard"},{val:mxShapeBpmnEvent.prototype.eventTypeEnum.EVENT_SP_INT,dispName:"Interrupting"},{val:mxShapeBpmnEvent.prototype.eventTypeEnum.EVENT_SP_NONINT,dispName:"Non-Interrupting"},{val:mxShapeBpmnEvent.prototype.eventTypeEnum.CATCHING,dispName:"Catching"},{val:mxShapeBpmnEvent.prototype.eventTypeEnum.BOUND_INT,dispName:"Bound Interrupting"},{val:mxShapeBpmnEvent.prototype.eventTypeEnum.BOUND_NONINT,dispName:"Bound Non-Interrupting"},{val:mxShapeBpmnEvent.prototype.eventTypeEnum.THROWING,dispName:"Throwing"},{val:mxShapeBpmnEvent.prototype.eventTypeEnum.END,dispName:"End"},{val:mxShapeBpmnEvent.prototype.eventTypeEnum.NONE,dispName:"None"}]}],mxShapeBpmnEvent.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),this.strictDrawShape(t,0,0,i,l,null)},mxShapeBpmnEvent.prototype.strictDrawShape=function(t,e,n,i,l,s,o){var r,a,h,u;null!=(s=null==s?mxUtils.getValue(this.style,this.miscEnum.OUTLINE,this.eventTypeEnum.NONE):s)&&null!=(r=mxShapeBpmnEvent.prototype.outlines[s])&&(t.translate(e,n),r.call(this,t,e,n,i,l)),null!=(o=null==o?mxUtils.getValue(this.style,this.miscEnum.SYMBOL,null):o)&&null!=(r=mxShapeBpmnEvent.prototype.symbols[o])&&(a=t.state.strokeColor,h=t.state.fillColor,o===this.eventEnum.MESSAGE?(t.translate(.15*i,.3*l),i*=.7,l*=.4):o===this.eventEnum.TIMER?(t.translate(.11*i,.11*l),i*=.78,l*=.78):o===this.eventEnum.ESCALATION?(t.translate(.19*i,.15*l),i*=.62,l*=.57):o===this.eventEnum.CONDITIONAL?(t.translate(.3*i,.16*l),i*=.4,l*=.68):o===this.eventEnum.LINK?(t.translate(.27*i,.33*l),i*=.46,l*=.34):o===this.eventEnum.ERROR?(t.translate(.212*i,.243*l),i*=.58,l*=.507):o===this.eventEnum.CANCEL?(t.translate(.22*i,.22*l),i*=.56,l*=.56):o===this.eventEnum.COMPENSATION?(t.translate(.28*i,.35*l),i*=.44,l*=.3):o===this.eventEnum.SIGNAL?(t.translate(.19*i,.15*l),i*=.62,l*=.57):o===this.eventEnum.MULTIPLE?(t.translate(.2*i,.19*l),i*=.6,l*=.565):o===this.eventEnum.PAR_MULTI?(t.translate(.2*i,.2*l),i*=.6,l*=.6):o===this.eventEnum.TERMINATE?(t.translate(.05*i,.05*l),i*=.9,l*=.9):o===this.eventEnum.GW_EXCLUSIVE&&(t.translate(.12*i,0),i*=.76),u=!1,"star"===o?t.setFillColor(a):s!==this.eventTypeEnum.THROWING&&s!==this.eventTypeEnum.END||(t.setStrokeColor(h),t.setFillColor(a),u=!0),r.call(this,t,e,n,i,l,u),"star"===o?t.setFillColor(h):s!==this.eventTypeEnum.THROWING&&s!==this.eventTypeEnum.END||(t.setStrokeColor(a),t.setFillColor(h)))},mxShapeBpmnEvent.prototype.outlines={none:function(t,e,n,i,l){t.setShadow(!1)},standard:function(t,e,n,i,l){t.ellipse(0,0,i,l),t.fillAndStroke(),t.setShadow(!1)},eventInt:function(t,e,n,i,l){t.ellipse(0,0,i,l),t.fillAndStroke(),t.setShadow(!1)},eventNonint:function(t,e,n,i,l){var s=t.state.dashed;t.setDashed(!0),t.ellipse(0,0,i,l),t.fillAndStroke(),t.setDashed(s),t.setShadow(!1)},catching:function(t,e,n,i,l){t.ellipse(0,0,i,l),t.fillAndStroke(),t.setShadow(!1);t.ellipse(2,2,i-4,l-4),t.stroke()},boundInt:function(t,e,n,i,l){t.ellipse(0,0,i,l),t.fillAndStroke(),t.setShadow(!1);t.ellipse(2,2,i-4,l-4),t.stroke()},boundNonint:function(t,e,n,i,l){var s=t.state.dashed;t.setDashed(!0),t.ellipse(0,0,i,l),t.fillAndStroke(),t.setShadow(!1);t.ellipse(2,2,i-4,l-4),t.stroke(),t.setDashed(s)},throwing:function(t,e,n,i,l){t.ellipse(0,0,i,l),t.fillAndStroke(),t.setShadow(!1);t.ellipse(.02*i+2,.02*l+2,.96*i-4,.96*l-4),t.stroke()},end:function(t,e,n,i,l){var s=t.state.strokeWidth;t.setStrokeWidth(3*s),t.ellipse(0,0,i,l),t.fillAndStroke(),t.setStrokeWidth(s),t.setShadow(!1)}},mxShapeBpmnEvent.prototype.symbols={general:function(t,e,n,i,l,s){},message:function(t,e,n,i,l,s){t.rect(0,0,i,l),t.fillAndStroke(),"none"===mxUtils.getValue(this.style,"fillColor","none")&&s&&t.setStrokeColor("#ffffff"),t.begin(),t.moveTo(0,0),t.lineTo(.5*i,.5*l),t.lineTo(i,0),t.stroke()},timer:function(t,e,n,i,l,s){t.ellipse(0,0,i,l),t.fillAndStroke(),t.begin(),t.moveTo(.5*i,0),t.lineTo(.5*i,.0642*l),t.moveTo(.7484*i,.0654*l),t.lineTo(.7126*i,.1281*l),t.moveTo(.93*i,.2471*l),t.lineTo(.8673*i,.2854*l),t.moveTo(i,.5*l),t.lineTo(.9338*i,.5*l),t.moveTo(.93*i,.7509*l),t.lineTo(.8673*i,.7126*l),t.moveTo(.7484*i,.9326*l),t.lineTo(.7126*i,.8699*l),t.moveTo(.5*i,.9338*l),t.lineTo(.5*i,l),t.moveTo(.2496*i,.9325*l),t.lineTo(.2854*i,.8699*l),t.moveTo(.068*i,.7509*l),t.lineTo(.1307*i,.7126*l),t.moveTo(0,.5*l),t.lineTo(.0642*i,.5*l),t.moveTo(.068*i,.2471*l),t.lineTo(.1307*i,.2854*l),t.moveTo(.2496*i,.0654*l),t.lineTo(.2854*i,.1281*l),t.moveTo(.5246*i,.0706*l),t.lineTo(.5*i,.5*l),t.lineTo(.7804*i,.5118*l),t.stroke()},escalation:function(t,e,n,i,l,s){t.setMiterLimit(6),t.begin(),t.moveTo(0,l),t.lineTo(.5*i,0),t.lineTo(i,l),t.lineTo(.5*i,.5*l),t.close(),s?t.fill():t.fillAndStroke()},conditional:function(t,e,n,i,l,s){t.rect(0,0,i,l),t.fillAndStroke(),t.begin(),t.moveTo(0,.1027*l),t.lineTo(.798*i,.1027*l),t.moveTo(0,.3669*l),t.lineTo(.798*i,.3669*l),t.moveTo(0,.6311*l),t.lineTo(.798*i,.6311*l),t.moveTo(0,.8953*l),t.lineTo(.798*i,.8953*l),t.stroke()},link:function(t,e,n,i,l,s){t.begin(),t.moveTo(0,.76*l),t.lineTo(0,.24*l),t.lineTo(.63*i,.24*l),t.lineTo(.63*i,0),t.lineTo(i,.5*l),t.lineTo(.63*i,l),t.lineTo(.63*i,.76*l),t.close(),s?t.fill():t.fillAndStroke()},error:function(t,e,n,i,l,s){t.setMiterLimit(7),t.begin(),t.moveTo(0,l),t.lineTo(.3287*i,.123*l),t.lineTo(.6194*i,.6342*l),t.lineTo(i,0),t.lineTo(.6625*i,.939*l),t.lineTo(.3717*i,.5064*l),t.close(),s?t.fill():t.fillAndStroke()},cancel:function(t,e,n,i,l,s){t.begin(),t.moveTo(.1051*i,0),t.lineTo(.5*i,.3738*l),t.lineTo(.8909*i,0),t.lineTo(i,.1054*l),t.lineTo(.623*i,.5*l),t.lineTo(i,.8926*l),t.lineTo(.8909*i,l),t.lineTo(.5*i,.6242*l),t.lineTo(.1051*i,l),t.lineTo(0,.8926*l),t.lineTo(.373*i,.5*l),t.lineTo(0,.1054*l),t.close(),s?t.fill():t.fillAndStroke()},compensation:function(t,e,n,i,l,s){t.setMiterLimit(1),t.begin(),t.moveTo(0,.5*l),t.lineTo(.5*i,0),t.lineTo(.5*i,l),t.close(),t.moveTo(.5*i,.5*l),t.lineTo(i,0),t.lineTo(i,l),t.close(),s?t.fill():t.fillAndStroke()},signal:function(t,e,n,i,l,s){t.begin(),t.moveTo(0,l),t.lineTo(.5*i,0),t.lineTo(i,l),t.close(),s?t.fill():t.fillAndStroke()},multiple:function(t,e,n,i,l,s){t.begin(),t.moveTo(0,.39*l),t.lineTo(.5*i,0),t.lineTo(i,.39*l),t.lineTo(.815*i,l),t.lineTo(.185*i,l),t.close(),s?t.fill():t.fillAndStroke()},parallelMultiple:function(t,e,n,i,l,s){t.begin(),t.moveTo(.38*i,0),t.lineTo(.62*i,0),t.lineTo(.62*i,.38*l),t.lineTo(i,.38*l),t.lineTo(i,.62*l),t.lineTo(.62*i,.62*l),t.lineTo(.62*i,l),t.lineTo(.38*i,l),t.lineTo(.38*i,.62*l),t.lineTo(0,.62*l),t.lineTo(0,.38*l),t.lineTo(.38*i,.38*l),t.close(),s?t.fill():t.fillAndStroke()},terminate:function(t,e,n,i,l,s){t.ellipse(0,0,i,l),t.fillAndStroke()},star:function(t,e,n,i,l,s){t.translate(i/5,l/6),l*=2/3,i*=.6,t.begin(),t.moveTo(0,l/4),t.lineTo(i/3,l/4),t.lineTo(i/2,0),t.lineTo(2*i/3,l/4),t.lineTo(i,l/4),t.lineTo(5*i/6,l/2),t.lineTo(i,3*l/4),t.lineTo(2*i/3,3*l/4),t.lineTo(i/2,l),t.lineTo(i/3,3*l/4),t.lineTo(0,3*l/4),t.lineTo(i/6,l/2),t.close(),t.fillAndStroke()}},mxCellRenderer.registerShape("mxgraph.bpmn.event",mxShapeBpmnEvent),mxUtils.extend(mxShapeBpmnGateway,mxShape),mxShapeBpmnGateway.prototype.customProperties=mxShapeBpmnEvent.prototype.customProperties,mxShapeBpmnGateway.prototype.eventTypeEnum=mxShapeBpmnEvent.prototype.eventTypeEnum,mxShapeBpmnGateway.prototype.eventEnum=mxShapeBpmnEvent.prototype.eventEnum,mxShapeBpmnGateway.prototype.miscEnum=mxShapeBpmnEvent.prototype.miscEnum,mxShapeBpmnGateway.prototype.customProperties=mxShapeBpmnGateway.prototype.customProperties.concat({name:"gwType",dispName:"Gateway type",type:"enum",defVal:"event",enumList:[{val:"event",dispName:"Event-based"},{val:"exclusive",dispName:"Exclusive"},{val:"parallel",dispName:"Parallel"},{val:"complex",dispName:"Complex"}]}),mxShapeBpmnGateway.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(.5*i,0),t.lineTo(i,.5*l),t.lineTo(.5*i,l),t.lineTo(0,.5*l),t.close(),t.fillAndStroke(),t.setShadow(!1);var s,o,e=.6*i,n=.6*l,r=mxUtils.getValue(this.style,"gwType","event"),a=mxUtils.getValue(this.style,"outline","none"),h=mxUtils.getValue(this.style,"symbol","standard"),u=.5*i,d=.5*l;"event"===r&&null!==a&&"none"!==a?mxShapeBpmnEvent.prototype.strictDrawShape.call(this,t,.5*(i-e),.5*(l-n),e,n,a,h):"exclusive"==r?(t.translate(.31*i,.25*l),u*=.76,s=t.state.strokeColor,o=t.state.fillColor,t.setFillColor(s),t.begin(),t.moveTo(.105*u,0),t.lineTo(.5*u,.38*d),t.lineTo(.895*u,0*d),t.lineTo(u,.11*d),t.lineTo(.6172*u,.5*d),t.lineTo(u,.89*d),t.lineTo(.895*u,d),t.lineTo(.5*u,.62*d),t.lineTo(.105*u,d),t.lineTo(0,.89*d),t.lineTo(.3808*u,.5*d),t.lineTo(0,.11*d),t.close(),t.fillAndStroke(),t.setFillColor(o),t.translate(.12*-u,0)):"parallel"==r?(t.translate(.25*i,.25*l),s=t.state.strokeColor,o=t.state.fillColor,t.setFillColor(s),t.begin(),t.moveTo(.38*u,0),t.lineTo(.62*u,0),t.lineTo(.62*u,.38*d),t.lineTo(u,.38*d),t.lineTo(u,.62*d),t.lineTo(.62*u,.62*d),t.lineTo(.62*u,d),t.lineTo(.38*u,d),t.lineTo(.38*u,.62*d),t.lineTo(0,.62*d),t.lineTo(0,.38*d),t.lineTo(.38*u,.38*d),t.close(),t.fillAndStroke(),t.setFillColor(o)):"complex"==r&&(t.translate(.25*i,.25*l),s=t.state.strokeColor,o=t.state.fillColor,t.setFillColor(s),t.begin(),t.moveTo(0,.44*d),t.lineTo(.36*u,.44*d),t.lineTo(.1*u,.18*d),t.lineTo(.18*u,.1*d),t.lineTo(.44*u,.36*d),t.lineTo(.44*u,0),t.lineTo(.56*u,0),t.lineTo(.56*u,.36*d),t.lineTo(.82*u,.1*d),t.lineTo(.9*u,.18*d),t.lineTo(.64*u,.44*d),t.lineTo(u,.44*d),t.lineTo(u,.56*d),t.lineTo(.64*u,.56*d),t.lineTo(.9*u,.82*d),t.lineTo(.82*u,.9*d),t.lineTo(.56*u,.64*d),t.lineTo(.56*u,d),t.lineTo(.44*u,d),t.lineTo(.44*u,.64*d),t.lineTo(.18*u,.9*d),t.lineTo(.1*u,.82*d),t.lineTo(.36*u,.56*d),t.lineTo(0,.56*d),t.close(),t.fillAndStroke(),t.setFillColor(o))},mxCellRenderer.registerShape("mxgraph.bpmn.gateway2",mxShapeBpmnGateway),mxUtils.extend(mxShapeBpmn2Task,mxCellRenderer.prototype.getShape("mxgraph.basic.rect")),mxShapeBpmn2Task.prototype.customProperties=[{name:"bpmnShapeType",dispName:"Type",defVal:"task",type:"enum",enumList:[{val:"task",dispName:"Task"},{val:"transaction",dispName:"Transaction"},{val:"call",dispName:"Call"},{val:"subprocess",dispName:"Sub-Process"}]},{name:"taskMarker",dispName:"Task Marker",defVal:"abstract",type:"enum",enumList:[{val:"abstract",dispName:"Abstract"},{val:"service",dispName:"Service"},{val:"send",dispName:"Send"},{val:"receive",dispName:"Receive"},{val:"user",dispName:"User"},{val:"nime",dispName:"Non-Interrupting Message Event"},{val:"manual",dispName:"Manual"},{val:"businessRule",dispName:"Business Rule"},{val:"script",dispName:"Script"}]},{name:"isLoopSub",dispName:"Subprocess",type:"bool"},{name:"isLoopStandard",dispName:"Standard Loop",type:"bool"},{name:"isLoopMultiParallel",dispName:"Multi-Instance Parallel Loop",type:"bool"},{name:"isLoopMultiSeq",dispName:"Multi-Instance Sequential Loop",type:"bool"},{name:"isLoopComp",dispName:"Compensation Loop",type:"bool"},{name:"isAdHoc",dispName:"Ad Hoc",type:"bool"}],mxShapeBpmn2Task.prototype.customProperties=mxShapeBpmn2Task.prototype.customProperties.concat(mxShapeBpmnEvent.prototype.customProperties),mxShapeBpmn2Task.prototype.customProperties=mxShapeBpmn2Task.prototype.customProperties.concat(mxCellRenderer.prototype.getShape("mxgraph.basic.rect").prototype.customProperties),mxShapeBpmn2Task.prototype.eventTypeEnum=mxShapeBpmnEvent.prototype.eventTypeEnum,mxShapeBpmn2Task.prototype.eventEnum=mxShapeBpmnEvent.prototype.eventEnum,mxShapeBpmn2Task.prototype.miscEnum=mxShapeBpmnEvent.prototype.miscEnum,mxShapeBpmn2Task.prototype.cst={TASK:"mxgraph.bpmn.task"},mxShapeBpmn2Task.prototype.paintVertexShape=function(t,e,n,i,l){var s,o=mxUtils.getValue(this.style,"bpmnShapeType","task"),r=mxUtils.getValue(this.style,"taskMarker","abstract"),a=mxUtils.getValue(this.style,"strokeWidth",1),h=mxUtils.getValue(this.style,"dashed",!1),u=mxUtils.getValue(this.style,"indent",3),d=14,e=(mxUtils.getValue(this.style,"rectOutline","single"),t.translate(e,n),mxCellRenderer.prototype.getShape("mxgraph.basic.rect")),n={},u=("transaction"==o?(d+=u,n.rectOutline="double",n.indent=3):"subprocess"==o?n.dashed=!0:"call"==o&&(n.strokeWidth=4),e.prototype.strictDrawShape.call(this,t,0,0,i,l,n),t.setStrokeWidth(a),t.setDashed(h),"call"==o&&t.setStrokeWidth(a),t.setDashed(!1),t.setShadow(!1),mxUtils.getValue(this.style,"isLoopSub",!1)),e=mxUtils.getValue(this.style,"isLoopStandard",!1),n=mxUtils.getValue(this.style,"isLoopMultiParallel",!1),h=mxUtils.getValue(this.style,"isLoopMultiSeq",!1),o=mxUtils.getValue(this.style,"isLoopComp",!1),a=mxUtils.getValue(this.style,"isAdHoc",!1),p=0,p=(e&&p++,n&&p++,h&&p++,o&&p++,u&&p++,a&&p++,-14*p*.5);switch(e&&null!=(s=mxStencilRegistry.getStencil("mxgraph.bpmn.loop"))&&(s.drawShape(t,this,.5*i+p+1,l-d+1,12,12),p+=14),n&&(t.translate(.5*i+p+1,l-d+1),t.begin(),t.moveTo(2.4,0),t.lineTo(2.4,12),t.moveTo(6,0),t.lineTo(6,12),t.moveTo(9.6,0),t.lineTo(9.6,12),t.stroke(),t.translate(.5*-i-p-1,d-1-l),p+=14),h&&(t.translate(.5*i+p+1,l-d+1),t.begin(),t.moveTo(0,2.4),t.lineTo(12,2.4),t.moveTo(0,6),t.lineTo(12,6),t.moveTo(0,9.6),t.lineTo(12,9.6),t.stroke(),t.translate(.5*-i-p-1,d-1-l),p+=14),o&&null!=(s=mxStencilRegistry.getStencil("mxgraph.bpmn.compensation"))&&(s.drawShape(t,this,.5*i+p,l-d+1,14,12),p+=14),u&&(t.translate(.5*i+p,l-d),t.rect(0,0,14,14),t.stroke(),t.begin(),t.moveTo(4,7),t.lineTo(10,7),t.moveTo(7,4),t.lineTo(7,10),t.stroke(),t.translate(.5*-i-p,d-l),p+=14),a&&null!=(s=mxStencilRegistry.getStencil("mxgraph.bpmn.ad_hoc"))&&(m=mxUtils.getValue(this.style,"strokeColor","#000000"),c=mxUtils.getValue(this.style,"fillColor","#ffffff"),t.setStrokeColor("none"),t.setFillColor(m),s.drawShape(t,this,.5*i+p+1,l-d+4,12,6),p+=14,t.setStrokeColor(m),t.setFillColor(c)),r){case"abstract":break;case"service":t.setFillColor(mxUtils.getValue(this.style,"fillColor","#ffffff")),null!=(s=mxStencilRegistry.getStencil("mxgraph.bpmn.service_task"))&&s.drawShape(t,this,2,2,16,16);break;case"send":var m=mxUtils.getValue(this.style,"strokeColor","#000000"),c=mxUtils.getValue(this.style,"fillColor","#ffffff");t.setStrokeColor(c),t.setFillColor(m),mxShapeBpmn2SendMarker.prototype.paintVertexShape(t,4,4,18,13);break;case"receive":mxShapeBpmn2SendMarker.prototype.paintVertexShape(t,4,4,18,13);break;case"user":null!=(s=mxStencilRegistry.getStencil("mxgraph.bpmn.user_task"))&&s.drawShape(t,this,2,2,16,16);break;case"manual":null!=(s=mxStencilRegistry.getStencil("mxgraph.bpmn.manual_task"))&&s.drawShape(t,this,3,3,18,14);break;case"businessRule":null!=(s=mxStencilRegistry.getStencil("mxgraph.bpmn.business_rule_task"))&&s.drawShape(t,this,4,4,18,14);break;case"script":null!=(s=mxStencilRegistry.getStencil("mxgraph.bpmn.script_task"))&&s.drawShape(t,this,3,3,19,18)}e=mxUtils.getValue(this.style,"outline","none"),n=mxUtils.getValue(this.style,"symbol","standard");mxShapeBpmnEvent.prototype.strictDrawShape.call(this,t,0,0,20,20,e,n)},mxCellRenderer.registerShape(mxShapeBpmn2Task.prototype.cst.TASK,mxShapeBpmn2Task),mxUtils.extend(mxShapeBpmn2Data,mxCellRenderer.prototype.getShape("note")),mxShapeBpmn2Data.prototype.cst={DATA:"mxgraph.bpmn.data"},mxShapeBpmn2Data.prototype.customProperties=[{name:"bpmnTransferType",dispName:"Transfer Type",defVal:"none",type:"enum",enumList:[{val:"none",dispName:"None"},{val:"input",dispName:"Input"},{val:"output",dispName:"Output"}]},{name:"isCollection",dispName:"Collection",type:"bool"}],mxShapeBpmn2Data.prototype.paintVertexShape=function(t,e,n,i,l){mxCellRenderer.prototype.getShape("note").prototype.paintVertexShape.call(this,t,e,n,i,l);var s,e=mxUtils.getValue(this.style,"bpmnTransferType","none"),n=mxUtils.getValue(this.style,"isCollection",!1);t.setShadow(!1),"input"!==e&&"output"!==e||(t.translate(3,3),t.begin(),t.moveTo(0,12*.3),t.lineTo(14*.55,12*.3),t.lineTo(14*.55,0),t.lineTo(14,6),t.lineTo(14*.55,12),t.lineTo(14*.55,12*.7),t.lineTo(0,12*.7),t.close(),t.translate(-3,-3),"input"===e?t.stroke():(e=mxUtils.getValue(this.style,"fillColor","#ffffff"),s=mxUtils.getValue(this.style,"strokeColor","#000000"),t.setFillColor(s),t.fillAndStroke(),t.setFillColor(e))),n&&(t.translate(.5*i-6,l-12),t.begin(),t.moveTo(2.4,0),t.lineTo(2.4,12),t.moveTo(6,0),t.lineTo(6,12),t.moveTo(9.6,0),t.lineTo(9.6,12),t.stroke(),t.translate(.5*-i+6,12-l))},mxCellRenderer.registerShape(mxShapeBpmn2Data.prototype.cst.DATA,mxShapeBpmn2Data),Graph.handleFactory[mxShapeBpmn2Data.prototype.cst.DATA]=Graph.handleFactory.note,mxUtils.extend(mxShapeBpmn2Swimlane,mxSwimlane),mxShapeBpmn2Swimlane.prototype.cst={SWIMLANE:"mxgraph.bpmn.swimlane"},mxShapeBpmn2Swimlane.prototype.customProperties=[{name:"isCollection",dispName:"Collection",type:"bool"}],mxShapeBpmn2Swimlane.prototype.paintVertexShape=function(t,e,n,i,l){mxSwimlane.prototype.paintVertexShape.call(this,t,e,n,i,l);e=mxUtils.getValue(this.style,"isCollection",!1);t.setShadow(!1),e&&(t.translate(.5*i-6,l-12),t.begin(),t.moveTo(2.4,0),t.lineTo(2.4,12),t.moveTo(6,0),t.lineTo(6,12),t.moveTo(9.6,0),t.lineTo(9.6,12),t.stroke(),t.translate(.5*-i+6,12-l))},mxCellRenderer.registerShape(mxShapeBpmn2Swimlane.prototype.cst.SWIMLANE,mxShapeBpmn2Swimlane),Graph.handleFactory[mxShapeBpmn2Swimlane.prototype.cst.SWIMLANE]=Graph.handleFactory.swimlane,mxUtils.extend(mxShapeBpmn2Conversation,mxHexagon),mxShapeBpmn2Conversation.prototype.customProperties=[{name:"bpmnConversationType",dispName:"Type",defVal:"conv",type:"enum",enumList:[{val:"conv",dispName:"Conversation"},{val:"call",dispName:"Call"}]},{name:"isLoopSub",dispName:"Subprocess",type:"bool"}],mxShapeBpmn2Conversation.prototype.cst={CONVERSATION:"mxgraph.bpmn.conversation"},mxShapeBpmn2Conversation.prototype.paintVertexShape=function(t,e,n,i,l){var s=mxUtils.getValue(this.style,"bpmnConversationType","conv"),o=mxUtils.getValue(this.style,"strokeWidth",1);"call"==s&&t.setStrokeWidth(4*o),t.translate(e,n),t.begin(),t.moveTo(0,.5*l),t.lineTo(.25*i,0),t.lineTo(.75*i,0),t.lineTo(i,.5*l),t.lineTo(.75*i,l),t.lineTo(.25*i,l),t.close(),t.fillAndStroke(),"call"==s&&t.setStrokeWidth(o),mxUtils.getValue(this.style,"isLoopSub",!1)&&(t.translate(.5*i-7,l-14),t.rect(0,0,14,14),t.stroke(),t.begin(),t.moveTo(4,7),t.lineTo(10,7),t.moveTo(7,4),t.lineTo(7,10),t.stroke())},mxCellRenderer.registerShape(mxShapeBpmn2Conversation.prototype.cst.CONVERSATION,mxShapeBpmn2Conversation),__mxOutput.mxBpmnShape2="undefined"!=typeof mxBpmnShape2?mxBpmnShape2:void 0,Graph.prototype.transparentBackground=!1,Graph.prototype.grid=!0,Graph.prototype.defaultThemes["default-style2"]=mxUtils.parseXml('<mxStylesheet><add as="defaultVertex"><add as="shape" value="label"/><add as="perimeter" value="rectanglePerimeter"/><add as="fontSize" value="12"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="fillColor" value="default"/><add as="strokeColor" value="default"/><add as="fontColor" value="default"/></add><add as="defaultEdge"><add as="shape" value="connector"/><add as="labelBackgroundColor" value="default"/><add as="endArrow" value="classic"/><add as="fontSize" value="11"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="rounded" value="1"/><add as="strokeColor" value="default"/><add as="fontColor" value="default"/></add><add as="text"><add as="fillColor" value="none"/><add as="gradientColor" value="none"/><add as="strokeColor" value="none"/><add as="align" value="left"/><add as="verticalAlign" value="top"/></add><add as="edgeLabel" extend="text"><add as="labelBackgroundColor" value="default"/><add as="fontSize" value="11"/></add><add as="label"><add as="fontStyle" value="1"/><add as="align" value="left"/><add as="verticalAlign" value="middle"/><add as="spacing" value="2"/><add as="spacingLeft" value="52"/><add as="imageWidth" value="42"/><add as="imageHeight" value="42"/><add as="rounded" value="1"/></add><add as="icon" extend="label"><add as="align" value="center"/><add as="imageAlign" value="center"/><add as="verticalLabelPosition" value="bottom"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="4"/><add as="labelBackgroundColor" value="default"/><add as="spacing" value="0"/><add as="spacingLeft" value="0"/><add as="spacingTop" value="6"/><add as="fontStyle" value="0"/><add as="imageWidth" value="48"/><add as="imageHeight" value="48"/></add><add as="swimlane"><add as="shape" value="swimlane"/><add as="fontSize" value="12"/><add as="fontStyle" value="1"/><add as="startSize" value="23"/></add><add as="group"><add as="verticalAlign" value="top"/><add as="fillColor" value="none"/><add as="strokeColor" value="none"/><add as="gradientColor" value="none"/><add as="pointerEvents" value="0"/></add><add as="ellipse"><add as="shape" value="ellipse"/><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombus"><add as="shape" value="rhombus"/><add as="perimeter" value="rhombusPerimeter"/></add><add as="triangle"><add as="shape" value="triangle"/><add as="perimeter" value="trianglePerimeter"/></add><add as="line"><add as="shape" value="line"/><add as="strokeWidth" value="4"/><add as="labelBackgroundColor" value="default"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="8"/></add><add as="image"><add as="shape" value="image"/><add as="labelBackgroundColor" value="default"/><add as="verticalAlign" value="top"/><add as="verticalLabelPosition" value="bottom"/></add><add as="roundImage" extend="image"><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombusImage" extend="image"><add as="perimeter" value="rhombusPerimeter"/></add><add as="arrow"><add as="shape" value="arrow"/><add as="edgeStyle" value="none"/><add as="fillColor" value="default"/></add><add as="fancy"><add as="shadow" value="1"/><add as="glass" value="1"/></add><add as="gray" extend="fancy"><add as="gradientColor" value="#B3B3B3"/><add as="fillColor" value="#F5F5F5"/><add as="strokeColor" value="#666666"/></add><add as="blue" extend="fancy"><add as="gradientColor" value="#7EA6E0"/><add as="fillColor" value="#DAE8FC"/><add as="strokeColor" value="#6C8EBF"/></add><add as="green" extend="fancy"><add as="gradientColor" value="#97D077"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#82B366"/></add><add as="turquoise" extend="fancy"><add as="gradientColor" value="#67AB9F"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#6A9153"/></add><add as="yellow" extend="fancy"><add as="gradientColor" value="#FFD966"/><add as="fillColor" value="#FFF2CC"/><add as="strokeColor" value="#D6B656"/></add><add as="orange" extend="fancy"><add as="gradientColor" value="#FFA500"/><add as="fillColor" value="#FFCD28"/><add as="strokeColor" value="#D79B00"/></add><add as="red" extend="fancy"><add as="gradientColor" value="#EA6B66"/><add as="fillColor" value="#F8CECC"/><add as="strokeColor" value="#B85450"/></add><add as="pink" extend="fancy"><add as="gradientColor" value="#B5739D"/><add as="fillColor" value="#E6D0DE"/><add as="strokeColor" value="#996185"/></add><add as="purple" extend="fancy"><add as="gradientColor" value="#8C6C9C"/><add as="fillColor" value="#E1D5E7"/><add as="strokeColor" value="#9673A6"/></add><add as="plain-gray"><add as="gradientColor" value="#B3B3B3"/><add as="fillColor" value="#F5F5F5"/><add as="strokeColor" value="#666666"/></add><add as="plain-blue"><add as="gradientColor" value="#7EA6E0"/><add as="fillColor" value="#DAE8FC"/><add as="strokeColor" value="#6C8EBF"/></add><add as="plain-green"><add as="gradientColor" value="#97D077"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#82B366"/></add><add as="plain-turquoise"><add as="gradientColor" value="#67AB9F"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#6A9153"/></add><add as="plain-yellow"><add as="gradientColor" value="#FFD966"/><add as="fillColor" value="#FFF2CC"/><add as="strokeColor" value="#D6B656"/></add><add as="plain-orange"><add as="gradientColor" value="#FFA500"/><add as="fillColor" value="#FFCD28"/><add as="strokeColor" value="#D79B00"/></add><add as="plain-red"><add as="gradientColor" value="#EA6B66"/><add as="fillColor" value="#F8CECC"/><add as="strokeColor" value="#B85450"/></add><add as="plain-pink"><add as="gradientColor" value="#B5739D"/><add as="fillColor" value="#E6D0DE"/><add as="strokeColor" value="#996185"/></add><add as="plain-purple"><add as="gradientColor" value="#8C6C9C"/><add as="fillColor" value="#E1D5E7"/><add as="strokeColor" value="#9673A6"/></add></mxStylesheet>').documentElement,Graph.prototype.defaultThemeName="default-style2",Graph.prototype.getFormatValue=function(t){return this.format.getFormatValue(t)},__mxOutput.Graph=void 0!==Graph?Graph:void 0,__mxOutput.WeightedCellSorter=WeightedCellSorter,__mxOutput.MedianCellSorter=MedianCellSorter,__mxOutput.mxSelectionChange=mxSelectionChange,__mxOutput.mxCurrentRootChange=mxCurrentRootChange,__mxOutput.mxRootChange=mxRootChange,__mxOutput.mxChildChange=mxChildChange,__mxOutput.mxTerminalChange=mxTerminalChange,__mxOutput.mxValueChange=mxValueChange,__mxOutput.mxStyleChange=mxStyleChange,__mxOutput.mxGeometryChange=mxGeometryChange,__mxOutput.mxCollapseChange=mxCollapseChange,__mxOutput.mxVisibleChange=mxVisibleChange,__mxOutput.mxCellAttributeChange=mxCellAttributeChange,__mxOutput};export default factory;